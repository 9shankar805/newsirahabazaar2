var DO=e=>{throw TypeError(e)};var gN=(e,t,n)=>t.has(e)||DO("Cannot "+n);var fe=(e,t,n)=>(gN(e,t,"read from private field"),n?n.call(e):t.get(e)),xt=(e,t,n)=>t.has(e)?DO("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),et=(e,t,n,s)=>(gN(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),It=(e,t,n)=>(gN(e,t,"access private method"),n);var ov=(e,t,n,s)=>({set _(i){et(e,t,i,n)},get _(){return fe(e,t,s)}});function tX(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ur(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m$={exports:{}},Kj={},f$={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ng=Symbol.for("react.element"),rX=Symbol.for("react.portal"),nX=Symbol.for("react.fragment"),sX=Symbol.for("react.strict_mode"),iX=Symbol.for("react.profiler"),aX=Symbol.for("react.provider"),oX=Symbol.for("react.context"),lX=Symbol.for("react.forward_ref"),cX=Symbol.for("react.suspense"),dX=Symbol.for("react.memo"),uX=Symbol.for("react.lazy"),IO=Symbol.iterator;function hX(e){return e===null||typeof e!="object"?null:(e=IO&&e[IO]||e["@@iterator"],typeof e=="function"?e:null)}var p$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x$=Object.assign,g$={};function Nm(e,t,n){this.props=e,this.context=t,this.refs=g$,this.updater=n||p$}Nm.prototype.isReactComponent={};Nm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function v$(){}v$.prototype=Nm.prototype;function uC(e,t,n){this.props=e,this.context=t,this.refs=g$,this.updater=n||p$}var hC=uC.prototype=new v$;hC.constructor=uC;x$(hC,Nm.prototype);hC.isPureReactComponent=!0;var LO=Array.isArray,y$=Object.prototype.hasOwnProperty,mC={current:null},j$={key:!0,ref:!0,__self:!0,__source:!0};function b$(e,t,n){var s,i={},a=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)y$.call(t,s)&&!j$.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:ng,type:e,key:a,ref:o,props:i,_owner:mC.current}}function mX(e,t){return{$$typeof:ng,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fC(e){return typeof e=="object"&&e!==null&&e.$$typeof===ng}function fX(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var RO=/\/+/g;function vN(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fX(""+e.key):t.toString(36)}function ny(e,t,n,s,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ng:case rX:o=!0}}if(o)return o=e,i=i(o),e=s===""?"."+vN(o,0):s,LO(i)?(n="",e!=null&&(n=e.replace(RO,"$&/")+"/"),ny(i,t,n,"",function(d){return d})):i!=null&&(fC(i)&&(i=mX(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(RO,"$&/")+"/")+e)),t.push(i)),1;if(o=0,s=s===""?".":s+":",LO(e))for(var l=0;l<e.length;l++){a=e[l];var c=s+vN(a,l);o+=ny(a,t,n,c,i)}else if(c=hX(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=s+vN(a,l++),o+=ny(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function lv(e,t,n){if(e==null)return e;var s=[],i=0;return ny(e,s,"","",function(a){return t.call(n,a,i++)}),s}function pX(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vs={current:null},sy={transition:null},xX={ReactCurrentDispatcher:vs,ReactCurrentBatchConfig:sy,ReactCurrentOwner:mC};function w$(){throw Error("act(...) is not supported in production builds of React.")}Ut.Children={map:lv,forEach:function(e,t,n){lv(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return lv(e,function(){t++}),t},toArray:function(e){return lv(e,function(t){return t})||[]},only:function(e){if(!fC(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ut.Component=Nm;Ut.Fragment=nX;Ut.Profiler=iX;Ut.PureComponent=uC;Ut.StrictMode=sX;Ut.Suspense=cX;Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xX;Ut.act=w$;Ut.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=x$({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=mC.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)y$.call(t,c)&&!j$.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:ng,type:e.type,key:i,ref:a,props:s,_owner:o}};Ut.createContext=function(e){return e={$$typeof:oX,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:aX,_context:e},e.Consumer=e};Ut.createElement=b$;Ut.createFactory=function(e){var t=b$.bind(null,e);return t.type=e,t};Ut.createRef=function(){return{current:null}};Ut.forwardRef=function(e){return{$$typeof:lX,render:e}};Ut.isValidElement=fC;Ut.lazy=function(e){return{$$typeof:uX,_payload:{_status:-1,_result:e},_init:pX}};Ut.memo=function(e,t){return{$$typeof:dX,type:e,compare:t===void 0?null:t}};Ut.startTransition=function(e){var t=sy.transition;sy.transition={};try{e()}finally{sy.transition=t}};Ut.unstable_act=w$;Ut.useCallback=function(e,t){return vs.current.useCallback(e,t)};Ut.useContext=function(e){return vs.current.useContext(e)};Ut.useDebugValue=function(){};Ut.useDeferredValue=function(e){return vs.current.useDeferredValue(e)};Ut.useEffect=function(e,t){return vs.current.useEffect(e,t)};Ut.useId=function(){return vs.current.useId()};Ut.useImperativeHandle=function(e,t,n){return vs.current.useImperativeHandle(e,t,n)};Ut.useInsertionEffect=function(e,t){return vs.current.useInsertionEffect(e,t)};Ut.useLayoutEffect=function(e,t){return vs.current.useLayoutEffect(e,t)};Ut.useMemo=function(e,t){return vs.current.useMemo(e,t)};Ut.useReducer=function(e,t,n){return vs.current.useReducer(e,t,n)};Ut.useRef=function(e){return vs.current.useRef(e)};Ut.useState=function(e){return vs.current.useState(e)};Ut.useSyncExternalStore=function(e,t,n){return vs.current.useSyncExternalStore(e,t,n)};Ut.useTransition=function(){return vs.current.useTransition()};Ut.version="18.3.1";f$.exports=Ut;var b=f$.exports;const te=ur(b),N$=tX({__proto__:null,default:te},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gX=b,vX=Symbol.for("react.element"),yX=Symbol.for("react.fragment"),jX=Object.prototype.hasOwnProperty,bX=gX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wX={key:!0,ref:!0,__self:!0,__source:!0};function S$(e,t,n){var s,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)jX.call(t,s)&&!wX.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:vX,type:e,key:a,ref:o,props:i,_owner:bX.current}}Kj.Fragment=yX;Kj.jsx=S$;Kj.jsxs=S$;m$.exports=Kj;var r=m$.exports,_$={exports:{}},li={},P$={exports:{}},C$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,B){var z=q.length;q.push(B);e:for(;0<z;){var H=z-1>>>1,X=q[H];if(0<i(X,B))q[H]=B,q[z]=X,z=H;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var B=q[0],z=q.pop();if(z!==B){q[0]=z;e:for(var H=0,X=q.length,ge=X>>>1;H<ge;){var Se=2*(H+1)-1,F=q[Se],pe=Se+1,we=q[pe];if(0>i(F,z))pe<X&&0>i(we,F)?(q[H]=we,q[pe]=z,H=pe):(q[H]=F,q[Se]=z,H=Se);else if(pe<X&&0>i(we,z))q[H]=we,q[pe]=z,H=pe;else break e}}return B}function i(q,B){var z=q.sortIndex-B.sortIndex;return z!==0?z:q.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,m=null,f=3,v=!1,p=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(q){for(var B=n(d);B!==null;){if(B.callback===null)s(d);else if(B.startTime<=q)s(d),B.sortIndex=B.expirationTime,t(c,B);else break;B=n(d)}}function C(q){if(x=!1,N(q),!p)if(n(c)!==null)p=!0,U(P);else{var B=n(d);B!==null&&Q(C,B.startTime-q)}}function P(q,B){p=!1,x&&(x=!1,w(O),O=-1),v=!0;var z=f;try{for(N(B),m=n(c);m!==null&&(!(m.expirationTime>B)||q&&!I());){var H=m.callback;if(typeof H=="function"){m.callback=null,f=m.priorityLevel;var X=H(m.expirationTime<=B);B=e.unstable_now(),typeof X=="function"?m.callback=X:m===n(c)&&s(c),N(B)}else s(c);m=n(c)}if(m!==null)var ge=!0;else{var Se=n(d);Se!==null&&Q(C,Se.startTime-B),ge=!1}return ge}finally{m=null,f=z,v=!1}}var k=!1,_=null,O=-1,M=5,T=-1;function I(){return!(e.unstable_now()-T<M)}function A(){if(_!==null){var q=e.unstable_now();T=q;var B=!0;try{B=_(!0,q)}finally{B?V():(k=!1,_=null)}}else k=!1}var V;if(typeof j=="function")V=function(){j(A)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,W=D.port2;D.port1.onmessage=A,V=function(){W.postMessage(null)}}else V=function(){y(A,0)};function U(q){_=q,k||(k=!0,V())}function Q(q,B){O=y(function(){q(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){p||v||(p=!0,U(P))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(q){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var z=f;f=B;try{return q()}finally{f=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,B){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var z=f;f=q;try{return B()}finally{f=z}},e.unstable_scheduleCallback=function(q,B,z){var H=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?H+z:H):z=H,q){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=z+X,q={id:h++,callback:B,priorityLevel:q,startTime:z,expirationTime:X,sortIndex:-1},z>H?(q.sortIndex=z,t(d,q),n(c)===null&&q===n(d)&&(x?(w(O),O=-1):x=!0,Q(C,z-H))):(q.sortIndex=X,t(c,q),p||v||(p=!0,U(P))),q},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(q){var B=f;return function(){var z=f;f=B;try{return q.apply(this,arguments)}finally{f=z}}}})(C$);P$.exports=C$;var NX=P$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SX=b,ni=NX;function ze(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k$=new Set,bp={};function Yd(e,t){Th(e,t),Th(e+"Capture",t)}function Th(e,t){for(bp[e]=t,e=0;e<t.length;e++)k$.add(t[e])}var $o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gS=Object.prototype.hasOwnProperty,_X=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$O={},FO={};function PX(e){return gS.call(FO,e)?!0:gS.call($O,e)?!1:_X.test(e)?FO[e]=!0:($O[e]=!0,!1)}function CX(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kX(e,t,n,s){if(t===null||typeof t>"u"||CX(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ys(e,t,n,s,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Un[e]=new ys(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Un[t]=new ys(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Un[e]=new ys(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Un[e]=new ys(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Un[e]=new ys(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Un[e]=new ys(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Un[e]=new ys(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Un[e]=new ys(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Un[e]=new ys(e,5,!1,e.toLowerCase(),null,!1,!1)});var pC=/[\-:]([a-z])/g;function xC(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(pC,xC);Un[t]=new ys(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(pC,xC);Un[t]=new ys(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(pC,xC);Un[t]=new ys(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Un[e]=new ys(e,1,!1,e.toLowerCase(),null,!1,!1)});Un.xlinkHref=new ys("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Un[e]=new ys(e,1,!1,e.toLowerCase(),null,!0,!0)});function gC(e,t,n,s){var i=Un.hasOwnProperty(t)?Un[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kX(t,n,i,s)&&(n=null),s||i===null?PX(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,s=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Jo=SX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cv=Symbol.for("react.element"),Au=Symbol.for("react.portal"),Eu=Symbol.for("react.fragment"),vC=Symbol.for("react.strict_mode"),vS=Symbol.for("react.profiler"),T$=Symbol.for("react.provider"),A$=Symbol.for("react.context"),yC=Symbol.for("react.forward_ref"),yS=Symbol.for("react.suspense"),jS=Symbol.for("react.suspense_list"),jC=Symbol.for("react.memo"),pl=Symbol.for("react.lazy"),E$=Symbol.for("react.offscreen"),zO=Symbol.iterator;function mf(e){return e===null||typeof e!="object"?null:(e=zO&&e[zO]||e["@@iterator"],typeof e=="function"?e:null)}var Kr=Object.assign,yN;function zf(e){if(yN===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);yN=t&&t[1]||""}return`
`+yN+e}var jN=!1;function bN(e,t){if(!e||jN)return"";jN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{jN=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zf(e):""}function TX(e){switch(e.tag){case 5:return zf(e.type);case 16:return zf("Lazy");case 13:return zf("Suspense");case 19:return zf("SuspenseList");case 0:case 2:case 15:return e=bN(e.type,!1),e;case 11:return e=bN(e.type.render,!1),e;case 1:return e=bN(e.type,!0),e;default:return""}}function bS(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Eu:return"Fragment";case Au:return"Portal";case vS:return"Profiler";case vC:return"StrictMode";case yS:return"Suspense";case jS:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case A$:return(e.displayName||"Context")+".Consumer";case T$:return(e._context.displayName||"Context")+".Provider";case yC:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jC:return t=e.displayName||null,t!==null?t:bS(e.type)||"Memo";case pl:t=e._payload,e=e._init;try{return bS(e(t))}catch{}}return null}function AX(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bS(t);case 8:return t===vC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function rc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function O$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function EX(e){var t=O$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dv(e){e._valueTracker||(e._valueTracker=EX(e))}function M$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=O$(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function ky(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wS(e,t){var n=t.checked;return Kr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function BO(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=rc(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function D$(e,t){t=t.checked,t!=null&&gC(e,"checked",t,!1)}function NS(e,t){D$(e,t);var n=rc(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?SS(e,t.type,n):t.hasOwnProperty("defaultValue")&&SS(e,t.type,rc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function VO(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function SS(e,t,n){(t!=="number"||ky(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Bf=Array.isArray;function Qu(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+rc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function _S(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ze(91));return Kr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function UO(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ze(92));if(Bf(n)){if(1<n.length)throw Error(ze(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:rc(n)}}function I$(e,t){var n=rc(t.value),s=rc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function WO(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function L$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function PS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?L$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uv,R$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uv=uv||document.createElement("div"),uv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ep={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OX=["Webkit","ms","Moz","O"];Object.keys(ep).forEach(function(e){OX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ep[t]=ep[e]})});function $$(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ep.hasOwnProperty(e)&&ep[e]?(""+t).trim():t+"px"}function F$(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=$$(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,i):e[n]=i}}var MX=Kr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function CS(e,t){if(t){if(MX[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ze(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ze(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ze(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ze(62))}}function kS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TS=null;function bC(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var AS=null,Ju=null,eh=null;function HO(e){if(e=ag(e)){if(typeof AS!="function")throw Error(ze(280));var t=e.stateNode;t&&(t=Qj(t),AS(e.stateNode,e.type,t))}}function z$(e){Ju?eh?eh.push(e):eh=[e]:Ju=e}function B$(){if(Ju){var e=Ju,t=eh;if(eh=Ju=null,HO(e),t)for(e=0;e<t.length;e++)HO(t[e])}}function V$(e,t){return e(t)}function U$(){}var wN=!1;function W$(e,t,n){if(wN)return e(t,n);wN=!0;try{return V$(e,t,n)}finally{wN=!1,(Ju!==null||eh!==null)&&(U$(),B$())}}function Np(e,t){var n=e.stateNode;if(n===null)return null;var s=Qj(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ze(231,t,typeof n));return n}var ES=!1;if($o)try{var ff={};Object.defineProperty(ff,"passive",{get:function(){ES=!0}}),window.addEventListener("test",ff,ff),window.removeEventListener("test",ff,ff)}catch{ES=!1}function DX(e,t,n,s,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var tp=!1,Ty=null,Ay=!1,OS=null,IX={onError:function(e){tp=!0,Ty=e}};function LX(e,t,n,s,i,a,o,l,c){tp=!1,Ty=null,DX.apply(IX,arguments)}function RX(e,t,n,s,i,a,o,l,c){if(LX.apply(this,arguments),tp){if(tp){var d=Ty;tp=!1,Ty=null}else throw Error(ze(198));Ay||(Ay=!0,OS=d)}}function Xd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function H$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qO(e){if(Xd(e)!==e)throw Error(ze(188))}function $X(e){var t=e.alternate;if(!t){if(t=Xd(e),t===null)throw Error(ze(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qO(i),e;if(a===s)return qO(i),t;a=a.sibling}throw Error(ze(188))}if(n.return!==s.return)n=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o)throw Error(ze(189))}}if(n.alternate!==s)throw Error(ze(190))}if(n.tag!==3)throw Error(ze(188));return n.stateNode.current===n?e:t}function q$(e){return e=$X(e),e!==null?K$(e):null}function K$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=K$(e);if(t!==null)return t;e=e.sibling}return null}var G$=ni.unstable_scheduleCallback,KO=ni.unstable_cancelCallback,FX=ni.unstable_shouldYield,zX=ni.unstable_requestPaint,nn=ni.unstable_now,BX=ni.unstable_getCurrentPriorityLevel,wC=ni.unstable_ImmediatePriority,Z$=ni.unstable_UserBlockingPriority,Ey=ni.unstable_NormalPriority,VX=ni.unstable_LowPriority,Y$=ni.unstable_IdlePriority,Gj=null,Ea=null;function UX(e){if(Ea&&typeof Ea.onCommitFiberRoot=="function")try{Ea.onCommitFiberRoot(Gj,e,void 0,(e.current.flags&128)===128)}catch{}}var na=Math.clz32?Math.clz32:qX,WX=Math.log,HX=Math.LN2;function qX(e){return e>>>=0,e===0?32:31-(WX(e)/HX|0)|0}var hv=64,mv=4194304;function Vf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Oy(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?s=Vf(l):(a&=o,a!==0&&(s=Vf(a)))}else o=n&~i,o!==0?s=Vf(o):a!==0&&(s=Vf(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-na(t),i=1<<n,s|=e[n],t&=~i;return s}function KX(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GX(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-na(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&s)&&(i[o]=KX(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function MS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function X$(){var e=hv;return hv<<=1,!(hv&4194240)&&(hv=64),e}function NN(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function sg(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-na(t),e[t]=n}function ZX(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-na(n),a=1<<i;t[i]=0,s[i]=-1,e[i]=-1,n&=~a}}function NC(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-na(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}var dr=0;function Q$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var J$,SC,e6,t6,r6,DS=!1,fv=[],$l=null,Fl=null,zl=null,Sp=new Map,_p=new Map,vl=[],YX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GO(e,t){switch(e){case"focusin":case"focusout":$l=null;break;case"dragenter":case"dragleave":Fl=null;break;case"mouseover":case"mouseout":zl=null;break;case"pointerover":case"pointerout":Sp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_p.delete(t.pointerId)}}function pf(e,t,n,s,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},t!==null&&(t=ag(t),t!==null&&SC(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function XX(e,t,n,s,i){switch(t){case"focusin":return $l=pf($l,e,t,n,s,i),!0;case"dragenter":return Fl=pf(Fl,e,t,n,s,i),!0;case"mouseover":return zl=pf(zl,e,t,n,s,i),!0;case"pointerover":var a=i.pointerId;return Sp.set(a,pf(Sp.get(a)||null,e,t,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,_p.set(a,pf(_p.get(a)||null,e,t,n,s,i)),!0}return!1}function n6(e){var t=Zc(e.target);if(t!==null){var n=Xd(t);if(n!==null){if(t=n.tag,t===13){if(t=H$(n),t!==null){e.blockedOn=t,r6(e.priority,function(){e6(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function iy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=IS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);TS=s,n.target.dispatchEvent(s),TS=null}else return t=ag(n),t!==null&&SC(t),e.blockedOn=n,!1;t.shift()}return!0}function ZO(e,t,n){iy(e)&&n.delete(t)}function QX(){DS=!1,$l!==null&&iy($l)&&($l=null),Fl!==null&&iy(Fl)&&(Fl=null),zl!==null&&iy(zl)&&(zl=null),Sp.forEach(ZO),_p.forEach(ZO)}function xf(e,t){e.blockedOn===t&&(e.blockedOn=null,DS||(DS=!0,ni.unstable_scheduleCallback(ni.unstable_NormalPriority,QX)))}function Pp(e){function t(i){return xf(i,e)}if(0<fv.length){xf(fv[0],e);for(var n=1;n<fv.length;n++){var s=fv[n];s.blockedOn===e&&(s.blockedOn=null)}}for($l!==null&&xf($l,e),Fl!==null&&xf(Fl,e),zl!==null&&xf(zl,e),Sp.forEach(t),_p.forEach(t),n=0;n<vl.length;n++)s=vl[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<vl.length&&(n=vl[0],n.blockedOn===null);)n6(n),n.blockedOn===null&&vl.shift()}var th=Jo.ReactCurrentBatchConfig,My=!0;function JX(e,t,n,s){var i=dr,a=th.transition;th.transition=null;try{dr=1,_C(e,t,n,s)}finally{dr=i,th.transition=a}}function eQ(e,t,n,s){var i=dr,a=th.transition;th.transition=null;try{dr=4,_C(e,t,n,s)}finally{dr=i,th.transition=a}}function _C(e,t,n,s){if(My){var i=IS(e,t,n,s);if(i===null)MN(e,t,s,Dy,n),GO(e,s);else if(XX(i,e,t,n,s))s.stopPropagation();else if(GO(e,s),t&4&&-1<YX.indexOf(e)){for(;i!==null;){var a=ag(i);if(a!==null&&J$(a),a=IS(e,t,n,s),a===null&&MN(e,t,s,Dy,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else MN(e,t,s,null,n)}}var Dy=null;function IS(e,t,n,s){if(Dy=null,e=bC(s),e=Zc(e),e!==null)if(t=Xd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=H$(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Dy=e,null}function s6(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BX()){case wC:return 1;case Z$:return 4;case Ey:case VX:return 16;case Y$:return 536870912;default:return 16}default:return 16}}var El=null,PC=null,ay=null;function i6(){if(ay)return ay;var e,t=PC,n=t.length,s,i="value"in El?El.value:El.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===i[a-s];s++);return ay=i.slice(e,1<s?1-s:void 0)}function oy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pv(){return!0}function YO(){return!1}function ci(e){function t(n,s,i,a,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?pv:YO,this.isPropagationStopped=YO,this}return Kr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pv)},persist:function(){},isPersistent:pv}),t}var Sm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},CC=ci(Sm),ig=Kr({},Sm,{view:0,detail:0}),tQ=ci(ig),SN,_N,gf,Zj=Kr({},ig,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kC,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gf&&(gf&&e.type==="mousemove"?(SN=e.screenX-gf.screenX,_N=e.screenY-gf.screenY):_N=SN=0,gf=e),SN)},movementY:function(e){return"movementY"in e?e.movementY:_N}}),XO=ci(Zj),rQ=Kr({},Zj,{dataTransfer:0}),nQ=ci(rQ),sQ=Kr({},ig,{relatedTarget:0}),PN=ci(sQ),iQ=Kr({},Sm,{animationName:0,elapsedTime:0,pseudoElement:0}),aQ=ci(iQ),oQ=Kr({},Sm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lQ=ci(oQ),cQ=Kr({},Sm,{data:0}),QO=ci(cQ),dQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hQ[e])?!!t[e]:!1}function kC(){return mQ}var fQ=Kr({},ig,{key:function(e){if(e.key){var t=dQ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kC,charCode:function(e){return e.type==="keypress"?oy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pQ=ci(fQ),xQ=Kr({},Zj,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JO=ci(xQ),gQ=Kr({},ig,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kC}),vQ=ci(gQ),yQ=Kr({},Sm,{propertyName:0,elapsedTime:0,pseudoElement:0}),jQ=ci(yQ),bQ=Kr({},Zj,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wQ=ci(bQ),NQ=[9,13,27,32],TC=$o&&"CompositionEvent"in window,rp=null;$o&&"documentMode"in document&&(rp=document.documentMode);var SQ=$o&&"TextEvent"in window&&!rp,a6=$o&&(!TC||rp&&8<rp&&11>=rp),e4=" ",t4=!1;function o6(e,t){switch(e){case"keyup":return NQ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l6(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ou=!1;function _Q(e,t){switch(e){case"compositionend":return l6(t);case"keypress":return t.which!==32?null:(t4=!0,e4);case"textInput":return e=t.data,e===e4&&t4?null:e;default:return null}}function PQ(e,t){if(Ou)return e==="compositionend"||!TC&&o6(e,t)?(e=i6(),ay=PC=El=null,Ou=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return a6&&t.locale!=="ko"?null:t.data;default:return null}}var CQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!CQ[e.type]:t==="textarea"}function c6(e,t,n,s){z$(s),t=Iy(t,"onChange"),0<t.length&&(n=new CC("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var np=null,Cp=null;function kQ(e){j6(e,0)}function Yj(e){var t=Iu(e);if(M$(t))return e}function TQ(e,t){if(e==="change")return t}var d6=!1;if($o){var CN;if($o){var kN="oninput"in document;if(!kN){var n4=document.createElement("div");n4.setAttribute("oninput","return;"),kN=typeof n4.oninput=="function"}CN=kN}else CN=!1;d6=CN&&(!document.documentMode||9<document.documentMode)}function s4(){np&&(np.detachEvent("onpropertychange",u6),Cp=np=null)}function u6(e){if(e.propertyName==="value"&&Yj(Cp)){var t=[];c6(t,Cp,e,bC(e)),W$(kQ,t)}}function AQ(e,t,n){e==="focusin"?(s4(),np=t,Cp=n,np.attachEvent("onpropertychange",u6)):e==="focusout"&&s4()}function EQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yj(Cp)}function OQ(e,t){if(e==="click")return Yj(t)}function MQ(e,t){if(e==="input"||e==="change")return Yj(t)}function DQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oa=typeof Object.is=="function"?Object.is:DQ;function kp(e,t){if(oa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!gS.call(t,i)||!oa(e[i],t[i]))return!1}return!0}function i4(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function a4(e,t){var n=i4(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=i4(n)}}function h6(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?h6(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function m6(){for(var e=window,t=ky();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ky(e.document)}return t}function AC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function IQ(e){var t=m6(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&h6(n.ownerDocument.documentElement,n)){if(s!==null&&AC(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!e.extend&&a>s&&(i=s,s=a,a=i),i=a4(n,a);var o=a4(n,s);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var LQ=$o&&"documentMode"in document&&11>=document.documentMode,Mu=null,LS=null,sp=null,RS=!1;function o4(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;RS||Mu==null||Mu!==ky(s)||(s=Mu,"selectionStart"in s&&AC(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),sp&&kp(sp,s)||(sp=s,s=Iy(LS,"onSelect"),0<s.length&&(t=new CC("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Mu)))}function xv(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Du={animationend:xv("Animation","AnimationEnd"),animationiteration:xv("Animation","AnimationIteration"),animationstart:xv("Animation","AnimationStart"),transitionend:xv("Transition","TransitionEnd")},TN={},f6={};$o&&(f6=document.createElement("div").style,"AnimationEvent"in window||(delete Du.animationend.animation,delete Du.animationiteration.animation,delete Du.animationstart.animation),"TransitionEvent"in window||delete Du.transitionend.transition);function Xj(e){if(TN[e])return TN[e];if(!Du[e])return e;var t=Du[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in f6)return TN[e]=t[n];return e}var p6=Xj("animationend"),x6=Xj("animationiteration"),g6=Xj("animationstart"),v6=Xj("transitionend"),y6=new Map,l4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gc(e,t){y6.set(e,t),Yd(t,[e])}for(var AN=0;AN<l4.length;AN++){var EN=l4[AN],RQ=EN.toLowerCase(),$Q=EN[0].toUpperCase()+EN.slice(1);gc(RQ,"on"+$Q)}gc(p6,"onAnimationEnd");gc(x6,"onAnimationIteration");gc(g6,"onAnimationStart");gc("dblclick","onDoubleClick");gc("focusin","onFocus");gc("focusout","onBlur");gc(v6,"onTransitionEnd");Th("onMouseEnter",["mouseout","mouseover"]);Th("onMouseLeave",["mouseout","mouseover"]);Th("onPointerEnter",["pointerout","pointerover"]);Th("onPointerLeave",["pointerout","pointerover"]);Yd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uf));function c4(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,RX(s,t,void 0,e),e.currentTarget=null}function j6(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;c4(i,l,d),a=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;c4(i,l,d),a=c}}}if(Ay)throw e=OS,Ay=!1,OS=null,e}function Pr(e,t){var n=t[VS];n===void 0&&(n=t[VS]=new Set);var s=e+"__bubble";n.has(s)||(b6(t,e,2,!1),n.add(s))}function ON(e,t,n){var s=0;t&&(s|=4),b6(n,e,s,t)}var gv="_reactListening"+Math.random().toString(36).slice(2);function Tp(e){if(!e[gv]){e[gv]=!0,k$.forEach(function(n){n!=="selectionchange"&&(FQ.has(n)||ON(n,!1,e),ON(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gv]||(t[gv]=!0,ON("selectionchange",!1,t))}}function b6(e,t,n,s){switch(s6(t)){case 1:var i=JX;break;case 4:i=eQ;break;default:i=_C}n=i.bind(null,t,n,e),i=void 0,!ES||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function MN(e,t,n,s,i){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Zc(l),o===null)return;if(c=o.tag,c===5||c===6){s=a=o;continue e}l=l.parentNode}}s=s.return}W$(function(){var d=a,h=bC(n),m=[];e:{var f=y6.get(e);if(f!==void 0){var v=CC,p=e;switch(e){case"keypress":if(oy(n)===0)break e;case"keydown":case"keyup":v=pQ;break;case"focusin":p="focus",v=PN;break;case"focusout":p="blur",v=PN;break;case"beforeblur":case"afterblur":v=PN;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=XO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=nQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=vQ;break;case p6:case x6:case g6:v=aQ;break;case v6:v=jQ;break;case"scroll":v=tQ;break;case"wheel":v=wQ;break;case"copy":case"cut":case"paste":v=lQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=JO}var x=(t&4)!==0,y=!x&&e==="scroll",w=x?f!==null?f+"Capture":null:f;x=[];for(var j=d,N;j!==null;){N=j;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,w!==null&&(C=Np(j,w),C!=null&&x.push(Ap(j,C,N)))),y)break;j=j.return}0<x.length&&(f=new v(f,p,null,n,h),m.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",f&&n!==TS&&(p=n.relatedTarget||n.fromElement)&&(Zc(p)||p[Fo]))break e;if((v||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,v?(p=n.relatedTarget||n.toElement,v=d,p=p?Zc(p):null,p!==null&&(y=Xd(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(v=null,p=d),v!==p)){if(x=XO,C="onMouseLeave",w="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(x=JO,C="onPointerLeave",w="onPointerEnter",j="pointer"),y=v==null?f:Iu(v),N=p==null?f:Iu(p),f=new x(C,j+"leave",v,n,h),f.target=y,f.relatedTarget=N,C=null,Zc(h)===d&&(x=new x(w,j+"enter",p,n,h),x.target=N,x.relatedTarget=y,C=x),y=C,v&&p)t:{for(x=v,w=p,j=0,N=x;N;N=vu(N))j++;for(N=0,C=w;C;C=vu(C))N++;for(;0<j-N;)x=vu(x),j--;for(;0<N-j;)w=vu(w),N--;for(;j--;){if(x===w||w!==null&&x===w.alternate)break t;x=vu(x),w=vu(w)}x=null}else x=null;v!==null&&d4(m,f,v,x,!1),p!==null&&y!==null&&d4(m,y,p,x,!0)}}e:{if(f=d?Iu(d):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var P=TQ;else if(r4(f))if(d6)P=MQ;else{P=EQ;var k=AQ}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=OQ);if(P&&(P=P(e,d))){c6(m,P,n,h);break e}k&&k(e,f,d),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&SS(f,"number",f.value)}switch(k=d?Iu(d):window,e){case"focusin":(r4(k)||k.contentEditable==="true")&&(Mu=k,LS=d,sp=null);break;case"focusout":sp=LS=Mu=null;break;case"mousedown":RS=!0;break;case"contextmenu":case"mouseup":case"dragend":RS=!1,o4(m,n,h);break;case"selectionchange":if(LQ)break;case"keydown":case"keyup":o4(m,n,h)}var _;if(TC)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Ou?o6(e,n)&&(O="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(a6&&n.locale!=="ko"&&(Ou||O!=="onCompositionStart"?O==="onCompositionEnd"&&Ou&&(_=i6()):(El=h,PC="value"in El?El.value:El.textContent,Ou=!0)),k=Iy(d,O),0<k.length&&(O=new QO(O,e,null,n,h),m.push({event:O,listeners:k}),_?O.data=_:(_=l6(n),_!==null&&(O.data=_)))),(_=SQ?_Q(e,n):PQ(e,n))&&(d=Iy(d,"onBeforeInput"),0<d.length&&(h=new QO("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=_))}j6(m,t)})}function Ap(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Iy(e,t){for(var n=t+"Capture",s=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Np(e,n),a!=null&&s.unshift(Ap(e,a,i)),a=Np(e,t),a!=null&&s.push(Ap(e,a,i))),e=e.return}return s}function vu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function d4(e,t,n,s,i){for(var a=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,i?(c=Np(n,a),c!=null&&o.unshift(Ap(n,c,l))):i||(c=Np(n,a),c!=null&&o.push(Ap(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var zQ=/\r\n?/g,BQ=/\u0000|\uFFFD/g;function u4(e){return(typeof e=="string"?e:""+e).replace(zQ,`
`).replace(BQ,"")}function vv(e,t,n){if(t=u4(t),u4(e)!==t&&n)throw Error(ze(425))}function Ly(){}var $S=null,FS=null;function zS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var BS=typeof setTimeout=="function"?setTimeout:void 0,VQ=typeof clearTimeout=="function"?clearTimeout:void 0,h4=typeof Promise=="function"?Promise:void 0,UQ=typeof queueMicrotask=="function"?queueMicrotask:typeof h4<"u"?function(e){return h4.resolve(null).then(e).catch(WQ)}:BS;function WQ(e){setTimeout(function(){throw e})}function DN(e,t){var n=t,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){e.removeChild(i),Pp(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);Pp(t)}function Bl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function m4(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var _m=Math.random().toString(36).slice(2),Sa="__reactFiber$"+_m,Ep="__reactProps$"+_m,Fo="__reactContainer$"+_m,VS="__reactEvents$"+_m,HQ="__reactListeners$"+_m,qQ="__reactHandles$"+_m;function Zc(e){var t=e[Sa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fo]||n[Sa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=m4(e);e!==null;){if(n=e[Sa])return n;e=m4(e)}return t}e=n,n=e.parentNode}return null}function ag(e){return e=e[Sa]||e[Fo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Iu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ze(33))}function Qj(e){return e[Ep]||null}var US=[],Lu=-1;function vc(e){return{current:e}}function Mr(e){0>Lu||(e.current=US[Lu],US[Lu]=null,Lu--)}function wr(e,t){Lu++,US[Lu]=e.current,e.current=t}var nc={},rs=vc(nc),As=vc(!1),Nd=nc;function Ah(e,t){var n=e.type.contextTypes;if(!n)return nc;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Es(e){return e=e.childContextTypes,e!=null}function Ry(){Mr(As),Mr(rs)}function f4(e,t,n){if(rs.current!==nc)throw Error(ze(168));wr(rs,t),wr(As,n)}function w6(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(ze(108,AX(e)||"Unknown",i));return Kr({},n,s)}function $y(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nc,Nd=rs.current,wr(rs,e),wr(As,As.current),!0}function p4(e,t,n){var s=e.stateNode;if(!s)throw Error(ze(169));n?(e=w6(e,t,Nd),s.__reactInternalMemoizedMergedChildContext=e,Mr(As),Mr(rs),wr(rs,e)):Mr(As),wr(As,n)}var fo=null,Jj=!1,IN=!1;function N6(e){fo===null?fo=[e]:fo.push(e)}function KQ(e){Jj=!0,N6(e)}function yc(){if(!IN&&fo!==null){IN=!0;var e=0,t=dr;try{var n=fo;for(dr=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}fo=null,Jj=!1}catch(i){throw fo!==null&&(fo=fo.slice(e+1)),G$(wC,yc),i}finally{dr=t,IN=!1}}return null}var Ru=[],$u=0,Fy=null,zy=0,ji=[],bi=0,Sd=null,jo=1,bo="";function zc(e,t){Ru[$u++]=zy,Ru[$u++]=Fy,Fy=e,zy=t}function S6(e,t,n){ji[bi++]=jo,ji[bi++]=bo,ji[bi++]=Sd,Sd=e;var s=jo;e=bo;var i=32-na(s)-1;s&=~(1<<i),n+=1;var a=32-na(t)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,jo=1<<32-na(t)+i|n<<i|s,bo=a+e}else jo=1<<a|n<<i|s,bo=e}function EC(e){e.return!==null&&(zc(e,1),S6(e,1,0))}function OC(e){for(;e===Fy;)Fy=Ru[--$u],Ru[$u]=null,zy=Ru[--$u],Ru[$u]=null;for(;e===Sd;)Sd=ji[--bi],ji[bi]=null,bo=ji[--bi],ji[bi]=null,jo=ji[--bi],ji[bi]=null}var Js=null,Qs=null,Ir=!1,Zi=null;function _6(e,t){var n=Si(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function x4(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Js=e,Qs=Bl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Js=e,Qs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Sd!==null?{id:jo,overflow:bo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Si(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Js=e,Qs=null,!0):!1;default:return!1}}function WS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function HS(e){if(Ir){var t=Qs;if(t){var n=t;if(!x4(e,t)){if(WS(e))throw Error(ze(418));t=Bl(n.nextSibling);var s=Js;t&&x4(e,t)?_6(s,n):(e.flags=e.flags&-4097|2,Ir=!1,Js=e)}}else{if(WS(e))throw Error(ze(418));e.flags=e.flags&-4097|2,Ir=!1,Js=e}}}function g4(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Js=e}function yv(e){if(e!==Js)return!1;if(!Ir)return g4(e),Ir=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zS(e.type,e.memoizedProps)),t&&(t=Qs)){if(WS(e))throw P6(),Error(ze(418));for(;t;)_6(e,t),t=Bl(t.nextSibling)}if(g4(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ze(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qs=Bl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qs=null}}else Qs=Js?Bl(e.stateNode.nextSibling):null;return!0}function P6(){for(var e=Qs;e;)e=Bl(e.nextSibling)}function Eh(){Qs=Js=null,Ir=!1}function MC(e){Zi===null?Zi=[e]:Zi.push(e)}var GQ=Jo.ReactCurrentBatchConfig;function vf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ze(309));var s=n.stateNode}if(!s)throw Error(ze(147,e));var i=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(ze(284));if(!n._owner)throw Error(ze(290,e))}return e}function jv(e,t){throw e=Object.prototype.toString.call(t),Error(ze(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function v4(e){var t=e._init;return t(e._payload)}function C6(e){function t(w,j){if(e){var N=w.deletions;N===null?(w.deletions=[j],w.flags|=16):N.push(j)}}function n(w,j){if(!e)return null;for(;j!==null;)t(w,j),j=j.sibling;return null}function s(w,j){for(w=new Map;j!==null;)j.key!==null?w.set(j.key,j):w.set(j.index,j),j=j.sibling;return w}function i(w,j){return w=Hl(w,j),w.index=0,w.sibling=null,w}function a(w,j,N){return w.index=N,e?(N=w.alternate,N!==null?(N=N.index,N<j?(w.flags|=2,j):N):(w.flags|=2,j)):(w.flags|=1048576,j)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,j,N,C){return j===null||j.tag!==6?(j=VN(N,w.mode,C),j.return=w,j):(j=i(j,N),j.return=w,j)}function c(w,j,N,C){var P=N.type;return P===Eu?h(w,j,N.props.children,C,N.key):j!==null&&(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===pl&&v4(P)===j.type)?(C=i(j,N.props),C.ref=vf(w,j,N),C.return=w,C):(C=fy(N.type,N.key,N.props,null,w.mode,C),C.ref=vf(w,j,N),C.return=w,C)}function d(w,j,N,C){return j===null||j.tag!==4||j.stateNode.containerInfo!==N.containerInfo||j.stateNode.implementation!==N.implementation?(j=UN(N,w.mode,C),j.return=w,j):(j=i(j,N.children||[]),j.return=w,j)}function h(w,j,N,C,P){return j===null||j.tag!==7?(j=pd(N,w.mode,C,P),j.return=w,j):(j=i(j,N),j.return=w,j)}function m(w,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return j=VN(""+j,w.mode,N),j.return=w,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case cv:return N=fy(j.type,j.key,j.props,null,w.mode,N),N.ref=vf(w,null,j),N.return=w,N;case Au:return j=UN(j,w.mode,N),j.return=w,j;case pl:var C=j._init;return m(w,C(j._payload),N)}if(Bf(j)||mf(j))return j=pd(j,w.mode,N,null),j.return=w,j;jv(w,j)}return null}function f(w,j,N,C){var P=j!==null?j.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return P!==null?null:l(w,j,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case cv:return N.key===P?c(w,j,N,C):null;case Au:return N.key===P?d(w,j,N,C):null;case pl:return P=N._init,f(w,j,P(N._payload),C)}if(Bf(N)||mf(N))return P!==null?null:h(w,j,N,C,null);jv(w,N)}return null}function v(w,j,N,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return w=w.get(N)||null,l(j,w,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case cv:return w=w.get(C.key===null?N:C.key)||null,c(j,w,C,P);case Au:return w=w.get(C.key===null?N:C.key)||null,d(j,w,C,P);case pl:var k=C._init;return v(w,j,N,k(C._payload),P)}if(Bf(C)||mf(C))return w=w.get(N)||null,h(j,w,C,P,null);jv(j,C)}return null}function p(w,j,N,C){for(var P=null,k=null,_=j,O=j=0,M=null;_!==null&&O<N.length;O++){_.index>O?(M=_,_=null):M=_.sibling;var T=f(w,_,N[O],C);if(T===null){_===null&&(_=M);break}e&&_&&T.alternate===null&&t(w,_),j=a(T,j,O),k===null?P=T:k.sibling=T,k=T,_=M}if(O===N.length)return n(w,_),Ir&&zc(w,O),P;if(_===null){for(;O<N.length;O++)_=m(w,N[O],C),_!==null&&(j=a(_,j,O),k===null?P=_:k.sibling=_,k=_);return Ir&&zc(w,O),P}for(_=s(w,_);O<N.length;O++)M=v(_,w,O,N[O],C),M!==null&&(e&&M.alternate!==null&&_.delete(M.key===null?O:M.key),j=a(M,j,O),k===null?P=M:k.sibling=M,k=M);return e&&_.forEach(function(I){return t(w,I)}),Ir&&zc(w,O),P}function x(w,j,N,C){var P=mf(N);if(typeof P!="function")throw Error(ze(150));if(N=P.call(N),N==null)throw Error(ze(151));for(var k=P=null,_=j,O=j=0,M=null,T=N.next();_!==null&&!T.done;O++,T=N.next()){_.index>O?(M=_,_=null):M=_.sibling;var I=f(w,_,T.value,C);if(I===null){_===null&&(_=M);break}e&&_&&I.alternate===null&&t(w,_),j=a(I,j,O),k===null?P=I:k.sibling=I,k=I,_=M}if(T.done)return n(w,_),Ir&&zc(w,O),P;if(_===null){for(;!T.done;O++,T=N.next())T=m(w,T.value,C),T!==null&&(j=a(T,j,O),k===null?P=T:k.sibling=T,k=T);return Ir&&zc(w,O),P}for(_=s(w,_);!T.done;O++,T=N.next())T=v(_,w,O,T.value,C),T!==null&&(e&&T.alternate!==null&&_.delete(T.key===null?O:T.key),j=a(T,j,O),k===null?P=T:k.sibling=T,k=T);return e&&_.forEach(function(A){return t(w,A)}),Ir&&zc(w,O),P}function y(w,j,N,C){if(typeof N=="object"&&N!==null&&N.type===Eu&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case cv:e:{for(var P=N.key,k=j;k!==null;){if(k.key===P){if(P=N.type,P===Eu){if(k.tag===7){n(w,k.sibling),j=i(k,N.props.children),j.return=w,w=j;break e}}else if(k.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===pl&&v4(P)===k.type){n(w,k.sibling),j=i(k,N.props),j.ref=vf(w,k,N),j.return=w,w=j;break e}n(w,k);break}else t(w,k);k=k.sibling}N.type===Eu?(j=pd(N.props.children,w.mode,C,N.key),j.return=w,w=j):(C=fy(N.type,N.key,N.props,null,w.mode,C),C.ref=vf(w,j,N),C.return=w,w=C)}return o(w);case Au:e:{for(k=N.key;j!==null;){if(j.key===k)if(j.tag===4&&j.stateNode.containerInfo===N.containerInfo&&j.stateNode.implementation===N.implementation){n(w,j.sibling),j=i(j,N.children||[]),j.return=w,w=j;break e}else{n(w,j);break}else t(w,j);j=j.sibling}j=UN(N,w.mode,C),j.return=w,w=j}return o(w);case pl:return k=N._init,y(w,j,k(N._payload),C)}if(Bf(N))return p(w,j,N,C);if(mf(N))return x(w,j,N,C);jv(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,j!==null&&j.tag===6?(n(w,j.sibling),j=i(j,N),j.return=w,w=j):(n(w,j),j=VN(N,w.mode,C),j.return=w,w=j),o(w)):n(w,j)}return y}var Oh=C6(!0),k6=C6(!1),By=vc(null),Vy=null,Fu=null,DC=null;function IC(){DC=Fu=Vy=null}function LC(e){var t=By.current;Mr(By),e._currentValue=t}function qS(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function rh(e,t){Vy=e,DC=Fu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ks=!0),e.firstContext=null)}function Ai(e){var t=e._currentValue;if(DC!==e)if(e={context:e,memoizedValue:t,next:null},Fu===null){if(Vy===null)throw Error(ze(308));Fu=e,Vy.dependencies={lanes:0,firstContext:e}}else Fu=Fu.next=e;return t}var Yc=null;function RC(e){Yc===null?Yc=[e]:Yc.push(e)}function T6(e,t,n,s){var i=t.interleaved;return i===null?(n.next=n,RC(t)):(n.next=i.next,i.next=n),t.interleaved=n,zo(e,s)}function zo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xl=!1;function $C(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function A6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vl(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Jt&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,zo(e,n)}return i=s.interleaved,i===null?(t.next=t,RC(s)):(t.next=i.next,i.next=t),s.interleaved=t,zo(e,n)}function ly(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,NC(e,n)}}function y4(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uy(e,t,n,s){var i=e.updateQueue;xl=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(a!==null){var m=i.baseState;o=0,h=d=c=null,l=a;do{var f=l.lane,v=l.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,x=l;switch(f=t,v=n,x.tag){case 1:if(p=x.payload,typeof p=="function"){m=p.call(v,m,f);break e}m=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=x.payload,f=typeof p=="function"?p.call(v,m,f):p,f==null)break e;m=Kr({},m,f);break e;case 2:xl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else v={eventTime:v,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,c=m):h=h.next=v,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=m),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Pd|=o,e.lanes=o,e.memoizedState=m}}function j4(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(ze(191,i));i.call(s)}}}var og={},Oa=vc(og),Op=vc(og),Mp=vc(og);function Xc(e){if(e===og)throw Error(ze(174));return e}function FC(e,t){switch(wr(Mp,t),wr(Op,e),wr(Oa,og),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:PS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=PS(t,e)}Mr(Oa),wr(Oa,t)}function Mh(){Mr(Oa),Mr(Op),Mr(Mp)}function E6(e){Xc(Mp.current);var t=Xc(Oa.current),n=PS(t,e.type);t!==n&&(wr(Op,e),wr(Oa,n))}function zC(e){Op.current===e&&(Mr(Oa),Mr(Op))}var Ur=vc(0);function Wy(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var LN=[];function BC(){for(var e=0;e<LN.length;e++)LN[e]._workInProgressVersionPrimary=null;LN.length=0}var cy=Jo.ReactCurrentDispatcher,RN=Jo.ReactCurrentBatchConfig,_d=0,qr=null,bn=null,En=null,Hy=!1,ip=!1,Dp=0,ZQ=0;function Wn(){throw Error(ze(321))}function VC(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oa(e[n],t[n]))return!1;return!0}function UC(e,t,n,s,i,a){if(_d=a,qr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cy.current=e===null||e.memoizedState===null?JQ:eJ,e=n(s,i),ip){a=0;do{if(ip=!1,Dp=0,25<=a)throw Error(ze(301));a+=1,En=bn=null,t.updateQueue=null,cy.current=tJ,e=n(s,i)}while(ip)}if(cy.current=qy,t=bn!==null&&bn.next!==null,_d=0,En=bn=qr=null,Hy=!1,t)throw Error(ze(300));return e}function WC(){var e=Dp!==0;return Dp=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?qr.memoizedState=En=e:En=En.next=e,En}function Ei(){if(bn===null){var e=qr.alternate;e=e!==null?e.memoizedState:null}else e=bn.next;var t=En===null?qr.memoizedState:En.next;if(t!==null)En=t,bn=e;else{if(e===null)throw Error(ze(310));bn=e,e={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},En===null?qr.memoizedState=En=e:En=En.next=e}return En}function Ip(e,t){return typeof t=="function"?t(e):t}function $N(e){var t=Ei(),n=t.queue;if(n===null)throw Error(ze(311));n.lastRenderedReducer=e;var s=bn,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var l=o=null,c=null,d=a;do{var h=d.lane;if((_d&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=s):c=c.next=m,qr.lanes|=h,Pd|=h}d=d.next}while(d!==null&&d!==a);c===null?o=s:c.next=l,oa(s,t.memoizedState)||(ks=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){i=e;do a=i.lane,qr.lanes|=a,Pd|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function FN(e){var t=Ei(),n=t.queue;if(n===null)throw Error(ze(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);oa(a,t.memoizedState)||(ks=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function O6(){}function M6(e,t){var n=qr,s=Ei(),i=t(),a=!oa(s.memoizedState,i);if(a&&(s.memoizedState=i,ks=!0),s=s.queue,HC(L6.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||En!==null&&En.memoizedState.tag&1){if(n.flags|=2048,Lp(9,I6.bind(null,n,s,i,t),void 0,null),On===null)throw Error(ze(349));_d&30||D6(n,t,i)}return i}function D6(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=qr.updateQueue,t===null?(t={lastEffect:null,stores:null},qr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function I6(e,t,n,s){t.value=n,t.getSnapshot=s,R6(t)&&$6(e)}function L6(e,t,n){return n(function(){R6(t)&&$6(e)})}function R6(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oa(e,n)}catch{return!0}}function $6(e){var t=zo(e,1);t!==null&&sa(t,e,1,-1)}function b4(e){var t=ya();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ip,lastRenderedState:e},t.queue=e,e=e.dispatch=QQ.bind(null,qr,e),[t.memoizedState,e]}function Lp(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=qr.updateQueue,t===null?(t={lastEffect:null,stores:null},qr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function F6(){return Ei().memoizedState}function dy(e,t,n,s){var i=ya();qr.flags|=e,i.memoizedState=Lp(1|t,n,void 0,s===void 0?null:s)}function eb(e,t,n,s){var i=Ei();s=s===void 0?null:s;var a=void 0;if(bn!==null){var o=bn.memoizedState;if(a=o.destroy,s!==null&&VC(s,o.deps)){i.memoizedState=Lp(t,n,a,s);return}}qr.flags|=e,i.memoizedState=Lp(1|t,n,a,s)}function w4(e,t){return dy(8390656,8,e,t)}function HC(e,t){return eb(2048,8,e,t)}function z6(e,t){return eb(4,2,e,t)}function B6(e,t){return eb(4,4,e,t)}function V6(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function U6(e,t,n){return n=n!=null?n.concat([e]):null,eb(4,4,V6.bind(null,t,e),n)}function qC(){}function W6(e,t){var n=Ei();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&VC(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function H6(e,t){var n=Ei();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&VC(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function q6(e,t,n){return _d&21?(oa(n,t)||(n=X$(),qr.lanes|=n,Pd|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ks=!0),e.memoizedState=n)}function YQ(e,t){var n=dr;dr=n!==0&&4>n?n:4,e(!0);var s=RN.transition;RN.transition={};try{e(!1),t()}finally{dr=n,RN.transition=s}}function K6(){return Ei().memoizedState}function XQ(e,t,n){var s=Wl(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},G6(e))Z6(t,n);else if(n=T6(e,t,n,s),n!==null){var i=fs();sa(n,e,s,i),Y6(n,t,s)}}function QQ(e,t,n){var s=Wl(e),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(G6(e))Z6(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,oa(l,o)){var c=t.interleaved;c===null?(i.next=i,RC(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=T6(e,t,i,s),n!==null&&(i=fs(),sa(n,e,s,i),Y6(n,t,s))}}function G6(e){var t=e.alternate;return e===qr||t!==null&&t===qr}function Z6(e,t){ip=Hy=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Y6(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,NC(e,n)}}var qy={readContext:Ai,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},JQ={readContext:Ai,useCallback:function(e,t){return ya().memoizedState=[e,t===void 0?null:t],e},useContext:Ai,useEffect:w4,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,dy(4194308,4,V6.bind(null,t,e),n)},useLayoutEffect:function(e,t){return dy(4194308,4,e,t)},useInsertionEffect:function(e,t){return dy(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=ya();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=XQ.bind(null,qr,e),[s.memoizedState,e]},useRef:function(e){var t=ya();return e={current:e},t.memoizedState=e},useState:b4,useDebugValue:qC,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=b4(!1),t=e[0];return e=YQ.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=qr,i=ya();if(Ir){if(n===void 0)throw Error(ze(407));n=n()}else{if(n=t(),On===null)throw Error(ze(349));_d&30||D6(s,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,w4(L6.bind(null,s,a,e),[e]),s.flags|=2048,Lp(9,I6.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=On.identifierPrefix;if(Ir){var n=bo,s=jo;n=(s&~(1<<32-na(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Dp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ZQ++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eJ={readContext:Ai,useCallback:W6,useContext:Ai,useEffect:HC,useImperativeHandle:U6,useInsertionEffect:z6,useLayoutEffect:B6,useMemo:H6,useReducer:$N,useRef:F6,useState:function(){return $N(Ip)},useDebugValue:qC,useDeferredValue:function(e){var t=Ei();return q6(t,bn.memoizedState,e)},useTransition:function(){var e=$N(Ip)[0],t=Ei().memoizedState;return[e,t]},useMutableSource:O6,useSyncExternalStore:M6,useId:K6,unstable_isNewReconciler:!1},tJ={readContext:Ai,useCallback:W6,useContext:Ai,useEffect:HC,useImperativeHandle:U6,useInsertionEffect:z6,useLayoutEffect:B6,useMemo:H6,useReducer:FN,useRef:F6,useState:function(){return FN(Ip)},useDebugValue:qC,useDeferredValue:function(e){var t=Ei();return bn===null?t.memoizedState=e:q6(t,bn.memoizedState,e)},useTransition:function(){var e=FN(Ip)[0],t=Ei().memoizedState;return[e,t]},useMutableSource:O6,useSyncExternalStore:M6,useId:K6,unstable_isNewReconciler:!1};function Ui(e,t){if(e&&e.defaultProps){t=Kr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function KS(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Kr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var tb={isMounted:function(e){return(e=e._reactInternals)?Xd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=fs(),i=Wl(e),a=Co(s,i);a.payload=t,n!=null&&(a.callback=n),t=Vl(e,a,i),t!==null&&(sa(t,e,i,s),ly(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=fs(),i=Wl(e),a=Co(s,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Vl(e,a,i),t!==null&&(sa(t,e,i,s),ly(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fs(),s=Wl(e),i=Co(n,s);i.tag=2,t!=null&&(i.callback=t),t=Vl(e,i,s),t!==null&&(sa(t,e,s,n),ly(t,e,s))}};function N4(e,t,n,s,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,o):t.prototype&&t.prototype.isPureReactComponent?!kp(n,s)||!kp(i,a):!0}function X6(e,t,n){var s=!1,i=nc,a=t.contextType;return typeof a=="object"&&a!==null?a=Ai(a):(i=Es(t)?Nd:rs.current,s=t.contextTypes,a=(s=s!=null)?Ah(e,i):nc),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=tb,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function S4(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&tb.enqueueReplaceState(t,t.state,null)}function GS(e,t,n,s){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},$C(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Ai(a):(a=Es(t)?Nd:rs.current,i.context=Ah(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(KS(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&tb.enqueueReplaceState(i,i.state,null),Uy(e,n,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Dh(e,t){try{var n="",s=t;do n+=TX(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function zN(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ZS(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var rJ=typeof WeakMap=="function"?WeakMap:Map;function Q6(e,t,n){n=Co(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Gy||(Gy=!0,i_=s),ZS(e,t)},n}function J6(e,t,n){n=Co(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;n.payload=function(){return s(i)},n.callback=function(){ZS(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){ZS(e,t),typeof s!="function"&&(Ul===null?Ul=new Set([this]):Ul.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function _4(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new rJ;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(n)||(i.add(n),e=xJ.bind(null,e,t,n),t.then(e,e))}function P4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function C4(e,t,n,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Co(-1,1),t.tag=2,Vl(n,t,1))),n.lanes|=1),e)}var nJ=Jo.ReactCurrentOwner,ks=!1;function cs(e,t,n,s){t.child=e===null?k6(t,null,n,s):Oh(t,e.child,n,s)}function k4(e,t,n,s,i){n=n.render;var a=t.ref;return rh(t,i),s=UC(e,t,n,s,a,i),n=WC(),e!==null&&!ks?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bo(e,t,i)):(Ir&&n&&EC(t),t.flags|=1,cs(e,t,s,i),t.child)}function T4(e,t,n,s,i){if(e===null){var a=n.type;return typeof a=="function"&&!ek(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,eF(e,t,a,s,i)):(e=fy(n.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:kp,n(o,s)&&e.ref===t.ref)return Bo(e,t,i)}return t.flags|=1,e=Hl(a,s),e.ref=t.ref,e.return=t,t.child=e}function eF(e,t,n,s,i){if(e!==null){var a=e.memoizedProps;if(kp(a,s)&&e.ref===t.ref)if(ks=!1,t.pendingProps=s=a,(e.lanes&i)!==0)e.flags&131072&&(ks=!0);else return t.lanes=e.lanes,Bo(e,t,i)}return YS(e,t,n,s,i)}function tF(e,t,n){var s=t.pendingProps,i=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wr(Bu,Fs),Fs|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wr(Bu,Fs),Fs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,wr(Bu,Fs),Fs|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,wr(Bu,Fs),Fs|=s;return cs(e,t,i,n),t.child}function rF(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function YS(e,t,n,s,i){var a=Es(n)?Nd:rs.current;return a=Ah(t,a),rh(t,i),n=UC(e,t,n,s,a,i),s=WC(),e!==null&&!ks?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bo(e,t,i)):(Ir&&s&&EC(t),t.flags|=1,cs(e,t,n,i),t.child)}function A4(e,t,n,s,i){if(Es(n)){var a=!0;$y(t)}else a=!1;if(rh(t,i),t.stateNode===null)uy(e,t),X6(t,n,s),GS(t,n,s,i),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ai(d):(d=Es(n)?Nd:rs.current,d=Ah(t,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&S4(t,o,s,d),xl=!1;var f=t.memoizedState;o.state=f,Uy(t,s,o,i),c=t.memoizedState,l!==s||f!==c||As.current||xl?(typeof h=="function"&&(KS(t,n,h,s),c=t.memoizedState),(l=xl||N4(t,n,l,s,f,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,A6(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Ui(t.type,l),o.props=d,m=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ai(c):(c=Es(n)?Nd:rs.current,c=Ah(t,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||f!==c)&&S4(t,o,s,c),xl=!1,f=t.memoizedState,o.state=f,Uy(t,s,o,i);var p=t.memoizedState;l!==m||f!==p||As.current||xl?(typeof v=="function"&&(KS(t,n,v,s),p=t.memoizedState),(d=xl||N4(t,n,d,s,f,p,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),o.props=s,o.state=p,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return XS(e,t,n,s,a,i)}function XS(e,t,n,s,i,a){rF(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return i&&p4(t,n,!1),Bo(e,t,a);s=t.stateNode,nJ.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Oh(t,e.child,null,a),t.child=Oh(t,null,l,a)):cs(e,t,l,a),t.memoizedState=s.state,i&&p4(t,n,!0),t.child}function nF(e){var t=e.stateNode;t.pendingContext?f4(e,t.pendingContext,t.pendingContext!==t.context):t.context&&f4(e,t.context,!1),FC(e,t.containerInfo)}function E4(e,t,n,s,i){return Eh(),MC(i),t.flags|=256,cs(e,t,n,s),t.child}var QS={dehydrated:null,treeContext:null,retryLane:0};function JS(e){return{baseLanes:e,cachePool:null,transitions:null}}function sF(e,t,n){var s=t.pendingProps,i=Ur.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),wr(Ur,i&1),e===null)return HS(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,a?(s=t.mode,a=t.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=sb(o,s,0,null),e=pd(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=JS(n),t.memoizedState=QS,e):KC(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return sJ(e,t,o,s,l,i,n);if(a){a=s.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Hl(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Hl(l,a):(a=pd(a,o,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,o=e.child.memoizedState,o=o===null?JS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=QS,s}return a=e.child,e=a.sibling,s=Hl(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function KC(e,t){return t=sb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bv(e,t,n,s){return s!==null&&MC(s),Oh(t,e.child,null,n),e=KC(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sJ(e,t,n,s,i,a,o){if(n)return t.flags&256?(t.flags&=-257,s=zN(Error(ze(422))),bv(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=sb({mode:"visible",children:s.children},i,0,null),a=pd(a,i,o,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&Oh(t,e.child,null,o),t.child.memoizedState=JS(o),t.memoizedState=QS,a);if(!(t.mode&1))return bv(e,t,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(ze(419)),s=zN(a,s,void 0),bv(e,t,o,s)}if(l=(o&e.childLanes)!==0,ks||l){if(s=On,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,zo(e,i),sa(s,e,i,-1))}return JC(),s=zN(Error(ze(421))),bv(e,t,o,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=gJ.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Qs=Bl(i.nextSibling),Js=t,Ir=!0,Zi=null,e!==null&&(ji[bi++]=jo,ji[bi++]=bo,ji[bi++]=Sd,jo=e.id,bo=e.overflow,Sd=t),t=KC(t,s.children),t.flags|=4096,t)}function O4(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),qS(e.return,t,n)}function BN(e,t,n,s,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function iF(e,t,n){var s=t.pendingProps,i=s.revealOrder,a=s.tail;if(cs(e,t,s.children,n),s=Ur.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&O4(e,n,t);else if(e.tag===19)O4(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(wr(Ur,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Wy(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),BN(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Wy(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}BN(t,!0,n,null,a);break;case"together":BN(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Pd|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ze(153));if(t.child!==null){for(e=t.child,n=Hl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Hl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function iJ(e,t,n){switch(t.tag){case 3:nF(t),Eh();break;case 5:E6(t);break;case 1:Es(t.type)&&$y(t);break;case 4:FC(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;wr(By,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(wr(Ur,Ur.current&1),t.flags|=128,null):n&t.child.childLanes?sF(e,t,n):(wr(Ur,Ur.current&1),e=Bo(e,t,n),e!==null?e.sibling:null);wr(Ur,Ur.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return iF(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wr(Ur,Ur.current),s)break;return null;case 22:case 23:return t.lanes=0,tF(e,t,n)}return Bo(e,t,n)}var aF,e_,oF,lF;aF=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};e_=function(){};oF=function(e,t,n,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,Xc(Oa.current);var a=null;switch(n){case"input":i=wS(e,i),s=wS(e,s),a=[];break;case"select":i=Kr({},i,{value:void 0}),s=Kr({},s,{value:void 0}),a=[];break;case"textarea":i=_S(e,i),s=_S(e,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ly)}CS(n,s);var o;n=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(bp.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(l=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(bp.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Pr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};lF=function(e,t,n,s){n!==s&&(t.flags|=4)};function yf(e,t){if(!Ir)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Hn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function aJ(e,t,n){var s=t.pendingProps;switch(OC(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(t),null;case 1:return Es(t.type)&&Ry(),Hn(t),null;case 3:return s=t.stateNode,Mh(),Mr(As),Mr(rs),BC(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(yv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zi!==null&&(l_(Zi),Zi=null))),e_(e,t),Hn(t),null;case 5:zC(t);var i=Xc(Mp.current);if(n=t.type,e!==null&&t.stateNode!=null)oF(e,t,n,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(ze(166));return Hn(t),null}if(e=Xc(Oa.current),yv(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[Sa]=t,s[Ep]=a,e=(t.mode&1)!==0,n){case"dialog":Pr("cancel",s),Pr("close",s);break;case"iframe":case"object":case"embed":Pr("load",s);break;case"video":case"audio":for(i=0;i<Uf.length;i++)Pr(Uf[i],s);break;case"source":Pr("error",s);break;case"img":case"image":case"link":Pr("error",s),Pr("load",s);break;case"details":Pr("toggle",s);break;case"input":BO(s,a),Pr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Pr("invalid",s);break;case"textarea":UO(s,a),Pr("invalid",s)}CS(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&vv(s.textContent,l,e),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&vv(s.textContent,l,e),i=["children",""+l]):bp.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pr("scroll",s)}switch(n){case"input":dv(s),VO(s,a,!0);break;case"textarea":dv(s),WO(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Ly)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=L$(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[Sa]=t,e[Ep]=s,aF(e,t,!1,!1),t.stateNode=e;e:{switch(o=kS(n,s),n){case"dialog":Pr("cancel",e),Pr("close",e),i=s;break;case"iframe":case"object":case"embed":Pr("load",e),i=s;break;case"video":case"audio":for(i=0;i<Uf.length;i++)Pr(Uf[i],e);i=s;break;case"source":Pr("error",e),i=s;break;case"img":case"image":case"link":Pr("error",e),Pr("load",e),i=s;break;case"details":Pr("toggle",e),i=s;break;case"input":BO(e,s),i=wS(e,s),Pr("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=Kr({},s,{value:void 0}),Pr("invalid",e);break;case"textarea":UO(e,s),i=_S(e,s),Pr("invalid",e);break;default:i=s}CS(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?F$(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&R$(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&wp(e,c):typeof c=="number"&&wp(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(bp.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Pr("scroll",e):c!=null&&gC(e,a,c,o))}switch(n){case"input":dv(e),VO(e,s,!1);break;case"textarea":dv(e),WO(e);break;case"option":s.value!=null&&e.setAttribute("value",""+rc(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?Qu(e,!!s.multiple,a,!1):s.defaultValue!=null&&Qu(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ly)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Hn(t),null;case 6:if(e&&t.stateNode!=null)lF(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(ze(166));if(n=Xc(Mp.current),Xc(Oa.current),yv(t)){if(s=t.stateNode,n=t.memoizedProps,s[Sa]=t,(a=s.nodeValue!==n)&&(e=Js,e!==null))switch(e.tag){case 3:vv(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vv(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Sa]=t,t.stateNode=s}return Hn(t),null;case 13:if(Mr(Ur),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ir&&Qs!==null&&t.mode&1&&!(t.flags&128))P6(),Eh(),t.flags|=98560,a=!1;else if(a=yv(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(ze(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ze(317));a[Sa]=t}else Eh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Hn(t),a=!1}else Zi!==null&&(l_(Zi),Zi=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ur.current&1?Sn===0&&(Sn=3):JC())),t.updateQueue!==null&&(t.flags|=4),Hn(t),null);case 4:return Mh(),e_(e,t),e===null&&Tp(t.stateNode.containerInfo),Hn(t),null;case 10:return LC(t.type._context),Hn(t),null;case 17:return Es(t.type)&&Ry(),Hn(t),null;case 19:if(Mr(Ur),a=t.memoizedState,a===null)return Hn(t),null;if(s=(t.flags&128)!==0,o=a.rendering,o===null)if(s)yf(a,!1);else{if(Sn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wy(e),o!==null){for(t.flags|=128,yf(a,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return wr(Ur,Ur.current&1|2),t.child}e=e.sibling}a.tail!==null&&nn()>Ih&&(t.flags|=128,s=!0,yf(a,!1),t.lanes=4194304)}else{if(!s)if(e=Wy(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),yf(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ir)return Hn(t),null}else 2*nn()-a.renderingStartTime>Ih&&n!==1073741824&&(t.flags|=128,s=!0,yf(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=nn(),t.sibling=null,n=Ur.current,wr(Ur,s?n&1|2:n&1),t):(Hn(t),null);case 22:case 23:return QC(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Fs&1073741824&&(Hn(t),t.subtreeFlags&6&&(t.flags|=8192)):Hn(t),null;case 24:return null;case 25:return null}throw Error(ze(156,t.tag))}function oJ(e,t){switch(OC(t),t.tag){case 1:return Es(t.type)&&Ry(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mh(),Mr(As),Mr(rs),BC(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zC(t),null;case 13:if(Mr(Ur),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ze(340));Eh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Mr(Ur),null;case 4:return Mh(),null;case 10:return LC(t.type._context),null;case 22:case 23:return QC(),null;case 24:return null;default:return null}}var wv=!1,Zn=!1,lJ=typeof WeakSet=="function"?WeakSet:Set,rt=null;function zu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Yr(e,t,s)}else n.current=null}function t_(e,t,n){try{n()}catch(s){Yr(e,t,s)}}var M4=!1;function cJ(e,t){if($S=My,e=m6(),AC(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,m=e,f=null;t:for(;;){for(var v;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==a||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)f=m,m=v;for(;;){if(m===e)break t;if(f===n&&++d===i&&(l=o),f===a&&++h===s&&(c=o),(v=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(FS={focusedElem:e,selectionRange:n},My=!1,rt=t;rt!==null;)if(t=rt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,rt=e;else for(;rt!==null;){t=rt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var x=p.memoizedProps,y=p.memoizedState,w=t.stateNode,j=w.getSnapshotBeforeUpdate(t.elementType===t.type?x:Ui(t.type,x),y);w.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ze(163))}}catch(C){Yr(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,rt=e;break}rt=t.return}return p=M4,M4=!1,p}function ap(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&t_(t,n,a)}i=i.next}while(i!==s)}}function rb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function r_(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function cF(e){var t=e.alternate;t!==null&&(e.alternate=null,cF(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sa],delete t[Ep],delete t[VS],delete t[HQ],delete t[qQ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dF(e){return e.tag===5||e.tag===3||e.tag===4}function D4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dF(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function n_(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ly));else if(s!==4&&(e=e.child,e!==null))for(n_(e,t,n),e=e.sibling;e!==null;)n_(e,t,n),e=e.sibling}function s_(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(s_(e,t,n),e=e.sibling;e!==null;)s_(e,t,n),e=e.sibling}var $n=null,Hi=!1;function ol(e,t,n){for(n=n.child;n!==null;)uF(e,t,n),n=n.sibling}function uF(e,t,n){if(Ea&&typeof Ea.onCommitFiberUnmount=="function")try{Ea.onCommitFiberUnmount(Gj,n)}catch{}switch(n.tag){case 5:Zn||zu(n,t);case 6:var s=$n,i=Hi;$n=null,ol(e,t,n),$n=s,Hi=i,$n!==null&&(Hi?(e=$n,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$n.removeChild(n.stateNode));break;case 18:$n!==null&&(Hi?(e=$n,n=n.stateNode,e.nodeType===8?DN(e.parentNode,n):e.nodeType===1&&DN(e,n),Pp(e)):DN($n,n.stateNode));break;case 4:s=$n,i=Hi,$n=n.stateNode.containerInfo,Hi=!0,ol(e,t,n),$n=s,Hi=i;break;case 0:case 11:case 14:case 15:if(!Zn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&t_(n,t,o),i=i.next}while(i!==s)}ol(e,t,n);break;case 1:if(!Zn&&(zu(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Yr(n,t,l)}ol(e,t,n);break;case 21:ol(e,t,n);break;case 22:n.mode&1?(Zn=(s=Zn)||n.memoizedState!==null,ol(e,t,n),Zn=s):ol(e,t,n);break;default:ol(e,t,n)}}function I4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new lJ),t.forEach(function(s){var i=vJ.bind(null,e,s);n.has(s)||(n.add(s),s.then(i,i))})}}function Fi(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:$n=l.stateNode,Hi=!1;break e;case 3:$n=l.stateNode.containerInfo,Hi=!0;break e;case 4:$n=l.stateNode.containerInfo,Hi=!0;break e}l=l.return}if($n===null)throw Error(ze(160));uF(a,o,i),$n=null,Hi=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Yr(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hF(t,e),t=t.sibling}function hF(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Fi(t,e),va(e),s&4){try{ap(3,e,e.return),rb(3,e)}catch(x){Yr(e,e.return,x)}try{ap(5,e,e.return)}catch(x){Yr(e,e.return,x)}}break;case 1:Fi(t,e),va(e),s&512&&n!==null&&zu(n,n.return);break;case 5:if(Fi(t,e),va(e),s&512&&n!==null&&zu(n,n.return),e.flags&32){var i=e.stateNode;try{wp(i,"")}catch(x){Yr(e,e.return,x)}}if(s&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&D$(i,a),kS(l,o);var d=kS(l,a);for(o=0;o<c.length;o+=2){var h=c[o],m=c[o+1];h==="style"?F$(i,m):h==="dangerouslySetInnerHTML"?R$(i,m):h==="children"?wp(i,m):gC(i,h,m,d)}switch(l){case"input":NS(i,a);break;case"textarea":I$(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Qu(i,!!a.multiple,v,!1):f!==!!a.multiple&&(a.defaultValue!=null?Qu(i,!!a.multiple,a.defaultValue,!0):Qu(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ep]=a}catch(x){Yr(e,e.return,x)}}break;case 6:if(Fi(t,e),va(e),s&4){if(e.stateNode===null)throw Error(ze(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(x){Yr(e,e.return,x)}}break;case 3:if(Fi(t,e),va(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Pp(t.containerInfo)}catch(x){Yr(e,e.return,x)}break;case 4:Fi(t,e),va(e);break;case 13:Fi(t,e),va(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(YC=nn())),s&4&&I4(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Zn=(d=Zn)||h,Fi(t,e),Zn=d):Fi(t,e),va(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(rt=e,h=e.child;h!==null;){for(m=rt=h;rt!==null;){switch(f=rt,v=f.child,f.tag){case 0:case 11:case 14:case 15:ap(4,f,f.return);break;case 1:zu(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(x){Yr(s,n,x)}}break;case 5:zu(f,f.return);break;case 22:if(f.memoizedState!==null){R4(m);continue}}v!==null?(v.return=f,rt=v):R4(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$$("display",o))}catch(x){Yr(e,e.return,x)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(x){Yr(e,e.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Fi(t,e),va(e),s&4&&I4(e);break;case 21:break;default:Fi(t,e),va(e)}}function va(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(dF(n)){var s=n;break e}n=n.return}throw Error(ze(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(wp(i,""),s.flags&=-33);var a=D4(e);s_(e,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=D4(e);n_(e,l,o);break;default:throw Error(ze(161))}}catch(c){Yr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dJ(e,t,n){rt=e,mF(e)}function mF(e,t,n){for(var s=(e.mode&1)!==0;rt!==null;){var i=rt,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||wv;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Zn;l=wv;var d=Zn;if(wv=o,(Zn=c)&&!d)for(rt=i;rt!==null;)o=rt,c=o.child,o.tag===22&&o.memoizedState!==null?$4(i):c!==null?(c.return=o,rt=c):$4(i);for(;a!==null;)rt=a,mF(a),a=a.sibling;rt=i,wv=l,Zn=d}L4(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,rt=a):L4(e)}}function L4(e){for(;rt!==null;){var t=rt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Zn||rb(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Zn)if(n===null)s.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ui(t.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&j4(t,a,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}j4(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Pp(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ze(163))}Zn||t.flags&512&&r_(t)}catch(f){Yr(t,t.return,f)}}if(t===e){rt=null;break}if(n=t.sibling,n!==null){n.return=t.return,rt=n;break}rt=t.return}}function R4(e){for(;rt!==null;){var t=rt;if(t===e){rt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,rt=n;break}rt=t.return}}function $4(e){for(;rt!==null;){var t=rt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rb(4,t)}catch(c){Yr(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){Yr(t,i,c)}}var a=t.return;try{r_(t)}catch(c){Yr(t,a,c)}break;case 5:var o=t.return;try{r_(t)}catch(c){Yr(t,o,c)}}}catch(c){Yr(t,t.return,c)}if(t===e){rt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,rt=l;break}rt=t.return}}var uJ=Math.ceil,Ky=Jo.ReactCurrentDispatcher,GC=Jo.ReactCurrentOwner,Pi=Jo.ReactCurrentBatchConfig,Jt=0,On=null,un=null,Vn=0,Fs=0,Bu=vc(0),Sn=0,Rp=null,Pd=0,nb=0,ZC=0,op=null,Cs=null,YC=0,Ih=1/0,uo=null,Gy=!1,i_=null,Ul=null,Nv=!1,Ol=null,Zy=0,lp=0,a_=null,hy=-1,my=0;function fs(){return Jt&6?nn():hy!==-1?hy:hy=nn()}function Wl(e){return e.mode&1?Jt&2&&Vn!==0?Vn&-Vn:GQ.transition!==null?(my===0&&(my=X$()),my):(e=dr,e!==0||(e=window.event,e=e===void 0?16:s6(e.type)),e):1}function sa(e,t,n,s){if(50<lp)throw lp=0,a_=null,Error(ze(185));sg(e,n,s),(!(Jt&2)||e!==On)&&(e===On&&(!(Jt&2)&&(nb|=n),Sn===4&&yl(e,Vn)),Os(e,s),n===1&&Jt===0&&!(t.mode&1)&&(Ih=nn()+500,Jj&&yc()))}function Os(e,t){var n=e.callbackNode;GX(e,t);var s=Oy(e,e===On?Vn:0);if(s===0)n!==null&&KO(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&KO(n),t===1)e.tag===0?KQ(F4.bind(null,e)):N6(F4.bind(null,e)),UQ(function(){!(Jt&6)&&yc()}),n=null;else{switch(Q$(s)){case 1:n=wC;break;case 4:n=Z$;break;case 16:n=Ey;break;case 536870912:n=Y$;break;default:n=Ey}n=bF(n,fF.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fF(e,t){if(hy=-1,my=0,Jt&6)throw Error(ze(327));var n=e.callbackNode;if(nh()&&e.callbackNode!==n)return null;var s=Oy(e,e===On?Vn:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Yy(e,s);else{t=s;var i=Jt;Jt|=2;var a=xF();(On!==e||Vn!==t)&&(uo=null,Ih=nn()+500,fd(e,t));do try{fJ();break}catch(l){pF(e,l)}while(!0);IC(),Ky.current=a,Jt=i,un!==null?t=0:(On=null,Vn=0,t=Sn)}if(t!==0){if(t===2&&(i=MS(e),i!==0&&(s=i,t=o_(e,i))),t===1)throw n=Rp,fd(e,0),yl(e,s),Os(e,nn()),n;if(t===6)yl(e,s);else{if(i=e.current.alternate,!(s&30)&&!hJ(i)&&(t=Yy(e,s),t===2&&(a=MS(e),a!==0&&(s=a,t=o_(e,a))),t===1))throw n=Rp,fd(e,0),yl(e,s),Os(e,nn()),n;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(ze(345));case 2:Bc(e,Cs,uo);break;case 3:if(yl(e,s),(s&130023424)===s&&(t=YC+500-nn(),10<t)){if(Oy(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){fs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=BS(Bc.bind(null,e,Cs,uo),t);break}Bc(e,Cs,uo);break;case 4:if(yl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var o=31-na(s);a=1<<o,o=t[o],o>i&&(i=o),s&=~a}if(s=i,s=nn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*uJ(s/1960))-s,10<s){e.timeoutHandle=BS(Bc.bind(null,e,Cs,uo),s);break}Bc(e,Cs,uo);break;case 5:Bc(e,Cs,uo);break;default:throw Error(ze(329))}}}return Os(e,nn()),e.callbackNode===n?fF.bind(null,e):null}function o_(e,t){var n=op;return e.current.memoizedState.isDehydrated&&(fd(e,t).flags|=256),e=Yy(e,t),e!==2&&(t=Cs,Cs=n,t!==null&&l_(t)),e}function l_(e){Cs===null?Cs=e:Cs.push.apply(Cs,e)}function hJ(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!oa(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yl(e,t){for(t&=~ZC,t&=~nb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-na(t),s=1<<n;e[n]=-1,t&=~s}}function F4(e){if(Jt&6)throw Error(ze(327));nh();var t=Oy(e,0);if(!(t&1))return Os(e,nn()),null;var n=Yy(e,t);if(e.tag!==0&&n===2){var s=MS(e);s!==0&&(t=s,n=o_(e,s))}if(n===1)throw n=Rp,fd(e,0),yl(e,t),Os(e,nn()),n;if(n===6)throw Error(ze(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bc(e,Cs,uo),Os(e,nn()),null}function XC(e,t){var n=Jt;Jt|=1;try{return e(t)}finally{Jt=n,Jt===0&&(Ih=nn()+500,Jj&&yc())}}function Cd(e){Ol!==null&&Ol.tag===0&&!(Jt&6)&&nh();var t=Jt;Jt|=1;var n=Pi.transition,s=dr;try{if(Pi.transition=null,dr=1,e)return e()}finally{dr=s,Pi.transition=n,Jt=t,!(Jt&6)&&yc()}}function QC(){Fs=Bu.current,Mr(Bu)}function fd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,VQ(n)),un!==null)for(n=un.return;n!==null;){var s=n;switch(OC(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ry();break;case 3:Mh(),Mr(As),Mr(rs),BC();break;case 5:zC(s);break;case 4:Mh();break;case 13:Mr(Ur);break;case 19:Mr(Ur);break;case 10:LC(s.type._context);break;case 22:case 23:QC()}n=n.return}if(On=e,un=e=Hl(e.current,null),Vn=Fs=t,Sn=0,Rp=null,ZC=nb=Pd=0,Cs=op=null,Yc!==null){for(t=0;t<Yc.length;t++)if(n=Yc[t],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}n.pending=s}Yc=null}return e}function pF(e,t){do{var n=un;try{if(IC(),cy.current=qy,Hy){for(var s=qr.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Hy=!1}if(_d=0,En=bn=qr=null,ip=!1,Dp=0,GC.current=null,n===null||n.return===null){Sn=1,Rp=t,un=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Vn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=P4(o);if(v!==null){v.flags&=-257,C4(v,o,l,a,t),v.mode&1&&_4(a,d,t),t=v,c=d;var p=t.updateQueue;if(p===null){var x=new Set;x.add(c),t.updateQueue=x}else p.add(c);break e}else{if(!(t&1)){_4(a,d,t),JC();break e}c=Error(ze(426))}}else if(Ir&&l.mode&1){var y=P4(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),C4(y,o,l,a,t),MC(Dh(c,l));break e}}a=c=Dh(c,l),Sn!==4&&(Sn=2),op===null?op=[a]:op.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var w=Q6(a,c,t);y4(a,w);break e;case 1:l=c;var j=a.type,N=a.stateNode;if(!(a.flags&128)&&(typeof j.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ul===null||!Ul.has(N)))){a.flags|=65536,t&=-t,a.lanes|=t;var C=J6(a,l,t);y4(a,C);break e}}a=a.return}while(a!==null)}vF(n)}catch(P){t=P,un===n&&n!==null&&(un=n=n.return);continue}break}while(!0)}function xF(){var e=Ky.current;return Ky.current=qy,e===null?qy:e}function JC(){(Sn===0||Sn===3||Sn===2)&&(Sn=4),On===null||!(Pd&268435455)&&!(nb&268435455)||yl(On,Vn)}function Yy(e,t){var n=Jt;Jt|=2;var s=xF();(On!==e||Vn!==t)&&(uo=null,fd(e,t));do try{mJ();break}catch(i){pF(e,i)}while(!0);if(IC(),Jt=n,Ky.current=s,un!==null)throw Error(ze(261));return On=null,Vn=0,Sn}function mJ(){for(;un!==null;)gF(un)}function fJ(){for(;un!==null&&!FX();)gF(un)}function gF(e){var t=jF(e.alternate,e,Fs);e.memoizedProps=e.pendingProps,t===null?vF(e):un=t,GC.current=null}function vF(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=oJ(n,t),n!==null){n.flags&=32767,un=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Sn=6,un=null;return}}else if(n=aJ(n,t,Fs),n!==null){un=n;return}if(t=t.sibling,t!==null){un=t;return}un=t=e}while(t!==null);Sn===0&&(Sn=5)}function Bc(e,t,n){var s=dr,i=Pi.transition;try{Pi.transition=null,dr=1,pJ(e,t,n,s)}finally{Pi.transition=i,dr=s}return null}function pJ(e,t,n,s){do nh();while(Ol!==null);if(Jt&6)throw Error(ze(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ze(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(ZX(e,a),e===On&&(un=On=null,Vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nv||(Nv=!0,bF(Ey,function(){return nh(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Pi.transition,Pi.transition=null;var o=dr;dr=1;var l=Jt;Jt|=4,GC.current=null,cJ(e,n),hF(n,e),IQ(FS),My=!!$S,FS=$S=null,e.current=n,dJ(n),zX(),Jt=l,dr=o,Pi.transition=a}else e.current=n;if(Nv&&(Nv=!1,Ol=e,Zy=i),a=e.pendingLanes,a===0&&(Ul=null),UX(n.stateNode),Os(e,nn()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(Gy)throw Gy=!1,e=i_,i_=null,e;return Zy&1&&e.tag!==0&&nh(),a=e.pendingLanes,a&1?e===a_?lp++:(lp=0,a_=e):lp=0,yc(),null}function nh(){if(Ol!==null){var e=Q$(Zy),t=Pi.transition,n=dr;try{if(Pi.transition=null,dr=16>e?16:e,Ol===null)var s=!1;else{if(e=Ol,Ol=null,Zy=0,Jt&6)throw Error(ze(331));var i=Jt;for(Jt|=4,rt=e.current;rt!==null;){var a=rt,o=a.child;if(rt.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(rt=d;rt!==null;){var h=rt;switch(h.tag){case 0:case 11:case 15:ap(8,h,a)}var m=h.child;if(m!==null)m.return=h,rt=m;else for(;rt!==null;){h=rt;var f=h.sibling,v=h.return;if(cF(h),h===d){rt=null;break}if(f!==null){f.return=v,rt=f;break}rt=v}}}var p=a.alternate;if(p!==null){var x=p.child;if(x!==null){p.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}rt=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,rt=o;else e:for(;rt!==null;){if(a=rt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ap(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,rt=w;break e}rt=a.return}}var j=e.current;for(rt=j;rt!==null;){o=rt;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,rt=N;else e:for(o=j;rt!==null;){if(l=rt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:rb(9,l)}}catch(P){Yr(l,l.return,P)}if(l===o){rt=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,rt=C;break e}rt=l.return}}if(Jt=i,yc(),Ea&&typeof Ea.onPostCommitFiberRoot=="function")try{Ea.onPostCommitFiberRoot(Gj,e)}catch{}s=!0}return s}finally{dr=n,Pi.transition=t}}return!1}function z4(e,t,n){t=Dh(n,t),t=Q6(e,t,1),e=Vl(e,t,1),t=fs(),e!==null&&(sg(e,1,t),Os(e,t))}function Yr(e,t,n){if(e.tag===3)z4(e,e,n);else for(;t!==null;){if(t.tag===3){z4(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ul===null||!Ul.has(s))){e=Dh(n,e),e=J6(t,e,1),t=Vl(t,e,1),e=fs(),t!==null&&(sg(t,1,e),Os(t,e));break}}t=t.return}}function xJ(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=fs(),e.pingedLanes|=e.suspendedLanes&n,On===e&&(Vn&n)===n&&(Sn===4||Sn===3&&(Vn&130023424)===Vn&&500>nn()-YC?fd(e,0):ZC|=n),Os(e,t)}function yF(e,t){t===0&&(e.mode&1?(t=mv,mv<<=1,!(mv&130023424)&&(mv=4194304)):t=1);var n=fs();e=zo(e,t),e!==null&&(sg(e,t,n),Os(e,n))}function gJ(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),yF(e,n)}function vJ(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(ze(314))}s!==null&&s.delete(t),yF(e,n)}var jF;jF=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||As.current)ks=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ks=!1,iJ(e,t,n);ks=!!(e.flags&131072)}else ks=!1,Ir&&t.flags&1048576&&S6(t,zy,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;uy(e,t),e=t.pendingProps;var i=Ah(t,rs.current);rh(t,n),i=UC(null,t,s,e,i,n);var a=WC();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Es(s)?(a=!0,$y(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$C(t),i.updater=tb,t.stateNode=i,i._reactInternals=t,GS(t,s,e,n),t=XS(null,t,s,!0,a,n)):(t.tag=0,Ir&&a&&EC(t),cs(null,t,i,n),t=t.child),t;case 16:s=t.elementType;e:{switch(uy(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=jJ(s),e=Ui(s,e),i){case 0:t=YS(null,t,s,e,n);break e;case 1:t=A4(null,t,s,e,n);break e;case 11:t=k4(null,t,s,e,n);break e;case 14:t=T4(null,t,s,Ui(s.type,e),n);break e}throw Error(ze(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ui(s,i),YS(e,t,s,i,n);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ui(s,i),A4(e,t,s,i,n);case 3:e:{if(nF(t),e===null)throw Error(ze(387));s=t.pendingProps,a=t.memoizedState,i=a.element,A6(e,t),Uy(t,s,null,n);var o=t.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Dh(Error(ze(423)),t),t=E4(e,t,s,n,i);break e}else if(s!==i){i=Dh(Error(ze(424)),t),t=E4(e,t,s,n,i);break e}else for(Qs=Bl(t.stateNode.containerInfo.firstChild),Js=t,Ir=!0,Zi=null,n=k6(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Eh(),s===i){t=Bo(e,t,n);break e}cs(e,t,s,n)}t=t.child}return t;case 5:return E6(t),e===null&&HS(t),s=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,zS(s,i)?o=null:a!==null&&zS(s,a)&&(t.flags|=32),rF(e,t),cs(e,t,o,n),t.child;case 6:return e===null&&HS(t),null;case 13:return sF(e,t,n);case 4:return FC(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Oh(t,null,s,n):cs(e,t,s,n),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ui(s,i),k4(e,t,s,i,n);case 7:return cs(e,t,t.pendingProps,n),t.child;case 8:return cs(e,t,t.pendingProps.children,n),t.child;case 12:return cs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,wr(By,s._currentValue),s._currentValue=o,a!==null)if(oa(a.value,o)){if(a.children===i.children&&!As.current){t=Bo(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=Co(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),qS(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ze(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),qS(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}cs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,rh(t,n),i=Ai(i),s=s(i),t.flags|=1,cs(e,t,s,n),t.child;case 14:return s=t.type,i=Ui(s,t.pendingProps),i=Ui(s.type,i),T4(e,t,s,i,n);case 15:return eF(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Ui(s,i),uy(e,t),t.tag=1,Es(s)?(e=!0,$y(t)):e=!1,rh(t,n),X6(t,s,i),GS(t,s,i,n),XS(null,t,s,!0,e,n);case 19:return iF(e,t,n);case 22:return tF(e,t,n)}throw Error(ze(156,t.tag))};function bF(e,t){return G$(e,t)}function yJ(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(e,t,n,s){return new yJ(e,t,n,s)}function ek(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jJ(e){if(typeof e=="function")return ek(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yC)return 11;if(e===jC)return 14}return 2}function Hl(e,t){var n=e.alternate;return n===null?(n=Si(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fy(e,t,n,s,i,a){var o=2;if(s=e,typeof e=="function")ek(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Eu:return pd(n.children,i,a,t);case vC:o=8,i|=8;break;case vS:return e=Si(12,n,t,i|2),e.elementType=vS,e.lanes=a,e;case yS:return e=Si(13,n,t,i),e.elementType=yS,e.lanes=a,e;case jS:return e=Si(19,n,t,i),e.elementType=jS,e.lanes=a,e;case E$:return sb(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T$:o=10;break e;case A$:o=9;break e;case yC:o=11;break e;case jC:o=14;break e;case pl:o=16,s=null;break e}throw Error(ze(130,e==null?e:typeof e,""))}return t=Si(o,n,t,i),t.elementType=e,t.type=s,t.lanes=a,t}function pd(e,t,n,s){return e=Si(7,e,s,t),e.lanes=n,e}function sb(e,t,n,s){return e=Si(22,e,s,t),e.elementType=E$,e.lanes=n,e.stateNode={isHidden:!1},e}function VN(e,t,n){return e=Si(6,e,null,t),e.lanes=n,e}function UN(e,t,n){return t=Si(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bJ(e,t,n,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=NN(0),this.expirationTimes=NN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=NN(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function tk(e,t,n,s,i,a,o,l,c){return e=new bJ(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Si(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$C(a),e}function wJ(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Au,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function wF(e){if(!e)return nc;e=e._reactInternals;e:{if(Xd(e)!==e||e.tag!==1)throw Error(ze(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Es(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ze(171))}if(e.tag===1){var n=e.type;if(Es(n))return w6(e,n,t)}return t}function NF(e,t,n,s,i,a,o,l,c){return e=tk(n,s,!0,e,i,a,o,l,c),e.context=wF(null),n=e.current,s=fs(),i=Wl(n),a=Co(s,i),a.callback=t??null,Vl(n,a,i),e.current.lanes=i,sg(e,i,s),Os(e,s),e}function ib(e,t,n,s){var i=t.current,a=fs(),o=Wl(i);return n=wF(n),t.context===null?t.context=n:t.pendingContext=n,t=Co(a,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Vl(i,t,o),e!==null&&(sa(e,i,o,a),ly(e,i,o)),o}function Xy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function B4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function rk(e,t){B4(e,t),(e=e.alternate)&&B4(e,t)}function NJ(){return null}var SF=typeof reportError=="function"?reportError:function(e){console.error(e)};function nk(e){this._internalRoot=e}ab.prototype.render=nk.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ze(409));ib(e,t,null,null)};ab.prototype.unmount=nk.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cd(function(){ib(null,e,null,null)}),t[Fo]=null}};function ab(e){this._internalRoot=e}ab.prototype.unstable_scheduleHydration=function(e){if(e){var t=t6();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vl.length&&t!==0&&t<vl[n].priority;n++);vl.splice(n,0,e),n===0&&n6(e)}};function sk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ob(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function V4(){}function SJ(e,t,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var d=Xy(o);a.call(d)}}var o=NF(t,s,e,0,null,!1,!1,"",V4);return e._reactRootContainer=o,e[Fo]=o.current,Tp(e.nodeType===8?e.parentNode:e),Cd(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var d=Xy(c);l.call(d)}}var c=tk(e,0,!1,null,null,!1,!1,"",V4);return e._reactRootContainer=c,e[Fo]=c.current,Tp(e.nodeType===8?e.parentNode:e),Cd(function(){ib(t,c,n,s)}),c}function lb(e,t,n,s,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Xy(o);l.call(c)}}ib(t,o,e,i)}else o=SJ(n,t,e,i,s);return Xy(o)}J$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Vf(t.pendingLanes);n!==0&&(NC(t,n|1),Os(t,nn()),!(Jt&6)&&(Ih=nn()+500,yc()))}break;case 13:Cd(function(){var s=zo(e,1);if(s!==null){var i=fs();sa(s,e,1,i)}}),rk(e,1)}};SC=function(e){if(e.tag===13){var t=zo(e,134217728);if(t!==null){var n=fs();sa(t,e,134217728,n)}rk(e,134217728)}};e6=function(e){if(e.tag===13){var t=Wl(e),n=zo(e,t);if(n!==null){var s=fs();sa(n,e,t,s)}rk(e,t)}};t6=function(){return dr};r6=function(e,t){var n=dr;try{return dr=e,t()}finally{dr=n}};AS=function(e,t,n){switch(t){case"input":if(NS(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=Qj(s);if(!i)throw Error(ze(90));M$(s),NS(s,i)}}}break;case"textarea":I$(e,n);break;case"select":t=n.value,t!=null&&Qu(e,!!n.multiple,t,!1)}};V$=XC;U$=Cd;var _J={usingClientEntryPoint:!1,Events:[ag,Iu,Qj,z$,B$,XC]},jf={findFiberByHostInstance:Zc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PJ={bundleType:jf.bundleType,version:jf.version,rendererPackageName:jf.rendererPackageName,rendererConfig:jf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=q$(e),e===null?null:e.stateNode},findFiberByHostInstance:jf.findFiberByHostInstance||NJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sv.isDisabled&&Sv.supportsFiber)try{Gj=Sv.inject(PJ),Ea=Sv}catch{}}li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_J;li.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sk(t))throw Error(ze(200));return wJ(e,t,null,n)};li.createRoot=function(e,t){if(!sk(e))throw Error(ze(299));var n=!1,s="",i=SF;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=tk(e,1,!1,null,null,n,!1,s,i),e[Fo]=t.current,Tp(e.nodeType===8?e.parentNode:e),new nk(t)};li.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ze(188)):(e=Object.keys(e).join(","),Error(ze(268,e)));return e=q$(t),e=e===null?null:e.stateNode,e};li.flushSync=function(e){return Cd(e)};li.hydrate=function(e,t,n){if(!ob(t))throw Error(ze(200));return lb(null,e,t,!0,n)};li.hydrateRoot=function(e,t,n){if(!sk(e))throw Error(ze(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",o=SF;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=NF(t,null,e,1,n??null,i,!1,a,o),e[Fo]=t.current,Tp(e),s)for(e=0;e<s.length;e++)n=s[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ab(t)};li.render=function(e,t,n){if(!ob(t))throw Error(ze(200));return lb(null,e,t,!1,n)};li.unmountComponentAtNode=function(e){if(!ob(e))throw Error(ze(40));return e._reactRootContainer?(Cd(function(){lb(null,null,e,!1,function(){e._reactRootContainer=null,e[Fo]=null})}),!0):!1};li.unstable_batchedUpdates=XC;li.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!ob(n))throw Error(ze(200));if(e==null||e._reactInternals===void 0)throw Error(ze(38));return lb(e,t,n,!1,s)};li.version="18.3.1-next-f1338f8080-20240426";function _F(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_F)}catch(e){console.error(e)}}_F(),_$.exports=li;var jc=_$.exports;const CJ=ur(jc);var PF,U4=jc;PF=U4.createRoot,U4.hydrateRoot;const kJ="modulepreload",TJ=function(e){return"/"+e},W4={},$p=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=TJ(c),c in W4)return;W4[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":kJ,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((f,v)=>{m.addEventListener("load",f),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function AJ(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,i,a,o=[],l="",c=e.split("/");for(c[0]||c.shift();i=c.shift();)n=i[0],n==="*"?(o.push(n),l+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(s=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~s?s:~a?a:i.length)),l+=~s&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~s?"?":"")+"\\"+i.substring(a))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var CF={exports:{}},kF={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh=b;function EJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var OJ=typeof Object.is=="function"?Object.is:EJ,MJ=Lh.useState,DJ=Lh.useEffect,IJ=Lh.useLayoutEffect,LJ=Lh.useDebugValue;function RJ(e,t){var n=t(),s=MJ({inst:{value:n,getSnapshot:t}}),i=s[0].inst,a=s[1];return IJ(function(){i.value=n,i.getSnapshot=t,WN(i)&&a({inst:i})},[e,n,t]),DJ(function(){return WN(i)&&a({inst:i}),e(function(){WN(i)&&a({inst:i})})},[e]),LJ(n),n}function WN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!OJ(e,n)}catch{return!0}}function $J(e,t){return t()}var FJ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$J:RJ;kF.useSyncExternalStore=Lh.useSyncExternalStore!==void 0?Lh.useSyncExternalStore:FJ;CF.exports=kF;var zJ=CF.exports;const BJ=N$.useInsertionEffect,VJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UJ=VJ?b.useLayoutEffect:b.useEffect,WJ=BJ||UJ,TF=e=>{const t=b.useRef([e,(...n)=>t[0](...n)]).current;return WJ(()=>{t[0]=e}),t[1]},HJ="popstate",ik="pushState",ak="replaceState",qJ="hashchange",H4=[HJ,ik,ak,qJ],KJ=e=>{for(const t of H4)addEventListener(t,e);return()=>{for(const t of H4)removeEventListener(t,e)}},AF=(e,t)=>zJ.useSyncExternalStore(KJ,e,t),GJ=()=>location.search,ZJ=({ssrSearch:e=""}={})=>AF(GJ,()=>e),q4=()=>location.pathname,YJ=({ssrPath:e}={})=>AF(q4,e?()=>e:q4),XJ=(e,{replace:t=!1,state:n=null}={})=>history[t?ak:ik](n,"",e),QJ=(e={})=>[YJ(e),XJ],K4=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[K4]>"u"){for(const e of[ik,ak]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,K4,{value:!0})}const JJ=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",EF=(e="")=>e==="/"?"":e,eee=(e,t)=>e[0]==="~"?e.slice(1):EF(t)+e,tee=(e="",t)=>JJ(G4(EF(e)),G4(t)),G4=e=>{try{return decodeURI(e)}catch{return e}},OF={hook:QJ,searchHook:ZJ,parser:AJ,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},MF=b.createContext(OF),lg=()=>b.useContext(MF),DF={},IF=b.createContext(DF),Pm=()=>b.useContext(IF),cb=e=>{const[t,n]=e.hook(e);return[tee(e.base,t),TF((s,i)=>n(eee(s,e.base),i))]},Jr=()=>cb(lg()),LF=(e,t,n,s)=>{const{pattern:i,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),o=i.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=a!==!1?Object.fromEntries(a.map((m,f)=>[m,c[f]])):o.groups;let h={...c};return d&&Object.assign(h,d),h})(),...s?[l]:[]]:[!1,null]},ree=({children:e,...t})=>{var h,m;const n=lg(),s=t.hook?OF:n;let i=s;const[a,o]=((h=t.ssrPath)==null?void 0:h.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=a),t.hrefs=t.hrefs??((m=t.hook)==null?void 0:m.hrefs);let l=b.useRef({}),c=l.current,d=c;for(let f in s){const v=f==="base"?s[f]+(t[f]||""):t[f]||s[f];c===d&&v!==d[f]&&(l.current=d={...d}),d[f]=v,v!==s[f]&&(i=d)}return b.createElement(MF.Provider,{value:i,children:e})},Z4=({children:e,component:t},n)=>t?b.createElement(t,{params:n}):typeof e=="function"?e(n):e,nee=e=>{let t=b.useRef(DF),n=t.current;for(const s in e)e[s]!==n[s]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},it=({path:e,nest:t,match:n,...s})=>{const i=lg(),[a]=cb(i),[o,l,c]=n??LF(i.parser,e,a,t),d=nee({...Pm(),...l});if(!o)return null;const h=c?b.createElement(ree,{base:c},Z4(s,d)):Z4(s,d);return b.createElement(IF.Provider,{value:d,children:h})},Ae=b.forwardRef((e,t)=>{const n=lg(),[s,i]=cb(n),{to:a="",href:o=a,onClick:l,asChild:c,children:d,className:h,replace:m,state:f,...v}=e,p=TF(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l==null||l(y),y.defaultPrevented||(y.preventDefault(),i(o,e)))}),x=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&b.isValidElement(d)?b.cloneElement(d,{onClick:p,href:x}):b.createElement("a",{...v,onClick:p,href:x,className:h!=null&&h.call?h(s===o):h,children:d,ref:t})}),RF=e=>Array.isArray(e)?e.flatMap(t=>RF(t&&t.type===b.Fragment?t.props.children:t)):[e],see=({children:e,location:t})=>{const n=lg(),[s]=cb(n);for(const i of RF(e)){let a=0;if(b.isValidElement(i)&&(a=LF(n.parser,i.props.path,t||s,i.props.nest))[0])return b.cloneElement(i,{match:a})}return null};var Cm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},kd=typeof window>"u"||"Deno"in globalThis;function yi(){}function iee(e,t){return typeof e=="function"?e(t):e}function c_(e){return typeof e=="number"&&e>=0&&e!==1/0}function $F(e,t){return Math.max(e+(t||0)-Date.now(),0)}function sh(e,t){return typeof e=="function"?e(t):e}function Yi(e,t){return typeof e=="function"?e(t):e}function Y4(e,t){const{type:n="all",exact:s,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==ok(o,t.options))return!1}else if(!Fp(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function X4(e,t){const{exact:n,status:s,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Td(t.options.mutationKey)!==Td(a))return!1}else if(!Fp(t.options.mutationKey,a))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function ok(e,t){return((t==null?void 0:t.queryKeyHashFn)||Td)(e)}function Td(e){return JSON.stringify(e,(t,n)=>d_(n)?Object.keys(n).sort().reduce((s,i)=>(s[i]=n[i],s),{}):n)}function Fp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Fp(e[n],t[n])):!1}function FF(e,t){if(e===t)return e;const n=Q4(e)&&Q4(t);if(n||d_(e)&&d_(t)){const s=n?e:Object.keys(e),i=s.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const h=n?d:a[d];(!n&&s.includes(h)||n)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,c++):(l[h]=FF(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&c++)}return i===o&&c===i?e:l}return t}function Qy(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Q4(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function d_(e){if(!J4(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!J4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function J4(e){return Object.prototype.toString.call(e)==="[object Object]"}function aee(e){return new Promise(t=>{setTimeout(t,e)})}function u_(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?FF(e,t):t}function oee(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function lee(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var lk=Symbol();function zF(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===lk?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var od,wl,xh,n$,cee=(n$=class extends Cm{constructor(){super();xt(this,od);xt(this,wl);xt(this,xh);et(this,xh,t=>{if(!kd&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){fe(this,wl)||this.setEventListener(fe(this,xh))}onUnsubscribe(){var t;this.hasListeners()||((t=fe(this,wl))==null||t.call(this),et(this,wl,void 0))}setEventListener(t){var n;et(this,xh,t),(n=fe(this,wl))==null||n.call(this),et(this,wl,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){fe(this,od)!==t&&(et(this,od,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof fe(this,od)=="boolean"?fe(this,od):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},od=new WeakMap,wl=new WeakMap,xh=new WeakMap,n$),ck=new cee,gh,Nl,vh,s$,dee=(s$=class extends Cm{constructor(){super();xt(this,gh,!0);xt(this,Nl);xt(this,vh);et(this,vh,t=>{if(!kd&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){fe(this,Nl)||this.setEventListener(fe(this,vh))}onUnsubscribe(){var t;this.hasListeners()||((t=fe(this,Nl))==null||t.call(this),et(this,Nl,void 0))}setEventListener(t){var n;et(this,vh,t),(n=fe(this,Nl))==null||n.call(this),et(this,Nl,t(this.setOnline.bind(this)))}setOnline(t){fe(this,gh)!==t&&(et(this,gh,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return fe(this,gh)}},gh=new WeakMap,Nl=new WeakMap,vh=new WeakMap,s$),Jy=new dee;function h_(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function s(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{s({status:"fulfilled",value:i}),e(i)},n.reject=i=>{s({status:"rejected",reason:i}),t(i)},n}function uee(e){return Math.min(1e3*2**e,3e4)}function BF(e){return(e??"online")==="online"?Jy.isOnline():!0}var VF=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function HN(e){return e instanceof VF}function UF(e){let t=!1,n=0,s=!1,i;const a=h_(),o=x=>{var y;s||(f(new VF(x)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>ck.isFocused()&&(e.networkMode==="always"||Jy.isOnline())&&e.canRun(),h=()=>BF(e.networkMode)&&e.canRun(),m=x=>{var y;s||(s=!0,(y=e.onSuccess)==null||y.call(e,x),i==null||i(),a.resolve(x))},f=x=>{var y;s||(s=!0,(y=e.onError)==null||y.call(e,x),i==null||i(),a.reject(x))},v=()=>new Promise(x=>{var y;i=w=>{(s||d())&&x(w)},(y=e.onPause)==null||y.call(e)}).then(()=>{var x;i=void 0,s||(x=e.onContinue)==null||x.call(e)}),p=()=>{if(s)return;let x;const y=n===0?e.initialPromise:void 0;try{x=y??e.fn()}catch(w){x=Promise.reject(w)}Promise.resolve(x).then(m).catch(w=>{var k;if(s)return;const j=e.retry??(kd?0:3),N=e.retryDelay??uee,C=typeof N=="function"?N(n,w):N,P=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,w);if(t||!P){f(w);return}n++,(k=e.onFail)==null||k.call(e,n,w),aee(C).then(()=>d()?void 0:v()).then(()=>{t?f(w):p()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?p():v().then(p),a)}}function hee(){let e=[],t=0,n=l=>{l()},s=l=>{l()},i=l=>setTimeout(l,0);const a=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{i=l}}}var Nn=hee(),ld,i$,WF=(i$=class{constructor(){xt(this,ld)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),c_(this.gcTime)&&et(this,ld,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(kd?1/0:5*60*1e3))}clearGcTimeout(){fe(this,ld)&&(clearTimeout(fe(this,ld)),et(this,ld,void 0))}},ld=new WeakMap,i$),yh,jh,vi,qn,Jx,cd,Wi,ao,a$,mee=(a$=class extends WF{constructor(t){super();xt(this,Wi);xt(this,yh);xt(this,jh);xt(this,vi);xt(this,qn);xt(this,Jx);xt(this,cd);et(this,cd,!1),et(this,Jx,t.defaultOptions),this.setOptions(t.options),this.observers=[],et(this,vi,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,et(this,yh,fee(this.options)),this.state=t.state??fe(this,yh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=fe(this,qn))==null?void 0:t.promise}setOptions(t){this.options={...fe(this,Jx),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&fe(this,vi).remove(this)}setData(t,n){const s=u_(this.state.data,t,this.options);return It(this,Wi,ao).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){It(this,Wi,ao).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,i;const n=(s=fe(this,qn))==null?void 0:s.promise;return(i=fe(this,qn))==null||i.cancel(t),n?n.then(yi).catch(yi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(fe(this,yh))}isActive(){return this.observers.some(t=>Yi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===lk||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!$F(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=fe(this,qn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=fe(this,qn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),fe(this,vi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(fe(this,qn)&&(fe(this,cd)?fe(this,qn).cancel({revert:!0}):fe(this,qn).cancelRetry()),this.scheduleGc()),fe(this,vi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||It(this,Wi,ao).call(this,{type:"invalidate"})}fetch(t,n){var c,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(fe(this,qn))return fe(this,qn).continueRetry(),fe(this,qn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(f=>f.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(et(this,cd,!0),s.signal)})},a=()=>{const m=zF(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return i(f),et(this,cd,!1),this.options.persister?this.options.persister(m,f,this):m(f)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(o),(c=this.options.behavior)==null||c.onFetch(o,this),et(this,jh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&It(this,Wi,ao).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const l=m=>{var f,v,p,x;HN(m)&&m.silent||It(this,Wi,ao).call(this,{type:"error",error:m}),HN(m)||((v=(f=fe(this,vi).config).onError)==null||v.call(f,m,this),(x=(p=fe(this,vi).config).onSettled)==null||x.call(p,this.state.data,m,this)),this.scheduleGc()};return et(this,qn,UF({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var f,v,p,x;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){l(y);return}(v=(f=fe(this,vi).config).onSuccess)==null||v.call(f,m,this),(x=(p=fe(this,vi).config).onSettled)==null||x.call(p,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,f)=>{It(this,Wi,ao).call(this,{type:"failed",failureCount:m,error:f})},onPause:()=>{It(this,Wi,ao).call(this,{type:"pause"})},onContinue:()=>{It(this,Wi,ao).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),fe(this,qn).start()}},yh=new WeakMap,jh=new WeakMap,vi=new WeakMap,qn=new WeakMap,Jx=new WeakMap,cd=new WeakMap,Wi=new WeakSet,ao=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...HF(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return HN(i)&&i.revert&&fe(this,jh)?{...fe(this,jh),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),Nn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),fe(this,vi).notify({query:this,type:"updated",action:t})})},a$);function HF(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:BF(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function fee(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ja,o$,pee=(o$=class extends Cm{constructor(t={}){super();xt(this,ja);this.config=t,et(this,ja,new Map)}build(t,n,s){const i=n.queryKey,a=n.queryHash??ok(i,n);let o=this.get(a);return o||(o=new mee({cache:this,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){fe(this,ja).has(t.queryHash)||(fe(this,ja).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=fe(this,ja).get(t.queryHash);n&&(t.destroy(),n===t&&fe(this,ja).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Nn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return fe(this,ja).get(t)}getAll(){return[...fe(this,ja).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Y4(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>Y4(t,s)):n}notify(t){Nn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Nn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Nn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ja=new WeakMap,o$),ba,as,dd,wa,ul,l$,xee=(l$=class extends WF{constructor(t){super();xt(this,wa);xt(this,ba);xt(this,as);xt(this,dd);this.mutationId=t.mutationId,et(this,as,t.mutationCache),et(this,ba,[]),this.state=t.state||qF(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){fe(this,ba).includes(t)||(fe(this,ba).push(t),this.clearGcTimeout(),fe(this,as).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){et(this,ba,fe(this,ba).filter(n=>n!==t)),this.scheduleGc(),fe(this,as).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){fe(this,ba).length||(this.state.status==="pending"?this.scheduleGc():fe(this,as).remove(this))}continue(){var t;return((t=fe(this,dd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,a,o,l,c,d,h,m,f,v,p,x,y,w,j,N,C,P,k,_;et(this,dd,UF({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(O,M)=>{It(this,wa,ul).call(this,{type:"failed",failureCount:O,error:M})},onPause:()=>{It(this,wa,ul).call(this,{type:"pause"})},onContinue:()=>{It(this,wa,ul).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>fe(this,as).canRun(this)}));const n=this.state.status==="pending",s=!fe(this,dd).canStart();try{if(!n){It(this,wa,ul).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(i=fe(this,as).config).onMutate)==null?void 0:a.call(i,t,this));const M=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));M!==this.state.context&&It(this,wa,ul).call(this,{type:"pending",context:M,variables:t,isPaused:s})}const O=await fe(this,dd).start();return await((d=(c=fe(this,as).config).onSuccess)==null?void 0:d.call(c,O,t,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,O,t,this.state.context)),await((v=(f=fe(this,as).config).onSettled)==null?void 0:v.call(f,O,null,this.state.variables,this.state.context,this)),await((x=(p=this.options).onSettled)==null?void 0:x.call(p,O,null,t,this.state.context)),It(this,wa,ul).call(this,{type:"success",data:O}),O}catch(O){try{throw await((w=(y=fe(this,as).config).onError)==null?void 0:w.call(y,O,t,this.state.context,this)),await((N=(j=this.options).onError)==null?void 0:N.call(j,O,t,this.state.context)),await((P=(C=fe(this,as).config).onSettled)==null?void 0:P.call(C,void 0,O,this.state.variables,this.state.context,this)),await((_=(k=this.options).onSettled)==null?void 0:_.call(k,void 0,O,t,this.state.context)),O}finally{It(this,wa,ul).call(this,{type:"error",error:O})}}finally{fe(this,as).runNext(this)}}},ba=new WeakMap,as=new WeakMap,dd=new WeakMap,wa=new WeakSet,ul=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Nn.batch(()=>{fe(this,ba).forEach(s=>{s.onMutationUpdate(t)}),fe(this,as).notify({mutation:this,type:"updated",action:t})})},l$);function qF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $s,eg,c$,gee=(c$=class extends Cm{constructor(t={}){super();xt(this,$s);xt(this,eg);this.config=t,et(this,$s,new Map),et(this,eg,Date.now())}build(t,n,s){const i=new xee({mutationCache:this,mutationId:++ov(this,eg)._,options:t.defaultMutationOptions(n),state:s});return this.add(i),i}add(t){const n=_v(t),s=fe(this,$s).get(n)??[];s.push(t),fe(this,$s).set(n,s),this.notify({type:"added",mutation:t})}remove(t){var s;const n=_v(t);if(fe(this,$s).has(n)){const i=(s=fe(this,$s).get(n))==null?void 0:s.filter(a=>a!==t);i&&(i.length===0?fe(this,$s).delete(n):fe(this,$s).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var s;const n=(s=fe(this,$s).get(_v(t)))==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var s;const n=(s=fe(this,$s).get(_v(t)))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Nn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...fe(this,$s).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(s=>X4(n,s))}findAll(t={}){return this.getAll().filter(n=>X4(t,n))}notify(t){Nn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Nn.batch(()=>Promise.all(t.map(n=>n.continue().catch(yi))))}},$s=new WeakMap,eg=new WeakMap,c$);function _v(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function eM(e){return{onFetch:(t,n)=>{var h,m,f,v,p;const s=t.options,i=(f=(m=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:f.direction,a=((v=t.state.data)==null?void 0:v.pages)||[],o=((p=t.state.data)==null?void 0:p.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const y=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},w=zF(t.options,t.fetchOptions),j=async(N,C,P)=>{if(x)return Promise.reject();if(C==null&&N.pages.length)return Promise.resolve(N);const k={queryKey:t.queryKey,pageParam:C,direction:P?"backward":"forward",meta:t.options.meta};y(k);const _=await w(k),{maxPages:O}=t.options,M=P?lee:oee;return{pages:M(N.pages,_,O),pageParams:M(N.pageParams,C,O)}};if(i&&a.length){const N=i==="backward",C=N?vee:tM,P={pages:a,pageParams:o},k=C(s,P);l=await j(P,k,N)}else{const N=e??a.length;do{const C=c===0?o[0]??s.initialPageParam:tM(s,l);if(c>0&&C==null)break;l=await j(l,C),c++}while(c<N)}return l};t.options.persister?t.fetchFn=()=>{var x,y;return(y=(x=t.options).persister)==null?void 0:y.call(x,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function tM(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function vee(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var Gr,Sl,_l,bh,wh,Pl,Nh,Sh,d$,yee=(d$=class{constructor(e={}){xt(this,Gr);xt(this,Sl);xt(this,_l);xt(this,bh);xt(this,wh);xt(this,Pl);xt(this,Nh);xt(this,Sh);et(this,Gr,e.queryCache||new pee),et(this,Sl,e.mutationCache||new gee),et(this,_l,e.defaultOptions||{}),et(this,bh,new Map),et(this,wh,new Map),et(this,Pl,0)}mount(){ov(this,Pl)._++,fe(this,Pl)===1&&(et(this,Nh,ck.subscribe(async e=>{e&&(await this.resumePausedMutations(),fe(this,Gr).onFocus())})),et(this,Sh,Jy.subscribe(async e=>{e&&(await this.resumePausedMutations(),fe(this,Gr).onOnline())})))}unmount(){var e,t;ov(this,Pl)._--,fe(this,Pl)===0&&((e=fe(this,Nh))==null||e.call(this),et(this,Nh,void 0),(t=fe(this,Sh))==null||t.call(this),et(this,Sh,void 0))}isFetching(e){return fe(this,Gr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return fe(this,Sl).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=fe(this,Gr).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),s=fe(this,Gr).build(this,n);return e.revalidateIfStale&&s.isStaleByTime(sh(n.staleTime,s))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return fe(this,Gr).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),i=fe(this,Gr).get(s.queryHash),a=i==null?void 0:i.state.data,o=iee(t,a);if(o!==void 0)return fe(this,Gr).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Nn.batch(()=>fe(this,Gr).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=fe(this,Gr).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=fe(this,Gr);Nn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=fe(this,Gr),s={type:"active",...e};return Nn.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},s=Nn.batch(()=>fe(this,Gr).findAll(e).map(i=>i.cancel(n)));return Promise.all(s).then(yi).catch(yi)}invalidateQueries(e={},t={}){return Nn.batch(()=>{if(fe(this,Gr).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=Nn.batch(()=>fe(this,Gr).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(yi)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(yi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=fe(this,Gr).build(this,t);return n.isStaleByTime(sh(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(yi).catch(yi)}fetchInfiniteQuery(e){return e.behavior=eM(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(yi).catch(yi)}ensureInfiniteQueryData(e){return e.behavior=eM(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Jy.isOnline()?fe(this,Sl).resumePausedMutations():Promise.resolve()}getQueryCache(){return fe(this,Gr)}getMutationCache(){return fe(this,Sl)}getDefaultOptions(){return fe(this,_l)}setDefaultOptions(e){et(this,_l,e)}setQueryDefaults(e,t){fe(this,bh).set(Td(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...fe(this,bh).values()];let n={};return t.forEach(s=>{Fp(e,s.queryKey)&&(n={...n,...s.defaultOptions})}),n}setMutationDefaults(e,t){fe(this,wh).set(Td(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...fe(this,wh).values()];let n={};return t.forEach(s=>{Fp(e,s.mutationKey)&&(n={...n,...s.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...fe(this,_l).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ok(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===lk&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...fe(this,_l).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){fe(this,Gr).clear(),fe(this,Sl).clear()}},Gr=new WeakMap,Sl=new WeakMap,_l=new WeakMap,bh=new WeakMap,wh=new WeakMap,Pl=new WeakMap,Nh=new WeakMap,Sh=new WeakMap,d$),Ss,qt,tg,os,ud,_h,Cl,Na,rg,Ph,Ch,hd,md,kl,kh,or,Wf,m_,f_,p_,x_,g_,v_,y_,KF,u$,jee=(u$=class extends Cm{constructor(t,n){super();xt(this,or);xt(this,Ss);xt(this,qt);xt(this,tg);xt(this,os);xt(this,ud);xt(this,_h);xt(this,Cl);xt(this,Na);xt(this,rg);xt(this,Ph);xt(this,Ch);xt(this,hd);xt(this,md);xt(this,kl);xt(this,kh,new Set);this.options=n,et(this,Ss,t),et(this,Na,null),et(this,Cl,h_()),this.options.experimental_prefetchInRender||fe(this,Cl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(fe(this,qt).addObserver(this),rM(fe(this,qt),this.options)?It(this,or,Wf).call(this):this.updateResult(),It(this,or,x_).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return j_(fe(this,qt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return j_(fe(this,qt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,It(this,or,g_).call(this),It(this,or,v_).call(this),fe(this,qt).removeObserver(this)}setOptions(t,n){const s=this.options,i=fe(this,qt);if(this.options=fe(this,Ss).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Yi(this.options.enabled,fe(this,qt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");It(this,or,y_).call(this),fe(this,qt).setOptions(this.options),s._defaulted&&!Qy(this.options,s)&&fe(this,Ss).getQueryCache().notify({type:"observerOptionsUpdated",query:fe(this,qt),observer:this});const a=this.hasListeners();a&&nM(fe(this,qt),i,this.options,s)&&It(this,or,Wf).call(this),this.updateResult(n),a&&(fe(this,qt)!==i||Yi(this.options.enabled,fe(this,qt))!==Yi(s.enabled,fe(this,qt))||sh(this.options.staleTime,fe(this,qt))!==sh(s.staleTime,fe(this,qt)))&&It(this,or,m_).call(this);const o=It(this,or,f_).call(this);a&&(fe(this,qt)!==i||Yi(this.options.enabled,fe(this,qt))!==Yi(s.enabled,fe(this,qt))||o!==fe(this,kl))&&It(this,or,p_).call(this,o)}getOptimisticResult(t){const n=fe(this,Ss).getQueryCache().build(fe(this,Ss),t),s=this.createResult(n,t);return wee(this,s)&&(et(this,os,s),et(this,_h,this.options),et(this,ud,fe(this,qt).state)),s}getCurrentResult(){return fe(this,os)}trackResult(t,n){const s={};return Object.keys(t).forEach(i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),s}trackProp(t){fe(this,kh).add(t)}getCurrentQuery(){return fe(this,qt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=fe(this,Ss).defaultQueryOptions(t),s=fe(this,Ss).getQueryCache().build(fe(this,Ss),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return It(this,or,Wf).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),fe(this,os)))}createResult(t,n){var O;const s=fe(this,qt),i=this.options,a=fe(this,os),o=fe(this,ud),l=fe(this,_h),d=t!==s?t.state:fe(this,tg),{state:h}=t;let m={...h},f=!1,v;if(n._optimisticResults){const M=this.hasListeners(),T=!M&&rM(t,n),I=M&&nM(t,s,n,i);(T||I)&&(m={...m,...HF(h.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:p,errorUpdatedAt:x,status:y}=m;if(n.select&&m.data!==void 0)if(a&&m.data===(o==null?void 0:o.data)&&n.select===fe(this,rg))v=fe(this,Ph);else try{et(this,rg,n.select),v=n.select(m.data),v=u_(a==null?void 0:a.data,v,n),et(this,Ph,v),et(this,Na,null)}catch(M){et(this,Na,M)}else v=m.data;if(n.placeholderData!==void 0&&v===void 0&&y==="pending"){let M;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))M=a.data;else if(M=typeof n.placeholderData=="function"?n.placeholderData((O=fe(this,Ch))==null?void 0:O.state.data,fe(this,Ch)):n.placeholderData,n.select&&M!==void 0)try{M=n.select(M),et(this,Na,null)}catch(T){et(this,Na,T)}M!==void 0&&(y="success",v=u_(a==null?void 0:a.data,M,n),f=!0)}fe(this,Na)&&(p=fe(this,Na),v=fe(this,Ph),x=Date.now(),y="error");const w=m.fetchStatus==="fetching",j=y==="pending",N=y==="error",C=j&&w,P=v!==void 0,_={status:y,fetchStatus:m.fetchStatus,isPending:j,isSuccess:y==="success",isError:N,isInitialLoading:C,isLoading:C,data:v,dataUpdatedAt:m.dataUpdatedAt,error:p,errorUpdatedAt:x,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!j,isLoadingError:N&&!P,isPaused:m.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:N&&P,isStale:dk(t,n),refetch:this.refetch,promise:fe(this,Cl)};if(this.options.experimental_prefetchInRender){const M=A=>{_.status==="error"?A.reject(_.error):_.data!==void 0&&A.resolve(_.data)},T=()=>{const A=et(this,Cl,_.promise=h_());M(A)},I=fe(this,Cl);switch(I.status){case"pending":t.queryHash===s.queryHash&&M(I);break;case"fulfilled":(_.status==="error"||_.data!==I.value)&&T();break;case"rejected":(_.status!=="error"||_.error!==I.reason)&&T();break}}return _}updateResult(t){const n=fe(this,os),s=this.createResult(fe(this,qt),this.options);if(et(this,ud,fe(this,qt).state),et(this,_h,this.options),fe(this,ud).data!==void 0&&et(this,Ch,fe(this,qt)),Qy(s,n))return;et(this,os,s);const i={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!fe(this,kh).size)return!0;const c=new Set(l??fe(this,kh));return this.options.throwOnError&&c.add("error"),Object.keys(fe(this,os)).some(d=>{const h=d;return fe(this,os)[h]!==n[h]&&c.has(h)})};(t==null?void 0:t.listeners)!==!1&&a()&&(i.listeners=!0),It(this,or,KF).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&It(this,or,x_).call(this)}},Ss=new WeakMap,qt=new WeakMap,tg=new WeakMap,os=new WeakMap,ud=new WeakMap,_h=new WeakMap,Cl=new WeakMap,Na=new WeakMap,rg=new WeakMap,Ph=new WeakMap,Ch=new WeakMap,hd=new WeakMap,md=new WeakMap,kl=new WeakMap,kh=new WeakMap,or=new WeakSet,Wf=function(t){It(this,or,y_).call(this);let n=fe(this,qt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(yi)),n},m_=function(){It(this,or,g_).call(this);const t=sh(this.options.staleTime,fe(this,qt));if(kd||fe(this,os).isStale||!c_(t))return;const s=$F(fe(this,os).dataUpdatedAt,t)+1;et(this,hd,setTimeout(()=>{fe(this,os).isStale||this.updateResult()},s))},f_=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(fe(this,qt)):this.options.refetchInterval)??!1},p_=function(t){It(this,or,v_).call(this),et(this,kl,t),!(kd||Yi(this.options.enabled,fe(this,qt))===!1||!c_(fe(this,kl))||fe(this,kl)===0)&&et(this,md,setInterval(()=>{(this.options.refetchIntervalInBackground||ck.isFocused())&&It(this,or,Wf).call(this)},fe(this,kl)))},x_=function(){It(this,or,m_).call(this),It(this,or,p_).call(this,It(this,or,f_).call(this))},g_=function(){fe(this,hd)&&(clearTimeout(fe(this,hd)),et(this,hd,void 0))},v_=function(){fe(this,md)&&(clearInterval(fe(this,md)),et(this,md,void 0))},y_=function(){const t=fe(this,Ss).getQueryCache().build(fe(this,Ss),this.options);if(t===fe(this,qt))return;const n=fe(this,qt);et(this,qt,t),et(this,tg,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},KF=function(t){Nn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(fe(this,os))}),fe(this,Ss).getQueryCache().notify({query:fe(this,qt),type:"observerResultsUpdated"})})},u$);function bee(e,t){return Yi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function rM(e,t){return bee(e,t)||e.state.data!==void 0&&j_(e,t,t.refetchOnMount)}function j_(e,t,n){if(Yi(t.enabled,e)!==!1){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&dk(e,t)}return!1}function nM(e,t,n,s){return(e!==t||Yi(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&dk(e,n)}function dk(e,t){return Yi(t.enabled,e)!==!1&&e.isStaleByTime(sh(t.staleTime,e))}function wee(e,t){return!Qy(e.getCurrentResult(),t)}var Tl,Al,_s,yo,Ro,py,b_,h$,Nee=(h$=class extends Cm{constructor(n,s){super();xt(this,Ro);xt(this,Tl);xt(this,Al);xt(this,_s);xt(this,yo);et(this,Tl,n),this.setOptions(s),this.bindMethods(),It(this,Ro,py).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const s=this.options;this.options=fe(this,Tl).defaultMutationOptions(n),Qy(this.options,s)||fe(this,Tl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:fe(this,_s),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Td(s.mutationKey)!==Td(this.options.mutationKey)?this.reset():((i=fe(this,_s))==null?void 0:i.state.status)==="pending"&&fe(this,_s).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=fe(this,_s))==null||n.removeObserver(this)}onMutationUpdate(n){It(this,Ro,py).call(this),It(this,Ro,b_).call(this,n)}getCurrentResult(){return fe(this,Al)}reset(){var n;(n=fe(this,_s))==null||n.removeObserver(this),et(this,_s,void 0),It(this,Ro,py).call(this),It(this,Ro,b_).call(this)}mutate(n,s){var i;return et(this,yo,s),(i=fe(this,_s))==null||i.removeObserver(this),et(this,_s,fe(this,Tl).getMutationCache().build(fe(this,Tl),this.options)),fe(this,_s).addObserver(this),fe(this,_s).execute(n)}},Tl=new WeakMap,Al=new WeakMap,_s=new WeakMap,yo=new WeakMap,Ro=new WeakSet,py=function(){var s;const n=((s=fe(this,_s))==null?void 0:s.state)??qF();et(this,Al,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},b_=function(n){Nn.batch(()=>{var s,i,a,o,l,c,d,h;if(fe(this,yo)&&this.hasListeners()){const m=fe(this,Al).variables,f=fe(this,Al).context;(n==null?void 0:n.type)==="success"?((i=(s=fe(this,yo)).onSuccess)==null||i.call(s,n.data,m,f),(o=(a=fe(this,yo)).onSettled)==null||o.call(a,n.data,null,m,f)):(n==null?void 0:n.type)==="error"&&((c=(l=fe(this,yo)).onError)==null||c.call(l,n.error,m,f),(h=(d=fe(this,yo)).onSettled)==null||h.call(d,void 0,n.error,m,f))}this.listeners.forEach(m=>{m(fe(this,Al))})})},h$),GF=b.createContext(void 0),on=e=>{const t=b.useContext(GF);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},See=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(GF.Provider,{value:e,children:t})),ZF=b.createContext(!1),_ee=()=>b.useContext(ZF);ZF.Provider;function Pee(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Cee=b.createContext(Pee()),kee=()=>b.useContext(Cee);function YF(e,t){return typeof e=="function"?e(...t):!!e}function w_(){}var Tee=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Aee=e=>{b.useEffect(()=>{e.clearReset()},[e])},Eee=({result:e,errorResetBoundary:t,throwOnError:n,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&YF(n,[e.error,s]),Oee=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Mee=(e,t)=>e.isLoading&&e.isFetching&&!t,Dee=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,sM=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Iee(e,t,n){var h,m,f,v,p;const s=on(),i=_ee(),a=kee(),o=s.defaultQueryOptions(e);(m=(h=s.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,o),o._optimisticResults=i?"isRestoring":"optimistic",Oee(o),Tee(o,a),Aee(a);const l=!s.getQueryCache().get(o.queryHash),[c]=b.useState(()=>new t(s,o)),d=c.getOptimisticResult(o);if(b.useSyncExternalStore(b.useCallback(x=>{const y=i?w_:c.subscribe(Nn.batchCalls(x));return c.updateResult(),y},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),Dee(o,d))throw sM(o,c,a);if(Eee({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash)}))throw d.error;if((v=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||v.call(f,o,d),o.experimental_prefetchInRender&&!kd&&Mee(d,i)){const x=l?sM(o,c,a):(p=s.getQueryCache().get(o.queryHash))==null?void 0:p.promise;x==null||x.catch(w_).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Le(e,t){return Iee(e,jee)}function pt(e,t){const n=on(),[s]=b.useState(()=>new Nee(n,e));b.useEffect(()=>{s.setOptions(e)},[s,e]);const i=b.useSyncExternalStore(b.useCallback(o=>s.subscribe(Nn.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=b.useCallback((o,l)=>{s.mutate(o,l).catch(w_)},[s]);if(i.error&&YF(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}async function XF(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function Kt(e,t){const n=await fetch(e,{method:(t==null?void 0:t.method)||"GET",headers:(t==null?void 0:t.headers)||{},body:t==null?void 0:t.body,credentials:"include"});return await XF(n),n}const Lee=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});return e==="returnNull"&&n.status===401?null:(await XF(n),await n.json())},Br=new yee({defaultOptions:{queries:{queryFn:Lee({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:5*60*1e3,retry:1,onError:e=>{console.error("Query error caught:",e)}},mutations:{retry:!1,onError:e=>{console.error("Mutation error caught:",e)}}}});Br.setMutationDefaults(["*"],{onError:e=>{console.error("Global mutation error:",e)}});Br.setQueryDefaults(["*"],{onError:e=>{console.error("Global query error:",e)}});const Ree=1,$ee=3e3;let qN=0;function Fee(){return qN=(qN+1)%Number.MAX_SAFE_INTEGER,qN.toString()}const KN=new Map,iM=e=>{if(KN.has(e))return;const t=setTimeout(()=>{KN.delete(e),cp({type:"REMOVE_TOAST",toastId:e})},$ee);KN.set(e,t)},zee=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Ree)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?iM(n):e.toasts.forEach(s=>{iM(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},xy=[];let gy={toasts:[]};function cp(e){gy=zee(gy,e),xy.forEach(t=>{t(gy)})}function Bee({...e}){const t=Fee(),n=i=>cp({type:"UPDATE_TOAST",toast:{...i,id:t}}),s=()=>cp({type:"DISMISS_TOAST",toastId:t});return cp({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||s()}}}),setTimeout(()=>{s()},3e3),{id:t,dismiss:s,update:n}}function ft(){const[e,t]=b.useState(gy);return b.useEffect(()=>(xy.push(t),()=>{const n=xy.indexOf(t);n>-1&&xy.splice(n,1)}),[e]),{...e,toast:Bee,dismiss:n=>cp({type:"DISMISS_TOAST",toastId:n})}}function $e(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function aM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function db(...e){return t=>{let n=!1;const s=e.map(i=>{const a=aM(i,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():aM(e[i],null)}}}}function Nt(...e){return b.useCallback(db(...e),e)}function Vee(e,t){const n=b.createContext(t),s=a=>{const{children:o,...l}=a,c=b.useMemo(()=>l,Object.values(l));return r.jsx(n.Provider,{value:c,children:o})};s.displayName=e+"Provider";function i(a){const o=b.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[s,i]}function xn(e,t=[]){let n=[];function s(a,o){const l=b.createContext(o),c=n.length;n=[...n,o];const d=m=>{var w;const{scope:f,children:v,...p}=m,x=((w=f==null?void 0:f[e])==null?void 0:w[c])||l,y=b.useMemo(()=>p,Object.values(p));return r.jsx(x.Provider,{value:y,children:v})};d.displayName=a+"Provider";function h(m,f){var x;const v=((x=f==null?void 0:f[e])==null?void 0:x[c])||l,p=b.useContext(v);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[d,h]}const i=()=>{const a=n.map(o=>b.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return b.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[s,Uee(i,...t)]}function Uee(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const m=c(a)[`__scope${d}`];return{...l,...m}},{});return b.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Ad(e){const t=Wee(e),n=b.forwardRef((s,i)=>{const{children:a,...o}=s,l=b.Children.toArray(a),c=l.find(Hee);if(c){const d=c.props.children,h=l.map(m=>m===c?b.Children.count(d)>1?b.Children.only(null):b.isValidElement(d)?d.props.children:null:m);return r.jsx(t,{...o,ref:i,children:b.isValidElement(d)?b.cloneElement(d,void 0,h):null})}return r.jsx(t,{...o,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}var QF=Ad("Slot");function Wee(e){const t=b.forwardRef((n,s)=>{const{children:i,...a}=n;if(b.isValidElement(i)){const o=Kee(i),l=qee(a,i.props);return i.type!==b.Fragment&&(l.ref=s?db(s,o):o),b.cloneElement(i,l)}return b.Children.count(i)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var JF=Symbol("radix.slottable");function ez(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=JF,t}function Hee(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===JF}function qee(e,t){const n={...t};for(const s in t){const i=e[s],a=t[s];/^on[A-Z]/.test(s)?i&&a?n[s]=(...l)=>{a(...l),i(...l)}:i&&(n[s]=i):s==="style"?n[s]={...i,...a}:s==="className"&&(n[s]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function Kee(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function cg(e){const t=e+"CollectionProvider",[n,s]=xn(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:y,children:w}=x,j=te.useRef(null),N=te.useRef(new Map).current;return r.jsx(i,{scope:y,itemMap:N,collectionRef:j,children:w})};o.displayName=t;const l=e+"CollectionSlot",c=Ad(l),d=te.forwardRef((x,y)=>{const{scope:w,children:j}=x,N=a(l,w),C=Nt(y,N.collectionRef);return r.jsx(c,{ref:C,children:j})});d.displayName=l;const h=e+"CollectionItemSlot",m="data-radix-collection-item",f=Ad(h),v=te.forwardRef((x,y)=>{const{scope:w,children:j,...N}=x,C=te.useRef(null),P=Nt(y,C),k=a(h,w);return te.useEffect(()=>(k.itemMap.set(C,{ref:C,...N}),()=>void k.itemMap.delete(C))),r.jsx(f,{[m]:"",ref:P,children:j})});v.displayName=h;function p(x){const y=a(e+"CollectionConsumer",x);return te.useCallback(()=>{const j=y.collectionRef.current;if(!j)return[];const N=Array.from(j.querySelectorAll(`[${m}]`));return Array.from(y.itemMap.values()).sort((k,_)=>N.indexOf(k.ref.current)-N.indexOf(_.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:d,ItemSlot:v},p,s]}var Gee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=Gee.reduce((e,t)=>{const n=Ad(`Primitive.${t}`),s=b.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:a})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function uk(e,t){e&&jc.flushSync(()=>e.dispatchEvent(t))}function Lr(e){const t=b.useRef(e);return b.useEffect(()=>{t.current=e}),b.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function Zee(e,t=globalThis==null?void 0:globalThis.document){const n=Lr(e);b.useEffect(()=>{const s=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var Yee="DismissableLayer",N_="dismissableLayer.update",Xee="dismissableLayer.pointerDownOutside",Qee="dismissableLayer.focusOutside",oM,tz=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),km=b.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,d=b.useContext(tz),[h,m]=b.useState(null),f=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=b.useState({}),p=Nt(t,_=>m(_)),x=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(y),j=h?x.indexOf(h):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,C=j>=w,P=ete(_=>{const O=_.target,M=[...d.branches].some(T=>T.contains(O));!C||M||(i==null||i(_),o==null||o(_),_.defaultPrevented||l==null||l())},f),k=tte(_=>{const O=_.target;[...d.branches].some(T=>T.contains(O))||(a==null||a(_),o==null||o(_),_.defaultPrevented||l==null||l())},f);return Zee(_=>{j===d.layers.size-1&&(s==null||s(_),!_.defaultPrevented&&l&&(_.preventDefault(),l()))},f),b.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(oM=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),lM(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=oM)}},[h,f,n,d]),b.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),lM())},[h,d]),b.useEffect(()=>{const _=()=>v({});return document.addEventListener(N_,_),()=>document.removeEventListener(N_,_)},[]),r.jsx(Je.div,{...c,ref:p,style:{pointerEvents:N?C?"auto":"none":void 0,...e.style},onFocusCapture:$e(e.onFocusCapture,k.onFocusCapture),onBlurCapture:$e(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:$e(e.onPointerDownCapture,P.onPointerDownCapture)})});km.displayName=Yee;var Jee="DismissableLayerBranch",rz=b.forwardRef((e,t)=>{const n=b.useContext(tz),s=b.useRef(null),i=Nt(t,s);return b.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),r.jsx(Je.div,{...e,ref:i})});rz.displayName=Jee;function ete(e,t=globalThis==null?void 0:globalThis.document){const n=Lr(e),s=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){nz(Xee,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function tte(e,t=globalThis==null?void 0:globalThis.document){const n=Lr(e),s=b.useRef(!1);return b.useEffect(()=>{const i=a=>{a.target&&!s.current&&nz(Qee,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function lM(){const e=new CustomEvent(N_);document.dispatchEvent(e)}function nz(e,t,n,{discrete:s}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),s?uk(i,a):i.dispatchEvent(a)}var rte=km,nte=rz,an=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},ste="Portal",dg=b.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[i,a]=b.useState(!1);an(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?CJ.createPortal(r.jsx(Je.div,{...s,ref:t}),o):null});dg.displayName=ste;function ite(e,t){return b.useReducer((n,s)=>t[n][s]??n,e)}var Mn=e=>{const{present:t,children:n}=e,s=ate(t),i=typeof n=="function"?n({present:s.isPresent}):b.Children.only(n),a=Nt(s.ref,ote(i));return typeof n=="function"||s.isPresent?b.cloneElement(i,{ref:a}):null};Mn.displayName="Presence";function ate(e){const[t,n]=b.useState(),s=b.useRef({}),i=b.useRef(e),a=b.useRef("none"),o=e?"mounted":"unmounted",[l,c]=ite(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const d=Pv(s.current);a.current=l==="mounted"?d:"none"},[l]),an(()=>{const d=s.current,h=i.current;if(h!==e){const f=a.current,v=Pv(d);e?c("MOUNT"):v==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&f!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),an(()=>{if(t){let d;const h=t.ownerDocument.defaultView??window,m=v=>{const x=Pv(s.current).includes(v.animationName);if(v.target===t&&x&&(c("ANIMATION_END"),!i.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",d=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=v=>{v.target===t&&(a.current=Pv(s.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{h.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(d=>{d&&(s.current=getComputedStyle(d)),n(d)},[])}}function Pv(e){return(e==null?void 0:e.animationName)||"none"}function ote(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Oi({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,i]=lte({defaultProp:t,onChange:n}),a=e!==void 0,o=a?e:s,l=Lr(n),c=b.useCallback(d=>{if(a){const m=typeof d=="function"?d(e):d;m!==e&&l(m)}else i(d)},[a,e,i,l]);return[o,c]}function lte({defaultProp:e,onChange:t}){const n=b.useState(e),[s]=n,i=b.useRef(s),a=Lr(t);return b.useEffect(()=>{i.current!==s&&(a(s),i.current=s)},[s,i,a]),n}var cte="VisuallyHidden",ug=b.forwardRef((e,t)=>r.jsx(Je.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));ug.displayName=cte;var dte=ug,hk="ToastProvider",[mk,ute,hte]=cg("Toast"),[sz,pUe]=xn("Toast",[hte]),[mte,ub]=sz(hk),iz=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,c]=b.useState(null),[d,h]=b.useState(0),m=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${hk}\`. Expected non-empty \`string\`.`),r.jsx(mk.Provider,{scope:t,children:r.jsx(mte,{scope:t,label:n,duration:s,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:b.useCallback(()=>h(v=>v+1),[]),onToastRemove:b.useCallback(()=>h(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:f,children:o})})};iz.displayName=hk;var az="ToastViewport",fte=["F8"],S_="toast.viewportPause",__="toast.viewportResume",oz=b.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=fte,label:i="Notifications ({hotkey})",...a}=e,o=ub(az,n),l=ute(n),c=b.useRef(null),d=b.useRef(null),h=b.useRef(null),m=b.useRef(null),f=Nt(t,m,o.onViewportChange),v=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;b.useEffect(()=>{const y=w=>{var N;s.length!==0&&s.every(C=>w[C]||w.code===C)&&((N=m.current)==null||N.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[s]),b.useEffect(()=>{const y=c.current,w=m.current;if(p&&y&&w){const j=()=>{if(!o.isClosePausedRef.current){const k=new CustomEvent(S_);w.dispatchEvent(k),o.isClosePausedRef.current=!0}},N=()=>{if(o.isClosePausedRef.current){const k=new CustomEvent(__);w.dispatchEvent(k),o.isClosePausedRef.current=!1}},C=k=>{!y.contains(k.relatedTarget)&&N()},P=()=>{y.contains(document.activeElement)||N()};return y.addEventListener("focusin",j),y.addEventListener("focusout",C),y.addEventListener("pointermove",j),y.addEventListener("pointerleave",P),window.addEventListener("blur",j),window.addEventListener("focus",N),()=>{y.removeEventListener("focusin",j),y.removeEventListener("focusout",C),y.removeEventListener("pointermove",j),y.removeEventListener("pointerleave",P),window.removeEventListener("blur",j),window.removeEventListener("focus",N)}}},[p,o.isClosePausedRef]);const x=b.useCallback(({tabbingDirection:y})=>{const j=l().map(N=>{const C=N.ref.current,P=[C,...Cte(C)];return y==="forwards"?P:P.reverse()});return(y==="forwards"?j.reverse():j).flat()},[l]);return b.useEffect(()=>{const y=m.current;if(y){const w=j=>{var P,k,_;const N=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!N){const O=document.activeElement,M=j.shiftKey;if(j.target===y&&M){(P=d.current)==null||P.focus();return}const A=x({tabbingDirection:M?"backwards":"forwards"}),V=A.findIndex(D=>D===O);GN(A.slice(V+1))?j.preventDefault():M?(k=d.current)==null||k.focus():(_=h.current)==null||_.focus()}};return y.addEventListener("keydown",w),()=>y.removeEventListener("keydown",w)}},[l,x]),r.jsxs(nte,{ref:c,role:"region","aria-label":i.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&r.jsx(P_,{ref:d,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"forwards"});GN(y)}}),r.jsx(mk.Slot,{scope:n,children:r.jsx(Je.ol,{tabIndex:-1,...a,ref:f})}),p&&r.jsx(P_,{ref:h,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"backwards"});GN(y)}})]})});oz.displayName=az;var lz="ToastFocusProxy",P_=b.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...i}=e,a=ub(lz,n);return r.jsx(ug,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&s()}})});P_.displayName=lz;var hb="Toast",pte="toast.swipeStart",xte="toast.swipeMove",gte="toast.swipeCancel",vte="toast.swipeEnd",cz=b.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:i,onOpenChange:a,...o}=e,[l=!0,c]=Oi({prop:s,defaultProp:i,onChange:a});return r.jsx(Mn,{present:n||l,children:r.jsx(bte,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Lr(e.onPause),onResume:Lr(e.onResume),onSwipeStart:$e(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$e(e.onSwipeMove,d=>{const{x:h,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:$e(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$e(e.onSwipeEnd,d=>{const{x:h,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});cz.displayName=hb;var[yte,jte]=sz(hb,{onClose(){}}),bte=b.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:m,onSwipeCancel:f,onSwipeEnd:v,...p}=e,x=ub(hb,n),[y,w]=b.useState(null),j=Nt(t,D=>w(D)),N=b.useRef(null),C=b.useRef(null),P=i||x.duration,k=b.useRef(0),_=b.useRef(P),O=b.useRef(0),{onToastAdd:M,onToastRemove:T}=x,I=Lr(()=>{var W;(y==null?void 0:y.contains(document.activeElement))&&((W=x.viewport)==null||W.focus()),o()}),A=b.useCallback(D=>{!D||D===1/0||(window.clearTimeout(O.current),k.current=new Date().getTime(),O.current=window.setTimeout(I,D))},[I]);b.useEffect(()=>{const D=x.viewport;if(D){const W=()=>{A(_.current),d==null||d()},U=()=>{const Q=new Date().getTime()-k.current;_.current=_.current-Q,window.clearTimeout(O.current),c==null||c()};return D.addEventListener(S_,U),D.addEventListener(__,W),()=>{D.removeEventListener(S_,U),D.removeEventListener(__,W)}}},[x.viewport,P,c,d,A]),b.useEffect(()=>{a&&!x.isClosePausedRef.current&&A(P)},[a,P,x.isClosePausedRef,A]),b.useEffect(()=>(M(),()=>T()),[M,T]);const V=b.useMemo(()=>y?xz(y):null,[y]);return x.viewport?r.jsxs(r.Fragment,{children:[V&&r.jsx(wte,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),r.jsx(yte,{scope:n,onClose:I,children:jc.createPortal(r.jsx(mk.ItemSlot,{scope:n,children:r.jsx(rte,{asChild:!0,onEscapeKeyDown:$e(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||I(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":x.swipeDirection,...p,ref:j,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:$e(e.onKeyDown,D=>{D.key==="Escape"&&(l==null||l(D.nativeEvent),D.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:$e(e.onPointerDown,D=>{D.button===0&&(N.current={x:D.clientX,y:D.clientY})}),onPointerMove:$e(e.onPointerMove,D=>{if(!N.current)return;const W=D.clientX-N.current.x,U=D.clientY-N.current.y,Q=!!C.current,q=["left","right"].includes(x.swipeDirection),B=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,z=q?B(0,W):0,H=q?0:B(0,U),X=D.pointerType==="touch"?10:2,ge={x:z,y:H},Se={originalEvent:D,delta:ge};Q?(C.current=ge,Cv(xte,m,Se,{discrete:!1})):cM(ge,x.swipeDirection,X)?(C.current=ge,Cv(pte,h,Se,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(W)>X||Math.abs(U)>X)&&(N.current=null)}),onPointerUp:$e(e.onPointerUp,D=>{const W=C.current,U=D.target;if(U.hasPointerCapture(D.pointerId)&&U.releasePointerCapture(D.pointerId),C.current=null,N.current=null,W){const Q=D.currentTarget,q={originalEvent:D,delta:W};cM(W,x.swipeDirection,x.swipeThreshold)?Cv(vte,v,q,{discrete:!0}):Cv(gte,f,q,{discrete:!0}),Q.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),wte=e=>{const{__scopeToast:t,children:n,...s}=e,i=ub(hb,t),[a,o]=b.useState(!1),[l,c]=b.useState(!1);return _te(()=>o(!0)),b.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(dg,{asChild:!0,children:r.jsx(ug,{...s,children:a&&r.jsxs(r.Fragment,{children:[i.label," ",n]})})})},Nte="ToastTitle",dz=b.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Je.div,{...s,ref:t})});dz.displayName=Nte;var Ste="ToastDescription",uz=b.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Je.div,{...s,ref:t})});uz.displayName=Ste;var hz="ToastAction",mz=b.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?r.jsx(pz,{altText:n,asChild:!0,children:r.jsx(fk,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${hz}\`. Expected non-empty \`string\`.`),null)});mz.displayName=hz;var fz="ToastClose",fk=b.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,i=jte(fz,n);return r.jsx(pz,{asChild:!0,children:r.jsx(Je.button,{type:"button",...s,ref:t,onClick:$e(e.onClick,i.onClose)})})});fk.displayName=fz;var pz=b.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...i}=e;return r.jsx(Je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:t})});function xz(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),Pte(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...xz(s))}}),t}function Cv(e,t,n,{discrete:s}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),s?uk(i,a):i.dispatchEvent(a)}var cM=(e,t,n=0)=>{const s=Math.abs(e.x),i=Math.abs(e.y),a=s>i;return t==="left"||t==="right"?a&&s>n:!a&&i>n};function _te(e=()=>{}){const t=Lr(e);an(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[t])}function Pte(e){return e.nodeType===e.ELEMENT_NODE}function Cte(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function GN(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var kte=iz,gz=oz,vz=cz,yz=dz,jz=uz,bz=mz,wz=fk;function Nz(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Nz(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Ht(){for(var e,t,n=0,s="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Nz(e))&&(s&&(s+=" "),s+=t);return s}const dM=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,uM=Ht,Tm=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return uM(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(d=>{const h=n==null?void 0:n[d],m=a==null?void 0:a[d];if(h===null)return null;const f=dM(h)||dM(m);return i[d][f]}),l=n&&Object.entries(n).reduce((d,h)=>{let[m,f]=h;return f===void 0||(d[m]=f),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,h)=>{let{class:m,className:f,...v}=h;return Object.entries(v).every(p=>{let[x,y]=p;return Array.isArray(y)?y.includes({...a,...l}[x]):{...a,...l}[x]===y})?[...d,m,f]:d},[]);return uM(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sz=(...e)=>e.filter((t,n,s)=>!!t&&s.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ate={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...l},c)=>b.createElement("svg",{ref:c,...Ate,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:Sz("lucide",i),...l},[...o.map(([d,h])=>b.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(e,t)=>{const n=b.forwardRef(({className:s,...i},a)=>b.createElement(Ete,{ref:a,iconNode:t,className:Sz(`lucide-${Tte(e)}`,s),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=Oe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=Oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ote=Oe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=Oe("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=Oe("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mte=Oe("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=Oe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=Oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Oe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=Oe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=Oe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dte=Oe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=Oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Oe("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=Oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ite=Oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=Oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Oe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=Oe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=Oe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Oe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=Oe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lte=Oe("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=Oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rte=Oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=Oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=Oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=Oe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=Oe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Oe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=Oe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=Oe("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=Oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=Oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=Oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=Oe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=Oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=Oe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=Oe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=Oe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $te=Oe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=Oe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Oe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fte=Oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=Oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=Oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=Oe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=Oe("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zte=Oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=Oe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=Oe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bte=Oe("MonitorSpeaker",[["path",{d:"M5.5 20H8",key:"1k40s5"}],["path",{d:"M17 9h.01",key:"1j24nn"}],["rect",{width:"10",height:"16",x:"12",y:"4",rx:"2",key:"ixliua"}],["path",{d:"M8 6H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h4",key:"1mp6e1"}],["circle",{cx:"17",cy:"15",r:"1",key:"tqvash"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vte=Oe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=Oe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=Oe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ute=Oe("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wte=Oe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=Oe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=Oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=Oe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=Oe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=Oe("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=Oe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=Oe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=Oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=Oe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=Oe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=Oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Oe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=Oe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kte=Oe("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=Oe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=Oe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=Oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=Oe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=Oe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=Oe("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=Oe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=Oe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zte=Oe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=Oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=Oe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=Oe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=Oe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=Oe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=Oe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=Oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=Oe("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Oe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qte=Oe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=Oe("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=Oe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jte=Oe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ere=Oe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tre=Oe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=Oe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),yk="-",rre=e=>{const t=sre(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(yk);return l[0]===""&&l.length!==1&&l.shift(),Ez(l,t)||nre(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},Ez=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),i=s?Ez(e.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(yk);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},gM=/^\[(.+)\]$/,nre=e=>{if(gM.test(e)){const t=gM.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},sre=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return are(Object.entries(e.classGroups),n).forEach(([a,o])=>{D_(o,s,a,t)}),s},D_=(e,t,n,s)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:vM(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(ire(i)){D_(i(s),t,n,s);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{D_(o,vM(t,a),n,s)})})},vM=(e,t)=>{let n=e;return t.split(yk).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},ire=e=>e.isThemeGetter,are=(e,t)=>t?e.map(([n,s])=>{const i=s.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,i]}):e,ore=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const i=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,s=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=s.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},Oz="!",lre=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,i=t[0],a=t.length,o=l=>{const c=[];let d=0,h=0,m;for(let y=0;y<l.length;y++){let w=l[y];if(d===0){if(w===i&&(s||l.slice(y,y+a)===t)){c.push(l.slice(h,y)),h=y+a;continue}if(w==="/"){m=y;continue}}w==="["?d++:w==="]"&&d--}const f=c.length===0?l:l.substring(h),v=f.startsWith(Oz),p=v?f.substring(1):f,x=m&&m>h?m-h:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:p,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:o}):o},cre=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},dre=e=>({cache:ore(e.cacheSize),parseClassName:lre(e),...rre(e)}),ure=/\s+/,hre=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(ure);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:v}=n(d);let p=!!v,x=s(p?f.substring(0,v):f);if(!x){if(!p){l=d+(l.length>0?" "+l:l);continue}if(x=s(f),!x){l=d+(l.length>0?" "+l:l);continue}p=!1}const y=cre(h).join(":"),w=m?y+Oz:y,j=w+x;if(a.includes(j))continue;a.push(j);const N=i(x,p);for(let C=0;C<N.length;++C){const P=N[C];a.push(w+P)}l=d+(l.length>0?" "+l:l)}return l};function mre(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Mz(t))&&(s&&(s+=" "),s+=n);return s}const Mz=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=Mz(e[s]))&&(n&&(n+=" "),n+=t);return n};function fre(e,...t){let n,s,i,a=o;function o(c){const d=t.reduce((h,m)=>m(h),e());return n=dre(d),s=n.cache.get,i=n.cache.set,a=l,l(c)}function l(c){const d=s(c);if(d)return d;const h=hre(c,n);return i(c,h),h}return function(){return a(mre.apply(null,arguments))}}const _r=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Dz=/^\[(?:([a-z-]+):)?(.+)\]$/i,pre=/^\d+\/\d+$/,xre=new Set(["px","full","screen"]),gre=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vre=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yre=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jre=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bre=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ro=e=>ah(e)||xre.has(e)||pre.test(e),ll=e=>Am(e,"length",Tre),ah=e=>!!e&&!Number.isNaN(Number(e)),XN=e=>Am(e,"number",ah),bf=e=>!!e&&Number.isInteger(Number(e)),wre=e=>e.endsWith("%")&&ah(e.slice(0,-1)),Ot=e=>Dz.test(e),cl=e=>gre.test(e),Nre=new Set(["length","size","percentage"]),Sre=e=>Am(e,Nre,Iz),_re=e=>Am(e,"position",Iz),Pre=new Set(["image","url"]),Cre=e=>Am(e,Pre,Ere),kre=e=>Am(e,"",Are),wf=()=>!0,Am=(e,t,n)=>{const s=Dz.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},Tre=e=>vre.test(e)&&!yre.test(e),Iz=()=>!1,Are=e=>jre.test(e),Ere=e=>bre.test(e),Ore=()=>{const e=_r("colors"),t=_r("spacing"),n=_r("blur"),s=_r("brightness"),i=_r("borderColor"),a=_r("borderRadius"),o=_r("borderSpacing"),l=_r("borderWidth"),c=_r("contrast"),d=_r("grayscale"),h=_r("hueRotate"),m=_r("invert"),f=_r("gap"),v=_r("gradientColorStops"),p=_r("gradientColorStopPositions"),x=_r("inset"),y=_r("margin"),w=_r("opacity"),j=_r("padding"),N=_r("saturate"),C=_r("scale"),P=_r("sepia"),k=_r("skew"),_=_r("space"),O=_r("translate"),M=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Ot,t],A=()=>[Ot,t],V=()=>["",ro,ll],D=()=>["auto",ah,Ot],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",Ot],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>[ah,Ot];return{cacheSize:500,separator:":",theme:{colors:[wf],spacing:[ro,ll],blur:["none","",cl,Ot],brightness:H(),borderColor:[e],borderRadius:["none","","full",cl,Ot],borderSpacing:A(),borderWidth:V(),contrast:H(),grayscale:B(),hueRotate:H(),invert:B(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[wre,ll],inset:I(),margin:I(),opacity:H(),padding:A(),saturate:H(),scale:H(),sepia:B(),skew:H(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",Ot]}],container:["container"],columns:[{columns:[cl]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),Ot]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bf,Ot]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ot]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",bf,Ot]}],"grid-cols":[{"grid-cols":[wf]}],"col-start-end":[{col:["auto",{span:["full",bf,Ot]},Ot]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[wf]}],"row-start-end":[{row:["auto",{span:[bf,Ot]},Ot]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ot]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ot]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ot,t]}],"min-w":[{"min-w":[Ot,t,"min","max","fit"]}],"max-w":[{"max-w":[Ot,t,"none","full","min","max","fit","prose",{screen:[cl]},cl]}],h:[{h:[Ot,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ot,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ot,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ot,t,"auto","min","max","fit"]}],"font-size":[{text:["base",cl,ll]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",XN]}],"font-family":[{font:[wf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ot]}],"line-clamp":[{"line-clamp":["none",ah,XN]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ro,Ot]}],"list-image":[{"list-image":["none",Ot]}],"list-style-type":[{list:["none","disc","decimal",Ot]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ro,ll]}],"underline-offset":[{"underline-offset":["auto",ro,Ot]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),_re]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Sre]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Cre]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:U()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[ro,Ot]}],"outline-w":[{outline:[ro,ll]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ro,ll]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",cl,kre]}],"shadow-color":[{shadow:[wf]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",cl,Ot]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[N]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ot]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",Ot]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ot]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[bf,Ot]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ot]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ot]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ot]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ro,ll,XN]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Mre=fre(Ore);function Ve(...e){return Mre(Ht(e))}const Dre=kte,Lz=b.forwardRef(({className:e,...t},n)=>r.jsx(gz,{ref:n,className:Ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Lz.displayName=gz.displayName;const Ire=Tm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Rz=b.forwardRef(({className:e,variant:t,...n},s)=>r.jsx(vz,{ref:s,className:Ve(Ire({variant:t}),e),...n}));Rz.displayName=vz.displayName;const Lre=b.forwardRef(({className:e,...t},n)=>r.jsx(bz,{ref:n,className:Ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Lre.displayName=bz.displayName;const $z=b.forwardRef(({className:e,...t},n)=>r.jsx(wz,{ref:n,className:Ve("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(Fr,{className:"h-4 w-4"})}));$z.displayName=wz.displayName;const Fz=b.forwardRef(({className:e,...t},n)=>r.jsx(yz,{ref:n,className:Ve("text-sm font-semibold",e),...t}));Fz.displayName=yz.displayName;const zz=b.forwardRef(({className:e,...t},n)=>r.jsx(jz,{ref:n,className:Ve("text-sm opacity-90",e),...t}));zz.displayName=jz.displayName;function Rre(){const{toasts:e}=ft();return r.jsxs(Dre,{children:[e.map(function({id:t,title:n,description:s,action:i,...a}){return r.jsxs(Rz,{...a,children:[r.jsxs("div",{className:"grid gap-1",children:[n&&r.jsx(Fz,{children:n}),s&&r.jsx(zz,{children:s})]}),i,r.jsx($z,{})]},t)}),r.jsx(Lz,{})]})}var $re=N$[" useId ".trim().toString()]||(()=>{}),Fre=0;function ia(e){const[t,n]=b.useState($re());return an(()=>{n(s=>s??String(Fre++))},[e]),t?`radix-${t}`:""}const zre=["top","right","bottom","left"],ic=Math.min,qs=Math.max,i0=Math.round,kv=Math.floor,Ia=e=>({x:e,y:e}),Bre={left:"right",right:"left",bottom:"top",top:"bottom"},Vre={start:"end",end:"start"};function I_(e,t,n){return qs(e,ic(t,n))}function Uo(e,t){return typeof e=="function"?e(t):e}function Wo(e){return e.split("-")[0]}function Em(e){return e.split("-")[1]}function jk(e){return e==="x"?"y":"x"}function bk(e){return e==="y"?"height":"width"}function ac(e){return["top","bottom"].includes(Wo(e))?"y":"x"}function wk(e){return jk(ac(e))}function Ure(e,t,n){n===void 0&&(n=!1);const s=Em(e),i=wk(e),a=bk(i);let o=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=a0(o)),[o,a0(o)]}function Wre(e){const t=a0(e);return[L_(e),t,L_(t)]}function L_(e){return e.replace(/start|end/g,t=>Vre[t])}function Hre(e,t,n){const s=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:s:t?s:i;case"left":case"right":return t?a:o;default:return[]}}function qre(e,t,n,s){const i=Em(e);let a=Hre(Wo(e),n==="start",s);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(L_)))),a}function a0(e){return e.replace(/left|right|bottom|top/g,t=>Bre[t])}function Kre(e){return{top:0,right:0,bottom:0,left:0,...e}}function Bz(e){return typeof e!="number"?Kre(e):{top:e,right:e,bottom:e,left:e}}function o0(e){const{x:t,y:n,width:s,height:i}=e;return{width:s,height:i,top:n,left:t,right:t+s,bottom:n+i,x:t,y:n}}function yM(e,t,n){let{reference:s,floating:i}=e;const a=ac(t),o=wk(t),l=bk(o),c=Wo(t),d=a==="y",h=s.x+s.width/2-i.width/2,m=s.y+s.height/2-i.height/2,f=s[l]/2-i[l]/2;let v;switch(c){case"top":v={x:h,y:s.y-i.height};break;case"bottom":v={x:h,y:s.y+s.height};break;case"right":v={x:s.x+s.width,y:m};break;case"left":v={x:s.x-i.width,y:m};break;default:v={x:s.x,y:s.y}}switch(Em(t)){case"start":v[o]-=f*(n&&d?-1:1);break;case"end":v[o]+=f*(n&&d?-1:1);break}return v}const Gre=async(e,t,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:m}=yM(d,s,c),f=s,v={},p=0;for(let x=0;x<l.length;x++){const{name:y,fn:w}=l[x],{x:j,y:N,data:C,reset:P}=await w({x:h,y:m,initialPlacement:s,placement:f,strategy:i,middlewareData:v,rects:d,platform:o,elements:{reference:e,floating:t}});h=j??h,m=N??m,v={...v,[y]:{...v[y],...C}},P&&p<=50&&(p++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(d=P.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):P.rects),{x:h,y:m}=yM(d,f,c)),x=-1)}return{x:h,y:m,placement:f,strategy:i,middlewareData:v}};async function Hp(e,t){var n;t===void 0&&(t={});const{x:s,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:f=!1,padding:v=0}=Uo(t,e),p=Bz(v),y=l[f?m==="floating"?"reference":"floating":m],w=o0(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),j=m==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(N))?await(a.getScale==null?void 0:a.getScale(N))||{x:1,y:1}:{x:1,y:1},P=o0(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:N,strategy:c}):j);return{top:(w.top-P.top+p.top)/C.y,bottom:(P.bottom-w.bottom+p.bottom)/C.y,left:(w.left-P.left+p.left)/C.x,right:(P.right-w.right+p.right)/C.x}}const Zre=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:h=0}=Uo(e,t)||{};if(d==null)return{};const m=Bz(h),f={x:n,y:s},v=wk(i),p=bk(v),x=await o.getDimensions(d),y=v==="y",w=y?"top":"left",j=y?"bottom":"right",N=y?"clientHeight":"clientWidth",C=a.reference[p]+a.reference[v]-f[v]-a.floating[p],P=f[v]-a.reference[v],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let _=k?k[N]:0;(!_||!await(o.isElement==null?void 0:o.isElement(k)))&&(_=l.floating[N]||a.floating[p]);const O=C/2-P/2,M=_/2-x[p]/2-1,T=ic(m[w],M),I=ic(m[j],M),A=T,V=_-x[p]-I,D=_/2-x[p]/2+O,W=I_(A,D,V),U=!c.arrow&&Em(i)!=null&&D!==W&&a.reference[p]/2-(D<A?T:I)-x[p]/2<0,Q=U?D<A?D-A:D-V:0;return{[v]:f[v]+Q,data:{[v]:W,centerOffset:D-W-Q,...U&&{alignmentOffset:Q}},reset:U}}}),Yre=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:f,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:x=!0,...y}=Uo(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const w=Wo(i),j=ac(l),N=Wo(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(d.floating)),P=f||(N||!x?[a0(l)]:Wre(l)),k=p!=="none";!f&&k&&P.push(...qre(l,x,p,C));const _=[l,...P],O=await Hp(t,y),M=[];let T=((s=a.flip)==null?void 0:s.overflows)||[];if(h&&M.push(O[w]),m){const D=Ure(i,o,C);M.push(O[D[0]],O[D[1]])}if(T=[...T,{placement:i,overflows:M}],!M.every(D=>D<=0)){var I,A;const D=(((I=a.flip)==null?void 0:I.index)||0)+1,W=_[D];if(W)return{data:{index:D,overflows:T},reset:{placement:W}};let U=(A=T.filter(Q=>Q.overflows[0]<=0).sort((Q,q)=>Q.overflows[1]-q.overflows[1])[0])==null?void 0:A.placement;if(!U)switch(v){case"bestFit":{var V;const Q=(V=T.filter(q=>{if(k){const B=ac(q.placement);return B===j||B==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(B=>B>0).reduce((B,z)=>B+z,0)]).sort((q,B)=>q[1]-B[1])[0])==null?void 0:V[0];Q&&(U=Q);break}case"initialPlacement":U=l;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function jM(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function bM(e){return zre.some(t=>e[t]>=0)}const Xre=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...i}=Uo(e,t);switch(s){case"referenceHidden":{const a=await Hp(t,{...i,elementContext:"reference"}),o=jM(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:bM(o)}}}case"escaped":{const a=await Hp(t,{...i,altBoundary:!0}),o=jM(a,n.floating);return{data:{escapedOffsets:o,escaped:bM(o)}}}default:return{}}}}};async function Qre(e,t){const{placement:n,platform:s,elements:i}=e,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=Wo(n),l=Em(n),c=ac(n)==="y",d=["left","top"].includes(o)?-1:1,h=a&&c?-1:1,m=Uo(t,e);let{mainAxis:f,crossAxis:v,alignmentAxis:p}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof p=="number"&&(v=l==="end"?p*-1:p),c?{x:v*h,y:f*d}:{x:f*d,y:v*h}}const Jre=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await Qre(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},ene=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:w,y:j}=y;return{x:w,y:j}}},...c}=Uo(e,t),d={x:n,y:s},h=await Hp(t,c),m=ac(Wo(i)),f=jk(m);let v=d[f],p=d[m];if(a){const y=f==="y"?"top":"left",w=f==="y"?"bottom":"right",j=v+h[y],N=v-h[w];v=I_(j,v,N)}if(o){const y=m==="y"?"top":"left",w=m==="y"?"bottom":"right",j=p+h[y],N=p-h[w];p=I_(j,p,N)}const x=l.fn({...t,[f]:v,[m]:p});return{...x,data:{x:x.x-n,y:x.y-s,enabled:{[f]:a,[m]:o}}}}}},tne=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Uo(e,t),h={x:n,y:s},m=ac(i),f=jk(m);let v=h[f],p=h[m];const x=Uo(l,t),y=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const N=f==="y"?"height":"width",C=a.reference[f]-a.floating[N]+y.mainAxis,P=a.reference[f]+a.reference[N]-y.mainAxis;v<C?v=C:v>P&&(v=P)}if(d){var w,j;const N=f==="y"?"width":"height",C=["top","left"].includes(Wo(i)),P=a.reference[m]-a.floating[N]+(C&&((w=o.offset)==null?void 0:w[m])||0)+(C?0:y.crossAxis),k=a.reference[m]+a.reference[N]+(C?0:((j=o.offset)==null?void 0:j[m])||0)-(C?y.crossAxis:0);p<P?p=P:p>k&&(p=k)}return{[f]:v,[m]:p}}}},rne=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Uo(e,t),h=await Hp(t,d),m=Wo(i),f=Em(i),v=ac(i)==="y",{width:p,height:x}=a.floating;let y,w;m==="top"||m==="bottom"?(y=m,w=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=m,y=f==="end"?"top":"bottom");const j=x-h.top-h.bottom,N=p-h.left-h.right,C=ic(x-h[y],j),P=ic(p-h[w],N),k=!t.middlewareData.shift;let _=C,O=P;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(O=N),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(_=j),k&&!f){const T=qs(h.left,0),I=qs(h.right,0),A=qs(h.top,0),V=qs(h.bottom,0);v?O=p-2*(T!==0||I!==0?T+I:qs(h.left,h.right)):_=x-2*(A!==0||V!==0?A+V:qs(h.top,h.bottom))}await c({...t,availableWidth:O,availableHeight:_});const M=await o.getDimensions(l.floating);return p!==M.width||x!==M.height?{reset:{rects:!0}}:{}}}};function fb(){return typeof window<"u"}function Om(e){return Vz(e)?(e.nodeName||"").toLowerCase():"#document"}function ti(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Za(e){var t;return(t=(Vz(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Vz(e){return fb()?e instanceof Node||e instanceof ti(e).Node:!1}function la(e){return fb()?e instanceof Element||e instanceof ti(e).Element:!1}function Wa(e){return fb()?e instanceof HTMLElement||e instanceof ti(e).HTMLElement:!1}function wM(e){return!fb()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ti(e).ShadowRoot}function hg(e){const{overflow:t,overflowX:n,overflowY:s,display:i}=ca(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(i)}function nne(e){return["table","td","th"].includes(Om(e))}function pb(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Nk(e){const t=Sk(),n=la(e)?ca(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function sne(e){let t=oc(e);for(;Wa(t)&&!$h(t);){if(Nk(t))return t;if(pb(t))return null;t=oc(t)}return null}function Sk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $h(e){return["html","body","#document"].includes(Om(e))}function ca(e){return ti(e).getComputedStyle(e)}function xb(e){return la(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function oc(e){if(Om(e)==="html")return e;const t=e.assignedSlot||e.parentNode||wM(e)&&e.host||Za(e);return wM(t)?t.host:t}function Uz(e){const t=oc(e);return $h(t)?e.ownerDocument?e.ownerDocument.body:e.body:Wa(t)&&hg(t)?t:Uz(t)}function qp(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Uz(e),a=i===((s=e.ownerDocument)==null?void 0:s.body),o=ti(i);if(a){const l=R_(o);return t.concat(o,o.visualViewport||[],hg(i)?i:[],l&&n?qp(l):[])}return t.concat(i,qp(i,[],n))}function R_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Wz(e){const t=ca(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const i=Wa(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:s,l=i0(n)!==a||i0(s)!==o;return l&&(n=a,s=o),{width:n,height:s,$:l}}function _k(e){return la(e)?e:e.contextElement}function oh(e){const t=_k(e);if(!Wa(t))return Ia(1);const n=t.getBoundingClientRect(),{width:s,height:i,$:a}=Wz(t);let o=(a?i0(n.width):n.width)/s,l=(a?i0(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const ine=Ia(0);function Hz(e){const t=ti(e);return!Sk()||!t.visualViewport?ine:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ane(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ti(e)?!1:t}function Ld(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=_k(e);let o=Ia(1);t&&(s?la(s)&&(o=oh(s)):o=oh(e));const l=ane(a,n,s)?Hz(a):Ia(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,h=i.width/o.x,m=i.height/o.y;if(a){const f=ti(a),v=s&&la(s)?ti(s):s;let p=f,x=R_(p);for(;x&&s&&v!==p;){const y=oh(x),w=x.getBoundingClientRect(),j=ca(x),N=w.left+(x.clientLeft+parseFloat(j.paddingLeft))*y.x,C=w.top+(x.clientTop+parseFloat(j.paddingTop))*y.y;c*=y.x,d*=y.y,h*=y.x,m*=y.y,c+=N,d+=C,p=ti(x),x=R_(p)}}return o0({width:h,height:m,x:c,y:d})}function Pk(e,t){const n=xb(e).scrollLeft;return t?t.left+n:Ld(Za(e)).left+n}function qz(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=s.left+t.scrollLeft-(n?0:Pk(e,s)),a=s.top+t.scrollTop;return{x:i,y:a}}function one(e){let{elements:t,rect:n,offsetParent:s,strategy:i}=e;const a=i==="fixed",o=Za(s),l=t?pb(t.floating):!1;if(s===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},d=Ia(1);const h=Ia(0),m=Wa(s);if((m||!m&&!a)&&((Om(s)!=="body"||hg(o))&&(c=xb(s)),Wa(s))){const v=Ld(s);d=oh(s),h.x=v.x+s.clientLeft,h.y=v.y+s.clientTop}const f=o&&!m&&!a?qz(o,c,!0):Ia(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+f.x,y:n.y*d.y-c.scrollTop*d.y+h.y+f.y}}function lne(e){return Array.from(e.getClientRects())}function cne(e){const t=Za(e),n=xb(e),s=e.ownerDocument.body,i=qs(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=qs(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+Pk(e);const l=-n.scrollTop;return ca(s).direction==="rtl"&&(o+=qs(t.clientWidth,s.clientWidth)-i),{width:i,height:a,x:o,y:l}}function dne(e,t){const n=ti(e),s=Za(e),i=n.visualViewport;let a=s.clientWidth,o=s.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const d=Sk();(!d||d&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function une(e,t){const n=Ld(e,!0,t==="fixed"),s=n.top+e.clientTop,i=n.left+e.clientLeft,a=Wa(e)?oh(e):Ia(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,d=s*a.y;return{width:o,height:l,x:c,y:d}}function NM(e,t,n){let s;if(t==="viewport")s=dne(e,n);else if(t==="document")s=cne(Za(e));else if(la(t))s=une(t,n);else{const i=Hz(e);s={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return o0(s)}function Kz(e,t){const n=oc(e);return n===t||!la(n)||$h(n)?!1:ca(n).position==="fixed"||Kz(n,t)}function hne(e,t){const n=t.get(e);if(n)return n;let s=qp(e,[],!1).filter(l=>la(l)&&Om(l)!=="body"),i=null;const a=ca(e).position==="fixed";let o=a?oc(e):e;for(;la(o)&&!$h(o);){const l=ca(o),c=Nk(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||hg(o)&&!c&&Kz(e,o))?s=s.filter(h=>h!==o):i=l,o=oc(o)}return t.set(e,s),s}function mne(e){let{element:t,boundary:n,rootBoundary:s,strategy:i}=e;const o=[...n==="clippingAncestors"?pb(t)?[]:hne(t,this._c):[].concat(n),s],l=o[0],c=o.reduce((d,h)=>{const m=NM(t,h,i);return d.top=qs(m.top,d.top),d.right=ic(m.right,d.right),d.bottom=ic(m.bottom,d.bottom),d.left=qs(m.left,d.left),d},NM(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function fne(e){const{width:t,height:n}=Wz(e);return{width:t,height:n}}function pne(e,t,n){const s=Wa(t),i=Za(t),a=n==="fixed",o=Ld(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Ia(0);if(s||!s&&!a)if((Om(t)!=="body"||hg(i))&&(l=xb(t)),s){const f=Ld(t,!0,a,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else i&&(c.x=Pk(i));const d=i&&!s&&!a?qz(i,l):Ia(0),h=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function QN(e){return ca(e).position==="static"}function SM(e,t){if(!Wa(e)||ca(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Za(e)===n&&(n=n.ownerDocument.body),n}function Gz(e,t){const n=ti(e);if(pb(e))return n;if(!Wa(e)){let i=oc(e);for(;i&&!$h(i);){if(la(i)&&!QN(i))return i;i=oc(i)}return n}let s=SM(e,t);for(;s&&nne(s)&&QN(s);)s=SM(s,t);return s&&$h(s)&&QN(s)&&!Nk(s)?n:s||sne(e)||n}const xne=async function(e){const t=this.getOffsetParent||Gz,n=this.getDimensions,s=await n(e.floating);return{reference:pne(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function gne(e){return ca(e).direction==="rtl"}const vne={convertOffsetParentRelativeRectToViewportRelativeRect:one,getDocumentElement:Za,getClippingRect:mne,getOffsetParent:Gz,getElementRects:xne,getClientRects:lne,getDimensions:fne,getScale:oh,isElement:la,isRTL:gne};function Zz(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function yne(e,t){let n=null,s;const i=Za(e);function a(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:h,top:m,width:f,height:v}=d;if(l||t(),!f||!v)return;const p=kv(m),x=kv(i.clientWidth-(h+f)),y=kv(i.clientHeight-(m+v)),w=kv(h),N={rootMargin:-p+"px "+-x+"px "+-y+"px "+-w+"px",threshold:qs(0,ic(1,c))||1};let C=!0;function P(k){const _=k[0].intersectionRatio;if(_!==c){if(!C)return o();_?o(!1,_):s=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!Zz(d,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(P,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(P,N)}n.observe(e)}return o(!0),a}function jne(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=_k(e),h=i||a?[...d?qp(d):[],...qp(t)]:[];h.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),a&&w.addEventListener("resize",n)});const m=d&&l?yne(d,n):null;let f=-1,v=null;o&&(v=new ResizeObserver(w=>{let[j]=w;j&&j.target===d&&v&&(v.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var N;(N=v)==null||N.observe(t)})),n()}),d&&!c&&v.observe(d),v.observe(t));let p,x=c?Ld(e):null;c&&y();function y(){const w=Ld(e);x&&!Zz(x,w)&&n(),x=w,p=requestAnimationFrame(y)}return n(),()=>{var w;h.forEach(j=>{i&&j.removeEventListener("scroll",n),a&&j.removeEventListener("resize",n)}),m==null||m(),(w=v)==null||w.disconnect(),v=null,c&&cancelAnimationFrame(p)}}const bne=Jre,wne=ene,Nne=Yre,Sne=rne,_ne=Xre,_M=Zre,Pne=tne,Cne=(e,t,n)=>{const s=new Map,i={platform:vne,...n},a={...i.platform,_c:s};return Gre(e,t,{...i,platform:a})};var vy=typeof document<"u"?b.useLayoutEffect:b.useEffect;function l0(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!l0(e[s],t[s]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,i[s]))return!1;for(s=n;s--!==0;){const a=i[s];if(!(a==="_owner"&&e.$$typeof)&&!l0(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Yz(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function PM(e,t){const n=Yz(e);return Math.round(t*n)/n}function JN(e){const t=b.useRef(e);return vy(()=>{t.current=e}),t}function kne(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[h,m]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,v]=b.useState(s);l0(f,s)||v(s);const[p,x]=b.useState(null),[y,w]=b.useState(null),j=b.useCallback(q=>{q!==k.current&&(k.current=q,x(q))},[]),N=b.useCallback(q=>{q!==_.current&&(_.current=q,w(q))},[]),C=a||p,P=o||y,k=b.useRef(null),_=b.useRef(null),O=b.useRef(h),M=c!=null,T=JN(c),I=JN(i),A=JN(d),V=b.useCallback(()=>{if(!k.current||!_.current)return;const q={placement:t,strategy:n,middleware:f};I.current&&(q.platform=I.current),Cne(k.current,_.current,q).then(B=>{const z={...B,isPositioned:A.current!==!1};D.current&&!l0(O.current,z)&&(O.current=z,jc.flushSync(()=>{m(z)}))})},[f,t,n,I,A]);vy(()=>{d===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,m(q=>({...q,isPositioned:!1})))},[d]);const D=b.useRef(!1);vy(()=>(D.current=!0,()=>{D.current=!1}),[]),vy(()=>{if(C&&(k.current=C),P&&(_.current=P),C&&P){if(T.current)return T.current(C,P,V);V()}},[C,P,V,T,M]);const W=b.useMemo(()=>({reference:k,floating:_,setReference:j,setFloating:N}),[j,N]),U=b.useMemo(()=>({reference:C,floating:P}),[C,P]),Q=b.useMemo(()=>{const q={position:n,left:0,top:0};if(!U.floating)return q;const B=PM(U.floating,h.x),z=PM(U.floating,h.y);return l?{...q,transform:"translate("+B+"px, "+z+"px)",...Yz(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:z}},[n,l,U.floating,h.x,h.y]);return b.useMemo(()=>({...h,update:V,refs:W,elements:U,floatingStyles:Q}),[h,V,W,U,Q])}const Tne=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:i}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?_M({element:s.current,padding:i}).fn(n):{}:s?_M({element:s,padding:i}).fn(n):{}}}},Ane=(e,t)=>({...bne(e),options:[e,t]}),Ene=(e,t)=>({...wne(e),options:[e,t]}),One=(e,t)=>({...Pne(e),options:[e,t]}),Mne=(e,t)=>({...Nne(e),options:[e,t]}),Dne=(e,t)=>({...Sne(e),options:[e,t]}),Ine=(e,t)=>({..._ne(e),options:[e,t]}),Lne=(e,t)=>({...Tne(e),options:[e,t]});var Rne="Arrow",Xz=b.forwardRef((e,t)=>{const{children:n,width:s=10,height:i=5,...a}=e;return r.jsx(Je.svg,{...a,ref:t,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});Xz.displayName=Rne;var $ne=Xz;function mg(e){const[t,n]=b.useState(void 0);return an(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var Ck="Popper",[Qz,Mm]=xn(Ck),[Fne,Jz]=Qz(Ck),e8=e=>{const{__scopePopper:t,children:n}=e,[s,i]=b.useState(null);return r.jsx(Fne,{scope:t,anchor:s,onAnchorChange:i,children:n})};e8.displayName=Ck;var t8="PopperAnchor",r8=b.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...i}=e,a=Jz(t8,n),o=b.useRef(null),l=Nt(t,o);return b.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:r.jsx(Je.div,{...i,ref:l})});r8.displayName=t8;var kk="PopperContent",[zne,Bne]=Qz(kk),n8=b.forwardRef((e,t)=>{var we,Be,Pe,Ee,Ie,Ne;const{__scopePopper:n,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:f=!1,updatePositionStrategy:v="optimized",onPlaced:p,...x}=e,y=Jz(kk,n),[w,j]=b.useState(null),N=Nt(t,xe=>j(xe)),[C,P]=b.useState(null),k=mg(C),_=(k==null?void 0:k.width)??0,O=(k==null?void 0:k.height)??0,M=s+(a!=="center"?"-"+a:""),T=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},I=Array.isArray(d)?d:[d],A=I.length>0,V={padding:T,boundary:I.filter(Une),altBoundary:A},{refs:D,floatingStyles:W,placement:U,isPositioned:Q,middlewareData:q}=kne({strategy:"fixed",placement:M,whileElementsMounted:(...xe)=>jne(...xe,{animationFrame:v==="always"}),elements:{reference:y.anchor},middleware:[Ane({mainAxis:i+O,alignmentAxis:o}),c&&Ene({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?One():void 0,...V}),c&&Mne({...V}),Dne({...V,apply:({elements:xe,rects:J,availableWidth:De,availableHeight:Ue})=>{const{width:st,height:ht}=J.reference,Wt=xe.floating.style;Wt.setProperty("--radix-popper-available-width",`${De}px`),Wt.setProperty("--radix-popper-available-height",`${Ue}px`),Wt.setProperty("--radix-popper-anchor-width",`${st}px`),Wt.setProperty("--radix-popper-anchor-height",`${ht}px`)}}),C&&Lne({element:C,padding:l}),Wne({arrowWidth:_,arrowHeight:O}),f&&Ine({strategy:"referenceHidden",...V})]}),[B,z]=a8(U),H=Lr(p);an(()=>{Q&&(H==null||H())},[Q,H]);const X=(we=q.arrow)==null?void 0:we.x,ge=(Be=q.arrow)==null?void 0:Be.y,Se=((Pe=q.arrow)==null?void 0:Pe.centerOffset)!==0,[F,pe]=b.useState();return an(()=>{w&&pe(window.getComputedStyle(w).zIndex)},[w]),r.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:Q?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:F,"--radix-popper-transform-origin":[(Ee=q.transformOrigin)==null?void 0:Ee.x,(Ie=q.transformOrigin)==null?void 0:Ie.y].join(" "),...((Ne=q.hide)==null?void 0:Ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(zne,{scope:n,placedSide:B,onArrowChange:P,arrowX:X,arrowY:ge,shouldHideArrow:Se,children:r.jsx(Je.div,{"data-side":B,"data-align":z,...x,ref:N,style:{...x.style,animation:Q?void 0:"none"}})})})});n8.displayName=kk;var s8="PopperArrow",Vne={top:"bottom",right:"left",bottom:"top",left:"right"},i8=b.forwardRef(function(t,n){const{__scopePopper:s,...i}=t,a=Bne(s8,s),o=Vne[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx($ne,{...i,ref:n,style:{...i.style,display:"block"}})})});i8.displayName=s8;function Une(e){return e!==null}var Wne=e=>({name:"transformOrigin",options:e,fn(t){var y,w,j;const{placement:n,rects:s,middlewareData:i}=t,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,h]=a8(n),m={start:"0%",center:"50%",end:"100%"}[h],f=(((w=i.arrow)==null?void 0:w.x)??0)+l/2,v=(((j=i.arrow)==null?void 0:j.y)??0)+c/2;let p="",x="";return d==="bottom"?(p=o?m:`${f}px`,x=`${-c}px`):d==="top"?(p=o?m:`${f}px`,x=`${s.floating.height+c}px`):d==="right"?(p=`${-c}px`,x=o?m:`${v}px`):d==="left"&&(p=`${s.floating.width+c}px`,x=o?m:`${v}px`),{data:{x:p,y:x}}}});function a8(e){const[t,n="center"]=e.split("-");return[t,n]}var o8=e8,Tk=r8,Ak=n8,Ek=i8,[gb,xUe]=xn("Tooltip",[Mm]),Ok=Mm(),l8="TooltipProvider",Hne=700,CM="tooltip.open",[qne,c8]=gb(l8),d8=e=>{const{__scopeTooltip:t,delayDuration:n=Hne,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:a}=e,o=b.useRef(!0),l=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(qne,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:b.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:a})};d8.displayName=l8;var u8="Tooltip",[gUe,vb]=gb(u8),$_="TooltipTrigger",Kne=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,i=vb($_,n),a=c8($_,n),o=Ok(n),l=b.useRef(null),c=Nt(t,l,i.onTriggerChange),d=b.useRef(!1),h=b.useRef(!1),m=b.useCallback(()=>d.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),r.jsx(Tk,{asChild:!0,...o,children:r.jsx(Je.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:c,onPointerMove:$e(e.onPointerMove,f=>{f.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),h.current=!0)}),onPointerLeave:$e(e.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:$e(e.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:$e(e.onFocus,()=>{d.current||i.onOpen()}),onBlur:$e(e.onBlur,i.onClose),onClick:$e(e.onClick,i.onClose)})})});Kne.displayName=$_;var Gne="TooltipPortal",[vUe,Zne]=gb(Gne,{forceMount:void 0}),Fh="TooltipContent",h8=b.forwardRef((e,t)=>{const n=Zne(Fh,e.__scopeTooltip),{forceMount:s=n.forceMount,side:i="top",...a}=e,o=vb(Fh,e.__scopeTooltip);return r.jsx(Mn,{present:s||o.open,children:o.disableHoverableContent?r.jsx(m8,{side:i,...a,ref:t}):r.jsx(Yne,{side:i,...a,ref:t})})}),Yne=b.forwardRef((e,t)=>{const n=vb(Fh,e.__scopeTooltip),s=c8(Fh,e.__scopeTooltip),i=b.useRef(null),a=Nt(t,i),[o,l]=b.useState(null),{trigger:c,onClose:d}=n,h=i.current,{onPointerInTransitChange:m}=s,f=b.useCallback(()=>{l(null),m(!1)},[m]),v=b.useCallback((p,x)=>{const y=p.currentTarget,w={x:p.clientX,y:p.clientY},j=tse(w,y.getBoundingClientRect()),N=rse(w,j),C=nse(x.getBoundingClientRect()),P=ise([...N,...C]);l(P),m(!0)},[m]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(c&&h){const p=y=>v(y,h),x=y=>v(y,c);return c.addEventListener("pointerleave",p),h.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",p),h.removeEventListener("pointerleave",x)}}},[c,h,v,f]),b.useEffect(()=>{if(o){const p=x=>{const y=x.target,w={x:x.clientX,y:x.clientY},j=(c==null?void 0:c.contains(y))||(h==null?void 0:h.contains(y)),N=!sse(w,o);j?f():N&&(f(),d())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,h,o,d,f]),r.jsx(m8,{...e,ref:a})}),[Xne,Qne]=gb(u8,{isInside:!1}),Jne=ez("TooltipContent"),m8=b.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=vb(Fh,n),d=Ok(n),{onClose:h}=c;return b.useEffect(()=>(document.addEventListener(CM,h),()=>document.removeEventListener(CM,h)),[h]),b.useEffect(()=>{if(c.trigger){const m=f=>{const v=f.target;v!=null&&v.contains(c.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,h]),r.jsx(km,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:r.jsxs(Ak,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(Jne,{children:s}),r.jsx(Xne,{scope:n,isInside:!0,children:r.jsx(dte,{id:c.contentId,role:"tooltip",children:i||s})})]})})});h8.displayName=Fh;var f8="TooltipArrow",ese=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,i=Ok(n);return Qne(f8,n).isInside?null:r.jsx(Ek,{...i,...s,ref:t})});ese.displayName=f8;function tse(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,s,i,a)){case a:return"left";case i:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function rse(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function nse(e){const{top:t,right:n,bottom:s,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:s},{x:i,y:s}]}function sse(e,t){const{x:n,y:s}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,h=t[o].y;c>s!=h>s&&n<(d-l)*(s-c)/(h-c)+l&&(i=!i)}return i}function ise(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),ase(t)}function ase(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const i=e[s];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const i=e[s];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var ose=d8,p8=h8;const lse=ose,cse=b.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(p8,{ref:s,sideOffset:t,className:Ve("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));cse.displayName=p8.displayName;const x8=b.createContext(void 0);function dse({children:e}){const[t,n]=b.useState(null),[s,i]=b.useState(!0),a=async f=>{try{const v=await fetch(`/api/auth/refresh?userId=${f}`);if(v.ok){const p=await v.json();p.user?(n(p.user),localStorage.setItem("user",JSON.stringify(p.user))):console.warn("No user data in refresh response")}else console.warn("Failed to refresh user data:",v.status)}catch(v){console.error("Failed to refresh user data:",v)}};b.useEffect(()=>{const f=localStorage.getItem("user");if(f)try{const v=JSON.parse(f);if(n(v),v.role==="shopkeeper"&&v.status!=="active"){const p=setInterval(async()=>{try{await a(v.id)}catch{}},3e4);return()=>clearInterval(p)}}catch{localStorage.removeItem("user")}i(!1)},[]);const o=async(f,v)=>{const p=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,password:v})});if(!p.ok){const y=await p.json();throw new Error(y.error||"Login failed")}const{user:x}=await p.json();n(x),localStorage.setItem("user",JSON.stringify(x)),x.role==="delivery_partner"?window.location.href="/delivery-partner/dashboard":x.role==="shopkeeper"&&d(x.id)},l=async f=>{const v=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!v.ok){const x=await v.json();throw new Error(x.error||"Registration failed")}const{user:p}=await v.json();n(p),localStorage.setItem("user",JSON.stringify(p))},c=f=>{const v=["restaurant","cafe","food","kitchen","dining","eatery","bistro","pizzeria","burger","pizza","chicken","biryani","dosa","samosa","chinese","indian","nepali","thai","continental","fast food","dhaba","hotel","canteen","mess","tiffin","sweet","bakery","tyres"],p=f.toLowerCase();return v.some(x=>p.includes(x))},d=async f=>{try{const v=await fetch(`/api/stores/user/${f}`);if(v.ok){const p=await v.json();if(p.length>0){const x=p[0];x.storeType==="restaurant"||c(x.name)?window.location.href="/restaurant/dashboard":window.location.href="/seller/dashboard"}else window.location.href="/seller/dashboard"}}catch(v){console.error("Failed to check store type:",v),window.location.href="/seller/dashboard"}},h=async()=>{t!=null&&t.id&&await a(t.id)},m=()=>{n(null),localStorage.removeItem("user"),window.location.href="/"};return r.jsx(x8.Provider,{value:{user:t,login:o,register:l,logout:m,refreshUser:h,isLoading:s},children:e})}function Gt(){const e=b.useContext(x8);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}class use{constructor(){this.config={volume:.5,enabled:!0},this.sounds={},this.userHasInteracted=!1,this.loadSettings(),this.setupUserInteractionDetection(),this.preloadSounds()}setupUserInteractionDetection(){const t=()=>{this.userHasInteracted=!0,console.log(" User interaction detected - audio enabled"),document.removeEventListener("click",t),document.removeEventListener("touchstart",t),document.removeEventListener("keydown",t),document.removeEventListener("scroll",t),document.removeEventListener("mousemove",t)};document.addEventListener("click",t),document.addEventListener("touchstart",t),document.addEventListener("keydown",t),document.addEventListener("scroll",t),document.addEventListener("mousemove",t),setTimeout(()=>{if(!this.userHasInteracted)try{const n=new Audio;n.volume=0,n.play().then(()=>{this.userHasInteracted=!0,console.log(" Audio context enabled automatically")}).catch(()=>{console.log("  Audio requires user interaction - click anywhere to enable sounds")})}catch{console.log("  Audio context setup pending user interaction")}},100)}loadSettings(){try{const t=localStorage.getItem("siraha-sound-settings");t&&(this.config={...this.config,...JSON.parse(t)})}catch{console.log("Using default sound settings")}}saveSettings(){try{localStorage.setItem("siraha-sound-settings",JSON.stringify(this.config))}catch{console.log("Failed to save sound settings")}}preloadSounds(){const t={"cart-add":this.createAudioElement("/sounds/cart-add.mp3",()=>this.createBeepSound(800,100)),"cart-remove":this.createAudioElement("/sounds/cart-remove.mp3",()=>this.createBeepSound(400,150)),"cart-clear":this.createAudioElement("/sounds/cart-clear.mp3",()=>this.createBeepSound(300,200)),"order-placed":this.createAudioElement("/sounds/order-placed.mp3",()=>this.createSuccessSound()),"order-confirmed":this.createAudioElement("/sounds/order-confirmed.mp3",()=>this.createBeepSound(600,100,2)),"order-ready":this.createAudioElement("/sounds/notification.mp3",()=>this.createNotificationSound()),notification:this.createAudioElement("/sounds/notification.mp3",()=>this.createNotificationSound()),message:this.createAudioElement("/sounds/message.mp3",()=>this.createBeepSound(700,80)),alert:this.createAudioElement("/sounds/alert.mp3",()=>this.createAlertSound()),success:this.createAudioElement("/sounds/success.mp3",()=>this.createSuccessSound()),error:this.createAudioElement("/sounds/error.mp3",()=>this.createErrorSound()),"button-click":this.createAudioElement("/sounds/button-click.mp3",()=>this.createBeepSound(500,50)),toggle:this.createAudioElement("/sounds/toggle.mp3",()=>this.createBeepSound(600,40)),"tab-switch":this.createAudioElement("/sounds/tab-switch.mp3",()=>this.createBeepSound(450,60)),"modal-open":this.createAudioElement("/sounds/modal-open.mp3",()=>this.createBeepSound(650,80)),"modal-close":this.createAudioElement("/sounds/modal-close.mp3",()=>this.createBeepSound(350,80)),"product-like":this.createAudioElement("/sounds/product-like.mp3",()=>this.createBeepSound(750,70)),"review-submit":this.createAudioElement("/sounds/review-submit.mp3",()=>this.createSuccessSound()),"payment-success":this.createAudioElement("/sounds/payment-success.mp3",()=>this.createPaymentSuccessSound()),"delivery-update":this.createAudioElement("/sounds/delivery-update.mp3",()=>this.createNotificationSound())};this.sounds=t}createAudioElement(t,n){const s=new Audio;return s.src=t,s.preload="auto",s.volume=this.config.volume,s.addEventListener("canplaythrough",()=>{console.log(` Successfully loaded ${t}`)}),s.addEventListener("error",i=>{if(console.log(` Failed to load ${t}, using fallback immediately`),n)try{const a=n();s.src=a.src,s.volume=this.config.volume,console.log(` Fallback set for ${t.split("/").pop()}`)}catch(a){console.error("Fallback sound generation failed:",a)}}),s.addEventListener("loadstart",()=>{console.log(` Loading ${t}...`)}),s}createBeepSound(t,n,s=1){const i=new Audio,a=8e3,o=Math.min(n,200),l=Math.floor(a*o/1e3),c=new ArrayBuffer(44+l*2),d=new DataView(c),h=(p,x)=>{for(let y=0;y<x.length;y++)d.setUint8(p+y,x.charCodeAt(y))};h(0,"RIFF"),d.setUint32(4,36+l*2,!0),h(8,"WAVE"),h(12,"fmt "),d.setUint32(16,16,!0),d.setUint16(20,1,!0),d.setUint16(22,1,!0),d.setUint32(24,a,!0),d.setUint32(28,a*2,!0),d.setUint16(32,2,!0),d.setUint16(34,16,!0),h(36,"data"),d.setUint32(40,l*2,!0);for(let p=0;p<l;p++){const x=Math.min(1,p/(l*.1)),y=Math.min(1,(l-p)/(l*.1)),w=x*y,j=Math.sin(2*Math.PI*t*p/a)*.3*w;d.setInt16(44+p*2,j*32767,!0)}const m=new Uint8Array(c);let f="";for(let p=0;p<m.byteLength;p++)f+=String.fromCharCode(m[p]);const v=btoa(f);return i.src=`data:audio/wav;base64,${v}`,i.preload="auto",i}createNotificationSound(){return this.createMultiToneSound([523,659,784],[100,100,200])}createSuccessSound(){return this.createMultiToneSound([523,659,784,1047],[150,150,150,300])}createErrorSound(){return this.createMultiToneSound([400,350,300],[200,200,300])}createAlertSound(){return this.createMultiToneSound([800,600,800,600],[100,100,100,100])}createPaymentSuccessSound(){return this.createMultiToneSound([523,659,784,1047,1319],[120,120,120,120,400])}createMultiToneSound(t,n){const s=new Audio,i=8e3,a=n.reduce((p,x)=>p+x,0),o=Math.floor(i*a/1e3),l=new ArrayBuffer(44+o*2),c=new DataView(l),d=(p,x)=>{for(let y=0;y<x.length;y++)c.setUint8(p+y,x.charCodeAt(y))};d(0,"RIFF"),c.setUint32(4,36+o*2,!0),d(8,"WAVE"),d(12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,1,!0),c.setUint16(22,1,!0),c.setUint32(24,i,!0),c.setUint32(28,i*2,!0),c.setUint16(32,2,!0),c.setUint16(34,16,!0),d(36,"data"),c.setUint32(40,o*2,!0);let h=0;t.forEach((p,x)=>{const y=n[x],w=Math.floor(i*y/1e3);for(let j=0;j<w;j++){const N=Math.sin(2*Math.PI*p*j/i)*.3;c.setInt16(44+(h+j)*2,N*32767,!0)}h+=w});const m=new Uint8Array(l);let f="";for(let p=0;p<m.byteLength;p++)f+=String.fromCharCode(m[p]);const v=btoa(f);return s.src=`data:audio/wav;base64,${v}`,s.preload="auto",s}play(t,n){if(!this.config.enabled&&!(n!=null&&n.force)){console.log(` Sound '${t}' disabled`);return}if(!this.userHasInteracted){console.log(`  Cannot play sound '${t}' - waiting for user interaction`),console.log(" TIP: Click anywhere on the page first, then try adding to cart");return}const s=this.sounds[t];if(!s){console.log(` Sound '${t}' not found`);return}try{s.volume=this.config.volume,s.currentTime=0,console.log(` Playing sound '${t}' (src: ${s.src})`);const i=s.play();i!==void 0&&i.then(()=>{console.log(` Successfully played '${t}'`)}).catch(a=>{console.log(` Failed to play sound '${t}':`,a.message),this.tryFallbackSound(t)})}catch(i){console.log(` Error playing sound '${t}':`,i)}}tryFallbackSound(t){if(t==="cart-add")try{const n=this.createBeepSound(800,100);n.volume=this.config.volume,n.play().catch(s=>console.log("Fallback sound also failed:",s.message)),console.log(" Using fallback beep for cart-add")}catch(n){console.log(" Fallback sound creation failed:",n)}}setVolume(t){this.config.volume=Math.max(0,Math.min(1,t)),this.saveSettings()}getVolume(){return this.config.volume}setEnabled(t){this.config.enabled=t,this.saveSettings()}isEnabled(){return this.config.enabled}test(t){t?this.play(t,{force:!0}):Object.keys(this.sounds).forEach((n,s)=>{setTimeout(()=>this.play(n,{force:!0}),s*300)})}}const tr=new use,lr={cartAdd:()=>{console.log(" Cart Add sound requested"),tr.play("cart-add")},cartRemove:()=>{console.log(" Cart Remove sound requested"),tr.play("cart-remove")},cartClear:()=>{console.log(" Cart Clear sound requested"),tr.play("cart-clear")},orderPlaced:()=>tr.play("order-placed"),orderConfirmed:()=>tr.play("order-confirmed"),orderReady:()=>tr.play("order-ready"),notification:()=>tr.play("notification"),message:()=>tr.play("message"),alert:()=>tr.play("alert"),success:()=>tr.play("success"),error:()=>tr.play("error"),buttonClick:()=>tr.play("button-click"),toggle:()=>tr.play("toggle"),tabSwitch:()=>tr.play("tab-switch"),modalOpen:()=>tr.play("modal-open"),modalClose:()=>tr.play("modal-close"),productLike:()=>tr.play("product-like"),reviewSubmit:()=>tr.play("review-submit"),paymentSuccess:()=>tr.play("payment-success"),deliveryUpdate:()=>tr.play("delivery-update")},g8=b.createContext(void 0);function hse({children:e}){const[t,n]=b.useState([]),[s,i]=b.useState(!1),[a,o]=b.useState(0),[l,c]=b.useState(new Set),{user:d}=Gt(),h=async()=>{if(!d){i(!0);try{const k=JSON.parse(localStorage.getItem("guestCart")||"[]");if(k.length>0){const _=await Promise.all(k.map(async O=>{try{const M=await fetch(`/api/products/${O.productId}`);if(M.ok){const T=await M.json();return{...O,product:T}}return O}catch(M){return console.error(`Failed to fetch product ${O.productId}:`,M),O}}));n(_)}else n([])}catch(k){console.error("Failed to load guest cart:",k),n([])}finally{i(!1)}return}i(!0);try{const k=await fetch(`/api/cart/${d.id}`);if(k.ok){const _=await k.json();n(_)}}catch(k){console.error("Failed to fetch cart:",k)}finally{i(!1)}};b.useEffect(()=>{h()},[d]);const m=async(k,_)=>{if(!d){const M=JSON.parse(localStorage.getItem("guestCart")||"[]"),T=M.find(A=>A.productId===k);T?T.quantity+=_:M.push({id:Date.now(),productId:k,quantity:_,userId:null,createdAt:new Date().toISOString()}),localStorage.setItem("guestCart",JSON.stringify(M)),localStorage.setItem("cartHasSelections","true"),lr.cartAdd();const I=await fetch(`/api/products/${k}`);if(I.ok){const A=await I.json(),V=M.map(D=>({...D,product:D.productId===k?A:D.product}));n(V)}return}if(!(await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d.id,productId:k,quantity:_})})).ok)throw new Error("Failed to add item to cart");localStorage.setItem("cartHasSelections","true"),lr.cartAdd(),await h()},f=async(k,_)=>{if(!(await fetch(`/api/cart/${k}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:_})})).ok)throw new Error("Failed to update cart item");await h()},v=async k=>{try{if(!t.find(M=>M.id===k)){console.log(`Cart item ${k} not found in current cart, skipping removal`),await h();return}console.log(`Attempting to remove cart item ID: ${k}`);const O=await fetch(`/api/cart/${k}`,{method:"DELETE"});if(!O.ok){const M=await O.json();if(O.status===404){console.log("Item already removed, refreshing cart"),await h();return}throw console.error(`Failed to remove cart item ${k}:`,M),new Error(M.error||"Failed to remove item from cart")}console.log(`Successfully removed cart item ${k}`),lr.cartRemove(),await h()}catch(_){const O=_ instanceof Error?_.message:"Unknown error";if(O.includes("already removed")||console.error("Remove from cart error:",_),await h(),!O.includes("Cart item not found"))throw _}},p=async()=>{if(!d){localStorage.removeItem("guestCart"),localStorage.removeItem("cartHasSelections"),n([]),c(new Set),lr.cartClear();return}if(console.log(`Clearing cart for user ${d.id}`),!(await fetch(`/api/cart/user/${d.id}`,{method:"DELETE"})).ok)throw new Error("Failed to clear cart");console.log("Cart cleared successfully, refreshing frontend"),n([]),c(new Set),lr.cartClear(),await h()},x=async()=>{if(!d){const _=JSON.parse(localStorage.getItem("guestCart")||"[]"),O=Array.from(l),M=_.filter(T=>!O.includes(T.id));localStorage.setItem("guestCart",JSON.stringify(M)),lr.cartClear(),c(new Set),await h();return}const k=j();for(const _ of k)try{const O=await fetch(`/api/cart/${_.id}`,{method:"DELETE"});O.ok||O.status!==404&&console.error(`Failed to remove item ${_.id} from cart`)}catch(O){console.error(`Error removing item ${_.id}:`,O)}c(new Set),await h()},y=t.reduce((k,_)=>_.product?k+Number(_.product.price)*_.quantity:k,0),w=t.reduce((k,_)=>k+_.quantity,0),j=()=>t.filter(k=>l.has(k.id)),N=()=>{const k=j(),_=k.reduce((M,T)=>T.product?M+Number(T.product.price)*T.quantity:M,0),O=k.reduce((M,T)=>M+T.quantity,0);return{amount:_,items:O}},C=async k=>{const _=t.find(O=>O.productId===k);if(_)c(new Set([_.id]));else{await m(k,1),await h();const O=t.find(M=>M.productId===k);O&&c(new Set([O.id]))}localStorage.setItem("cartHasSelections","true")},P=()=>{localStorage.removeItem("cartHasSelections"),c(new Set)};return b.useEffect(()=>{const k=localStorage.getItem("cartHasSelections")==="true";t.length===0?(localStorage.removeItem("cartHasSelections"),c(new Set)):t.length>0&&l.size===0&&!k&&c(new Set(t.map(_=>_.id)))},[t]),r.jsx(g8.Provider,{value:{cartItems:t,addToCart:m,updateCartItem:f,removeFromCart:v,clearCart:p,clearSelectedItems:x,totalAmount:y,totalItems:w,isLoading:s,refreshCart:h,deliveryFee:a,setDeliveryFee:o,selectedItems:l,setSelectedItems:c,getSelectedCartItems:j,getSelectedTotals:N,selectSingleItem:C,resetSelectionState:P},children:e})}function wc(){const e=b.useContext(g8);if(e===void 0)throw new Error("useCart must be used within a CartProvider");return e}async function yb(e,t,n){try{const s=await fetch(t,{method:e,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0});if(!s.ok){let i;try{i=await s.json()}catch{i={error:`HTTP ${s.status} - ${s.statusText}`}}const a=new Error(i.error||`HTTP ${s.status}`);throw a.status=s.status,a.statusText=s.statusText,a}return s}catch(s){throw s instanceof TypeError&&s.message.includes("fetch")?new Error("Network error: Unable to connect to server"):s}}async function kM(e){const t=await yb("GET",e);try{return await t.json()}catch(n){throw console.error("Failed to parse JSON response:",n),new Error("Invalid response format")}}async function ea(e,t){const n=await yb("POST",e,t);try{return await n.json()}catch(s){throw console.error("Failed to parse JSON response:",s),new Error("Invalid response format")}}async function zh(e,t){const n=await yb("PUT",e,t);try{return await n.json()}catch(s){throw console.error("Failed to parse JSON response:",s),new Error("Invalid response format")}}async function jb(e){await yb("DELETE",e)}const v8=b.createContext(void 0);function mse({children:e}){const{user:t}=Gt(),[n,s]=b.useState([]),[i,a]=b.useState(!1),o=async()=>{if(t){a(!0);try{const v=await kM(`/api/wishlist/${t.id}`),p=await Promise.all(v.map(async x=>{try{const y=await kM(`/api/products/${x.productId}`);return{...x,product:y}}catch{return x}}));s(p)}catch(v){console.error("Failed to fetch wishlist:",v)}finally{a(!1)}}},l=async v=>{if(t)try{await ea("/api/wishlist",{userId:t.id,productId:v}),await o()}catch(p){console.error("Failed to add to wishlist:",p)}},c=async v=>{var p,x;try{await jb(`/api/wishlist/${v}`),await o()}catch(y){console.error("Failed to remove from wishlist:",y),((p=y==null?void 0:y.message)!=null&&p.includes("not found")||(x=y==null?void 0:y.message)!=null&&x.includes("404"))&&(console.log("Item not found on server, refreshing wishlist..."),await o())}},d=v=>n.some(p=>p.productId===v),h=async v=>{const p=n.find(x=>x.productId===v);if(p)try{await c(p.id)}catch(x){console.error("Error toggling wishlist item:",x),await o()}else await l(v)},m=async()=>{await o()};b.useEffect(()=>{t?o():s([])},[t]);const f=n.length;return r.jsx(v8.Provider,{value:{wishlistItems:n,addToWishlist:l,removeFromWishlist:c,isInWishlist:d,toggleWishlist:h,totalItems:f,isLoading:i,refreshWishlist:m},children:e})}function bb(){const e=b.useContext(v8);if(e===void 0)throw new Error("useWishlist must be used within a WishlistProvider");return e}const y8=b.createContext(void 0);function fse({children:e}){const[t,n]=b.useState("shopping"),[,s]=Jr(),[i,a]=b.useState(null),o=b.useCallback(()=>{i&&i()},[i]),l=b.useCallback(d=>{const h=t;n(d),h!==d&&(o(),(d==="food"||d==="shopping")&&s("/"))},[t,o,s]),c=b.useCallback(d=>{a(()=>d)},[]);return r.jsx(y8.Provider,{value:{mode:t,setMode:l,clearSearchOnModeChange:o,setClearSearchCallback:c},children:e})}function ua(){const e=b.useContext(y8);if(e===void 0)throw new Error("useAppMode must be used within an AppModeProvider");return e}const j8=b.createContext(void 0);function pse({children:e}){const[t,n]=b.useState(tr.isEnabled()),[s,i]=b.useState(tr.getVolume());b.useEffect(()=>{n(tr.isEnabled()),i(tr.getVolume())},[]);const l={isEnabled:t,volume:s,setEnabled:c=>{n(c),tr.setEnabled(c)},setVolume:c=>{i(c),tr.setVolume(c)},play:tr.play.bind(tr),playCartAdd:lr.cartAdd,playCartRemove:lr.cartRemove,playCartClear:lr.cartClear,playOrderPlaced:lr.orderPlaced,playOrderConfirmed:lr.orderConfirmed,playOrderReady:lr.orderReady,playNotification:lr.notification,playMessage:lr.message,playAlert:lr.alert,playSuccess:lr.success,playError:lr.error,playButtonClick:lr.buttonClick,playToggle:lr.toggle,playTabSwitch:lr.tabSwitch,playModalOpen:lr.modalOpen,playModalClose:lr.modalClose,playProductLike:lr.productLike,playReviewSubmit:lr.reviewSubmit,playPaymentSuccess:lr.paymentSuccess,playDeliveryUpdate:lr.deliveryUpdate,testAllSounds:tr.test.bind(tr)};return r.jsx(j8.Provider,{value:l,children:e})}function b8(){const e=b.useContext(j8);if(!e)throw new Error("useSoundEffects must be used within a SoundProvider");return e}function Mk(){const e=b8();return{onCartAdd:e.playCartAdd,onCartRemove:e.playCartRemove,onCartClear:e.playCartClear,onOrderPlaced:e.playOrderPlaced,onOrderConfirmed:e.playOrderConfirmed,onOrderReady:e.playOrderReady,onSuccess:e.playSuccess,onError:e.playError,onButtonClick:e.playButtonClick,onNotification:e.playNotification,onAlert:e.playAlert,onProductLike:e.playProductLike,onReviewSubmit:e.playReviewSubmit,onPaymentSuccess:e.playPaymentSuccess,onApprove:e.playSuccess,onReject:e.playError,onModalOpen:e.playModalOpen,onModalClose:e.playModalClose,onTabSwitch:e.playTabSwitch,settings:{isEnabled:e.isEnabled,volume:e.volume,setEnabled:e.setEnabled,setVolume:e.setVolume},testAll:e.testAllSounds,play:e.play}}const K=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));K.displayName="Card";const re=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("flex flex-col space-y-1.5 p-6",e),...t}));re.displayName="CardHeader";const ne=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("text-2xl font-semibold leading-none tracking-tight",e),...t}));ne.displayName="CardTitle";const kt=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("text-sm text-muted-foreground",e),...t}));kt.displayName="CardDescription";const G=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("p-6 pt-0",e),...t}));G.displayName="CardContent";const w8=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("flex items-center p-6 pt-0",e),...t}));w8.displayName="CardFooter";function xse(){return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:r.jsx(K,{className:"w-full max-w-md mx-4",children:r.jsxs(G,{className:"pt-6",children:[r.jsxs("div",{className:"flex mb-4 gap-2",children:[r.jsx(Nr,{className:"h-8 w-8 text-red-500"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),r.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function gse(){const{user:e}=Gt(),{data:t=[]}=Le({queryKey:[`/api/stores/user/${e==null?void 0:e.id}`],enabled:!!(e!=null&&e.id)&&(e==null?void 0:e.role)==="shopkeeper"});return t.some(s=>s.storeType==="restaurant"||vse(s.name))?r.jsxs(Ae,{href:"/restaurant/dashboard",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Pa,{className:"h-4 w-4"}),r.jsx("span",{children:"Restaurant Dashboard"})]}):r.jsxs(Ae,{href:"/seller/dashboard",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(si,{className:"h-4 w-4"}),r.jsx("span",{children:"Dashboard"})]})}function vse(e){const t=["restaurant","cafe","food","kitchen","dining","eatery","bistro","pizzeria","burger","pizza","chicken","biryani","dosa","samosa","chinese","indian","nepali","thai","continental","fast food","dhaba","hotel","canteen","mess","tiffin","sweet","bakery","tyres"],n=e.toLowerCase();return t.some(s=>n.includes(s))}const Dk=Tm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),$=b.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...i},a)=>{const o=s?QF:"button";return r.jsx(o,{className:Ve(Dk({variant:t,size:n,className:e})),ref:a,...i})});$.displayName="Button";const yse=Tm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ue({className:e,variant:t,...n}){return r.jsx("div",{className:Ve(yse({variant:t}),e),...n})}var jse=b.createContext(void 0);function eu(e){const t=b.useContext(jse);return e||t||"ltr"}function Kp(e,[t,n]){return Math.min(n,Math.max(t,e))}function bse(e,t){return b.useReducer((n,s)=>t[n][s]??n,e)}var Ik="ScrollArea",[N8,yUe]=xn(Ik),[wse,Di]=N8(Ik),S8=b.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:i,scrollHideDelay:a=600,...o}=e,[l,c]=b.useState(null),[d,h]=b.useState(null),[m,f]=b.useState(null),[v,p]=b.useState(null),[x,y]=b.useState(null),[w,j]=b.useState(0),[N,C]=b.useState(0),[P,k]=b.useState(!1),[_,O]=b.useState(!1),M=Nt(t,I=>c(I)),T=eu(i);return r.jsx(wse,{scope:n,type:s,dir:T,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:h,content:m,onContentChange:f,scrollbarX:v,onScrollbarXChange:p,scrollbarXEnabled:P,onScrollbarXEnabledChange:k,scrollbarY:x,onScrollbarYChange:y,scrollbarYEnabled:_,onScrollbarYEnabledChange:O,onCornerWidthChange:j,onCornerHeightChange:C,children:r.jsx(Je.div,{dir:T,...o,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});S8.displayName=Ik;var _8="ScrollAreaViewport",P8=b.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:i,...a}=e,o=Di(_8,n),l=b.useRef(null),c=Nt(t,l,o.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),r.jsx(Je.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});P8.displayName=_8;var Ya="ScrollAreaScrollbar",Lk=b.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=Di(Ya,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return b.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?r.jsx(Nse,{...s,ref:t,forceMount:n}):i.type==="scroll"?r.jsx(Sse,{...s,ref:t,forceMount:n}):i.type==="auto"?r.jsx(C8,{...s,ref:t,forceMount:n}):i.type==="always"?r.jsx(Rk,{...s,ref:t}):null});Lk.displayName=Ya;var Nse=b.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=Di(Ya,e.__scopeScrollArea),[a,o]=b.useState(!1);return b.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[i.scrollArea,i.scrollHideDelay]),r.jsx(Mn,{present:n||a,children:r.jsx(C8,{"data-state":a?"visible":"hidden",...s,ref:t})})}),Sse=b.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=Di(Ya,e.__scopeScrollArea),a=e.orientation==="horizontal",o=Nb(()=>c("SCROLL_END"),100),[l,c]=bse("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,i.scrollHideDelay,c]),b.useEffect(()=>{const d=i.viewport,h=a?"scrollLeft":"scrollTop";if(d){let m=d[h];const f=()=>{const v=d[h];m!==v&&(c("SCROLL"),o()),m=v};return d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[i.viewport,a,c,o]),r.jsx(Mn,{present:n||l!=="hidden",children:r.jsx(Rk,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:$e(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:$e(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),C8=b.forwardRef((e,t)=>{const n=Di(Ya,e.__scopeScrollArea),{forceMount:s,...i}=e,[a,o]=b.useState(!1),l=e.orientation==="horizontal",c=Nb(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:h)}},10);return Bh(n.viewport,c),Bh(n.content,c),r.jsx(Mn,{present:s||a,children:r.jsx(Rk,{"data-state":a?"visible":"hidden",...i,ref:t})})}),Rk=b.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,i=Di(Ya,e.__scopeScrollArea),a=b.useRef(null),o=b.useRef(0),[l,c]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=O8(l.viewport,l.content),h={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function m(f,v){return Ase(f,o.current,l,v)}return n==="horizontal"?r.jsx(_se,{...h,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollLeft,v=TM(f,l,i.dir);a.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=m(f,i.dir))}}):n==="vertical"?r.jsx(Pse,{...h,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollTop,v=TM(f,l);a.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=m(f))}}):null}),_se=b.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...i}=e,a=Di(Ya,e.__scopeScrollArea),[o,l]=b.useState(),c=b.useRef(null),d=Nt(t,c,a.onScrollbarXChange);return b.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(T8,{"data-orientation":"horizontal",...i,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":wb(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,m)=>{if(a.viewport){const f=a.viewport.scrollLeft+h.deltaX;e.onWheelScroll(f),D8(f,m)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:d0(o.paddingLeft),paddingEnd:d0(o.paddingRight)}})}})}),Pse=b.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...i}=e,a=Di(Ya,e.__scopeScrollArea),[o,l]=b.useState(),c=b.useRef(null),d=Nt(t,c,a.onScrollbarYChange);return b.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(T8,{"data-orientation":"vertical",...i,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":wb(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,m)=>{if(a.viewport){const f=a.viewport.scrollTop+h.deltaY;e.onWheelScroll(f),D8(f,m)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:d0(o.paddingTop),paddingEnd:d0(o.paddingBottom)}})}})}),[Cse,k8]=N8(Ya),T8=b.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:m,...f}=e,v=Di(Ya,n),[p,x]=b.useState(null),y=Nt(t,M=>x(M)),w=b.useRef(null),j=b.useRef(""),N=v.viewport,C=s.content-s.viewport,P=Lr(h),k=Lr(c),_=Nb(m,10);function O(M){if(w.current){const T=M.clientX-w.current.left,I=M.clientY-w.current.top;d({x:T,y:I})}}return b.useEffect(()=>{const M=T=>{const I=T.target;(p==null?void 0:p.contains(I))&&P(T,C)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[N,p,C,P]),b.useEffect(k,[s,k]),Bh(p,_),Bh(v.content,_),r.jsx(Cse,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:Lr(a),onThumbPointerUp:Lr(o),onThumbPositionChange:k,onThumbPointerDown:Lr(l),children:r.jsx(Je.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:$e(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),w.current=p.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),O(M))}),onPointerMove:$e(e.onPointerMove,O),onPointerUp:$e(e.onPointerUp,M=>{const T=M.target;T.hasPointerCapture(M.pointerId)&&T.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=j.current,v.viewport&&(v.viewport.style.scrollBehavior=""),w.current=null})})})}),c0="ScrollAreaThumb",A8=b.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=k8(c0,e.__scopeScrollArea);return r.jsx(Mn,{present:n||i.hasThumb,children:r.jsx(kse,{ref:t,...s})})}),kse=b.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...i}=e,a=Di(c0,n),o=k8(c0,n),{onThumbPositionChange:l}=o,c=Nt(t,m=>o.onThumbChange(m)),d=b.useRef(void 0),h=Nb(()=>{d.current&&(d.current(),d.current=void 0)},100);return b.useEffect(()=>{const m=a.viewport;if(m){const f=()=>{if(h(),!d.current){const v=Ese(m,l);d.current=v,l()}};return l(),m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[a.viewport,h,l]),r.jsx(Je.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:$e(e.onPointerDownCapture,m=>{const v=m.target.getBoundingClientRect(),p=m.clientX-v.left,x=m.clientY-v.top;o.onThumbPointerDown({x:p,y:x})}),onPointerUp:$e(e.onPointerUp,o.onThumbPointerUp)})});A8.displayName=c0;var $k="ScrollAreaCorner",E8=b.forwardRef((e,t)=>{const n=Di($k,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?r.jsx(Tse,{...e,ref:t}):null});E8.displayName=$k;var Tse=b.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,i=Di($k,n),[a,o]=b.useState(0),[l,c]=b.useState(0),d=!!(a&&l);return Bh(i.scrollbarX,()=>{var m;const h=((m=i.scrollbarX)==null?void 0:m.offsetHeight)||0;i.onCornerHeightChange(h),c(h)}),Bh(i.scrollbarY,()=>{var m;const h=((m=i.scrollbarY)==null?void 0:m.offsetWidth)||0;i.onCornerWidthChange(h),o(h)}),d?r.jsx(Je.div,{...s,ref:t,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function d0(e){return e?parseInt(e,10):0}function O8(e,t){const n=e/t;return isNaN(n)?0:n}function wb(e){const t=O8(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function Ase(e,t,n,s="ltr"){const i=wb(n),a=i/2,o=t||a,l=i-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,m=s==="ltr"?[0,h]:[h*-1,0];return M8([c,d],m)(e)}function TM(e,t,n="ltr"){const s=wb(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,l=a-s,c=n==="ltr"?[0,o]:[o*-1,0],d=Kp(e,c);return M8([0,o],[0,l])(d)}function M8(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function D8(e,t){return e>0&&e<t}var Ese=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,s=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(s)};function Nb(e,t){const n=Lr(e),s=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),b.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function Bh(e,t){const n=Lr(t);an(()=>{let s=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(s),i.unobserve(e)}}},[e,n])}var I8=S8,Ose=P8,Mse=E8;const Fk=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(I8,{ref:s,className:Ve("relative overflow-hidden",e),...n,children:[r.jsx(Ose,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(L8,{}),r.jsx(Mse,{})]}));Fk.displayName=I8.displayName;const L8=b.forwardRef(({className:e,orientation:t="vertical",...n},s)=>r.jsx(Lk,{ref:s,orientation:t,className:Ve("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:r.jsx(A8,{className:"relative flex-1 rounded-full bg-border"})}));L8.displayName=Lk.displayName;const de=b.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:Ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));de.displayName="Input";function e1({onSearch:e,placeholder:t="Search products and stores...",className:n=""}){const[s,i]=b.useState(""),[a,o]=b.useState(!1),[,l]=Jr(),c=b.useRef(null),{setClearSearchCallback:d}=ua();b.useEffect(()=>{d(()=>{i(""),o(!1)})},[]);const{data:h}=Le({queryKey:["/api/search/suggestions",s],queryFn:async()=>{const p=await fetch(`/api/search/suggestions?q=${encodeURIComponent(s)}`);if(!p.ok)throw new Error("Failed to fetch suggestions");return p.json()},enabled:s.length>=2}),m=p=>{if(p.preventDefault(),console.log("SearchWithSuggestions handleSearch called with:",`"${s}"`),e)e(s.trim());else if(s.trim()){const x=`/products?search=${encodeURIComponent(s.trim())}`;console.log("Navigating to:",x),l(x)}else console.log("Clearing search - navigating to /products (empty search)"),l("/products");o(!1)},f=(p,x)=>{l(p==="product"?`/products/${x}`:`/stores/${x}`),i(""),o(!1)};b.useEffect(()=>{const p=x=>{c.current&&!c.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const v=h&&(h.products.length>0||h.stores.length>0);return r.jsxs("div",{ref:c,className:`relative ${n}`,children:[r.jsxs("form",{onSubmit:m,className:"relative",children:[r.jsx(de,{type:"text",placeholder:t,value:s,onChange:p=>{i(p.target.value),o(p.target.value.length>=2),console.log("Search input changed to:",`"${p.target.value}"`)},onFocus:()=>o(s.length>=2),onKeyDown:p=>{p.key==="Enter"&&console.log("Enter key pressed with search query:",`"${s}"`)},className:"w-full pl-4 pr-12 py-2 bg-white text-gray-900 border-none focus:ring-2 focus:ring-white"}),r.jsx($,{type:"submit",size:"sm",className:"absolute right-0 top-0 h-full bg-accent hover:bg-accent/90 border-none rounded-l-none",children:r.jsx(Qn,{className:"h-4 w-4"})})]}),a&&v&&r.jsx(K,{className:"absolute top-full left-0 right-0 mt-1 z-50 max-h-96 overflow-y-auto bg-white shadow-lg border",children:r.jsxs("div",{className:"p-2",children:[h.products.length>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Products"}),h.products.map(p=>r.jsxs("button",{onClick:()=>f("product",p.id),className:"w-full flex items-center space-x-3 px-2 py-2 hover:bg-gray-100 rounded-md text-left transition-colors",children:[r.jsx(Ye,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:p.name}),p.description&&r.jsx("div",{className:"text-xs text-gray-500 truncate",children:p.description})]}),r.jsxs("div",{className:"text-sm font-semibold text-green-600",children:["$",p.price]})]},p.id))]}),h.stores.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Stores"}),h.stores.map(p=>r.jsxs("button",{onClick:()=>f("store",p.id),className:"w-full flex items-center space-x-3 px-2 py-2 hover:bg-gray-100 rounded-md text-left transition-colors",children:[r.jsx(ar,{className:"h-4 w-4 text-purple-500 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:p.name}),p.description&&r.jsx("div",{className:"text-xs text-gray-500 truncate",children:p.description})]}),r.jsx("div",{className:"text-xs text-gray-500",children:"Store"})]},p.id))]})]})})]})}var t1=0;function zk(){b.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??AM()),document.body.insertAdjacentElement("beforeend",e[1]??AM()),t1++,()=>{t1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),t1--}},[])}function AM(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var r1="focusScope.autoFocusOnMount",n1="focusScope.autoFocusOnUnmount",EM={bubbles:!1,cancelable:!0},Dse="FocusScope",Sb=b.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=b.useState(null),d=Lr(i),h=Lr(a),m=b.useRef(null),f=Nt(t,x=>c(x)),v=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(s){let x=function(N){if(v.paused||!l)return;const C=N.target;l.contains(C)?m.current=C:hl(m.current,{select:!0})},y=function(N){if(v.paused||!l)return;const C=N.relatedTarget;C!==null&&(l.contains(C)||hl(m.current,{select:!0}))},w=function(N){if(document.activeElement===document.body)for(const P of N)P.removedNodes.length>0&&hl(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",y);const j=new MutationObserver(w);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",y),j.disconnect()}}},[s,l,v.paused]),b.useEffect(()=>{if(l){MM.add(v);const x=document.activeElement;if(!l.contains(x)){const w=new CustomEvent(r1,EM);l.addEventListener(r1,d),l.dispatchEvent(w),w.defaultPrevented||(Ise(zse(R8(l)),{select:!0}),document.activeElement===x&&hl(l))}return()=>{l.removeEventListener(r1,d),setTimeout(()=>{const w=new CustomEvent(n1,EM);l.addEventListener(n1,h),l.dispatchEvent(w),w.defaultPrevented||hl(x??document.body,{select:!0}),l.removeEventListener(n1,h),MM.remove(v)},0)}}},[l,d,h,v]);const p=b.useCallback(x=>{if(!n&&!s||v.paused)return;const y=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(y&&w){const j=x.currentTarget,[N,C]=Lse(j);N&&C?!x.shiftKey&&w===C?(x.preventDefault(),n&&hl(N,{select:!0})):x.shiftKey&&w===N&&(x.preventDefault(),n&&hl(C,{select:!0})):w===j&&x.preventDefault()}},[n,s,v.paused]);return r.jsx(Je.div,{tabIndex:-1,...o,ref:f,onKeyDown:p})});Sb.displayName=Dse;function Ise(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(hl(s,{select:t}),document.activeElement!==n)return}function Lse(e){const t=R8(e),n=OM(t,e),s=OM(t.reverse(),e);return[n,s]}function R8(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function OM(e,t){for(const n of e)if(!Rse(n,{upTo:t}))return n}function Rse(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function $se(e){return e instanceof HTMLInputElement&&"select"in e}function hl(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&$se(e)&&t&&e.select()}}var MM=Fse();function Fse(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=DM(e,t),e.unshift(t)},remove(t){var n;e=DM(e,t),(n=e[0])==null||n.resume()}}}function DM(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function zse(e){return e.filter(t=>t.tagName!=="A")}var s1="rovingFocusGroup.onEntryFocus",Bse={bubbles:!1,cancelable:!0},_b="RovingFocusGroup",[F_,$8,Vse]=cg(_b),[Use,Dm]=xn(_b,[Vse]),[Wse,Hse]=Use(_b),F8=b.forwardRef((e,t)=>r.jsx(F_.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(F_.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(qse,{...e,ref:t})})}));F8.displayName=_b;var qse=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...m}=e,f=b.useRef(null),v=Nt(t,f),p=eu(a),[x=null,y]=Oi({prop:o,defaultProp:l,onChange:c}),[w,j]=b.useState(!1),N=Lr(d),C=$8(n),P=b.useRef(!1),[k,_]=b.useState(0);return b.useEffect(()=>{const O=f.current;if(O)return O.addEventListener(s1,N),()=>O.removeEventListener(s1,N)},[N]),r.jsx(Wse,{scope:n,orientation:s,dir:p,loop:i,currentTabStopId:x,onItemFocus:b.useCallback(O=>y(O),[y]),onItemShiftTab:b.useCallback(()=>j(!0),[]),onFocusableItemAdd:b.useCallback(()=>_(O=>O+1),[]),onFocusableItemRemove:b.useCallback(()=>_(O=>O-1),[]),children:r.jsx(Je.div,{tabIndex:w||k===0?-1:0,"data-orientation":s,...m,ref:v,style:{outline:"none",...e.style},onMouseDown:$e(e.onMouseDown,()=>{P.current=!0}),onFocus:$e(e.onFocus,O=>{const M=!P.current;if(O.target===O.currentTarget&&M&&!w){const T=new CustomEvent(s1,Bse);if(O.currentTarget.dispatchEvent(T),!T.defaultPrevented){const I=C().filter(U=>U.focusable),A=I.find(U=>U.active),V=I.find(U=>U.id===x),W=[A,V,...I].filter(Boolean).map(U=>U.ref.current);V8(W,h)}}P.current=!1}),onBlur:$e(e.onBlur,()=>j(!1))})})}),z8="RovingFocusGroupItem",B8=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:a,...o}=e,l=ia(),c=a||l,d=Hse(z8,n),h=d.currentTabStopId===c,m=$8(n),{onFocusableItemAdd:f,onFocusableItemRemove:v}=d;return b.useEffect(()=>{if(s)return f(),()=>v()},[s,f,v]),r.jsx(F_.ItemSlot,{scope:n,id:c,focusable:s,active:i,children:r.jsx(Je.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:$e(e.onMouseDown,p=>{s?d.onItemFocus(c):p.preventDefault()}),onFocus:$e(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:$e(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){d.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const x=Zse(p,d.orientation,d.dir);if(x!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let w=m().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const j=w.indexOf(p.currentTarget);w=d.loop?Yse(w,j+1):w.slice(j+1)}setTimeout(()=>V8(w))}})})})});B8.displayName=z8;var Kse={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Gse(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Zse(e,t,n){const s=Gse(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Kse[s]}function V8(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function Yse(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var Bk=F8,Vk=B8,Xse=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},yu=new WeakMap,Tv=new WeakMap,Av={},i1=0,U8=function(e){return e&&(e.host||U8(e.parentNode))},Qse=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=U8(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Jse=function(e,t,n,s){var i=Qse(t,Array.isArray(e)?e:[e]);Av[n]||(Av[n]=new WeakMap);var a=Av[n],o=[],l=new Set,c=new Set(i),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};i.forEach(d);var h=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(f){if(l.has(f))h(f);else try{var v=f.getAttribute(s),p=v!==null&&v!=="false",x=(yu.get(f)||0)+1,y=(a.get(f)||0)+1;yu.set(f,x),a.set(f,y),o.push(f),x===1&&p&&Tv.set(f,!0),y===1&&f.setAttribute(n,"true"),p||f.setAttribute(s,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return h(t),l.clear(),i1++,function(){o.forEach(function(m){var f=yu.get(m)-1,v=a.get(m)-1;yu.set(m,f),a.set(m,v),f||(Tv.has(m)||m.removeAttribute(s),Tv.delete(m)),v||m.removeAttribute(n)}),i1--,i1||(yu=new WeakMap,yu=new WeakMap,Tv=new WeakMap,Av={})}},Uk=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),i=Xse(e);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live]"))),Jse(s,i,n,"aria-hidden")):function(){return null}},_a=function(){return _a=Object.assign||function(t){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_a.apply(this,arguments)};function W8(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function eie(e,t,n){if(n||arguments.length===2)for(var s=0,i=t.length,a;s<i;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var yy="right-scroll-bar-position",jy="width-before-scroll-bar",tie="with-scroll-bars-hidden",rie="--removed-body-scroll-bar-size";function a1(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function nie(e,t){var n=b.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var i=n.value;i!==s&&(n.value=s,n.callback(s,i))}}}})[0];return n.callback=t,n.facade}var sie=typeof window<"u"?b.useLayoutEffect:b.useEffect,IM=new WeakMap;function iie(e,t){var n=nie(null,function(s){return e.forEach(function(i){return a1(i,s)})});return sie(function(){var s=IM.get(n);if(s){var i=new Set(s),a=new Set(e),o=n.current;i.forEach(function(l){a.has(l)||a1(l,null)}),a.forEach(function(l){i.has(l)||a1(l,o)})}IM.set(n,e)},[e]),n}function aie(e){return e}function oie(e,t){t===void 0&&(t=aie);var n=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,s);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(s=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){s=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var h=o;o=[],h.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return i}function lie(e){e===void 0&&(e={});var t=oie(null);return t.options=_a({async:!0,ssr:!1},e),t}var H8=function(e){var t=e.sideCar,n=W8(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return b.createElement(s,_a({},n))};H8.isSideCarExport=!0;function cie(e,t){return e.useMedium(t),H8}var q8=lie(),o1=function(){},Pb=b.forwardRef(function(e,t){var n=b.useRef(null),s=b.useState({onScrollCapture:o1,onWheelCapture:o1,onTouchMoveCapture:o1}),i=s[0],a=s[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,h=e.enabled,m=e.shards,f=e.sideCar,v=e.noIsolation,p=e.inert,x=e.allowPinchZoom,y=e.as,w=y===void 0?"div":y,j=e.gapMode,N=W8(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=f,P=iie([n,t]),k=_a(_a({},N),i);return b.createElement(b.Fragment,null,h&&b.createElement(C,{sideCar:q8,removeScrollBar:d,shards:m,noIsolation:v,inert:p,setCallbacks:a,allowPinchZoom:!!x,lockRef:n,gapMode:j}),o?b.cloneElement(b.Children.only(l),_a(_a({},k),{ref:P})):b.createElement(w,_a({},k,{className:c,ref:P}),l))});Pb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pb.classNames={fullWidth:jy,zeroRight:yy};var die=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function uie(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=die();return t&&e.setAttribute("nonce",t),e}function hie(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function mie(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var fie=function(){var e=0,t=null;return{add:function(n){e==0&&(t=uie())&&(hie(t,n),mie(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},pie=function(){var e=fie();return function(t,n){b.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},K8=function(){var e=pie(),t=function(n){var s=n.styles,i=n.dynamic;return e(s,i),null};return t},xie={left:0,top:0,right:0,gap:0},l1=function(e){return parseInt(e||"",10)||0},gie=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[l1(n),l1(s),l1(i)]},vie=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return xie;var t=gie(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},yie=K8(),lh="data-scroll-locked",jie=function(e,t,n,s){var i=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(tie,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(lh,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yy,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(jy,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(yy," .").concat(yy,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(jy," .").concat(jy,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(lh,`] {
    `).concat(rie,": ").concat(l,`px;
  }
`)},LM=function(){var e=parseInt(document.body.getAttribute(lh)||"0",10);return isFinite(e)?e:0},bie=function(){b.useEffect(function(){return document.body.setAttribute(lh,(LM()+1).toString()),function(){var e=LM()-1;e<=0?document.body.removeAttribute(lh):document.body.setAttribute(lh,e.toString())}},[])},wie=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,i=s===void 0?"margin":s;bie();var a=b.useMemo(function(){return vie(i)},[i]);return b.createElement(yie,{styles:jie(a,!t,i,n?"":"!important")})},z_=!1;if(typeof window<"u")try{var Ev=Object.defineProperty({},"passive",{get:function(){return z_=!0,!0}});window.addEventListener("test",Ev,Ev),window.removeEventListener("test",Ev,Ev)}catch{z_=!1}var ju=z_?{passive:!1}:!1,Nie=function(e){return e.tagName==="TEXTAREA"},G8=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Nie(e)&&n[t]==="visible")},Sie=function(e){return G8(e,"overflowY")},_ie=function(e){return G8(e,"overflowX")},RM=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=Z8(e,s);if(i){var a=Y8(e,s),o=a[1],l=a[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},Pie=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},Cie=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},Z8=function(e,t){return e==="v"?Sie(t):_ie(t)},Y8=function(e,t){return e==="v"?Pie(t):Cie(t)},kie=function(e,t){return e==="h"&&t==="rtl"?-1:1},Tie=function(e,t,n,s,i){var a=kie(e,window.getComputedStyle(t).direction),o=a*s,l=n.target,c=t.contains(l),d=!1,h=o>0,m=0,f=0;do{var v=Y8(e,l),p=v[0],x=v[1],y=v[2],w=x-y-a*p;(p||w)&&Z8(e,l)&&(m+=w,f+=p),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&(Math.abs(m)<1||!i)||!h&&(Math.abs(f)<1||!i))&&(d=!0),d},Ov=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$M=function(e){return[e.deltaX,e.deltaY]},FM=function(e){return e&&"current"in e?e.current:e},Aie=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Eie=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Oie=0,bu=[];function Mie(e){var t=b.useRef([]),n=b.useRef([0,0]),s=b.useRef(),i=b.useState(Oie++)[0],a=b.useState(K8)[0],o=b.useRef(e);b.useEffect(function(){o.current=e},[e]),b.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var x=eie([e.lockRef.current],(e.shards||[]).map(FM),!0).filter(Boolean);return x.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=b.useCallback(function(x,y){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var w=Ov(x),j=n.current,N="deltaX"in x?x.deltaX:j[0]-w[0],C="deltaY"in x?x.deltaY:j[1]-w[1],P,k=x.target,_=Math.abs(N)>Math.abs(C)?"h":"v";if("touches"in x&&_==="h"&&k.type==="range")return!1;var O=RM(_,k);if(!O)return!0;if(O?P=_:(P=_==="v"?"h":"v",O=RM(_,k)),!O)return!1;if(!s.current&&"changedTouches"in x&&(N||C)&&(s.current=P),!P)return!0;var M=s.current||P;return Tie(M,y,x,M==="h"?N:C,!0)},[]),c=b.useCallback(function(x){var y=x;if(!(!bu.length||bu[bu.length-1]!==a)){var w="deltaY"in y?$M(y):Ov(y),j=t.current.filter(function(P){return P.name===y.type&&(P.target===y.target||y.target===P.shadowParent)&&Aie(P.delta,w)})[0];if(j&&j.should){y.cancelable&&y.preventDefault();return}if(!j){var N=(o.current.shards||[]).map(FM).filter(Boolean).filter(function(P){return P.contains(y.target)}),C=N.length>0?l(y,N[0]):!o.current.noIsolation;C&&y.cancelable&&y.preventDefault()}}},[]),d=b.useCallback(function(x,y,w,j){var N={name:x,delta:y,target:w,should:j,shadowParent:Die(w)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(C){return C!==N})},1)},[]),h=b.useCallback(function(x){n.current=Ov(x),s.current=void 0},[]),m=b.useCallback(function(x){d(x.type,$M(x),x.target,l(x,e.lockRef.current))},[]),f=b.useCallback(function(x){d(x.type,Ov(x),x.target,l(x,e.lockRef.current))},[]);b.useEffect(function(){return bu.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",c,ju),document.addEventListener("touchmove",c,ju),document.addEventListener("touchstart",h,ju),function(){bu=bu.filter(function(x){return x!==a}),document.removeEventListener("wheel",c,ju),document.removeEventListener("touchmove",c,ju),document.removeEventListener("touchstart",h,ju)}},[]);var v=e.removeScrollBar,p=e.inert;return b.createElement(b.Fragment,null,p?b.createElement(a,{styles:Eie(i)}):null,v?b.createElement(wie,{gapMode:e.gapMode}):null)}function Die(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Iie=cie(q8,Mie);var Cb=b.forwardRef(function(e,t){return b.createElement(Pb,_a({},e,{ref:t,sideCar:Iie}))});Cb.classNames=Pb.classNames;var B_=["Enter"," "],Lie=["ArrowDown","PageUp","Home"],X8=["ArrowUp","PageDown","End"],Rie=[...Lie,...X8],$ie={ltr:[...B_,"ArrowRight"],rtl:[...B_,"ArrowLeft"]},Fie={ltr:["ArrowLeft"],rtl:["ArrowRight"]},fg="Menu",[Gp,zie,Bie]=cg(fg),[tu,Q8]=xn(fg,[Bie,Mm,Dm]),kb=Mm(),J8=Dm(),[Vie,ru]=tu(fg),[Uie,pg]=tu(fg),eB=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:i,onOpenChange:a,modal:o=!0}=e,l=kb(t),[c,d]=b.useState(null),h=b.useRef(!1),m=Lr(a),f=eu(i);return b.useEffect(()=>{const v=()=>{h.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>h.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),r.jsx(o8,{...l,children:r.jsx(Vie,{scope:t,open:n,onOpenChange:m,content:c,onContentChange:d,children:r.jsx(Uie,{scope:t,onClose:b.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:f,modal:o,children:s})})})};eB.displayName=fg;var Wie="MenuAnchor",Wk=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,i=kb(n);return r.jsx(Tk,{...i,...s,ref:t})});Wk.displayName=Wie;var Hk="MenuPortal",[Hie,tB]=tu(Hk,{forceMount:void 0}),rB=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:i}=e,a=ru(Hk,t);return r.jsx(Hie,{scope:t,forceMount:n,children:r.jsx(Mn,{present:n||a.open,children:r.jsx(dg,{asChild:!0,container:i,children:s})})})};rB.displayName=Hk;var Ci="MenuContent",[qie,qk]=tu(Ci),nB=b.forwardRef((e,t)=>{const n=tB(Ci,e.__scopeMenu),{forceMount:s=n.forceMount,...i}=e,a=ru(Ci,e.__scopeMenu),o=pg(Ci,e.__scopeMenu);return r.jsx(Gp.Provider,{scope:e.__scopeMenu,children:r.jsx(Mn,{present:s||a.open,children:r.jsx(Gp.Slot,{scope:e.__scopeMenu,children:o.modal?r.jsx(Kie,{...i,ref:t}):r.jsx(Gie,{...i,ref:t})})})})}),Kie=b.forwardRef((e,t)=>{const n=ru(Ci,e.__scopeMenu),s=b.useRef(null),i=Nt(t,s);return b.useEffect(()=>{const a=s.current;if(a)return Uk(a)},[]),r.jsx(Kk,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:$e(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Gie=b.forwardRef((e,t)=>{const n=ru(Ci,e.__scopeMenu);return r.jsx(Kk,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Zie=Ad("MenuContent.ScrollLock"),Kk=b.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:f,onDismiss:v,disableOutsideScroll:p,...x}=e,y=ru(Ci,n),w=pg(Ci,n),j=kb(n),N=J8(n),C=zie(n),[P,k]=b.useState(null),_=b.useRef(null),O=Nt(t,_,y.onContentChange),M=b.useRef(0),T=b.useRef(""),I=b.useRef(0),A=b.useRef(null),V=b.useRef("right"),D=b.useRef(0),W=p?Cb:b.Fragment,U=p?{as:Zie,allowPinchZoom:!0}:void 0,Q=B=>{var we,Be;const z=T.current+B,H=C().filter(Pe=>!Pe.disabled),X=document.activeElement,ge=(we=H.find(Pe=>Pe.ref.current===X))==null?void 0:we.textValue,Se=H.map(Pe=>Pe.textValue),F=oae(Se,z,ge),pe=(Be=H.find(Pe=>Pe.textValue===F))==null?void 0:Be.ref.current;(function Pe(Ee){T.current=Ee,window.clearTimeout(M.current),Ee!==""&&(M.current=window.setTimeout(()=>Pe(""),1e3))})(z),pe&&setTimeout(()=>pe.focus())};b.useEffect(()=>()=>window.clearTimeout(M.current),[]),zk();const q=b.useCallback(B=>{var H,X;return V.current===((H=A.current)==null?void 0:H.side)&&cae(B,(X=A.current)==null?void 0:X.area)},[]);return r.jsx(qie,{scope:n,searchRef:T,onItemEnter:b.useCallback(B=>{q(B)&&B.preventDefault()},[q]),onItemLeave:b.useCallback(B=>{var z;q(B)||((z=_.current)==null||z.focus(),k(null))},[q]),onTriggerLeave:b.useCallback(B=>{q(B)&&B.preventDefault()},[q]),pointerGraceTimerRef:I,onPointerGraceIntentChange:b.useCallback(B=>{A.current=B},[]),children:r.jsx(W,{...U,children:r.jsx(Sb,{asChild:!0,trapped:i,onMountAutoFocus:$e(a,B=>{var z;B.preventDefault(),(z=_.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(km,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:f,onDismiss:v,children:r.jsx(Bk,{asChild:!0,...N,dir:w.dir,orientation:"vertical",loop:s,currentTabStopId:P,onCurrentTabStopIdChange:k,onEntryFocus:$e(c,B=>{w.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(Ak,{role:"menu","aria-orientation":"vertical","data-state":yB(y.open),"data-radix-menu-content":"",dir:w.dir,...j,...x,ref:O,style:{outline:"none",...x.style},onKeyDown:$e(x.onKeyDown,B=>{const H=B.target.closest("[data-radix-menu-content]")===B.currentTarget,X=B.ctrlKey||B.altKey||B.metaKey,ge=B.key.length===1;H&&(B.key==="Tab"&&B.preventDefault(),!X&&ge&&Q(B.key));const Se=_.current;if(B.target!==Se||!Rie.includes(B.key))return;B.preventDefault();const pe=C().filter(we=>!we.disabled).map(we=>we.ref.current);X8.includes(B.key)&&pe.reverse(),iae(pe)}),onBlur:$e(e.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(M.current),T.current="")}),onPointerMove:$e(e.onPointerMove,Zp(B=>{const z=B.target,H=D.current!==B.clientX;if(B.currentTarget.contains(z)&&H){const X=B.clientX>D.current?"right":"left";V.current=X,D.current=B.clientX}}))})})})})})})});nB.displayName=Ci;var Yie="MenuGroup",Gk=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Je.div,{role:"group",...s,ref:t})});Gk.displayName=Yie;var Xie="MenuLabel",sB=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Je.div,{...s,ref:t})});sB.displayName=Xie;var u0="MenuItem",zM="menu.itemSelect",Tb=b.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...i}=e,a=b.useRef(null),o=pg(u0,e.__scopeMenu),l=qk(u0,e.__scopeMenu),c=Nt(t,a),d=b.useRef(!1),h=()=>{const m=a.current;if(!n&&m){const f=new CustomEvent(zM,{bubbles:!0,cancelable:!0});m.addEventListener(zM,v=>s==null?void 0:s(v),{once:!0}),uk(m,f),f.defaultPrevented?d.current=!1:o.onClose()}};return r.jsx(iB,{...i,ref:c,disabled:n,onClick:$e(e.onClick,h),onPointerDown:m=>{var f;(f=e.onPointerDown)==null||f.call(e,m),d.current=!0},onPointerUp:$e(e.onPointerUp,m=>{var f;d.current||(f=m.currentTarget)==null||f.click()}),onKeyDown:$e(e.onKeyDown,m=>{const f=l.searchRef.current!=="";n||f&&m.key===" "||B_.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Tb.displayName=u0;var iB=b.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:i,...a}=e,o=qk(u0,n),l=J8(n),c=b.useRef(null),d=Nt(t,c),[h,m]=b.useState(!1),[f,v]=b.useState("");return b.useEffect(()=>{const p=c.current;p&&v((p.textContent??"").trim())},[a.children]),r.jsx(Gp.ItemSlot,{scope:n,disabled:s,textValue:i??f,children:r.jsx(Vk,{asChild:!0,...l,focusable:!s,children:r.jsx(Je.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:d,onPointerMove:$e(e.onPointerMove,Zp(p=>{s?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$e(e.onPointerLeave,Zp(p=>o.onItemLeave(p))),onFocus:$e(e.onFocus,()=>m(!0)),onBlur:$e(e.onBlur,()=>m(!1))})})})}),Qie="MenuCheckboxItem",aB=b.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...i}=e;return r.jsx(uB,{scope:e.__scopeMenu,checked:n,children:r.jsx(Tb,{role:"menuitemcheckbox","aria-checked":h0(n)?"mixed":n,...i,ref:t,"data-state":Yk(n),onSelect:$e(i.onSelect,()=>s==null?void 0:s(h0(n)?!0:!n),{checkForDefaultPrevented:!1})})})});aB.displayName=Qie;var oB="MenuRadioGroup",[Jie,eae]=tu(oB,{value:void 0,onValueChange:()=>{}}),lB=b.forwardRef((e,t)=>{const{value:n,onValueChange:s,...i}=e,a=Lr(s);return r.jsx(Jie,{scope:e.__scopeMenu,value:n,onValueChange:a,children:r.jsx(Gk,{...i,ref:t})})});lB.displayName=oB;var cB="MenuRadioItem",dB=b.forwardRef((e,t)=>{const{value:n,...s}=e,i=eae(cB,e.__scopeMenu),a=n===i.value;return r.jsx(uB,{scope:e.__scopeMenu,checked:a,children:r.jsx(Tb,{role:"menuitemradio","aria-checked":a,...s,ref:t,"data-state":Yk(a),onSelect:$e(s.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});dB.displayName=cB;var Zk="MenuItemIndicator",[uB,tae]=tu(Zk,{checked:!1}),hB=b.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...i}=e,a=tae(Zk,n);return r.jsx(Mn,{present:s||h0(a.checked)||a.checked===!0,children:r.jsx(Je.span,{...i,ref:t,"data-state":Yk(a.checked)})})});hB.displayName=Zk;var rae="MenuSeparator",mB=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});mB.displayName=rae;var nae="MenuArrow",fB=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,i=kb(n);return r.jsx(Ek,{...i,...s,ref:t})});fB.displayName=nae;var sae="MenuSub",[jUe,pB]=tu(sae),qf="MenuSubTrigger",xB=b.forwardRef((e,t)=>{const n=ru(qf,e.__scopeMenu),s=pg(qf,e.__scopeMenu),i=pB(qf,e.__scopeMenu),a=qk(qf,e.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},h=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>h,[h]),b.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),r.jsx(Wk,{asChild:!0,...d,children:r.jsx(iB,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":yB(n.open),...e,ref:db(t,i.onTriggerChange),onClick:m=>{var f;(f=e.onClick)==null||f.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:$e(e.onPointerMove,Zp(m=>{a.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:$e(e.onPointerLeave,Zp(m=>{var v,p;h();const f=(v=n.content)==null?void 0:v.getBoundingClientRect();if(f){const x=(p=n.content)==null?void 0:p.dataset.side,y=x==="right",w=y?-5:5,j=f[y?"left":"right"],N=f[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:m.clientX+w,y:m.clientY},{x:j,y:f.top},{x:N,y:f.top},{x:N,y:f.bottom},{x:j,y:f.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(m),m.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:$e(e.onKeyDown,m=>{var v;const f=a.searchRef.current!=="";e.disabled||f&&m.key===" "||$ie[s.dir].includes(m.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),m.preventDefault())})})})});xB.displayName=qf;var gB="MenuSubContent",vB=b.forwardRef((e,t)=>{const n=tB(Ci,e.__scopeMenu),{forceMount:s=n.forceMount,...i}=e,a=ru(Ci,e.__scopeMenu),o=pg(Ci,e.__scopeMenu),l=pB(gB,e.__scopeMenu),c=b.useRef(null),d=Nt(t,c);return r.jsx(Gp.Provider,{scope:e.__scopeMenu,children:r.jsx(Mn,{present:s||a.open,children:r.jsx(Gp.Slot,{scope:e.__scopeMenu,children:r.jsx(Kk,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var m;o.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:$e(e.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:$e(e.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:$e(e.onKeyDown,h=>{var v;const m=h.currentTarget.contains(h.target),f=Fie[o.dir].includes(h.key);m&&f&&(a.onOpenChange(!1),(v=l.trigger)==null||v.focus(),h.preventDefault())})})})})})});vB.displayName=gB;function yB(e){return e?"open":"closed"}function h0(e){return e==="indeterminate"}function Yk(e){return h0(e)?"indeterminate":e?"checked":"unchecked"}function iae(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function aae(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function oae(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=aae(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function lae(e,t){const{x:n,y:s}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,h=t[o].y;c>s!=h>s&&n<(d-l)*(s-c)/(h-c)+l&&(i=!i)}return i}function cae(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return lae(n,t)}function Zp(e){return t=>t.pointerType==="mouse"?e(t):void 0}var dae=eB,uae=Wk,hae=rB,mae=nB,fae=Gk,pae=sB,xae=Tb,gae=aB,vae=lB,yae=dB,jae=hB,bae=mB,wae=fB,Nae=xB,Sae=vB,Xk="DropdownMenu",[_ae,bUe]=xn(Xk,[Q8]),js=Q8(),[Pae,jB]=_ae(Xk),bB=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=js(t),d=b.useRef(null),[h=!1,m]=Oi({prop:i,defaultProp:a,onChange:o});return r.jsx(Pae,{scope:t,triggerId:ia(),triggerRef:d,contentId:ia(),open:h,onOpenChange:m,onOpenToggle:b.useCallback(()=>m(f=>!f),[m]),modal:l,children:r.jsx(dae,{...c,open:h,onOpenChange:m,dir:s,modal:l,children:n})})};bB.displayName=Xk;var wB="DropdownMenuTrigger",NB=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...i}=e,a=jB(wB,n),o=js(n);return r.jsx(uae,{asChild:!0,...o,children:r.jsx(Je.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...i,ref:db(t,a.triggerRef),onPointerDown:$e(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:$e(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});NB.displayName=wB;var Cae="DropdownMenuPortal",SB=e=>{const{__scopeDropdownMenu:t,...n}=e,s=js(t);return r.jsx(hae,{...s,...n})};SB.displayName=Cae;var _B="DropdownMenuContent",PB=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=jB(_B,n),a=js(n),o=b.useRef(!1);return r.jsx(mae,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...s,ref:t,onCloseAutoFocus:$e(e.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:$e(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!i.modal||h)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});PB.displayName=_B;var kae="DropdownMenuGroup",Tae=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=js(n);return r.jsx(fae,{...i,...s,ref:t})});Tae.displayName=kae;var Aae="DropdownMenuLabel",CB=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=js(n);return r.jsx(pae,{...i,...s,ref:t})});CB.displayName=Aae;var Eae="DropdownMenuItem",kB=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=js(n);return r.jsx(xae,{...i,...s,ref:t})});kB.displayName=Eae;var Oae="DropdownMenuCheckboxItem",TB=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=js(n);return r.jsx(gae,{...i,...s,ref:t})});TB.displayName=Oae;var Mae="DropdownMenuRadioGroup",Dae=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=js(n);return r.jsx(vae,{...i,...s,ref:t})});Dae.displayName=Mae;var Iae="DropdownMenuRadioItem",AB=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=js(n);return r.jsx(yae,{...i,...s,ref:t})});AB.displayName=Iae;var Lae="DropdownMenuItemIndicator",EB=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=js(n);return r.jsx(jae,{...i,...s,ref:t})});EB.displayName=Lae;var Rae="DropdownMenuSeparator",OB=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=js(n);return r.jsx(bae,{...i,...s,ref:t})});OB.displayName=Rae;var $ae="DropdownMenuArrow",Fae=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=js(n);return r.jsx(wae,{...i,...s,ref:t})});Fae.displayName=$ae;var zae="DropdownMenuSubTrigger",MB=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=js(n);return r.jsx(Nae,{...i,...s,ref:t})});MB.displayName=zae;var Bae="DropdownMenuSubContent",DB=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=js(n);return r.jsx(Sae,{...i,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DB.displayName=Bae;var Vae=bB,Uae=NB,Wae=SB,IB=PB,LB=CB,RB=kB,$B=TB,FB=AB,zB=EB,BB=OB,VB=MB,UB=DB;const Qk=Vae,Jk=Uae,Hae=b.forwardRef(({className:e,inset:t,children:n,...s},i)=>r.jsxs(VB,{ref:i,className:Ve("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[n,r.jsx(Ite,{className:"ml-auto"})]}));Hae.displayName=VB.displayName;const qae=b.forwardRef(({className:e,...t},n)=>r.jsx(UB,{ref:n,className:Ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));qae.displayName=UB.displayName;const Ab=b.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(Wae,{children:r.jsx(IB,{ref:s,sideOffset:t,className:Ve("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Ab.displayName=IB.displayName;const wi=b.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(RB,{ref:s,className:Ve("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));wi.displayName=RB.displayName;const Kae=b.forwardRef(({className:e,children:t,checked:n,...s},i)=>r.jsxs($B,{ref:i,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(zB,{children:r.jsx(Ed,{className:"h-4 w-4"})})}),t]}));Kae.displayName=$B.displayName;const Gae=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(FB,{ref:s,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(zB,{children:r.jsx(gk,{className:"h-2 w-2 fill-current"})})}),t]}));Gae.displayName=FB.displayName;const Zae=b.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(LB,{ref:s,className:Ve("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Zae.displayName=LB.displayName;const Vh=b.forwardRef(({className:e,...t},n)=>r.jsx(BB,{ref:n,className:Ve("-mx-1 my-1 h-px bg-muted",e),...t}));Vh.displayName=BB.displayName;function Yae(){const[e,t]=b.useState("default"),[n,s]=b.useState(!1),[i,a]=b.useState([]),[o,l]=b.useState(0),{user:c}=Gt(),{toast:d}=ft();b.useEffect(()=>{"Notification"in window&&(s(!0),t(Notification.permission))},[]);const h=async()=>{if(!n)return d({title:"Not Supported",description:"Your browser doesn't support notifications",variant:"destructive"}),!1;try{const y=await Notification.requestPermission();return t(y),y==="granted"?(d({title:"Notifications Enabled",description:"You'll now receive notifications for important updates"}),!0):(d({title:"Notifications Disabled",description:"You can enable notifications in your browser settings",variant:"destructive"}),!1)}catch(y){return console.error("Error requesting notification permission:",y),!1}},m=(y,w)=>{if(e==="granted"&&n){const j=new Notification(y,{icon:"/favicon.ico",badge:"/favicon.ico",...w});return setTimeout(()=>j.close(),5e3),j}return null},f=async()=>{if(c!=null&&c.id)try{const y=await fetch(`/api/notifications/user/${c.id}`);if(y.ok){const w=await y.json(),j=i.map(C=>C.id),N=w.filter(C=>!j.includes(C.id)&&!C.isRead);N.length>0&&N.forEach(C=>{if(C.title.includes("Approved")||C.message.includes("approved")){try{const k=new Audio("/notification.mp3");k.volume=.8,k.play().then(()=>{console.log("Approval notification sound played"),setTimeout(()=>{const _=new Audio("/notification.mp3");_.volume=.5,_.play().catch(()=>{console.log("Could not play celebratory sound")})},500)}).catch(()=>{console.log("Could not play approval notification sound")})}catch(k){console.log("Error playing approval notification sound:",k)}d({title:" "+C.title,description:C.message,duration:8e3})}}),a(w),l(w.filter(C=>!C.isRead).length)}}catch(y){console.error("Error fetching notifications:",y)}},v=async y=>{try{(await fetch(`/api/notifications/${y}/read`,{method:"PUT"})).ok&&(a(j=>j.map(N=>N.id===y?{...N,isRead:!0}:N)),l(j=>Math.max(0,j-1)))}catch(w){console.error("Error marking notification as read:",w)}},p=async()=>{if(c!=null&&c.id)try{(await fetch(`/api/notifications/user/${c.id}/read-all`,{method:"PUT"})).ok&&(a(w=>w.map(j=>({...j,isRead:!0}))),l(0))}catch(y){console.error("Error marking all notifications as read:",y)}};return b.useEffect(()=>{if(!(c!=null&&c.id))return;f();const y=setInterval(f,3e4);return()=>clearInterval(y)},[c==null?void 0:c.id]),{isSupported:n,permission:e,notifications:i,unreadCount:o,requestPermission:h,showNotification:m,showNewNotification:y=>{var w;a(j=>[y,...j]),l(j=>j+1);try{const j=new Audio("/notification.mp3"),N=y.title.includes("Approved")||y.message.includes("approved")||y.data&&((w=JSON.parse(y.data))==null?void 0:w.playSound);j.volume=N?.8:.6,j.play().then(()=>{console.log("Notification sound played successfully"),N&&setTimeout(()=>{const C=new Audio("/notification.mp3");C.volume=.5,C.play().catch(()=>{console.log("Could not play celebratory sound")})},500)}).catch(()=>{console.log("Could not play notification sound")})}catch(j){console.log("Error playing notification sound:",j)}if(m(y.title,{body:y.message,tag:`notification-${y.id}`}),window.innerWidth>=768){const j=y.title.includes("Approved");d({title:y.title,description:y.message,duration:j?8e3:5e3})}},fetchNotifications:f,markAsRead:v,markAllAsRead:p}}function gr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function lc(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const WB=6048e5,Xae=864e5,Mv=43200,BM=1440;let Qae={};function xg(){return Qae}function Yp(e,t){var l,c,d,h;const n=xg(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,i=gr(e),a=i.getDay(),o=(a<s?7:0)+a-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function m0(e){return Yp(e,{weekStartsOn:1})}function HB(e){const t=gr(e),n=t.getFullYear(),s=lc(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=m0(s),a=lc(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=m0(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function VM(e){const t=gr(e);return t.setHours(0,0,0,0),t}function f0(e){const t=gr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Jae(e,t){const n=VM(e),s=VM(t),i=+n-f0(n),a=+s-f0(s);return Math.round((i-a)/Xae)}function eoe(e){const t=HB(e),n=lc(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),m0(n)}function by(e,t){const n=gr(e),s=gr(t),i=n.getTime()-s.getTime();return i<0?-1:i>0?1:i}function toe(e){return lc(e,Date.now())}function roe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function noe(e){if(!roe(e)&&typeof e!="number")return!1;const t=gr(e);return!isNaN(Number(t))}function soe(e,t){const n=gr(e),s=gr(t),i=n.getFullYear()-s.getFullYear(),a=n.getMonth()-s.getMonth();return i*12+a}function ioe(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function aoe(e,t){return+gr(e)-+gr(t)}function ooe(e){const t=gr(e);return t.setHours(23,59,59,999),t}function loe(e){const t=gr(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function coe(e){const t=gr(e);return+ooe(t)==+loe(t)}function doe(e,t){const n=gr(e),s=gr(t),i=by(n,s),a=Math.abs(soe(n,s));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let l=by(n,s)===-i;coe(gr(e))&&a===1&&by(e,s)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function uoe(e,t,n){const s=aoe(e,t)/1e3;return ioe(n==null?void 0:n.roundingMethod)(s)}function hoe(e){const t=gr(e),n=lc(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const moe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},foe=(e,t,n)=>{let s;const i=moe[e];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function c1(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const poe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xoe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},goe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},voe={date:c1({formats:poe,defaultWidth:"full"}),time:c1({formats:xoe,defaultWidth:"full"}),dateTime:c1({formats:goe,defaultWidth:"full"})},yoe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},joe=(e,t,n,s)=>yoe[e];function Nf(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const boe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},woe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Noe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Soe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_oe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Poe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Coe=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},koe={ordinalNumber:Coe,era:Nf({values:boe,defaultWidth:"wide"}),quarter:Nf({values:woe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Nf({values:Noe,defaultWidth:"wide"}),day:Nf({values:Soe,defaultWidth:"wide"}),dayPeriod:Nf({values:_oe,defaultWidth:"wide",formattingValues:Poe,defaultFormattingWidth:"wide"})};function Sf(e){return(t,n={})=>{const s=n.width,i=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const o=a[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Aoe(l,m=>m.test(o)):Toe(l,m=>m.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const h=t.slice(o.length);return{value:d,rest:h}}}function Toe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Aoe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Eoe(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const i=s[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const Ooe=/^(\d+)(th|st|nd|rd)?/i,Moe=/\d+/i,Doe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ioe={any:[/^b/i,/^(a|c)/i]},Loe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Roe={any:[/1/i,/2/i,/3/i,/4/i]},$oe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Foe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zoe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Boe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Voe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Uoe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Woe={ordinalNumber:Eoe({matchPattern:Ooe,parsePattern:Moe,valueCallback:e=>parseInt(e,10)}),era:Sf({matchPatterns:Doe,defaultMatchWidth:"wide",parsePatterns:Ioe,defaultParseWidth:"any"}),quarter:Sf({matchPatterns:Loe,defaultMatchWidth:"wide",parsePatterns:Roe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Sf({matchPatterns:$oe,defaultMatchWidth:"wide",parsePatterns:Foe,defaultParseWidth:"any"}),day:Sf({matchPatterns:zoe,defaultMatchWidth:"wide",parsePatterns:Boe,defaultParseWidth:"any"}),dayPeriod:Sf({matchPatterns:Voe,defaultMatchWidth:"any",parsePatterns:Uoe,defaultParseWidth:"any"})},qB={code:"en-US",formatDistance:foe,formatLong:voe,formatRelative:joe,localize:koe,match:Woe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Hoe(e){const t=gr(e);return Jae(t,hoe(t))+1}function qoe(e){const t=gr(e),n=+m0(t)-+eoe(t);return Math.round(n/WB)+1}function KB(e,t){var h,m,f,v;const n=gr(e),s=n.getFullYear(),i=xg(),a=(t==null?void 0:t.firstWeekContainsDate)??((m=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(f=i.locale)==null?void 0:f.options)==null?void 0:v.firstWeekContainsDate)??1,o=lc(e,0);o.setFullYear(s+1,0,a),o.setHours(0,0,0,0);const l=Yp(o,t),c=lc(e,0);c.setFullYear(s,0,a),c.setHours(0,0,0,0);const d=Yp(c,t);return n.getTime()>=l.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function Koe(e,t){var l,c,d,h;const n=xg(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,i=KB(e,t),a=lc(e,0);return a.setFullYear(i,0,s),a.setHours(0,0,0,0),Yp(a,t)}function Goe(e,t){const n=gr(e),s=+Yp(n,t)-+Koe(n,t);return Math.round(s/WB)+1}function cr(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const dl={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return cr(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):cr(n+1,2)},d(e,t){return cr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return cr(e.getHours()%12||12,t.length)},H(e,t){return cr(e.getHours(),t.length)},m(e,t){return cr(e.getMinutes(),t.length)},s(e,t){return cr(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return cr(i,t.length)}},wu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},UM={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return dl.y(e,t)},Y:function(e,t,n,s){const i=KB(e,s),a=i>0?i:1-i;if(t==="YY"){const o=a%100;return cr(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):cr(a,t.length)},R:function(e,t){const n=HB(e);return cr(n,t.length)},u:function(e,t){const n=e.getFullYear();return cr(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return cr(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return cr(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return dl.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return cr(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const i=Goe(e,s);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):cr(i,t.length)},I:function(e,t,n){const s=qoe(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):cr(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):dl.d(e,t)},D:function(e,t,n){const s=Hoe(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):cr(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return cr(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return cr(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),i=s===0?7:s;switch(t){case"i":return String(i);case"ii":return cr(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let i;switch(s===12?i=wu.noon:s===0?i=wu.midnight:i=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let i;switch(s>=17?i=wu.evening:s>=12?i=wu.afternoon:s>=4?i=wu.morning:i=wu.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return dl.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):dl.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):cr(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):cr(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):dl.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):dl.s(e,t)},S:function(e,t){return dl.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return HM(s);case"XXXX":case"XX":return Vc(s);case"XXXXX":case"XXX":default:return Vc(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return HM(s);case"xxxx":case"xx":return Vc(s);case"xxxxx":case"xxx":default:return Vc(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+WM(s,":");case"OOOO":default:return"GMT"+Vc(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+WM(s,":");case"zzzz":default:return"GMT"+Vc(s,":")}},t:function(e,t,n){const s=Math.trunc(e.getTime()/1e3);return cr(s,t.length)},T:function(e,t,n){const s=e.getTime();return cr(s,t.length)}};function WM(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=Math.trunc(s/60),a=s%60;return a===0?n+String(i):n+String(i)+t+cr(a,2)}function HM(e,t){return e%60===0?(e>0?"-":"+")+cr(Math.abs(e)/60,2):Vc(e,t)}function Vc(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=cr(Math.trunc(s/60),2),a=cr(s%60,2);return n+i+t+a}const qM=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},GB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Zoe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return qM(e,t);let a;switch(s){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",qM(s,t)).replace("{{time}}",GB(i,t))},Yoe={p:GB,P:Zoe},Xoe=/^D+$/,Qoe=/^Y+$/,Joe=["D","DD","YY","YYYY"];function ele(e){return Xoe.test(e)}function tle(e){return Qoe.test(e)}function rle(e,t,n){const s=nle(e,t,n);if(console.warn(s),Joe.includes(e))throw new RangeError(s)}function nle(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const sle=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ile=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ale=/^'([^]*?)'?$/,ole=/''/g,lle=/[a-zA-Z]/;function no(e,t,n){var h,m,f,v;const s=xg(),i=s.locale??qB,a=s.firstWeekContainsDate??((m=(h=s.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=s.weekStartsOn??((v=(f=s.locale)==null?void 0:f.options)==null?void 0:v.weekStartsOn)??0,l=gr(e);if(!noe(l))throw new RangeError("Invalid time value");let c=t.match(ile).map(p=>{const x=p[0];if(x==="p"||x==="P"){const y=Yoe[x];return y(p,i.formatLong)}return p}).join("").match(sle).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const x=p[0];if(x==="'")return{isToken:!1,value:cle(p)};if(UM[x])return{isToken:!0,value:p};if(x.match(lle))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:p}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(p=>{if(!p.isToken)return p.value;const x=p.value;(tle(x)||ele(x))&&rle(x,t,String(e));const y=UM[x[0]];return y(l,x,i.localize,d)}).join("")}function cle(e){const t=e.match(ale);return t?t[1].replace(ole,"'"):e}function dle(e,t,n){const s=xg(),i=(n==null?void 0:n.locale)??s.locale??qB,a=2520,o=by(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,d;o>0?(c=gr(t),d=gr(e)):(c=gr(e),d=gr(t));const h=uoe(d,c),m=(f0(d)-f0(c))/1e3,f=Math.round((h-m)/60);let v;if(f<2)return n!=null&&n.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,l):h<10?i.formatDistance("lessThanXSeconds",10,l):h<20?i.formatDistance("lessThanXSeconds",20,l):h<40?i.formatDistance("halfAMinute",0,l):h<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):f===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",f,l);if(f<45)return i.formatDistance("xMinutes",f,l);if(f<90)return i.formatDistance("aboutXHours",1,l);if(f<BM){const p=Math.round(f/60);return i.formatDistance("aboutXHours",p,l)}else{if(f<a)return i.formatDistance("xDays",1,l);if(f<Mv){const p=Math.round(f/BM);return i.formatDistance("xDays",p,l)}else if(f<Mv*2)return v=Math.round(f/Mv),i.formatDistance("aboutXMonths",v,l)}if(v=doe(d,c),v<12){const p=Math.round(f/Mv);return i.formatDistance("xMonths",p,l)}else{const p=v%12,x=Math.trunc(v/12);return p<3?i.formatDistance("aboutXYears",x,l):p<9?i.formatDistance("overXYears",x,l):i.formatDistance("almostXYears",x+1,l)}}function ule(e,t){return dle(e,toe(e),t)}function Eb(){const[e,t]=b.useState(!1),{notifications:n,unreadCount:s,permission:i,requestPermission:a,markAsRead:o,markAllAsRead:l}=Yae(),c=(m,f)=>{f||o(m)},d=m=>{switch(m){case"order":return"";case"delivery":return"";case"payment":return"";case"product":return"";case"store":return"";case"system":return"";default:return""}},h=m=>{switch(m){case"order":return"bg-blue-100 text-blue-800";case"delivery":return"bg-green-100 text-green-800";case"payment":return"bg-yellow-100 text-yellow-800";case"product":return"bg-purple-100 text-purple-800";case"store":return"bg-orange-100 text-orange-800";case"system":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}};return r.jsxs("div",{className:"relative",children:[i==="default"&&r.jsx($,{variant:"outline",size:"sm",onClick:a,className:"mr-2 text-xs",children:"Enable Notifications"}),r.jsxs(Qk,{open:e,onOpenChange:t,children:[r.jsx(Jk,{asChild:!0,children:r.jsxs($,{variant:"ghost",size:"sm",className:"relative",children:[r.jsx(Qt,{className:"h-5 w-5"}),s>0&&r.jsx(ue,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs flex items-center justify-center",children:s>99?"99+":s})]})}),r.jsxs(Ab,{align:"end",className:"w-80",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[r.jsx("h3",{className:"font-semibold",children:"Notifications"}),s>0&&r.jsxs($,{variant:"ghost",size:"sm",onClick:l,className:"text-xs",children:[r.jsx(Dte,{className:"h-4 w-4 mr-1"}),"Mark all read"]})]}),r.jsx(Vh,{}),r.jsx(Fk,{className:"h-96",children:n.length===0?r.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications yet"}):n.map(m=>r.jsx(wi,{className:`p-3 cursor-pointer border-l-4 ${m.isRead?"border-transparent bg-background":"border-primary bg-primary/5"}`,onClick:()=>c(m.id,m.isRead),children:r.jsxs("div",{className:"flex items-start space-x-3 w-full",children:[r.jsx("div",{className:`p-1 rounded-full text-sm ${h(m.type)}`,children:d(m.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:`text-sm font-medium truncate ${m.isRead?"text-muted-foreground":"text-foreground"}`,children:m.title}),!m.isRead&&r.jsx("div",{className:"h-2 w-2 bg-primary rounded-full ml-2 flex-shrink-0"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:m.message}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(()=>{try{if(!m.createdAt)return"Just now";const f=new Date(m.createdAt);return isNaN(f.getTime())?"Recently":ule(f,{addSuffix:!0})}catch{return"Recently"}})()})]})]})},m.id))}),n.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(Vh,{}),r.jsx("div",{className:"p-2",children:r.jsx($,{variant:"ghost",className:"w-full text-xs",children:"View all notifications"})})]})]})]})]})}function hle(){const[,e]=Jr(),[t,n]=b.useState(!1),{user:s,logout:i}=Gt(),{cartItems:a}=wc(),{mode:o,setMode:l}=ua(),c=on(),{toast:d}=ft(),h=(a==null?void 0:a.length)||0,{data:m=[]}=Le({queryKey:[`/api/notifications/user/${s==null?void 0:s.id}`],enabled:!!(s!=null&&s.id),refetchInterval:3e4}),f=b.useMemo(()=>m.filter(P=>!P.isRead).length,[m]),v=pt({mutationFn:async P=>{const k=await fetch(`/api/notifications/${P}/read`,{method:"PUT",credentials:"include"});if(!k.ok)throw new Error("Failed to mark as read");return k.json()},onSuccess:()=>{c.invalidateQueries({queryKey:[`/api/notifications/user/${s==null?void 0:s.id}`]}),d({title:"Notification marked as read",description:"The notification has been marked as read successfully."})}}),p=pt({mutationFn:async()=>{const P=await fetch(`/api/notifications/user/${s==null?void 0:s.id}/read-all`,{method:"PUT",credentials:"include"});if(!P.ok)throw new Error("Failed to mark all as read");return P.json()},onSuccess:()=>{c.invalidateQueries({queryKey:[`/api/notifications/user/${s==null?void 0:s.id}`]}),d({title:"All notifications marked as read",description:"All notifications have been marked as read successfully."})}}),x=P=>{v.mutate(P)},y=()=>{p.mutate()},w=P=>{const k=new Date,_=new Date(P),O=Math.floor((k.getTime()-_.getTime())/1e3);return O<60?"Just now":O<3600?`${Math.floor(O/60)}m ago`:O<86400?`${Math.floor(O/3600)}h ago`:`${Math.floor(O/86400)}d ago`},j=P=>{switch(P){case"order":return"";case"delivery":return"";case"payment":return"";case"product":return"";case"store":return"";case"system":return"";default:return""}},N=P=>{switch(P){case"order":return"bg-blue-100 text-blue-800";case"delivery":return"bg-green-100 text-green-800";case"payment":return"bg-yellow-100 text-yellow-800";case"product":return"bg-purple-100 text-purple-800";case"store":return"bg-orange-100 text-orange-800";case"system":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}},C=()=>{i(),e("/")};return r.jsxs("nav",{className:"bg-primary text-white shadow-lg sticky top-0 z-40",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-center h-12 sm:h-14",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ae,{href:"/",className:"flex items-center space-x-1",children:o==="food"?r.jsx("img",{src:"/assets/icon1.png",alt:"Food Delivery",className:"h-8 w-auto rounded-lg"}):r.jsx("img",{src:"/assets/icon2.png",alt:"Siraha Bazaar",className:"h-8 w-auto rounded-lg"})}),(s==null?void 0:s.role)!=="shopkeeper"&&r.jsx("div",{className:"relative bg-white/10 backdrop-blur-sm rounded-lg p-1 border border-white/20",children:r.jsxs("div",{className:"flex",children:[r.jsxs("button",{onClick:()=>l("shopping"),className:`flex items-center space-x-1 px-3 py-1.5 rounded-md text-xs font-medium transition-all duration-200 ${o==="shopping"?"bg-white text-primary shadow-sm":"text-white/80 hover:text-white hover:bg-white/10"}`,children:[r.jsx(Vo,{className:"h-3.5 w-3.5"}),r.jsx("span",{children:"Shop"})]}),r.jsxs("button",{onClick:()=>l("food"),className:`flex items-center space-x-1 px-3 py-1.5 rounded-md text-xs font-medium transition-all duration-200 ${o==="food"?"bg-white text-primary shadow-sm":"text-white/80 hover:text-white hover:bg-white/10"}`,children:[r.jsx(Rh,{className:"h-3.5 w-3.5"}),r.jsx("span",{children:"Food"})]})]})})]}),r.jsx("div",{className:"hidden md:flex items-center space-x-6 flex-1 justify-center",children:(s==null?void 0:s.role)==="shopkeeper"?r.jsxs(r.Fragment,{children:[r.jsx(gse,{}),r.jsxs(Ae,{href:"/seller/store",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(ar,{className:"h-4 w-4"}),r.jsx("span",{children:"Store"})]}),r.jsxs(Ae,{href:"/seller/orders",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(_n,{className:"h-4 w-4"}),r.jsx("span",{children:"Orders"})]}),r.jsxs(Ae,{href:"/seller/inventory",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Ye,{className:"h-4 w-4"}),r.jsx("span",{children:"Inventory"})]}),r.jsxs(Ae,{href:"/seller/promotions",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Wp,{className:"h-4 w-4"}),r.jsx("span",{children:"Promotions"})]}),r.jsxs(Ae,{href:"/account",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsx("span",{children:"Account"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{href:"/",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(si,{className:"h-4 w-4"}),r.jsx("span",{children:"Home"})]}),o==="shopping"?r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{href:"/products",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Ye,{className:"h-4 w-4"}),r.jsx("span",{children:"Products"})]}),r.jsxs(Ae,{href:"/stores",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(ar,{className:"h-4 w-4"}),r.jsx("span",{children:"Stores"})]}),r.jsxs(Ae,{href:"/store-maps",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Re,{className:"h-4 w-4"}),r.jsx("span",{children:"Store Map"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{href:"/food-categories",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Rh,{className:"h-4 w-4"}),r.jsx("span",{children:"Menu"})]}),r.jsxs(Ae,{href:"/quick-bites",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Pa,{className:"h-4 w-4"}),r.jsx("span",{children:"Quick Bites"})]}),r.jsxs(Ae,{href:"/restaurants",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(ar,{className:"h-4 w-4"}),r.jsx("span",{children:"Restaurants"})]}),r.jsxs(Ae,{href:"/restaurant-maps",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Re,{className:"h-4 w-4"}),r.jsx("span",{children:"Restaurant Map"})]})]}),s&&r.jsxs(Ae,{href:"/customer-dashboard",className:"flex items-center space-x-1 hover:text-accent transition-colors",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsx("span",{children:"Account"})]})]})}),r.jsx("div",{className:"hidden md:flex max-w-sm mx-4",children:(s==null?void 0:s.role)==="shopkeeper"?r.jsx(e1,{placeholder:"Search your products, orders..."}):r.jsx(e1,{placeholder:o==="shopping"?"Search products and stores...":"Search food and restaurants..."})}),r.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[(s==null?void 0:s.role)!=="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{href:"/cart",className:"relative hover:text-accent transition-colors p-2",children:[r.jsx(_n,{className:"h-5 w-5"}),h>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:h})]}),r.jsx(Ae,{href:"/wishlist",className:"hover:text-accent transition-colors p-2",children:r.jsx(Ma,{className:"h-5 w-5"})})]}),s?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Eb,{}),r.jsxs(Qk,{children:[r.jsx(Jk,{asChild:!0,children:r.jsx($,{variant:"ghost",className:"text-white hover:text-accent p-2",children:r.jsx(Wr,{className:"h-5 w-5"})})}),r.jsxs(Ab,{align:"end",className:"w-56",children:[r.jsx(wi,{asChild:!0,children:r.jsxs(Ae,{href:"/customer-dashboard",className:"cursor-pointer",children:[r.jsx(Wr,{className:"h-4 w-4 mr-2"}),"My Account"]})}),s.role==="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsx(Vh,{}),r.jsx(wi,{asChild:!0,children:r.jsxs(Ae,{href:"/seller/dashboard",className:"cursor-pointer",children:[r.jsx(ar,{className:"h-4 w-4 mr-2"}),"Seller Hub"]})}),r.jsx(wi,{asChild:!0,children:r.jsxs(Ae,{href:"/seller/inventory",className:"cursor-pointer",children:[r.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Inventory"]})}),r.jsx(wi,{asChild:!0,children:r.jsxs(Ae,{href:"/seller/promotions",className:"cursor-pointer",children:[r.jsx(Wp,{className:"h-4 w-4 mr-2"}),"Promotions"]})})]})]})]}),r.jsx($,{variant:"ghost",className:"text-white hover:text-accent p-2",onClick:C,children:r.jsx(Vp,{className:"h-5 w-5"})})]}):r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ae,{href:"/login",children:r.jsx($,{variant:"ghost",className:"text-white hover:text-accent",children:"Login"})}),r.jsx(Ae,{href:"/register",children:r.jsx($,{variant:"outline",className:"text-white border-white hover:bg-white hover:text-primary",children:"Sign Up"})})]})]}),r.jsxs("div",{className:"md:hidden flex items-center space-x-1",children:[s&&r.jsxs($,{variant:"ghost",size:"sm",className:"relative text-white hover:text-accent p-1",onClick:()=>n(!t),children:[r.jsx(Qt,{className:"h-5 w-5"}),f>0&&r.jsx(ue,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 rounded-full p-0 text-xs flex items-center justify-center min-w-0",children:f>99?"99+":f})]}),(s==null?void 0:s.role)!=="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsxs(Ae,{href:"/cart",className:"relative hover:text-accent transition-colors p-1",children:[r.jsx(_n,{className:"h-5 w-5"}),h>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:h})]}),r.jsx(Ae,{href:"/wishlist",className:"hover:text-accent transition-colors p-1",children:r.jsx(Ma,{className:"h-5 w-5"})})]}),s?r.jsxs(r.Fragment,{children:[s.role==="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsx(Ae,{href:"/seller/dashboard",className:"hover:text-accent transition-colors p-1",children:r.jsx(si,{className:"h-5 w-5"})}),r.jsx(Ae,{href:"/seller/inventory",className:"hover:text-accent transition-colors p-1",children:r.jsx(Ye,{className:"h-5 w-5"})}),r.jsx(Ae,{href:"/seller/orders",className:"hover:text-accent transition-colors p-1",children:r.jsx(_n,{className:"h-5 w-5"})})]}),s.role!=="shopkeeper"&&r.jsx(Ae,{href:"/customer-dashboard",className:"hover:text-accent transition-colors p-1",children:r.jsx(Wr,{className:"h-5 w-5"})}),r.jsx($,{variant:"ghost",className:"text-white hover:text-accent p-1",onClick:C,children:r.jsx(Vp,{className:"h-5 w-5"})})]}):r.jsx(Ae,{href:"/login",className:"hover:text-accent transition-colors p-1",children:r.jsx(Wr,{className:"h-5 w-5"})})]})]}),r.jsx("div",{className:"md:hidden pb-3",children:r.jsx(e1,{placeholder:"Search products, stores..."})})]}),t&&s&&r.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>n(!1)}),r.jsx("div",{className:"absolute top-0 right-0 h-full w-full max-w-sm bg-white shadow-xl",children:r.jsxs(K,{className:"h-full rounded-none border-0",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b bg-primary text-white",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Notifications"}),f>0&&r.jsxs(ue,{variant:"secondary",className:"bg-white/20 text-white text-xs",children:[f," new"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[f>0&&r.jsx($,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-white/20 text-xs px-2 py-1",onClick:y,disabled:p.isPending,children:"Mark all read"}),r.jsx($,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-white/20 p-1",onClick:()=>n(!1),children:r.jsx(Fr,{className:"h-5 w-5"})})]})]}),r.jsx(G,{className:"p-0 h-[calc(100%-3.5rem)] sm:h-[calc(100%-4rem)]",children:r.jsx(Fk,{className:"h-full",children:m.length===0?r.jsxs("div",{className:"text-center py-6 sm:py-8 text-muted-foreground px-4",children:[r.jsx(Qt,{className:"h-10 w-10 sm:h-12 sm:w-12 mx-auto mb-3 sm:mb-4 opacity-50"}),r.jsx("p",{className:"text-sm sm:text-base",children:"No notifications yet"})]}):r.jsx("div",{className:"divide-y",children:m.map(P=>r.jsxs("div",{className:`relative group hover:bg-gray-50 transition-colors cursor-pointer ${P.isRead?"":"bg-blue-50 border-l-4 border-l-primary"}`,onClick:()=>{P.isRead||x(P.id)},children:[r.jsx("div",{className:"p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[r.jsx("div",{className:"text-base sm:text-lg flex-shrink-0 mt-0.5",children:j(P.type)}),r.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[r.jsxs("div",{className:"flex items-start justify-between mb-1 gap-2",children:[r.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900 leading-tight line-clamp-2",children:P.title}),r.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 flex-shrink-0",children:[r.jsx(ue,{className:`text-xs px-1.5 py-0.5 ${N(P.type)}`,children:P.type}),!P.isRead&&r.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-primary rounded-full flex-shrink-0 animate-pulse"})]})]}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-2 leading-relaxed word-wrap break-words overflow-wrap-anywhere",children:P.message}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs text-gray-400",children:w(P.createdAt)}),!P.isRead&&r.jsx($,{variant:"ghost",size:"sm",className:"text-xs h-6 px-2 text-primary hover:bg-primary hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:k=>{k.preventDefault(),k.stopPropagation(),x(P.id)},disabled:v.isPending,children:"Mark as read"})]})]})]})}),!P.isRead&&r.jsx($,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 h-6 w-6 p-0 text-primary hover:bg-primary hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:k=>{k.preventDefault(),k.stopPropagation(),x(P.id)},disabled:v.isPending,title:"Mark as read",children:""})]},P.id))})})})]})})]})]})}function mle(){const[e,t]=b.useState(!1),[n,s]=Jr(),{user:i,logout:a}=Gt(),o=()=>{a(),s("/")},l=[{label:"Dashboard",href:"/delivery-partner/dashboard",icon:C_},{label:"Notifications",href:"/delivery-partner/notifications",icon:Qt,badge:3},{label:"Active Deliveries",href:"/delivery-partner/test",icon:Ye,badge:2},{label:"Live Tracking",href:"/delivery-partner/tracking",icon:_t}];return r.jsx("nav",{className:"bg-blue-600 text-white shadow-lg sticky top-0 z-40",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[r.jsx("div",{className:"flex items-center space-x-2 sm:space-x-4",children:r.jsxs(Ae,{href:"/delivery-partner/dashboard",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"p-1.5 sm:p-2 bg-white/10 rounded-lg",children:r.jsx(Ct,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),r.jsxs("div",{className:"hidden xs:block",children:[r.jsx("span",{className:"text-sm sm:text-lg font-bold",children:"Siraha Delivery"}),r.jsx("div",{className:"text-[10px] sm:text-xs text-blue-100",children:"Partner Portal"})]})]})}),r.jsx("div",{className:"hidden lg:flex items-center space-x-4 xl:space-x-6",children:l.map(c=>{const d=c.icon,h=n===c.href;return r.jsxs(Ae,{href:c.href,className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors relative ${h?"bg-white/20 text-white":"text-blue-100 hover:text-white hover:bg-white/10"}`,children:[r.jsx(d,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:c.label}),c.badge&&r.jsx(ue,{variant:"destructive",className:"h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:c.badge})]},c.href)})}),r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[r.jsxs("div",{className:"hidden sm:flex lg:flex items-center space-x-2 bg-green-500/20 px-2 sm:px-3 py-1 rounded-full",children:[r.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-400 rounded-full animate-pulse"}),r.jsx("span",{className:"text-[10px] sm:text-xs font-medium",children:"Online"})]}),r.jsx("div",{className:"sm:hidden flex items-center",children:r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})}),r.jsxs("div",{className:"hidden md:flex items-center space-x-1 sm:space-x-2 bg-white/10 px-2 sm:px-3 py-1 rounded-lg",children:[r.jsx(Qr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-300"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"425"})]}),r.jsx("div",{className:"md:hidden flex items-center bg-white/10 px-2 py-1 rounded",children:r.jsx("span",{className:"text-xs font-medium",children:"425"})}),r.jsxs(Qk,{children:[r.jsx(Jk,{asChild:!0,children:r.jsxs($,{variant:"ghost",className:"flex items-center space-x-1 sm:space-x-2 hover:bg-white/10 px-2 sm:px-3",children:[r.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(Wr,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),r.jsx("span",{className:"hidden lg:block text-sm font-medium truncate max-w-24",children:(i==null?void 0:i.fullName)||"Partner"})]})}),r.jsxs(Ab,{align:"end",className:"w-48 sm:w-56",children:[r.jsxs("div",{className:"px-3 py-2 border-b",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:i==null?void 0:i.fullName}),r.jsx("p",{className:"text-xs text-muted-foreground truncate",children:i==null?void 0:i.email}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-xs text-green-600",children:"Online & Available"})]})]}),r.jsxs(wi,{onClick:()=>s("/delivery-partner/dashboard"),children:[r.jsx(C_,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),r.jsxs(wi,{onClick:()=>s("/delivery-partner/notifications"),children:[r.jsx(Qt,{className:"mr-2 h-4 w-4"}),"Notifications",r.jsx(ue,{variant:"secondary",className:"ml-auto",children:"3"})]}),r.jsxs(wi,{onClick:()=>s("/delivery-partner/tracking"),children:[r.jsx(_t,{className:"mr-2 h-4 w-4"}),"Live Tracking"]}),r.jsx(Vh,{}),r.jsxs(wi,{children:[r.jsx(Id,{className:"mr-2 h-4 w-4"}),"Settings"]}),r.jsxs(wi,{children:[r.jsx(Re,{className:"mr-2 h-4 w-4"}),"Update Location"]}),r.jsx(Vh,{}),r.jsxs(wi,{onClick:o,children:[r.jsx(Vp,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]}),r.jsx("button",{onClick:()=>t(!e),className:"lg:hidden p-1.5 sm:p-2 rounded-lg hover:bg-white/10",children:e?r.jsx(Fr,{className:"h-4 w-4 sm:h-5 sm:w-5"}):r.jsx(zte,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),e&&r.jsx("div",{className:"lg:hidden border-t border-white/20",children:r.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white/10 rounded-lg mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm font-medium",children:"Online"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Qr,{className:"h-4 w-4 text-green-300"}),r.jsx("span",{className:"text-sm font-medium",children:"425 today"})]})]}),l.map(c=>{const d=c.icon,h=n===c.href;return r.jsxs(Ae,{href:c.href,className:`flex items-center justify-between px-3 py-3 rounded-lg transition-colors ${h?"bg-white/20 text-white":"text-blue-100 hover:text-white hover:bg-white/10"}`,onClick:()=>t(!1),children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(d,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:c.label})]}),c.badge&&r.jsx(ue,{variant:"destructive",className:"h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:c.badge})]},c.href)}),r.jsx("div",{className:"border-t border-white/20 pt-3 mt-3",children:r.jsxs("button",{onClick:o,className:"flex items-center space-x-3 px-3 py-3 rounded-lg text-blue-100 hover:text-white hover:bg-white/10 w-full",children:[r.jsx(Vp,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:"Sign out"})]})})]})})]})})}function fle(){const{user:e}=Gt();return(e==null?void 0:e.role)==="delivery_partner"?r.jsx(mle,{}):r.jsx(hle,{})}function el(){const{user:e,login:t,logout:n,register:s,isLoading:i,refreshUserData:a}=Gt();return{user:e,login:t,logout:n,register:s,isLoading:i,refreshUserData:a,isAuthenticated:!!e}}function ple(){const[e]=Jr(),{user:t}=Gt(),{mode:n}=ua(),{user:s}=el();if((s==null?void 0:s.role)==="delivery_partner")return null;const i=[{href:"/seller/dashboard",icon:si,label:"Dashboard",active:e.startsWith("/seller/dashboard")},{href:"/seller/store",icon:ar,label:"Store",active:e.startsWith("/seller/store")},{href:"/seller/orders",icon:_n,label:"Orders",active:e.startsWith("/seller/orders")},{href:"/seller/inventory",icon:Ye,label:"Inventory",active:e.startsWith("/seller/inventory")},{href:"/account",icon:Wr,label:"Account",active:e.startsWith("/account")}],a=[{href:"/",icon:si,label:"Home",active:e==="/"},...n==="shopping"?[{href:"/products",icon:Ye,label:"Products",active:e.startsWith("/products")},{href:"/stores",icon:ar,label:"Stores",active:e.startsWith("/stores")},{href:"/store-maps",icon:Re,label:"Map",active:e==="/store-maps"}]:[{href:"/food-categories",icon:Rh,label:"Menu",active:e.startsWith("/food-categories")||e.startsWith("/categories")},{href:"/restaurants",icon:Pa,label:"Restaurants",active:e.startsWith("/restaurants")},{href:"/restaurant-maps",icon:Re,label:"Map",active:e==="/restaurant-maps"}],{href:t?"/account":"/login",icon:Wr,label:"Account",active:e.startsWith("/account")||e.startsWith("/customer-dashboard")}],o=(t==null?void 0:t.role)==="shopkeeper"?i:a;return r.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 z-50 md:hidden safe-area-inset-bottom",children:r.jsx("div",{className:"flex items-center justify-around h-16 px-4 pb-safe",children:o.map(l=>{const c=l.icon;return r.jsxs(Ae,{href:l.href,className:Ve("flex flex-col items-center justify-center space-y-1 py-2 px-1 sm:px-3 rounded-lg transition-colors min-w-0 flex-1",l.active?"text-primary bg-primary/10":"text-gray-600 dark:text-gray-400 hover:text-primary hover:bg-primary/5"),children:[r.jsx(c,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{className:"text-xs font-medium truncate",children:l.label})]},l.href)})})})}function xle(){const[e,t]=b.useState(!1);return r.jsxs("footer",{className:"bg-gray-800 text-white mt-8 mb-20",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-3 py-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx("img",{src:"/assets/icon2.png",alt:"Siraha Bazaar",className:"h-6 w-6 object-contain rounded-lg"})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("a",{href:"/SirahaBazaar.apk",download:"SirahaBazaar.apk",className:"inline-flex items-center space-x-1 bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs font-medium transition-colors",children:[r.jsx(Qd,{className:"h-3 w-3"}),r.jsx("span",{className:"hidden xs:inline",children:"App"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(fM,{className:"h-3.5 w-3.5"})}),r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(pM,{className:"h-3.5 w-3.5"})})]}),r.jsx("button",{onClick:()=>t(!e),className:"flex items-center text-gray-300 hover:text-white transition-colors",children:e?r.jsx(xk,{className:"h-4 w-4"}):r.jsx(mb,{className:"h-4 w-4"})})]})]}),r.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:r.jsxs("div",{className:"flex flex-col xs:flex-row items-center justify-between space-y-1 xs:space-y-0 text-xs text-gray-400",children:[r.jsx("span",{children:" 2024 Siraha Bazaar"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Md,{className:"h-3 w-3"}),r.jsx("span",{className:"truncate",children:"sirahabazzar@gmail.com"})]})]})})]}),e&&r.jsx("div",{className:"border-t border-gray-700 bg-gray-900",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-3 py-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2 text-white text-sm",children:"Links"}),r.jsxs("ul",{className:"space-y-1 text-gray-300",children:[r.jsx("li",{children:r.jsx(Ae,{href:"/",className:"hover:text-white transition-colors",children:"Home"})}),r.jsx("li",{children:r.jsx(Ae,{href:"/products",className:"hover:text-white transition-colors",children:"Products"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2 text-white text-sm",children:"Shop"}),r.jsxs("ul",{className:"space-y-1 text-gray-300",children:[r.jsx("li",{children:r.jsx(Ae,{href:"/products?category=1",className:"hover:text-white transition-colors",children:"Groceries"})}),r.jsx("li",{children:r.jsx(Ae,{href:"/products?category=2",className:"hover:text-white transition-colors",children:"Clothing"})}),r.jsx("li",{children:r.jsx(Ae,{href:"/products?category=3",className:"hover:text-white transition-colors",children:"Electronics"})}),r.jsx("li",{children:r.jsx(Ae,{href:"/products?category=4",className:"hover:text-white transition-colors",children:"Kitchen"})})]})]})]}),r.jsx("div",{className:"mt-4 pt-3 border-t border-gray-700",children:r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-300",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Vt,{className:"h-3 w-3"}),r.jsx("span",{children:"+9779805916598"})]}),r.jsx("span",{children:"Siraha, Nepal"})]}),r.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(fM,{className:"h-4 w-4"})}),r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(Yte,{className:"h-4 w-4"})}),r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(pM,{className:"h-4 w-4"})}),r.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:r.jsx(tre,{className:"h-4 w-4"})})]})]})})]})})]})}const gle=()=>{};var KM={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},vle=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[s++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=e[n++],o=e[n++],l=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;t[s++]=String.fromCharCode(55296+(c>>10)),t[s++]=String.fromCharCode(56320+(c&1023))}else{const a=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join("")},YB={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const a=e[i],o=i+1<e.length,l=o?e[i+1]:0,c=i+2<e.length,d=c?e[i+2]:0,h=a>>2,m=(a&3)<<4|l>>4;let f=(l&15)<<2|d>>6,v=d&63;c||(v=64,o||(f=64)),s.push(n[h],n[m],n[f],n[v])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ZB(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):vle(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const a=n[e.charAt(i++)],l=i<e.length?n[e.charAt(i)]:0;++i;const d=i<e.length?n[e.charAt(i)]:64;++i;const m=i<e.length?n[e.charAt(i)]:64;if(++i,a==null||l==null||d==null||m==null)throw new yle;const f=a<<2|l>>4;if(s.push(f),d!==64){const v=l<<4&240|d>>2;if(s.push(v),m!==64){const p=d<<6&192|m;s.push(p)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class yle extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jle=function(e){const t=ZB(e);return YB.encodeByteArray(t,!0)},XB=function(e){return jle(e).replace(/\./g,"")},ble=function(e){try{return YB.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wle(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nle=()=>wle().__FIREBASE_DEFAULTS__,Sle=()=>{if(typeof process>"u"||typeof KM>"u")return;const e=KM.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},_le=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&ble(e[1]);return t&&JSON.parse(t)},Ple=()=>{try{return gle()||Nle()||Sle()||_le()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},QB=()=>{var e;return(e=Ple())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cle{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}function JB(){try{return typeof indexedDB=="object"}catch{return!1}}function eV(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;t(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){t(n)}})}function kle(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tle="FirebaseError";class Im extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=Tle,Object.setPrototypeOf(this,Im.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ob.prototype.create)}}class Ob{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,a=this.errors[t],o=a?Ale(a,s):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Im(i,l,s)}}function Ale(e,t){return e.replace(Ele,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const Ele=/\{\$([^}]+)}/g;function V_(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const a=e[i],o=t[i];if(GM(a)&&GM(o)){if(!V_(a,o))return!1}else if(a!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function GM(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(e){return e&&e._delegate?e._delegate:e}class cc{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ole{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new Cle;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Dle(t))try{this.getOrInitializeService({instanceIdentifier:Uc})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});s.resolve(a)}catch{}}}}clearInstance(t=Uc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Uc){return this.instances.has(t)}getOptions(t=Uc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);s===l&&o.resolve(i)}return i}onInit(t,n){var s;const i=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;a.add(t),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&t(o,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Mle(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Uc){return this.component?this.component.multipleInstances?t:Uc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mle(e){return e===Uc?void 0:e}function Dle(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ile{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Ole(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(kr||(kr={}));const Lle={debug:kr.DEBUG,verbose:kr.VERBOSE,info:kr.INFO,warn:kr.WARN,error:kr.ERROR,silent:kr.SILENT},Rle=kr.INFO,$le={[kr.DEBUG]:"log",[kr.VERBOSE]:"log",[kr.INFO]:"info",[kr.WARN]:"warn",[kr.ERROR]:"error"},Fle=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=$le[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class zle{constructor(t){this.name=t,this._logLevel=Rle,this._logHandler=Fle,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Lle[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kr.DEBUG,...t),this._logHandler(this,kr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kr.VERBOSE,...t),this._logHandler(this,kr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kr.INFO,...t),this._logHandler(this,kr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kr.WARN,...t),this._logHandler(this,kr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kr.ERROR,...t),this._logHandler(this,kr.ERROR,...t)}}const Ble=(e,t)=>t.some(n=>e instanceof n);let ZM,YM;function Vle(){return ZM||(ZM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ule(){return YM||(YM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tV=new WeakMap,U_=new WeakMap,rV=new WeakMap,d1=new WeakMap,tT=new WeakMap;function Wle(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",a),e.removeEventListener("error",o)},a=()=>{n(Ao(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",a),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&tV.set(n,e)}).catch(()=>{}),tT.set(t,e),t}function Hle(e){if(U_.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",o),e.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",a),e.addEventListener("error",o),e.addEventListener("abort",o)});U_.set(e,t)}let W_={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return U_.get(e);if(t==="objectStoreNames")return e.objectStoreNames||rV.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ao(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function qle(e){W_=e(W_)}function Kle(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(u1(this),t,...n);return rV.set(s,t.sort?t.sort():[t]),Ao(s)}:Ule().includes(e)?function(...t){return e.apply(u1(this),t),Ao(tV.get(this))}:function(...t){return Ao(e.apply(u1(this),t))}}function Gle(e){return typeof e=="function"?Kle(e):(e instanceof IDBTransaction&&Hle(e),Ble(e,Vle())?new Proxy(e,W_):e)}function Ao(e){if(e instanceof IDBRequest)return Wle(e);if(d1.has(e))return d1.get(e);const t=Gle(e);return t!==e&&(d1.set(e,t),tT.set(t,e)),t}const u1=e=>tT.get(e);function Mb(e,t,{blocked:n,upgrade:s,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),l=Ao(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Ao(o.result),c.oldVersion,c.newVersion,Ao(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}function h1(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",s=>t(s.oldVersion,s)),Ao(n).then(()=>{})}const Zle=["get","getKey","getAll","getAllKeys","count"],Yle=["put","add","delete","clear"],m1=new Map;function XM(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(m1.get(t))return m1.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=Yle.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||Zle.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return m1.set(t,a),a}qle(e=>({...e,get:(t,n,s)=>XM(t,n)||e.get(t,n,s),has:(t,n)=>!!XM(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xle{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Qle(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Qle(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const H_="@firebase/app",QM="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new zle("@firebase/app"),Jle="@firebase/app-compat",ece="@firebase/analytics-compat",tce="@firebase/analytics",rce="@firebase/app-check-compat",nce="@firebase/app-check",sce="@firebase/auth",ice="@firebase/auth-compat",ace="@firebase/database",oce="@firebase/data-connect",lce="@firebase/database-compat",cce="@firebase/functions",dce="@firebase/functions-compat",uce="@firebase/installations",hce="@firebase/installations-compat",mce="@firebase/messaging",fce="@firebase/messaging-compat",pce="@firebase/performance",xce="@firebase/performance-compat",gce="@firebase/remote-config",vce="@firebase/remote-config-compat",yce="@firebase/storage",jce="@firebase/storage-compat",bce="@firebase/firestore",wce="@firebase/ai",Nce="@firebase/firestore-compat",Sce="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="[DEFAULT]",_ce={[H_]:"fire-core",[Jle]:"fire-core-compat",[tce]:"fire-analytics",[ece]:"fire-analytics-compat",[nce]:"fire-app-check",[rce]:"fire-app-check-compat",[sce]:"fire-auth",[ice]:"fire-auth-compat",[ace]:"fire-rtdb",[oce]:"fire-data-connect",[lce]:"fire-rtdb-compat",[cce]:"fire-fn",[dce]:"fire-fn-compat",[uce]:"fire-iid",[hce]:"fire-iid-compat",[mce]:"fire-fcm",[fce]:"fire-fcm-compat",[pce]:"fire-perf",[xce]:"fire-perf-compat",[gce]:"fire-rc",[vce]:"fire-rc-compat",[yce]:"fire-gcs",[jce]:"fire-gcs-compat",[bce]:"fire-fst",[Nce]:"fire-fst-compat",[wce]:"fire-vertex","fire-js":"fire-js",[Sce]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=new Map,Pce=new Map,K_=new Map;function JM(e,t){try{e.container.addComponent(t)}catch(n){Ho.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Rd(e){const t=e.name;if(K_.has(t))return Ho.debug(`There were multiple attempts to register component ${t}.`),!1;K_.set(t,e);for(const n of p0.values())JM(n,e);for(const n of Pce.values())JM(n,e);return!0}function rT(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cce={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kl=new Ob("app","Firebase",Cce);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kce{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new cc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Kl.create("app-deleted",{appName:this._name})}}function nT(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:q_,automaticDataCollectionEnabled:!0},t),i=s.name;if(typeof i!="string"||!i)throw Kl.create("bad-app-name",{appName:String(i)});if(n||(n=QB()),!n)throw Kl.create("no-options");const a=p0.get(i);if(a){if(V_(n,a.options)&&V_(s,a.config))return a;throw Kl.create("duplicate-app",{appName:i})}const o=new Ile(i);for(const c of K_.values())o.addComponent(c);const l=new kce(n,s,o);return p0.set(i,l),l}function Tce(e=q_){const t=p0.get(e);if(!t&&e===q_&&QB())return nT();if(!t)throw Kl.create("no-app",{appName:e});return t}function Gl(e,t,n){var s;let i=(s=_ce[e])!==null&&s!==void 0?s:e;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const l=[`Unable to register library "${i}" with version "${t}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ho.warn(l.join(" "));return}Rd(new cc(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ace="firebase-heartbeat-database",Ece=1,Xp="firebase-heartbeat-store";let f1=null;function nV(){return f1||(f1=Mb(Ace,Ece,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Xp)}catch(n){console.warn(n)}}}}).catch(e=>{throw Kl.create("idb-open",{originalErrorMessage:e.message})})),f1}async function Oce(e){try{const n=(await nV()).transaction(Xp),s=await n.objectStore(Xp).get(sV(e));return await n.done,s}catch(t){if(t instanceof Im)Ho.warn(t.message);else{const n=Kl.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ho.warn(n.message)}}}async function eD(e,t){try{const s=(await nV()).transaction(Xp,"readwrite");await s.objectStore(Xp).put(t,sV(e)),await s.done}catch(n){if(n instanceof Im)Ho.warn(n.message);else{const s=Kl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ho.warn(s.message)}}}function sV(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mce=1024,Dce=30;class Ice{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Rce(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=tD();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>Dce){const o=$ce(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ho.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tD(),{heartbeatsToSend:s,unsentEntries:i}=Lce(this._heartbeatsCache.heartbeats),a=XB(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ho.warn(n),""}}}function tD(){return new Date().toISOString().substring(0,10)}function Lce(e,t=Mce){const n=[];let s=e.slice();for(const i of e){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),rD(n)>t){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rD(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Rce{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JB()?eV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Oce(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return eD(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return eD(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function rD(e){return XB(JSON.stringify({version:2,heartbeats:e})).length}function $ce(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fce(e){Rd(new cc("platform-logger",t=>new Xle(t),"PRIVATE")),Rd(new cc("heartbeat",t=>new Ice(t),"PRIVATE")),Gl(H_,QM,e),Gl(H_,QM,"esm2017"),Gl("fire-js","")}Fce("");var zce="firebase",Bce="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gl(zce,Bce,"app");const iV="@firebase/installations",sT="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=1e4,oV=`w:${sT}`,lV="FIS_v2",Vce="https://firebaseinstallations.googleapis.com/v1",Uce=60*60*1e3,Wce="installations",Hce="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qce={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$d=new Ob(Wce,Hce,qce);function cV(e){return e instanceof Im&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV({projectId:e}){return`${Vce}/projects/${e}/installations`}function uV(e){return{token:e.token,requestStatus:2,expiresIn:Gce(e.expiresIn),creationTime:Date.now()}}async function hV(e,t){const s=(await t.json()).error;return $d.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function mV({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Kce(e,{refreshToken:t}){const n=mV(e);return n.append("Authorization",Zce(t)),n}async function fV(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Gce(e){return Number(e.replace("s","000"))}function Zce(e){return`${lV} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yce({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const s=dV(e),i=mV(e),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={fid:n,authVersion:lV,appId:e.appId,sdkVersion:oV},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await fV(()=>fetch(s,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:uV(d.authToken)}}else throw await hV("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xce(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qce=/^[cdef][\w-]{21}$/,G_="";function Jce(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=ede(e);return Qce.test(n)?n:G_}catch{return G_}}function ede(e){return Xce(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=new Map;function gV(e,t){const n=Db(e);vV(n,t),tde(n,t)}function vV(e,t){const n=xV.get(e);if(n)for(const s of n)s(t)}function tde(e,t){const n=rde();n&&n.postMessage({key:e,fid:t}),nde()}let Jc=null;function rde(){return!Jc&&"BroadcastChannel"in self&&(Jc=new BroadcastChannel("[Firebase] FID Change"),Jc.onmessage=e=>{vV(e.data.key,e.data.fid)}),Jc}function nde(){xV.size===0&&Jc&&(Jc.close(),Jc=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sde="firebase-installations-database",ide=1,Fd="firebase-installations-store";let p1=null;function iT(){return p1||(p1=Mb(sde,ide,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Fd)}}})),p1}async function x0(e,t){const n=Db(e),i=(await iT()).transaction(Fd,"readwrite"),a=i.objectStore(Fd),o=await a.get(n);return await a.put(t,n),await i.done,(!o||o.fid!==t.fid)&&gV(e,t.fid),t}async function yV(e){const t=Db(e),s=(await iT()).transaction(Fd,"readwrite");await s.objectStore(Fd).delete(t),await s.done}async function Ib(e,t){const n=Db(e),i=(await iT()).transaction(Fd,"readwrite"),a=i.objectStore(Fd),o=await a.get(n),l=t(o);return l===void 0?await a.delete(n):await a.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&gV(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(e){let t;const n=await Ib(e.appConfig,s=>{const i=ade(s),a=ode(e,i);return t=a.registrationPromise,a.installationEntry});return n.fid===G_?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function ade(e){const t=e||{fid:Jce(),registrationStatus:0};return jV(t)}function ode(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject($d.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=lde(e,n);return{installationEntry:n,registrationPromise:s}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:cde(e)}:{installationEntry:t}}async function lde(e,t){try{const n=await Yce(e,t);return x0(e.appConfig,n)}catch(n){throw cV(n)&&n.customData.serverCode===409?await yV(e.appConfig):await x0(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function cde(e){let t=await nD(e.appConfig);for(;t.registrationStatus===1;)await pV(100),t=await nD(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await aT(e);return s||n}return t}function nD(e){return Ib(e,t=>{if(!t)throw $d.create("installation-not-found");return jV(t)})}function jV(e){return dde(e)?{fid:e.fid,registrationStatus:0}:e}function dde(e){return e.registrationStatus===1&&e.registrationTime+aV<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ude({appConfig:e,heartbeatServiceProvider:t},n){const s=hde(e,n),i=Kce(e,n),a=t.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={installation:{sdkVersion:oV,appId:e.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await fV(()=>fetch(s,l));if(c.ok){const d=await c.json();return uV(d)}else throw await hV("Generate Auth Token",c)}function hde(e,{fid:t}){return`${dV(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(e,t=!1){let n;const s=await Ib(e.appConfig,a=>{if(!bV(a))throw $d.create("not-registered");const o=a.authToken;if(!t&&pde(o))return a;if(o.requestStatus===1)return n=mde(e,t),a;{if(!navigator.onLine)throw $d.create("app-offline");const l=gde(a);return n=fde(e,l),l}});return n?await n:s.authToken}async function mde(e,t){let n=await sD(e.appConfig);for(;n.authToken.requestStatus===1;)await pV(100),n=await sD(e.appConfig);const s=n.authToken;return s.requestStatus===0?oT(e,t):s}function sD(e){return Ib(e,t=>{if(!bV(t))throw $d.create("not-registered");const n=t.authToken;return vde(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function fde(e,t){try{const n=await ude(e,t),s=Object.assign(Object.assign({},t),{authToken:n});return await x0(e.appConfig,s),n}catch(n){if(cV(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await yV(e.appConfig);else{const s=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await x0(e.appConfig,s)}throw n}}function bV(e){return e!==void 0&&e.registrationStatus===2}function pde(e){return e.requestStatus===2&&!xde(e)}function xde(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Uce}function gde(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function vde(e){return e.requestStatus===1&&e.requestTime+aV<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yde(e){const t=e,{installationEntry:n,registrationPromise:s}=await aT(t);return s?s.catch(console.error):oT(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jde(e,t=!1){const n=e;return await bde(n),(await oT(n,t)).token}async function bde(e){const{registrationPromise:t}=await aT(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wde(e){if(!e||!e.options)throw x1("App Configuration");if(!e.name)throw x1("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw x1(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function x1(e){return $d.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="installations",Nde="installations-internal",Sde=e=>{const t=e.getProvider("app").getImmediate(),n=wde(t),s=rT(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},_de=e=>{const t=e.getProvider("app").getImmediate(),n=rT(t,wV).getImmediate();return{getId:()=>yde(n),getToken:i=>jde(n,i)}};function Pde(){Rd(new cc(wV,Sde,"PUBLIC")),Rd(new cc(Nde,_de,"PRIVATE"))}Pde();Gl(iV,sT);Gl(iV,sT,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cde="/firebase-messaging-sw.js",kde="/firebase-cloud-messaging-push-scope",NV="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Tde="https://fcmregistrations.googleapis.com/v1",SV="google.c.a.c_id",Ade="google.c.a.c_l",Ede="google.c.a.ts",Ode="google.c.a.e",iD=1e4;var aD;(function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(aD||(aD={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Qp;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(Qp||(Qp={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mde(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(n),i=new Uint8Array(s.length);for(let a=0;a<s.length;++a)i[a]=s.charCodeAt(a);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="fcm_token_details_db",Dde=5,oD="fcm_token_object_Store";async function Ide(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(g1))return null;let t=null;return(await Mb(g1,Dde,{upgrade:async(s,i,a,o)=>{var l;if(i<2||!s.objectStoreNames.contains(oD))return;const c=o.objectStore(oD),d=await c.index("fcmSenderId").get(e);if(await c.clear(),!!d){if(i===2){const h=d;if(!h.auth||!h.p256dh||!h.endpoint)return;t={token:h.fcmToken,createTime:(l=h.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:ho(h.vapidKey)}}}else if(i===3){const h=d;t={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ho(h.auth),p256dh:ho(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ho(h.vapidKey)}}}else if(i===4){const h=d;t={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ho(h.auth),p256dh:ho(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ho(h.vapidKey)}}}}}})).close(),await h1(g1),await h1("fcm_vapid_details_db"),await h1("undefined"),Lde(t)?t:null}function Lde(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rde="firebase-messaging-database",$de=1,Jp="firebase-messaging-store";let v1=null;function _V(){return v1||(v1=Mb(Rde,$de,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Jp)}}})),v1}async function Fde(e){const t=PV(e),s=await(await _V()).transaction(Jp).objectStore(Jp).get(t);if(s)return s;{const i=await Ide(e.appConfig.senderId);if(i)return await lT(e,i),i}}async function lT(e,t){const n=PV(e),i=(await _V()).transaction(Jp,"readwrite");return await i.objectStore(Jp).put(t,n),await i.done,t}function PV({appConfig:e}){return e.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zde={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},es=new Ob("messaging","Messaging",zde);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bde(e,t){const n=await dT(e),s=CV(t),i={method:"POST",headers:n,body:JSON.stringify(s)};let a;try{a=await(await fetch(cT(e.appConfig),i)).json()}catch(o){throw es.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(a.error){const o=a.error.message;throw es.create("token-subscribe-failed",{errorInfo:o})}if(!a.token)throw es.create("token-subscribe-no-token");return a.token}async function Vde(e,t){const n=await dT(e),s=CV(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(s)};let a;try{a=await(await fetch(`${cT(e.appConfig)}/${t.token}`,i)).json()}catch(o){throw es.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(a.error){const o=a.error.message;throw es.create("token-update-failed",{errorInfo:o})}if(!a.token)throw es.create("token-update-no-token");return a.token}async function Ude(e,t){const s={method:"DELETE",headers:await dT(e)};try{const a=await(await fetch(`${cT(e.appConfig)}/${t}`,s)).json();if(a.error){const o=a.error.message;throw es.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw es.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function cT({projectId:e}){return`${Tde}/projects/${e}/registrations`}async function dT({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function CV({p256dh:e,auth:t,endpoint:n,vapidKey:s}){const i={web:{endpoint:n,auth:t,p256dh:e}};return s!==NV&&(i.web.applicationPubKey=s),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wde=7*24*60*60*1e3;async function Hde(e){const t=await Kde(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:ho(t.getKey("auth")),p256dh:ho(t.getKey("p256dh"))},s=await Fde(e.firebaseDependencies);if(s){if(Gde(s.subscriptionOptions,n))return Date.now()>=s.createTime+Wde?qde(e,{token:s.token,createTime:Date.now(),subscriptionOptions:n}):s.token;try{await Ude(e.firebaseDependencies,s.token)}catch(i){console.warn(i)}return lD(e.firebaseDependencies,n)}else return lD(e.firebaseDependencies,n)}async function qde(e,t){try{const n=await Vde(e.firebaseDependencies,t),s=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await lT(e.firebaseDependencies,s),n}catch(n){throw n}}async function lD(e,t){const s={token:await Bde(e,t),createTime:Date.now(),subscriptionOptions:t};return await lT(e,s),s.token}async function Kde(e,t){const n=await e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mde(t)})}function Gde(e,t){const n=t.vapidKey===e.vapidKey,s=t.endpoint===e.endpoint,i=t.auth===e.auth,a=t.p256dh===e.p256dh;return n&&s&&i&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return Zde(t,e),Yde(t,e),Xde(t,e),t}function Zde(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const s=t.notification.body;s&&(e.notification.body=s);const i=t.notification.image;i&&(e.notification.image=i);const a=t.notification.icon;a&&(e.notification.icon=a)}function Yde(e,t){t.data&&(e.data=t.data)}function Xde(e,t){var n,s,i,a,o;if(!t.fcmOptions&&!(!((n=t.notification)===null||n===void 0)&&n.click_action))return;e.fcmOptions={};const l=(i=(s=t.fcmOptions)===null||s===void 0?void 0:s.link)!==null&&i!==void 0?i:(a=t.notification)===null||a===void 0?void 0:a.click_action;l&&(e.fcmOptions.link=l);const c=(o=t.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qde(e){return typeof e=="object"&&!!e&&SV in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jde(e){if(!e||!e.options)throw y1("App Configuration Object");if(!e.name)throw y1("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const s of t)if(!n[s])throw y1(s);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function y1(e){return es.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eue{constructor(t,n,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=Jde(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:s}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tue(e){try{e.swRegistration=await navigator.serviceWorker.register(Cde,{scope:kde}),e.swRegistration.update().catch(()=>{}),await rue(e.swRegistration)}catch(t){throw es.create("failed-service-worker-registration",{browserErrorMessage:t==null?void 0:t.message})}}async function rue(e){return new Promise((t,n)=>{const s=setTimeout(()=>n(new Error(`Service worker not registered after ${iD} ms`)),iD),i=e.installing||e.waiting;e.active?(clearTimeout(s),t()):i?i.onstatechange=a=>{var o;((o=a.target)===null||o===void 0?void 0:o.state)==="activated"&&(i.onstatechange=null,clearTimeout(s),t())}:(clearTimeout(s),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nue(e,t){if(!t&&!e.swRegistration&&await tue(e),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw es.create("invalid-sw-registration");e.swRegistration=t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sue(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=NV)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kV(e,t){if(!navigator)throw es.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw es.create("permission-blocked");return await sue(e,t==null?void 0:t.vapidKey),await nue(e,t==null?void 0:t.serviceWorkerRegistration),Hde(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iue(e,t,n){const s=aue(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:n[SV],message_name:n[Ade],message_time:n[Ede],message_device_time:Math.floor(Date.now()/1e3)})}function aue(e){switch(e){case Qp.NOTIFICATION_CLICKED:return"notification_open";case Qp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oue(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===Qp.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(cD(n)):e.onMessageHandler.next(cD(n)));const s=n.data;Qde(s)&&s[Ode]==="1"&&await iue(e,n.messageType,s)}const dD="@firebase/messaging",uD="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lue=e=>{const t=new eue(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>oue(t,n)),t},cue=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:s=>kV(t,s)}};function due(){Rd(new cc("messaging",lue,"PUBLIC")),Rd(new cc("messaging-internal",cue,"PRIVATE")),Gl(dD,uD),Gl(dD,uD,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uue(){try{await eV()}catch{return!1}return typeof window<"u"&&JB()&&kle()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hue(e,t){if(!navigator)throw es.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(e=Tce()){return uue().then(t=>{if(!t)throw es.create("unsupported-browser")},t=>{throw es.create("indexed-db-unsupported")}),rT(eT(e),"messaging").getImmediate()}async function uT(e,t){return e=eT(e),kV(e,t)}function mue(e,t){return e=eT(e),hue(e,t)}due();const fue=()=>({apiKey:"AIzaSyBbHSV2EJZ9BPE1C1ZC4_ZNYwFYJIR9VSo",authDomain:"myweb-1c1f37b3.firebaseapp.com",projectId:"myweb-1c1f37b3",storageBucket:"myweb-1c1f37b3.firebasestorage.app",messagingSenderId:"774950702828",appId:"1:774950702828:web:09c2dfc1198d45244a9fc9",measurementId:"G-XH9SP47FYT"}),pue=()=>"BBeY7MuZB7850MAibtxV4fJxcKYAF3oQxNBB60l1FzHK63IjkTSI9ZFDPW1hmHnKSJPckGFM5gu7JlaCGavnwqA",xue=e=>{const t=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"];for(const n of t)if(!e[n])return console.error(`Firebase config missing required field: ${n}`),!1;return!0},Nu=fue(),Kf=pue();let Dv=null,Ml=null;const gg=async()=>{try{if(console.log(" Initializing Firebase Cloud Messaging..."),console.log(" Firebase Config:",{apiKey:Nu.apiKey?`${Nu.apiKey.substring(0,20)}...`:"missing",projectId:Nu.projectId,messagingSenderId:Nu.messagingSenderId}),console.log(" VAPID Key:",Kf?`${Kf.substring(0,20)}...`:"missing"),!xue(Nu))throw new Error("Invalid Firebase configuration");if(Dv||(Dv=nT(Nu),console.log(" Firebase App initialized")),!Ml&&"serviceWorker"in navigator){if(Ml=TV(Dv),console.log(" Firebase Messaging initialized"),await navigator.serviceWorker.getRegistration("/firebase-messaging-sw.js"))console.log(" Firebase service worker already registered");else{console.log(" Registering Firebase service worker...");try{const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log(" Firebase service worker registered:",t.scope)}catch(t){throw console.error(" Service worker registration failed:",t),new Error(`Service worker registration failed: ${(t==null?void 0:t.message)||"Unknown error"}`)}}if(console.log(" Checking notification permission:",Notification.permission),Notification.permission==="granted")try{console.log(" Permission granted, generating FCM token...");const t=await uT(Ml,{vapidKey:Kf});t&&(console.log(" FCM Token automatically generated on initialization!"),console.log(" Firebase Cloud Messaging Token:"),console.log(" FCM Token:",t),console.log(" Token Length:",t.length,"characters"),console.log(" Copy this token for testing:",t),console.log(" Token (abbreviated):",t.substring(0,20)+"..."+t.substring(t.length-20)))}catch(t){console.error(" Error generating FCM token:",t)}else console.log(" FCM Token will be generated when permission is granted"),console.log(" Call requestNotificationPermission() to get the token")}return{app:Dv,messaging:Ml}}catch(e){throw console.error(" Error initializing Firebase:",e),e}},Lb=async()=>{try{return Notification.permission==="granted"?!0:await Notification.requestPermission()==="granted"}catch(e){return console.error("Error requesting notification permission:",e),!1}},hT=async()=>{try{if(console.log(" Starting FCM token generation process..."),Notification.permission!=="granted")throw console.log(" Notification permission not granted. Current status:",Notification.permission),new Error("Notification permission is required to generate FCM token. Please grant permission first.");if(await gg(),!Ml)throw new Error("Firebase messaging not initialized properly");console.log(" Attempting to get FCM token with VAPID key...");const e=await uT(Ml,{vapidKey:Kf});if(!e)throw new Error("Failed to generate FCM token. This may be due to blocked notifications or browser restrictions.");return console.log(" Firebase Cloud Messaging Token:"),console.log(" FCM Token:",e),console.log(" Token Length:",e.length,"characters"),console.log(" Copy this token for testing:",e),console.log(" Token (abbreviated):",e.substring(0,20)+"..."+e.substring(e.length-20)),e}catch(e){throw console.error(" Error getting Firebase token:",e),(e==null?void 0:e.code)==="messaging/permission-blocked"?new Error("Push notifications are blocked in your browser. Please enable notifications and try again."):(e==null?void 0:e.code)==="messaging/token-subscribe-failed"?new Error("Failed to subscribe to FCM. This may be due to network issues or Firebase configuration problems."):(e==null?void 0:e.code)==="messaging/invalid-vapid-key"?new Error("Invalid VAPID key configuration. Please check Firebase project settings."):e}},AV=async(e,t)=>{try{const n=await fetch("/api/device-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,token:t,deviceType:"web"})});if(!n.ok)throw new Error(`Failed to save token: ${n.statusText}`);return!0}catch(n){throw console.error("Error saving device token:",n),n}},EV=e=>{Ml&&mue(Ml,t=>{var n,s,i;console.log("Foreground message received:",t);try{const{playSound:a}=require("../lib/soundEffects");a.notification()}catch(a){console.log("Sound effect not available:",a)}if(Notification.permission==="granted"){const a=new Notification(((n=t.notification)==null?void 0:n.title)||"Siraha Bazaar",{body:(s=t.notification)==null?void 0:s.body,icon:"/favicon.ico",badge:"/favicon.ico",data:t.data,tag:((i=t.data)==null?void 0:i.type)||"general",requireInteraction:!1,silent:!1,vibrate:[200,100,200]});a.onclick=()=>{window.focus(),a.close(),e&&e(t)},setTimeout(()=>a.close(),5e3)}e&&e(t)})},mT=async e=>{try{const{AndroidBridge:t}=await $p(async()=>{const{AndroidBridge:a}=await Promise.resolve().then(()=>vue);return{AndroidBridge:a}},void 0);if(t.isAndroidApp()){t.logMessage("Setting up notifications for Android app");const a=await t.registerForNotifications(e);return a&&t.showToast("Push notifications enabled!"),a}if(!await Lb())throw new Error("Notification permission not granted");await gg();const s=await hT();if(!s)throw new Error("Failed to get Firebase token");if(await AV(e,s),t.setFirebaseToken(s),EV(a=>{console.log("Test notification received:",a)}),!(await fetch("/api/test-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,title:"Push Notifications Enabled!",message:"You will now receive notifications from Siraha Bazaar",type:"setup_test"})})).ok)throw new Error("Failed to send test notification");return!0}catch(t){throw console.error("Error testing notification setup:",t),t}},fT=()=>"Notification"in window&&"serviceWorker"in navigator,g0=Object.freeze(Object.defineProperty({__proto__:null,getFirebaseToken:hT,initializeFirebaseNotifications:gg,requestNotificationPermission:Lb,saveDeviceToken:AV,setupForegroundMessageListener:EV,supportsNotifications:fT,testNotificationSetup:mT},Symbol.toStringTag,{value:"Module"}));function gue({className:e}){const{user:t}=el(),[n,s]=b.useState(!1),[i,a]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState(null);b.useEffect(()=>{const f=(t==null?void 0:t.id)&&fT()&&!i&&!localStorage.getItem("notification-bar-dismissed")&&Notification.permission!=="granted"&&Notification.permission!=="denied";s(f)},[t,i]);const h=async()=>{if(t!=null&&t.id){l(!0),d(null);try{await mT(t.id),s(!1),localStorage.setItem("notification-setup-complete","true")}catch(f){console.error("Failed to enable notifications:",f),d(f instanceof Error?f.message:"Failed to enable notifications")}finally{l(!1)}}},m=()=>{a(!0),s(!1),localStorage.setItem("notification-bar-dismissed","true")};return n?r.jsx("div",{className:`fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm ${e||""}`,children:r.jsx(K,{className:"border-blue-200 bg-blue-50",children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-100",children:r.jsx(Qt,{className:"h-4 w-4 text-blue-600"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Stay Updated!"}),r.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Enable notifications to get instant updates on your orders and deliveries."}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[r.jsxs($,{size:"sm",onClick:h,disabled:o,className:"text-xs h-7 bg-blue-600 hover:bg-blue-700",children:[r.jsx(Jd,{className:"h-3 w-3 mr-1"}),o?"Setting up...":"Enable"]}),r.jsx($,{size:"sm",variant:"ghost",onClick:m,className:"text-xs h-7 text-blue-600 hover:bg-blue-100",children:"Not now"})]}),c&&r.jsx("p",{className:"text-xs text-red-600 mt-2",children:c})]}),r.jsx("button",{onClick:m,className:"flex-shrink-0 text-blue-400 hover:text-blue-600",children:r.jsx(Fr,{className:"h-4 w-4"})})]})})})}):null}const DE=class DE{static initialize(){return this.isAndroid=!!(window.AndroidBridge&&window.AndroidBridge.isAndroidApp),this.isAndroid?(console.log(" Android WebView detected - Bridge initialized"),this.logMessage("Android Bridge initialized successfully")):console.log(" Running in web browser - Android Bridge not available"),this.isAndroid}static isAndroidApp(){return this.isAndroid}static setFirebaseToken(t){this.isAndroid&&window.AndroidBridge?(window.AndroidBridge.setFirebaseToken(t),console.log(" Firebase token sent to Android app")):console.log(" Firebase token registered for web app")}static getFirebaseToken(){return this.isAndroid&&window.AndroidBridge?window.AndroidBridge.getFirebaseToken():""}static showToast(t){this.isAndroid&&window.AndroidBridge?window.AndroidBridge.showToast(t):console.log("Toast:",t)}static logMessage(t){this.isAndroid&&window.AndroidBridge&&window.AndroidBridge.logMessage(t)}static handleNotificationReceived(t){if(this.isAndroid)switch(this.logMessage(`Notification received: ${JSON.stringify(t)}`),t.type){case"order_update":window.location.href=`/orders/${t.orderId}`;break;case"delivery_assignment":window.location.href="/delivery-partner/dashboard";break;case"promotion":window.location.href="/special-offers";break;default:window.location.href="/"}}static setupNotificationHandlers(){this.isAndroid&&(window.addEventListener("message",t=>{t.data&&t.data.type==="notification"&&this.handleNotificationReceived(t.data)}),this.logMessage("Notification handlers setup complete"))}static async registerForNotifications(t){try{if(this.isAndroid)return this.showToast("Push notifications enabled for Android app"),!0;{const{testNotificationSetup:n}=await $p(async()=>{const{testNotificationSetup:s}=await Promise.resolve().then(()=>g0);return{testNotificationSetup:s}},void 0);return await n(t)}}catch(n){return console.error("Failed to register for notifications:",n),!1}}static getNotificationPreferences(){return this.isAndroid?{platform:"android",available:!0}:{platform:"web",available:"Notification"in window&&"serviceWorker"in navigator}}};DE.isAndroid=!1;let ex=DE;ex.initialize();const vue=Object.freeze(Object.defineProperty({__proto__:null,AndroidBridge:ex},Symbol.toStringTag,{value:"Module"}));class oo extends te.Component{constructor(t){super(t),this.resetError=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Error caught by boundary:",t,n),this.setState({error:t,errorInfo:n})}render(){if(this.state.hasError){if(this.props.fallback){const t=this.props.fallback;return r.jsx(t,{error:this.state.error,resetError:this.resetError})}return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(K,{className:"w-full max-w-md",children:r.jsxs(G,{className:"pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Nr,{className:"h-8 w-8 text-red-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Something went wrong"}),r.jsx("p",{className:"text-sm text-gray-600",children:"An unexpected error occurred"})]})]}),this.state.error&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 rounded-md",children:r.jsx("p",{className:"text-sm text-red-800 font-mono",children:this.state.error.message})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($,{onClick:this.resetError,className:"flex-1",children:[r.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Try Again"]}),r.jsx($,{variant:"outline",onClick:()=>window.location.reload(),className:"flex-1",children:"Reload Page"})]})]})})})}return this.props.children}}const yue=Tm("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ii=b.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,role:"alert",className:Ve(yue({variant:t}),e),...n}));ii.displayName="Alert";const jue=b.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:Ve("mb-1 font-medium leading-none tracking-tight",e),...t}));jue.displayName="AlertTitle";const ai=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ve("text-sm [&_p]:leading-relaxed",e),...t}));ai.displayName="AlertDescription";const pT=e=>e==="food"?"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400&h=300&fit=crop&auto=format":"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop&auto=format",bue=(e,t)=>e.images&&e.images.length>0&&e.images[0]&&e.images[0].trim()!==""?e.images[0]:e.imageUrl&&e.imageUrl.trim()!==""&&e.imageUrl!=="undefined"?e.imageUrl:pT(e.productType),wue=(e,t)=>e.images&&e.images.length>0?e.images.filter(n=>n&&n.trim()!==""):e.imageUrl&&e.imageUrl.trim()!==""?[e.imageUrl]:[pT(e.productType)],OV=(e,t)=>pT(e.productType);function Uh({product:e}){const{addToCart:t}=wc(),{toggleWishlist:n,isInWishlist:s}=bb(),{user:i}=Gt(),{toast:a}=ft(),o=d=>{d.preventDefault(),d.stopPropagation(),t(e.id,1),a({title:"Added to cart",description:`${e.name} has been added to your cart.`})},l=async d=>{if(d.preventDefault(),d.stopPropagation(),!i){a({title:"Login required",description:"Please login to add items to your wishlist.",variant:"destructive"});return}const h=s(e.id);await n(e.id),a({title:h?"Removed from wishlist":"Added to wishlist",description:`${e.name} has been ${h?"removed from":"added to"} your wishlist.`})},c=e.originalPrice?Math.round((Number(e.originalPrice)-Number(e.price))/Number(e.originalPrice)*100):0;return r.jsx(Ae,{href:`/products/${e.id}`,children:r.jsxs("div",{className:"product-card overflow-hidden",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:bue(e),alt:e.name,className:"w-full h-24 sm:h-32 md:h-40 object-cover",onError:d=>{const h=d.target;h.src.includes("unsplash")||(h.src=OV(e))},loading:"lazy"}),c>0&&r.jsxs(ue,{className:"absolute top-2 left-2 bg-red-500 text-white",children:[c,"% OFF"]})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("h3",{className:"font-medium text-foreground text-[10px] mb-1 line-clamp-2",children:e.name}),e.storeName&&r.jsxs("div",{className:"text-[9px] text-muted-foreground mb-1 flex items-center justify-between",children:[r.jsx("span",{className:"truncate",children:e.storeName}),e.storeDistance!==void 0&&r.jsxs("div",{className:"flex items-center gap-1 text-[8px] text-blue-600",children:[r.jsx(Re,{className:"h-2 w-2"}),r.jsxs("span",{children:[e.storeDistance.toFixed(1),"km"]})]})]}),e.deliveryTime&&r.jsxs("div",{className:"text-[8px] text-muted-foreground mb-1 flex items-center gap-1",children:[r.jsx(jt,{className:"h-2 w-2"}),r.jsx("span",{children:e.deliveryTime})]}),e.rating&&parseFloat(e.rating)>0&&r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx(Bt,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-[10px] text-gray-600",children:parseFloat(e.rating).toFixed(1)})]}),r.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[r.jsxs("span",{className:"text-xs font-bold text-foreground",children:["",Number(e.price).toLocaleString()]}),e.originalPrice&&r.jsxs("span",{className:"text-[10px] text-muted-foreground line-through",children:["",Number(e.originalPrice).toLocaleString()]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx($,{onClick:o,className:"flex-1 btn-secondary text-xs py-1 h-8",size:"sm",children:r.jsx(_n,{className:"h-3 w-3"})}),r.jsx($,{onClick:l,variant:"outline",className:"text-xs py-1 h-8 w-8 p-0",size:"sm",children:r.jsx(Ma,{className:`h-3 w-3 transition-colors ${s(e.id)?"fill-red-500 text-red-500":"text-gray-600 hover:text-red-400"}`})})]})]})]})})}function Wh(e,t){const s=(t.latitude-e.latitude)*Math.PI/180,i=(t.longitude-e.longitude)*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.latitude*Math.PI/180)*Math.cos(t.latitude*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2),l=6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)));return Math.round(l*100)/100}function qo(){return new Promise((e,t)=>{if(!navigator.geolocation){t(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(n=>{e({latitude:n.coords.latitude,longitude:n.coords.longitude})},n=>{switch(n.code){case n.PERMISSION_DENIED:t(new Error("Location access denied by user"));break;case n.POSITION_UNAVAILABLE:t(new Error("Location information is unavailable"));break;case n.TIMEOUT:t(new Error("Location request timed out"));break;default:t(new Error("An unknown error occurred while retrieving location"));break}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}function Zl(e){return e<1?`${Math.round(e*1e3)}m`:`${e.toFixed(1)}km`}async function MV(e){try{return console.log(`Geocoding address: ${e}`),null}catch(t){return console.error("Geocoding failed:",t),null}}function DV({store:e,showDistance:t=!0}){const[n,s]=b.useState(null),[i,a]=b.useState(!1),[o,l]=b.useState(null);b.useEffect(()=>{t&&e.latitude&&e.longitude&&(a(!0),qo().then(h=>{l(h);const m=Wh(h,{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude)});s(m),a(!1)}).catch(()=>{a(!1)}))},[e.latitude,e.longitude,t]);const c=()=>{if(e.latitude&&e.longitude){const h=`https://maps.google.com/?q=${e.latitude},${e.longitude}`;window.open(h,"_blank")}},d=()=>{if(e.latitude&&e.longitude&&o){const h=`https://maps.google.com/maps?saddr=${o.latitude},${o.longitude}&daddr=${e.latitude},${e.longitude}`;window.open(h,"_blank")}else if(e.latitude&&e.longitude){const h=`https://maps.google.com/maps?daddr=${e.latitude},${e.longitude}`;window.open(h,"_blank")}};return r.jsx(Ae,{href:`/store/${e.id}`,children:r.jsxs(K,{className:"hover:shadow-lg transition-shadow duration-200 cursor-pointer group",children:[r.jsx(re,{className:"pb-2 p-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-sm group-hover:text-primary transition-colors line-clamp-1",children:e.name}),r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx(ue,{variant:e.storeType==="restaurant"?"default":"secondary",className:"text-xs px-1 py-0",children:e.storeType==="restaurant"?"Restaurant":"Retail"}),e.cuisineType&&r.jsx(ue,{variant:"outline",className:"text-xs px-1 py-0",children:e.cuisineType})]})]}),r.jsx("img",{src:e.logo||"https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center",alt:`${e.name} logo`,className:"w-8 h-8 rounded object-cover",onError:h=>{h.currentTarget.src="https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center"}})]})}),r.jsxs(G,{className:"space-y-2 p-3 pt-0",children:[r.jsx("img",{src:e.coverImage||(e.storeType==="restaurant"?"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center":"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop&crop=center"),alt:`${e.name} cover`,className:"w-full h-20 rounded object-cover",onError:h=>{h.currentTarget.src=e.storeType==="restaurant"?"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center":"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop&crop=center"}}),r.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Bt,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),r.jsx("span",{children:parseFloat(e.rating).toFixed(1)}),r.jsxs("span",{children:["(",e.totalReviews,")"]})]}),e.deliveryTime&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jt,{className:"h-3 w-3"}),r.jsx("span",{className:"truncate",children:e.deliveryTime})]})]}),t&&r.jsx("div",{className:"flex-shrink-0",children:i?r.jsxs(ue,{variant:"outline",className:"text-xs animate-pulse",children:[r.jsx(Re,{className:"h-3 w-3 mr-1"}),"..."]}):n!==null?r.jsx(ue,{variant:n<=1?"default":n<=5?"secondary":"outline",className:"text-xs font-medium bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100",children:Zl(n)}):null})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[r.jsx(Re,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),r.jsx("span",{className:"text-muted-foreground flex-1 line-clamp-1",children:e.address})]}),e.latitude&&e.longitude&&r.jsxs("div",{className:"text-xs text-muted-foreground/70 font-mono",children:[" ",parseFloat(e.latitude).toFixed(4),", ",parseFloat(e.longitude).toFixed(4)]})]}),e.latitude&&e.longitude&&r.jsxs("div",{className:"flex gap-1 pt-1",children:[r.jsx($,{variant:"outline",size:"sm",onClick:h=>{h.preventDefault(),h.stopPropagation(),c()},className:"flex-1 text-xs h-7 w-7 p-0",children:r.jsx(ih,{className:"h-3 w-3"})}),r.jsx($,{variant:"outline",size:"sm",onClick:h=>{h.preventDefault(),h.stopPropagation(),d()},className:"flex-1 text-xs h-7 w-7 p-0",children:r.jsx(_t,{className:"h-3 w-3"})})]}),e.isDeliveryAvailable&&r.jsx(ue,{className:"w-full justify-center text-xs py-1",children:"Delivery Available"})]})]})})}function hD(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function xT(e,t){e===void 0&&(e={}),t===void 0&&(t={});const n=["__proto__","constructor","prototype"];Object.keys(t).filter(s=>n.indexOf(s)<0).forEach(s=>{typeof e[s]>"u"?e[s]=t[s]:hD(t[s])&&hD(e[s])&&Object.keys(t[s]).length>0&&xT(e[s],t[s])})}const IV={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function La(){const e=typeof document<"u"?document:{};return xT(e,IV),e}const Nue={document:IV,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function bs(){const e=typeof window<"u"?window:{};return xT(e,Nue),e}function Sue(e){return e===void 0&&(e=""),e.trim().split(" ").filter(t=>!!t.trim())}function _ue(e){const t=e;Object.keys(t).forEach(n=>{try{t[n]=null}catch{}try{delete t[n]}catch{}})}function Z_(e,t){return t===void 0&&(t=0),setTimeout(e,t)}function v0(){return Date.now()}function Pue(e){const t=bs();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}function Cue(e,t){t===void 0&&(t="x");const n=bs();let s,i,a;const o=Pue(e);return n.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(l=>l.replace(",",".")).join(", ")),a=new n.WebKitCSSMatrix(i==="none"?"":i)):(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=a.toString().split(",")),t==="x"&&(n.WebKitCSSMatrix?i=a.m41:s.length===16?i=parseFloat(s[12]):i=parseFloat(s[4])),t==="y"&&(n.WebKitCSSMatrix?i=a.m42:s.length===16?i=parseFloat(s[13]):i=parseFloat(s[5])),i||0}function Iv(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function kue(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function Bs(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const s=n<0||arguments.length<=n?void 0:arguments[n];if(s!=null&&!kue(s)){const i=Object.keys(Object(s)).filter(a=>t.indexOf(a)<0);for(let a=0,o=i.length;a<o;a+=1){const l=i[a],c=Object.getOwnPropertyDescriptor(s,l);c!==void 0&&c.enumerable&&(Iv(e[l])&&Iv(s[l])?s[l].__swiper__?e[l]=s[l]:Bs(e[l],s[l]):!Iv(e[l])&&Iv(s[l])?(e[l]={},s[l].__swiper__?e[l]=s[l]:Bs(e[l],s[l])):e[l]=s[l])}}}return e}function Lv(e,t,n){e.style.setProperty(t,n)}function LV(e){let{swiper:t,targetPosition:n,side:s}=e;const i=bs(),a=-t.translate;let o=null,l;const c=t.params.speed;t.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(t.cssModeFrameID);const d=n>a?"next":"prev",h=(f,v)=>d==="next"&&f>=v||d==="prev"&&f<=v,m=()=>{l=new Date().getTime(),o===null&&(o=l);const f=Math.max(Math.min((l-o)/c,1),0),v=.5-Math.cos(f*Math.PI)/2;let p=a+v*(n-a);if(h(p,n)&&(p=n),t.wrapperEl.scrollTo({[s]:p}),h(p,n)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[s]:p})}),i.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=i.requestAnimationFrame(m)};m()}function Ca(e,t){t===void 0&&(t="");const n=bs(),s=[...e.children];return n.HTMLSlotElement&&e instanceof HTMLSlotElement&&s.push(...e.assignedElements()),t?s.filter(i=>i.matches(t)):s}function Tue(e,t){const n=[t];for(;n.length>0;){const s=n.shift();if(e===s)return!0;n.push(...s.children,...s.shadowRoot?s.shadowRoot.children:[],...s.assignedElements?s.assignedElements():[])}}function Aue(e,t){const n=bs();let s=t.contains(e);return!s&&n.HTMLSlotElement&&t instanceof HTMLSlotElement&&(s=[...t.assignedElements()].includes(e),s||(s=Tue(e,t))),s}function y0(e){try{console.warn(e);return}catch{}}function j0(e,t){t===void 0&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:Sue(t)),n}function Eue(e,t){const n=[];for(;e.previousElementSibling;){const s=e.previousElementSibling;t?s.matches(t)&&n.push(s):n.push(s),e=s}return n}function Oue(e,t){const n=[];for(;e.nextElementSibling;){const s=e.nextElementSibling;t?s.matches(t)&&n.push(s):n.push(s),e=s}return n}function Dl(e,t){return bs().getComputedStyle(e,null).getPropertyValue(t)}function b0(e){let t=e,n;if(t){for(n=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(n+=1);return n}}function RV(e,t){const n=[];let s=e.parentElement;for(;s;)t?s.matches(t)&&n.push(s):n.push(s),s=s.parentElement;return n}function Y_(e,t,n){const s=bs();return e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom"))}function Tn(e){return(Array.isArray(e)?e:[e]).filter(t=>!!t)}function w0(e,t){t===void 0&&(t=""),typeof trustedTypes<"u"?e.innerHTML=trustedTypes.createPolicy("html",{createHTML:n=>n}).createHTML(t):e.innerHTML=t}let j1;function Mue(){const e=bs(),t=La();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function $V(){return j1||(j1=Mue()),j1}let b1;function Due(e){let{userAgent:t}=e===void 0?{}:e;const n=$V(),s=bs(),i=s.navigator.platform,a=t||s.navigator.userAgent,o={ios:!1,android:!1},l=s.screen.width,c=s.screen.height,d=a.match(/(Android);?[\s\/]+([\d.]+)?/);let h=a.match(/(iPad).*OS\s([\d_]+)/);const m=a.match(/(iPod)(.*OS\s([\d_]+))?/),f=!h&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),v=i==="Win32";let p=i==="MacIntel";const x=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!h&&p&&n.touch&&x.indexOf(`${l}x${c}`)>=0&&(h=a.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),p=!1),d&&!v&&(o.os="android",o.android=!0),(h||f||m)&&(o.os="ios",o.ios=!0),o}function FV(e){return e===void 0&&(e={}),b1||(b1=Due(e)),b1}let w1;function Iue(){const e=bs(),t=FV();let n=!1;function s(){const l=e.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}if(s()){const l=String(e.navigator.userAgent);if(l.includes("Version/")){const[c,d]=l.split("Version/")[1].split(" ")[0].split(".").map(h=>Number(h));n=c<16||c===16&&d<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),a=s(),o=a||i&&t.ios;return{isSafari:n||a,needPerspectiveFix:n,need3dFix:o,isWebView:i}}function zV(){return w1||(w1=Iue()),w1}function Lue(e){let{swiper:t,on:n,emit:s}=e;const i=bs();let a=null,o=null;const l=()=>{!t||t.destroyed||!t.initialized||(s("beforeResize"),s("resize"))},c=()=>{!t||t.destroyed||!t.initialized||(a=new ResizeObserver(m=>{o=i.requestAnimationFrame(()=>{const{width:f,height:v}=t;let p=f,x=v;m.forEach(y=>{let{contentBoxSize:w,contentRect:j,target:N}=y;N&&N!==t.el||(p=j?j.width:(w[0]||w).inlineSize,x=j?j.height:(w[0]||w).blockSize)}),(p!==f||x!==v)&&l()})}),a.observe(t.el))},d=()=>{o&&i.cancelAnimationFrame(o),a&&a.unobserve&&t.el&&(a.unobserve(t.el),a=null)},h=()=>{!t||t.destroyed||!t.initialized||s("orientationchange")};n("init",()=>{if(t.params.resizeObserver&&typeof i.ResizeObserver<"u"){c();return}i.addEventListener("resize",l),i.addEventListener("orientationchange",h)}),n("destroy",()=>{d(),i.removeEventListener("resize",l),i.removeEventListener("orientationchange",h)})}function Rue(e){let{swiper:t,extendParams:n,on:s,emit:i}=e;const a=[],o=bs(),l=function(h,m){m===void 0&&(m={});const f=o.MutationObserver||o.WebkitMutationObserver,v=new f(p=>{if(t.__preventObserver__)return;if(p.length===1){i("observerUpdate",p[0]);return}const x=function(){i("observerUpdate",p[0])};o.requestAnimationFrame?o.requestAnimationFrame(x):o.setTimeout(x,0)});v.observe(h,{attributes:typeof m.attributes>"u"?!0:m.attributes,childList:t.isElement||(typeof m.childList>"u"?!0:m).childList,characterData:typeof m.characterData>"u"?!0:m.characterData}),a.push(v)},c=()=>{if(t.params.observer){if(t.params.observeParents){const h=RV(t.hostEl);for(let m=0;m<h.length;m+=1)l(h[m])}l(t.hostEl,{childList:t.params.observeSlideChildren}),l(t.wrapperEl,{attributes:!1})}},d=()=>{a.forEach(h=>{h.disconnect()}),a.splice(0,a.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",c),s("destroy",d)}var $ue={on(e,t,n){const s=this;if(!s.eventsListeners||s.destroyed||typeof t!="function")return s;const i=n?"unshift":"push";return e.split(" ").forEach(a=>{s.eventsListeners[a]||(s.eventsListeners[a]=[]),s.eventsListeners[a][i](t)}),s},once(e,t,n){const s=this;if(!s.eventsListeners||s.destroyed||typeof t!="function")return s;function i(){s.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];t.apply(s,o)}return i.__emitterProxy=t,s.on(e,i,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const s=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[s](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||e.split(" ").forEach(s=>{typeof t>"u"?n.eventsListeners[s]=[]:n.eventsListeners[s]&&n.eventsListeners[s].forEach((i,a)=>{(i===t||i.__emitterProxy&&i.__emitterProxy===t)&&n.eventsListeners[s].splice(a,1)})}),n},emit(){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,n,s;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return typeof a[0]=="string"||Array.isArray(a[0])?(t=a[0],n=a.slice(1,a.length),s=e):(t=a[0].events,n=a[0].data,s=a[0].context||e),n.unshift(s),(Array.isArray(t)?t:t.split(" ")).forEach(c=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(d=>{d.apply(s,[c,...n])}),e.eventsListeners&&e.eventsListeners[c]&&e.eventsListeners[c].forEach(d=>{d.apply(s,n)})}),e}};function Fue(){const e=this;let t,n;const s=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=s.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?n=e.params.height:n=s.clientHeight,!(t===0&&e.isHorizontal()||n===0&&e.isVertical())&&(t=t-parseInt(Dl(s,"padding-left")||0,10)-parseInt(Dl(s,"padding-right")||0,10),n=n-parseInt(Dl(s,"padding-top")||0,10)-parseInt(Dl(s,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))}function zue(){const e=this;function t(T,I){return parseFloat(T.getPropertyValue(e.getDirectionLabel(I))||0)}const n=e.params,{wrapperEl:s,slidesEl:i,size:a,rtlTranslate:o,wrongRTL:l}=e,c=e.virtual&&n.virtual.enabled,d=c?e.virtual.slides.length:e.slides.length,h=Ca(i,`.${e.params.slideClass}, swiper-slide`),m=c?e.virtual.slides.length:h.length;let f=[];const v=[],p=[];let x=n.slidesOffsetBefore;typeof x=="function"&&(x=n.slidesOffsetBefore.call(e));let y=n.slidesOffsetAfter;typeof y=="function"&&(y=n.slidesOffsetAfter.call(e));const w=e.snapGrid.length,j=e.slidesGrid.length;let N=n.spaceBetween,C=-x,P=0,k=0;if(typeof a>"u")return;typeof N=="string"&&N.indexOf("%")>=0?N=parseFloat(N.replace("%",""))/100*a:typeof N=="string"&&(N=parseFloat(N)),e.virtualSize=-N,h.forEach(T=>{o?T.style.marginLeft="":T.style.marginRight="",T.style.marginBottom="",T.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Lv(s,"--swiper-centered-offset-before",""),Lv(s,"--swiper-centered-offset-after",""));const _=n.grid&&n.grid.rows>1&&e.grid;_?e.grid.initSlides(h):e.grid&&e.grid.unsetSlides();let O;const M=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(T=>typeof n.breakpoints[T].slidesPerView<"u").length>0;for(let T=0;T<m;T+=1){O=0;let I;if(h[T]&&(I=h[T]),_&&e.grid.updateSlide(T,I,h),!(h[T]&&Dl(I,"display")==="none")){if(n.slidesPerView==="auto"){M&&(h[T].style[e.getDirectionLabel("width")]="");const A=getComputedStyle(I),V=I.style.transform,D=I.style.webkitTransform;if(V&&(I.style.transform="none"),D&&(I.style.webkitTransform="none"),n.roundLengths)O=e.isHorizontal()?Y_(I,"width"):Y_(I,"height");else{const W=t(A,"width"),U=t(A,"padding-left"),Q=t(A,"padding-right"),q=t(A,"margin-left"),B=t(A,"margin-right"),z=A.getPropertyValue("box-sizing");if(z&&z==="border-box")O=W+q+B;else{const{clientWidth:H,offsetWidth:X}=I;O=W+U+Q+q+B+(X-H)}}V&&(I.style.transform=V),D&&(I.style.webkitTransform=D),n.roundLengths&&(O=Math.floor(O))}else O=(a-(n.slidesPerView-1)*N)/n.slidesPerView,n.roundLengths&&(O=Math.floor(O)),h[T]&&(h[T].style[e.getDirectionLabel("width")]=`${O}px`);h[T]&&(h[T].swiperSlideSize=O),p.push(O),n.centeredSlides?(C=C+O/2+P/2+N,P===0&&T!==0&&(C=C-a/2-N),T===0&&(C=C-a/2-N),Math.abs(C)<1/1e3&&(C=0),n.roundLengths&&(C=Math.floor(C)),k%n.slidesPerGroup===0&&f.push(C),v.push(C)):(n.roundLengths&&(C=Math.floor(C)),(k-Math.min(e.params.slidesPerGroupSkip,k))%e.params.slidesPerGroup===0&&f.push(C),v.push(C),C=C+O+N),e.virtualSize+=O+N,P=O,k+=1}}if(e.virtualSize=Math.max(e.virtualSize,a)+y,o&&l&&(n.effect==="slide"||n.effect==="coverflow")&&(s.style.width=`${e.virtualSize+N}px`),n.setWrapperSize&&(s.style[e.getDirectionLabel("width")]=`${e.virtualSize+N}px`),_&&e.grid.updateWrapperSize(O,f),!n.centeredSlides){const T=[];for(let I=0;I<f.length;I+=1){let A=f[I];n.roundLengths&&(A=Math.floor(A)),f[I]<=e.virtualSize-a&&T.push(A)}f=T,Math.floor(e.virtualSize-a)-Math.floor(f[f.length-1])>1&&f.push(e.virtualSize-a)}if(c&&n.loop){const T=p[0]+N;if(n.slidesPerGroup>1){const I=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),A=T*n.slidesPerGroup;for(let V=0;V<I;V+=1)f.push(f[f.length-1]+A)}for(let I=0;I<e.virtual.slidesBefore+e.virtual.slidesAfter;I+=1)n.slidesPerGroup===1&&f.push(f[f.length-1]+T),v.push(v[v.length-1]+T),e.virtualSize+=T}if(f.length===0&&(f=[0]),N!==0){const T=e.isHorizontal()&&o?"marginLeft":e.getDirectionLabel("marginRight");h.filter((I,A)=>!n.cssMode||n.loop?!0:A!==h.length-1).forEach(I=>{I.style[T]=`${N}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let T=0;p.forEach(A=>{T+=A+(N||0)}),T-=N;const I=T>a?T-a:0;f=f.map(A=>A<=0?-x:A>I?I+y:A)}if(n.centerInsufficientSlides){let T=0;p.forEach(A=>{T+=A+(N||0)}),T-=N;const I=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(T+I<a){const A=(a-T-I)/2;f.forEach((V,D)=>{f[D]=V-A}),v.forEach((V,D)=>{v[D]=V+A})}}if(Object.assign(e,{slides:h,snapGrid:f,slidesGrid:v,slidesSizesGrid:p}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Lv(s,"--swiper-centered-offset-before",`${-f[0]}px`),Lv(s,"--swiper-centered-offset-after",`${e.size/2-p[p.length-1]/2}px`);const T=-e.snapGrid[0],I=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(A=>A+T),e.slidesGrid=e.slidesGrid.map(A=>A+I)}if(m!==d&&e.emit("slidesLengthChange"),f.length!==w&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),v.length!==j&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!c&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const T=`${n.containerModifierClass}backface-hidden`,I=e.el.classList.contains(T);m<=n.maxBackfaceHiddenSlides?I||e.el.classList.add(T):I&&e.el.classList.remove(T)}}function Bue(e){const t=this,n=[],s=t.virtual&&t.params.virtual.enabled;let i=0,a;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const o=l=>s?t.slides[t.getSlideIndexByData(l)]:t.slides[l];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(l=>{n.push(l)});else for(a=0;a<Math.ceil(t.params.slidesPerView);a+=1){const l=t.activeIndex+a;if(l>t.slides.length&&!s)break;n.push(o(l))}else n.push(o(t.activeIndex));for(a=0;a<n.length;a+=1)if(typeof n[a]<"u"){const l=n[a].offsetHeight;i=l>i?l:i}(i||i===0)&&(t.wrapperEl.style.height=`${i}px`)}function Vue(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let s=0;s<t.length;s+=1)t[s].swiperSlideOffset=(e.isHorizontal()?t[s].offsetLeft:t[s].offsetTop)-n-e.cssOverflowAdjustment()}const mD=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};function Uue(e){e===void 0&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:s,rtlTranslate:i,snapGrid:a}=t;if(s.length===0)return;typeof s[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let o=-e;i&&(o=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let l=n.spaceBetween;typeof l=="string"&&l.indexOf("%")>=0?l=parseFloat(l.replace("%",""))/100*t.size:typeof l=="string"&&(l=parseFloat(l));for(let c=0;c<s.length;c+=1){const d=s[c];let h=d.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(h-=s[0].swiperSlideOffset);const m=(o+(n.centeredSlides?t.minTranslate():0)-h)/(d.swiperSlideSize+l),f=(o-a[0]+(n.centeredSlides?t.minTranslate():0)-h)/(d.swiperSlideSize+l),v=-(o-h),p=v+t.slidesSizesGrid[c],x=v>=0&&v<=t.size-t.slidesSizesGrid[c],y=v>=0&&v<t.size-1||p>1&&p<=t.size||v<=0&&p>=t.size;y&&(t.visibleSlides.push(d),t.visibleSlidesIndexes.push(c)),mD(d,y,n.slideVisibleClass),mD(d,x,n.slideFullyVisibleClass),d.progress=i?-m:m,d.originalProgress=i?-f:f}}function Wue(e){const t=this;if(typeof e>"u"){const h=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*h||0}const n=t.params,s=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:a,isEnd:o,progressLoop:l}=t;const c=a,d=o;if(s===0)i=0,a=!0,o=!0;else{i=(e-t.minTranslate())/s;const h=Math.abs(e-t.minTranslate())<1,m=Math.abs(e-t.maxTranslate())<1;a=h||i<=0,o=m||i>=1,h&&(i=0),m&&(i=1)}if(n.loop){const h=t.getSlideIndexByData(0),m=t.getSlideIndexByData(t.slides.length-1),f=t.slidesGrid[h],v=t.slidesGrid[m],p=t.slidesGrid[t.slidesGrid.length-1],x=Math.abs(e);x>=f?l=(x-f)/p:l=(x+p-v)/p,l>1&&(l-=1)}Object.assign(t,{progress:i,progressLoop:l,isBeginning:a,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),a&&!c&&t.emit("reachBeginning toEdge"),o&&!d&&t.emit("reachEnd toEdge"),(c&&!a||d&&!o)&&t.emit("fromEdge"),t.emit("progress",i)}const N1=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};function Hue(){const e=this,{slides:t,params:n,slidesEl:s,activeIndex:i}=e,a=e.virtual&&n.virtual.enabled,o=e.grid&&n.grid&&n.grid.rows>1,l=m=>Ca(s,`.${n.slideClass}${m}, swiper-slide${m}`)[0];let c,d,h;if(a)if(n.loop){let m=i-e.virtual.slidesBefore;m<0&&(m=e.virtual.slides.length+m),m>=e.virtual.slides.length&&(m-=e.virtual.slides.length),c=l(`[data-swiper-slide-index="${m}"]`)}else c=l(`[data-swiper-slide-index="${i}"]`);else o?(c=t.find(m=>m.column===i),h=t.find(m=>m.column===i+1),d=t.find(m=>m.column===i-1)):c=t[i];c&&(o||(h=Oue(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!h&&(h=t[0]),d=Eue(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!d===0&&(d=t[t.length-1]))),t.forEach(m=>{N1(m,m===c,n.slideActiveClass),N1(m,m===h,n.slideNextClass),N1(m,m===d,n.slidePrevClass)}),e.emitSlidesClasses()}const wy=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,s=t.closest(n());if(s){let i=s.querySelector(`.${e.params.lazyPreloaderClass}`);!i&&e.isElement&&(s.shadowRoot?i=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{s.shadowRoot&&(i=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},S1=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},X_=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const s=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),i=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const o=i,l=[o-t];l.push(...Array.from({length:t}).map((c,d)=>o+s+d)),e.slides.forEach((c,d)=>{l.includes(c.column)&&S1(e,d)});return}const a=i+s-1;if(e.params.rewind||e.params.loop)for(let o=i-t;o<=a+t;o+=1){const l=(o%n+n)%n;(l<i||l>a)&&S1(e,l)}else for(let o=Math.max(i-t,0);o<=Math.min(a+t,n-1);o+=1)o!==i&&(o>a||o<i)&&S1(e,o)};function que(e){const{slidesGrid:t,params:n}=e,s=e.rtlTranslate?e.translate:-e.translate;let i;for(let a=0;a<t.length;a+=1)typeof t[a+1]<"u"?s>=t[a]&&s<t[a+1]-(t[a+1]-t[a])/2?i=a:s>=t[a]&&s<t[a+1]&&(i=a+1):s>=t[a]&&(i=a);return n.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function Kue(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:s,params:i,activeIndex:a,realIndex:o,snapIndex:l}=t;let c=e,d;const h=v=>{let p=v-t.virtual.slidesBefore;return p<0&&(p=t.virtual.slides.length+p),p>=t.virtual.slides.length&&(p-=t.virtual.slides.length),p};if(typeof c>"u"&&(c=que(t)),s.indexOf(n)>=0)d=s.indexOf(n);else{const v=Math.min(i.slidesPerGroupSkip,c);d=v+Math.floor((c-v)/i.slidesPerGroup)}if(d>=s.length&&(d=s.length-1),c===a&&!t.params.loop){d!==l&&(t.snapIndex=d,t.emit("snapIndexChange"));return}if(c===a&&t.params.loop&&t.virtual&&t.params.virtual.enabled){t.realIndex=h(c);return}const m=t.grid&&i.grid&&i.grid.rows>1;let f;if(t.virtual&&i.virtual.enabled&&i.loop)f=h(c);else if(m){const v=t.slides.find(x=>x.column===c);let p=parseInt(v.getAttribute("data-swiper-slide-index"),10);Number.isNaN(p)&&(p=Math.max(t.slides.indexOf(v),0)),f=Math.floor(p/i.grid.rows)}else if(t.slides[c]){const v=t.slides[c].getAttribute("data-swiper-slide-index");v?f=parseInt(v,10):f=c}else f=c;Object.assign(t,{previousSnapIndex:l,snapIndex:d,previousRealIndex:o,realIndex:f,previousIndex:a,activeIndex:c}),t.initialized&&X_(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(o!==f&&t.emit("realIndexChange"),t.emit("slideChange"))}function Gue(e,t){const n=this,s=n.params;let i=e.closest(`.${s.slideClass}, swiper-slide`);!i&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(l=>{!i&&l.matches&&l.matches(`.${s.slideClass}, swiper-slide`)&&(i=l)});let a=!1,o;if(i){for(let l=0;l<n.slides.length;l+=1)if(n.slides[l]===i){a=!0,o=l;break}}if(i&&a)n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}s.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var Zue={updateSize:Fue,updateSlides:zue,updateAutoHeight:Bue,updateSlidesOffset:Vue,updateSlidesProgress:Uue,updateProgress:Wue,updateSlidesClasses:Hue,updateActiveIndex:Kue,updateClickedSlide:Gue};function Yue(e){e===void 0&&(e=this.isHorizontal()?"x":"y");const t=this,{params:n,rtlTranslate:s,translate:i,wrapperEl:a}=t;if(n.virtualTranslate)return s?-i:i;if(n.cssMode)return i;let o=Cue(a,e);return o+=t.cssOverflowAdjustment(),s&&(o=-o),o||0}function Xue(e,t){const n=this,{rtlTranslate:s,params:i,wrapperEl:a,progress:o}=n;let l=0,c=0;const d=0;n.isHorizontal()?l=s?-e:e:c=e,i.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c,i.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:i.virtualTranslate||(n.isHorizontal()?l-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),a.style.transform=`translate3d(${l}px, ${c}px, ${d}px)`);let h;const m=n.maxTranslate()-n.minTranslate();m===0?h=0:h=(e-n.minTranslate())/m,h!==o&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)}function Que(){return-this.snapGrid[0]}function Jue(){return-this.snapGrid[this.snapGrid.length-1]}function ehe(e,t,n,s,i){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),n===void 0&&(n=!0),s===void 0&&(s=!0);const a=this,{params:o,wrapperEl:l}=a;if(a.animating&&o.preventInteractionOnTransition)return!1;const c=a.minTranslate(),d=a.maxTranslate();let h;if(s&&e>c?h=c:s&&e<d?h=d:h=e,a.updateProgress(h),o.cssMode){const m=a.isHorizontal();if(t===0)l[m?"scrollLeft":"scrollTop"]=-h;else{if(!a.support.smoothScroll)return LV({swiper:a,targetPosition:-h,side:m?"left":"top"}),!0;l.scrollTo({[m?"left":"top"]:-h,behavior:"smooth"})}return!0}return t===0?(a.setTransition(0),a.setTranslate(h),n&&(a.emit("beforeTransitionStart",t,i),a.emit("transitionEnd"))):(a.setTransition(t),a.setTranslate(h),n&&(a.emit("beforeTransitionStart",t,i),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(f){!a||a.destroyed||f.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,a.animating=!1,n&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}var the={getTranslate:Yue,setTranslate:Xue,minTranslate:Que,maxTranslate:Jue,translateTo:ehe};function rhe(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${e}ms`,n.wrapperEl.style.transitionDelay=e===0?"0ms":""),n.emit("setTransition",e,t)}function BV(e){let{swiper:t,runCallbacks:n,direction:s,step:i}=e;const{activeIndex:a,previousIndex:o}=t;let l=s;l||(a>o?l="next":a<o?l="prev":l="reset"),t.emit(`transition${i}`),n&&l==="reset"?t.emit(`slideResetTransition${i}`):n&&a!==o&&(t.emit(`slideChangeTransition${i}`),l==="next"?t.emit(`slideNextTransition${i}`):t.emit(`slidePrevTransition${i}`))}function nhe(e,t){e===void 0&&(e=!0);const n=this,{params:s}=n;s.cssMode||(s.autoHeight&&n.updateAutoHeight(),BV({swiper:n,runCallbacks:e,direction:t,step:"Start"}))}function she(e,t){e===void 0&&(e=!0);const n=this,{params:s}=n;n.animating=!1,!s.cssMode&&(n.setTransition(0),BV({swiper:n,runCallbacks:e,direction:t,step:"End"}))}var ihe={setTransition:rhe,transitionStart:nhe,transitionEnd:she};function ahe(e,t,n,s,i){e===void 0&&(e=0),n===void 0&&(n=!0),typeof e=="string"&&(e=parseInt(e,10));const a=this;let o=e;o<0&&(o=0);const{params:l,snapGrid:c,slidesGrid:d,previousIndex:h,activeIndex:m,rtlTranslate:f,wrapperEl:v,enabled:p}=a;if(!p&&!s&&!i||a.destroyed||a.animating&&l.preventInteractionOnTransition)return!1;typeof t>"u"&&(t=a.params.speed);const x=Math.min(a.params.slidesPerGroupSkip,o);let y=x+Math.floor((o-x)/a.params.slidesPerGroup);y>=c.length&&(y=c.length-1);const w=-c[y];if(l.normalizeSlideIndex)for(let _=0;_<d.length;_+=1){const O=-Math.floor(w*100),M=Math.floor(d[_]*100),T=Math.floor(d[_+1]*100);typeof d[_+1]<"u"?O>=M&&O<T-(T-M)/2?o=_:O>=M&&O<T&&(o=_+1):O>=M&&(o=_)}if(a.initialized&&o!==m&&(!a.allowSlideNext&&(f?w>a.translate&&w>a.minTranslate():w<a.translate&&w<a.minTranslate())||!a.allowSlidePrev&&w>a.translate&&w>a.maxTranslate()&&(m||0)!==o))return!1;o!==(h||0)&&n&&a.emit("beforeSlideChangeStart"),a.updateProgress(w);let j;o>m?j="next":o<m?j="prev":j="reset";const N=a.virtual&&a.params.virtual.enabled;if(!(N&&i)&&(f&&-w===a.translate||!f&&w===a.translate))return a.updateActiveIndex(o),l.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),l.effect!=="slide"&&a.setTranslate(w),j!=="reset"&&(a.transitionStart(n,j),a.transitionEnd(n,j)),!1;if(l.cssMode){const _=a.isHorizontal(),O=f?w:-w;if(t===0)N&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),N&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{v[_?"scrollLeft":"scrollTop"]=O})):v[_?"scrollLeft":"scrollTop"]=O,N&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1});else{if(!a.support.smoothScroll)return LV({swiper:a,targetPosition:O,side:_?"left":"top"}),!0;v.scrollTo({[_?"left":"top"]:O,behavior:"smooth"})}return!0}const k=zV().isSafari;return N&&!i&&k&&a.isElement&&a.virtual.update(!1,!1,o),a.setTransition(t),a.setTranslate(w),a.updateActiveIndex(o),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,s),a.transitionStart(n,j),t===0?a.transitionEnd(n,j):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(O){!a||a.destroyed||O.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(n,j))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}function ohe(e,t,n,s){e===void 0&&(e=0),n===void 0&&(n=!0),typeof e=="string"&&(e=parseInt(e,10));const i=this;if(i.destroyed)return;typeof t>"u"&&(t=i.params.speed);const a=i.grid&&i.params.grid&&i.params.grid.rows>1;let o=e;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)o=o+i.virtual.slidesBefore;else{let l;if(a){const f=o*i.params.grid.rows;l=i.slides.find(v=>v.getAttribute("data-swiper-slide-index")*1===f).column}else l=i.getSlideIndexByData(o);const c=a?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:d}=i.params;let h=i.params.slidesPerView;h==="auto"?h=i.slidesPerViewDynamic():(h=Math.ceil(parseFloat(i.params.slidesPerView,10)),d&&h%2===0&&(h=h+1));let m=c-l<h;if(d&&(m=m||l<Math.ceil(h/2)),s&&d&&i.params.slidesPerView!=="auto"&&!a&&(m=!1),m){const f=d?l<i.activeIndex?"prev":"next":l-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?l+1:l-c+1,slideRealIndex:f==="next"?i.realIndex:void 0})}if(a){const f=o*i.params.grid.rows;o=i.slides.find(v=>v.getAttribute("data-swiper-slide-index")*1===f).column}else o=i.getSlideIndexByData(o)}return requestAnimationFrame(()=>{i.slideTo(o,t,n,s)}),i}function lhe(e,t,n){t===void 0&&(t=!0);const s=this,{enabled:i,params:a,animating:o}=s;if(!i||s.destroyed)return s;typeof e>"u"&&(e=s.params.speed);let l=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(l=Math.max(s.slidesPerViewDynamic("current",!0),1));const c=s.activeIndex<a.slidesPerGroupSkip?1:l,d=s.virtual&&a.virtual.enabled;if(a.loop){if(o&&!d&&a.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&a.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+c,e,t,n)}),!0}return a.rewind&&s.isEnd?s.slideTo(0,e,t,n):s.slideTo(s.activeIndex+c,e,t,n)}function che(e,t,n){t===void 0&&(t=!0);const s=this,{params:i,snapGrid:a,slidesGrid:o,rtlTranslate:l,enabled:c,animating:d}=s;if(!c||s.destroyed)return s;typeof e>"u"&&(e=s.params.speed);const h=s.virtual&&i.virtual.enabled;if(i.loop){if(d&&!h&&i.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}const m=l?s.translate:-s.translate;function f(j){return j<0?-Math.floor(Math.abs(j)):Math.floor(j)}const v=f(m),p=a.map(j=>f(j)),x=i.freeMode&&i.freeMode.enabled;let y=a[p.indexOf(v)-1];if(typeof y>"u"&&(i.cssMode||x)){let j;a.forEach((N,C)=>{v>=N&&(j=C)}),typeof j<"u"&&(y=x?a[j]:a[j>0?j-1:j])}let w=0;if(typeof y<"u"&&(w=o.indexOf(y),w<0&&(w=s.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(w=w-s.slidesPerViewDynamic("previous",!0)+1,w=Math.max(w,0))),i.rewind&&s.isBeginning){const j=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(j,e,t,n)}else if(i.loop&&s.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{s.slideTo(w,e,t,n)}),!0;return s.slideTo(w,e,t,n)}function dhe(e,t,n){t===void 0&&(t=!0);const s=this;if(!s.destroyed)return typeof e>"u"&&(e=s.params.speed),s.slideTo(s.activeIndex,e,t,n)}function uhe(e,t,n,s){t===void 0&&(t=!0),s===void 0&&(s=.5);const i=this;if(i.destroyed)return;typeof e>"u"&&(e=i.params.speed);let a=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,a),l=o+Math.floor((a-o)/i.params.slidesPerGroup),c=i.rtlTranslate?i.translate:-i.translate;if(c>=i.snapGrid[l]){const d=i.snapGrid[l],h=i.snapGrid[l+1];c-d>(h-d)*s&&(a+=i.params.slidesPerGroup)}else{const d=i.snapGrid[l-1],h=i.snapGrid[l];c-d<=(h-d)*s&&(a-=i.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,i.slidesGrid.length-1),i.slideTo(a,e,t,n)}function hhe(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,s=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let i=e.clickedIndex,a;const o=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;a=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?i<e.loopedSlides-s/2||i>e.slides.length-e.loopedSlides+s/2?(e.loopFix(),i=e.getSlideIndex(Ca(n,`${o}[data-swiper-slide-index="${a}"]`)[0]),Z_(()=>{e.slideTo(i)})):e.slideTo(i):i>e.slides.length-s?(e.loopFix(),i=e.getSlideIndex(Ca(n,`${o}[data-swiper-slide-index="${a}"]`)[0]),Z_(()=>{e.slideTo(i)})):e.slideTo(i)}else e.slideTo(i)}var mhe={slideTo:ahe,slideToLoop:ohe,slideNext:lhe,slidePrev:che,slideReset:dhe,slideToClosest:uhe,slideToClickedSlide:hhe};function fhe(e,t){const n=this,{params:s,slidesEl:i}=n;if(!s.loop||n.virtual&&n.params.virtual.enabled)return;const a=()=>{Ca(i,`.${s.slideClass}, swiper-slide`).forEach((f,v)=>{f.setAttribute("data-swiper-slide-index",v)})},o=n.grid&&s.grid&&s.grid.rows>1,l=s.slidesPerGroup*(o?s.grid.rows:1),c=n.slides.length%l!==0,d=o&&n.slides.length%s.grid.rows!==0,h=m=>{for(let f=0;f<m;f+=1){const v=n.isElement?j0("swiper-slide",[s.slideBlankClass]):j0("div",[s.slideClass,s.slideBlankClass]);n.slidesEl.append(v)}};if(c){if(s.loopAddBlankSlides){const m=l-n.slides.length%l;h(m),n.recalcSlides(),n.updateSlides()}else y0("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else if(d){if(s.loopAddBlankSlides){const m=s.grid.rows-n.slides.length%s.grid.rows;h(m),n.recalcSlides(),n.updateSlides()}else y0("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else a();n.loopFix({slideRealIndex:e,direction:s.centeredSlides?void 0:"next",initial:t})}function phe(e){let{slideRealIndex:t,slideTo:n=!0,direction:s,setTranslate:i,activeSlideIndex:a,initial:o,byController:l,byMousewheel:c}=e===void 0?{}:e;const d=this;if(!d.params.loop)return;d.emit("beforeLoopFix");const{slides:h,allowSlidePrev:m,allowSlideNext:f,slidesEl:v,params:p}=d,{centeredSlides:x,initialSlide:y}=p;if(d.allowSlidePrev=!0,d.allowSlideNext=!0,d.virtual&&p.virtual.enabled){n&&(!p.centeredSlides&&d.snapIndex===0?d.slideTo(d.virtual.slides.length,0,!1,!0):p.centeredSlides&&d.snapIndex<p.slidesPerView?d.slideTo(d.virtual.slides.length+d.snapIndex,0,!1,!0):d.snapIndex===d.snapGrid.length-1&&d.slideTo(d.virtual.slidesBefore,0,!1,!0)),d.allowSlidePrev=m,d.allowSlideNext=f,d.emit("loopFix");return}let w=p.slidesPerView;w==="auto"?w=d.slidesPerViewDynamic():(w=Math.ceil(parseFloat(p.slidesPerView,10)),x&&w%2===0&&(w=w+1));const j=p.slidesPerGroupAuto?w:p.slidesPerGroup;let N=j;N%j!==0&&(N+=j-N%j),N+=p.loopAdditionalSlides,d.loopedSlides=N;const C=d.grid&&p.grid&&p.grid.rows>1;h.length<w+N||d.params.effect==="cards"&&h.length<w+N*2?y0("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):C&&p.grid.fill==="row"&&y0("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const P=[],k=[],_=C?Math.ceil(h.length/p.grid.rows):h.length,O=o&&_-y<w&&!x;let M=O?y:d.activeIndex;typeof a>"u"?a=d.getSlideIndex(h.find(U=>U.classList.contains(p.slideActiveClass))):M=a;const T=s==="next"||!s,I=s==="prev"||!s;let A=0,V=0;const W=(C?h[a].column:a)+(x&&typeof i>"u"?-w/2+.5:0);if(W<N){A=Math.max(N-W,j);for(let U=0;U<N-W;U+=1){const Q=U-Math.floor(U/_)*_;if(C){const q=_-Q-1;for(let B=h.length-1;B>=0;B-=1)h[B].column===q&&P.push(B)}else P.push(_-Q-1)}}else if(W+w>_-N){V=Math.max(W-(_-N*2),j),O&&(V=Math.max(V,w-_+y+1));for(let U=0;U<V;U+=1){const Q=U-Math.floor(U/_)*_;C?h.forEach((q,B)=>{q.column===Q&&k.push(B)}):k.push(Q)}}if(d.__preventObserver__=!0,requestAnimationFrame(()=>{d.__preventObserver__=!1}),d.params.effect==="cards"&&h.length<w+N*2&&(k.includes(a)&&k.splice(k.indexOf(a),1),P.includes(a)&&P.splice(P.indexOf(a),1)),I&&P.forEach(U=>{h[U].swiperLoopMoveDOM=!0,v.prepend(h[U]),h[U].swiperLoopMoveDOM=!1}),T&&k.forEach(U=>{h[U].swiperLoopMoveDOM=!0,v.append(h[U]),h[U].swiperLoopMoveDOM=!1}),d.recalcSlides(),p.slidesPerView==="auto"?d.updateSlides():C&&(P.length>0&&I||k.length>0&&T)&&d.slides.forEach((U,Q)=>{d.grid.updateSlide(Q,U,d.slides)}),p.watchSlidesProgress&&d.updateSlidesOffset(),n){if(P.length>0&&I){if(typeof t>"u"){const U=d.slidesGrid[M],q=d.slidesGrid[M+A]-U;c?d.setTranslate(d.translate-q):(d.slideTo(M+Math.ceil(A),0,!1,!0),i&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-q,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-q))}else if(i){const U=C?P.length/p.grid.rows:P.length;d.slideTo(d.activeIndex+U,0,!1,!0),d.touchEventsData.currentTranslate=d.translate}}else if(k.length>0&&T)if(typeof t>"u"){const U=d.slidesGrid[M],q=d.slidesGrid[M-V]-U;c?d.setTranslate(d.translate-q):(d.slideTo(M-V,0,!1,!0),i&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-q,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-q))}else{const U=C?k.length/p.grid.rows:k.length;d.slideTo(d.activeIndex-U,0,!1,!0)}}if(d.allowSlidePrev=m,d.allowSlideNext=f,d.controller&&d.controller.control&&!l){const U={slideRealIndex:t,direction:s,setTranslate:i,activeSlideIndex:a,byController:!0};Array.isArray(d.controller.control)?d.controller.control.forEach(Q=>{!Q.destroyed&&Q.params.loop&&Q.loopFix({...U,slideTo:Q.params.slidesPerView===p.slidesPerView?n:!1})}):d.controller.control instanceof d.constructor&&d.controller.control.params.loop&&d.controller.control.loopFix({...U,slideTo:d.controller.control.params.slidesPerView===p.slidesPerView?n:!1})}d.emit("loopFix")}function xhe(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||!n||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const s=[];e.slides.forEach(i=>{const a=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;s[a]=i}),e.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),s.forEach(i=>{n.append(i)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}var ghe={loopCreate:fhe,loopFix:phe,loopDestroy:xhe};function vhe(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function yhe(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}var jhe={setGrabCursor:vhe,unsetGrabCursor:yhe};function bhe(e,t){t===void 0&&(t=this);function n(s){if(!s||s===La()||s===bs())return null;s.assignedSlot&&(s=s.assignedSlot);const i=s.closest(e);return!i&&!s.getRootNode?null:i||n(s.getRootNode().host)}return n(t)}function fD(e,t,n){const s=bs(),{params:i}=e,a=i.edgeSwipeDetection,o=i.edgeSwipeThreshold;return a&&(n<=o||n>=s.innerWidth-o)?a==="prevent"?(t.preventDefault(),!0):!1:!0}function whe(e){const t=this,n=La();let s=e;s.originalEvent&&(s=s.originalEvent);const i=t.touchEventsData;if(s.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==s.pointerId)return;i.pointerId=s.pointerId}else s.type==="touchstart"&&s.targetTouches.length===1&&(i.touchId=s.targetTouches[0].identifier);if(s.type==="touchstart"){fD(t,s,s.targetTouches[0].pageX);return}const{params:a,touches:o,enabled:l}=t;if(!l||!a.simulateTouch&&s.pointerType==="mouse"||t.animating&&a.preventInteractionOnTransition)return;!t.animating&&a.cssMode&&a.loop&&t.loopFix();let c=s.target;if(a.touchEventsTarget==="wrapper"&&!Aue(c,t.wrapperEl)||"which"in s&&s.which===3||"button"in s&&s.button>0||i.isTouched&&i.isMoved)return;const d=!!a.noSwipingClass&&a.noSwipingClass!=="",h=s.composedPath?s.composedPath():s.path;d&&s.target&&s.target.shadowRoot&&h&&(c=h[0]);const m=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,f=!!(s.target&&s.target.shadowRoot);if(a.noSwiping&&(f?bhe(m,c):c.closest(m))){t.allowClick=!0;return}if(a.swipeHandler&&!c.closest(a.swipeHandler))return;o.currentX=s.pageX,o.currentY=s.pageY;const v=o.currentX,p=o.currentY;if(!fD(t,s,v))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=v,o.startY=p,i.touchStartTime=v0(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,a.threshold>0&&(i.allowThresholdMove=!1);let x=!0;c.matches(i.focusableElements)&&(x=!1,c.nodeName==="SELECT"&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==c&&(s.pointerType==="mouse"||s.pointerType!=="mouse"&&!c.matches(i.focusableElements))&&n.activeElement.blur();const y=x&&t.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||y)&&!c.isContentEditable&&s.preventDefault(),a.freeMode&&a.freeMode.enabled&&t.freeMode&&t.animating&&!a.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",s)}function Nhe(e){const t=La(),n=this,s=n.touchEventsData,{params:i,touches:a,rtlTranslate:o,enabled:l}=n;if(!l||!i.simulateTouch&&e.pointerType==="mouse")return;let c=e;if(c.originalEvent&&(c=c.originalEvent),c.type==="pointermove"&&(s.touchId!==null||c.pointerId!==s.pointerId))return;let d;if(c.type==="touchmove"){if(d=[...c.changedTouches].find(k=>k.identifier===s.touchId),!d||d.identifier!==s.touchId)return}else d=c;if(!s.isTouched){s.startMoving&&s.isScrolling&&n.emit("touchMoveOpposite",c);return}const h=d.pageX,m=d.pageY;if(c.preventedByNestedSwiper){a.startX=h,a.startY=m;return}if(!n.allowTouchMove){c.target.matches(s.focusableElements)||(n.allowClick=!1),s.isTouched&&(Object.assign(a,{startX:h,startY:m,currentX:h,currentY:m}),s.touchStartTime=v0());return}if(i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(m<a.startY&&n.translate<=n.maxTranslate()||m>a.startY&&n.translate>=n.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else{if(o&&(h>a.startX&&-n.translate<=n.maxTranslate()||h<a.startX&&-n.translate>=n.minTranslate()))return;if(!o&&(h<a.startX&&n.translate<=n.maxTranslate()||h>a.startX&&n.translate>=n.minTranslate()))return}if(t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==c.target&&c.pointerType!=="mouse"&&t.activeElement.blur(),t.activeElement&&c.target===t.activeElement&&c.target.matches(s.focusableElements)){s.isMoved=!0,n.allowClick=!1;return}s.allowTouchCallbacks&&n.emit("touchMove",c),a.previousX=a.currentX,a.previousY=a.currentY,a.currentX=h,a.currentY=m;const f=a.currentX-a.startX,v=a.currentY-a.startY;if(n.params.threshold&&Math.sqrt(f**2+v**2)<n.params.threshold)return;if(typeof s.isScrolling>"u"){let k;n.isHorizontal()&&a.currentY===a.startY||n.isVertical()&&a.currentX===a.startX?s.isScrolling=!1:f*f+v*v>=25&&(k=Math.atan2(Math.abs(v),Math.abs(f))*180/Math.PI,s.isScrolling=n.isHorizontal()?k>i.touchAngle:90-k>i.touchAngle)}if(s.isScrolling&&n.emit("touchMoveOpposite",c),typeof s.startMoving>"u"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(s.startMoving=!0),s.isScrolling||c.type==="touchmove"&&s.preventTouchMoveFromPointerMove){s.isTouched=!1;return}if(!s.startMoving)return;n.allowClick=!1,!i.cssMode&&c.cancelable&&c.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&c.stopPropagation();let p=n.isHorizontal()?f:v,x=n.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;i.oneWayMovement&&(p=Math.abs(p)*(o?1:-1),x=Math.abs(x)*(o?1:-1)),a.diff=p,p*=i.touchRatio,o&&(p=-p,x=-x);const y=n.touchesDirection;n.swipeDirection=p>0?"prev":"next",n.touchesDirection=x>0?"prev":"next";const w=n.params.loop&&!i.cssMode,j=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!s.isMoved){if(w&&j&&n.loopFix({direction:n.swipeDirection}),s.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const k=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(k)}s.allowMomentumBounce=!1,i.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",c)}let N;if(new Date().getTime(),i._loopSwapReset!==!1&&s.isMoved&&s.allowThresholdMove&&y!==n.touchesDirection&&w&&j&&Math.abs(p)>=1){Object.assign(a,{startX:h,startY:m,currentX:h,currentY:m,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,s.startTranslate=s.currentTranslate;return}n.emit("sliderMove",c),s.isMoved=!0,s.currentTranslate=p+s.startTranslate;let C=!0,P=i.resistanceRatio;if(i.touchReleaseOnEdges&&(P=0),p>0?(w&&j&&!N&&s.allowThresholdMove&&s.currentTranslate>(i.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(i.slidesPerView!=="auto"&&n.slides.length-i.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>n.minTranslate()&&(C=!1,i.resistance&&(s.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+s.startTranslate+p)**P))):p<0&&(w&&j&&!N&&s.allowThresholdMove&&s.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(i.slidesPerView!=="auto"&&n.slides.length-i.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(i.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),s.currentTranslate<n.maxTranslate()&&(C=!1,i.resistance&&(s.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-s.startTranslate-p)**P))),C&&(c.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(s.currentTranslate=s.startTranslate),i.threshold>0)if(Math.abs(p)>i.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,s.currentTranslate=s.startTranslate,a.diff=n.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{s.currentTranslate=s.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(s.currentTranslate),n.setTranslate(s.currentTranslate))}function She(e){const t=this,n=t.touchEventsData;let s=e;s.originalEvent&&(s=s.originalEvent);let i;if(s.type==="touchend"||s.type==="touchcancel"){if(i=[...s.changedTouches].find(P=>P.identifier===n.touchId),!i||i.identifier!==n.touchId)return}else{if(n.touchId!==null||s.pointerId!==n.pointerId)return;i=s}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(s.type)&&!(["pointercancel","contextmenu"].includes(s.type)&&(t.browser.isSafari||t.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:o,touches:l,rtlTranslate:c,slidesGrid:d,enabled:h}=t;if(!h||!o.simulateTouch&&s.pointerType==="mouse")return;if(n.allowTouchCallbacks&&t.emit("touchEnd",s),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&o.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}o.grabCursor&&n.isMoved&&n.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const m=v0(),f=m-n.touchStartTime;if(t.allowClick){const P=s.path||s.composedPath&&s.composedPath();t.updateClickedSlide(P&&P[0]||s.target,P),t.emit("tap click",s),f<300&&m-n.lastClickTime<300&&t.emit("doubleTap doubleClick",s)}if(n.lastClickTime=v0(),Z_(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||l.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let v;if(o.followFinger?v=c?t.translate:-t.translate:v=-n.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:v});return}const p=v>=-t.maxTranslate()&&!t.params.loop;let x=0,y=t.slidesSizesGrid[0];for(let P=0;P<d.length;P+=P<o.slidesPerGroupSkip?1:o.slidesPerGroup){const k=P<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof d[P+k]<"u"?(p||v>=d[P]&&v<d[P+k])&&(x=P,y=d[P+k]-d[P]):(p||v>=d[P])&&(x=P,y=d[d.length-1]-d[d.length-2])}let w=null,j=null;o.rewind&&(t.isBeginning?j=o.virtual&&o.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(w=0));const N=(v-d[x])/y,C=x<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(f>o.longSwipesMs){if(!o.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(N>=o.longSwipesRatio?t.slideTo(o.rewind&&t.isEnd?w:x+C):t.slideTo(x)),t.swipeDirection==="prev"&&(N>1-o.longSwipesRatio?t.slideTo(x+C):j!==null&&N<0&&Math.abs(N)>o.longSwipesRatio?t.slideTo(j):t.slideTo(x))}else{if(!o.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(s.target===t.navigation.nextEl||s.target===t.navigation.prevEl)?s.target===t.navigation.nextEl?t.slideTo(x+C):t.slideTo(x):(t.swipeDirection==="next"&&t.slideTo(w!==null?w:x+C),t.swipeDirection==="prev"&&t.slideTo(j!==null?j:x))}}function pD(){const e=this,{params:t,el:n}=e;if(n&&n.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:i,snapGrid:a}=e,o=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const l=o&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!l?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!o?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=i,e.allowSlideNext=s,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}function _he(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Phe(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:s}=e;if(!s)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let i;const a=e.maxTranslate()-e.minTranslate();a===0?i=0:i=(e.translate-e.minTranslate())/a,i!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Che(e){const t=this;wy(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}function khe(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const VV=(e,t)=>{const n=La(),{params:s,el:i,wrapperEl:a,device:o}=e,l=!!s.nested,c=t==="on"?"addEventListener":"removeEventListener",d=t;!i||typeof i=="string"||(n[c]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:l}),i[c]("touchstart",e.onTouchStart,{passive:!1}),i[c]("pointerdown",e.onTouchStart,{passive:!1}),n[c]("touchmove",e.onTouchMove,{passive:!1,capture:l}),n[c]("pointermove",e.onTouchMove,{passive:!1,capture:l}),n[c]("touchend",e.onTouchEnd,{passive:!0}),n[c]("pointerup",e.onTouchEnd,{passive:!0}),n[c]("pointercancel",e.onTouchEnd,{passive:!0}),n[c]("touchcancel",e.onTouchEnd,{passive:!0}),n[c]("pointerout",e.onTouchEnd,{passive:!0}),n[c]("pointerleave",e.onTouchEnd,{passive:!0}),n[c]("contextmenu",e.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&i[c]("click",e.onClick,!0),s.cssMode&&a[c]("scroll",e.onScroll),s.updateOnWindowResize?e[d](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",pD,!0):e[d]("observerUpdate",pD,!0),i[c]("load",e.onLoad,{capture:!0}))};function The(){const e=this,{params:t}=e;e.onTouchStart=whe.bind(e),e.onTouchMove=Nhe.bind(e),e.onTouchEnd=She.bind(e),e.onDocumentTouchStart=khe.bind(e),t.cssMode&&(e.onScroll=Phe.bind(e)),e.onClick=_he.bind(e),e.onLoad=Che.bind(e),VV(e,"on")}function Ahe(){VV(this,"off")}var Ehe={attachEvents:The,detachEvents:Ahe};const xD=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function Ohe(){const e=this,{realIndex:t,initialized:n,params:s,el:i}=e,a=s.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const o=La(),l=s.breakpointsBase==="window"||!s.breakpointsBase?s.breakpointsBase:"container",c=["window","container"].includes(s.breakpointsBase)||!s.breakpointsBase?e.el:o.querySelector(s.breakpointsBase),d=e.getBreakpoint(a,l,c);if(!d||e.currentBreakpoint===d)return;const m=(d in a?a[d]:void 0)||e.originalParams,f=xD(e,s),v=xD(e,m),p=e.params.grabCursor,x=m.grabCursor,y=s.enabled;f&&!v?(i.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),e.emitContainerClasses()):!f&&v&&(i.classList.add(`${s.containerModifierClass}grid`),(m.grid.fill&&m.grid.fill==="column"||!m.grid.fill&&s.grid.fill==="column")&&i.classList.add(`${s.containerModifierClass}grid-column`),e.emitContainerClasses()),p&&!x?e.unsetGrabCursor():!p&&x&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(k=>{if(typeof m[k]>"u")return;const _=s[k]&&s[k].enabled,O=m[k]&&m[k].enabled;_&&!O&&e[k].disable(),!_&&O&&e[k].enable()});const w=m.direction&&m.direction!==s.direction,j=s.loop&&(m.slidesPerView!==s.slidesPerView||w),N=s.loop;w&&n&&e.changeDirection(),Bs(e.params,m);const C=e.params.enabled,P=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),y&&!C?e.disable():!y&&C&&e.enable(),e.currentBreakpoint=d,e.emit("_beforeBreakpoint",m),n&&(j?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!N&&P?(e.loopCreate(t),e.updateSlides()):N&&!P&&e.loopDestroy()),e.emit("breakpoint",m)}function Mhe(e,t,n){if(t===void 0&&(t="window"),!e||t==="container"&&!n)return;let s=!1;const i=bs(),a=t==="window"?i.innerHeight:n.clientHeight,o=Object.keys(e).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const c=parseFloat(l.substr(1));return{value:a*c,point:l}}return{value:l,point:l}});o.sort((l,c)=>parseInt(l.value,10)-parseInt(c.value,10));for(let l=0;l<o.length;l+=1){const{point:c,value:d}=o[l];t==="window"?i.matchMedia(`(min-width: ${d}px)`).matches&&(s=c):d<=n.clientWidth&&(s=c)}return s||"max"}var Dhe={setBreakpoint:Ohe,getBreakpoint:Mhe};function Ihe(e,t){const n=[];return e.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(i=>{s[i]&&n.push(t+i)}):typeof s=="string"&&n.push(t+s)}),n}function Lhe(){const e=this,{classNames:t,params:n,rtl:s,el:i,device:a}=e,o=Ihe(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:s},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...o),i.classList.add(...t),e.emitContainerClasses()}function Rhe(){const e=this,{el:t,classNames:n}=e;!t||typeof t=="string"||(t.classList.remove(...n),e.emitContainerClasses())}var $he={addClasses:Lhe,removeClasses:Rhe};function Fhe(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:s}=n;if(s){const i=e.slides.length-1,a=e.slidesGrid[i]+e.slidesSizesGrid[i]+s*2;e.isLocked=e.size>a}else e.isLocked=e.snapGrid.length===1;n.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),n.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}var zhe={checkOverflow:Fhe},Q_={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Bhe(e,t){return function(s){s===void 0&&(s={});const i=Object.keys(s)[0],a=s[i];if(typeof a!="object"||a===null){Bs(t,s);return}if(e[i]===!0&&(e[i]={enabled:!0}),i==="navigation"&&e[i]&&e[i].enabled&&!e[i].prevEl&&!e[i].nextEl&&(e[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&e[i]&&e[i].enabled&&!e[i].el&&(e[i].auto=!0),!(i in e&&"enabled"in a)){Bs(t,s);return}typeof e[i]=="object"&&!("enabled"in e[i])&&(e[i].enabled=!0),e[i]||(e[i]={enabled:!1}),Bs(t,s)}}const _1={eventsEmitter:$ue,update:Zue,translate:the,transition:ihe,slide:mhe,loop:ghe,grabCursor:jhe,events:Ehe,breakpoints:Dhe,checkOverflow:zhe,classes:$he},P1={};let gT=class lo{constructor(){let t,n;for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?n=i[0]:[t,n]=i,n||(n={}),n=Bs({},n),t&&!n.el&&(n.el=t);const o=La();if(n.el&&typeof n.el=="string"&&o.querySelectorAll(n.el).length>1){const h=[];return o.querySelectorAll(n.el).forEach(m=>{const f=Bs({},n,{el:m});h.push(new lo(f))}),h}const l=this;l.__swiper__=!0,l.support=$V(),l.device=FV({userAgent:n.userAgent}),l.browser=zV(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=[...l.__modules__],n.modules&&Array.isArray(n.modules)&&l.modules.push(...n.modules);const c={};l.modules.forEach(h=>{h({params:n,swiper:l,extendParams:Bhe(n,c),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})});const d=Bs({},Q_,c);return l.params=Bs({},d,P1,n),l.originalParams=Bs({},l.params),l.passedParams=Bs({},n),l.params&&l.params.on&&Object.keys(l.params.on).forEach(h=>{l.on(h,l.params.on[h])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),Object.assign(l,{enabled:l.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return l.params.direction==="horizontal"},isVertical(){return l.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:n,params:s}=this,i=Ca(n,`.${s.slideClass}, swiper-slide`),a=b0(i[0]);return b0(t)-a}getSlideIndexByData(t){return this.getSlideIndex(this.slides.find(n=>n.getAttribute("data-swiper-slide-index")*1===t))}recalcSlides(){const t=this,{slidesEl:n,params:s}=t;t.slides=Ca(n,`.${s.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,n){const s=this;t=Math.min(Math.max(t,0),1);const i=s.minTranslate(),o=(s.maxTranslate()-i)*t+i;s.translateTo(o,typeof n>"u"?0:n),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=t.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",n.join(" "))}getSlideClasses(t){const n=this;return n.destroyed?"":t.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=[];t.slides.forEach(s=>{const i=t.getSlideClasses(s);n.push({slideEl:s,classNames:i}),t.emit("_slideClass",s,i)}),t.emit("_slideClasses",n)}slidesPerViewDynamic(t,n){t===void 0&&(t="current"),n===void 0&&(n=!1);const s=this,{params:i,slides:a,slidesGrid:o,slidesSizesGrid:l,size:c,activeIndex:d}=s;let h=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let m=a[d]?Math.ceil(a[d].swiperSlideSize):0,f;for(let v=d+1;v<a.length;v+=1)a[v]&&!f&&(m+=Math.ceil(a[v].swiperSlideSize),h+=1,m>c&&(f=!0));for(let v=d-1;v>=0;v-=1)a[v]&&!f&&(m+=a[v].swiperSlideSize,h+=1,m>c&&(f=!0))}else if(t==="current")for(let m=d+1;m<a.length;m+=1)(n?o[m]+l[m]-o[d]<c:o[m]-o[d]<c)&&(h+=1);else for(let m=d-1;m>=0;m-=1)o[d]-o[m]<c&&(h+=1);return h}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:n,params:s}=t;s.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&wy(t,o)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function i(){const o=t.rtlTranslate?t.translate*-1:t.translate,l=Math.min(Math.max(o,t.maxTranslate()),t.minTranslate());t.setTranslate(l),t.updateActiveIndex(),t.updateSlidesClasses()}let a;if(s.freeMode&&s.freeMode.enabled&&!s.cssMode)i(),s.autoHeight&&t.updateAutoHeight();else{if((s.slidesPerView==="auto"||s.slidesPerView>1)&&t.isEnd&&!s.centeredSlides){const o=t.virtual&&s.virtual.enabled?t.virtual.slides:t.slides;a=t.slideTo(o.length-1,0,!1,!0)}else a=t.slideTo(t.activeIndex,0,!1,!0);a||i()}s.watchOverflow&&n!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,n){n===void 0&&(n=!0);const s=this,i=s.params.direction;return t||(t=i==="horizontal"?"vertical":"horizontal"),t===i||t!=="horizontal"&&t!=="vertical"||(s.el.classList.remove(`${s.params.containerModifierClass}${i}`),s.el.classList.add(`${s.params.containerModifierClass}${t}`),s.emitContainerClasses(),s.params.direction=t,s.slides.forEach(a=>{t==="vertical"?a.style.width="":a.style.height=""}),s.emit("changeDirection"),n&&s.update()),s}changeLanguageDirection(t){const n=this;n.rtl&&t==="rtl"||!n.rtl&&t==="ltr"||(n.rtl=t==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(t){const n=this;if(n.mounted)return!0;let s=t||n.params.el;if(typeof s=="string"&&(s=document.querySelector(s)),!s)return!1;s.swiper=n,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const i=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=s&&s.shadowRoot&&s.shadowRoot.querySelector?s.shadowRoot.querySelector(i()):Ca(s,i())[0];return!o&&n.params.createElements&&(o=j0("div",n.params.wrapperClass),s.append(o),Ca(s,`.${n.params.slideClass}`).forEach(l=>{o.append(l)})),Object.assign(n,{el:s,wrapperEl:o,slidesEl:n.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:o,hostEl:n.isElement?s.parentNode.host:s,mounted:!0,rtl:s.dir.toLowerCase()==="rtl"||Dl(s,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(s.dir.toLowerCase()==="rtl"||Dl(s,"direction")==="rtl"),wrongRTL:Dl(o,"display")==="-webkit-box"}),!0}init(t){const n=this;if(n.initialized||n.mount(t)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(void 0,!0),n.attachEvents();const i=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&i.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(a=>{a.complete?wy(n,a):a.addEventListener("load",o=>{wy(n,o.target)})}),X_(n),n.initialized=!0,X_(n),n.emit("init"),n.emit("afterInit"),n}destroy(t,n){t===void 0&&(t=!0),n===void 0&&(n=!0);const s=this,{params:i,el:a,wrapperEl:o,slides:l}=s;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),i.loop&&s.loopDestroy(),n&&(s.removeClasses(),a&&typeof a!="string"&&a.removeAttribute("style"),o&&o.removeAttribute("style"),l&&l.length&&l.forEach(c=>{c.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),c.removeAttribute("style"),c.removeAttribute("data-swiper-slide-index")})),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(c=>{s.off(c)}),t!==!1&&(s.el&&typeof s.el!="string"&&(s.el.swiper=null),_ue(s)),s.destroyed=!0),null}static extendDefaults(t){Bs(P1,t)}static get extendedDefaults(){return P1}static get defaults(){return Q_}static installModule(t){lo.prototype.__modules__||(lo.prototype.__modules__=[]);const n=lo.prototype.__modules__;typeof t=="function"&&n.indexOf(t)<0&&n.push(t)}static use(t){return Array.isArray(t)?(t.forEach(n=>lo.installModule(n)),lo):(lo.installModule(t),lo)}};Object.keys(_1).forEach(e=>{Object.keys(_1[e]).forEach(t=>{gT.prototype[t]=_1[e][t]})});gT.use([Lue,Rue]);const UV=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function zd(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"&&!e.__swiper__}function ch(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter(s=>n.indexOf(s)<0).forEach(s=>{typeof e[s]>"u"?e[s]=t[s]:zd(t[s])&&zd(e[s])&&Object.keys(t[s]).length>0?t[s].__swiper__?e[s]=t[s]:ch(e[s],t[s]):e[s]=t[s]})}function WV(e){return e===void 0&&(e={}),e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function HV(e){return e===void 0&&(e={}),e.pagination&&typeof e.pagination.el>"u"}function qV(e){return e===void 0&&(e={}),e.scrollbar&&typeof e.scrollbar.el>"u"}function KV(e){e===void 0&&(e="");const t=e.split(" ").map(s=>s.trim()).filter(s=>!!s),n=[];return t.forEach(s=>{n.indexOf(s)<0&&n.push(s)}),n.join(" ")}function Vhe(e){return e===void 0&&(e=""),e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}function Uhe(e){let{swiper:t,slides:n,passedParams:s,changedParams:i,nextEl:a,prevEl:o,scrollbarEl:l,paginationEl:c}=e;const d=i.filter(M=>M!=="children"&&M!=="direction"&&M!=="wrapperClass"),{params:h,pagination:m,navigation:f,scrollbar:v,virtual:p,thumbs:x}=t;let y,w,j,N,C,P,k,_;i.includes("thumbs")&&s.thumbs&&s.thumbs.swiper&&!s.thumbs.swiper.destroyed&&h.thumbs&&(!h.thumbs.swiper||h.thumbs.swiper.destroyed)&&(y=!0),i.includes("controller")&&s.controller&&s.controller.control&&h.controller&&!h.controller.control&&(w=!0),i.includes("pagination")&&s.pagination&&(s.pagination.el||c)&&(h.pagination||h.pagination===!1)&&m&&!m.el&&(j=!0),i.includes("scrollbar")&&s.scrollbar&&(s.scrollbar.el||l)&&(h.scrollbar||h.scrollbar===!1)&&v&&!v.el&&(N=!0),i.includes("navigation")&&s.navigation&&(s.navigation.prevEl||o)&&(s.navigation.nextEl||a)&&(h.navigation||h.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(C=!0);const O=M=>{t[M]&&(t[M].destroy(),M==="navigation"?(t.isElement&&(t[M].prevEl.remove(),t[M].nextEl.remove()),h[M].prevEl=void 0,h[M].nextEl=void 0,t[M].prevEl=void 0,t[M].nextEl=void 0):(t.isElement&&t[M].el.remove(),h[M].el=void 0,t[M].el=void 0))};i.includes("loop")&&t.isElement&&(h.loop&&!s.loop?P=!0:!h.loop&&s.loop?k=!0:_=!0),d.forEach(M=>{if(zd(h[M])&&zd(s[M]))Object.assign(h[M],s[M]),(M==="navigation"||M==="pagination"||M==="scrollbar")&&"enabled"in s[M]&&!s[M].enabled&&O(M);else{const T=s[M];(T===!0||T===!1)&&(M==="navigation"||M==="pagination"||M==="scrollbar")?T===!1&&O(M):h[M]=s[M]}}),d.includes("controller")&&!w&&t.controller&&t.controller.control&&h.controller&&h.controller.control&&(t.controller.control=h.controller.control),i.includes("children")&&n&&p&&h.virtual.enabled?(p.slides=n,p.update(!0)):i.includes("virtual")&&p&&h.virtual.enabled&&(n&&(p.slides=n),p.update(!0)),i.includes("children")&&n&&h.loop&&(_=!0),y&&x.init()&&x.update(!0),w&&(t.controller.control=h.controller.control),j&&(t.isElement&&(!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-pagination"),c.part.add("pagination"),t.el.appendChild(c)),c&&(h.pagination.el=c),m.init(),m.render(),m.update()),N&&(t.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-scrollbar"),l.part.add("scrollbar"),t.el.appendChild(l)),l&&(h.scrollbar.el=l),v.init(),v.updateSize(),v.setTranslate()),C&&(t.isElement&&((!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-next"),w0(a,t.hostEl.constructor.nextButtonSvg),a.part.add("button-next"),t.el.appendChild(a)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),w0(o,t.hostEl.constructor.prevButtonSvg),o.part.add("button-prev"),t.el.appendChild(o))),a&&(h.navigation.nextEl=a),o&&(h.navigation.prevEl=o),f.init(),f.update()),i.includes("allowSlideNext")&&(t.allowSlideNext=s.allowSlideNext),i.includes("allowSlidePrev")&&(t.allowSlidePrev=s.allowSlidePrev),i.includes("direction")&&t.changeDirection(s.direction,!1),(P||_)&&t.loopDestroy(),(k||_)&&t.loopCreate(),t.update()}function Whe(e,t){e===void 0&&(e={}),t===void 0&&(t=!0);const n={on:{}},s={},i={};ch(n,Q_),n._emitClasses=!0,n.init=!1;const a={},o=UV.map(c=>c.replace(/_/,"")),l=Object.assign({},e);return Object.keys(l).forEach(c=>{typeof e[c]>"u"||(o.indexOf(c)>=0?zd(e[c])?(n[c]={},i[c]={},ch(n[c],e[c]),ch(i[c],e[c])):(n[c]=e[c],i[c]=e[c]):c.search(/on[A-Z]/)===0&&typeof e[c]=="function"?t?s[`${c[2].toLowerCase()}${c.substr(3)}`]=e[c]:n.on[`${c[2].toLowerCase()}${c.substr(3)}`]=e[c]:a[c]=e[c])}),["navigation","pagination","scrollbar"].forEach(c=>{n[c]===!0&&(n[c]={}),n[c]===!1&&delete n[c]}),{params:n,passedParams:i,rest:a,events:s}}function Hhe(e,t){let{el:n,nextEl:s,prevEl:i,paginationEl:a,scrollbarEl:o,swiper:l}=e;WV(t)&&s&&i&&(l.params.navigation.nextEl=s,l.originalParams.navigation.nextEl=s,l.params.navigation.prevEl=i,l.originalParams.navigation.prevEl=i),HV(t)&&a&&(l.params.pagination.el=a,l.originalParams.pagination.el=a),qV(t)&&o&&(l.params.scrollbar.el=o,l.originalParams.scrollbar.el=o),l.init(n)}function qhe(e,t,n,s,i){const a=[];if(!t)return a;const o=c=>{a.indexOf(c)<0&&a.push(c)};if(n&&s){const c=s.map(i),d=n.map(i);c.join("")!==d.join("")&&o("children"),s.length!==n.length&&o("children")}return UV.filter(c=>c[0]==="_").map(c=>c.replace(/_/,"")).forEach(c=>{if(c in e&&c in t)if(zd(e[c])&&zd(t[c])){const d=Object.keys(e[c]),h=Object.keys(t[c]);d.length!==h.length?o(c):(d.forEach(m=>{e[c][m]!==t[c][m]&&o(c)}),h.forEach(m=>{e[c][m]!==t[c][m]&&o(c)}))}else e[c]!==t[c]&&o(c)}),a}const Khe=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.emit("_virtualUpdated"),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function N0(){return N0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},N0.apply(this,arguments)}function GV(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function ZV(e){const t=[];return te.Children.toArray(e).forEach(n=>{GV(n)?t.push(n):n.props&&n.props.children&&ZV(n.props.children).forEach(s=>t.push(s))}),t}function Ghe(e){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return te.Children.toArray(e).forEach(s=>{if(GV(s))t.push(s);else if(s.props&&s.props.slot&&n[s.props.slot])n[s.props.slot].push(s);else if(s.props&&s.props.children){const i=ZV(s.props.children);i.length>0?i.forEach(a=>t.push(a)):n["container-end"].push(s)}else n["container-end"].push(s)}),{slides:t,slots:n}}function Zhe(e,t,n){if(!n)return null;const s=h=>{let m=h;return h<0?m=t.length+h:m>=t.length&&(m=m-t.length),m},i=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:a,to:o}=n,l=e.params.loop?-t.length:0,c=e.params.loop?t.length*2:t.length,d=[];for(let h=l;h<c;h+=1)h>=a&&h<=o&&d.push(t[s(h)]);return d.map((h,m)=>te.cloneElement(h,{swiper:e,style:i,key:h.props.virtualIndex||h.key||`slide-${m}`}))}function dp(e,t){return typeof window>"u"?b.useEffect(e,t):b.useLayoutEffect(e,t)}const gD=b.createContext(null),Yhe=b.createContext(null),vT=b.forwardRef(function(e,t){let{className:n,tag:s="div",wrapperTag:i="div",children:a,onSwiper:o,...l}=e===void 0?{}:e,c=!1;const[d,h]=b.useState("swiper"),[m,f]=b.useState(null),[v,p]=b.useState(!1),x=b.useRef(!1),y=b.useRef(null),w=b.useRef(null),j=b.useRef(null),N=b.useRef(null),C=b.useRef(null),P=b.useRef(null),k=b.useRef(null),_=b.useRef(null),{params:O,passedParams:M,rest:T,events:I}=Whe(l),{slides:A,slots:V}=Ghe(a),D=()=>{p(!v)};Object.assign(O.on,{_containerClasses(B,z){h(z)}});const W=()=>{Object.assign(O.on,I),c=!0;const B={...O};if(delete B.wrapperClass,w.current=new gT(B),w.current.virtual&&w.current.params.virtual.enabled){w.current.virtual.slides=A;const z={cache:!1,slides:A,renderExternal:f,renderExternalUpdate:!1};ch(w.current.params.virtual,z),ch(w.current.originalParams.virtual,z)}};y.current||W(),w.current&&w.current.on("_beforeBreakpoint",D);const U=()=>{c||!I||!w.current||Object.keys(I).forEach(B=>{w.current.on(B,I[B])})},Q=()=>{!I||!w.current||Object.keys(I).forEach(B=>{w.current.off(B,I[B])})};b.useEffect(()=>()=>{w.current&&w.current.off("_beforeBreakpoint",D)}),b.useEffect(()=>{!x.current&&w.current&&(w.current.emitSlidesClasses(),x.current=!0)}),dp(()=>{if(t&&(t.current=y.current),!!y.current)return w.current.destroyed&&W(),Hhe({el:y.current,nextEl:C.current,prevEl:P.current,paginationEl:k.current,scrollbarEl:_.current,swiper:w.current},O),o&&!w.current.destroyed&&o(w.current),()=>{w.current&&!w.current.destroyed&&w.current.destroy(!0,!1)}},[]),dp(()=>{U();const B=qhe(M,j.current,A,N.current,z=>z.key);return j.current=M,N.current=A,B.length&&w.current&&!w.current.destroyed&&Uhe({swiper:w.current,slides:A,passedParams:M,changedParams:B,nextEl:C.current,prevEl:P.current,scrollbarEl:_.current,paginationEl:k.current}),()=>{Q()}}),dp(()=>{Khe(w.current)},[m]);function q(){return O.virtual?Zhe(w.current,A,m):A.map((B,z)=>te.cloneElement(B,{swiper:w.current,swiperSlideIndex:z}))}return te.createElement(s,N0({ref:y,className:KV(`${d}${n?` ${n}`:""}`)},T),te.createElement(Yhe.Provider,{value:w.current},V["container-start"],te.createElement(i,{className:Vhe(O.wrapperClass)},V["wrapper-start"],q(),V["wrapper-end"]),WV(O)&&te.createElement(te.Fragment,null,te.createElement("div",{ref:P,className:"swiper-button-prev"}),te.createElement("div",{ref:C,className:"swiper-button-next"})),qV(O)&&te.createElement("div",{ref:_,className:"swiper-scrollbar"}),HV(O)&&te.createElement("div",{ref:k,className:"swiper-pagination"}),V["container-end"]))});vT.displayName="Swiper";const yT=b.forwardRef(function(e,t){let{tag:n="div",children:s,className:i="",swiper:a,zoom:o,lazy:l,virtualIndex:c,swiperSlideIndex:d,...h}=e===void 0?{}:e;const m=b.useRef(null),[f,v]=b.useState("swiper-slide"),[p,x]=b.useState(!1);function y(C,P,k){P===m.current&&v(k)}dp(()=>{if(typeof d<"u"&&(m.current.swiperSlideIndex=d),t&&(t.current=m.current),!(!m.current||!a)){if(a.destroyed){f!=="swiper-slide"&&v("swiper-slide");return}return a.on("_slideClass",y),()=>{a&&a.off("_slideClass",y)}}}),dp(()=>{a&&m.current&&!a.destroyed&&v(a.getSlideClasses(m.current))},[a]);const w={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},j=()=>typeof s=="function"?s(w):s,N=()=>{x(!0)};return te.createElement(n,N0({ref:m,className:KV(`${f}${i?` ${i}`:""}`),"data-swiper-slide-index":c,onLoad:N},h),o&&te.createElement(gD.Provider,{value:w},te.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},j(),l&&!p&&te.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&te.createElement(gD.Provider,{value:w},j(),l&&!p&&te.createElement("div",{className:"swiper-lazy-preloader"})))});yT.displayName="SwiperSlide";function YV(e,t,n,s){return e.params.createElements&&Object.keys(s).forEach(i=>{if(!n[i]&&n.auto===!0){let a=Ca(e.el,`.${s[i]}`)[0];a||(a=j0("div",s[i]),a.className=s[i],e.el.append(a)),n[i]=a,t[i]=a}}),n}function XV(e){let{swiper:t,extendParams:n,on:s,emit:i}=e;n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};function a(p){let x;return p&&typeof p=="string"&&t.isElement&&(x=t.el.querySelector(p)||t.hostEl.querySelector(p),x)?x:(p&&(typeof p=="string"&&(x=[...document.querySelectorAll(p)]),t.params.uniqueNavElements&&typeof p=="string"&&x&&x.length>1&&t.el.querySelectorAll(p).length===1?x=t.el.querySelector(p):x&&x.length===1&&(x=x[0])),p&&!x?p:x)}function o(p,x){const y=t.params.navigation;p=Tn(p),p.forEach(w=>{w&&(w.classList[x?"add":"remove"](...y.disabledClass.split(" ")),w.tagName==="BUTTON"&&(w.disabled=x),t.params.watchOverflow&&t.enabled&&w.classList[t.isLocked?"add":"remove"](y.lockClass))})}function l(){const{nextEl:p,prevEl:x}=t.navigation;if(t.params.loop){o(x,!1),o(p,!1);return}o(x,t.isBeginning&&!t.params.rewind),o(p,t.isEnd&&!t.params.rewind)}function c(p){p.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),i("navigationPrev"))}function d(p){p.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),i("navigationNext"))}function h(){const p=t.params.navigation;if(t.params.navigation=YV(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(p.nextEl||p.prevEl))return;let x=a(p.nextEl),y=a(p.prevEl);Object.assign(t.navigation,{nextEl:x,prevEl:y}),x=Tn(x),y=Tn(y);const w=(j,N)=>{j&&j.addEventListener("click",N==="next"?d:c),!t.enabled&&j&&j.classList.add(...p.lockClass.split(" "))};x.forEach(j=>w(j,"next")),y.forEach(j=>w(j,"prev"))}function m(){let{nextEl:p,prevEl:x}=t.navigation;p=Tn(p),x=Tn(x);const y=(w,j)=>{w.removeEventListener("click",j==="next"?d:c),w.classList.remove(...t.params.navigation.disabledClass.split(" "))};p.forEach(w=>y(w,"next")),x.forEach(w=>y(w,"prev"))}s("init",()=>{t.params.navigation.enabled===!1?v():(h(),l())}),s("toEdge fromEdge lock unlock",()=>{l()}),s("destroy",()=>{m()}),s("enable disable",()=>{let{nextEl:p,prevEl:x}=t.navigation;if(p=Tn(p),x=Tn(x),t.enabled){l();return}[...p,...x].filter(y=>!!y).forEach(y=>y.classList.add(t.params.navigation.lockClass))}),s("click",(p,x)=>{let{nextEl:y,prevEl:w}=t.navigation;y=Tn(y),w=Tn(w);const j=x.target;let N=w.includes(j)||y.includes(j);if(t.isElement&&!N){const C=x.path||x.composedPath&&x.composedPath();C&&(N=C.find(P=>y.includes(P)||w.includes(P)))}if(t.params.navigation.hideOnClick&&!N){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===j||t.pagination.el.contains(j)))return;let C;y.length?C=y[0].classList.contains(t.params.navigation.hiddenClass):w.length&&(C=w[0].classList.contains(t.params.navigation.hiddenClass)),i(C===!0?"navigationShow":"navigationHide"),[...y,...w].filter(P=>!!P).forEach(P=>P.classList.toggle(t.params.navigation.hiddenClass))}});const f=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),h(),l()},v=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),m()};Object.assign(t.navigation,{enable:f,disable:v,update:l,init:h,destroy:m})}function _f(e){return e===void 0&&(e=""),`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function QV(e){let{swiper:t,extendParams:n,on:s,emit:i}=e;const a="swiper-pagination";n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:j=>j,formatFractionTotal:j=>j,bulletClass:`${a}-bullet`,bulletActiveClass:`${a}-bullet-active`,modifierClass:`${a}-`,currentClass:`${a}-current`,totalClass:`${a}-total`,hiddenClass:`${a}-hidden`,progressbarFillClass:`${a}-progressbar-fill`,progressbarOppositeClass:`${a}-progressbar-opposite`,clickableClass:`${a}-clickable`,lockClass:`${a}-lock`,horizontalClass:`${a}-horizontal`,verticalClass:`${a}-vertical`,paginationDisabledClass:`${a}-disabled`}}),t.pagination={el:null,bullets:[]};let o,l=0;function c(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function d(j,N){const{bulletActiveClass:C}=t.params.pagination;j&&(j=j[`${N==="prev"?"previous":"next"}ElementSibling`],j&&(j.classList.add(`${C}-${N}`),j=j[`${N==="prev"?"previous":"next"}ElementSibling`],j&&j.classList.add(`${C}-${N}-${N}`)))}function h(j,N,C){if(j=j%C,N=N%C,N===j+1)return"next";if(N===j-1)return"previous"}function m(j){const N=j.target.closest(_f(t.params.pagination.bulletClass));if(!N)return;j.preventDefault();const C=b0(N)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===C)return;const P=h(t.realIndex,C,t.slides.length);P==="next"?t.slideNext():P==="previous"?t.slidePrev():t.slideToLoop(C)}else t.slideTo(C)}function f(){const j=t.rtl,N=t.params.pagination;if(c())return;let C=t.pagination.el;C=Tn(C);let P,k;const _=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,O=t.params.loop?Math.ceil(_/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(k=t.previousRealIndex||0,P=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):typeof t.snapIndex<"u"?(P=t.snapIndex,k=t.previousSnapIndex):(k=t.previousIndex||0,P=t.activeIndex||0),N.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const M=t.pagination.bullets;let T,I,A;if(N.dynamicBullets&&(o=Y_(M[0],t.isHorizontal()?"width":"height"),C.forEach(V=>{V.style[t.isHorizontal()?"width":"height"]=`${o*(N.dynamicMainBullets+4)}px`}),N.dynamicMainBullets>1&&k!==void 0&&(l+=P-(k||0),l>N.dynamicMainBullets-1?l=N.dynamicMainBullets-1:l<0&&(l=0)),T=Math.max(P-l,0),I=T+(Math.min(M.length,N.dynamicMainBullets)-1),A=(I+T)/2),M.forEach(V=>{const D=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(W=>`${N.bulletActiveClass}${W}`)].map(W=>typeof W=="string"&&W.includes(" ")?W.split(" "):W).flat();V.classList.remove(...D)}),C.length>1)M.forEach(V=>{const D=b0(V);D===P?V.classList.add(...N.bulletActiveClass.split(" ")):t.isElement&&V.setAttribute("part","bullet"),N.dynamicBullets&&(D>=T&&D<=I&&V.classList.add(...`${N.bulletActiveClass}-main`.split(" ")),D===T&&d(V,"prev"),D===I&&d(V,"next"))});else{const V=M[P];if(V&&V.classList.add(...N.bulletActiveClass.split(" ")),t.isElement&&M.forEach((D,W)=>{D.setAttribute("part",W===P?"bullet-active":"bullet")}),N.dynamicBullets){const D=M[T],W=M[I];for(let U=T;U<=I;U+=1)M[U]&&M[U].classList.add(...`${N.bulletActiveClass}-main`.split(" "));d(D,"prev"),d(W,"next")}}if(N.dynamicBullets){const V=Math.min(M.length,N.dynamicMainBullets+4),D=(o*V-o)/2-A*o,W=j?"right":"left";M.forEach(U=>{U.style[t.isHorizontal()?W:"top"]=`${D}px`})}}C.forEach((M,T)=>{if(N.type==="fraction"&&(M.querySelectorAll(_f(N.currentClass)).forEach(I=>{I.textContent=N.formatFractionCurrent(P+1)}),M.querySelectorAll(_f(N.totalClass)).forEach(I=>{I.textContent=N.formatFractionTotal(O)})),N.type==="progressbar"){let I;N.progressbarOpposite?I=t.isHorizontal()?"vertical":"horizontal":I=t.isHorizontal()?"horizontal":"vertical";const A=(P+1)/O;let V=1,D=1;I==="horizontal"?V=A:D=A,M.querySelectorAll(_f(N.progressbarFillClass)).forEach(W=>{W.style.transform=`translate3d(0,0,0) scaleX(${V}) scaleY(${D})`,W.style.transitionDuration=`${t.params.speed}ms`})}N.type==="custom"&&N.renderCustom?(w0(M,N.renderCustom(t,P+1,O)),T===0&&i("paginationRender",M)):(T===0&&i("paginationRender",M),i("paginationUpdate",M)),t.params.watchOverflow&&t.enabled&&M.classList[t.isLocked?"add":"remove"](N.lockClass)})}function v(){const j=t.params.pagination;if(c())return;const N=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let C=t.pagination.el;C=Tn(C);let P="";if(j.type==="bullets"){let k=t.params.loop?Math.ceil(N/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&k>N&&(k=N);for(let _=0;_<k;_+=1)j.renderBullet?P+=j.renderBullet.call(t,_,j.bulletClass):P+=`<${j.bulletElement} ${t.isElement?'part="bullet"':""} class="${j.bulletClass}"></${j.bulletElement}>`}j.type==="fraction"&&(j.renderFraction?P=j.renderFraction.call(t,j.currentClass,j.totalClass):P=`<span class="${j.currentClass}"></span> / <span class="${j.totalClass}"></span>`),j.type==="progressbar"&&(j.renderProgressbar?P=j.renderProgressbar.call(t,j.progressbarFillClass):P=`<span class="${j.progressbarFillClass}"></span>`),t.pagination.bullets=[],C.forEach(k=>{j.type!=="custom"&&w0(k,P||""),j.type==="bullets"&&t.pagination.bullets.push(...k.querySelectorAll(_f(j.bulletClass)))}),j.type!=="custom"&&i("paginationRender",C[0])}function p(){t.params.pagination=YV(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const j=t.params.pagination;if(!j.el)return;let N;typeof j.el=="string"&&t.isElement&&(N=t.el.querySelector(j.el)),!N&&typeof j.el=="string"&&(N=[...document.querySelectorAll(j.el)]),N||(N=j.el),!(!N||N.length===0)&&(t.params.uniqueNavElements&&typeof j.el=="string"&&Array.isArray(N)&&N.length>1&&(N=[...t.el.querySelectorAll(j.el)],N.length>1&&(N=N.find(C=>RV(C,".swiper")[0]===t.el))),Array.isArray(N)&&N.length===1&&(N=N[0]),Object.assign(t.pagination,{el:N}),N=Tn(N),N.forEach(C=>{j.type==="bullets"&&j.clickable&&C.classList.add(...(j.clickableClass||"").split(" ")),C.classList.add(j.modifierClass+j.type),C.classList.add(t.isHorizontal()?j.horizontalClass:j.verticalClass),j.type==="bullets"&&j.dynamicBullets&&(C.classList.add(`${j.modifierClass}${j.type}-dynamic`),l=0,j.dynamicMainBullets<1&&(j.dynamicMainBullets=1)),j.type==="progressbar"&&j.progressbarOpposite&&C.classList.add(j.progressbarOppositeClass),j.clickable&&C.addEventListener("click",m),t.enabled||C.classList.add(j.lockClass)}))}function x(){const j=t.params.pagination;if(c())return;let N=t.pagination.el;N&&(N=Tn(N),N.forEach(C=>{C.classList.remove(j.hiddenClass),C.classList.remove(j.modifierClass+j.type),C.classList.remove(t.isHorizontal()?j.horizontalClass:j.verticalClass),j.clickable&&(C.classList.remove(...(j.clickableClass||"").split(" ")),C.removeEventListener("click",m))})),t.pagination.bullets&&t.pagination.bullets.forEach(C=>C.classList.remove(...j.bulletActiveClass.split(" ")))}s("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const j=t.params.pagination;let{el:N}=t.pagination;N=Tn(N),N.forEach(C=>{C.classList.remove(j.horizontalClass,j.verticalClass),C.classList.add(t.isHorizontal()?j.horizontalClass:j.verticalClass)})}),s("init",()=>{t.params.pagination.enabled===!1?w():(p(),v(),f())}),s("activeIndexChange",()=>{typeof t.snapIndex>"u"&&f()}),s("snapIndexChange",()=>{f()}),s("snapGridLengthChange",()=>{v(),f()}),s("destroy",()=>{x()}),s("enable disable",()=>{let{el:j}=t.pagination;j&&(j=Tn(j),j.forEach(N=>N.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),s("lock unlock",()=>{f()}),s("click",(j,N)=>{const C=N.target,P=Tn(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&P&&P.length>0&&!C.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&C===t.navigation.nextEl||t.navigation.prevEl&&C===t.navigation.prevEl))return;const k=P[0].classList.contains(t.params.pagination.hiddenClass);i(k===!0?"paginationShow":"paginationHide"),P.forEach(_=>_.classList.toggle(t.params.pagination.hiddenClass))}});const y=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:j}=t.pagination;j&&(j=Tn(j),j.forEach(N=>N.classList.remove(t.params.pagination.paginationDisabledClass))),p(),v(),f()},w=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:j}=t.pagination;j&&(j=Tn(j),j.forEach(N=>N.classList.add(t.params.pagination.paginationDisabledClass))),x()};Object.assign(t.pagination,{enable:y,disable:w,render:v,update:f,init:p,destroy:x})}function JV(e){let{swiper:t,extendParams:n,on:s,emit:i,params:a}=e;t.autoplay={running:!1,paused:!1,timeLeft:0},n({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,l,c=a&&a.autoplay?a.autoplay.delay:3e3,d=a&&a.autoplay?a.autoplay.delay:3e3,h,m=new Date().getTime(),f,v,p,x,y,w,j;function N(q){!t||t.destroyed||!t.wrapperEl||q.target===t.wrapperEl&&(t.wrapperEl.removeEventListener("transitionend",N),!(j||q.detail&&q.detail.bySwiperTouchMove)&&T())}const C=()=>{if(t.destroyed||!t.autoplay.running)return;t.autoplay.paused?f=!0:f&&(d=h,f=!1);const q=t.autoplay.paused?h:m+d-new Date().getTime();t.autoplay.timeLeft=q,i("autoplayTimeLeft",q,q/c),l=requestAnimationFrame(()=>{C()})},P=()=>{let q;return t.virtual&&t.params.virtual.enabled?q=t.slides.find(z=>z.classList.contains("swiper-slide-active")):q=t.slides[t.activeIndex],q?parseInt(q.getAttribute("data-swiper-autoplay"),10):void 0},k=q=>{if(t.destroyed||!t.autoplay.running)return;cancelAnimationFrame(l),C();let B=typeof q>"u"?t.params.autoplay.delay:q;c=t.params.autoplay.delay,d=t.params.autoplay.delay;const z=P();!Number.isNaN(z)&&z>0&&typeof q>"u"&&(B=z,c=z,d=z),h=B;const H=t.params.speed,X=()=>{!t||t.destroyed||(t.params.autoplay.reverseDirection?!t.isBeginning||t.params.loop||t.params.rewind?(t.slidePrev(H,!0,!0),i("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(t.slides.length-1,H,!0,!0),i("autoplay")):!t.isEnd||t.params.loop||t.params.rewind?(t.slideNext(H,!0,!0),i("autoplay")):t.params.autoplay.stopOnLastSlide||(t.slideTo(0,H,!0,!0),i("autoplay")),t.params.cssMode&&(m=new Date().getTime(),requestAnimationFrame(()=>{k()})))};return B>0?(clearTimeout(o),o=setTimeout(()=>{X()},B)):requestAnimationFrame(()=>{X()}),B},_=()=>{m=new Date().getTime(),t.autoplay.running=!0,k(),i("autoplayStart")},O=()=>{t.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(l),i("autoplayStop")},M=(q,B)=>{if(t.destroyed||!t.autoplay.running)return;clearTimeout(o),q||(w=!0);const z=()=>{i("autoplayPause"),t.params.autoplay.waitForTransition?t.wrapperEl.addEventListener("transitionend",N):T()};if(t.autoplay.paused=!0,B){y&&(h=t.params.autoplay.delay),y=!1,z();return}h=(h||t.params.autoplay.delay)-(new Date().getTime()-m),!(t.isEnd&&h<0&&!t.params.loop)&&(h<0&&(h=0),z())},T=()=>{t.isEnd&&h<0&&!t.params.loop||t.destroyed||!t.autoplay.running||(m=new Date().getTime(),w?(w=!1,k(h)):k(),t.autoplay.paused=!1,i("autoplayResume"))},I=()=>{if(t.destroyed||!t.autoplay.running)return;const q=La();q.visibilityState==="hidden"&&(w=!0,M(!0)),q.visibilityState==="visible"&&T()},A=q=>{q.pointerType==="mouse"&&(w=!0,j=!0,!(t.animating||t.autoplay.paused)&&M(!0))},V=q=>{q.pointerType==="mouse"&&(j=!1,t.autoplay.paused&&T())},D=()=>{t.params.autoplay.pauseOnMouseEnter&&(t.el.addEventListener("pointerenter",A),t.el.addEventListener("pointerleave",V))},W=()=>{t.el&&typeof t.el!="string"&&(t.el.removeEventListener("pointerenter",A),t.el.removeEventListener("pointerleave",V))},U=()=>{La().addEventListener("visibilitychange",I)},Q=()=>{La().removeEventListener("visibilitychange",I)};s("init",()=>{t.params.autoplay.enabled&&(D(),U(),_())}),s("destroy",()=>{W(),Q(),t.autoplay.running&&O()}),s("_freeModeStaticRelease",()=>{(p||w)&&T()}),s("_freeModeNoMomentumRelease",()=>{t.params.autoplay.disableOnInteraction?O():M(!0,!0)}),s("beforeTransitionStart",(q,B,z)=>{t.destroyed||!t.autoplay.running||(z||!t.params.autoplay.disableOnInteraction?M(!0,!0):O())}),s("sliderFirstMove",()=>{if(!(t.destroyed||!t.autoplay.running)){if(t.params.autoplay.disableOnInteraction){O();return}v=!0,p=!1,w=!1,x=setTimeout(()=>{w=!0,p=!0,M(!0)},200)}}),s("touchEnd",()=>{if(!(t.destroyed||!t.autoplay.running||!v)){if(clearTimeout(x),clearTimeout(o),t.params.autoplay.disableOnInteraction){p=!1,v=!1;return}p&&t.params.cssMode&&T(),p=!1,v=!1}}),s("slideChange",()=>{t.destroyed||!t.autoplay.running||(y=!0)}),Object.assign(t.autoplay,{start:_,stop:O,pause:M,resume:T})}const Xhe=()=>{const[e,t]=b.useState({days:2,hours:23,minutes:59,seconds:59});return b.useEffect(()=>{const n=()=>{const i=new Date,l=2-Math.floor(i.getTime()/(1e3*60*60*24))%3,c=new Date(i);if(c.setHours(23,59,59,999),l===0){const d=c.getTime()-i.getTime(),h=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),m=Math.floor(d%(1e3*60*60)/(1e3*60)),f=Math.floor(d%(1e3*60)/1e3);t({days:0,hours:h,minutes:m,seconds:f})}else t({days:l,hours:23-i.getHours(),minutes:59-i.getMinutes(),seconds:59-i.getSeconds()})},s=setInterval(n,1e3);return n(),()=>clearInterval(s)},[]),r.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-4 mt-6",children:[r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3 sm:p-4 text-center min-w-[60px] sm:min-w-[80px]",children:[r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:e.days.toString().padStart(2,"0")}),r.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:"Days"})]}),r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:":"}),r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3 sm:p-4 text-center min-w-[60px] sm:min-w-[80px]",children:[r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:e.hours.toString().padStart(2,"0")}),r.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:"Hours"})]}),r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:":"}),r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3 sm:p-4 text-center min-w-[60px] sm:min-w-[80px]",children:[r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:e.minutes.toString().padStart(2,"0")}),r.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:"Minutes"})]}),r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:":"}),r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3 sm:p-4 text-center min-w-[60px] sm:min-w-[80px]",children:[r.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white",children:e.seconds.toString().padStart(2,"0")}),r.jsx("div",{className:"text-xs sm:text-sm opacity-80",children:"Seconds"})]})]})},Qhe="/assets/slider2.jpg",Jhe="/assets/slider1.jpg",eme="/assets/slide3.jpg";function vD(){var q,B;const[,e]=Jr(),{user:t,isLoading:n}=Gt(),{mode:s}=ua();b.useEffect(()=>{!n&&(t==null?void 0:t.role)==="shopkeeper"&&e("/seller/dashboard")},[t,n,e]);const o=s==="shopping"?[{name:"Electronics",icon:"",href:"/products?category=4"},{name:"Clothing",icon:"",href:"/products?category=5"},{name:"Home & Garden",icon:"",href:"/products?category=3"},{name:"Books",icon:"",href:"/products?category=6"}]:[{name:"Indian Cuisine",icon:"",href:"/products?category=food&cuisine=indian"},{name:"Fast Food",icon:"",href:"/products?category=food&cuisine=fast-food"},{name:"Pizza",icon:"",href:"/products?category=food&type=pizza"},{name:"Desserts",icon:"",href:"/products?category=food&cuisine=desserts"}];b.useEffect(()=>{(async()=>{try{await Kt("/api/recommendations/track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:(t==null?void 0:t.id)||null,page:"/",action:"homepage_visit"})})}catch(H){console.log("Visit tracking failed (non-critical):",H)}})()},[t]);const{data:l,isLoading:c,error:d,refetch:h}=Le({queryKey:["/api/recommendations/homepage",s,t==null?void 0:t.id],queryFn:async()=>{const z=new URLSearchParams({mode:s,...(t==null?void 0:t.id)&&{userId:t.id.toString()}}),H=await fetch(`/api/recommendations/homepage?${z}`,{credentials:"include"});if(!H.ok)throw new Error(`Failed to fetch recommendations: ${H.statusText}`);return H.json()},retry:3,staleTime:5*60*1e3}),{data:m,isLoading:f,error:v,refetch:p}=Le({queryKey:["/api/products"],retry:3,staleTime:5*60*1e3,enabled:!((q=l==null?void 0:l.products)!=null&&q.length)}),{data:x,isLoading:y,error:w,refetch:j}=Le({queryKey:["/api/stores"],retry:3,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,enabled:!((B=l==null?void 0:l.stores)!=null&&B.length)}),{data:N}=Le({queryKey:["/api/flash-sales/active"],staleTime:2*60*1e3}),C=[{id:1,title:"From Click to Doorstep  In Just One Hour",description:"Shop fast. Get it faster.",buttonText:"Shop Now",url:"/products",image:Qhe,overlay:"rgba(0, 0, 0, 0.4)"},{id:2,title:"Hot & Fresh  Tasty Food at Your Doorstep",description:"Delicious meals delivered fast",buttonText:"Order Now",url:"/restaurants",image:Jhe,overlay:"rgba(0, 0, 0, 0.4)"},{id:3,title:"Flash Sale! Limited Time Offer",description:"Hurry! These deals end in",buttonText:"Shop Now",url:"/flash-sales",image:eme,overlay:"rgba(0, 0, 0, 0.5)",showTimer:!0}];v&&console.error("Products loading failed:",{error:v,message:v instanceof Error?v.message:"Unknown error",timestamp:new Date().toISOString()}),w&&console.error("Stores loading failed:",{error:w,message:w instanceof Error?w.message:"Unknown error",timestamp:new Date().toISOString()}),m&&console.log("Products loaded:",m.length),x&&console.log("Stores loaded:",x.length);const P=(l==null?void 0:l.products)||[],k=(l==null?void 0:l.stores)||[],_=(l==null?void 0:l.isPersonalized)||!1,O=P.length>0?P.slice(0,20):(m==null?void 0:m.filter(z=>s==="shopping"?z.productType!=="food":z.productType==="food").slice(0,20))||[],M=k.length>0?k.slice(0,10):(x==null?void 0:x.filter(z=>s==="shopping"?z.storeType!=="restaurant":z.storeType==="restaurant").slice(0,10))||[],T=c||f&&!P.length,I=c||y&&!k.length,A=d&&v,V=d&&w,D=()=>r.jsxs("div",{className:"text-center py-12",children:[r.jsxs(ii,{className:"max-w-md mx-auto",children:[r.jsx(Nr,{className:"h-4 w-4"}),r.jsx(ai,{children:"Failed to load products. Please try again."})]}),r.jsxs($,{onClick:()=>p(),variant:"outline",className:"mt-4",disabled:f,children:[r.jsx(Ms,{className:`mr-2 h-4 w-4 ${f?"animate-spin":""}`}),"Retry"]})]}),W=()=>r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 sm:gap-4",children:Array.from({length:6}).map((z,H)=>r.jsx(K,{className:"animate-pulse",children:r.jsxs(G,{className:"p-4",children:[r.jsx("div",{className:"bg-gray-200 h-32 rounded-md mb-3"}),r.jsx("div",{className:"bg-gray-200 h-4 rounded mb-2"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-3/4"})]})},H))}),U=()=>r.jsxs("div",{className:"text-center py-12",children:[r.jsxs(ii,{className:"max-w-md mx-auto",children:[r.jsx(Nr,{className:"h-4 w-4"}),r.jsx(ai,{children:"Failed to load stores. Please try again."})]}),r.jsxs($,{onClick:()=>j(),variant:"outline",className:"mt-4",disabled:y,children:[r.jsx(Ms,{className:`mr-2 h-4 w-4 ${y?"animate-spin":""}`}),"Retry"]})]}),Q=()=>r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8",children:Array.from({length:4}).map((z,H)=>r.jsx(K,{className:"animate-pulse",children:r.jsxs(G,{className:"p-6",children:[r.jsx("div",{className:"bg-gray-200 h-24 rounded-md mb-4"}),r.jsx("div",{className:"bg-gray-200 h-5 rounded mb-2"}),r.jsx("div",{className:"bg-gray-200 h-4 rounded w-2/3 mb-2"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-1/2"})]})},H))});return r.jsxs("div",{className:"min-h-screen",children:[r.jsx("section",{className:"relative w-full h-[50vh] min-h-[300px]",children:r.jsxs(vT,{modules:[XV,QV,JV],spaceBetween:0,slidesPerView:1,navigation:!0,pagination:{clickable:!0,el:".swiper-pagination",type:"bullets"},autoplay:{delay:4e3,disableOnInteraction:!1},className:"h-full w-full m-0 p-0",style:{"--swiper-navigation-color":"#ffffff","--swiper-pagination-color":"#ffffff","--swiper-pagination-bullet-inactive-color":"rgba(255, 255, 255, 0.5)","--swiper-pagination-bullet-inactive-opacity":"1","--swiper-pagination-bullet-size":"10px","--swiper-pagination-bullet-horizontal-gap":"6px"},children:[C.map(z=>r.jsx(yT,{children:r.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-0 m-0",style:{background:`url(${z.image}) center/cover no-repeat`,position:"relative",height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[r.jsx("div",{className:"absolute inset-0 bg-black/40"}),r.jsxs("div",{className:"relative z-10 max-w-4xl px-4 sm:px-6 lg:px-8 text-center text-white",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-4 leading-tight drop-shadow-lg",children:z.title}),r.jsx("p",{className:"text-lg sm:text-xl mb-6 opacity-90 max-w-2xl mx-auto drop-shadow",children:z.description}),z.showTimer&&r.jsx(Xhe,{}),r.jsx(Ae,{href:z.url,className:"mt-6 inline-block",children:r.jsxs($,{size:"lg",className:"bg-white text-gray-900 hover:bg-gray-100 text-base sm:text-lg px-8 py-6 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-0.5",children:[z.buttonText,r.jsx(Qc,{className:"ml-2 h-5 w-5"})]})})]})]})},z.id)),r.jsx("div",{className:"swiper-pagination !bottom-6"}),r.jsx("div",{className:"swiper-button-next after:hidden",children:r.jsx("div",{className:"h-12 w-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}),r.jsx("div",{className:"swiper-button-prev after:hidden",children:r.jsx("div",{className:"h-12 w-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})})]})}),r.jsx("section",{className:"py-8 sm:py-12 lg:py-16 bg-background",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 sm:mb-10 gap-4",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:s==="shopping"?"Categories":"Menu"}),r.jsx(Ae,{href:s==="shopping"?"/categories":"/food-categories",children:r.jsx($,{variant:"outline",className:"border-primary text-primary hover:bg-primary hover:text-white w-8 h-8 p-0",children:r.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})})]}),r.jsx("div",{className:"grid grid-cols-4 gap-2 sm:gap-4",children:o.map(z=>r.jsx(Ae,{href:z.href,children:r.jsxs("div",{className:"category-card flex flex-col items-center justify-center gap-1 sm:gap-2 p-2 sm:p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow min-h-[80px] sm:min-h-[100px] active:scale-95 transition-transform text-center",children:[r.jsx("div",{className:"text-lg sm:text-2xl",children:z.icon}),r.jsx("div",{className:"text-xs sm:text-sm font-semibold text-foreground leading-tight",children:z.name})]})},z.name))})]})}),r.jsx("section",{className:"py-8 sm:py-12 lg:py-16 bg-secondary/30",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6 sm:mb-10 pr-2.5",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[r.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-foreground",children:_?"Recommended for You":"Featured Products"}),_&&r.jsxs(ue,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[r.jsx(wn,{className:"h-3 w-3 mr-1"}),"Smart Pick"]})]}),r.jsx(Ae,{href:"/products",className:"flex-shrink-0 mt-1",children:r.jsx($,{variant:"outline",className:"border-primary text-primary hover:bg-primary hover:text-white w-8 h-8 p-0",children:r.jsx(Qc,{className:"h-4 w-4"})})})]}),A?r.jsx(D,{}):T?r.jsx(W,{}):O.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground text-lg",children:"No featured products available at the moment"}),r.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Check back later for new arrivals"})]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 sm:gap-4",children:O.map(z=>r.jsx(Uh,{product:z},z.id))})]})}),r.jsx("section",{className:"py-8 sm:py-12 lg:py-16 bg-background",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6 sm:mb-10 pr-2.5",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[r.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-foreground",children:_?"Stores You Might Like":`Popular ${s==="shopping"?"Stores":"Restaurants"}`}),_&&r.jsxs(ue,{variant:"secondary",className:"bg-green-100 text-green-800",children:[r.jsx(Tz,{className:"h-3 w-3 mr-1"}),"Curated"]})]}),r.jsx(Ae,{href:s==="shopping"?"/stores":"/restaurants",className:"flex-shrink-0 mt-1",children:r.jsx($,{variant:"outline",className:"border-primary text-primary hover:bg-primary hover:text-white w-8 h-8 p-0",children:r.jsx(Qc,{className:"h-4 w-4"})})})]}),V?r.jsx(U,{}):I?r.jsx(Q,{}):M.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground text-lg",children:"No stores available at the moment"}),r.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Check back later for new stores"})]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4 md:gap-6",children:M.map(z=>r.jsx(DV,{store:z},z.id))})]})}),N&&N.length>0&&r.jsx("section",{className:"py-8 bg-accent",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center",children:r.jsxs("div",{className:"text-white",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-2",children:[" Flash Sale - ",N[0].discountPercentage,"% Off!"]}),r.jsx("p",{className:"text-lg mb-2",children:N[0].title}),N[0].description&&r.jsx("p",{className:"text-base mb-4 opacity-90",children:N[0].description}),r.jsxs("p",{className:"text-sm mb-4 opacity-75",children:["Ends: ",new Date(N[0].endsAt).toLocaleString()]}),r.jsx(Ae,{href:"/flash-sales",children:r.jsx($,{variant:"outline",className:"bg-white text-accent hover:bg-gray-100",children:"View Flash Sales"})})]})})})]})}function J_({food:e}){const{addToCart:t}=wc(),{addToWishlist:n,removeFromWishlist:s,isInWishlist:i}=bb(),{user:a}=Gt(),o=Mk(),l=a?i(e.id):!1,c=e.isOnOffer&&e.offerPercentage?(parseFloat(e.price)*(1-e.offerPercentage/100)).toFixed(2):e.price,d=m=>{m.preventDefault(),m.stopPropagation(),a&&(t(e.id,1),o.onCartAdd())},h=m=>{m.preventDefault(),m.stopPropagation(),a&&(l?(s(e.id),o.onCartRemove()):(n(e.id),o.onProductLike()))};return r.jsx(Ae,{href:`/food/${e.id}`,children:r.jsxs(K,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer group",children:[r.jsxs("div",{className:"relative h-48",children:[r.jsx("img",{src:e.imageUrl||e.images&&e.images[0]||"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:m=>{m.currentTarget.src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300"}}),e.isOnOffer&&e.offerPercentage&&r.jsxs(ue,{className:"absolute top-2 left-2 bg-red-500 hover:bg-red-600",children:[e.offerPercentage,"% OFF"]}),r.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[e.isVegetarian&&r.jsx(ue,{className:"bg-green-500 hover:bg-green-600",children:r.jsx(Pz,{className:"h-3 w-3"})}),e.isVegan&&r.jsx(ue,{className:"bg-green-600 hover:bg-green-700",children:"Vegan"})]}),a&&r.jsx($,{variant:"ghost",size:"sm",className:"absolute bottom-2 right-2 bg-white/90 hover:bg-white",onClick:h,children:r.jsx(Ma,{className:`h-4 w-4 ${l?"text-red-500 fill-current":"text-gray-600"}`})})]}),r.jsxs(G,{className:"p-3 sm:p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-sm sm:text-base md:text-lg group-hover:text-red-600 transition-colors line-clamp-1",children:e.name}),r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("span",{className:"font-bold text-sm sm:text-base md:text-lg text-red-600",children:["",c]}),e.isOnOffer&&e.offerPercentage&&r.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 line-through",children:["",e.price]})]})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm mb-2 sm:mb-3 line-clamp-2",children:e.description}),r.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[e.preparationTime&&r.jsxs("div",{className:"flex items-center space-x-1 text-xs sm:text-sm text-gray-600",children:[r.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:e.preparationTime})]}),e.spiceLevel&&r.jsxs(ue,{variant:"outline",className:"text-xs",children:[" ",e.spiceLevel]})]}),e.rating&&parseFloat(e.rating)>0&&r.jsxs("div",{className:"flex items-center space-x-1 mb-2 sm:mb-3",children:[r.jsx("div",{className:"flex",children:[...Array(5)].map((m,f)=>r.jsx("span",{className:`text-xs sm:text-sm ${f<Math.floor(parseFloat(e.rating??"0"))?"text-yellow-400":"text-gray-300"}`,children:""},f))}),r.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["(",e.totalReviews," reviews)"]})]}),a&&r.jsxs($,{onClick:d,className:"w-full bg-red-500 hover:bg-red-600 text-white",size:"sm",children:[r.jsx(zt,{className:"h-4 w-4 mr-1"}),"Add to Cart"]})]})]})})}function tme({restaurant:e,showDistance:t=!0}){const[n,s]=b.useState(null),[i,a]=b.useState(!1),o=e.deliveryFee?`${e.deliveryFee}`:"Free",l=e.minimumOrder?`${e.minimumOrder}`:"";return b.useEffect(()=>{t&&e.latitude&&e.longitude&&(a(!0),qo().then(c=>{const d=Wh(c,{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude)});s(d),a(!1)}).catch(()=>{a(!1)}))},[e.latitude,e.longitude,t]),r.jsx(Ae,{href:`/restaurant/${e.id}`,children:r.jsxs(K,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer group",children:[r.jsxs("div",{className:"relative h-48",children:[r.jsx("img",{src:e.coverImage||"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:c=>{c.currentTarget.src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300"}}),e.featured&&r.jsx(ue,{className:"absolute top-2 left-2 bg-red-500 hover:bg-red-600",children:"Featured"}),e.isDeliveryAvailable&&r.jsxs(ue,{className:"absolute top-2 right-2 bg-green-500 hover:bg-green-600",children:[r.jsx(t0,{className:"h-3 w-3 mr-1"}),"Delivery"]})]}),r.jsxs(G,{className:"p-3 sm:p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-sm sm:text-base md:text-lg group-hover:text-red-600 transition-colors line-clamp-1",children:e.name}),r.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[r.jsx(Bt,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-400 fill-current"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium",children:e.rating})]})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm mb-2 sm:mb-3 line-clamp-2",children:e.description||`Delicious ${e.cuisineType||"multi-cuisine"} food delivered to your doorstep`}),e.cuisineType&&r.jsx(ue,{variant:"outline",className:"mb-3",children:e.cuisineType}),r.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:e.deliveryTime||"25-35 mins"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(t0,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:o})]})]}),r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 flex-1 min-w-0",children:[r.jsx(Re,{className:"h-3 w-3 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:e.address})]}),t&&r.jsx("div",{className:"flex-shrink-0",children:i?r.jsxs(ue,{variant:"outline",className:"text-xs animate-pulse",children:[r.jsx(Re,{className:"h-3 w-3 mr-1"}),"..."]}):n!==null?r.jsx(ue,{variant:n<=1?"default":n<=5?"secondary":"outline",className:"text-xs font-medium bg-blue-50 text-blue-700 border-blue-200",children:Zl(n)}):null})]}),l&&r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Min order: ",l]})]})]})})}function yD(){var f,v;const{user:e}=Gt();ua(),b.useEffect(()=>{(async()=>{try{await fetch("/api/recommendations/track",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userId:(e==null?void 0:e.id)||null,page:"/",action:"homepage_visit"})})}catch(x){console.log("Visit tracking failed (non-critical):",x)}})()},[e]);const{data:t,isLoading:n,error:s}=Le({queryKey:["/api/recommendations/homepage","food",e==null?void 0:e.id],queryFn:async()=>{const p=new URLSearchParams({mode:"food",...(e==null?void 0:e.id)&&{userId:e.id.toString()}}),x=await fetch(`/api/recommendations/homepage?${p}`,{credentials:"include"});if(!x.ok)throw new Error(`Failed to fetch recommendations: ${x.statusText}`);return x.json()},retry:3,staleTime:5*60*1e3}),{data:i}=Le({queryKey:["/api/products"],select:p=>(p==null?void 0:p.filter(x=>x.productType==="food"))||[],enabled:!((f=t==null?void 0:t.products)!=null&&f.length)}),{data:a}=Le({queryKey:["/api/stores"],select:p=>(p==null?void 0:p.filter(x=>x.storeType==="restaurant"))||[],enabled:!((v=t==null?void 0:t.stores)!=null&&v.length)}),o=(t==null?void 0:t.products)||[],l=(t==null?void 0:t.stores)||[],c=(t==null?void 0:t.isPersonalized)||!1,d=o.length>0?o.slice(0,8):(i==null?void 0:i.filter(p=>p.isOnOffer||p.isFastSell).slice(0,8))||[],h=l.length>0?l.slice(0,6):(a==null?void 0:a.slice(0,6))||[],m=o.length>0?o.filter(p=>p.preparationTime&&parseInt(p.preparationTime??"0")<=20).slice(0,6):(i==null?void 0:i.filter(p=>p.preparationTime&&parseInt(p.preparationTime??"0")<=20).slice(0,6))||[];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 dark:from-gray-900 dark:to-gray-800",children:[r.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-r from-red-600 via-orange-500 to-yellow-500 text-white",children:[r.jsx("div",{className:"absolute inset-0 bg-black/20"}),r.jsx("div",{className:"relative container mx-auto px-4 py-12 sm:py-16 lg:py-24",children:r.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[r.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-6xl font-bold mb-4 sm:mb-6 animate-fade-in",children:["Delicious Food ",r.jsx("span",{className:"text-yellow-300",children:"Delivered Fast"})]}),r.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-2xl mb-6 sm:mb-8 text-red-100",children:"Discover amazing restaurants and get your favorite food delivered in minutes"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[r.jsx(Ae,{href:"/restaurants",children:r.jsxs($,{size:"sm",className:"bg-white text-red-600 hover:bg-red-50 font-semibold px-6 sm:px-8 text-sm sm:text-base",children:[r.jsx(Pa,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),"Browse Restaurants"]})}),r.jsx(Ae,{href:"/food-categories",children:r.jsxs($,{size:"sm",variant:"outline",className:"border-white text-white hover:bg-white hover:text-red-600 font-semibold px-6 sm:px-8 text-sm sm:text-base",children:["Explore Categories",r.jsx(Qc,{className:"ml-2 h-4 w-4 sm:h-5 sm:w-5"})]})})]})]})}),r.jsx("div",{className:"absolute top-10 left-10 text-6xl opacity-20 animate-bounce",children:""}),r.jsx("div",{className:"absolute top-20 right-20 text-5xl opacity-20 animate-bounce delay-100",children:""}),r.jsx("div",{className:"absolute bottom-20 left-20 text-4xl opacity-20 animate-bounce delay-200",children:""}),r.jsx("div",{className:"absolute bottom-10 right-10 text-5xl opacity-20 animate-bounce delay-300",children:""})]}),r.jsx("section",{className:"py-8 bg-white dark:bg-gray-800 shadow-sm",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 text-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-red-600",children:[(a==null?void 0:a.length)||0,"+"]}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Restaurants"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-orange-600",children:[(i==null?void 0:i.length)||0,"+"]}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Food Items"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-yellow-600",children:"25 min"}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Avg Delivery"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-green-600",children:"4.8"}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Customer Rating"})]})]})})}),r.jsxs("div",{className:"container mx-auto px-4 py-8 sm:py-12 space-y-12 sm:space-y-16",children:[d.length>0&&r.jsxs("section",{children:[r.jsxs("div",{className:"flex justify-between items-start mb-8 pr-2.5",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[r.jsx(wn,{className:"mr-2 sm:mr-3 h-5 w-5 sm:h-6 sm:w-6 md:h-8 md:w-8 text-red-500"}),c?"Recommended for You":"Special Offers"]}),c&&r.jsxs(ue,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[r.jsx(wn,{className:"h-3 w-3 mr-1"}),"Smart Pick"]})]}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:c?"Personalized food recommendations based on your preferences":"Limited time deals you don't want to miss"})]}),r.jsx(Ae,{href:"/food-offers",className:"flex-shrink-0 mt-1",children:r.jsx($,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50 w-8 h-8 p-0",children:r.jsx(Qc,{className:"h-4 w-4"})})})]}),r.jsx(vT,{modules:[XV,QV,JV],spaceBetween:20,slidesPerView:1,navigation:!0,pagination:{clickable:!0},autoplay:{delay:4e3},breakpoints:{480:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4}},className:"pb-12",children:d.map(p=>r.jsx(yT,{children:r.jsx(J_,{food:p})},p.id))})]}),h.length>0&&r.jsxs("section",{children:[r.jsxs("div",{className:"flex justify-between items-start mb-8 pr-2.5",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[r.jsx(Bt,{className:"mr-2 sm:mr-3 h-5 w-5 sm:h-6 sm:w-6 md:h-8 md:w-8 text-yellow-500"}),c?"Restaurants You Might Like":"Top Restaurants"]}),c&&r.jsxs(ue,{variant:"secondary",className:"bg-green-100 text-green-800",children:[r.jsx(Tz,{className:"h-3 w-3 mr-1"}),"Curated"]})]}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:c?"Personalized restaurant recommendations based on your taste":"Highly rated restaurants in your area"})]}),r.jsx(Ae,{href:"/restaurants",className:"flex-shrink-0 mt-1",children:r.jsx($,{variant:"outline",className:"border-orange-500 text-orange-500 hover:bg-orange-50 w-8 h-8 p-0",children:r.jsx(Qc,{className:"h-4 w-4"})})})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4",children:h.map(p=>r.jsx(tme,{restaurant:p},p.id))})]}),m.length>0&&r.jsxs("section",{children:[r.jsxs("div",{className:"flex justify-between items-start mb-8 pr-2.5",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[r.jsx(jt,{className:"mr-2 sm:mr-3 h-5 w-5 sm:h-6 sm:w-6 md:h-8 md:w-8 text-green-500"}),"Quick Bites"]}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-2",children:"Ready in 20 minutes or less"})]}),r.jsx(Ae,{href:"/quick-bites",className:"flex-shrink-0 mt-1",children:r.jsx($,{variant:"outline",className:"border-green-500 text-green-500 hover:bg-green-50 w-8 h-8 p-0",children:r.jsx(Qc,{className:"h-4 w-4"})})})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 sm:gap-3",children:m.map(p=>r.jsx(J_,{food:p},p.id))})]}),r.jsxs("section",{className:"bg-gradient-to-r from-red-500 to-orange-500 rounded-2xl p-6 sm:p-8 lg:p-12 text-white text-center",children:[r.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold mb-3 sm:mb-4",children:"Hungry? We've Got You Covered!"}),r.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl mb-6 sm:mb-8 text-red-100",children:"Join thousands of satisfied customers who trust us for their food delivery needs"}),!e&&r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[r.jsx(Ae,{href:"/register",children:r.jsx($,{size:"sm",className:"bg-white text-red-600 hover:bg-red-50 font-semibold px-6 sm:px-8 text-sm sm:text-base",children:"Sign Up Now"})}),r.jsx(Ae,{href:"/login",children:r.jsx($,{size:"sm",variant:"outline",className:"border-white text-white hover:bg-white hover:text-red-600 font-semibold px-6 sm:px-8 text-sm sm:text-base",children:"Login"})})]})]})]})]})}var rme="Label",eU=b.forwardRef((e,t)=>r.jsx(Je.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));eU.displayName=rme;var tU=eU;const nme=Tm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),be=b.forwardRef(({className:e,...t},n)=>r.jsx(tU,{ref:n,className:Ve(nme(),e),...t}));be.displayName=tU.displayName;var jT="Dialog",[rU,nU]=xn(jT),[sme,ha]=rU(jT),sU=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=b.useRef(null),c=b.useRef(null),[d=!1,h]=Oi({prop:s,defaultProp:i,onChange:a});return r.jsx(sme,{scope:t,triggerRef:l,contentRef:c,contentId:ia(),titleId:ia(),descriptionId:ia(),open:d,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(m=>!m),[h]),modal:o,children:n})};sU.displayName=jT;var iU="DialogTrigger",aU=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=ha(iU,n),a=Nt(t,i.triggerRef);return r.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":NT(i.open),...s,ref:a,onClick:$e(e.onClick,i.onOpenToggle)})});aU.displayName=iU;var bT="DialogPortal",[ime,oU]=rU(bT,{forceMount:void 0}),lU=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:i}=e,a=ha(bT,t);return r.jsx(ime,{scope:t,forceMount:n,children:b.Children.map(s,o=>r.jsx(Mn,{present:n||a.open,children:r.jsx(dg,{asChild:!0,container:i,children:o})}))})};lU.displayName=bT;var S0="DialogOverlay",cU=b.forwardRef((e,t)=>{const n=oU(S0,e.__scopeDialog),{forceMount:s=n.forceMount,...i}=e,a=ha(S0,e.__scopeDialog);return a.modal?r.jsx(Mn,{present:s||a.open,children:r.jsx(ome,{...i,ref:t})}):null});cU.displayName=S0;var ame=Ad("DialogOverlay.RemoveScroll"),ome=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=ha(S0,n);return r.jsx(Cb,{as:ame,allowPinchZoom:!0,shards:[i.contentRef],children:r.jsx(Je.div,{"data-state":NT(i.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Bd="DialogContent",dU=b.forwardRef((e,t)=>{const n=oU(Bd,e.__scopeDialog),{forceMount:s=n.forceMount,...i}=e,a=ha(Bd,e.__scopeDialog);return r.jsx(Mn,{present:s||a.open,children:a.modal?r.jsx(lme,{...i,ref:t}):r.jsx(cme,{...i,ref:t})})});dU.displayName=Bd;var lme=b.forwardRef((e,t)=>{const n=ha(Bd,e.__scopeDialog),s=b.useRef(null),i=Nt(t,n.contentRef,s);return b.useEffect(()=>{const a=s.current;if(a)return Uk(a)},[]),r.jsx(uU,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:$e(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:$e(e.onFocusOutside,a=>a.preventDefault())})}),cme=b.forwardRef((e,t)=>{const n=ha(Bd,e.__scopeDialog),s=b.useRef(!1),i=b.useRef(!1);return r.jsx(uU,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),uU=b.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=ha(Bd,n),c=b.useRef(null),d=Nt(t,c);return zk(),r.jsxs(r.Fragment,{children:[r.jsx(Sb,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:r.jsx(km,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":NT(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(ume,{titleId:l.titleId}),r.jsx(mme,{contentRef:c,descriptionId:l.descriptionId})]})]})}),wT="DialogTitle",hU=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=ha(wT,n);return r.jsx(Je.h2,{id:i.titleId,...s,ref:t})});hU.displayName=wT;var mU="DialogDescription",fU=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=ha(mU,n);return r.jsx(Je.p,{id:i.descriptionId,...s,ref:t})});fU.displayName=mU;var pU="DialogClose",xU=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=ha(pU,n);return r.jsx(Je.button,{type:"button",...s,ref:t,onClick:$e(e.onClick,()=>i.onOpenChange(!1))})});xU.displayName=pU;function NT(e){return e?"open":"closed"}var gU="DialogTitleWarning",[dme,vU]=Vee(gU,{contentName:Bd,titleName:wT,docsSlug:"dialog"}),ume=({titleId:e})=>{const t=vU(gU),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return b.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},hme="DialogDescriptionWarning",mme=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${vU(hme).contentName}}.`;return b.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},ST=sU,_T=aU,PT=lU,vg=cU,yg=dU,jg=hU,bg=fU,Rb=xU;const fme=ST,pme=_T,xme=PT,yU=b.forwardRef(({className:e,...t},n)=>r.jsx(vg,{className:Ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));yU.displayName=vg.displayName;const gme=Tm("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),jU=b.forwardRef(({side:e="right",className:t,children:n,...s},i)=>r.jsxs(xme,{children:[r.jsx(yU,{}),r.jsxs(yg,{ref:i,className:Ve(gme({side:e}),t),...s,children:[n,r.jsxs(Rb,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(Fr,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));jU.displayName=yg.displayName;const bU=({className:e,...t})=>r.jsx("div",{className:Ve("flex flex-col space-y-2 text-center sm:text-left",e),...t});bU.displayName="SheetHeader";const wU=b.forwardRef(({className:e,...t},n)=>r.jsx(jg,{ref:n,className:Ve("text-lg font-semibold text-foreground",e),...t}));wU.displayName=jg.displayName;const vme=b.forwardRef(({className:e,...t},n)=>r.jsx(bg,{ref:n,className:Ve("text-sm text-muted-foreground",e),...t}));vme.displayName=bg.displayName;function wg(e){const t=b.useRef({value:e,previous:e});return b.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var yme=[" ","Enter","ArrowUp","ArrowDown"],jme=[" ","Enter"],Ng="Select",[$b,Fb,bme]=cg(Ng),[Lm,wUe]=xn(Ng,[bme,Mm]),zb=Mm(),[wme,Nc]=Lm(Ng),[Nme,Sme]=Lm(Ng),NU=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:m,disabled:f,required:v,form:p}=e,x=zb(t),[y,w]=b.useState(null),[j,N]=b.useState(null),[C,P]=b.useState(!1),k=eu(d),[_=!1,O]=Oi({prop:s,defaultProp:i,onChange:a}),[M,T]=Oi({prop:o,defaultProp:l,onChange:c}),I=b.useRef(null),A=y?p||!!y.closest("form"):!0,[V,D]=b.useState(new Set),W=Array.from(V).map(U=>U.props.value).join(";");return r.jsx(o8,{...x,children:r.jsxs(wme,{required:v,scope:t,trigger:y,onTriggerChange:w,valueNode:j,onValueNodeChange:N,valueNodeHasChildren:C,onValueNodeHasChildrenChange:P,contentId:ia(),value:M,onValueChange:T,open:_,onOpenChange:O,dir:k,triggerPointerDownPosRef:I,disabled:f,children:[r.jsx($b.Provider,{scope:t,children:r.jsx(Nme,{scope:e.__scopeSelect,onNativeOptionAdd:b.useCallback(U=>{D(Q=>new Set(Q).add(U))},[]),onNativeOptionRemove:b.useCallback(U=>{D(Q=>{const q=new Set(Q);return q.delete(U),q})},[]),children:n})}),A?r.jsxs(GU,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:m,value:M,onChange:U=>T(U.target.value),disabled:f,form:p,children:[M===void 0?r.jsx("option",{value:""}):null,Array.from(V)]},W):null]})})};NU.displayName=Ng;var SU="SelectTrigger",_U=b.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...i}=e,a=zb(n),o=Nc(SU,n),l=o.disabled||s,c=Nt(t,o.onTriggerChange),d=Fb(n),h=b.useRef("touch"),[m,f,v]=ZU(x=>{const y=d().filter(N=>!N.disabled),w=y.find(N=>N.value===o.value),j=YU(y,x,w);j!==void 0&&o.onValueChange(j.value)}),p=x=>{l||(o.onOpenChange(!0),v()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(Tk,{asChild:!0,...a,children:r.jsx(Je.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":KU(o.value)?"":void 0,...i,ref:c,onClick:$e(i.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&p(x)}),onPointerDown:$e(i.onPointerDown,x=>{h.current=x.pointerType;const y=x.target;y.hasPointerCapture(x.pointerId)&&y.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(p(x),x.preventDefault())}),onKeyDown:$e(i.onKeyDown,x=>{const y=m.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&f(x.key),!(y&&x.key===" ")&&yme.includes(x.key)&&(p(),x.preventDefault())})})})});_U.displayName=SU;var PU="SelectValue",CU=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:i,children:a,placeholder:o="",...l}=e,c=Nc(PU,n),{onValueNodeHasChildrenChange:d}=c,h=a!==void 0,m=Nt(t,c.onValueNodeChange);return an(()=>{d(h)},[d,h]),r.jsx(Je.span,{...l,ref:m,style:{pointerEvents:"none"},children:KU(c.value)?r.jsx(r.Fragment,{children:o}):a})});CU.displayName=PU;var _me="SelectIcon",kU=b.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...i}=e;return r.jsx(Je.span,{"aria-hidden":!0,...i,ref:t,children:s||""})});kU.displayName=_me;var Pme="SelectPortal",TU=e=>r.jsx(dg,{asChild:!0,...e});TU.displayName=Pme;var Vd="SelectContent",AU=b.forwardRef((e,t)=>{const n=Nc(Vd,e.__scopeSelect),[s,i]=b.useState();if(an(()=>{i(new DocumentFragment)},[]),!n.open){const a=s;return a?jc.createPortal(r.jsx(EU,{scope:e.__scopeSelect,children:r.jsx($b.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),a):null}return r.jsx(OU,{...e,ref:t})});AU.displayName=Vd;var Bi=10,[EU,Sc]=Lm(Vd),Cme="SelectContentImpl",kme=Ad("SelectContent.RemoveScroll"),OU=b.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:f,collisionPadding:v,sticky:p,hideWhenDetached:x,avoidCollisions:y,...w}=e,j=Nc(Vd,n),[N,C]=b.useState(null),[P,k]=b.useState(null),_=Nt(t,we=>C(we)),[O,M]=b.useState(null),[T,I]=b.useState(null),A=Fb(n),[V,D]=b.useState(!1),W=b.useRef(!1);b.useEffect(()=>{if(N)return Uk(N)},[N]),zk();const U=b.useCallback(we=>{const[Be,...Pe]=A().map(Ne=>Ne.ref.current),[Ee]=Pe.slice(-1),Ie=document.activeElement;for(const Ne of we)if(Ne===Ie||(Ne==null||Ne.scrollIntoView({block:"nearest"}),Ne===Be&&P&&(P.scrollTop=0),Ne===Ee&&P&&(P.scrollTop=P.scrollHeight),Ne==null||Ne.focus(),document.activeElement!==Ie))return},[A,P]),Q=b.useCallback(()=>U([O,N]),[U,O,N]);b.useEffect(()=>{V&&Q()},[V,Q]);const{onOpenChange:q,triggerPointerDownPosRef:B}=j;b.useEffect(()=>{if(N){let we={x:0,y:0};const Be=Ee=>{var Ie,Ne;we={x:Math.abs(Math.round(Ee.pageX)-(((Ie=B.current)==null?void 0:Ie.x)??0)),y:Math.abs(Math.round(Ee.pageY)-(((Ne=B.current)==null?void 0:Ne.y)??0))}},Pe=Ee=>{we.x<=10&&we.y<=10?Ee.preventDefault():N.contains(Ee.target)||q(!1),document.removeEventListener("pointermove",Be),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",Be),document.addEventListener("pointerup",Pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Be),document.removeEventListener("pointerup",Pe,{capture:!0})}}},[N,q,B]),b.useEffect(()=>{const we=()=>q(!1);return window.addEventListener("blur",we),window.addEventListener("resize",we),()=>{window.removeEventListener("blur",we),window.removeEventListener("resize",we)}},[q]);const[z,H]=ZU(we=>{const Be=A().filter(Ie=>!Ie.disabled),Pe=Be.find(Ie=>Ie.ref.current===document.activeElement),Ee=YU(Be,we,Pe);Ee&&setTimeout(()=>Ee.ref.current.focus())}),X=b.useCallback((we,Be,Pe)=>{const Ee=!W.current&&!Pe;(j.value!==void 0&&j.value===Be||Ee)&&(M(we),Ee&&(W.current=!0))},[j.value]),ge=b.useCallback(()=>N==null?void 0:N.focus(),[N]),Se=b.useCallback((we,Be,Pe)=>{const Ee=!W.current&&!Pe;(j.value!==void 0&&j.value===Be||Ee)&&I(we)},[j.value]),F=s==="popper"?e2:MU,pe=F===e2?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:f,collisionPadding:v,sticky:p,hideWhenDetached:x,avoidCollisions:y}:{};return r.jsx(EU,{scope:n,content:N,viewport:P,onViewportChange:k,itemRefCallback:X,selectedItem:O,onItemLeave:ge,itemTextRefCallback:Se,focusSelectedItem:Q,selectedItemText:T,position:s,isPositioned:V,searchRef:z,children:r.jsx(Cb,{as:kme,allowPinchZoom:!0,children:r.jsx(Sb,{asChild:!0,trapped:j.open,onMountAutoFocus:we=>{we.preventDefault()},onUnmountAutoFocus:$e(i,we=>{var Be;(Be=j.trigger)==null||Be.focus({preventScroll:!0}),we.preventDefault()}),children:r.jsx(km,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:we=>we.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:r.jsx(F,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:we=>we.preventDefault(),...w,...pe,onPlaced:()=>D(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:$e(w.onKeyDown,we=>{const Be=we.ctrlKey||we.altKey||we.metaKey;if(we.key==="Tab"&&we.preventDefault(),!Be&&we.key.length===1&&H(we.key),["ArrowUp","ArrowDown","Home","End"].includes(we.key)){let Ee=A().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);if(["ArrowUp","End"].includes(we.key)&&(Ee=Ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(we.key)){const Ie=we.target,Ne=Ee.indexOf(Ie);Ee=Ee.slice(Ne+1)}setTimeout(()=>U(Ee)),we.preventDefault()}})})})})})})});OU.displayName=Cme;var Tme="SelectItemAlignedPosition",MU=b.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...i}=e,a=Nc(Vd,n),o=Sc(Vd,n),[l,c]=b.useState(null),[d,h]=b.useState(null),m=Nt(t,_=>h(_)),f=Fb(n),v=b.useRef(!1),p=b.useRef(!0),{viewport:x,selectedItem:y,selectedItemText:w,focusSelectedItem:j}=o,N=b.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&x&&y&&w){const _=a.trigger.getBoundingClientRect(),O=d.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),T=w.getBoundingClientRect();if(a.dir!=="rtl"){const Ie=T.left-O.left,Ne=M.left-Ie,xe=_.left-Ne,J=_.width+xe,De=Math.max(J,O.width),Ue=window.innerWidth-Bi,st=Kp(Ne,[Bi,Math.max(Bi,Ue-De)]);l.style.minWidth=J+"px",l.style.left=st+"px"}else{const Ie=O.right-T.right,Ne=window.innerWidth-M.right-Ie,xe=window.innerWidth-_.right-Ne,J=_.width+xe,De=Math.max(J,O.width),Ue=window.innerWidth-Bi,st=Kp(Ne,[Bi,Math.max(Bi,Ue-De)]);l.style.minWidth=J+"px",l.style.right=st+"px"}const I=f(),A=window.innerHeight-Bi*2,V=x.scrollHeight,D=window.getComputedStyle(d),W=parseInt(D.borderTopWidth,10),U=parseInt(D.paddingTop,10),Q=parseInt(D.borderBottomWidth,10),q=parseInt(D.paddingBottom,10),B=W+U+V+q+Q,z=Math.min(y.offsetHeight*5,B),H=window.getComputedStyle(x),X=parseInt(H.paddingTop,10),ge=parseInt(H.paddingBottom,10),Se=_.top+_.height/2-Bi,F=A-Se,pe=y.offsetHeight/2,we=y.offsetTop+pe,Be=W+U+we,Pe=B-Be;if(Be<=Se){const Ie=I.length>0&&y===I[I.length-1].ref.current;l.style.bottom="0px";const Ne=d.clientHeight-x.offsetTop-x.offsetHeight,xe=Math.max(F,pe+(Ie?ge:0)+Ne+Q),J=Be+xe;l.style.height=J+"px"}else{const Ie=I.length>0&&y===I[0].ref.current;l.style.top="0px";const xe=Math.max(Se,W+x.offsetTop+(Ie?X:0)+pe)+Pe;l.style.height=xe+"px",x.scrollTop=Be-Se+x.offsetTop}l.style.margin=`${Bi}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=A+"px",s==null||s(),requestAnimationFrame(()=>v.current=!0)}},[f,a.trigger,a.valueNode,l,d,x,y,w,a.dir,s]);an(()=>N(),[N]);const[C,P]=b.useState();an(()=>{d&&P(window.getComputedStyle(d).zIndex)},[d]);const k=b.useCallback(_=>{_&&p.current===!0&&(N(),j==null||j(),p.current=!1)},[N,j]);return r.jsx(Eme,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:k,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:r.jsx(Je.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});MU.displayName=Tme;var Ame="SelectPopperPosition",e2=b.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:i=Bi,...a}=e,o=zb(n);return r.jsx(Ak,{...o,...a,ref:t,align:s,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});e2.displayName=Ame;var[Eme,CT]=Lm(Vd,{}),t2="SelectViewport",DU=b.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...i}=e,a=Sc(t2,n),o=CT(t2,n),l=Nt(t,a.onViewportChange),c=b.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx($b.Slot,{scope:n,children:r.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:$e(i.onScroll,d=>{const h=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&m){const v=Math.abs(c.current-h.scrollTop);if(v>0){const p=window.innerHeight-Bi*2,x=parseFloat(m.style.minHeight),y=parseFloat(m.style.height),w=Math.max(x,y);if(w<p){const j=w+v,N=Math.min(p,j),C=j-N;m.style.height=N+"px",m.style.bottom==="0px"&&(h.scrollTop=C>0?C:0,m.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});DU.displayName=t2;var IU="SelectGroup",[Ome,Mme]=Lm(IU),Dme=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=ia();return r.jsx(Ome,{scope:n,id:i,children:r.jsx(Je.div,{role:"group","aria-labelledby":i,...s,ref:t})})});Dme.displayName=IU;var LU="SelectLabel",RU=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=Mme(LU,n);return r.jsx(Je.div,{id:i.id,...s,ref:t})});RU.displayName=LU;var _0="SelectItem",[Ime,$U]=Lm(_0),FU=b.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:i=!1,textValue:a,...o}=e,l=Nc(_0,n),c=Sc(_0,n),d=l.value===s,[h,m]=b.useState(a??""),[f,v]=b.useState(!1),p=Nt(t,j=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,j,s,i)}),x=ia(),y=b.useRef("touch"),w=()=>{i||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(Ime,{scope:n,value:s,disabled:i,textId:x,isSelected:d,onItemTextChange:b.useCallback(j=>{m(N=>N||((j==null?void 0:j.textContent)??"").trim())},[]),children:r.jsx($b.ItemSlot,{scope:n,value:s,disabled:i,textValue:h,children:r.jsx(Je.div,{role:"option","aria-labelledby":x,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:p,onFocus:$e(o.onFocus,()=>v(!0)),onBlur:$e(o.onBlur,()=>v(!1)),onClick:$e(o.onClick,()=>{y.current!=="mouse"&&w()}),onPointerUp:$e(o.onPointerUp,()=>{y.current==="mouse"&&w()}),onPointerDown:$e(o.onPointerDown,j=>{y.current=j.pointerType}),onPointerMove:$e(o.onPointerMove,j=>{var N;y.current=j.pointerType,i?(N=c.onItemLeave)==null||N.call(c):y.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(o.onPointerLeave,j=>{var N;j.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:$e(o.onKeyDown,j=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&j.key===" "||(jme.includes(j.key)&&w(),j.key===" "&&j.preventDefault())})})})})});FU.displayName=_0;var Gf="SelectItemText",zU=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:i,...a}=e,o=Nc(Gf,n),l=Sc(Gf,n),c=$U(Gf,n),d=Sme(Gf,n),[h,m]=b.useState(null),f=Nt(t,w=>m(w),c.onItemTextChange,w=>{var j;return(j=l.itemTextRefCallback)==null?void 0:j.call(l,w,c.value,c.disabled)}),v=h==null?void 0:h.textContent,p=b.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:x,onNativeOptionRemove:y}=d;return an(()=>(x(p),()=>y(p)),[x,y,p]),r.jsxs(r.Fragment,{children:[r.jsx(Je.span,{id:c.textId,...a,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?jc.createPortal(a.children,o.valueNode):null]})});zU.displayName=Gf;var BU="SelectItemIndicator",VU=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return $U(BU,n).isSelected?r.jsx(Je.span,{"aria-hidden":!0,...s,ref:t}):null});VU.displayName=BU;var r2="SelectScrollUpButton",UU=b.forwardRef((e,t)=>{const n=Sc(r2,e.__scopeSelect),s=CT(r2,e.__scopeSelect),[i,a]=b.useState(!1),o=Nt(t,s.onScrollButtonChange);return an(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?r.jsx(HU,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});UU.displayName=r2;var n2="SelectScrollDownButton",WU=b.forwardRef((e,t)=>{const n=Sc(n2,e.__scopeSelect),s=CT(n2,e.__scopeSelect),[i,a]=b.useState(!1),o=Nt(t,s.onScrollButtonChange);return an(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;a(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?r.jsx(HU,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});WU.displayName=n2;var HU=b.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...i}=e,a=Sc("SelectScrollButton",n),o=b.useRef(null),l=Fb(n),c=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),an(()=>{var h;const d=l().find(m=>m.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),r.jsx(Je.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:$e(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:$e(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:$e(i.onPointerLeave,()=>{c()})})}),Lme="SelectSeparator",qU=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(Je.div,{"aria-hidden":!0,...s,ref:t})});qU.displayName=Lme;var s2="SelectArrow",Rme=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=zb(n),a=Nc(s2,n),o=Sc(s2,n);return a.open&&o.position==="popper"?r.jsx(Ek,{...i,...s,ref:t}):null});Rme.displayName=s2;function KU(e){return e===""||e===void 0}var GU=b.forwardRef((e,t)=>{const{value:n,...s}=e,i=b.useRef(null),a=Nt(t,i),o=wg(n);return b.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const m=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(m)}},[o,n]),r.jsx(ug,{asChild:!0,children:r.jsx("select",{...s,ref:a,defaultValue:n})})});GU.displayName="BubbleSelect";function ZU(e){const t=Lr(e),n=b.useRef(""),s=b.useRef(0),i=b.useCallback(o=>{const l=n.current+o;t(l),function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=b.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,i,a]}function YU(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=$me(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function $me(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var Fme=NU,XU=_U,zme=CU,Bme=kU,Vme=TU,QU=AU,Ume=DU,JU=RU,e9=FU,Wme=zU,Hme=VU,t9=UU,r9=WU,n9=qU;const dt=Fme,ut=zme,ot=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(XU,{ref:s,className:Ve("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(Bme,{asChild:!0,children:r.jsx(mb,{className:"h-4 w-4 opacity-50"})})]}));ot.displayName=XU.displayName;const s9=b.forwardRef(({className:e,...t},n)=>r.jsx(t9,{ref:n,className:Ve("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(xk,{className:"h-4 w-4"})}));s9.displayName=t9.displayName;const i9=b.forwardRef(({className:e,...t},n)=>r.jsx(r9,{ref:n,className:Ve("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(mb,{className:"h-4 w-4"})}));i9.displayName=r9.displayName;const lt=b.forwardRef(({className:e,children:t,position:n="popper",...s},i)=>r.jsx(Vme,{children:r.jsxs(QU,{ref:i,className:Ve("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(s9,{}),r.jsx(Ume,{className:Ve("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(i9,{})]})}));lt.displayName=QU.displayName;const qme=b.forwardRef(({className:e,...t},n)=>r.jsx(JU,{ref:n,className:Ve("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));qme.displayName=JU.displayName;const oe=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(e9,{ref:s,className:Ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(Hme,{children:r.jsx(Ed,{className:"h-4 w-4"})})}),r.jsx(Wme,{children:t})]}));oe.displayName=e9.displayName;const Kme=b.forwardRef(({className:e,...t},n)=>r.jsx(n9,{ref:n,className:Ve("-mx-1 my-1 h-px bg-muted",e),...t}));Kme.displayName=n9.displayName;function Gme({searchQuery:e="",category:t="",className:n="",isRestaurantMode:s=!1}){const{mode:i}=ua(),[a,o]=b.useState(null),[l,c]=b.useState("distance"),[d,h]=b.useState(50),[m,f]=b.useState(!1),[v,p]=b.useState("all"),[x,y]=b.useState("all"),[w,j]=b.useState("all"),[N,C]=b.useState("all"),[P,k]=b.useState("all"),_=i==="food"||s,O=e&&e.trim().length>0,M=async()=>{f(!0);try{const z=await qo();o(z)}catch(z){console.error("Failed to get user location:",z)}finally{f(!1)}};b.useEffect(()=>{M()},[]);const{data:T=[],isLoading:I,error:A}=Le({queryKey:["/api/products",{search:e,category:t}],queryFn:async()=>{try{const z=new URLSearchParams;e!=null&&e.trim()&&z.append("search",e.trim()),t!=null&&t.trim()&&z.append("category",t.trim());const H=await fetch(`/api/products?${z}`);if(!H.ok){const X=await H.text();throw new Error(`Failed to fetch products: ${H.status} ${X}`)}return H.json()}catch(z){throw console.error("Error fetching products:",z),z}},retry:1,retryDelay:1e3}),{data:V=[],error:D}=Le({queryKey:["/api/stores"],queryFn:async()=>{try{const z=await fetch("/api/stores");if(!z.ok){const H=await z.text();throw new Error(`Failed to fetch stores: ${z.status} ${H}`)}return z.json()}catch(z){throw console.error("Error fetching stores:",z),z}},retry:1,retryDelay:1e3});b.useEffect(()=>{console.log("DistanceBasedProductSearch received props:",{searchQuery:e,category:t,searchQueryLength:e.length,searchQueryTrimmed:e.trim(),isEmpty:!e||e.trim()==="",isFoodMode:_,mode:i})},[e,t,_,i]),b.useEffect(()=>{console.log("Products and stores data:",{totalProducts:T.length,totalStores:V.length,productsWithStores:T.map(z=>({id:z.id,name:z.name,storeId:z.storeId,store:V.find(H=>H.id===z.storeId)}))})},[T,V]);const W=T.map(z=>{const H=V.find(ge=>ge.id===z.storeId);let X;if(a&&(H!=null&&H.latitude)&&(H!=null&&H.longitude)){const ge=parseFloat(H.latitude),Se=parseFloat(H.longitude);if(!isNaN(ge)&&!isNaN(Se)){const pe=(ge-a.latitude)*Math.PI/180,we=(Se-a.longitude)*Math.PI/180,Be=Math.sin(pe/2)*Math.sin(pe/2)+Math.cos(a.latitude*Math.PI/180)*Math.cos(ge*Math.PI/180)*Math.sin(we/2)*Math.sin(we/2);X=6371*(2*Math.atan2(Math.sqrt(Be),Math.sqrt(1-Be)))}}return{...z,storeDistance:X,storeName:(H==null?void 0:H.name)||"Unknown Store",deliveryTime:(H==null?void 0:H.deliveryTime)||"30-45 min"}}),U=W.filter(z=>{var X,ge;if(O)return console.log(`Search mode: Including all products for search "${e}"`),!0;const H=V.find(Se=>Se.id===z.storeId);if(console.log(`Mode filtering for product "${z.name}":`,{isFoodMode:_,storeType:H==null?void 0:H.storeType,storeName:H==null?void 0:H.name,productId:z.id,storeId:z.storeId}),_){const Se=(H==null?void 0:H.storeType)==="restaurant",F=((X=z.category)==null?void 0:X.toLowerCase().includes("food"))||((ge=z.name)==null?void 0:ge.toLowerCase().includes("food"))||z.preparationTime,pe=Se||!(H!=null&&H.storeType)&&F;return console.log(`Food mode: Product "${z.name}" ${pe?"INCLUDED":"EXCLUDED"} (store type: ${H==null?void 0:H.storeType}, isFoodItem: ${F})`),pe}else{const Se=(H==null?void 0:H.storeType)==="retail",F=!z.preparationTime,pe=Se||!(H!=null&&H.storeType)&&F;return console.log(`Shopping mode: Product "${z.name}" ${pe?"INCLUDED":"EXCLUDED"} (store type: ${H==null?void 0:H.storeType}, isRetailItem: ${F})`),pe}}),Q=U.filter(z=>{var H,X,ge,Se;if(e&&e.trim()){const F=e.toLowerCase().trim(),pe=z.name.toLowerCase().includes(F),we=(H=z.description)==null?void 0:H.toLowerCase().includes(F),Be=(X=z.category)==null?void 0:X.toLowerCase().includes(F),Pe=(ge=z.storeName)==null?void 0:ge.toLowerCase().includes(F);if(console.log(`Filtering product "${z.name}" with search "${e}":`,{nameMatch:pe,descriptionMatch:we,categoryMatch:Be,storeNameMatch:Pe,name:z.name,description:z.description,category:z.category,storeName:z.storeName}),!(pe||we||Be||Pe))return console.log(` Product "${z.name}" filtered out - no match`),!1;console.log(` Product "${z.name}" included - matches search`)}if(t&&t.trim()){const F=t.toLowerCase();if(!((Se=z.category)!=null&&Se.toLowerCase().includes(F)))return!1}if(_&&!O){if(v!=="all"&&z.spiceLevel!==v||x==="vegetarian"&&!z.isVegetarian||x==="vegan"&&!z.isVegan)return!1;if(w!=="all"){const F=parseFloat(z.price.replace(/[^\d.]/g,""));switch(w){case"under-100":if(F>=100)return!1;break;case"100-300":if(F<100||F>300)return!1;break;case"300-500":if(F<300||F>500)return!1;break;case"over-500":if(F<=500)return!1;break}}if(N!=="all"){const F=parseInt(z.preparationTime||"0");switch(N){case"quick":if(F>20)return!1;break;case"medium":if(F<=20||F>45)return!1;break;case"slow":if(F<=45)return!1;break}}if(P!=="all"&&z.storeId.toString()!==P)return!1}return a&&z.storeDistance!==void 0&&!O&&!e?(console.log(`Distance filter: ${z.name} at ${z.storeDistance}km vs max ${d}km`),z.storeDistance<=d):(console.log(` Product "${z.name}" passed all filters`),!0)}).sort((z,H)=>{switch(l){case"distance":if(!a)return 0;const X=z.storeDistance??1/0,ge=H.storeDistance??1/0;return X-ge;case"price-low":return Number(z.price)-Number(H.price);case"price-high":return Number(H.price)-Number(z.price);case"rating":return Number(H.rating)-Number(z.rating);default:return 0}});b.useEffect(()=>{e&&console.log(`Search "${e}": ${W.length} total  ${U.length} mode filtered  ${Q.length} final results`)},[W,U,Q,e]);const q=U.reduce((z,H)=>(H.storeName!=="Unknown Store"&&!z.find(X=>X.id===H.storeId)&&z.push({id:H.storeId,name:H.storeName||"Unknown Store"}),z),[]),B=()=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[_?r.jsx(Da,{className:"h-4 w-4 text-orange-600"}):r.jsx(Vo,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:_?"Food Mode: Restaurant Items Only":"Shopping Mode: Retail Items Only"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Location"}),a?r.jsx("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Location Found"})]})}):r.jsxs($,{onClick:M,disabled:m,variant:"outline",className:"w-full",children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),m?"Getting Location...":"Get My Location"]})]}),a&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Maximum Distance (km)"}),r.jsxs(dt,{value:d.toString(),onValueChange:z=>h(Number(z)),children:[r.jsx(ot,{children:r.jsx(ut,{})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"1",children:"Within 1 km"}),r.jsx(oe,{value:"3",children:"Within 3 km"}),r.jsx(oe,{value:"5",children:"Within 5 km"}),r.jsx(oe,{value:"10",children:"Within 10 km"}),r.jsx(oe,{value:"20",children:"Within 20 km"}),r.jsx(oe,{value:"50",children:"Within 50 km"})]})]})]}),_&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Restaurant"}),r.jsxs(dt,{value:P,onValueChange:k,children:[r.jsx(ot,{children:r.jsx(ut,{placeholder:"All Restaurants"})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Restaurants"}),q.map(z=>r.jsx(oe,{value:z.id.toString(),children:z.name},z.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Spice Level"}),r.jsxs(dt,{value:v,onValueChange:p,children:[r.jsx(ot,{children:r.jsx(ut,{placeholder:"All Spice Levels"})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Spice Levels"}),r.jsx(oe,{value:"mild",children:"Mild"}),r.jsx(oe,{value:"medium",children:"Medium"}),r.jsx(oe,{value:"hot",children:"Hot"}),r.jsx(oe,{value:"extra_hot",children:"Extra Hot"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Dietary Options"}),r.jsxs(dt,{value:x,onValueChange:y,children:[r.jsx(ot,{children:r.jsx(ut,{placeholder:"All Dietary Options"})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Options"}),r.jsx(oe,{value:"vegetarian",children:"Vegetarian"}),r.jsx(oe,{value:"vegan",children:"Vegan"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Price Range"}),r.jsxs(dt,{value:w,onValueChange:j,children:[r.jsx(ot,{children:r.jsx(ut,{placeholder:"All Prices"})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Prices"}),r.jsx(oe,{value:"under-100",children:"Under 100"}),r.jsx(oe,{value:"100-300",children:"100 - 300"}),r.jsx(oe,{value:"300-500",children:"300 - 500"}),r.jsx(oe,{value:"over-500",children:"Over 500"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Preparation Time"}),r.jsxs(dt,{value:N,onValueChange:C,children:[r.jsx(ot,{children:r.jsx(ut,{placeholder:"All Times"})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Times"}),r.jsx(oe,{value:"quick",children:"Quick (20 min)"}),r.jsx(oe,{value:"medium",children:"Medium (21-45 min)"}),r.jsx(oe,{value:"slow",children:"Slow (45+ min)"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{children:"Sort By"}),r.jsxs(dt,{value:l,onValueChange:c,children:[r.jsx(ot,{children:r.jsx(ut,{})}),r.jsxs(lt,{children:[a&&r.jsx(oe,{value:"distance",children:"Nearest First"}),r.jsx(oe,{value:"price-low",children:"Price: Low to High"}),r.jsx(oe,{value:"price-high",children:"Price: High to Low"}),r.jsx(oe,{value:"rating",children:"Highest Rated"})]})]})]})]});return A||D?r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsxs("div",{className:"text-red-500 mb-4",children:[r.jsx(Nr,{className:"h-12 w-12 mx-auto mb-2"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Error Loading Data"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:(A==null?void 0:A.message)||(D==null?void 0:D.message)||"Failed to load products or stores"})]}),r.jsx($,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:"Try Again"})]})}):r.jsxs("div",{className:n,children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[_?r.jsx(Da,{className:"h-5 w-5 text-orange-600"}):r.jsx(Vo,{className:"h-5 w-5 text-blue-600"}),e?`Search results for "${e}"`:_?"Food Items":"Products"]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[a?`Showing ${Q.length} ${_?"food items":"products"} sorted by distance`:`Showing ${Q.length} ${_?"food items":"products"}`,e&&`  Searching for: "${e}"`]}),_&&r.jsx("div",{className:"mt-1",children:r.jsx(ue,{variant:"outline",className:"text-orange-600 border-orange-200",children:"Restaurant Items Only"})})]}),r.jsxs(fme,{children:[r.jsx(pme,{asChild:!0,children:r.jsxs($,{variant:"outline",size:"sm",children:[r.jsx(Kte,{className:"h-4 w-4 mr-2"}),"Filter & Sort"]})}),r.jsxs(jU,{children:[r.jsx(bU,{children:r.jsx(wU,{children:"Filter & Sort Products"})}),r.jsx("div",{className:"mt-6",children:r.jsx(B,{})})]})]})]}),r.jsxs("div",{className:"hidden lg:grid lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-lg",children:"Filters"})}),r.jsx(G,{children:r.jsx(B,{})})]})}),r.jsx("div",{className:"lg:col-span-3",children:I?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Array.from({length:6}).map((z,H)=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"bg-gray-200 h-48 rounded-lg mb-2"}),r.jsx("div",{className:"bg-gray-200 h-4 rounded mb-1"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-3/4"})]},H))}):Q.length>0?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Q.map(z=>r.jsx(Uh,{product:z},z.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No products found"}),r.jsx("p",{className:"text-muted-foreground",children:a?"Try increasing the distance range or adjusting your search.":"Try different search terms or enable location access for distance-based results."})]})})]}),r.jsx("div",{className:"lg:hidden",children:I?r.jsx("div",{className:"grid grid-cols-2 gap-4",children:Array.from({length:6}).map((z,H)=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"bg-gray-200 h-32 rounded-lg mb-2"}),r.jsx("div",{className:"bg-gray-200 h-4 rounded mb-1"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-3/4"})]},H))}):Q.length>0?r.jsx("div",{className:"grid grid-cols-2 gap-4",children:Q.map(z=>r.jsx(Uh,{product:z},z.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No products found"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:a?"Try increasing the distance range or adjusting your search.":"Try different search terms or enable location access for distance-based results."})]})})]})}function Zme(){const[e]=Jr(),{mode:t}=ua(),[n,s]=b.useState(new URLSearchParams(window.location.search)),i=n.get("search")||"",a=n.get("category");return b.useEffect(()=>{const o=new URLSearchParams(window.location.search);s(o),console.log("Products page location changed:",{location:e,searchQuery:o.get("search"),categoryQuery:o.get("category"),fullURL:window.location.href,windowSearch:window.location.search,hasSearchParam:window.location.search.includes("search=")})},[e]),b.useEffect(()=>{const o=()=>{const c=new URLSearchParams(window.location.search);s(c),console.log("Window location changed (forced refresh):",{search:c.get("search"),windowSearch:window.location.search})};window.addEventListener("popstate",o);const l=setInterval(()=>{const c=window.location.search;(new URLSearchParams(c).get("search")||"")!==i&&(console.log("Location change detected via polling"),o())},100);return()=>{window.removeEventListener("popstate",o),clearInterval(l)}},[i]),console.log("Products page rendering with:",{searchQuery:i,categoryQuery:a}),r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:r.jsx(Gme,{searchQuery:i,category:a||"",isRestaurantMode:t==="food"})})})}var Yme="Separator",jD="horizontal",Xme=["horizontal","vertical"],a9=b.forwardRef((e,t)=>{const{decorative:n,orientation:s=jD,...i}=e,a=Qme(s)?s:jD,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return r.jsx(Je.div,{"data-orientation":a,...l,...i,ref:t})});a9.displayName=Yme;function Qme(e){return Xme.includes(e)}var o9=a9;const hn=b.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},i)=>r.jsx(o9,{ref:i,decorative:n,orientation:t,className:Ve("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));hn.displayName=o9.displayName;const Yt=b.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:Ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Yt.displayName="Textarea";function C1({rating:e,onRatingChange:t,maxRating:n=5,size:s="md",readonly:i=!1,showValue:a=!1,className:o}){const[l,c]=b.useState(0),d={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"},h=p=>{!i&&t&&t(p)},m=p=>{i||c(p)},f=()=>{i||c(0)},v=l||e;return r.jsxs("div",{className:Ve("flex items-center gap-1",o),children:[r.jsx("div",{className:"flex items-center",children:Array.from({length:n},(p,x)=>{const y=x+1,w=y<=v,j=y>v&&y-1<v;return r.jsx("button",{type:"button",className:Ve("relative transition-colors",!i&&"hover:scale-110 cursor-pointer",i&&"cursor-default"),onClick:()=>h(y),onMouseEnter:()=>m(y),onMouseLeave:f,disabled:i,children:r.jsx(Bt,{className:Ve(d[s],"transition-colors",w?"fill-yellow-400 text-yellow-400":j?"fill-yellow-200 text-yellow-400":"fill-gray-200 text-gray-300 dark:fill-gray-700 dark:text-gray-600")})},x)})}),a&&r.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.toFixed(1)})]})}function Jme({productId:e,productName:t}){const[n,s]=b.useState(!1),[i,a]=b.useState({rating:0,title:"",comment:""}),[o,l]=b.useState(null),{user:c}=Gt(),{toast:d}=ft(),h=on(),{data:m=[],isLoading:f}=Le({queryKey:["/api/products",e,"reviews",{minRating:o}],queryFn:async()=>{const C=await(await fetch(`/api/products/${e}/reviews${o?`?minRating=${o}`:""}`)).json();return Array.isArray(C)?C:[]}}),v=pt({mutationFn:N=>Kt("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/products",e,"reviews"]}),s(!1),a({rating:0,title:"",comment:""}),d({title:"Review submitted",description:"Your review has been posted successfully!"})},onError:N=>{d({title:"Error",description:N.message||"Failed to submit review",variant:"destructive"})}}),p=pt({mutationFn:N=>Kt(`/api/reviews/${N}/helpful`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:(c==null?void 0:c.id)||9})}),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/products",e,"reviews"]}),d({title:"Thank you!",description:"Review marked as helpful"})},onError:N=>{const C=(N==null?void 0:N.error)||(N==null?void 0:N.message)||"Failed to mark review as helpful";d({title:"Error",description:C,variant:"destructive"})}}),x=()=>{if(!c){d({title:"Login required",description:"Please login to submit a review",variant:"destructive"});return}if(i.rating===0){d({title:"Rating required",description:"Please provide a rating",variant:"destructive"});return}const N={productId:e,customerId:c.id,rating:i.rating,title:i.title||null,comment:i.comment||null};console.log("Submitting review with payload:",N),v.mutate(N)},y=m.length>0?m.reduce((N,C)=>N+C.rating,0)/m.length:0,w=[5,4,3,2,1].map(N=>({rating:N,count:m.filter(C=>C.rating===N).length,percentage:m.length>0?m.filter(C=>C.rating===N).length/m.length*100:0})),j=c&&m.some(N=>{var C;return((C=N.customer)==null?void 0:C.id)===c.id});return f?r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),r.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs(K,{children:[r.jsx(re,{className:"pb-3",children:r.jsx(ne,{className:"text-lg",children:"Customer Reviews"})}),r.jsxs(G,{className:"pt-0",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:y.toFixed(1)}),r.jsx(C1,{rating:y,readonly:!0,size:"md",className:"justify-center mb-1"}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[m.length," review",m.length!==1?"s":""]})]}),r.jsx("div",{className:"space-y-1",children:w.map(({rating:N,count:C,percentage:P})=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs w-6",children:N}),r.jsx(Bt,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),r.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:r.jsx("div",{className:"bg-yellow-400 h-1.5 rounded-full",style:{width:`${P}%`}})}),r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 w-8",children:C})]},N))})]}),r.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[r.jsx($,{variant:o===null?"default":"outline",size:"sm",className:"h-7 px-3 text-xs",onClick:()=>l(null),children:"All"}),[5,4,3,2,1].map(N=>r.jsxs($,{variant:o===N?"default":"outline",size:"sm",className:"h-7 px-3 text-xs",onClick:()=>l(N),children:[N,""]},N))]})]})]}),c&&!j&&r.jsxs(K,{children:[r.jsx(re,{className:"pb-3",children:r.jsx(ne,{className:"text-base",children:"Write a Review"})}),r.jsx(G,{className:"pt-0",children:n?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium mb-1",children:"Rating *"}),r.jsx(C1,{rating:i.rating,onRatingChange:N=>a(C=>({...C,rating:N})),size:"md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium mb-1",children:"Title (Optional)"}),r.jsx(de,{placeholder:"Summarize your review...",value:i.title,onChange:N=>a(C=>({...C,title:N.target.value})),className:"h-8"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium mb-1",children:"Review (Optional)"}),r.jsx(Yt,{placeholder:`Share your thoughts about ${t}...`,value:i.comment,onChange:N=>a(C=>({...C,comment:N.target.value})),rows:3,className:"text-sm"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx($,{onClick:x,disabled:v.isPending||i.rating===0,children:v.isPending?"Submitting...":"Submit Review"}),r.jsx($,{variant:"outline",onClick:()=>{s(!1),a({rating:0,title:"",comment:""})},children:"Cancel"})]})]}):r.jsx($,{onClick:()=>s(!0),children:"Write a Review"})})]}),r.jsx("div",{className:"space-y-3",children:m.length===0?r.jsx(K,{children:r.jsx(G,{className:"text-center py-6",children:r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No reviews yet. Be the first to review this product!"})})}):m.map(N=>{var C,P;return r.jsx(K,{children:r.jsxs(G,{className:"pt-4 pb-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:r.jsx(Wr,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:((C=N.customer)==null?void 0:C.fullName)||((P=N.customer)==null?void 0:P.username)||"Anonymous"}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[r.jsx(ql,{className:"h-3 w-3"}),new Date(N.createdAt).toLocaleDateString(),N.isVerifiedPurchase&&r.jsx(ue,{variant:"secondary",className:"text-xs h-4",children:"Verified"})]})]})]}),r.jsx(C1,{rating:N.rating,readonly:!0,size:"sm"})]}),N.title&&r.jsx("h4",{className:"font-medium text-sm mb-2",children:N.title}),N.comment&&r.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3 text-sm leading-relaxed",children:N.comment}),r.jsx("div",{className:"flex items-center gap-4 text-xs",children:r.jsxs("button",{onClick:()=>p.mutate(N.id),disabled:p.isPending,className:"flex items-center gap-1 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 disabled:opacity-50 transition-colors",children:[r.jsx(Az,{className:"h-3 w-3"}),p.isPending?"...":`Helpful (${N.helpfulCount})`]})})]})},N.id)})})]})}function bD(){const{id:e}=Pm(),[,t]=Jr(),[n,s]=b.useState(1),[i,a]=b.useState(0),[o,l]=b.useState(null),[c,d]=b.useState(null),{addToCart:h,selectSingleItem:m}=wc(),{toast:f}=ft(),{mode:v}=ua(),{data:p,isLoading:x}=Le({queryKey:[`/api/products/${e}`],enabled:!!e}),{data:y}=Le({queryKey:[`/api/stores/${p==null?void 0:p.storeId}`],enabled:!!(p!=null&&p.storeId)}),{data:w=[]}=Le({queryKey:["/api/products",{category:p==null?void 0:p.categoryId}],enabled:!!(p!=null&&p.categoryId)}),j=w.filter(_=>v==="shopping"?_.productType!=="food":_.productType==="food").filter(_=>_.id!==(p==null?void 0:p.id));b.useEffect(()=>{y&&(async()=>{try{const O=await qo();if(l(O),y!=null&&y.latitude&&(y!=null&&y.longitude)){const M=parseFloat(y.latitude),T=parseFloat(y.longitude);if(!isNaN(M)&&!isNaN(T)){const A=(M-O.latitude)*Math.PI/180,V=(T-O.longitude)*Math.PI/180,D=Math.sin(A/2)*Math.sin(A/2)+Math.cos(O.latitude*Math.PI/180)*Math.cos(M*Math.PI/180)*Math.sin(V/2)*Math.sin(V/2),U=6371*(2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D)));d(U)}}}catch{d(null)}})()},[y]);const N=async()=>{if(p)try{await h(p.id,n),f({title:"Added to cart",description:`${n} ${p.name}(s) added to your cart.`})}catch(_){f({title:"Error",description:_ instanceof Error?_.message:"Failed to add to cart",variant:"destructive"})}};if(x)return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx("div",{children:"Loading product..."})});if(!p)return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Product not found"}),r.jsx(Ae,{href:"/products",children:r.jsx($,{children:"Back to Products"})})]})});const C=p.originalPrice?Math.round((Number(p.originalPrice)-Number(p.price))/Number(p.originalPrice)*100):0,P=wue(p),k=j.filter(_=>_.id!==p.id).slice(0,4);return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:r.jsxs("div",{className:"bg-card rounded-lg p-4 sm:p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8",children:[r.jsxs("div",{children:[r.jsx("div",{className:"mb-4",children:r.jsx("img",{src:P[i],alt:p.name,className:"w-full h-64 sm:h-80 lg:h-96 object-cover rounded-lg shadow-lg",onError:_=>{const O=_.target;O.src.includes("unsplash")||(O.src=OV(p))},loading:"lazy"})}),P.length>1&&r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:P.map((_,O)=>r.jsx("img",{src:_,alt:`${p.name} ${O+1}`,className:`w-full h-20 object-cover rounded cursor-pointer border-2 ${i===O?"border-primary":"border-border"}`,onClick:()=>a(O)},O))})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground mb-4",children:p.name}),r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"flex text-yellow-400 mr-2",children:Array.from({length:5}).map((_,O)=>r.jsx(Bt,{className:`h-4 w-4 ${O<Math.floor(Number(p.rating))?"fill-current":""}`},O))}),r.jsxs("span",{className:"text-muted-foreground",children:["(",p.rating,")  ",p.totalReviews," reviews"]})]}),r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsxs("span",{className:"text-3xl font-bold text-foreground",children:["",Number(p.price).toLocaleString()]}),p.originalPrice&&r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"text-xl text-muted-foreground line-through",children:["",Number(p.originalPrice).toLocaleString()]}),r.jsxs(ue,{variant:"destructive",children:[C,"% OFF"]})]})]}),p.description&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Product Description"}),r.jsx("p",{className:"text-muted-foreground",children:p.description})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Quantity"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center border rounded",children:[r.jsx($,{variant:"ghost",size:"sm",onClick:()=>s(Math.max(1,n-1)),disabled:n<=1,children:r.jsx(kz,{className:"h-4 w-4"})}),r.jsx("span",{className:"px-4 py-2 border-l border-r",children:n}),r.jsx($,{variant:"ghost",size:"sm",onClick:()=>s(n+1),disabled:n>=(p.stock||0),children:r.jsx(zt,{className:"h-4 w-4"})})]}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["In Stock: ",p.stock," units"]})]})]}),r.jsxs("div",{className:"flex gap-4 mb-6",children:[r.jsxs($,{onClick:N,className:"flex-1 btn-secondary",children:[r.jsx(_n,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}),r.jsx($,{className:"flex-1 btn-primary",onClick:async()=>{try{await m(p.id),f({title:"Ready for Checkout",description:`${p.name} selected for checkout`}),t("/checkout")}catch{f({title:"Error",description:"Failed to prepare item for checkout",variant:"destructive"})}},children:"Buy Now"}),r.jsx($,{variant:"outline",size:"icon",children:r.jsx(Ma,{className:"h-4 w-4"})})]}),y&&r.jsxs("div",{className:"border-t pt-6",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Sold by"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:r.jsx(ar,{className:"h-6 w-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:y.name}),r.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[r.jsx(Re,{className:"h-3 w-3 mr-1"}),r.jsxs("span",{children:[c!==null?`${c.toFixed(1)} km away`:"Distance unavailable","  ",y.rating||"0.00","  (",y.totalReviews||0," reviews)"]})]})]}),r.jsx(Ae,{href:`/stores/${y.id}`,children:r.jsx($,{variant:"outline",size:"sm",children:"Visit Store"})})]})]})]})]}),r.jsxs("div",{className:"mt-8",children:[r.jsx(hn,{className:"mb-8"}),r.jsx(Jme,{productId:p.id,productName:p.name})]}),k.length>0&&r.jsxs("div",{className:"mt-12",children:[r.jsx(hn,{className:"mb-8"}),r.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Related Products"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:k.map(_=>r.jsx(Uh,{product:_},_.id))})]})]})})})}function efe(){const[e,t]=b.useState(""),[n,s]=b.useState("all"),[i,a]=b.useState("all"),[o,l]=b.useState("all"),[c,d]=b.useState("all"),[h,m]=b.useState("all"),[f,v]=b.useState("name"),[p,x]=b.useState(null),[y,w]=b.useState(!1),[j,N]=b.useState(!1),{toast:C}=ft(),{data:P=[],isLoading:k,error:_,refetch:O}=Le({queryKey:["/api/products"]}),{data:M=[],isLoading:T,error:I}=Le({queryKey:["/api/stores"]}),V=P.filter(B=>{const z=M.find(H=>H.id===B.storeId);return(z==null?void 0:z.storeType)==="restaurant"}).map(B=>{const z=M.find(X=>X.id===B.storeId);let H;if(p&&(z!=null&&z.latitude)&&(z!=null&&z.longitude)){const X=parseFloat(z.latitude),ge=parseFloat(z.longitude);if(!isNaN(X)&&!isNaN(ge)){const F=(X-p.latitude)*Math.PI/180,pe=(ge-p.longitude)*Math.PI/180,we=Math.sin(F/2)*Math.sin(F/2)+Math.cos(p.latitude*Math.PI/180)*Math.cos(X*Math.PI/180)*Math.sin(pe/2)*Math.sin(pe/2);H=6371*(2*Math.atan2(Math.sqrt(we),Math.sqrt(1-we)))}}return{...B,storeName:(z==null?void 0:z.name)||"Unknown Restaurant",storeDistance:H,deliveryTime:(z==null?void 0:z.deliveryTime)||"30-45 min"}}),D=[...new Set(V.map(B=>B.category).filter(Boolean))],W=[...new Set(V.map(B=>({id:B.storeId,name:B.storeName})).filter(B=>B.name!=="Unknown Restaurant"))],Q=[...V.filter(B=>{var z,H;if(e&&!B.name.toLowerCase().includes(e.toLowerCase())&&!((z=B.description)!=null&&z.toLowerCase().includes(e.toLowerCase()))&&!((H=B.storeName)!=null&&H.toLowerCase().includes(e.toLowerCase()))||n!=="all"&&B.category!==n||i!=="all"&&B.storeId.toString()!==i||o!=="all"&&B.spiceLevel!==o||c==="vegetarian"&&!B.isVegetarian||c==="vegan"&&!B.isVegan)return!1;if(h!=="all"){const X=parseFloat(B.price.replace(/[^\d.]/g,""));switch(h){case"under-100":if(X>=100)return!1;break;case"100-300":if(X<100||X>300)return!1;break;case"300-500":if(X<300||X>500)return!1;break;case"over-500":if(X<=500)return!1;break}}return!0})].sort((B,z)=>{switch(f){case"name":return B.name.localeCompare(z.name);case"price-low":return parseFloat(B.price.replace(/[^\d.]/g,""))-parseFloat(z.price.replace(/[^\d.]/g,""));case"price-high":return parseFloat(z.price.replace(/[^\d.]/g,""))-parseFloat(B.price.replace(/[^\d.]/g,""));case"rating":return parseFloat(z.rating||"0")-parseFloat(B.rating||"0");case"distance":return!B.storeDistance&&!z.storeDistance?0:B.storeDistance?z.storeDistance?B.storeDistance-z.storeDistance:-1:1;default:return 0}}),q=async()=>{try{const B=await qo();x(B),w(!0),C({title:"Location enabled",description:"Now showing distances to restaurants"})}catch{C({title:"Location access denied",description:"Enable location to see distances to restaurants",variant:"destructive"})}};return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Pa,{className:"h-8 w-8 text-orange-500"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Quick Bites"})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Discover delicious food items from all restaurants in one place"})]}),r.jsxs(K,{className:"mb-8",children:[r.jsx(re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(po,{className:"h-5 w-5"}),"Find Your Perfect Meal"]}),r.jsxs($,{variant:"outline",size:"sm",onClick:()=>N(!j),className:"flex items-center gap-2",children:[r.jsx(po,{className:"h-4 w-4"}),j?"Hide Filters":"Show Filters",j?r.jsx(xk,{className:"h-4 w-4"}):r.jsx(mb,{className:"h-4 w-4"})]})]})}),r.jsxs(G,{className:"space-y-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(de,{placeholder:"Search for dishes, restaurants, or ingredients...",value:e,onChange:B=>t(B.target.value),className:"pl-10"})]}),j&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(dt,{value:n,onValueChange:s,children:[r.jsxs(ot,{children:[r.jsx(Da,{className:"h-4 w-4 mr-2"}),r.jsx(ut,{placeholder:"All Categories"})]}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Categories"}),D.map(B=>r.jsx(oe,{value:B,children:B},B))]})]}),r.jsxs(dt,{value:i,onValueChange:a,children:[r.jsxs(ot,{children:[r.jsx(Pa,{className:"h-4 w-4 mr-2"}),r.jsx(ut,{placeholder:"All Restaurants"})]}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Restaurants"}),W.map(B=>r.jsx(oe,{value:B.id.toString(),children:B.name},B.id))]})]}),r.jsxs(dt,{value:o,onValueChange:l,children:[r.jsxs(ot,{children:[r.jsx(po,{className:"h-4 w-4 mr-2"}),r.jsx(ut,{placeholder:"Spice Level"})]}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Spice Levels"}),r.jsx(oe,{value:"Mild",children:"Mild"}),r.jsx(oe,{value:"Medium",children:"Medium"}),r.jsx(oe,{value:"Hot",children:"Hot"}),r.jsx(oe,{value:"Extra Hot",children:"Extra Hot"})]})]}),!y&&r.jsxs($,{variant:"outline",onClick:q,children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),"Enable Location"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(dt,{value:c,onValueChange:d,children:[r.jsxs(ot,{children:[r.jsx(po,{className:"h-4 w-4 mr-2"}),r.jsx(ut,{placeholder:"Dietary Preferences"})]}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Options"}),r.jsx(oe,{value:"vegetarian",children:"Vegetarian"}),r.jsx(oe,{value:"vegan",children:"Vegan"})]})]}),r.jsxs(dt,{value:h,onValueChange:m,children:[r.jsxs(ot,{children:[r.jsx(po,{className:"h-4 w-4 mr-2"}),r.jsx(ut,{placeholder:"Price Range"})]}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Prices"}),r.jsx(oe,{value:"under-100",children:"Under 100"}),r.jsx(oe,{value:"100-300",children:"100 - 300"}),r.jsx(oe,{value:"300-500",children:"300 - 500"}),r.jsx(oe,{value:"over-500",children:"Over 500"})]})]}),r.jsxs(dt,{value:f,onValueChange:v,children:[r.jsxs(ot,{children:[r.jsx(po,{className:"h-4 w-4 mr-2"}),r.jsx(ut,{placeholder:"Sort By"})]}),r.jsxs(lt,{children:[r.jsx(oe,{value:"name",children:"Name A-Z"}),r.jsx(oe,{value:"price-low",children:"Price: Low to High"}),r.jsx(oe,{value:"price-high",children:"Price: High to Low"}),r.jsx(oe,{value:"rating",children:"Highest Rated"}),y&&r.jsx(oe,{value:"distance",children:"Nearest First"})]})]})]}),r.jsx("div",{className:"flex items-center justify-between",children:y?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Location enabled - showing distances to restaurants"})]}):r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Enable location to see distances to restaurants"}),r.jsxs($,{onClick:q,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4"}),"Enable Location"]})]})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs(K,{children:[r.jsx(re,{className:"pb-3",children:r.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Total Food Items"})}),r.jsx(G,{children:r.jsx("div",{className:"text-2xl font-bold",children:V.length})})]}),r.jsxs(K,{children:[r.jsx(re,{className:"pb-3",children:r.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Restaurants"})}),r.jsx(G,{children:r.jsx("div",{className:"text-2xl font-bold",children:W.length})})]}),r.jsxs(K,{children:[r.jsx(re,{className:"pb-3",children:r.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Categories"})}),r.jsx(G,{children:r.jsx("div",{className:"text-2xl font-bold",children:D.length})})]})]}),r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h2",{className:"text-xl font-semibold",children:Q.length>0?r.jsxs(r.Fragment,{children:[Q.length," food item",Q.length!==1?"s":""," found",V.length!==Q.length&&r.jsxs("span",{className:"text-muted-foreground ml-2",children:["(filtered from ",V.length," total)"]})]}):"No food items found"})}),_||I?r.jsx(K,{children:r.jsxs(G,{className:"pt-6 text-center",children:[r.jsxs(ii,{className:"max-w-md mx-auto mb-6",children:[r.jsx(Nr,{className:"h-4 w-4"}),r.jsx(ai,{children:"Failed to load food items. Please try again."})]}),r.jsxs($,{onClick:()=>{O()},variant:"outline",disabled:k||T,children:[r.jsx(Ms,{className:`mr-2 h-4 w-4 ${k||T?"animate-spin":""}`}),"Retry Loading"]})]})}):k||T?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4",children:Array.from({length:8}).map((B,z)=>r.jsx(K,{className:"animate-pulse",children:r.jsxs(G,{className:"p-3",children:[r.jsx("div",{className:"bg-gray-200 h-32 rounded-md mb-3"}),r.jsx("div",{className:"bg-gray-200 h-4 rounded mb-2"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-2/3 mb-2"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded w-1/2"})]})},z))}):Q.length>0?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4",children:Q.map(B=>r.jsxs("div",{className:"relative",children:[r.jsx(Uh,{product:B}),r.jsx("div",{className:"absolute top-2 left-2",children:r.jsx(ue,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:B.storeName})}),y&&B.storeDistance&&r.jsx("div",{className:"absolute top-2 right-2",children:r.jsxs(ue,{variant:"outline",className:"text-xs bg-white/90 dark:bg-black/90",children:[B.storeDistance.toFixed(1)," km"]})})]},B.id))}):r.jsx(K,{children:r.jsxs(G,{className:"pt-6 text-center",children:[r.jsxs("div",{className:"text-muted-foreground mb-4",children:[r.jsx(Qn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No food items found"}),r.jsx("p",{children:"Try adjusting your search criteria or filters to find delicious meals"})]}),r.jsx($,{variant:"outline",onClick:()=>{t(""),s("all"),a("all"),l("all"),d("all"),m("all"),v("name")},children:"Clear All Filters"})]})})]})})}var Sg=e=>e.type==="checkbox",ed=e=>e instanceof Date,ds=e=>e==null;const l9=e=>typeof e=="object";var sn=e=>!ds(e)&&!Array.isArray(e)&&l9(e)&&!ed(e),c9=e=>sn(e)&&e.target?Sg(e.target)?e.target.checked:e.target.value:e,tfe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,d9=(e,t)=>e.has(tfe(t)),rfe=e=>{const t=e.constructor&&e.constructor.prototype;return sn(t)&&t.hasOwnProperty("isPrototypeOf")},kT=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ln(e){let t;const n=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(kT&&(e instanceof Blob||s))&&(n||sn(e)))if(t=n?[]:{},!n&&!rfe(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=Ln(e[i]));else return e;return t}var Bb=e=>Array.isArray(e)?e.filter(Boolean):[],rn=e=>e===void 0,Ge=(e,t,n)=>{if(!t||!sn(e))return n;const s=Bb(t.split(/[,[\].]+?/)).reduce((i,a)=>ds(i)?i:i[a],e);return rn(s)||s===e?rn(e[t])?n:e[t]:s},Vs=e=>typeof e=="boolean",TT=e=>/^\w*$/.test(e),u9=e=>Bb(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ir=(e,t,n)=>{let s=-1;const i=TT(t)?[t]:u9(t),a=i.length,o=a-1;for(;++s<a;){const l=i[s];let c=n;if(s!==o){const d=e[l];c=sn(d)||Array.isArray(d)?d:isNaN(+i[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const P0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Xi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},so={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},h9=te.createContext(null),Vb=()=>te.useContext(h9),nfe=e=>{const{children:t,...n}=e;return te.createElement(h9.Provider,{value:n},t)};var m9=(e,t,n,s=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Xi.all&&(t._proxyFormState[o]=!s||Xi.all),n&&(n[o]=!0),e[o]}});return i};function sfe(e){const t=Vb(),{control:n=t.control,disabled:s,name:i,exact:a}=e||{},[o,l]=te.useState(n._formState),c=te.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=te.useRef(i);return d.current=i,te.useEffect(()=>n._subscribe({name:d.current,formState:c.current,exact:a,callback:h=>{!s&&l({...n._formState,...h})}}),[n,s,a]),te.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),te.useMemo(()=>m9(o,n,c.current,!1),[o,n])}var ka=e=>typeof e=="string",f9=(e,t,n,s,i)=>ka(e)?(s&&t.watch.add(e),Ge(n,e,i)):Array.isArray(e)?e.map(a=>(s&&t.watch.add(a),Ge(n,a))):(s&&(t.watchAll=!0),n);function ife(e){const t=Vb(),{control:n=t.control,name:s,defaultValue:i,disabled:a,exact:o}=e||{},l=te.useRef(s),c=te.useRef(i);l.current=s,te.useEffect(()=>n._subscribe({name:l.current,formState:{values:!0},exact:o,callback:m=>!a&&h(f9(l.current,n._names,m.values||n._formValues,!1,c.current))}),[n,a,o]);const[d,h]=te.useState(n._getWatch(s,i));return te.useEffect(()=>n._removeUnmounted()),d}function afe(e){const t=Vb(),{name:n,disabled:s,control:i=t.control,shouldUnregister:a}=e,o=d9(i._names.array,n),l=ife({control:i,name:n,defaultValue:Ge(i._formValues,n,Ge(i._defaultValues,n,e.defaultValue)),exact:!0}),c=sfe({control:i,name:n,exact:!0}),d=te.useRef(e),h=te.useRef(i.register(n,{...e.rules,value:l,...Vs(e.disabled)?{disabled:e.disabled}:{}})),m=te.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ge(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ge(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ge(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ge(c.validatingFields,n)},error:{enumerable:!0,get:()=>Ge(c.errors,n)}}),[c,n]),f=te.useCallback(y=>h.current.onChange({target:{value:c9(y),name:n},type:P0.CHANGE}),[n]),v=te.useCallback(()=>h.current.onBlur({target:{value:Ge(i._formValues,n),name:n},type:P0.BLUR}),[n,i._formValues]),p=te.useCallback(y=>{const w=Ge(i._fields,n);w&&y&&(w._f.ref={focus:()=>y.focus(),select:()=>y.select(),setCustomValidity:j=>y.setCustomValidity(j),reportValidity:()=>y.reportValidity()})},[i._fields,n]),x=te.useMemo(()=>({name:n,value:l,...Vs(s)||c.disabled?{disabled:c.disabled||s}:{},onChange:f,onBlur:v,ref:p}),[n,s,c.disabled,f,v,p,l]);return te.useEffect(()=>{const y=i._options.shouldUnregister||a;i.register(n,{...d.current.rules,...Vs(d.current.disabled)?{disabled:d.current.disabled}:{}});const w=(j,N)=>{const C=Ge(i._fields,j);C&&C._f&&(C._f.mount=N)};if(w(n,!0),y){const j=Ln(Ge(i._options.defaultValues,n));ir(i._defaultValues,n,j),rn(Ge(i._formValues,n))&&ir(i._formValues,n,j)}return!o&&i.register(n),()=>{(o?y&&!i._state.action:y)?i.unregister(n):w(n,!1)}},[n,i,o,a]),te.useEffect(()=>{i._setDisabledField({disabled:s,name:n})},[s,n,i]),te.useMemo(()=>({field:x,formState:c,fieldState:m}),[x,c,m])}const ofe=e=>e.render(afe(e));var p9=(e,t,n,s,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:i||!0}}:{},up=e=>Array.isArray(e)?e:[e],wD=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}},i2=e=>ds(e)||!l9(e);function jl(e,t){if(i2(e)||i2(t))return e===t;if(ed(e)&&ed(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const i of n){const a=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const o=t[i];if(ed(a)&&ed(o)||sn(a)&&sn(o)||Array.isArray(a)&&Array.isArray(o)?!jl(a,o):a!==o)return!1}}return!0}var ls=e=>sn(e)&&!Object.keys(e).length,AT=e=>e.type==="file",Qi=e=>typeof e=="function",C0=e=>{if(!kT)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},x9=e=>e.type==="select-multiple",ET=e=>e.type==="radio",lfe=e=>ET(e)||Sg(e),k1=e=>C0(e)&&e.isConnected;function cfe(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=rn(e)?s++:e[t[s++]];return e}function dfe(e){for(const t in e)if(e.hasOwnProperty(t)&&!rn(e[t]))return!1;return!0}function yn(e,t){const n=Array.isArray(t)?t:TT(t)?[t]:u9(t),s=n.length===1?e:cfe(e,n),i=n.length-1,a=n[i];return s&&delete s[a],i!==0&&(sn(s)&&ls(s)||Array.isArray(s)&&dfe(s))&&yn(e,n.slice(0,-1)),e}var g9=e=>{for(const t in e)if(Qi(e[t]))return!0;return!1};function k0(e,t={}){const n=Array.isArray(e);if(sn(e)||n)for(const s in e)Array.isArray(e[s])||sn(e[s])&&!g9(e[s])?(t[s]=Array.isArray(e[s])?[]:{},k0(e[s],t[s])):ds(e[s])||(t[s]=!0);return t}function v9(e,t,n){const s=Array.isArray(e);if(sn(e)||s)for(const i in e)Array.isArray(e[i])||sn(e[i])&&!g9(e[i])?rn(t)||i2(n[i])?n[i]=Array.isArray(e[i])?k0(e[i],[]):{...k0(e[i])}:v9(e[i],ds(t)?{}:t[i],n[i]):n[i]=!jl(e[i],t[i]);return n}var Pf=(e,t)=>v9(e,t,k0(t));const ND={value:!1,isValid:!1},SD={value:!0,isValid:!0};var y9=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!rn(e[0].attributes.value)?rn(e[0].value)||e[0].value===""?SD:{value:e[0].value,isValid:!0}:SD:ND}return ND},j9=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>rn(e)?e:t?e===""?NaN:e&&+e:n&&ka(e)?new Date(e):s?s(e):e;const _D={isValid:!1,value:null};var b9=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,_D):_D;function PD(e){const t=e.ref;return AT(t)?t.files:ET(t)?b9(e.refs).value:x9(t)?[...t.selectedOptions].map(({value:n})=>n):Sg(t)?y9(e.refs).value:j9(rn(t.value)?e.ref.value:t.value,e)}var ufe=(e,t,n,s)=>{const i={};for(const a of e){const o=Ge(t,a);o&&ir(i,a,o._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:s}},T0=e=>e instanceof RegExp,Cf=e=>rn(e)?e:T0(e)?e.source:sn(e)?T0(e.value)?e.value.source:e.value:e,CD=e=>({isOnSubmit:!e||e===Xi.onSubmit,isOnBlur:e===Xi.onBlur,isOnChange:e===Xi.onChange,isOnAll:e===Xi.all,isOnTouch:e===Xi.onTouched});const kD="AsyncFunction";var hfe=e=>!!e&&!!e.validate&&!!(Qi(e.validate)&&e.validate.constructor.name===kD||sn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===kD)),mfe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),TD=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const hp=(e,t,n,s)=>{for(const i of n||Object.keys(e)){const a=Ge(e,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!s)return!0;if(o.ref&&t(o.ref,o.name)&&!s)return!0;if(hp(l,t))break}else if(sn(l)&&hp(l,t))break}}};function AD(e,t,n){const s=Ge(e,n);if(s||TT(n))return{error:s,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Ge(t,a),l=Ge(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:n}}var ffe=(e,t,n,s)=>{n(e);const{name:i,...a}=e;return ls(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!s||Xi.all))},pfe=(e,t,n)=>!e||!t||e===t||up(e).some(s=>s&&(n?s===t:s.startsWith(t)||t.startsWith(s))),xfe=(e,t,n,s,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?s.isOnBlur:i.isOnBlur)?!e:(n?s.isOnChange:i.isOnChange)?e:!0,gfe=(e,t)=>!Bb(Ge(e,t)).length&&yn(e,t),vfe=(e,t,n)=>{const s=up(Ge(e,n));return ir(s,"root",t[n]),ir(e,n,s),e},Ny=e=>ka(e);function ED(e,t,n="validate"){if(Ny(e)||Array.isArray(e)&&e.every(Ny)||Vs(e)&&!e)return{type:n,message:Ny(e)?e:"",ref:t}}var Su=e=>sn(e)&&!T0(e)?e:{value:e,message:""},OD=async(e,t,n,s,i,a)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:h,min:m,max:f,pattern:v,validate:p,name:x,valueAsNumber:y,mount:w}=e._f,j=Ge(n,x);if(!w||t.has(x))return{};const N=l?l[0]:o,C=A=>{i&&N.reportValidity&&(N.setCustomValidity(Vs(A)?"":A||""),N.reportValidity())},P={},k=ET(o),_=Sg(o),O=k||_,M=(y||AT(o))&&rn(o.value)&&rn(j)||C0(o)&&o.value===""||j===""||Array.isArray(j)&&!j.length,T=p9.bind(null,x,s,P),I=(A,V,D,W=so.maxLength,U=so.minLength)=>{const Q=A?V:D;P[x]={type:A?W:U,message:Q,ref:o,...T(A?W:U,Q)}};if(a?!Array.isArray(j)||!j.length:c&&(!O&&(M||ds(j))||Vs(j)&&!j||_&&!y9(l).isValid||k&&!b9(l).isValid)){const{value:A,message:V}=Ny(c)?{value:!!c,message:c}:Su(c);if(A&&(P[x]={type:so.required,message:V,ref:N,...T(so.required,V)},!s))return C(V),P}if(!M&&(!ds(m)||!ds(f))){let A,V;const D=Su(f),W=Su(m);if(!ds(j)&&!isNaN(j)){const U=o.valueAsNumber||j&&+j;ds(D.value)||(A=U>D.value),ds(W.value)||(V=U<W.value)}else{const U=o.valueAsDate||new Date(j),Q=z=>new Date(new Date().toDateString()+" "+z),q=o.type=="time",B=o.type=="week";ka(D.value)&&j&&(A=q?Q(j)>Q(D.value):B?j>D.value:U>new Date(D.value)),ka(W.value)&&j&&(V=q?Q(j)<Q(W.value):B?j<W.value:U<new Date(W.value))}if((A||V)&&(I(!!A,D.message,W.message,so.max,so.min),!s))return C(P[x].message),P}if((d||h)&&!M&&(ka(j)||a&&Array.isArray(j))){const A=Su(d),V=Su(h),D=!ds(A.value)&&j.length>+A.value,W=!ds(V.value)&&j.length<+V.value;if((D||W)&&(I(D,A.message,V.message),!s))return C(P[x].message),P}if(v&&!M&&ka(j)){const{value:A,message:V}=Su(v);if(T0(A)&&!j.match(A)&&(P[x]={type:so.pattern,message:V,ref:o,...T(so.pattern,V)},!s))return C(V),P}if(p){if(Qi(p)){const A=await p(j,n),V=ED(A,N);if(V&&(P[x]={...V,...T(so.validate,V.message)},!s))return C(V.message),P}else if(sn(p)){let A={};for(const V in p){if(!ls(A)&&!s)break;const D=ED(await p[V](j,n),N,V);D&&(A={...D,...T(V,D.message)},C(D.message),s&&(P[x]=A))}if(!ls(A)&&(P[x]={ref:N,...A},!s))return P}}return C(!0),P};const yfe={mode:Xi.onSubmit,reValidateMode:Xi.onChange,shouldFocusError:!0};function jfe(e={}){let t={...yfe,...e},n={submitCount:0,isDirty:!1,isLoading:Qi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const s={};let i=sn(t.defaultValues)||sn(t.values)?Ln(t.values||t.defaultValues)||{}:{},a=t.shouldUnregister?{}:Ln(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...h};const f={array:wD(),state:wD()},v=CD(t.mode),p=CD(t.reValidateMode),x=t.criteriaMode===Xi.all,y=ie=>je=>{clearTimeout(d),d=setTimeout(ie,je)},w=async ie=>{if(!t.disabled&&(h.isValid||m.isValid||ie)){const je=t.resolver?ls((await M()).errors):await I(s,!0);je!==n.isValid&&f.state.next({isValid:je})}},j=(ie,je)=>{!t.disabled&&(h.isValidating||h.validatingFields||m.isValidating||m.validatingFields)&&((ie||Array.from(l.mount)).forEach(Ce=>{Ce&&(je?ir(n.validatingFields,Ce,je):yn(n.validatingFields,Ce))}),f.state.next({validatingFields:n.validatingFields,isValidating:!ls(n.validatingFields)}))},N=(ie,je=[],Ce,Y,ye=!0,Te=!0)=>{if(Y&&Ce&&!t.disabled){if(o.action=!0,Te&&Array.isArray(Ge(s,ie))){const Ke=Ce(Ge(s,ie),Y.argA,Y.argB);ye&&ir(s,ie,Ke)}if(Te&&Array.isArray(Ge(n.errors,ie))){const Ke=Ce(Ge(n.errors,ie),Y.argA,Y.argB);ye&&ir(n.errors,ie,Ke),gfe(n.errors,ie)}if((h.touchedFields||m.touchedFields)&&Te&&Array.isArray(Ge(n.touchedFields,ie))){const Ke=Ce(Ge(n.touchedFields,ie),Y.argA,Y.argB);ye&&ir(n.touchedFields,ie,Ke)}(h.dirtyFields||m.dirtyFields)&&(n.dirtyFields=Pf(i,a)),f.state.next({name:ie,isDirty:V(ie,je),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ir(a,ie,je)},C=(ie,je)=>{ir(n.errors,ie,je),f.state.next({errors:n.errors})},P=ie=>{n.errors=ie,f.state.next({errors:n.errors,isValid:!1})},k=(ie,je,Ce,Y)=>{const ye=Ge(s,ie);if(ye){const Te=Ge(a,ie,rn(Ce)?Ge(i,ie):Ce);rn(Te)||Y&&Y.defaultChecked||je?ir(a,ie,je?Te:PD(ye._f)):U(ie,Te),o.mount&&w()}},_=(ie,je,Ce,Y,ye)=>{let Te=!1,Ke=!1;const Pt={name:ie};if(!t.disabled){if(!Ce||Y){(h.isDirty||m.isDirty)&&(Ke=n.isDirty,n.isDirty=Pt.isDirty=V(),Te=Ke!==Pt.isDirty);const fr=jl(Ge(i,ie),je);Ke=!!Ge(n.dirtyFields,ie),fr?yn(n.dirtyFields,ie):ir(n.dirtyFields,ie,!0),Pt.dirtyFields=n.dirtyFields,Te=Te||(h.dirtyFields||m.dirtyFields)&&Ke!==!fr}if(Ce){const fr=Ge(n.touchedFields,ie);fr||(ir(n.touchedFields,ie,Ce),Pt.touchedFields=n.touchedFields,Te=Te||(h.touchedFields||m.touchedFields)&&fr!==Ce)}Te&&ye&&f.state.next(Pt)}return Te?Pt:{}},O=(ie,je,Ce,Y)=>{const ye=Ge(n.errors,ie),Te=(h.isValid||m.isValid)&&Vs(je)&&n.isValid!==je;if(t.delayError&&Ce?(c=y(()=>C(ie,Ce)),c(t.delayError)):(clearTimeout(d),c=null,Ce?ir(n.errors,ie,Ce):yn(n.errors,ie)),(Ce?!jl(ye,Ce):ye)||!ls(Y)||Te){const Ke={...Y,...Te&&Vs(je)?{isValid:je}:{},errors:n.errors,name:ie};n={...n,...Ke},f.state.next(Ke)}},M=async ie=>{j(ie,!0);const je=await t.resolver(a,t.context,ufe(ie||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return j(ie),je},T=async ie=>{const{errors:je}=await M(ie);if(ie)for(const Ce of ie){const Y=Ge(je,Ce);Y?ir(n.errors,Ce,Y):yn(n.errors,Ce)}else n.errors=je;return je},I=async(ie,je,Ce={valid:!0})=>{for(const Y in ie){const ye=ie[Y];if(ye){const{_f:Te,...Ke}=ye;if(Te){const Pt=l.array.has(Te.name),fr=ye._f&&hfe(ye._f);fr&&h.validatingFields&&j([Y],!0);const gn=await OD(ye,l.disabled,a,x,t.shouldUseNativeValidation&&!je,Pt);if(fr&&h.validatingFields&&j([Y]),gn[Te.name]&&(Ce.valid=!1,je))break;!je&&(Ge(gn,Te.name)?Pt?vfe(n.errors,gn,Te.name):ir(n.errors,Te.name,gn[Te.name]):yn(n.errors,Te.name))}!ls(Ke)&&await I(Ke,je,Ce)}}return Ce.valid},A=()=>{for(const ie of l.unMount){const je=Ge(s,ie);je&&(je._f.refs?je._f.refs.every(Ce=>!k1(Ce)):!k1(je._f.ref))&&Pe(ie)}l.unMount=new Set},V=(ie,je)=>!t.disabled&&(ie&&je&&ir(a,ie,je),!jl(X(),i)),D=(ie,je,Ce)=>f9(ie,l,{...o.mount?a:rn(je)?i:ka(ie)?{[ie]:je}:je},Ce,je),W=ie=>Bb(Ge(o.mount?a:i,ie,t.shouldUnregister?Ge(i,ie,[]):[])),U=(ie,je,Ce={})=>{const Y=Ge(s,ie);let ye=je;if(Y){const Te=Y._f;Te&&(!Te.disabled&&ir(a,ie,j9(je,Te)),ye=C0(Te.ref)&&ds(je)?"":je,x9(Te.ref)?[...Te.ref.options].forEach(Ke=>Ke.selected=ye.includes(Ke.value)):Te.refs?Sg(Te.ref)?Te.refs.length>1?Te.refs.forEach(Ke=>(!Ke.defaultChecked||!Ke.disabled)&&(Ke.checked=Array.isArray(ye)?!!ye.find(Pt=>Pt===Ke.value):ye===Ke.value)):Te.refs[0]&&(Te.refs[0].checked=!!ye):Te.refs.forEach(Ke=>Ke.checked=Ke.value===ye):AT(Te.ref)?Te.ref.value="":(Te.ref.value=ye,Te.ref.type||f.state.next({name:ie,values:Ln(a)})))}(Ce.shouldDirty||Ce.shouldTouch)&&_(ie,ye,Ce.shouldTouch,Ce.shouldDirty,!0),Ce.shouldValidate&&H(ie)},Q=(ie,je,Ce)=>{for(const Y in je){const ye=je[Y],Te=`${ie}.${Y}`,Ke=Ge(s,Te);(l.array.has(ie)||sn(ye)||Ke&&!Ke._f)&&!ed(ye)?Q(Te,ye,Ce):U(Te,ye,Ce)}},q=(ie,je,Ce={})=>{const Y=Ge(s,ie),ye=l.array.has(ie),Te=Ln(je);ir(a,ie,Te),ye?(f.array.next({name:ie,values:Ln(a)}),(h.isDirty||h.dirtyFields||m.isDirty||m.dirtyFields)&&Ce.shouldDirty&&f.state.next({name:ie,dirtyFields:Pf(i,a),isDirty:V(ie,Te)})):Y&&!Y._f&&!ds(Te)?Q(ie,Te,Ce):U(ie,Te,Ce),TD(ie,l)&&f.state.next({...n}),f.state.next({name:o.mount?ie:void 0,values:Ln(a)})},B=async ie=>{o.mount=!0;const je=ie.target;let Ce=je.name,Y=!0;const ye=Ge(s,Ce),Te=Ke=>{Y=Number.isNaN(Ke)||ed(Ke)&&isNaN(Ke.getTime())||jl(Ke,Ge(a,Ce,Ke))};if(ye){let Ke,Pt;const fr=je.type?PD(ye._f):c9(ie),gn=ie.type===P0.BLUR||ie.type===P0.FOCUS_OUT,Uw=!mfe(ye._f)&&!t.resolver&&!Ge(n.errors,Ce)&&!ye._f.deps||xfe(gn,Ge(n.touchedFields,Ce),n.isSubmitted,p,v),lu=TD(Ce,l,gn);ir(a,Ce,fr),gn?(ye._f.onBlur&&ye._f.onBlur(ie),c&&c(0)):ye._f.onChange&&ye._f.onChange(ie);const Ec=_(Ce,fr,gn),zg=!ls(Ec)||lu;if(!gn&&f.state.next({name:Ce,type:ie.type,values:Ln(a)}),Uw)return(h.isValid||m.isValid)&&(t.mode==="onBlur"?gn&&w():gn||w()),zg&&f.state.next({name:Ce,...lu?{}:Ec});if(!gn&&lu&&f.state.next({...n}),t.resolver){const{errors:Bg}=await M([Ce]);if(Te(fr),Y){const Oc=AD(n.errors,s,Ce),Vg=AD(Bg,s,Oc.name||Ce);Ke=Vg.error,Ce=Vg.name,Pt=ls(Bg)}}else j([Ce],!0),Ke=(await OD(ye,l.disabled,a,x,t.shouldUseNativeValidation))[Ce],j([Ce]),Te(fr),Y&&(Ke?Pt=!1:(h.isValid||m.isValid)&&(Pt=await I(s,!0)));Y&&(ye._f.deps&&H(ye._f.deps),O(Ce,Pt,Ke,Ec))}},z=(ie,je)=>{if(Ge(n.errors,je)&&ie.focus)return ie.focus(),1},H=async(ie,je={})=>{let Ce,Y;const ye=up(ie);if(t.resolver){const Te=await T(rn(ie)?ie:ye);Ce=ls(Te),Y=ie?!ye.some(Ke=>Ge(Te,Ke)):Ce}else ie?(Y=(await Promise.all(ye.map(async Te=>{const Ke=Ge(s,Te);return await I(Ke&&Ke._f?{[Te]:Ke}:Ke)}))).every(Boolean),!(!Y&&!n.isValid)&&w()):Y=Ce=await I(s);return f.state.next({...!ka(ie)||(h.isValid||m.isValid)&&Ce!==n.isValid?{}:{name:ie},...t.resolver||!ie?{isValid:Ce}:{},errors:n.errors}),je.shouldFocus&&!Y&&hp(s,z,ie?ye:l.mount),Y},X=ie=>{const je={...o.mount?a:i};return rn(ie)?je:ka(ie)?Ge(je,ie):ie.map(Ce=>Ge(je,Ce))},ge=(ie,je)=>({invalid:!!Ge((je||n).errors,ie),isDirty:!!Ge((je||n).dirtyFields,ie),error:Ge((je||n).errors,ie),isValidating:!!Ge(n.validatingFields,ie),isTouched:!!Ge((je||n).touchedFields,ie)}),Se=ie=>{ie&&up(ie).forEach(je=>yn(n.errors,je)),f.state.next({errors:ie?n.errors:{}})},F=(ie,je,Ce)=>{const Y=(Ge(s,ie,{_f:{}})._f||{}).ref,ye=Ge(n.errors,ie)||{},{ref:Te,message:Ke,type:Pt,...fr}=ye;ir(n.errors,ie,{...fr,...je,ref:Y}),f.state.next({name:ie,errors:n.errors,isValid:!1}),Ce&&Ce.shouldFocus&&Y&&Y.focus&&Y.focus()},pe=(ie,je)=>Qi(ie)?f.state.subscribe({next:Ce=>ie(D(void 0,je),Ce)}):D(ie,je,!0),we=ie=>f.state.subscribe({next:je=>{pfe(ie.name,je.name,ie.exact)&&ffe(je,ie.formState||h,Wt,ie.reRenderRoot)&&ie.callback({values:{...a},...n,...je})}}).unsubscribe,Be=ie=>(o.mount=!0,m={...m,...ie.formState},we({...ie,formState:m})),Pe=(ie,je={})=>{for(const Ce of ie?up(ie):l.mount)l.mount.delete(Ce),l.array.delete(Ce),je.keepValue||(yn(s,Ce),yn(a,Ce)),!je.keepError&&yn(n.errors,Ce),!je.keepDirty&&yn(n.dirtyFields,Ce),!je.keepTouched&&yn(n.touchedFields,Ce),!je.keepIsValidating&&yn(n.validatingFields,Ce),!t.shouldUnregister&&!je.keepDefaultValue&&yn(i,Ce);f.state.next({values:Ln(a)}),f.state.next({...n,...je.keepDirty?{isDirty:V()}:{}}),!je.keepIsValid&&w()},Ee=({disabled:ie,name:je})=>{(Vs(ie)&&o.mount||ie||l.disabled.has(je))&&(ie?l.disabled.add(je):l.disabled.delete(je))},Ie=(ie,je={})=>{let Ce=Ge(s,ie);const Y=Vs(je.disabled)||Vs(t.disabled);return ir(s,ie,{...Ce||{},_f:{...Ce&&Ce._f?Ce._f:{ref:{name:ie}},name:ie,mount:!0,...je}}),l.mount.add(ie),Ce?Ee({disabled:Vs(je.disabled)?je.disabled:t.disabled,name:ie}):k(ie,!0,je.value),{...Y?{disabled:je.disabled||t.disabled}:{},...t.progressive?{required:!!je.required,min:Cf(je.min),max:Cf(je.max),minLength:Cf(je.minLength),maxLength:Cf(je.maxLength),pattern:Cf(je.pattern)}:{},name:ie,onChange:B,onBlur:B,ref:ye=>{if(ye){Ie(ie,je),Ce=Ge(s,ie);const Te=rn(ye.value)&&ye.querySelectorAll&&ye.querySelectorAll("input,select,textarea")[0]||ye,Ke=lfe(Te),Pt=Ce._f.refs||[];if(Ke?Pt.find(fr=>fr===Te):Te===Ce._f.ref)return;ir(s,ie,{_f:{...Ce._f,...Ke?{refs:[...Pt.filter(k1),Te,...Array.isArray(Ge(i,ie))?[{}]:[]],ref:{type:Te.type,name:ie}}:{ref:Te}}}),k(ie,!1,void 0,Te)}else Ce=Ge(s,ie,{}),Ce._f&&(Ce._f.mount=!1),(t.shouldUnregister||je.shouldUnregister)&&!(d9(l.array,ie)&&o.action)&&l.unMount.add(ie)}}},Ne=()=>t.shouldFocusError&&hp(s,z,l.mount),xe=ie=>{Vs(ie)&&(f.state.next({disabled:ie}),hp(s,(je,Ce)=>{const Y=Ge(s,Ce);Y&&(je.disabled=Y._f.disabled||ie,Array.isArray(Y._f.refs)&&Y._f.refs.forEach(ye=>{ye.disabled=Y._f.disabled||ie}))},0,!1))},J=(ie,je)=>async Ce=>{let Y;Ce&&(Ce.preventDefault&&Ce.preventDefault(),Ce.persist&&Ce.persist());let ye=Ln(a);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:Te,values:Ke}=await M();n.errors=Te,ye=Ke}else await I(s);if(l.disabled.size)for(const Te of l.disabled)ir(ye,Te,void 0);if(yn(n.errors,"root"),ls(n.errors)){f.state.next({errors:{}});try{await ie(ye,Ce)}catch(Te){Y=Te}}else je&&await je({...n.errors},Ce),Ne(),setTimeout(Ne);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ls(n.errors)&&!Y,submitCount:n.submitCount+1,errors:n.errors}),Y)throw Y},De=(ie,je={})=>{Ge(s,ie)&&(rn(je.defaultValue)?q(ie,Ln(Ge(i,ie))):(q(ie,je.defaultValue),ir(i,ie,Ln(je.defaultValue))),je.keepTouched||yn(n.touchedFields,ie),je.keepDirty||(yn(n.dirtyFields,ie),n.isDirty=je.defaultValue?V(ie,Ln(Ge(i,ie))):V()),je.keepError||(yn(n.errors,ie),h.isValid&&w()),f.state.next({...n}))},Ue=(ie,je={})=>{const Ce=ie?Ln(ie):i,Y=Ln(Ce),ye=ls(ie),Te=ye?i:Y;if(je.keepDefaultValues||(i=Ce),!je.keepValues){if(je.keepDirtyValues){const Ke=new Set([...l.mount,...Object.keys(Pf(i,a))]);for(const Pt of Array.from(Ke))Ge(n.dirtyFields,Pt)?ir(Te,Pt,Ge(a,Pt)):q(Pt,Ge(Te,Pt))}else{if(kT&&rn(ie))for(const Ke of l.mount){const Pt=Ge(s,Ke);if(Pt&&Pt._f){const fr=Array.isArray(Pt._f.refs)?Pt._f.refs[0]:Pt._f.ref;if(C0(fr)){const gn=fr.closest("form");if(gn){gn.reset();break}}}}for(const Ke of l.mount)q(Ke,Ge(Te,Ke))}a=Ln(Te),f.array.next({values:{...Te}}),f.state.next({values:{...Te}})}l={mount:je.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!je.keepIsValid||!!je.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:je.keepSubmitCount?n.submitCount:0,isDirty:ye?!1:je.keepDirty?n.isDirty:!!(je.keepDefaultValues&&!jl(ie,i)),isSubmitted:je.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ye?{}:je.keepDirtyValues?je.keepDefaultValues&&a?Pf(i,a):n.dirtyFields:je.keepDefaultValues&&ie?Pf(i,ie):je.keepDirty?n.dirtyFields:{},touchedFields:je.keepTouched?n.touchedFields:{},errors:je.keepErrors?n.errors:{},isSubmitSuccessful:je.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},st=(ie,je)=>Ue(Qi(ie)?ie(a):ie,je),ht=(ie,je={})=>{const Ce=Ge(s,ie),Y=Ce&&Ce._f;if(Y){const ye=Y.refs?Y.refs[0]:Y.ref;ye.focus&&(ye.focus(),je.shouldSelect&&Qi(ye.select)&&ye.select())}},Wt=ie=>{n={...n,...ie}},Ft={control:{register:Ie,unregister:Pe,getFieldState:ge,handleSubmit:J,setError:F,_subscribe:we,_runSchema:M,_getWatch:D,_getDirty:V,_setValid:w,_setFieldArray:N,_setDisabledField:Ee,_setErrors:P,_getFieldArray:W,_reset:Ue,_resetDefaultValues:()=>Qi(t.defaultValues)&&t.defaultValues().then(ie=>{st(ie,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:A,_disableForm:xe,_subjects:f,_proxyFormState:h,get _fields(){return s},get _formValues(){return a},get _state(){return o},set _state(ie){o=ie},get _defaultValues(){return i},get _names(){return l},set _names(ie){l=ie},get _formState(){return n},get _options(){return t},set _options(ie){t={...t,...ie}}},subscribe:Be,trigger:H,register:Ie,handleSubmit:J,watch:pe,setValue:q,getValues:X,reset:st,resetField:De,clearErrors:Se,unregister:Pe,setError:F,setFocus:ht,getFieldState:ge};return{...Ft,formControl:Ft}}function fn(e={}){const t=te.useRef(void 0),n=te.useRef(void 0),[s,i]=te.useState({isDirty:!1,isValidating:!1,isLoading:Qi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Qi(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:jfe(e),formState:s},e.formControl&&e.defaultValues&&!Qi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const a=t.current.control;return a._options=e,te.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0}),[a]),te.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),te.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==s.isDirty&&a._subjects.state.next({isDirty:o})}},[a,s.isDirty]),te.useEffect(()=>{e.values&&!jl(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[e.values,a]),te.useEffect(()=>{e.errors&&!ls(e.errors)&&a._setErrors(e.errors)},[e.errors,a]),te.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),te.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[e.shouldUnregister,a]),t.current.formState=m9(s,a),t.current}const Rr=nfe,w9=b.createContext({}),ae=({...e})=>r.jsx(w9.Provider,{value:{name:e.name},children:r.jsx(ofe,{...e})}),Ub=()=>{const e=b.useContext(w9),t=b.useContext(N9),{getFieldState:n,formState:s}=Vb(),i=n(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},N9=b.createContext({}),se=b.forwardRef(({className:e,...t},n)=>{const s=b.useId();return r.jsx(N9.Provider,{value:{id:s},children:r.jsx("div",{ref:n,className:Ve("space-y-2",e),...t})})});se.displayName="FormItem";const ce=b.forwardRef(({className:e,...t},n)=>{const{error:s,formItemId:i}=Ub();return r.jsx(be,{ref:n,className:Ve(s&&"text-destructive",e),htmlFor:i,...t})});ce.displayName="FormLabel";const he=b.forwardRef(({...e},t)=>{const{error:n,formItemId:s,formDescriptionId:i,formMessageId:a}=Ub();return r.jsx(QF,{ref:t,id:s,"aria-describedby":n?`${i} ${a}`:`${i}`,"aria-invalid":!!n,...e})});he.displayName="FormControl";const bfe=b.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:s}=Ub();return r.jsx("p",{ref:n,id:s,className:Ve("text-sm text-muted-foreground",e),...t})});bfe.displayName="FormDescription";const me=b.forwardRef(({className:e,children:t,...n},s)=>{const{error:i,formMessageId:a}=Ub(),o=i?String((i==null?void 0:i.message)??""):t;return o?r.jsx("p",{ref:s,id:a,className:Ve("text-sm font-medium text-destructive",e),...n,children:o}):null});me.displayName="FormMessage";const Dr=ST,Ps=_T,wfe=PT,S9=b.forwardRef(({className:e,...t},n)=>r.jsx(vg,{ref:n,className:Ve("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));S9.displayName=vg.displayName;const Ar=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(wfe,{children:[r.jsx(S9,{}),r.jsxs(yg,{ref:s,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(Rb,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Fr,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ar.displayName=yg.displayName;const Er=({className:e,...t})=>r.jsx("div",{className:Ve("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Er.displayName="DialogHeader";const mo=({className:e,...t})=>r.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});mo.displayName="DialogFooter";const Or=b.forwardRef(({className:e,...t},n)=>r.jsx(jg,{ref:n,className:Ve("text-lg font-semibold leading-none tracking-tight",e),...t}));Or.displayName=jg.displayName;const Us=b.forwardRef(({className:e,...t},n)=>r.jsx(bg,{ref:n,className:Ve("text-sm text-muted-foreground",e),...t}));Us.displayName=bg.displayName;var OT="Avatar",[Nfe,NUe]=xn(OT),[Sfe,_9]=Nfe(OT),P9=b.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[i,a]=b.useState("idle");return r.jsx(Sfe,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:r.jsx(Je.span,{...s,ref:t})})});P9.displayName=OT;var C9="AvatarImage",k9=b.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:i=()=>{},...a}=e,o=_9(C9,n),l=_fe(s,a),c=Lr(d=>{i(d),o.onImageLoadingStatusChange(d)});return an(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?r.jsx(Je.img,{...a,ref:t,src:s}):null});k9.displayName=C9;var T9="AvatarFallback",A9=b.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...i}=e,a=_9(T9,n),[o,l]=b.useState(s===void 0);return b.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),o&&a.imageLoadingStatus!=="loaded"?r.jsx(Je.span,{...i,ref:t}):null});A9.displayName=T9;function MD(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function _fe(e,{referrerPolicy:t,crossOrigin:n}){const s=Cfe(),i=b.useRef(null),a=s?(i.current||(i.current=new window.Image),i.current):null,[o,l]=b.useState(()=>MD(a,e));return an(()=>{l(MD(a,e))},[a,e]),an(()=>{const c=m=>()=>{l(m)};if(!a)return;const d=c("loaded"),h=c("error");return a.addEventListener("load",d),a.addEventListener("error",h),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",h)}},[a,n,t]),o}function Pfe(){return()=>{}}function Cfe(){return b.useSyncExternalStore(Pfe,()=>!0,()=>!1)}var E9=P9,O9=k9,M9=A9;const xo=b.forwardRef(({className:e,...t},n)=>r.jsx(E9,{ref:n,className:Ve("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));xo.displayName=E9.displayName;const kfe=b.forwardRef(({className:e,...t},n)=>r.jsx(O9,{ref:n,className:Ve("aspect-square h-full w-full",e),...t}));kfe.displayName=O9.displayName;const go=b.forwardRef(({className:e,...t},n)=>r.jsx(M9,{ref:n,className:Ve("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));go.displayName=M9.displayName;const DD=(e,t,n)=>{if(e&&"reportValidity"in e){const s=Ge(n,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},D9=(e,t)=>{for(const n in t.fields){const s=t.fields[n];s&&s.ref&&"reportValidity"in s.ref?DD(s.ref,n,e):s.refs&&s.refs.forEach(i=>DD(i,n,e))}},Tfe=(e,t)=>{t.shouldUseNativeValidation&&D9(e,t);const n={};for(const s in e){const i=Ge(t.fields,s),a=Object.assign(e[s]||{},{ref:i&&i.ref});if(Afe(t.names||Object.keys(e),s)){const o=Object.assign({},Ge(n,s));ir(o,"root",a),ir(n,s,o)}else ir(n,s,a)}return n},Afe=(e,t)=>e.some(n=>n.startsWith(t+"."));var Efe=function(e,t){for(var n={};e.length;){var s=e[0],i=s.code,a=s.message,o=s.path.join(".");if(!n[o])if("unionErrors"in s){var l=s.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:i};if("unionErrors"in s&&s.unionErrors.forEach(function(h){return h.errors.forEach(function(m){return e.push(m)})}),t){var c=n[o].types,d=c&&c[s.code];n[o]=p9(o,t,n,i,d?[].concat(d,s.message):s.message)}e.shift()}return n},pn=function(e,t,n){return n===void 0&&(n={}),function(s,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(d){return a.shouldUseNativeValidation&&D9({},a),{errors:{},values:n.raw?s:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Tfe(Efe(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Xt;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function s(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=s,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Xt||(Xt={}));var a2;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(a2||(a2={}));const tt=Xt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),vo=e=>{switch(typeof e){case"undefined":return tt.undefined;case"string":return tt.string;case"number":return isNaN(e)?tt.nan:tt.number;case"boolean":return tt.boolean;case"function":return tt.function;case"bigint":return tt.bigint;case"symbol":return tt.symbol;case"object":return Array.isArray(e)?tt.array:e===null?tt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?tt.promise:typeof Map<"u"&&e instanceof Map?tt.map:typeof Set<"u"&&e instanceof Set?tt.set:typeof Date<"u"&&e instanceof Date?tt.date:tt.object;default:return tt.unknown}},Fe=Xt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ofe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ri extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},s={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)s._errors.push(n(o));else{let l=s,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(this),s}static assert(t){if(!(t instanceof ri))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},s=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):s.push(t(i));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}ri.create=e=>new ri(e);const Hh=(e,t)=>{let n;switch(e.code){case Fe.invalid_type:e.received===tt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Fe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Xt.jsonStringifyReplacer)}`;break;case Fe.unrecognized_keys:n=`Unrecognized key(s) in object: ${Xt.joinValues(e.keys,", ")}`;break;case Fe.invalid_union:n="Invalid input";break;case Fe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Xt.joinValues(e.options)}`;break;case Fe.invalid_enum_value:n=`Invalid enum value. Expected ${Xt.joinValues(e.options)}, received '${e.received}'`;break;case Fe.invalid_arguments:n="Invalid function arguments";break;case Fe.invalid_return_type:n="Invalid function return type";break;case Fe.invalid_date:n="Invalid date";break;case Fe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Xt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Fe.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Fe.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Fe.custom:n="Invalid input";break;case Fe.invalid_intersection_types:n="Intersection results could not be merged";break;case Fe.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Fe.not_finite:n="Number must be finite";break;default:n=t.defaultError,Xt.assertNever(e)}return{message:n}};let I9=Hh;function Mfe(e){I9=e}function A0(){return I9}const E0=e=>{const{data:t,path:n,errorMaps:s,issueData:i}=e,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...i,path:a,message:l}},Dfe=[];function Ze(e,t){const n=A0(),s=E0({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Hh?void 0:Hh].filter(i=>!!i)});e.common.issues.push(s)}class ns{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const s=[];for(const i of n){if(i.status==="aborted")return St;i.status==="dirty"&&t.dirty(),s.push(i.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,n){const s=[];for(const i of n){const a=await i.key,o=await i.value;s.push({key:a,value:o})}return ns.mergeObjectSync(t,s)}static mergeObjectSync(t,n){const s={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return St;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(s[a.value]=o.value)}return{status:t.value,value:s}}}const St=Object.freeze({status:"aborted"}),Vu=e=>({status:"dirty",value:e}),xs=e=>({status:"valid",value:e}),o2=e=>e.status==="aborted",l2=e=>e.status==="dirty",Ud=e=>e.status==="valid",tx=e=>typeof Promise<"u"&&e instanceof Promise;function O0(e,t,n,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function L9(e,t,n,s,i){if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var ct;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(ct||(ct={}));var Zf,Yf;class Ha{constructor(t,n,s,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=s,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ID=(e,t)=>{if(Ud(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ri(e.common.issues);return this._error=n,this._error}}};function Et(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:i}=e;if(t&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,l)=>{var c,d;const{message:h}=e;return o.code==="invalid_enum_value"?{message:h??l.defaultError}:typeof l.data>"u"?{message:(c=h??s)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(d=h??n)!==null&&d!==void 0?d:l.defaultError}},description:i}}class Lt{get description(){return this._def.description}_getType(t){return vo(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:vo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ns,ctx:{common:t.parent.common,data:t.data,parsedType:vo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(tx(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const s=this.safeParse(t,n);if(s.success)return s.data;throw s.error}safeParse(t,n){var s;const i={common:{issues:[],async:(s=n==null?void 0:n.async)!==null&&s!==void 0?s:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:vo(t)},a=this._parseSync({data:t,path:i.path,parent:i});return ID(i,a)}"~validate"(t){var n,s;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:vo(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:i});return Ud(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((s=(n=a==null?void 0:a.message)===null||n===void 0?void 0:n.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(a=>Ud(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(t,n){const s=await this.safeParseAsync(t,n);if(s.success)return s.data;throw s.error}async safeParseAsync(t,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:vo(t)},i=this._parse({data:t,path:s.path,parent:s}),a=await(tx(i)?i:Promise.resolve(i));return ID(s,a)}refine(t,n){const s=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=t(i),l=()=>a.addIssue({code:Fe.custom,...s(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,n){return this._refinement((s,i)=>t(s)?!0:(i.addIssue(typeof n=="function"?n(s,i):n),!1))}_refinement(t){return new da({schema:this,typeName:wt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ra.create(this,this._def)}nullable(){return mc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return aa.create(this)}promise(){return Kh.create(this,this._def)}or(t){return ix.create([this,t],this._def)}and(t){return ax.create(this,t,this._def)}transform(t){return new da({...Et(this._def),schema:this,typeName:wt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new ux({...Et(this._def),innerType:this,defaultValue:n,typeName:wt.ZodDefault})}brand(){return new MT({typeName:wt.ZodBranded,type:this,...Et(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new hx({...Et(this._def),innerType:this,catchValue:n,typeName:wt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return _g.create(this,t)}readonly(){return mx.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ife=/^c[^\s-]{8,}$/i,Lfe=/^[0-9a-z]+$/,Rfe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,$fe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ffe=/^[a-z0-9_-]{21}$/i,zfe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Bfe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Vfe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ufe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let T1;const Wfe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Hfe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,qfe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Kfe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Gfe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Zfe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,R9="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Yfe=new RegExp(`^${R9}$`);function $9(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function Xfe(e){return new RegExp(`^${$9(e)}$`)}function F9(e){let t=`${R9}T${$9(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Qfe(e,t){return!!((t==="v4"||!t)&&Wfe.test(e)||(t==="v6"||!t)&&qfe.test(e))}function Jfe(e,t){if(!zfe.test(e))return!1;try{const[n]=e.split("."),s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(s));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function epe(e,t){return!!((t==="v4"||!t)&&Hfe.test(e)||(t==="v6"||!t)&&Kfe.test(e))}class ta extends Lt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==tt.string){const a=this._getOrReturnCtx(t);return Ze(a,{code:Fe.invalid_type,expected:tt.string,received:a.parsedType}),St}const s=new ns;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Ze(i,{code:Fe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Ze(i,{code:Fe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,l=t.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?Ze(i,{code:Fe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ze(i,{code:Fe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")Vfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"email",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")T1||(T1=new RegExp(Ufe,"u")),T1.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"emoji",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")$fe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"uuid",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")Ffe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"nanoid",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")Ife.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"cuid",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")Lfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"cuid2",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")Rfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"ulid",code:Fe.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ze(i,{validation:"url",code:Fe.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"regex",code:Fe.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:Fe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:Fe.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:Fe.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?F9(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:Fe.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?Yfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:Fe.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?Xfe(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{code:Fe.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?Bfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"duration",code:Fe.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?Qfe(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"ip",code:Fe.invalid_string,message:a.message}),s.dirty()):a.kind==="jwt"?Jfe(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"jwt",code:Fe.invalid_string,message:a.message}),s.dirty()):a.kind==="cidr"?epe(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"cidr",code:Fe.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?Gfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"base64",code:Fe.invalid_string,message:a.message}),s.dirty()):a.kind==="base64url"?Zfe.test(t.data)||(i=this._getOrReturnCtx(t,i),Ze(i,{validation:"base64url",code:Fe.invalid_string,message:a.message}),s.dirty()):Xt.assertNever(a);return{status:s.value,value:t.data}}_regex(t,n,s){return this.refinement(i=>t.test(i),{validation:n,code:Fe.invalid_string,...ct.errToObj(s)})}_addCheck(t){return new ta({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...ct.errToObj(t)})}url(t){return this._addCheck({kind:"url",...ct.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...ct.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...ct.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...ct.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...ct.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...ct.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...ct.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...ct.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...ct.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...ct.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...ct.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...ct.errToObj(t)})}datetime(t){var n,s;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(s=t==null?void 0:t.local)!==null&&s!==void 0?s:!1,...ct.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...ct.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...ct.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...ct.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...ct.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...ct.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...ct.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...ct.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...ct.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...ct.errToObj(n)})}nonempty(t){return this.min(1,ct.errToObj(t))}trim(){return new ta({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ta({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ta({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ta.create=e=>{var t;return new ta({checks:[],typeName:wt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Et(e)})};function tpe(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,i=n>s?n:s,a=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return a%o/Math.pow(10,i)}class dc extends Lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==tt.number){const a=this._getOrReturnCtx(t);return Ze(a,{code:Fe.invalid_type,expected:tt.number,received:a.parsedType}),St}let s;const i=new ns;for(const a of this._def.checks)a.kind==="int"?Xt.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),Ze(s,{code:Fe.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(s=this._getOrReturnCtx(t,s),Ze(s,{code:Fe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(s=this._getOrReturnCtx(t,s),Ze(s,{code:Fe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?tpe(t.data,a.value)!==0&&(s=this._getOrReturnCtx(t,s),Ze(s,{code:Fe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),Ze(s,{code:Fe.not_finite,message:a.message}),i.dirty()):Xt.assertNever(a);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,ct.toString(n))}gt(t,n){return this.setLimit("min",t,!1,ct.toString(n))}lte(t,n){return this.setLimit("max",t,!0,ct.toString(n))}lt(t,n){return this.setLimit("max",t,!1,ct.toString(n))}setLimit(t,n,s,i){return new dc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:ct.toString(i)}]})}_addCheck(t){return new dc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:ct.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ct.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ct.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ct.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ct.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:ct.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:ct.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ct.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ct.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Xt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(n)&&Number.isFinite(t)}}dc.create=e=>new dc({checks:[],typeName:wt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Et(e)});class uc extends Lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==tt.bigint)return this._getInvalidInput(t);let s;const i=new ns;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(s=this._getOrReturnCtx(t,s),Ze(s,{code:Fe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(s=this._getOrReturnCtx(t,s),Ze(s,{code:Fe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),Ze(s,{code:Fe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Xt.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Ze(n,{code:Fe.invalid_type,expected:tt.bigint,received:n.parsedType}),St}gte(t,n){return this.setLimit("min",t,!0,ct.toString(n))}gt(t,n){return this.setLimit("min",t,!1,ct.toString(n))}lte(t,n){return this.setLimit("max",t,!0,ct.toString(n))}lt(t,n){return this.setLimit("max",t,!1,ct.toString(n))}setLimit(t,n,s,i){return new uc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:ct.toString(i)}]})}_addCheck(t){return new uc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ct.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ct.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ct.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ct.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:ct.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}uc.create=e=>{var t;return new uc({checks:[],typeName:wt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Et(e)})};class rx extends Lt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==tt.boolean){const s=this._getOrReturnCtx(t);return Ze(s,{code:Fe.invalid_type,expected:tt.boolean,received:s.parsedType}),St}return xs(t.data)}}rx.create=e=>new rx({typeName:wt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Et(e)});class Wd extends Lt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==tt.date){const a=this._getOrReturnCtx(t);return Ze(a,{code:Fe.invalid_type,expected:tt.date,received:a.parsedType}),St}if(isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Ze(a,{code:Fe.invalid_date}),St}const s=new ns;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Ze(i,{code:Fe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Ze(i,{code:Fe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):Xt.assertNever(a);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Wd({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:ct.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:ct.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Wd.create=e=>new Wd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:wt.ZodDate,...Et(e)});class M0 extends Lt{_parse(t){if(this._getType(t)!==tt.symbol){const s=this._getOrReturnCtx(t);return Ze(s,{code:Fe.invalid_type,expected:tt.symbol,received:s.parsedType}),St}return xs(t.data)}}M0.create=e=>new M0({typeName:wt.ZodSymbol,...Et(e)});class nx extends Lt{_parse(t){if(this._getType(t)!==tt.undefined){const s=this._getOrReturnCtx(t);return Ze(s,{code:Fe.invalid_type,expected:tt.undefined,received:s.parsedType}),St}return xs(t.data)}}nx.create=e=>new nx({typeName:wt.ZodUndefined,...Et(e)});class sx extends Lt{_parse(t){if(this._getType(t)!==tt.null){const s=this._getOrReturnCtx(t);return Ze(s,{code:Fe.invalid_type,expected:tt.null,received:s.parsedType}),St}return xs(t.data)}}sx.create=e=>new sx({typeName:wt.ZodNull,...Et(e)});class qh extends Lt{constructor(){super(...arguments),this._any=!0}_parse(t){return xs(t.data)}}qh.create=e=>new qh({typeName:wt.ZodAny,...Et(e)});class vd extends Lt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return xs(t.data)}}vd.create=e=>new vd({typeName:wt.ZodUnknown,...Et(e)});class Ko extends Lt{_parse(t){const n=this._getOrReturnCtx(t);return Ze(n,{code:Fe.invalid_type,expected:tt.never,received:n.parsedType}),St}}Ko.create=e=>new Ko({typeName:wt.ZodNever,...Et(e)});class D0 extends Lt{_parse(t){if(this._getType(t)!==tt.undefined){const s=this._getOrReturnCtx(t);return Ze(s,{code:Fe.invalid_type,expected:tt.void,received:s.parsedType}),St}return xs(t.data)}}D0.create=e=>new D0({typeName:wt.ZodVoid,...Et(e)});class aa extends Lt{_parse(t){const{ctx:n,status:s}=this._processInputParams(t),i=this._def;if(n.parsedType!==tt.array)return Ze(n,{code:Fe.invalid_type,expected:tt.array,received:n.parsedType}),St;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(Ze(n,{code:o?Fe.too_big:Fe.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ze(n,{code:Fe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ze(n,{code:Fe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new Ha(n,o,n.path,l)))).then(o=>ns.mergeArray(s,o));const a=[...n.data].map((o,l)=>i.type._parseSync(new Ha(n,o,n.path,l)));return ns.mergeArray(s,a)}get element(){return this._def.type}min(t,n){return new aa({...this._def,minLength:{value:t,message:ct.toString(n)}})}max(t,n){return new aa({...this._def,maxLength:{value:t,message:ct.toString(n)}})}length(t,n){return new aa({...this._def,exactLength:{value:t,message:ct.toString(n)}})}nonempty(t){return this.min(1,t)}}aa.create=(e,t)=>new aa({type:e,minLength:null,maxLength:null,exactLength:null,typeName:wt.ZodArray,...Et(t)});function Tu(e){if(e instanceof Vr){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=Ra.create(Tu(s))}return new Vr({...e._def,shape:()=>t})}else return e instanceof aa?new aa({...e._def,type:Tu(e.element)}):e instanceof Ra?Ra.create(Tu(e.unwrap())):e instanceof mc?mc.create(Tu(e.unwrap())):e instanceof qa?qa.create(e.items.map(t=>Tu(t))):e}class Vr extends Lt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Xt.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==tt.object){const d=this._getOrReturnCtx(t);return Ze(d,{code:Fe.invalid_type,expected:tt.object,received:d.parsedType}),St}const{status:s,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ko&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const h=a[d],m=i.data[d];c.push({key:{status:"valid",value:d},value:h._parse(new Ha(i,m,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof Ko){const d=this._def.unknownKeys;if(d==="passthrough")for(const h of l)c.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(d==="strict")l.length>0&&(Ze(i,{code:Fe.unrecognized_keys,keys:l}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const h of l){const m=i.data[h];c.push({key:{status:"valid",value:h},value:d._parse(new Ha(i,m,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const h of c){const m=await h.key,f=await h.value;d.push({key:m,value:f,alwaysSet:h.alwaysSet})}return d}).then(d=>ns.mergeObjectSync(s,d)):ns.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return ct.errToObj,new Vr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,s)=>{var i,a,o,l;const c=(o=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,n,s).message)!==null&&o!==void 0?o:s.defaultError;return n.code==="unrecognized_keys"?{message:(l=ct.errToObj(t).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new Vr({...this._def,unknownKeys:"strip"})}passthrough(){return new Vr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Vr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Vr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:wt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Vr({...this._def,catchall:t})}pick(t){const n={};return Xt.objectKeys(t).forEach(s=>{t[s]&&this.shape[s]&&(n[s]=this.shape[s])}),new Vr({...this._def,shape:()=>n})}omit(t){const n={};return Xt.objectKeys(this.shape).forEach(s=>{t[s]||(n[s]=this.shape[s])}),new Vr({...this._def,shape:()=>n})}deepPartial(){return Tu(this)}partial(t){const n={};return Xt.objectKeys(this.shape).forEach(s=>{const i=this.shape[s];t&&!t[s]?n[s]=i:n[s]=i.optional()}),new Vr({...this._def,shape:()=>n})}required(t){const n={};return Xt.objectKeys(this.shape).forEach(s=>{if(t&&!t[s])n[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof Ra;)a=a._def.innerType;n[s]=a}}),new Vr({...this._def,shape:()=>n})}keyof(){return z9(Xt.objectKeys(this.shape))}}Vr.create=(e,t)=>new Vr({shape:()=>e,unknownKeys:"strip",catchall:Ko.create(),typeName:wt.ZodObject,...Et(t)});Vr.strictCreate=(e,t)=>new Vr({shape:()=>e,unknownKeys:"strict",catchall:Ko.create(),typeName:wt.ZodObject,...Et(t)});Vr.lazycreate=(e,t)=>new Vr({shape:e,unknownKeys:"strip",catchall:Ko.create(),typeName:wt.ZodObject,...Et(t)});class ix extends Lt{_parse(t){const{ctx:n}=this._processInputParams(t),s=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new ri(l.ctx.common.issues));return Ze(n,{code:Fe.invalid_union,unionErrors:o}),St}if(n.common.async)return Promise.all(s.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of s){const d={...n,common:{...n.common,issues:[]},parent:null},h=c._parseSync({data:n.data,path:n.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new ri(c));return Ze(n,{code:Fe.invalid_union,unionErrors:l}),St}}get options(){return this._def.options}}ix.create=(e,t)=>new ix({options:e,typeName:wt.ZodUnion,...Et(t)});const co=e=>e instanceof lx?co(e.schema):e instanceof da?co(e.innerType()):e instanceof cx?[e.value]:e instanceof hc?e.options:e instanceof dx?Xt.objectValues(e.enum):e instanceof ux?co(e._def.innerType):e instanceof nx?[void 0]:e instanceof sx?[null]:e instanceof Ra?[void 0,...co(e.unwrap())]:e instanceof mc?[null,...co(e.unwrap())]:e instanceof MT||e instanceof mx?co(e.unwrap()):e instanceof hx?co(e._def.innerType):[];class Wb extends Lt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==tt.object)return Ze(n,{code:Fe.invalid_type,expected:tt.object,received:n.parsedType}),St;const s=this.discriminator,i=n.data[s],a=this.optionsMap.get(i);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(Ze(n,{code:Fe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),St)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,s){const i=new Map;for(const a of n){const o=co(a.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);i.set(l,a)}}return new Wb({typeName:wt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...Et(s)})}}function c2(e,t){const n=vo(e),s=vo(t);if(e===t)return{valid:!0,data:e};if(n===tt.object&&s===tt.object){const i=Xt.objectKeys(t),a=Xt.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o={...e,...t};for(const l of a){const c=c2(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===tt.array&&s===tt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],l=t[a],c=c2(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===tt.date&&s===tt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ax extends Lt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t),i=(a,o)=>{if(o2(a)||o2(o))return St;const l=c2(a.value,o.value);return l.valid?((l2(a)||l2(o))&&n.dirty(),{status:n.value,value:l.data}):(Ze(s,{code:Fe.invalid_intersection_types}),St)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}ax.create=(e,t,n)=>new ax({left:e,right:t,typeName:wt.ZodIntersection,...Et(n)});class qa extends Lt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==tt.array)return Ze(s,{code:Fe.invalid_type,expected:tt.array,received:s.parsedType}),St;if(s.data.length<this._def.items.length)return Ze(s,{code:Fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),St;!this._def.rest&&s.data.length>this._def.items.length&&(Ze(s,{code:Fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...s.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ha(s,o,s.path,l)):null}).filter(o=>!!o);return s.common.async?Promise.all(a).then(o=>ns.mergeArray(n,o)):ns.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new qa({...this._def,rest:t})}}qa.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new qa({items:e,typeName:wt.ZodTuple,rest:null,...Et(t)})};class ox extends Lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==tt.object)return Ze(s,{code:Fe.invalid_type,expected:tt.object,received:s.parsedType}),St;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in s.data)i.push({key:a._parse(new Ha(s,l,s.path,l)),value:o._parse(new Ha(s,s.data[l],s.path,l)),alwaysSet:l in s.data});return s.common.async?ns.mergeObjectAsync(n,i):ns.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,s){return n instanceof Lt?new ox({keyType:t,valueType:n,typeName:wt.ZodRecord,...Et(s)}):new ox({keyType:ta.create(),valueType:t,typeName:wt.ZodRecord,...Et(n)})}}class I0 extends Lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==tt.map)return Ze(s,{code:Fe.invalid_type,expected:tt.map,received:s.parsedType}),St;const i=this._def.keyType,a=this._def.valueType,o=[...s.data.entries()].map(([l,c],d)=>({key:i._parse(new Ha(s,l,s.path,[d,"key"])),value:a._parse(new Ha(s,c,s.path,[d,"value"]))}));if(s.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,h=await c.value;if(d.status==="aborted"||h.status==="aborted")return St;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,h=c.value;if(d.status==="aborted"||h.status==="aborted")return St;(d.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(d.value,h.value)}return{status:n.value,value:l}}}}I0.create=(e,t,n)=>new I0({valueType:t,keyType:e,typeName:wt.ZodMap,...Et(n)});class Hd extends Lt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==tt.set)return Ze(s,{code:Fe.invalid_type,expected:tt.set,received:s.parsedType}),St;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(Ze(s,{code:Fe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(Ze(s,{code:Fe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const d=new Set;for(const h of c){if(h.status==="aborted")return St;h.status==="dirty"&&n.dirty(),d.add(h.value)}return{status:n.value,value:d}}const l=[...s.data.values()].map((c,d)=>a._parse(new Ha(s,c,s.path,d)));return s.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,n){return new Hd({...this._def,minSize:{value:t,message:ct.toString(n)}})}max(t,n){return new Hd({...this._def,maxSize:{value:t,message:ct.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Hd.create=(e,t)=>new Hd({valueType:e,minSize:null,maxSize:null,typeName:wt.ZodSet,...Et(t)});class dh extends Lt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==tt.function)return Ze(n,{code:Fe.invalid_type,expected:tt.function,received:n.parsedType}),St;function s(l,c){return E0({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,A0(),Hh].filter(d=>!!d),issueData:{code:Fe.invalid_arguments,argumentsError:c}})}function i(l,c){return E0({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,A0(),Hh].filter(d=>!!d),issueData:{code:Fe.invalid_return_type,returnTypeError:c}})}const a={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Kh){const l=this;return xs(async function(...c){const d=new ri([]),h=await l._def.args.parseAsync(c,a).catch(v=>{throw d.addIssue(s(c,v)),d}),m=await Reflect.apply(o,this,h);return await l._def.returns._def.type.parseAsync(m,a).catch(v=>{throw d.addIssue(i(m,v)),d})})}else{const l=this;return xs(function(...c){const d=l._def.args.safeParse(c,a);if(!d.success)throw new ri([s(c,d.error)]);const h=Reflect.apply(o,this,d.data),m=l._def.returns.safeParse(h,a);if(!m.success)throw new ri([i(h,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new dh({...this._def,args:qa.create(t).rest(vd.create())})}returns(t){return new dh({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,s){return new dh({args:t||qa.create([]).rest(vd.create()),returns:n||vd.create(),typeName:wt.ZodFunction,...Et(s)})}}class lx extends Lt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}lx.create=(e,t)=>new lx({getter:e,typeName:wt.ZodLazy,...Et(t)});class cx extends Lt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Ze(n,{received:n.data,code:Fe.invalid_literal,expected:this._def.value}),St}return{status:"valid",value:t.data}}get value(){return this._def.value}}cx.create=(e,t)=>new cx({value:e,typeName:wt.ZodLiteral,...Et(t)});function z9(e,t){return new hc({values:e,typeName:wt.ZodEnum,...Et(t)})}class hc extends Lt{constructor(){super(...arguments),Zf.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),s=this._def.values;return Ze(n,{expected:Xt.joinValues(s),received:n.parsedType,code:Fe.invalid_type}),St}if(O0(this,Zf)||L9(this,Zf,new Set(this._def.values)),!O0(this,Zf).has(t.data)){const n=this._getOrReturnCtx(t),s=this._def.values;return Ze(n,{received:n.data,code:Fe.invalid_enum_value,options:s}),St}return xs(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return hc.create(t,{...this._def,...n})}exclude(t,n=this._def){return hc.create(this.options.filter(s=>!t.includes(s)),{...this._def,...n})}}Zf=new WeakMap;hc.create=z9;class dx extends Lt{constructor(){super(...arguments),Yf.set(this,void 0)}_parse(t){const n=Xt.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==tt.string&&s.parsedType!==tt.number){const i=Xt.objectValues(n);return Ze(s,{expected:Xt.joinValues(i),received:s.parsedType,code:Fe.invalid_type}),St}if(O0(this,Yf)||L9(this,Yf,new Set(Xt.getValidEnumValues(this._def.values))),!O0(this,Yf).has(t.data)){const i=Xt.objectValues(n);return Ze(s,{received:s.data,code:Fe.invalid_enum_value,options:i}),St}return xs(t.data)}get enum(){return this._def.values}}Yf=new WeakMap;dx.create=(e,t)=>new dx({values:e,typeName:wt.ZodNativeEnum,...Et(t)});class Kh extends Lt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==tt.promise&&n.common.async===!1)return Ze(n,{code:Fe.invalid_type,expected:tt.promise,received:n.parsedType}),St;const s=n.parsedType===tt.promise?n.data:Promise.resolve(n.data);return xs(s.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Kh.create=(e,t)=>new Kh({type:e,typeName:wt.ZodPromise,...Et(t)});class da extends Lt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===wt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:s}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{Ze(s,o),o.fatal?n.abort():n.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(s.data,a);if(s.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return St;const c=await this._def.schema._parseAsync({data:l,path:s.path,parent:s});return c.status==="aborted"?St:c.status==="dirty"||n.value==="dirty"?Vu(c.value):c});{if(n.value==="aborted")return St;const l=this._def.schema._parseSync({data:o,path:s.path,parent:s});return l.status==="aborted"?St:l.status==="dirty"||n.value==="dirty"?Vu(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?St:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?St:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Ud(o))return o;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>Ud(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:n.value,value:l})):o);Xt.assertNever(i)}}da.create=(e,t,n)=>new da({schema:e,typeName:wt.ZodEffects,effect:t,...Et(n)});da.createWithPreprocess=(e,t,n)=>new da({schema:t,effect:{type:"preprocess",transform:e},typeName:wt.ZodEffects,...Et(n)});class Ra extends Lt{_parse(t){return this._getType(t)===tt.undefined?xs(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ra.create=(e,t)=>new Ra({innerType:e,typeName:wt.ZodOptional,...Et(t)});class mc extends Lt{_parse(t){return this._getType(t)===tt.null?xs(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}mc.create=(e,t)=>new mc({innerType:e,typeName:wt.ZodNullable,...Et(t)});class ux extends Lt{_parse(t){const{ctx:n}=this._processInputParams(t);let s=n.data;return n.parsedType===tt.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ux.create=(e,t)=>new ux({innerType:e,typeName:wt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Et(t)});class hx extends Lt{_parse(t){const{ctx:n}=this._processInputParams(t),s={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return tx(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ri(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ri(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}hx.create=(e,t)=>new hx({innerType:e,typeName:wt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Et(t)});class L0 extends Lt{_parse(t){if(this._getType(t)!==tt.nan){const s=this._getOrReturnCtx(t);return Ze(s,{code:Fe.invalid_type,expected:tt.nan,received:s.parsedType}),St}return{status:"valid",value:t.data}}}L0.create=e=>new L0({typeName:wt.ZodNaN,...Et(e)});const rpe=Symbol("zod_brand");class MT extends Lt{_parse(t){const{ctx:n}=this._processInputParams(t),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class _g extends Lt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?St:a.status==="dirty"?(n.dirty(),Vu(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?St:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(t,n){return new _g({in:t,out:n,typeName:wt.ZodPipeline})}}class mx extends Lt{_parse(t){const n=this._def.innerType._parse(t),s=i=>(Ud(i)&&(i.value=Object.freeze(i.value)),i);return tx(n)?n.then(i=>s(i)):s(n)}unwrap(){return this._def.innerType}}mx.create=(e,t)=>new mx({innerType:e,typeName:wt.ZodReadonly,...Et(t)});function LD(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function B9(e,t={},n){return e?qh.create().superRefine((s,i)=>{var a,o;const l=e(s);if(l instanceof Promise)return l.then(c=>{var d,h;if(!c){const m=LD(t,s),f=(h=(d=m.fatal)!==null&&d!==void 0?d:n)!==null&&h!==void 0?h:!0;i.addIssue({code:"custom",...m,fatal:f})}});if(!l){const c=LD(t,s),d=(o=(a=c.fatal)!==null&&a!==void 0?a:n)!==null&&o!==void 0?o:!0;i.addIssue({code:"custom",...c,fatal:d})}}):qh.create()}const npe={object:Vr.lazycreate};var wt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(wt||(wt={}));const spe=(e,t={message:`Input not instance of ${e.name}`})=>B9(n=>n instanceof e,t),V9=ta.create,U9=dc.create,ipe=L0.create,ape=uc.create,W9=rx.create,ope=Wd.create,lpe=M0.create,cpe=nx.create,dpe=sx.create,upe=qh.create,hpe=vd.create,mpe=Ko.create,fpe=D0.create,ppe=aa.create,xpe=Vr.create,gpe=Vr.strictCreate,vpe=ix.create,ype=Wb.create,jpe=ax.create,bpe=qa.create,wpe=ox.create,Npe=I0.create,Spe=Hd.create,_pe=dh.create,Ppe=lx.create,Cpe=cx.create,kpe=hc.create,Tpe=dx.create,Ape=Kh.create,RD=da.create,Epe=Ra.create,Ope=mc.create,Mpe=da.createWithPreprocess,Dpe=_g.create,Ipe=()=>V9().optional(),Lpe=()=>U9().optional(),Rpe=()=>W9().optional(),$pe={string:e=>ta.create({...e,coerce:!0}),number:e=>dc.create({...e,coerce:!0}),boolean:e=>rx.create({...e,coerce:!0}),bigint:e=>uc.create({...e,coerce:!0}),date:e=>Wd.create({...e,coerce:!0})},Fpe=St;var ee=Object.freeze({__proto__:null,defaultErrorMap:Hh,setErrorMap:Mfe,getErrorMap:A0,makeIssue:E0,EMPTY_PATH:Dfe,addIssueToContext:Ze,ParseStatus:ns,INVALID:St,DIRTY:Vu,OK:xs,isAborted:o2,isDirty:l2,isValid:Ud,isAsync:tx,get util(){return Xt},get objectUtil(){return a2},ZodParsedType:tt,getParsedType:vo,ZodType:Lt,datetimeRegex:F9,ZodString:ta,ZodNumber:dc,ZodBigInt:uc,ZodBoolean:rx,ZodDate:Wd,ZodSymbol:M0,ZodUndefined:nx,ZodNull:sx,ZodAny:qh,ZodUnknown:vd,ZodNever:Ko,ZodVoid:D0,ZodArray:aa,ZodObject:Vr,ZodUnion:ix,ZodDiscriminatedUnion:Wb,ZodIntersection:ax,ZodTuple:qa,ZodRecord:ox,ZodMap:I0,ZodSet:Hd,ZodFunction:dh,ZodLazy:lx,ZodLiteral:cx,ZodEnum:hc,ZodNativeEnum:dx,ZodPromise:Kh,ZodEffects:da,ZodTransformer:da,ZodOptional:Ra,ZodNullable:mc,ZodDefault:ux,ZodCatch:hx,ZodNaN:L0,BRAND:rpe,ZodBranded:MT,ZodPipeline:_g,ZodReadonly:mx,custom:B9,Schema:Lt,ZodSchema:Lt,late:npe,get ZodFirstPartyTypeKind(){return wt},coerce:$pe,any:upe,array:ppe,bigint:ape,boolean:W9,date:ope,discriminatedUnion:ype,effect:RD,enum:kpe,function:_pe,instanceof:spe,intersection:jpe,lazy:Ppe,literal:Cpe,map:Npe,nan:ipe,nativeEnum:Tpe,never:mpe,null:dpe,nullable:Ope,number:U9,object:xpe,oboolean:Rpe,onumber:Lpe,optional:Epe,ostring:Ipe,pipeline:Dpe,preprocess:Mpe,promise:Ape,record:wpe,set:Spe,strictObject:gpe,string:V9,symbol:lpe,transformer:RD,tuple:bpe,undefined:cpe,union:vpe,unknown:hpe,void:fpe,NEVER:Fpe,ZodIssueCode:Fe,quotelessJson:Ofe,ZodError:ri});const zpe=ee.object({rating:ee.number().min(1).max(5),title:ee.string().optional(),comment:ee.string().optional()});function Bpe({storeId:e,currentUserId:t}){const[n,s]=b.useState(!1),[i,a]=b.useState(0),[o,l]=b.useState(!1),{toast:c}=ft(),d=on(),h=fn({resolver:pn(zpe),defaultValues:{rating:0,title:"",comment:""}}),{data:m,isLoading:f}=Le({queryKey:["/api/stores",e,"reviews"],queryFn:async()=>await(await Kt(`/api/stores/${e}/reviews`)).json()}),v=Array.isArray(m)?m:[],p=v.sort((_,O)=>new Date(O.createdAt).getTime()-new Date(_.createdAt).getTime()),x=o?p:p.slice(0,2),y=pt({mutationFn:_=>Kt("/api/store-reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}),onSuccess:()=>{c({title:"Review submitted successfully",description:"Thank you for your feedback!"}),s(!1),h.reset(),a(0),d.invalidateQueries({queryKey:["/api/stores",e,"reviews"]}),d.invalidateQueries({queryKey:["/api/stores"]}),d.invalidateQueries({queryKey:[`/api/stores/${e}`]}),d.removeQueries({queryKey:["/api/stores"]}),d.removeQueries({queryKey:[`/api/stores/${e}`]}),setTimeout(()=>{d.refetchQueries({queryKey:["/api/stores"]}),d.refetchQueries({queryKey:[`/api/stores/${e}`]}),d.refetchQueries({queryKey:["/api/stores",e,"reviews"]})},1e3)},onError:_=>{var M;const O=(M=_.message)==null?void 0:M.includes("already reviewed");c({title:O?"Review Already Submitted":"Error submitting review",description:O?"You have already reviewed this store. You can only submit one review per store.":_.message||"Failed to submit your review. Please try again.",variant:O?"default":"destructive"})}}),w=pt({mutationFn:_=>Kt(`/api/store-reviews/${_}/helpful`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t||9})}),onSuccess:()=>{c({title:"Thank you for your feedback",description:"Review marked as helpful!"}),d.invalidateQueries({queryKey:["/api/stores",e,"reviews"]})},onError:_=>{c({title:"Error",description:_.message||"Failed to mark review as helpful.",variant:"destructive"})}}),j=_=>{console.log("Form data being submitted:",_);const O={..._,rating:i||_.rating,storeId:e,customerId:t||9};console.log("Review data with store info:",O),y.mutate(O)},N=_=>{a(_),h.setValue("rating",_)},C=_=>{w.mutate(_)},P=v&&v.length>0?v.reduce((_,O)=>_+(O.rating||0),0)/v.length:0,k=[5,4,3,2,1].map(_=>{const M=(v?v.filter(I=>I.rating===_):[]).length,T=v&&v.length>0?M/v.length*100:0;return{rating:_,count:M,percentage:T}});return f?r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4"}),r.jsx("div",{className:"space-y-3",children:[1,2,3].map(_=>r.jsx("div",{className:"h-32 bg-gray-200 rounded"},_))})]})}):r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"border-b border-gray-200 p-3 flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Ratings & Reviews"}),r.jsxs(Dr,{open:n,onOpenChange:s,children:[r.jsx(Ps,{asChild:!0,children:r.jsx($,{size:"sm",className:"bg-orange-500 hover:bg-orange-600 text-white px-4","data-rate-store":!0,children:"Write Review"})}),r.jsxs(Ar,{className:"sm:max-w-[500px]",children:[r.jsx(Er,{children:r.jsx(Or,{className:"text-xl",children:"Rate This Store"})}),r.jsx(Rr,{...h,children:r.jsxs("form",{onSubmit:h.handleSubmit(j),className:"space-y-6",children:[r.jsx(ae,{control:h.control,name:"rating",render:({field:_})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"How would you rate this store?"}),r.jsx(he,{children:r.jsxs("div",{className:"flex items-center space-x-2 py-2",children:[[1,2,3,4,5].map(O=>r.jsx("button",{type:"button",onClick:()=>N(O),className:"focus:outline-none transition-transform hover:scale-110",children:r.jsx(Bt,{className:`w-10 h-10 ${O<=i?"fill-orange-400 text-orange-400":"text-gray-300 hover:text-orange-300"}`})},O)),i>0&&r.jsx("span",{className:"ml-3 text-sm text-gray-600 font-medium",children:i===5?"Excellent!":i===4?"Very Good":i===3?"Good":i===2?"Fair":"Poor"})]})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"title",render:({field:_})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Review Title"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Summarize your experience in one line",className:"h-12",..._})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"comment",render:({field:_})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Your Review"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Tell others about your experience with this store...",className:"min-h-[120px] resize-none",..._})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx($,{type:"button",variant:"outline",className:"px-6",onClick:()=>s(!1),children:"Cancel"}),r.jsx($,{type:"submit",className:"bg-orange-500 hover:bg-orange-600 px-6",disabled:y.isPending||i===0,children:y.isPending?"Publishing...":"Publish Review"})]})]})})]})]})]}),r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-600 mb-1",children:P.toFixed(1)}),r.jsx("div",{className:"flex items-center justify-center mb-1",children:[1,2,3,4,5].map(_=>r.jsx(Bt,{className:`w-4 h-4 ${_<=Math.round(P)?"fill-green-500 text-green-500":"text-gray-300"}`},_))}),r.jsxs("p",{className:"text-sm text-gray-600 font-medium",children:[v.length," Reviews"]})]}),r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:"space-y-2",children:k.map(({rating:_,count:O,percentage:M})=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-700 w-6",children:[_," "]}),r.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${M}%`}})}),r.jsx("span",{className:"text-xs text-gray-600 w-6 text-right",children:O}),r.jsxs("span",{className:"text-xs text-gray-500 w-10 text-right",children:["(",M.toFixed(0),"%)"]})]},_))})})]})})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[r.jsx("div",{className:"border-b border-gray-200 p-3",children:r.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Customer Reviews"})}),r.jsx("div",{className:"divide-y divide-gray-200",children:!v||v.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx(Cz,{className:"w-12 h-12 text-gray-300 mb-3"}),r.jsx("h3",{className:"text-base font-medium text-gray-500 mb-1",children:"No reviews yet"}),r.jsx("p",{className:"text-sm text-gray-400 text-center max-w-sm",children:"Be the first to share your experience"})]}):r.jsxs(r.Fragment,{children:[x.map(_=>{var O,M,T,I,A,V,D,W;return r.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(xo,{className:"w-8 h-8",children:r.jsx(go,{className:"bg-orange-100 text-orange-600 font-medium text-sm",children:((T=(M=(O=_.customer)==null?void 0:O.fullName)==null?void 0:M.charAt(0))==null?void 0:T.toUpperCase())||((V=(A=(I=_.customer)==null?void 0:I.username)==null?void 0:A.charAt(0))==null?void 0:V.toUpperCase())||"U"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:((D=_.customer)==null?void 0:D.fullName)||((W=_.customer)==null?void 0:W.username)||"Anonymous"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-0.5",children:[r.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(U=>r.jsx(Bt,{className:`w-3 h-3 ${U<=_.rating?"fill-orange-400 text-orange-400":"text-gray-300"}`},U))}),r.jsx("span",{className:"text-xs text-gray-500",children:new Date(_.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]})]}),_.isVerifiedPurchase&&r.jsxs(ue,{variant:"secondary",className:"bg-green-50 text-green-700 border-green-200 text-xs",children:[r.jsx(Up,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),r.jsxs("div",{className:"space-y-2",children:[_.title&&r.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:_.title}),_.comment&&r.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:_.comment})]}),r.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-gray-100",children:[r.jsxs("button",{onClick:()=>C(_.id),disabled:w.isPending,className:"flex items-center space-x-1 text-xs text-gray-600 hover:text-orange-600 transition-colors disabled:opacity-50",children:[r.jsx(Az,{className:"w-3 h-3"}),r.jsx("span",{children:"Helpful"}),_.helpfulCount>0&&r.jsx("span",{className:"bg-gray-100 text-gray-700 px-1.5 py-0.5 rounded-full text-xs",children:_.helpfulCount})]}),r.jsx("div",{className:"text-xs text-gray-400",children:r.jsx("span",{children:"Was this helpful?"})})]})]},_.id)}),v.length>2&&r.jsx("div",{className:"p-3 bg-gray-50 border-t border-gray-200",children:r.jsx("div",{className:"text-center",children:r.jsx($,{variant:"outline",size:"sm",onClick:()=>l(!o),className:"px-4 py-1 border-orange-200 text-orange-600 hover:bg-orange-50 hover:border-orange-300 text-sm",children:o?r.jsx(r.Fragment,{children:"Show Less"}):r.jsxs(r.Fragment,{children:["View All ",v.length," Reviews"]})})})})]})})]})]})}function $D(){const{id:e}=Pm(),{data:t,isLoading:n}=Le({queryKey:[`/api/stores/${e}`],enabled:!!e}),{data:s=[],isLoading:i}=Le({queryKey:[`/api/products/store/${e}`],enabled:!!e});return n?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx("div",{children:"Loading store..."})}):t?r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx("div",{className:"w-full h-48 md:h-64 bg-gray-200 rounded-lg mb-6 overflow-hidden",children:r.jsx("img",{src:t.coverImage||(t.storeType==="restaurant"?"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center":"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop&crop=center"),alt:`${t.name} cover`,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src=t.storeType==="restaurant"?"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center":"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=400&fit=crop&crop=center"}})}),r.jsx(K,{className:"mb-8",children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6",children:[r.jsx("div",{className:"w-32 h-32 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0",children:r.jsx("img",{src:t.logo||"https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center",alt:t.name,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src="https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center"}})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:t.name}),r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("div",{className:"flex text-yellow-400 mr-2",children:Array.from({length:5}).map((a,o)=>r.jsx(Bt,{className:`h-4 w-4 ${o<Math.floor(Number(t.rating))?"fill-current":""}`},o))}),r.jsxs("span",{className:"text-muted-foreground",children:[t.rating," (",t.totalReviews," reviews)"]}),r.jsx(ue,{variant:"secondary",className:"ml-3",children:t.isActive?"Open":"Closed"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-muted-foreground mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:t.address})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"Open: 7:00 AM - 10:00 PM"})]}),t.phone&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:t.phone})]}),t.latitude&&t.longitude&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Re,{className:"h-4 w-4 mr-2 text-blue-500"}),r.jsx("span",{children:"Location available"})]})]}),t.description&&r.jsx("p",{className:"text-muted-foreground mb-4",children:t.description})]}),r.jsxs("div",{className:"flex flex-col space-y-3 w-full md:w-auto",children:[t.phone&&r.jsxs($,{className:"btn-primary",onClick:()=>window.open(`tel:${t.phone}`,"_self"),children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Call Store"]}),r.jsxs($,{variant:"outline",onClick:()=>{const a=document.getElementById("store-reviews");if(a){a.scrollIntoView({behavior:"smooth"});const o=a.querySelector("button[data-rate-store]");o&&setTimeout(()=>o.click(),500)}},children:[r.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Rate Store"]}),t.latitude&&t.longitude&&r.jsxs($,{variant:"outline",onClick:()=>{const a=`https://www.google.com/maps/dir/?api=1&destination=${t.latitude},${t.longitude}`;window.open(a,"_blank")},children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),"Get Directions"]})]})]})})}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsxs("span",{children:["Products from ",t.name]}),r.jsxs(ue,{variant:"outline",children:[s.length," products"]})]})}),r.jsx(G,{children:i?r.jsx("div",{className:"text-center py-8",children:"Loading products..."}):s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground text-lg",children:"No products available at the moment"}),r.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Check back later for new arrivals"})]}):r.jsx("div",{className:"grid grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:s.map(a=>r.jsx(Uh,{product:a},a.id))})})]}),r.jsx("div",{id:"store-reviews",className:"mt-8",children:r.jsx(Bpe,{storeId:parseInt(e),currentUserId:9})}),r.jsxs(K,{className:"mt-8",children:[r.jsx(re,{children:r.jsxs(ne,{children:["Why Shop with ",t.name,"?"]})}),r.jsx(G,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center p-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(jt,{className:"h-6 w-6 text-green-600"})}),r.jsx("h3",{className:"font-semibold mb-2",children:"Fast Delivery"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Quick delivery within Siraha area"})]}),r.jsxs("div",{className:"text-center p-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(Bt,{className:"h-6 w-6 text-blue-600"})}),r.jsx("h3",{className:"font-semibold mb-2",children:"Quality Products"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Fresh and authentic local products"})]}),r.jsxs("div",{className:"text-center p-4",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(Vt,{className:"h-6 w-6 text-purple-600"})}),r.jsx("h3",{className:"font-semibold mb-2",children:"Local Support"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Direct communication with store owner"})]})]})})]})]})}):r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Store not found"}),r.jsx(Ae,{href:"/",children:r.jsx($,{children:"Back to Home"})})]})})}function FD(){const{id:e}=Pm(),{data:t,isLoading:n,error:s}=Le({queryKey:[`/api/stores/${e}`],enabled:!!e,retry:1,staleTime:5*60*1e3}),{data:i=[],isLoading:a,error:o}=Le({queryKey:[`/api/products/store/${e}`],enabled:!!e&&!!t,retry:1,staleTime:5*60*1e3});if(n)return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-medium",children:"Loading restaurant details..."})]})});if(s)return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Error Loading Restaurant"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error loading the restaurant details."}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsx(Ae,{href:"/restaurants",children:r.jsx($,{variant:"outline",children:"Back to Restaurants"})}),r.jsx(Ae,{href:"/",children:r.jsx($,{children:"Go to Home"})})]})]})});if(!t)return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Restaurant not found"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"The restaurant you're looking for doesn't exist or has been removed."}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsx(Ae,{href:"/restaurants",children:r.jsx($,{variant:"outline",children:"Browse Restaurants"})}),r.jsx(Ae,{href:"/",children:r.jsx($,{children:"Back to Home"})})]})]})});const l=t.deliveryFee?`${t.deliveryFee}`:"Free",c=t.minimumOrder?`${t.minimumOrder}`:"";return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-6",children:r.jsx(Ae,{href:"/",children:r.jsxs($,{variant:"outline",className:"flex items-center gap-2",children:[r.jsx(bc,{className:"h-4 w-4"}),"Back to Restaurants"]})})}),r.jsx("div",{className:"w-full h-48 md:h-64 bg-gray-200 rounded-lg mb-6 overflow-hidden",children:r.jsx("img",{src:t.coverImage||"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center",alt:`${t.name} cover`,className:"w-full h-full object-cover",onError:d=>{d.currentTarget.src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&crop=center"}})}),r.jsx(K,{className:"mb-8",children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6",children:[r.jsx("div",{className:"w-32 h-32 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0",children:r.jsx("img",{src:t.logo||"https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center",alt:t.name,className:"w-full h-full object-cover",onError:d=>{d.currentTarget.src="https://images.unsplash.com/photo-1560472355-536de3962603?w=400&h=400&fit=crop&crop=center"}})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:t.name}),r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("div",{className:"flex text-yellow-400 mr-2",children:Array.from({length:5}).map((d,h)=>r.jsx(Bt,{className:`h-4 w-4 ${h<Math.floor(Number(t.rating))?"fill-current":""}`},h))}),r.jsxs("span",{className:"text-muted-foreground",children:[t.rating," (",t.totalReviews," reviews)"]}),r.jsx(ue,{variant:"secondary",className:"ml-3",children:t.isActive?"Open":"Closed"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-muted-foreground mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:t.address})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:t.deliveryTime||"25-35 mins"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(t0,{className:"h-4 w-4 mr-2"}),r.jsxs("span",{children:["Delivery: ",l]})]}),c&&r.jsx("div",{className:"flex items-center",children:r.jsxs("span",{children:["Min order: ",c]})}),t.phone&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:t.phone})]})]}),t.description&&r.jsx("p",{className:"text-muted-foreground mb-4",children:t.description}),t.cuisineType&&r.jsx(ue,{variant:"outline",className:"mr-2",children:t.cuisineType}),t.isDeliveryAvailable&&r.jsxs(ue,{className:"bg-green-500 hover:bg-green-600",children:[r.jsx(t0,{className:"h-3 w-3 mr-1"}),"Delivery Available"]})]}),r.jsxs("div",{className:"flex flex-col space-y-3 w-full md:w-auto",children:[t.phone&&r.jsxs($,{className:"btn-primary",onClick:()=>window.open(`tel:${t.phone}`,"_self"),children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Call Restaurant"]}),t.latitude&&t.longitude&&r.jsxs($,{variant:"outline",onClick:()=>{const d=`https://www.google.com/maps/dir/?api=1&destination=${t.latitude},${t.longitude}`;window.open(d,"_blank")},children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),"Get Directions"]})]})]})})}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Menu"}),r.jsxs(ue,{variant:"outline",children:[i.length," items"]})]})}),r.jsx(G,{children:a?r.jsx("div",{className:"text-center py-8",children:"Loading menu..."}):i.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground text-lg",children:"No menu items available at the moment"}),r.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Check back later for delicious options"})]}):r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:i.map(d=>r.jsx(J_,{food:d},d.id))})})]})]})})}var DT="Checkbox",[Vpe,SUe]=xn(DT),[Upe,Wpe]=Vpe(DT),H9=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:h,...m}=e,[f,v]=b.useState(null),p=Nt(t,C=>v(C)),x=b.useRef(!1),y=f?h||!!f.closest("form"):!0,[w=!1,j]=Oi({prop:i,defaultProp:a,onChange:d}),N=b.useRef(w);return b.useEffect(()=>{const C=f==null?void 0:f.form;if(C){const P=()=>j(N.current);return C.addEventListener("reset",P),()=>C.removeEventListener("reset",P)}},[f,j]),r.jsxs(Upe,{scope:n,state:w,disabled:l,children:[r.jsx(Je.button,{type:"button",role:"checkbox","aria-checked":Yl(w)?"mixed":w,"aria-required":o,"data-state":G9(w),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:p,onKeyDown:$e(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:$e(e.onClick,C=>{j(P=>Yl(P)?!0:!P),y&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})}),y&&r.jsx(Hpe,{control:f,bubbles:!x.current,name:s,value:c,checked:w,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"},defaultChecked:Yl(a)?!1:a})]})});H9.displayName=DT;var q9="CheckboxIndicator",K9=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...i}=e,a=Wpe(q9,n);return r.jsx(Mn,{present:s||Yl(a.state)||a.state===!0,children:r.jsx(Je.span,{"data-state":G9(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});K9.displayName=q9;var Hpe=e=>{const{control:t,checked:n,bubbles:s=!0,defaultChecked:i,...a}=e,o=b.useRef(null),l=wg(n),c=mg(t);b.useEffect(()=>{const h=o.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(l!==n&&v){const p=new Event("click",{bubbles:s});h.indeterminate=Yl(n),v.call(h,Yl(n)?!1:n),h.dispatchEvent(p)}},[l,n,s]);const d=b.useRef(Yl(n)?!1:n);return r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??d.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Yl(e){return e==="indeterminate"}function G9(e){return Yl(e)?"indeterminate":e?"checked":"unchecked"}var Z9=H9,qpe=K9;const fc=b.forwardRef(({className:e,...t},n)=>r.jsx(Z9,{ref:n,className:Ve("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(qpe,{className:Ve("flex items-center justify-center text-current"),children:r.jsx(Ed,{className:"h-4 w-4"})})}));fc.displayName=Z9.displayName;function Kpe(){const{cartItems:e,updateCartItem:t,removeFromCart:n,totalAmount:s,totalItems:i,isLoading:a,selectedItems:o,setSelectedItems:l,getSelectedCartItems:c,getSelectedTotals:d,resetSelectionState:h}=wc(),{user:m}=Gt(),{toast:f}=ft(),[v,p]=b.useState(""),[x,y]=b.useState(!1),[w,j]=b.useState(null),[N,C]=b.useState(0),[P,k]=b.useState(0),[_,O]=b.useState(!1),[M,T]=b.useState(!1),[I,A]=b.useState(null),[V,D]=b.useState([]),[W,U]=b.useState(!1),[Q,q]=b.useState(-1),B=b.useRef(null);Le({queryKey:["/api/delivery-zones"]});const z=xe=>{const J=new Set(o);J.has(xe)?J.delete(xe):J.add(xe),localStorage.setItem("cartHasSelections","true"),l(J)},H=()=>{o.size===e.length?l(new Set):l(new Set(e.map(xe=>xe.id))),localStorage.setItem("cartHasSelections","true")},{amount:X,items:ge}=d();b.useEffect(()=>{const xe=setTimeout(()=>{v&&!w&&F(v)},300);return()=>clearTimeout(xe)},[v,w]);const Se=async(xe,J)=>{try{throw new Error("HERE Maps API key not configured")}catch(De){return console.error("Reverse geocoding error:",De),`${xe.toFixed(6)}, ${J.toFixed(6)}`}},F=async xe=>{if(!xe.trim()||xe.length<3){D([]),U(!1);return}try{console.warn("HERE Maps API key not configured");return}catch(J){console.error("Error fetching address suggestions:",J),D([]),U(!1)}},pe=xe=>{var De;const J=xe.title||((De=xe.address)==null?void 0:De.label)||"";p(J),U(!1),q(-1),xe.position&&j({latitude:xe.position.lat,longitude:xe.position.lng})},we=xe=>{if(!(!W||V.length===0))switch(xe.key){case"ArrowDown":xe.preventDefault(),q(J=>J<V.length-1?J+1:0);break;case"ArrowUp":xe.preventDefault(),q(J=>J>0?J-1:V.length-1);break;case"Enter":xe.preventDefault(),Q>=0&&pe(V[Q]);break;case"Escape":U(!1),q(-1);break}},Be=async(xe,J)=>{try{await t(xe,J)}catch{f({title:"Error",description:"Failed to update quantity",variant:"destructive"})}},Pe=async xe=>{try{await n(xe),f({title:"Item removed",description:"Item has been removed from your cart"})}catch{f({title:"Error",description:"Failed to remove item",variant:"destructive"})}},Ee=async()=>{T(!0);try{const xe=await qo();j(xe);const J=await Se(xe.latitude,xe.longitude);p(J),y(!0),f({title:"Location Found",description:`Your location has been set to: ${J}`}),await Ie(xe)}catch(xe){console.error("Error getting location:",xe),f({title:"Location Error",description:xe instanceof Error?xe.message:"Failed to get your location. Please ensure location permission is granted.",variant:"destructive"})}finally{T(!1)}},Ie=async xe=>{if(e.length!==0){O(!0);try{const J=e[0];if(!(J!=null&&J.product))throw new Error("Product information not available");const De=await fetch(`/api/stores/${J.product.storeId}`);if(!De.ok)throw new Error("Failed to fetch store information");const Ue=await De.json();if(!Ue.latitude||!Ue.longitude)throw new Error("Store location not available");const st={latitude:parseFloat(Ue.latitude),longitude:parseFloat(Ue.longitude)},ht=Wh(st,xe);k(ht);const Wt=await fetch("/api/calculate-delivery-fee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({distance:ht})});if(!Wt.ok)throw new Error("Failed to calculate delivery fee");const mr=await Wt.json();C(mr.fee),A({zone:mr.zone,estimatedTime:Math.round(30+ht*10)}),f({title:"Delivery Fee Calculated",description:`${mr.fee} for ${Zl(ht)} delivery`})}catch(J){console.error("Error calculating delivery fee:",J),f({title:"Error",description:J instanceof Error?J.message:"Failed to calculate delivery fee",variant:"destructive"})}finally{O(!1)}}},Ne=async()=>{if(w){await Ie(w);return}if(!(!v.trim()||e.length===0)){O(!0);try{const xe=e[0];if(!(xe!=null&&xe.product))throw new Error("Product information not available");const J=await fetch(`/api/stores/${xe.product.storeId}`);if(!J.ok)throw new Error("Failed to fetch store information");const De=await J.json();if(!De.latitude||!De.longitude)throw new Error("Store location not available");const Ue={latitude:parseFloat(De.latitude),longitude:parseFloat(De.longitude)},st=await MV(v);if(!(st!=null&&st.coordinates)){f({title:"Address Not Found",description:"Could not locate the address. Please verify on Google Maps and try again.",variant:"destructive",action:r.jsx($,{variant:"outline",size:"sm",onClick:()=>window.open(st==null?void 0:st.googleMapsLink,"_blank"),children:"View on Google Maps"})});return}const ht=st.coordinates;st.confidence==="low"&&f({title:"Address Match Found",description:`Found: ${st.formattedAddress||v}. Please verify this is correct.`,action:r.jsx($,{variant:"outline",size:"sm",onClick:()=>window.open(st.googleMapsLink,"_blank"),children:"Verify on Maps"})});const Wt=Wh(Ue,ht);k(Wt);const mr=await fetch("/api/calculate-delivery-fee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({distance:Wt})});if(!mr.ok)throw new Error("Failed to calculate delivery fee");const Ft=await mr.json();C(Ft.fee),A({zone:Ft.zone,estimatedTime:Math.round(30+Wt*10)}),f({title:"Delivery Fee Calculated",description:`${Ft.fee} for ${Zl(Wt)} delivery to ${st.formattedAddress||v}`})}catch(xe){console.error("Error calculating delivery fee:",xe),f({title:"Error",description:xe instanceof Error?xe.message:"Failed to calculate delivery fee",variant:"destructive"})}finally{O(!1)}}};return m?a?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx("div",{children:"Loading cart..."})}):e.length===0?r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:r.jsx(K,{children:r.jsxs(G,{className:"pt-6 text-center",children:[r.jsx(Vo,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Your cart is empty"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Looks like you haven't added anything to your cart yet"}),r.jsx(Ae,{href:"/products",children:r.jsx($,{children:"Continue Shopping"})})]})})})}):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground mb-8",children:"Shopping Cart"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ne,{children:["Cart Items (",i,")"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($,{variant:"ghost",size:"sm",onClick:()=>{h(),f({title:"Selection Reset",description:"Cart selection state has been reset. Try selecting items now."})},className:"text-xs",children:"Reset Selection"}),r.jsx(fc,{id:"select-all",checked:o.size===e.length&&e.length>0,onCheckedChange:H}),r.jsx(be,{htmlFor:"select-all",className:"text-sm font-medium",children:"Select All"})]})]})}),r.jsx(G,{className:"space-y-4",children:e.map(xe=>{var J,De,Ue,st,ht;return r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4 p-3 sm:p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto",children:[r.jsx(fc,{id:`item-${xe.id}`,checked:o.has(xe.id),onCheckedChange:()=>z(xe.id),className:"flex-shrink-0"}),r.jsx("img",{src:((De=(J=xe.product)==null?void 0:J.images)==null?void 0:De[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100",alt:((Ue=xe.product)==null?void 0:Ue.name)||"Product",className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded-lg flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-foreground text-sm sm:text-base line-clamp-2",children:((st=xe.product)==null?void 0:st.name)||"Unknown Product"}),r.jsxs("p",{className:"text-primary font-semibold text-sm sm:text-base",children:["",xe.product?Number(xe.product.price).toLocaleString():0]})]}),r.jsx($,{variant:"ghost",size:"sm",onClick:()=>Pe(xe.id),className:"text-destructive hover:text-destructive sm:hidden",children:r.jsx(Fr,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex items-center justify-between w-full sm:w-auto sm:justify-end sm:space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($,{variant:"outline",size:"sm",onClick:()=>Be(xe.id,xe.quantity-1),disabled:xe.quantity<=1,className:"h-8 w-8 p-0",children:r.jsx(kz,{className:"h-3 w-3"})}),r.jsx("span",{className:"w-8 text-center text-sm font-medium",children:xe.quantity}),r.jsx($,{variant:"outline",size:"sm",onClick:()=>Be(xe.id,xe.quantity+1),disabled:xe.quantity>=(((ht=xe.product)==null?void 0:ht.stock)||0),className:"h-8 w-8 p-0",children:r.jsx(zt,{className:"h-3 w-3"})})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("p",{className:"font-semibold text-sm sm:text-base",children:["",xe.product?(Number(xe.product.price)*xe.quantity).toLocaleString():0]}),r.jsx($,{variant:"ghost",size:"sm",onClick:()=>Pe(xe.id),className:"text-destructive hover:text-destructive hidden sm:flex",children:r.jsx(Fr,{className:"h-4 w-4"})})]})]})]},xe.id)})})]})}),r.jsx("div",{children:r.jsxs(K,{className:"sticky top-24",children:[r.jsx(re,{children:r.jsx(ne,{children:"Order Summary"})}),r.jsxs(G,{children:[r.jsx("div",{className:"space-y-3 mb-4",children:r.jsxs("div",{children:[r.jsx(be,{htmlFor:"delivery-address",className:"text-sm font-medium",children:"Delivery Address"}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[r.jsxs($,{onClick:Ee,disabled:M,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[M?r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}):r.jsx(_t,{className:"h-4 w-4"}),M?"Getting Location...":"Get My Location"]}),r.jsxs($,{onClick:()=>y(!x),size:"sm",variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4"}),"Manual Address"]}),(x||w||v.trim())&&r.jsxs($,{onClick:Ne,disabled:_||!v.trim()&&!w,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[r.jsx(_z,{className:"h-4 w-4"}),_?"Calculating...":"Calculate Fee"]})]}),w&&r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[r.jsx(Re,{className:"h-3 w-3 inline mr-1"}),"Using your current location"]}),P>0&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Distance: ",Zl(P),I&&`  Est. ${I.estimatedTime} mins`]}),x&&r.jsxs("div",{className:"relative mt-2",children:[r.jsx(de,{id:"delivery-address",placeholder:"Enter your complete delivery address",value:v,onChange:xe=>{p(xe.target.value),xe.target.value!==v&&j(null)},onKeyDown:we,onFocus:()=>{V.length>0&&U(!0)},onBlur:()=>{setTimeout(()=>U(!1),200)}}),W&&V.length>0&&r.jsx("div",{ref:B,className:"absolute z-50 w-full mt-1 bg-background border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",children:V.map((xe,J)=>{var De;return r.jsxs("div",{className:`px-3 py-2 cursor-pointer text-sm hover:bg-muted transition-colors ${J===Q?"bg-muted":""}`,onClick:()=>pe(xe),onMouseEnter:()=>q(J),children:[r.jsx("div",{className:"font-medium",children:xe.title}),((De=xe.address)==null?void 0:De.label)&&xe.address.label!==xe.title&&r.jsx("div",{className:"text-xs text-muted-foreground",children:xe.address.label}),xe.resultType&&r.jsx("div",{className:"text-xs text-primary mt-1",children:xe.resultType==="place"?" Place":" Address"})]},J)})})]})]})}),r.jsx(hn,{className:"my-4"}),r.jsxs("div",{className:"space-y-3 mb-4",children:[o.size<e.length&&r.jsxs("div",{className:"text-xs text-muted-foreground p-2 bg-muted rounded",children:["Selected ",o.size," of ",e.length," items"]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:["Subtotal (",ge," items)"]}),r.jsxs("span",{children:["",X.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Delivery Fee"}),r.jsx("span",{className:N>0?"text-foreground":"text-muted-foreground",children:N>0?`${N.toLocaleString()}`:"Enter address to calculate"})]}),(I==null?void 0:I.zone)&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Zone: ",I.zone.name]}),r.jsx(hn,{}),r.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{children:N>0||w||v.trim()?`${(X+N).toLocaleString()}`:"Enter address for total"})]})]}),r.jsx(Ae,{href:"/checkout",children:r.jsxs($,{className:"w-full btn-primary",disabled:o.size===0,children:["Proceed to Checkout (",o.size," items)"]})}),o.size===0&&r.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Select at least one item to proceed"}),r.jsx(Ae,{href:"/products",children:r.jsx($,{variant:"outline",className:"w-full mt-3",children:"Continue Shopping"})})]})]})})]})]})}):r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx(K,{className:"w-full max-w-md mx-4",children:r.jsxs(G,{className:"pt-6 text-center",children:[r.jsx(Vo,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Please Login"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need to login to view your cart"}),r.jsx(Ae,{href:"/login",children:r.jsx($,{className:"w-full",children:"Login"})})]})})})}var IT="Radio",[Gpe,Y9]=xn(IT),[Zpe,Ype]=Gpe(IT),X9=b.forwardRef((e,t)=>{const{__scopeRadio:n,name:s,checked:i=!1,required:a,disabled:o,value:l="on",onCheck:c,form:d,...h}=e,[m,f]=b.useState(null),v=Nt(t,y=>f(y)),p=b.useRef(!1),x=m?d||!!m.closest("form"):!0;return r.jsxs(Zpe,{scope:n,checked:i,disabled:o,children:[r.jsx(Je.button,{type:"button",role:"radio","aria-checked":i,"data-state":e7(i),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onClick:$e(e.onClick,y=>{i||c==null||c(),x&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})}),x&&r.jsx(Xpe,{control:m,bubbles:!p.current,name:s,value:l,checked:i,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});X9.displayName=IT;var Q9="RadioIndicator",J9=b.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:s,...i}=e,a=Ype(Q9,n);return r.jsx(Mn,{present:s||a.checked,children:r.jsx(Je.span,{"data-state":e7(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});J9.displayName=Q9;var Xpe=e=>{const{control:t,checked:n,bubbles:s=!0,...i}=e,a=b.useRef(null),o=wg(n),l=mg(t);return b.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&m){const f=new Event("click",{bubbles:s});m.call(c,n),c.dispatchEvent(f)}},[o,n,s]),r.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function e7(e){return e?"checked":"unchecked"}var Qpe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],LT="RadioGroup",[Jpe,_Ue]=xn(LT,[Dm,Y9]),t7=Dm(),r7=Y9(),[exe,txe]=Jpe(LT),n7=b.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:s,defaultValue:i,value:a,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:h=!0,onValueChange:m,...f}=e,v=t7(n),p=eu(d),[x,y]=Oi({prop:a,defaultProp:i,onChange:m});return r.jsx(exe,{scope:n,name:s,required:o,disabled:l,value:x,onValueChange:y,children:r.jsx(Bk,{asChild:!0,...v,orientation:c,dir:p,loop:h,children:r.jsx(Je.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:p,...f,ref:t})})})});n7.displayName=LT;var s7="RadioGroupItem",i7=b.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:s,...i}=e,a=txe(s7,n),o=a.disabled||s,l=t7(n),c=r7(n),d=b.useRef(null),h=Nt(t,d),m=a.value===i.value,f=b.useRef(!1);return b.useEffect(()=>{const v=x=>{Qpe.includes(x.key)&&(f.current=!0)},p=()=>f.current=!1;return document.addEventListener("keydown",v),document.addEventListener("keyup",p),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",p)}},[]),r.jsx(Vk,{asChild:!0,...l,focusable:!o,active:m,children:r.jsx(X9,{disabled:o,required:a.required,checked:m,...c,...i,name:a.name,ref:h,onCheck:()=>a.onValueChange(i.value),onKeyDown:$e(v=>{v.key==="Enter"&&v.preventDefault()}),onFocus:$e(i.onFocus,()=>{var v;f.current&&((v=d.current)==null||v.click())})})})});i7.displayName=s7;var rxe="RadioGroupIndicator",a7=b.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...s}=e,i=r7(n);return r.jsx(J9,{...i,...s,ref:t})});a7.displayName=rxe;var o7=n7,l7=i7,nxe=a7;const c7=b.forwardRef(({className:e,...t},n)=>r.jsx(o7,{className:Ve("grid gap-2",e),...t,ref:n}));c7.displayName=o7.displayName;const Sy=b.forwardRef(({className:e,...t},n)=>r.jsx(l7,{ref:n,className:Ve("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(nxe,{className:"flex items-center justify-center",children:r.jsx(gk,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Sy.displayName=l7.displayName;const sxe=ee.object({customerName:ee.string().min(1,"Name is required"),phone:ee.string().min(10,"Valid phone number is required"),shippingAddress:ee.string().min(10,"Address is required"),paymentMethod:ee.enum(["cod","card","upi"]),latitude:ee.number().optional(),longitude:ee.number().optional()});function ixe(){var Ee,Ie,Ne;const[e,t]=b.useState(!1),[n,s]=b.useState(!1),[i,a]=b.useState(!1),[o,l]=b.useState(!0),[c,d]=b.useState(0),[h,m]=b.useState(0);b.useState(0);const[f,v]=b.useState(null),[p,x]=b.useState(null),[y,w]=b.useState([]),[j,N]=b.useState(!1),[C,P]=b.useState(-1),k=b.useRef(null),[,_]=Jr(),{cartItems:O,totalAmount:M,clearCart:T,clearSelectedItems:I,getSelectedCartItems:A,getSelectedTotals:V}=wc(),{user:D}=Gt(),{toast:W}=ft(),U=Mk(),Q=A(),{amount:q,items:B}=V();Le({queryKey:["/api/delivery-zones"]});const z=fn({resolver:pn(sxe),defaultValues:{customerName:(D==null?void 0:D.fullName)||"",phone:(D==null?void 0:D.phone)||"",shippingAddress:"",paymentMethod:"cod",latitude:void 0,longitude:void 0}}),H=z.watch("shippingAddress");b.useEffect(()=>{const xe=setTimeout(()=>{H&&!f&&ge(H)},300);return()=>clearTimeout(xe)},[H,f]);const X=async(xe,J)=>{try{throw new Error("HERE Maps API key not configured")}catch(De){return console.error("Reverse geocoding error:",De),`${xe.toFixed(6)}, ${J.toFixed(6)}`}},ge=async xe=>{if(!xe.trim()||xe.length<3){w([]),N(!1);return}try{console.warn("HERE Maps API key not configured");return}catch(J){console.error("Error fetching address suggestions:",J),w([]),N(!1)}},Se=xe=>{var De;const J=xe.title||((De=xe.address)==null?void 0:De.label)||"";z.setValue("shippingAddress",J),N(!1),P(-1),xe.position&&(v({latitude:xe.position.lat,longitude:xe.position.lng}),z.setValue("latitude",xe.position.lat),z.setValue("longitude",xe.position.lng))},F=xe=>{if(!(!j||y.length===0))switch(xe.key){case"ArrowDown":xe.preventDefault(),P(J=>J<y.length-1?J+1:0);break;case"ArrowUp":xe.preventDefault(),P(J=>J>0?J-1:y.length-1);break;case"Enter":xe.preventDefault(),C>=0&&Se(y[C]);break;case"Escape":N(!1),P(-1);break}},pe=async()=>{s(!0);try{const xe=await qo();v(xe),z.setValue("latitude",xe.latitude),z.setValue("longitude",xe.longitude);const J=await X(xe.latitude,xe.longitude);z.setValue("shippingAddress",J),l(!0),W({title:"Location Found",description:`Your location has been set to: ${J}`}),await we(xe)}catch(xe){console.error("Error getting location:",xe),W({title:"Location Error",description:xe instanceof Error?xe.message:"Failed to get your location. Please ensure location permission is granted.",variant:"destructive"})}finally{s(!1)}},we=async xe=>{if(Q.length!==0){a(!0);try{const J=Q[0];if(!(J!=null&&J.product))throw new Error("Product information not available");const De=await fetch(`/api/stores/${J.product.storeId}`);if(!De.ok)throw new Error("Failed to fetch store information");const Ue=await De.json();if(!Ue.latitude||!Ue.longitude)throw new Error("Store location not available");const st={latitude:parseFloat(Ue.latitude),longitude:parseFloat(Ue.longitude)},ht=Wh(st,xe);m(ht);const Wt=await fetch("/api/calculate-delivery-fee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({distance:ht})});if(!Wt.ok)throw new Error("Failed to calculate delivery fee");const mr=await Wt.json();d(mr.fee),x({zone:mr.zone,estimatedTime:Math.round(30+ht*10)}),W({title:"Delivery Fee Calculated",description:`${mr.fee} for ${Zl(ht)} delivery`})}catch(J){console.error("Error calculating delivery fee:",J),W({title:"Error",description:J instanceof Error?J.message:"Failed to calculate delivery fee",variant:"destructive"})}finally{a(!1)}}},Be=async()=>{const xe=z.getValues("shippingAddress");if(f){await we(f);return}if(!(!xe.trim()||Q.length===0)){a(!0);try{const J=Q[0];if(!(J!=null&&J.product))throw new Error("Product information not available");const De=await fetch(`/api/stores/${J.product.storeId}`);if(!De.ok)throw new Error("Failed to fetch store information");const Ue=await De.json();if(!Ue.latitude||!Ue.longitude)throw new Error("Store location not available");const st={latitude:parseFloat(Ue.latitude),longitude:parseFloat(Ue.longitude)},ht=await MV(xe);if(!(ht!=null&&ht.coordinates)){W({title:"Address Not Found",description:"Could not locate the address. Please verify on Google Maps and try again.",variant:"destructive",action:r.jsx($,{variant:"outline",size:"sm",onClick:()=>window.open(ht==null?void 0:ht.googleMapsLink,"_blank"),children:"View on Google Maps"})});return}const Wt=ht.coordinates;ht.formattedAddress&&ht.formattedAddress!==xe&&(z.setValue("shippingAddress",ht.formattedAddress),W({title:"Address Formatted",description:`Updated to: ${ht.formattedAddress}`,action:r.jsx($,{variant:"outline",size:"sm",onClick:()=>window.open(ht.googleMapsLink,"_blank"),children:"Verify on Maps"})})),ht.confidence==="low"&&W({title:"Address Match Found",description:"Please verify this location is correct before proceeding.",action:r.jsx($,{variant:"outline",size:"sm",onClick:()=>window.open(ht.googleMapsLink,"_blank"),children:"Verify on Maps"})});const mr=Wh(st,Wt);m(mr);const Ft=await fetch("/api/calculate-delivery-fee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({distance:mr})});if(!Ft.ok)throw new Error("Failed to calculate delivery fee");const ie=await Ft.json();d(ie.fee),x({zone:ie.zone,estimatedTime:Math.round(30+mr*10)}),W({title:"Delivery Fee Calculated",description:`${ie.fee} for ${Zl(mr)} delivery to ${ht.formattedAddress||xe}`})}catch(J){console.error("Error calculating delivery fee:",J),W({title:"Error",description:J instanceof Error?J.message:"Failed to calculate delivery fee",variant:"destructive"})}finally{a(!1)}}},Pe=async xe=>{var J,De;if(Q.length!==0){t(!0);try{const Ue=q+c,st={customerId:(D==null?void 0:D.id)||null,totalAmount:Ue.toString(),deliveryFee:c.toString(),status:"pending",...xe},ht=Q.map(Ft=>{var ie,je;return{productId:Ft.productId,quantity:Ft.quantity,price:((ie=Ft.product)==null?void 0:ie.price)||"0",storeId:((je=Ft.product)==null?void 0:je.storeId)||0}}),Wt=await ea("/api/orders",{order:st,items:ht});(J=Wt.order)!=null&&J.id&&localStorage.setItem("lastOrderId",Wt.order.id.toString()),await I(),U.onPaymentSuccess(),W({title:"Order placed successfully!",description:"You will receive a confirmation email shortly."});const mr=(De=Wt.order)!=null&&De.id?`?orderId=${Wt.order.id}`:"";_(`/order-confirmation${mr}`)}catch{U.onError(),W({title:"Error",description:"Failed to place order. Please try again.",variant:"destructive"})}finally{t(!1)}}};return!D&&O.length===0?(_("/login"),null):Q.length===0?(_("/cart"),null):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground mb-8",children:"Checkout"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(Rr,{...z,children:r.jsxs("form",{onSubmit:z.handleSubmit(Pe),className:"space-y-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center",children:[r.jsx(Re,{className:"h-5 w-5 mr-2"}),"Delivery Address"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:z.control,name:"customerName",render:({field:xe})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Full Name"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter your full name",...xe})}),r.jsx(me,{})]})}),r.jsx(ae,{control:z.control,name:"phone",render:({field:xe})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Phone Number"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter your phone number",...xe})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:z.control,name:"shippingAddress",render:({field:xe})=>{var J,De;return r.jsxs(se,{children:[r.jsx(ce,{children:"Complete Address"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs($,{type:"button",variant:"outline",onClick:pe,disabled:n,className:"flex items-center gap-2",children:[n?r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}):r.jsx(_t,{className:"h-4 w-4"}),n?"Getting Location...":"Get My Location"]}),r.jsxs($,{type:"button",variant:"outline",onClick:()=>l(!o),className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4"}),"Manual Address"]}),(o||f||((J=xe.value)==null?void 0:J.trim()))&&r.jsxs($,{type:"button",variant:"outline",onClick:Be,disabled:i||!((De=xe.value)!=null&&De.trim())&&!f,className:"flex items-center gap-2",children:[r.jsx(_z,{className:"h-4 w-4"}),i?"Calculating...":"Calculate Fee"]})]}),f&&r.jsxs("p",{className:"text-xs text-green-600",children:[r.jsx(Re,{className:"h-3 w-3 inline mr-1"}),"Using your current location"]}),h>0&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Distance: ",Zl(h),p&&`  Est. ${p.estimatedTime} mins`]}),(o||!f)&&r.jsxs("div",{className:"relative",children:[r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter your complete delivery address",className:"min-h-20",...xe,onChange:Ue=>{xe.onChange(Ue),Ue.target.value!==xe.value&&v(null)},onKeyDown:F,onFocus:()=>{y.length>0&&N(!0)},onBlur:()=>{setTimeout(()=>N(!1),200)}})}),j&&y.length>0&&r.jsx("div",{ref:k,className:"absolute z-50 w-full mt-1 bg-background border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",children:y.map((Ue,st)=>{var ht;return r.jsxs("div",{className:`px-3 py-2 cursor-pointer text-sm hover:bg-muted transition-colors ${st===C?"bg-muted":""}`,onClick:()=>Se(Ue),onMouseEnter:()=>P(st),children:[r.jsx("div",{className:"font-medium",children:Ue.title}),((ht=Ue.address)==null?void 0:ht.label)&&Ue.address.label!==Ue.title&&r.jsx("div",{className:"text-xs text-muted-foreground",children:Ue.address.label}),Ue.resultType&&r.jsx("div",{className:"text-xs text-primary mt-1",children:Ue.resultType==="place"?" Place":" Address"})]},st)})})]})]}),r.jsx(me,{})]})}})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center",children:[r.jsx(zp,{className:"h-5 w-5 mr-2"}),"Payment Method"]})}),r.jsx(G,{children:r.jsx(ae,{control:z.control,name:"paymentMethod",render:({field:xe})=>r.jsxs(se,{children:[r.jsx(he,{children:r.jsxs(c7,{onValueChange:xe.onChange,value:xe.value,className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-muted",children:[r.jsx(Sy,{value:"cod",id:"cod"}),r.jsx(be,{htmlFor:"cod",className:"flex-1 cursor-pointer",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ct,{className:"h-5 w-5 mr-3 text-green-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Cash on Delivery"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Pay when you receive your order"})]})]})})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-muted",children:[r.jsx(Sy,{value:"card",id:"card"}),r.jsx(be,{htmlFor:"card",className:"flex-1 cursor-pointer",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(zp,{className:"h-5 w-5 mr-3 text-blue-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Credit/Debit Card"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Pay with your card securely"})]})]})})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-muted",children:[r.jsx(Sy,{value:"upi",id:"upi"}),r.jsx(be,{htmlFor:"upi",className:"flex-1 cursor-pointer",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-5 w-5 mr-3 bg-purple-600 rounded flex items-center justify-center text-white text-xs font-bold",children:"U"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"UPI Payment"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Pay using UPI apps like eSewa, Khalti"})]})]})})]})]})}),r.jsx(me,{})]})})})]}),r.jsx($,{type:"submit",className:"w-full btn-primary",disabled:e||!f&&!((Ee=z.getValues("shippingAddress"))!=null&&Ee.trim())||c===0&&h===0,children:e?"Placing Order...":!f&&!((Ie=z.getValues("shippingAddress"))!=null&&Ie.trim())?"Enter Delivery Address":c===0&&h===0?"Calculate Delivery Fee":"Place Order"})]})})}),r.jsx("div",{children:r.jsxs(K,{className:"sticky top-24",children:[r.jsx(re,{children:r.jsx(ne,{children:"Order Summary"})}),r.jsxs(G,{children:[r.jsxs("div",{className:"space-y-3 mb-4",children:[Q.map(xe=>{var J;return r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{children:((J=xe.product)==null?void 0:J.name)||"Unknown Product"}),r.jsxs("span",{className:"text-muted-foreground",children:[" x",xe.quantity]})]}),r.jsxs("span",{children:["",xe.product?(Number(xe.product.price)*xe.quantity).toLocaleString():0]})]},xe.id)}),r.jsx(hn,{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",q.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Delivery Fee"}),r.jsx("span",{className:c>0?"text-foreground":"text-muted-foreground",children:c>0?`${c.toLocaleString()}`:"Enter address to calculate"})]}),(p==null?void 0:p.zone)&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Zone: ",p.zone.name]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Tax"}),r.jsx("span",{children:"0"})]}),r.jsx(hn,{}),r.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{children:c>0||f||(Ne=z.getValues("shippingAddress"))!=null&&Ne.trim()?`${(q+c).toLocaleString()}`:"Enter address for total"})]})]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"By placing this order, you agree to our Terms of Service and Privacy Policy."})]})]})})]})]})})}function axe(){const{user:e}=Gt(),[t]=Jr(),[n,s]=b.useState(null);b.useEffect(()=>{window.scrollTo(0,0);const c=new URLSearchParams(t.split("?")[1]||"").get("orderId"),d=localStorage.getItem("lastOrderId");s(c||d),setTimeout(()=>{lr.orderPlaced()},500)},[t]);const i=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),a=new Date;a.setDate(a.getDate()+3);const o=a.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsx("div",{className:"max-w-2xl mx-auto px-4 py-16",children:r.jsx(K,{children:r.jsxs(G,{className:"pt-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(yt,{className:"h-12 w-12 text-green-600"})}),r.jsx("h1",{className:"text-3xl font-bold text-foreground mb-4",children:"Order Confirmed!"}),r.jsx("p",{className:"text-lg text-muted-foreground",children:"Thank you for your order. We'll send you a confirmation email shortly."})]}),r.jsx(hn,{className:"my-6"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Order Details"}),r.jsxs("div",{className:"bg-muted rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Order ID:"}),r.jsxs("span",{className:"font-mono text-sm",children:["#",n||"SB"+Date.now().toString().slice(-8)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Order Date:"}),r.jsx("span",{children:i})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Customer:"}),r.jsx("span",{children:(e==null?void 0:e.fullName)||"Customer"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Payment Method:"}),r.jsx("span",{children:"Cash on Delivery"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Delivery Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[r.jsx(ql,{className:"h-5 w-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Estimated Delivery"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:o})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 dark:bg-green-950 rounded-lg",children:[r.jsx(Ct,{className:"h-5 w-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Free Delivery"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"No delivery charges for orders within Siraha"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[r.jsx(Ye,{className:"h-5 w-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Track Your Order"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"You'll receive tracking updates via SMS and email"})]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[n&&r.jsx(Ae,{href:`/orders/${n}/tracking`,children:r.jsxs($,{className:"w-full btn-primary",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"Track Your Order"]})}),r.jsx(Ae,{href:"/customer-dashboard",children:r.jsx($,{variant:"outline",className:"w-full",children:"View Order Details"})}),r.jsx(Ae,{href:"/products",children:r.jsx($,{variant:"outline",className:"w-full",children:"Continue Shopping"})})]}),r.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[r.jsx("p",{children:"Need help with your order?"}),r.jsxs("p",{children:["Contact us at ",r.jsx("a",{href:"mailto:sirahabazzar@gmail.com",className:"text-primary hover:underline",children:"sirahabazzar@gmail.com"})]}),r.jsxs("p",{children:["or call ",r.jsx("a",{href:"tel:+9779805916598",className:"text-primary hover:underline",children:"+9779805916598"})]})]})]})]})})})})}const oxe=ee.object({email:ee.string().email("Please enter a valid email address"),password:ee.string().min(6,"Password must be at least 6 characters")});function lxe(){const[e,t]=b.useState(!1),[n,s]=b.useState(!1),[,i]=Jr(),{login:a}=Gt(),{toast:o}=ft(),l=fn({resolver:pn(oxe),defaultValues:{email:"",password:""}}),c=async d=>{s(!0);try{await a(d.email,d.password),lr.success(),o({title:"Welcome back!",description:"You have been successfully logged in."}),i("/")}catch(h){lr.error(),o({title:"Login failed",description:h instanceof Error?h.message:"Invalid credentials",variant:"destructive"})}finally{s(!1)}};return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center py-12",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs(K,{children:[r.jsxs(re,{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center mb-4",children:[r.jsx(ar,{className:"h-8 w-8 text-primary mr-2"}),r.jsx("span",{className:"text-2xl font-bold text-foreground",children:"Siraha Bazaar"})]}),r.jsx(ne,{className:"text-2xl",children:"Welcome Back"}),r.jsx("p",{className:"text-muted-foreground",children:"Sign in to your account to continue shopping"})]}),r.jsxs(G,{children:[r.jsx(Rr,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-4",children:[r.jsx(ae,{control:l.control,name:"email",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Email Address"}),r.jsx(he,{children:r.jsx(de,{type:"email",placeholder:"Enter your email",...d})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"password",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Password"}),r.jsx(he,{children:r.jsxs("div",{className:"relative",children:[r.jsx(de,{type:e?"text":"password",placeholder:"Enter your password",...d}),r.jsx($,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>t(!e),children:e?r.jsx(k_,{className:"h-4 w-4"}):r.jsx(hs,{className:"h-4 w-4"})})]})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"remember",className:"rounded border-gray-300"}),r.jsx("label",{htmlFor:"remember",className:"text-sm text-muted-foreground",children:"Remember me"})]}),r.jsx(Ae,{href:"/forgot-password",children:r.jsx($,{type:"button",variant:"link",className:"text-sm text-primary hover:underline p-0 h-auto",children:"Forgot password?"})})]}),r.jsx($,{type:"submit",className:"w-full btn-primary",disabled:n,children:n?"Signing in...":"Sign In"})]})}),r.jsx("div",{className:"mt-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Don't have an account? "}),r.jsx(Ae,{href:"/register",className:"text-primary hover:underline font-medium",children:"Create Account"})]})}),r.jsx("div",{className:"mt-6 border-t pt-6",children:r.jsxs("div",{className:"text-center mb-4",children:[r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800 mb-4",children:[r.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:r.jsx("strong",{children:"Password Reset:"})}),r.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:'Enter your email address and click "Forgot password?" to receive reset instructions. Note: Firebase domain authorization may be required for email delivery.'})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Demo Accounts:"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2 p-2 bg-muted rounded",children:[r.jsx(Wr,{className:"h-4 w-4"}),r.jsx("span",{children:"Customer: customer@example.com"})]}),r.jsxs("div",{className:"flex items-center justify-center space-x-2 p-2 bg-muted rounded",children:[r.jsx(ar,{className:"h-4 w-4"}),r.jsx("span",{children:"Shopkeeper: shopkeeper@example.com"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Password: password123"})]})]})})]})]})})})}const cxe=ee.object({fullName:ee.string().min(2,"Full name must be at least 2 characters"),email:ee.string().email("Please enter a valid email address"),phone:ee.string().min(10,"Phone number must be at least 10 digits"),password:ee.string().min(6,"Password must be at least 6 characters"),confirmPassword:ee.string(),role:ee.enum(["customer","shopkeeper","delivery_partner"]),address:ee.string().optional(),vehicleType:ee.string().optional(),vehicleNumber:ee.string().optional(),vehicleBrand:ee.string().optional(),vehicleModel:ee.string().optional(),vehicleYear:ee.string().optional(),vehicleColor:ee.string().optional(),drivingLicense:ee.string().optional(),licenseExpiryDate:ee.string().optional(),idProofType:ee.string().optional(),idProofNumber:ee.string().optional(),bankAccountNumber:ee.string().optional(),ifscCode:ee.string().optional(),bankName:ee.string().optional(),accountHolderName:ee.string().optional(),emergencyContactName:ee.string().optional(),emergencyContactPhone:ee.string().optional(),emergencyContactRelation:ee.string().optional(),deliveryAreas:ee.array(ee.string()).optional(),workingHours:ee.string().optional(),experience:ee.string().optional(),previousEmployment:ee.string().optional(),references:ee.string().optional(),medicalCertificate:ee.string().optional(),policeClearance:ee.string().optional(),idProofUrl:ee.string().optional(),drivingLicenseUrl:ee.string().optional(),vehicleRegistrationUrl:ee.string().optional(),insuranceUrl:ee.string().optional(),photoUrl:ee.string().optional(),termsAccepted:ee.boolean().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}).refine(e=>e.role==="delivery_partner"?e.vehicleType&&e.vehicleType.length>0:!0,{message:"Vehicle type is required for delivery partners",path:["vehicleType"]}).refine(e=>e.role==="delivery_partner"?e.vehicleNumber&&e.vehicleNumber.length>0:!0,{message:"Vehicle number is required for delivery partners",path:["vehicleNumber"]}).refine(e=>e.role==="delivery_partner"&&e.vehicleType!=="bicycle"?e.drivingLicense&&e.drivingLicense.length>0:!0,{message:"Driving license number is required for motorized vehicles",path:["drivingLicense"]}).refine(e=>e.role==="delivery_partner"?e.idProofType&&e.idProofType.length>0:!0,{message:"ID proof type is required for delivery partners",path:["idProofType"]}).refine(e=>e.role==="delivery_partner"?e.idProofNumber&&e.idProofNumber.length>0:!0,{message:"ID proof number is required for delivery partners",path:["idProofNumber"]}).refine(e=>e.role==="delivery_partner"?e.bankAccountNumber&&e.bankAccountNumber.length>0:!0,{message:"Bank account number is required for delivery partners",path:["bankAccountNumber"]}).refine(e=>e.role==="delivery_partner"?e.ifscCode&&e.ifscCode.length>0:!0,{message:"IFSC code is required for delivery partners",path:["ifscCode"]}).refine(e=>e.role==="delivery_partner"?e.emergencyContactName&&e.emergencyContactName.length>0:!0,{message:"Emergency contact name is required for delivery partners",path:["emergencyContactName"]}).refine(e=>e.role==="delivery_partner"?e.emergencyContactPhone&&e.emergencyContactPhone.length>0:!0,{message:"Emergency contact phone is required for delivery partners",path:["emergencyContactPhone"]}).refine(e=>e.role==="delivery_partner"?e.termsAccepted===!0:!0,{message:"You must accept the terms and conditions",path:["termsAccepted"]});function dxe(){var p;const[e,t]=b.useState(!1),[n,s]=b.useState(!1),[i,a]=b.useState(!1),[,o]=Jr(),{register:l,user:c}=Gt(),{toast:d}=ft();(c==null?void 0:c.role)==="admin"||(p=c==null?void 0:c.email)!=null&&p.includes("admin")||localStorage.getItem("isAdmin");const h=fn({resolver:pn(cxe),defaultValues:{fullName:"",email:"",phone:"",password:"",confirmPassword:"",role:"customer",address:"",vehicleType:"",vehicleNumber:"",vehicleBrand:"",vehicleModel:"",vehicleYear:"",vehicleColor:"",drivingLicense:"",licenseExpiryDate:"",idProofType:"",idProofNumber:"",bankAccountNumber:"",ifscCode:"",bankName:"",accountHolderName:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelation:"",deliveryAreas:[],workingHours:"",experience:"",previousEmployment:"",references:"",medicalCertificate:"",policeClearance:"",idProofUrl:"",drivingLicenseUrl:"",vehicleRegistrationUrl:"",insuranceUrl:"",photoUrl:"",termsAccepted:!1}}),m=h.watch("role"),f=h.watch("vehicleType"),v=async x=>{a(!0);try{const{confirmPassword:y,termsAccepted:w,...j}=x,N={...j,status:j.role==="shopkeeper"||j.role==="delivery_partner"?"pending":"active"};let C;if(j.role==="customer")await l(N);else{const P=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!P.ok){let O=(await P.json()).error||"Registration failed";throw(O.includes("duplicate key")||O.includes("already exists"))&&(O.includes("email")?O="An account with this email already exists.":O.includes("phone")?O="An account with this phone number already exists.":O="An account with these credentials already exists."),new Error(O)}const k=await P.json();C=k.user||k}if(j.role==="delivery_partner"&&C){const P={userId:C.id,vehicleType:x.vehicleType,vehicleNumber:x.vehicleNumber,vehicleBrand:x.vehicleBrand,vehicleModel:x.vehicleModel,vehicleYear:x.vehicleYear,vehicleColor:x.vehicleColor,drivingLicense:x.drivingLicense,licenseExpiryDate:x.licenseExpiryDate,idProofType:x.idProofType,idProofNumber:x.idProofNumber,bankAccountNumber:x.bankAccountNumber,ifscCode:x.ifscCode,bankName:x.bankName,accountHolderName:x.accountHolderName,emergencyContactName:x.emergencyContactName,emergencyContactPhone:x.emergencyContactPhone,emergencyContactRelation:x.emergencyContactRelation,deliveryAreas:x.deliveryAreas||[],workingHours:x.workingHours,experience:x.experience,previousEmployment:x.previousEmployment,references:x.references,idProofUrl:x.idProofUrl,drivingLicenseUrl:x.drivingLicenseUrl||"",vehicleRegistrationUrl:x.vehicleRegistrationUrl,insuranceUrl:x.insuranceUrl,photoUrl:x.photoUrl};await fetch("/api/delivery-partners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)}),d({title:"Application submitted!",description:"Your delivery partner application is pending admin approval. You'll be notified once approved."}),o("/login")}else j.role==="shopkeeper"?(d({title:"Application submitted!",description:"Your shopkeeper account is pending admin approval. You'll be notified once approved."}),o("/login")):(d({title:"Account created successfully!",description:"Welcome to Siraha Bazaar. You are now logged in."}),o("/"))}catch(y){d({title:"Registration failed",description:y instanceof Error?y.message:"Failed to create account",variant:"destructive"})}finally{a(!1)}};return r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center py-12",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs(K,{children:[r.jsxs(re,{className:"text-center",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(ar,{className:"h-8 w-8 text-primary mr-2"}),r.jsx("span",{className:"text-2xl font-bold text-foreground",children:"Siraha Bazaar"})]}),r.jsx(ne,{className:"text-2xl",children:"Create Account"}),r.jsx("p",{className:"text-muted-foreground",children:"Join our local marketplace community"})]}),r.jsxs(G,{children:[r.jsx(Rr,{...h,children:r.jsxs("form",{onSubmit:h.handleSubmit(v),className:"space-y-4",children:[r.jsx(ae,{control:h.control,name:"fullName",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Full Name"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter your full name",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"email",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Email Address"}),r.jsx(he,{children:r.jsx(de,{type:"email",placeholder:"Enter your email",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"phone",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Phone Number"}),r.jsx(he,{children:r.jsx(de,{type:"tel",placeholder:"Enter your phone number",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"role",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Account Type"}),r.jsxs(dt,{onValueChange:x.onChange,defaultValue:x.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select account type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"customer",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Customer - Shop from local stores"]})}),r.jsx(oe,{value:"shopkeeper",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(ar,{className:"h-4 w-4 mr-2"}),"Shopkeeper - Sell your products"]})}),r.jsx(oe,{value:"delivery_partner",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ct,{className:"h-4 w-4 mr-2"}),"Delivery Partner - Deliver orders"]})})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"password",render:({field:x})=>{const y=x.value||"";let w=0,j="Very Weak",N="bg-red-500";return y.length>=8&&(w+=20),y.match(/[a-z]/)&&(w+=20),y.match(/[A-Z]/)&&(w+=20),y.match(/[0-9]/)&&(w+=20),y.match(/[^a-zA-Z0-9]/)&&(w+=20),w>=80?(j="Very Strong",N="bg-green-500"):w>=60?(j="Strong",N="bg-blue-500"):w>=40?(j="Medium",N="bg-yellow-500"):w>=20&&(j="Weak",N="bg-orange-500"),r.jsxs(se,{children:[r.jsx(ce,{children:"Password"}),r.jsx(he,{children:r.jsxs("div",{className:"relative",children:[r.jsx(de,{type:e?"text":"password",placeholder:"Create a password",...x}),r.jsx($,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>t(!e),children:e?r.jsx(k_,{className:"h-4 w-4"}):r.jsx(hs,{className:"h-4 w-4"})})]})}),y&&r.jsxs("div",{className:"mt-2 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Password Strength:"}),r.jsx("span",{className:`font-medium ${w>=80?"text-green-600":w>=60?"text-blue-600":w>=40?"text-yellow-600":w>=20?"text-orange-600":"text-red-600"}`,children:j})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:`h-full ${N} transition-all duration-500 ease-out rounded-full`,style:{width:`${w}%`}})}),r.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${y.length>=8?"bg-green-500":"bg-gray-300"} transition-colors duration-300`}),r.jsx("span",{children:"At least 8 characters"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${y.match(/[a-z]/)?"bg-green-500":"bg-gray-300"} transition-colors duration-300`}),r.jsx("span",{children:"Lowercase letter"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${y.match(/[A-Z]/)?"bg-green-500":"bg-gray-300"} transition-colors duration-300`}),r.jsx("span",{children:"Uppercase letter"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${y.match(/[0-9]/)?"bg-green-500":"bg-gray-300"} transition-colors duration-300`}),r.jsx("span",{children:"Number"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${y.match(/[^a-zA-Z0-9]/)?"bg-green-500":"bg-gray-300"} transition-colors duration-300`}),r.jsx("span",{children:"Special character"})]})]})]}),r.jsx(me,{})]})}}),r.jsx(ae,{control:h.control,name:"confirmPassword",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Confirm Password"}),r.jsx(he,{children:r.jsxs("div",{className:"relative",children:[r.jsx(de,{type:n?"text":"password",placeholder:"Confirm your password",...x}),r.jsx($,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>s(!n),children:n?r.jsx(k_,{className:"h-4 w-4"}):r.jsx(hs,{className:"h-4 w-4"})})]})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"address",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Address"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter your address",...x})}),r.jsx(me,{})]})}),m==="delivery_partner"&&r.jsxs("div",{className:"space-y-6 border rounded-lg p-6 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"p-3 bg-blue-600 rounded-full",children:r.jsx(Ct,{className:"h-8 w-8 text-white"})})}),r.jsx("h2",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200",children:"Delivery Partner Verification"}),r.jsx("p",{className:"text-blue-600 dark:text-blue-300 mt-2",children:"Complete all sections to join our delivery network"})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(Wr,{className:"h-5 w-5 mr-2"}),"Personal Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:h.control,name:"emergencyContactName",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Emergency Contact Name *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Full name of emergency contact",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"emergencyContactPhone",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Emergency Contact Phone *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Emergency contact phone number",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"emergencyContactRelation",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Relationship"}),r.jsxs(dt,{onValueChange:x.onChange,defaultValue:x.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select relationship"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"parent",children:"Parent"}),r.jsx(oe,{value:"spouse",children:"Spouse"}),r.jsx(oe,{value:"sibling",children:"Sibling"}),r.jsx(oe,{value:"friend",children:"Friend"}),r.jsx(oe,{value:"other",children:"Other"})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"experience",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Delivery Experience"}),r.jsxs(dt,{onValueChange:x.onChange,defaultValue:x.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select experience level"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"0-6months",children:"0-6 months"}),r.jsx(oe,{value:"6months-1year",children:"6 months - 1 year"}),r.jsx(oe,{value:"1-2years",children:"1-2 years"}),r.jsx(oe,{value:"2-5years",children:"2-5 years"}),r.jsx(oe,{value:"5years+",children:"5+ years"})]})]}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(Ct,{className:"h-5 w-5 mr-2"}),"Vehicle Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:h.control,name:"vehicleType",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Type *"}),r.jsxs(dt,{onValueChange:x.onChange,defaultValue:x.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select vehicle type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"motorcycle",children:"Motorcycle"}),r.jsx(oe,{value:"bicycle",children:"Bicycle"}),r.jsx(oe,{value:"scooter",children:"Scooter"}),r.jsx(oe,{value:"car",children:"Car"}),r.jsx(oe,{value:"van",children:"Van"})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"vehicleNumber",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Number *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., BA 12 PA 1234",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"vehicleBrand",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Brand"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., Honda, Yamaha, Hero",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"vehicleModel",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Model"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., Splendor, FZ, Activa",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"vehicleYear",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Year"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 2020, 2021, 2022",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"vehicleColor",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Color"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., Red, Blue, Black",...x})}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(Ws,{className:"h-5 w-5 mr-2"}),"License & Documents"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f!=="bicycle"&&r.jsxs(r.Fragment,{children:[r.jsx(ae,{control:h.control,name:"drivingLicense",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Driving License Number *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter license number",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"licenseExpiryDate",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"License Expiry Date"}),r.jsx(he,{children:r.jsx(de,{type:"date",...x})}),r.jsx(me,{})]})})]}),f==="bicycle"&&r.jsx("div",{className:"col-span-2 p-3 bg-green-50 dark:bg-green-950 rounded-lg border border-green-200 dark:border-green-800",children:r.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[r.jsx("strong",{children:"Note:"})," Driving license is not required for bicycle delivery partners."]})}),r.jsx(ae,{control:h.control,name:"idProofType",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"ID Proof Type *"}),r.jsxs(dt,{onValueChange:x.onChange,defaultValue:x.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select ID type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"citizenship",children:"Citizenship Certificate"}),r.jsx(oe,{value:"passport",children:"Passport"}),r.jsx(oe,{value:"voter_id",children:"Voter ID"}),r.jsx(oe,{value:"national_id",children:"National ID"})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"idProofNumber",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"ID Proof Number *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter ID number",...x})}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(Qr,{className:"h-5 w-5 mr-2"}),"Banking Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:h.control,name:"bankAccountNumber",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Bank Account Number *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter account number",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"ifscCode",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"IFSC Code *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter IFSC code",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"bankName",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Bank Name"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter bank name",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"accountHolderName",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Account Holder Name"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Name as per bank account",...x})}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(jt,{className:"h-5 w-5 mr-2"}),"Working Preferences"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(ae,{control:h.control,name:"workingHours",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Preferred Working Hours"}),r.jsxs(dt,{onValueChange:x.onChange,defaultValue:x.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select working hours"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"morning",children:"Morning (6AM - 12PM)"}),r.jsx(oe,{value:"afternoon",children:"Afternoon (12PM - 6PM)"}),r.jsx(oe,{value:"evening",children:"Evening (6PM - 12AM)"}),r.jsx(oe,{value:"full-time",children:"Full Time (6AM - 12AM)"}),r.jsx(oe,{value:"flexible",children:"Flexible Hours"})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"previousEmployment",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Previous Employment"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Describe your previous work experience (optional)",...x})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"references",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"References"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Provide references if any (name, phone, relationship)",...x})}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[r.jsx(Hs,{className:"h-5 w-5 mr-2"}),"Document Uploads"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(ae,{control:h.control,name:"idProofUrl",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"ID Proof Document *"}),r.jsx(he,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Hs,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"mt-4",children:[r.jsx(de,{type:"file",accept:"image/*,.pdf",onChange:y=>{var j;const w=(j=y.target.files)==null?void 0:j[0];w&&x.onChange(`/uploads/id_${Date.now()}.${w.name.split(".").pop()}`)},className:"hidden",id:"idProof"}),r.jsx("label",{htmlFor:"idProof",className:"cursor-pointer text-sm font-medium text-primary hover:text-primary/80",children:"Upload Citizenship or National ID"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, PDF up to 10MB"})]})]}),x.value&&r.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[r.jsx(yt,{className:"h-4 w-4 mr-1"}),"Document uploaded"]})]})}),r.jsx(me,{})]})}),f!=="bicycle"&&r.jsx(ae,{control:h.control,name:"drivingLicenseUrl",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Driving License Document"}),r.jsx(he,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Hs,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"mt-4",children:[r.jsx(de,{type:"file",accept:"image/*,.pdf",onChange:y=>{var j;const w=(j=y.target.files)==null?void 0:j[0];w&&x.onChange(`/uploads/license_${Date.now()}.${w.name.split(".").pop()}`)},className:"hidden",id:"drivingLicense"}),r.jsx("label",{htmlFor:"drivingLicense",className:"cursor-pointer text-sm font-medium text-primary hover:text-primary/80",children:"Upload Driving License"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, PDF up to 10MB"})]})]}),x.value&&r.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[r.jsx(yt,{className:"h-4 w-4 mr-1"}),"Document uploaded"]})]})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"vehicleRegistrationUrl",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Registration"}),r.jsx(he,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Hs,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"mt-4",children:[r.jsx(de,{type:"file",accept:"image/*,.pdf",onChange:y=>{var j;const w=(j=y.target.files)==null?void 0:j[0];w&&x.onChange(`/uploads/registration_${Date.now()}.${w.name.split(".").pop()}`)},className:"hidden",id:"vehicleRegistration"}),r.jsx("label",{htmlFor:"vehicleRegistration",className:"cursor-pointer text-sm font-medium text-primary hover:text-primary/80",children:"Upload Vehicle Registration"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, PDF up to 10MB"})]})]}),x.value&&r.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[r.jsx(yt,{className:"h-4 w-4 mr-1"}),"Document uploaded"]})]})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"insuranceUrl",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Insurance"}),r.jsx(he,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Hs,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"mt-4",children:[r.jsx(de,{type:"file",accept:"image/*,.pdf",onChange:y=>{var j;const w=(j=y.target.files)==null?void 0:j[0];w&&x.onChange(`/uploads/insurance_${Date.now()}.${w.name.split(".").pop()}`)},className:"hidden",id:"insurance"}),r.jsx("label",{htmlFor:"insurance",className:"cursor-pointer text-sm font-medium text-primary hover:text-primary/80",children:"Upload Insurance Document"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG, PDF up to 10MB"})]})]}),x.value&&r.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[r.jsx(yt,{className:"h-4 w-4 mr-1"}),"Document uploaded"]})]})}),r.jsx(me,{})]})}),r.jsx(ae,{control:h.control,name:"photoUrl",render:({field:x})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Profile Photo"}),r.jsx(he,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Hs,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"mt-4",children:[r.jsx(de,{type:"file",accept:"image/*",onChange:y=>{var j;const w=(j=y.target.files)==null?void 0:j[0];w&&x.onChange(`/uploads/photo_${Date.now()}.${w.name.split(".").pop()}`)},className:"hidden",id:"photo"}),r.jsx("label",{htmlFor:"photo",className:"cursor-pointer text-sm font-medium text-primary hover:text-primary/80",children:"Upload Profile Photo"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG, JPG up to 5MB"})]})]}),x.value&&r.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[r.jsx(yt,{className:"h-4 w-4 mr-1"}),"Photo uploaded"]})]})}),r.jsx(me,{})]})})]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:r.jsx(ae,{control:h.control,name:"termsAccepted",render:({field:x})=>r.jsxs(se,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(he,{children:r.jsx(fc,{checked:x.value,onCheckedChange:x.onChange})}),r.jsxs("div",{className:"space-y-1 leading-none",children:[r.jsx(ce,{children:"I accept the terms and conditions *"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"I agree to provide delivery services according to platform guidelines, maintain vehicle in good condition, and follow all safety protocols. I understand that my application will be reviewed and I may be contacted for additional verification."})]}),r.jsx(me,{})]})})}),r.jsx("div",{className:"bg-green-50 dark:bg-green-950 p-4 rounded-lg border border-green-200 dark:border-green-800",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(yt,{className:"h-5 w-5 text-green-600 mt-0.5"}),r.jsxs("div",{className:"text-sm text-green-800 dark:text-green-200",children:[r.jsx("p",{className:"font-medium mb-2",children:"What happens next?"}),r.jsxs("ul",{className:"space-y-1 text-xs",children:[r.jsx("li",{children:" Your application will be reviewed within 24-48 hours"}),r.jsx("li",{children:" You'll receive an email notification about your application status"}),r.jsx("li",{children:" Upon approval, you can start accepting delivery orders immediately"}),r.jsx("li",{children:" You'll have access to our delivery partner dashboard and training materials"})]})]})]})})]}),r.jsx($,{type:"submit",className:"w-full btn-primary",disabled:i,children:i?"Creating account...":"Create Account"})]})}),r.jsx("div",{className:"mt-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Already have an account? "}),r.jsx(Ae,{href:"/login",className:"text-primary hover:underline font-medium",children:"Sign in"})]})}),m==="shopkeeper"&&r.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[r.jsx("strong",{children:"Shopkeeper Benefits:"}),r.jsx("br",{})," Create and manage your online store",r.jsx("br",{})," Reach customers in your local area",r.jsx("br",{})," Track orders and inventory",r.jsx("br",{})," No setup fees - start selling immediately"]})}),m==="delivery_partner"&&r.jsx("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:r.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[r.jsx("strong",{children:"Delivery Partner Benefits:"}),r.jsx("br",{})," Flexible working hours - work when you want",r.jsx("br",{})," Competitive delivery fees and bonuses",r.jsx("br",{})," Weekly payments directly to your account",r.jsx("br",{})," Support team available 24/7 for assistance",r.jsx("br",{})," Get started immediately after approval"]})})]})]})})})}const uxe=ee.object({email:ee.string().email("Please enter a valid email address")});function hxe(){const[e,t]=b.useState(!1),[n,s]=b.useState(!1),[,i]=Jr(),{toast:a}=ft(),o=fn({resolver:pn(uxe),defaultValues:{email:""}}),l=async c=>{t(!0);try{console.log("Attempting to send password reset email to:",c.email);const d=await fetch("/api/auth/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});console.log("Response status:",d.status),console.log("Response ok:",d.ok);const h=await d.json();console.log("Response data:",h),d.ok?(s(!0),a({title:"Password reset email sent",description:"Check your email for reset instructions."})):a({title:"Error",description:h.error||h.message||"Failed to send reset email. Please try again.",variant:"destructive"})}catch(d){console.error("Password reset error:",d),a({title:"Error",description:`Something went wrong: ${d instanceof Error?d.message:"Unknown error"}. Please try again.`,variant:"destructive"})}finally{t(!1)}};return n?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:r.jsxs(K,{className:"w-full max-w-md",children:[r.jsxs(re,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:r.jsx(yt,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),r.jsx(ne,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Email Sent!"})]}),r.jsxs(G,{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"We've sent password reset instructions to your email address."}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Check your inbox and spam folder. The link will expire in 1 hour."})]}),r.jsxs(ii,{children:[r.jsx(Md,{className:"h-4 w-4"}),r.jsx(ai,{children:"Didn't receive the email? Check your spam folder or try again in a few minutes."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx($,{onClick:()=>s(!1),variant:"outline",className:"w-full",children:"Send Another Email"}),r.jsx($,{onClick:()=>i("/login"),className:"w-full",children:"Back to Login"})]})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:r.jsxs(K,{className:"w-full max-w-md",children:[r.jsxs(re,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:r.jsx(Md,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),r.jsx(ne,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Forgot Password?"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Enter your email address and we'll send you a link to reset your password."})]}),r.jsxs(G,{children:[r.jsx(Rr,{...o,children:r.jsxs("form",{onSubmit:o.handleSubmit(l),className:"space-y-6",children:[r.jsx(ae,{control:o.control,name:"email",render:({field:c})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Email Address"}),r.jsx(he,{children:r.jsx(de,{type:"email",placeholder:"Enter your email address",...c})}),r.jsx(me,{})]})}),r.jsx($,{type:"submit",className:"w-full",disabled:e,children:e?"Sending...":"Send Reset Email"})]})}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:r.jsx("div",{className:"text-center",children:r.jsx(Ae,{href:"/login",children:r.jsxs($,{variant:"ghost",className:"text-sm",children:[r.jsx(bc,{className:"w-4 h-4 mr-2"}),"Back to Login"]})})})}),r.jsxs(ii,{className:"mt-4",children:[r.jsx(Nr,{className:"h-4 w-4"}),r.jsx(ai,{className:"text-xs",children:"For security reasons, we'll send reset instructions even if the email isn't registered with us."})]})]})]})})}var RT="Collapsible",[mxe,PUe]=xn(RT),[fxe,$T]=mxe(RT),d7=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:i,disabled:a,onOpenChange:o,...l}=e,[c=!1,d]=Oi({prop:s,defaultProp:i,onChange:o});return r.jsx(fxe,{scope:n,disabled:a,contentId:ia(),open:c,onOpenToggle:b.useCallback(()=>d(h=>!h),[d]),children:r.jsx(Je.div,{"data-state":zT(c),"data-disabled":a?"":void 0,...l,ref:t})})});d7.displayName=RT;var u7="CollapsibleTrigger",h7=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,i=$T(u7,n);return r.jsx(Je.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":zT(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...s,ref:t,onClick:$e(e.onClick,i.onOpenToggle)})});h7.displayName=u7;var FT="CollapsibleContent",m7=b.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=$T(FT,e.__scopeCollapsible);return r.jsx(Mn,{present:n||i.open,children:({present:a})=>r.jsx(pxe,{...s,ref:t,present:a})})});m7.displayName=FT;var pxe=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:i,...a}=e,o=$T(FT,n),[l,c]=b.useState(s),d=b.useRef(null),h=Nt(t,d),m=b.useRef(0),f=m.current,v=b.useRef(0),p=v.current,x=o.open||l,y=b.useRef(x),w=b.useRef(void 0);return b.useEffect(()=>{const j=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(j)},[]),an(()=>{const j=d.current;if(j){w.current=w.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const N=j.getBoundingClientRect();m.current=N.height,v.current=N.width,y.current||(j.style.transitionDuration=w.current.transitionDuration,j.style.animationName=w.current.animationName),c(s)}},[o.open,s]),r.jsx(Je.div,{"data-state":zT(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!x,...a,ref:h,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:x&&i})});function zT(e){return e?"open":"closed"}var xxe=d7;const gxe=xxe,vxe=h7,yxe=m7;function zD(){const[e]=Jr(),t=e.includes("/restaurants"),[n,s]=b.useState(""),[i,a]=b.useState(t?"restaurant":"all"),[o,l]=b.useState("all"),[c,d]=b.useState("all"),[h,m]=b.useState("all"),[f,v]=b.useState(null),[p,x]=b.useState(!1);b.useState([]);const[y,w]=b.useState(!1),[j,N]=b.useState(!1),{toast:C}=ft(),{data:P=[],isLoading:k,error:_,refetch:O}=Le({queryKey:["/api/stores"],retry:3,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0});_&&console.error("Stores loading failed:",{error:_,message:_ instanceof Error?_.message:"Unknown error",timestamp:new Date().toISOString()}),b.useEffect(()=>{qo().then(D=>{v(D),x(!0)}).catch(()=>{})},[]);const M=Array.from(new Set(P.filter(D=>D.storeType==="restaurant"&&D.cuisineType).map(D=>D.cuisineType))).filter(Boolean),T=P.filter(D=>{var z,H;if(t){if(D.storeType!=="restaurant")return!1}else if(D.storeType==="restaurant")return!1;const W=D.name.toLowerCase().includes(n.toLowerCase())||((z=D.description)==null?void 0:z.toLowerCase().includes(n.toLowerCase()))||D.address.toLowerCase().includes(n.toLowerCase())||((H=D.cuisineType)==null?void 0:H.toLowerCase().includes(n.toLowerCase())),U=i==="all"||D.storeType===i,Q=o==="all"||D.cuisineType===o,q=c==="all"||c==="delivery"&&D.isDeliveryAvailable||c==="pickup"&&!D.isDeliveryAvailable,B=h==="all"||h==="4+"&&parseFloat(D.rating)>=4||h==="3+"&&parseFloat(D.rating)>=3;return W&&U&&Q&&q&&B}),I=(D,W,U,Q)=>{const B=(U-D)*Math.PI/180,z=(Q-W)*Math.PI/180,H=Math.sin(B/2)*Math.sin(B/2)+Math.cos(D*Math.PI/180)*Math.cos(U*Math.PI/180)*Math.sin(z/2)*Math.sin(z/2);return 6371*(2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H)))},A=T.map(D=>{const W=f&&D.latitude&&D.longitude?I(f.latitude,f.longitude,parseFloat(D.latitude),parseFloat(D.longitude)):0;return{...D,distance:W}}).sort((D,W)=>D.distance-W.distance),V=async()=>{try{const D=await qo();v(D),x(!0),w(!0),C({title:"Location enabled",description:"Stores will now show distance from your location"})}catch{C({title:"Location access denied",description:"Please allow location access to see distances",variant:"destructive"})}};return k?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading stores..."})]})}):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx(K,{className:"mb-8",children:r.jsx(G,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(de,{placeholder:t?"Search restaurants...":"Search stores...",value:n,onChange:D=>s(D.target.value),className:"pl-10"})]}),r.jsxs(gxe,{open:j,onOpenChange:N,children:[r.jsx(vxe,{asChild:!0,children:r.jsxs($,{variant:"outline",className:"w-full md:w-auto",children:[r.jsx(po,{className:"h-4 w-4 mr-2"}),"Filters",j?r.jsx(Fr,{className:"h-4 w-4 ml-2"}):null]})}),r.jsx(yxe,{className:"mt-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[!t&&r.jsxs(dt,{value:i,onValueChange:a,children:[r.jsxs(ot,{children:[r.jsx(ar,{className:"h-4 w-4 mr-2"}),r.jsx(ut,{placeholder:"All Stores"})]}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Stores"}),r.jsx(oe,{value:"retail",children:"Retail Stores"})]})]}),(t||i==="restaurant")&&M.length>0&&r.jsxs(dt,{value:o,onValueChange:l,children:[r.jsxs(ot,{children:[r.jsx(Da,{className:"h-4 w-4 mr-2"}),r.jsx(ut,{placeholder:"All Cuisines"})]}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Cuisines"}),M.map(D=>r.jsx(oe,{value:D,children:D},D))]})]}),r.jsxs(dt,{value:c,onValueChange:d,children:[r.jsxs(ot,{children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),r.jsx(ut,{placeholder:"Delivery Options"})]}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Options"}),r.jsx(oe,{value:"delivery",children:"Delivery Available"}),r.jsx(oe,{value:"pickup",children:"Pickup Only"})]})]}),r.jsxs(dt,{value:h,onValueChange:m,children:[r.jsxs(ot,{children:[r.jsx(po,{className:"h-4 w-4 mr-2"}),r.jsx(ut,{placeholder:"Minimum Rating"})]}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Ratings"}),r.jsx(oe,{value:"4+",children:"4.0+ Stars"}),r.jsx(oe,{value:"3+",children:"3.0+ Stars"})]})]})]})})]}),!p&&r.jsxs($,{variant:"outline",onClick:V,children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),"Enable Location"]})]}),p&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Location enabled - stores sorted by distance"})]})]})})}),r.jsx("div",{className:"mb-6",children:r.jsx("h2",{className:"text-xl font-semibold",children:t?"Restaurants":"Stores"})}),_?r.jsx(K,{children:r.jsxs(G,{className:"pt-6 text-center",children:[r.jsxs(ii,{className:"max-w-md mx-auto mb-6",children:[r.jsx(Nr,{className:"h-4 w-4"}),r.jsx(ai,{children:"Failed to load stores. Please try again."})]}),r.jsxs($,{onClick:()=>O(),variant:"outline",disabled:k,children:[r.jsx(Ms,{className:`mr-2 h-4 w-4 ${k?"animate-spin":""}`}),"Retry Loading Stores"]})]})}):k?r.jsx("div",{className:`grid gap-2 sm:gap-4 ${t||i==="restaurant"?"grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2":"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"}`,children:Array.from({length:6}).map((D,W)=>r.jsx(K,{className:"animate-pulse",children:r.jsxs(G,{className:"p-3",children:[r.jsx("div",{className:"bg-gray-200 h-20 rounded-md mb-2"}),r.jsx("div",{className:"bg-gray-200 h-3 rounded mb-1"}),r.jsx("div",{className:"bg-gray-200 h-2 rounded w-2/3 mb-1"}),r.jsx("div",{className:"bg-gray-200 h-2 rounded w-1/2"})]})},W))}):A.length>0?r.jsx("div",{className:`grid gap-2 sm:gap-4 ${t||i==="restaurant"?"grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2":"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"}`,children:A.map(D=>r.jsx(DV,{store:D,showDistance:p},D.id))}):r.jsx(K,{children:r.jsxs(G,{className:"pt-6 text-center",children:[r.jsxs("div",{className:"text-muted-foreground mb-4",children:[r.jsx(Qn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:t?"No restaurants found":"No stores found"}),r.jsx("p",{children:"Try adjusting your search criteria or filters to find what you're looking for"})]}),r.jsx($,{variant:"outline",onClick:()=>{s(""),a(t?"restaurant":"all"),l("all"),d("all"),m("all")},children:"Clear All Filters"})]})})]})})}var BT="Switch",[jxe,CUe]=xn(BT),[bxe,wxe]=jxe(BT),f7=b.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:h,...m}=e,[f,v]=b.useState(null),p=Nt(t,N=>v(N)),x=b.useRef(!1),y=f?h||!!f.closest("form"):!0,[w=!1,j]=Oi({prop:i,defaultProp:a,onChange:d});return r.jsxs(bxe,{scope:n,checked:w,disabled:l,children:[r.jsx(Je.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":g7(w),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:p,onClick:$e(e.onClick,N=>{j(C=>!C),y&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})}),y&&r.jsx(Nxe,{control:f,bubbles:!x.current,name:s,value:c,checked:w,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});f7.displayName=BT;var p7="SwitchThumb",x7=b.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,i=wxe(p7,n);return r.jsx(Je.span,{"data-state":g7(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})});x7.displayName=p7;var Nxe=e=>{const{control:t,checked:n,bubbles:s=!0,...i}=e,a=b.useRef(null),o=wg(n),l=mg(t);return b.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&m){const f=new Event("click",{bubbles:s});m.call(c,n),c.dispatchEvent(f)}},[o,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function g7(e){return e?"checked":"unchecked"}var v7=f7,Sxe=x7;const jn=b.forwardRef(({className:e,...t},n)=>r.jsx(v7,{className:Ve("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:r.jsx(Sxe,{className:Ve("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));jn.displayName=v7.displayName;function _xe(){const[e,t]=b.useState(null),[n,s]=b.useState(!1),[i,a]=b.useState(!0),[o,l]=b.useState(null);b.useEffect(()=>{c()},[]);const c=async()=>{try{const m=fT();s(m),m||l("Notifications are not supported in this browser")}catch(m){console.error("Error checking notification support:",m),l("Failed to check notification support")}finally{a(!1)}};return{token:e,isSupported:n,isLoading:i,error:o,requestPermission:async()=>{try{if(!n)return!1;if(Notification.permission==="granted")return!0;const m=await Notification.requestPermission();return console.log("Notification permission:",m),m==="granted"?(new Notification("Notifications Enabled!",{body:"You will now receive push notifications from Siraha Bazaar",icon:"/favicon.ico",tag:"permission-granted"}),!0):m==="denied"?(l("Notification permission denied. Please enable notifications in your browser settings."),!1):(l("Notification permission not granted"),!1)}catch(m){return console.error("Error requesting permission:",m),l("Failed to request notification permission"),!1}},saveTokenToServer:async m=>{try{return await mT(m),!0}catch(f){return console.error("Error setting up notifications:",f),l("Failed to setup notifications"),!1}}}}function Pxe(e){const t=_xe(),[n,s]=b.useState(!1);b.useEffect(()=>{e&&t.token&&!n&&i()},[e,t.token,n]);const i=async()=>{if(!(!e||!t.isSupported))try{await t.requestPermission()&&await t.saveTokenToServer(e)&&(s(!0),console.log("Push notifications setup completed"))}catch(a){console.error("Error setting up push notifications:",a)}};return{...t,isSetup:n,setupPushNotifications:i}}function Cxe(){const{user:e}=el(),{isSupported:t,isLoading:n,error:s,token:i,isSetup:a,requestPermission:o,setupPushNotifications:l}=Pxe(e==null?void 0:e.id),[c,d]=b.useState({orderUpdates:!0,deliveryAlerts:!0,promotions:!1,newProducts:!1}),h=f=>{d(v=>({...v,[f]:!v[f]}))},m=async()=>{if(e!=null&&e.id)try{await o()&&await l()}catch(f){console.error("Error enabling push notifications:",f)}};return n?r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}),r.jsx("span",{children:"Loading notification settings..."})]})})}):r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qt,{className:"h-5 w-5"}),r.jsx(ne,{children:"Push Notifications"})]}),r.jsx(kt,{children:"Manage your notification preferences for order updates, promotions, and more."})]}),r.jsxs(G,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[r.jsx(Jd,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Browser Support:"}),t?r.jsxs(ue,{variant:"secondary",className:"bg-green-100 text-green-800",children:[r.jsx(yt,{className:"h-3 w-3 mr-1"}),"Supported"]}):r.jsxs(ue,{variant:"destructive",children:[r.jsx(hM,{className:"h-3 w-3 mr-1"}),"Not Supported"]})]}),s&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(Nr,{className:"h-4 w-4 text-red-600"}),r.jsx("span",{className:"text-sm text-red-700",children:s})]}),t&&!s&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Push Notifications"}),r.jsx("p",{className:"text-sm text-gray-600",children:a?"You will receive push notifications for selected events":"Enable push notifications to stay updated"})]}),r.jsx("div",{className:"flex items-center gap-2",children:a?r.jsxs(ue,{variant:"secondary",className:"bg-green-100 text-green-800",children:[r.jsx(yt,{className:"h-3 w-3 mr-1"}),"Enabled"]}):r.jsx($,{onClick:m,size:"sm",children:"Enable Notifications"})})]}),a&&r.jsxs("div",{className:"space-y-4 border-t pt-4",children:[r.jsx("h4",{className:"font-medium",children:"Notification Types"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"orderUpdates",className:"font-medium",children:"Order Updates"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about order status changes"})]}),r.jsx(jn,{id:"orderUpdates",checked:c.orderUpdates,onCheckedChange:()=>h("orderUpdates")})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"deliveryAlerts",className:"font-medium",children:"Delivery Alerts"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Real-time updates on delivery progress"})]}),r.jsx(jn,{id:"deliveryAlerts",checked:c.deliveryAlerts,onCheckedChange:()=>h("deliveryAlerts")})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"promotions",className:"font-medium",children:"Promotions & Offers"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Special deals and discount notifications"})]}),r.jsx(jn,{id:"promotions",checked:c.promotions,onCheckedChange:()=>h("promotions")})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"newProducts",className:"font-medium",children:"New Products"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Updates about new products from your favorite stores"})]}),r.jsx(jn,{id:"newProducts",checked:c.newProducts,onCheckedChange:()=>h("newProducts")})]})]})]}),!1]}),!t&&r.jsxs("div",{className:"text-center py-6",children:[r.jsx(hM,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),r.jsx("h4",{className:"font-medium mb-2",children:"Push Notifications Not Available"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Your browser doesn't support push notifications. Try using a modern browser like Chrome, Firefox, or Safari."})]})]})]})}var y7=["PageUp","PageDown"],j7=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],b7={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Rm="Slider",[d2,kxe,Txe]=cg(Rm),[w7,kUe]=xn(Rm,[Txe]),[Axe,Hb]=w7(Rm),N7=b.forwardRef((e,t)=>{const{name:n,min:s=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:h,onValueChange:m=()=>{},onValueCommit:f=()=>{},inverted:v=!1,form:p,...x}=e,y=b.useRef(new Set),w=b.useRef(0),N=o==="horizontal"?Exe:Oxe,[C=[],P]=Oi({prop:h,defaultProp:d,onChange:I=>{var V;(V=[...y.current][w.current])==null||V.focus(),m(I)}}),k=b.useRef(C);function _(I){const A=Rxe(C,I);T(I,A)}function O(I){T(I,w.current)}function M(){const I=k.current[w.current];C[w.current]!==I&&f(C)}function T(I,A,{commit:V}={commit:!1}){const D=Bxe(a),W=Vxe(Math.round((I-s)/a)*a+s,D),U=Kp(W,[s,i]);P((Q=[])=>{const q=Ixe(Q,U,A);if(zxe(q,c*a)){w.current=q.indexOf(U);const B=String(q)!==String(Q);return B&&V&&f(q),B?q:Q}else return Q})}return r.jsx(Axe,{scope:e.__scopeSlider,name:n,disabled:l,min:s,max:i,valueIndexToChangeRef:w,thumbs:y.current,values:C,orientation:o,form:p,children:r.jsx(d2.Provider,{scope:e.__scopeSlider,children:r.jsx(d2.Slot,{scope:e.__scopeSlider,children:r.jsx(N,{"aria-disabled":l,"data-disabled":l?"":void 0,...x,ref:t,onPointerDown:$e(x.onPointerDown,()=>{l||(k.current=C)}),min:s,max:i,inverted:v,onSlideStart:l?void 0:_,onSlideMove:l?void 0:O,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&T(s,0,{commit:!0}),onEndKeyDown:()=>!l&&T(i,C.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:A})=>{if(!l){const W=y7.includes(I.key)||I.shiftKey&&j7.includes(I.key)?10:1,U=w.current,Q=C[U],q=a*W*A;T(Q+q,U,{commit:!0})}}})})})})});N7.displayName=Rm;var[S7,_7]=w7(Rm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Exe=b.forwardRef((e,t)=>{const{min:n,max:s,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...h}=e,[m,f]=b.useState(null),v=Nt(t,N=>f(N)),p=b.useRef(void 0),x=eu(i),y=x==="ltr",w=y&&!a||!y&&a;function j(N){const C=p.current||m.getBoundingClientRect(),P=[0,C.width],_=VT(P,w?[n,s]:[s,n]);return p.current=C,_(N-C.left)}return r.jsx(S7,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:r.jsx(P7,{dir:x,"data-orientation":"horizontal",...h,ref:v,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const C=j(N.clientX);o==null||o(C)},onSlideMove:N=>{const C=j(N.clientX);l==null||l(C)},onSlideEnd:()=>{p.current=void 0,c==null||c()},onStepKeyDown:N=>{const P=b7[w?"from-left":"from-right"].includes(N.key);d==null||d({event:N,direction:P?-1:1})}})})}),Oxe=b.forwardRef((e,t)=>{const{min:n,max:s,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,h=b.useRef(null),m=Nt(t,h),f=b.useRef(void 0),v=!i;function p(x){const y=f.current||h.current.getBoundingClientRect(),w=[0,y.height],N=VT(w,v?[s,n]:[n,s]);return f.current=y,N(x-y.top)}return r.jsx(S7,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:r.jsx(P7,{"data-orientation":"vertical",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const y=p(x.clientY);a==null||a(y)},onSlideMove:x=>{const y=p(x.clientY);o==null||o(y)},onSlideEnd:()=>{f.current=void 0,l==null||l()},onStepKeyDown:x=>{const w=b7[v?"from-bottom":"from-top"].includes(x.key);c==null||c({event:x,direction:w?-1:1})}})})}),P7=b.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,h=Hb(Rm,n);return r.jsx(Je.span,{...d,ref:t,onKeyDown:$e(e.onKeyDown,m=>{m.key==="Home"?(o(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):y7.concat(j7).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:$e(e.onPointerDown,m=>{const f=m.target;f.setPointerCapture(m.pointerId),m.preventDefault(),h.thumbs.has(f)?f.focus():s(m)}),onPointerMove:$e(e.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&i(m)}),onPointerUp:$e(e.onPointerUp,m=>{const f=m.target;f.hasPointerCapture(m.pointerId)&&(f.releasePointerCapture(m.pointerId),a(m))})})}),C7="SliderTrack",k7=b.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,i=Hb(C7,n);return r.jsx(Je.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:t})});k7.displayName=C7;var u2="SliderRange",T7=b.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,i=Hb(u2,n),a=_7(u2,n),o=b.useRef(null),l=Nt(t,o),c=i.values.length,d=i.values.map(f=>E7(f,i.min,i.max)),h=c>1?Math.min(...d):0,m=100-Math.max(...d);return r.jsx(Je.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:l,style:{...e.style,[a.startEdge]:h+"%",[a.endEdge]:m+"%"}})});T7.displayName=u2;var h2="SliderThumb",A7=b.forwardRef((e,t)=>{const n=kxe(e.__scopeSlider),[s,i]=b.useState(null),a=Nt(t,l=>i(l)),o=b.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return r.jsx(Mxe,{...e,ref:a,index:o})}),Mxe=b.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:i,...a}=e,o=Hb(h2,n),l=_7(h2,n),[c,d]=b.useState(null),h=Nt(t,j=>d(j)),m=c?o.form||!!c.closest("form"):!0,f=mg(c),v=o.values[s],p=v===void 0?0:E7(v,o.min,o.max),x=Lxe(s,o.values.length),y=f==null?void 0:f[l.size],w=y?$xe(y,p,l.direction):0;return b.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${p}% + ${w}px)`},children:[r.jsx(d2.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(Je.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":o.min,"aria-valuenow":v,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:h,style:v===void 0?{display:"none"}:e.style,onFocus:$e(e.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),m&&r.jsx(Dxe,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:v},s)]})});A7.displayName=h2;var Dxe=e=>{const{value:t,...n}=e,s=b.useRef(null),i=wg(t);return b.useEffect(()=>{const a=s.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==t&&c){const d=new Event("input",{bubbles:!0});c.call(a,t),a.dispatchEvent(d)}},[i,t]),r.jsx("input",{style:{display:"none"},...n,ref:s,defaultValue:t})};function Ixe(e=[],t,n){const s=[...e];return s[n]=t,s.sort((i,a)=>i-a)}function E7(e,t,n){const a=100/(n-t)*(e-t);return Kp(a,[0,100])}function Lxe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Rxe(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),s=Math.min(...n);return n.indexOf(s)}function $xe(e,t,n){const s=e/2,a=VT([0,50],[0,s]);return(s-a(t)*n)*n}function Fxe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function zxe(e,t){if(t>0){const n=Fxe(e);return Math.min(...n)>=t}return!0}function VT(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function Bxe(e){return(String(e).split(".")[1]||"").length}function Vxe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var O7=N7,Uxe=k7,Wxe=T7,Hxe=A7;const M7=b.forwardRef(({className:e,...t},n)=>r.jsxs(O7,{ref:n,className:Ve("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(Uxe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Wxe,{className:"absolute h-full bg-primary"})}),r.jsx(Hxe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));M7.displayName=O7.displayName;function qxe(){return b.useState(!1),b.useState(tr.isEnabled()),b.useState(tr.getVolume()*100),ft(),null}function Kxe(){const{user:e,logout:t}=Gt(),{data:n,isLoading:s}=Le({queryKey:["/api/orders/customer",e==null?void 0:e.id],enabled:!!(e!=null&&e.id)}),{data:i,isLoading:a}=Le({queryKey:["/api/stores/owner",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return[];const c=await fetch(`/api/stores/owner/${e.id}`);if(!c.ok)throw new Error("Failed to fetch stores");return c.json()},enabled:!!(e!=null&&e.id)&&(e==null?void 0:e.role)==="shopkeeper"});if(!e)return r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to view your account"}),r.jsx(Ae,{href:"/login",children:r.jsx($,{children:"Login"})})]})});const o=c=>c.split(" ").map(d=>d[0]).join("").toUpperCase().slice(0,2),l=c=>{switch(c){case"delivered":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"processing":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return r.jsx("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(K,{children:[r.jsxs(re,{className:"text-center",children:[r.jsx(xo,{className:"w-20 h-20 mx-auto mb-4",children:r.jsx(go,{className:"text-lg",children:o(e.fullName)})}),r.jsx(ne,{className:"text-xl",children:e.fullName}),r.jsx(kt,{children:r.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[r.jsx(ue,{variant:"secondary",className:"capitalize",children:e.role}),e.role==="shopkeeper"&&e.status&&r.jsx("div",{className:"flex items-center space-x-2",children:e.status==="active"?r.jsxs(ue,{variant:"default",className:"bg-green-100 text-green-800",children:[r.jsx(Ed,{className:"h-3 w-3 mr-1"}),"Approved"]}):e.status==="pending"?r.jsxs(ue,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Pending Approval"]}):e.status==="suspended"?r.jsxs(ue,{variant:"destructive",className:"bg-red-100 text-red-800",children:[r.jsx(Nr,{className:"h-3 w-3 mr-1"}),"Suspended"]}):e.status==="rejected"?r.jsxs(ue,{variant:"destructive",className:"bg-red-100 text-red-800",children:[r.jsx(Nr,{className:"h-3 w-3 mr-1"}),"Rejected"]}):r.jsxs(ue,{variant:"secondary",className:"bg-gray-100 text-gray-800",children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Under Review"]})})]})})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Md,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:e.email})]}),e.phone&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:e.phone})]}),e.address&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Re,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:e.address})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ql,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("span",{className:"text-sm",children:["Joined ",new Date(e.createdAt).toLocaleDateString()]})]}),r.jsx(hn,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ae,{href:"/customer-dashboard",children:r.jsxs($,{variant:"outline",className:"w-full justify-start",children:[r.jsx(Id,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})}),e.role==="shopkeeper"&&r.jsx(Ae,{href:"/shopkeeper-dashboard",children:r.jsxs($,{variant:"outline",className:"w-full justify-start",children:[r.jsx(ar,{className:"h-4 w-4 mr-2"}),"Seller Dashboard"]})}),r.jsx(Ae,{href:"/delete-account",children:r.jsxs($,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700",children:[r.jsx(ei,{className:"h-4 w-4 mr-2"}),"Delete Account"]})}),r.jsx($,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700",onClick:t,children:"Logout"})]})]})]})}),r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.role==="shopkeeper"&&e.status!=="active"&&r.jsxs(K,{className:"border-orange-200 bg-orange-50",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center space-x-2 text-orange-800",children:[r.jsx(Nr,{className:"h-5 w-5"}),r.jsx("span",{children:"Account Approval Status"})]})}),r.jsxs(G,{children:[e.status==="pending"&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(jt,{className:"h-5 w-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-orange-800",children:"Your seller account is under review"}),r.jsx("p",{className:"text-sm text-orange-700",children:"Our admin team is reviewing your application. This process typically takes 1-2 business days."})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-orange-100 rounded-lg",children:r.jsxs("p",{className:"text-sm text-orange-800",children:[r.jsx("strong",{children:"What's next?"})," You'll receive an email notification once your account is approved. Until then, you can browse the marketplace but cannot create stores or add products."]})})]}),e.status==="suspended"&&r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Nr,{className:"h-5 w-5 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Your seller account has been suspended"}),r.jsx("p",{className:"text-sm text-red-700",children:"Please contact our support team for more information about your account status."})]})]})}),e.status==="rejected"&&r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Nr,{className:"h-5 w-5 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Your seller application was not approved"}),r.jsx("p",{className:"text-sm text-red-700",children:"You can reapply by contacting our support team or updating your business information."})]})]})})]})]}),r.jsx(Cxe,{}),r.jsx(qxe,{}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center space-x-2",children:[r.jsx(Vo,{className:"h-5 w-5"}),r.jsx("span",{children:"Recent Orders"})]}),r.jsx(kt,{children:"Your order history and status"})]}),r.jsx(G,{children:s?r.jsx("div",{className:"space-y-3",children:[...Array(3)].map((c,d)=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},d))}):n&&Array.isArray(n)&&n.length>0?r.jsxs("div",{className:"space-y-4",children:[n.slice(0,5).map(c=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium",children:["Order #",c.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(c.createdAt).toLocaleDateString()})]}),r.jsx(ue,{className:l(c.status),children:c.status})]}),r.jsxs("div",{className:"mt-2",children:[r.jsxs("p",{className:"text-sm",children:["Total: $",c.totalAmount]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:c.shippingAddress})]})]},c.id)),n.length>5&&r.jsx("div",{className:"text-center",children:r.jsx(Ae,{href:"/customer-dashboard",children:r.jsx($,{variant:"outline",children:"View All Orders"})})})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Vo,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No orders yet"}),r.jsx(Ae,{href:"/products",children:r.jsx($,{className:"mt-2",children:"Start Shopping"})})]})})]}),e.role==="shopkeeper"&&r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center space-x-2",children:[r.jsx(ar,{className:"h-5 w-5"}),r.jsx("span",{children:"Your Stores"})]}),r.jsx(kt,{children:"Manage your store information"})]}),r.jsx(G,{children:a?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}):i&&Array.isArray(i)&&i.length>0?r.jsx("div",{className:"space-y-4",children:i.map(c=>r.jsx("div",{className:"border rounded-lg p-4",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:c.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:c.description}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:c.address})]}),r.jsx(Ae,{href:`/stores/${c.id}`,children:r.jsxs($,{variant:"outline",size:"sm",children:[r.jsx(us,{className:"h-4 w-4 mr-1"}),"View"]})})]})},c.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ar,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No stores created yet"}),r.jsx(Ae,{href:"/shopkeeper-dashboard",children:r.jsx($,{className:"mt-2",children:"Create Store"})})]})})]})]})]})})}function Gxe(){const{user:e,logout:t}=Gt(),[,n]=Jr(),{toast:s}=ft(),[i,a]=b.useState(""),[o,l]=b.useState(!1),[c,d]=b.useState(""),h=pt({mutationFn:async v=>Kt(`/api/auth/delete-account?userId=${e==null?void 0:e.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}),onSuccess:()=>{s({title:"Account deleted successfully",description:"Your account and all associated data have been permanently deleted."}),t(),n("/")},onError:v=>{s({title:"Failed to delete account",description:v.message||"Please try again later.",variant:"destructive"})}});if(!e)return r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Please log in to access this page"}),r.jsx(Ae,{href:"/login",children:r.jsx($,{children:"Login"})})]})});const m=i==="DELETE"&&o,f=()=>{m&&h.mutate({reason:c.trim()||void 0})};return r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx(Ae,{href:"/account",children:r.jsxs($,{variant:"ghost",className:"mb-4",children:[r.jsx(bc,{className:"h-4 w-4 mr-2"}),"Back to Account"]})}),r.jsx("h1",{className:"text-3xl font-bold text-red-600",children:"Delete Account"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Permanently delete your account and all associated data"})]}),r.jsxs(K,{className:"border-red-200",children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"text-red-600 flex items-center space-x-2",children:[r.jsx(sc,{className:"h-5 w-5"}),r.jsx("span",{children:"Warning: This action cannot be undone"})]}),r.jsx(kt,{children:"Deleting your account will permanently remove all your data including:"})]}),r.jsxs(G,{className:"space-y-6",children:[r.jsxs(ii,{className:"border-red-200 bg-red-50",children:[r.jsx(sc,{className:"h-4 w-4"}),r.jsx(ai,{className:"text-red-800",children:r.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[r.jsx("li",{children:"Your profile information and account details"}),r.jsx("li",{children:"Order history and purchase records"}),r.jsx("li",{children:"Saved addresses and payment methods"}),r.jsx("li",{children:"Wishlist items and shopping cart"}),e.role==="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsx("li",{children:"Your store(s) and all product listings"}),r.jsx("li",{children:"Store analytics and sales data"}),r.jsx("li",{children:"Customer reviews and ratings"})]}),e.role==="delivery_partner"&&r.jsxs(r.Fragment,{children:[r.jsx("li",{children:"Delivery history and earnings data"}),r.jsx("li",{children:"Performance ratings and statistics"})]}),r.jsx("li",{children:"All notifications and communications"})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"reason",children:"Reason for deletion (optional)"}),r.jsx(de,{id:"reason",placeholder:"Help us improve by sharing why you're leaving...",value:c,onChange:v=>d(v.target.value),className:"mt-1"})]}),r.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(fc,{id:"confirm-checkbox",checked:o,onCheckedChange:v=>l(v)}),r.jsx(be,{htmlFor:"confirm-checkbox",className:"text-sm",children:"I understand that this action is permanent and cannot be reversed"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"confirm-text",className:"text-sm",children:'Type "DELETE" to confirm account deletion'}),r.jsx(de,{id:"confirm-text",placeholder:"Type DELETE here",value:i,onChange:v=>a(v.target.value),className:"mt-1"})]})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx(Ae,{href:"/account",children:r.jsx($,{variant:"outline",className:"flex-1",children:"Cancel"})}),r.jsx($,{variant:"destructive",onClick:f,disabled:!m||h.isPending,className:"flex-1",children:h.isPending?"Deleting...":r.jsxs(r.Fragment,{children:[r.jsx(ei,{className:"h-4 w-4 mr-2"}),"Delete Account"]})})]})]})]})]}),r.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:r.jsxs("p",{children:["Need help? Contact our support team at"," ",r.jsx("a",{href:"mailto:sirahabazzar@gmail.com",className:"text-blue-600 hover:underline",children:"sirahabazzar@gmail.com"})]})})]})}var UT="Tabs",[Zxe,TUe]=xn(UT,[Dm]),D7=Dm(),[Yxe,WT]=Zxe(UT),I7=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,h=eu(l),[m,f]=Oi({prop:s,onChange:i,defaultProp:a});return r.jsx(Yxe,{scope:n,baseId:ia(),value:m,onValueChange:f,orientation:o,dir:h,activationMode:c,children:r.jsx(Je.div,{dir:h,"data-orientation":o,...d,ref:t})})});I7.displayName=UT;var L7="TabsList",R7=b.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...i}=e,a=WT(L7,n),o=D7(n);return r.jsx(Bk,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:s,children:r.jsx(Je.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});R7.displayName=L7;var $7="TabsTrigger",F7=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:i=!1,...a}=e,o=WT($7,n),l=D7(n),c=V7(o.baseId,s),d=U7(o.baseId,s),h=s===o.value;return r.jsx(Vk,{asChild:!0,...l,focusable:!i,active:h,children:r.jsx(Je.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:$e(e.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?o.onValueChange(s):m.preventDefault()}),onKeyDown:$e(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(s)}),onFocus:$e(e.onFocus,()=>{const m=o.activationMode!=="manual";!h&&!i&&m&&o.onValueChange(s)})})})});F7.displayName=$7;var z7="TabsContent",B7=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:i,children:a,...o}=e,l=WT(z7,n),c=V7(l.baseId,s),d=U7(l.baseId,s),h=s===l.value,m=b.useRef(h);return b.useEffect(()=>{const f=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(f)},[]),r.jsx(Mn,{present:i||h,children:({present:f})=>r.jsx(Je.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:f&&a})})});B7.displayName=z7;function V7(e,t){return`${e}-trigger-${t}`}function U7(e,t){return`${e}-content-${t}`}var Xxe=I7,W7=R7,H7=F7,q7=B7;const Ds=Xxe,ws=b.forwardRef(({className:e,...t},n)=>r.jsx(W7,{ref:n,className:Ve("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ws.displayName=W7.displayName;const at=b.forwardRef(({className:e,...t},n)=>r.jsx(H7,{ref:n,className:Ve("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));at.displayName=H7.displayName;const Xe=b.forwardRef(({className:e,...t},n)=>r.jsx(q7,{ref:n,className:Ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Xe.displayName=q7.displayName;const Qxe=e=>new Promise((t,n)=>{const s=document.createElement("canvas"),i=s.getContext("2d"),a=new Image,o=setTimeout(()=>{n(new Error("Image compression timeout"))},1e4);a.onload=()=>{try{clearTimeout(o);let{width:l,height:c}=a;const h=200*1024;let m=600;if(e.size>h*2&&(m=400),e.size>h*5&&(m=300),(l>m||c>m)&&(l>c?(c=c*m/l,l=m):(l=l*m/c,c=m)),s.width=l,s.height=c,!i){n(new Error("Canvas context not available"));return}i.drawImage(a,0,0,l,c);let f=.6,v=s.toDataURL("image/jpeg",f);for(;v.length>h*1.37&&f>.1;)f-=.1,v=s.toDataURL("image/jpeg",f);t(v)}catch(l){clearTimeout(o),n(l)}},a.onerror=()=>{clearTimeout(o),n(new Error("Failed to load image"))},a.src=URL.createObjectURL(e)});function Ks({maxImages:e=6,minImages:t=1,onImagesChange:n,initialImages:s=[],label:i="Upload Images",className:a="",single:o=!1}){const[l,c]=b.useState(s),[d,h]=b.useState(""),[m,f]=b.useState(!1),v=b.useRef(null),p=b.useRef(null),{toast:x}=ft(),y=o?1:e,w=async k=>{if(!k)return;if(l.length+k.length>y){x({title:"Too many images",description:`Maximum ${y} image${y>1?"s":""} allowed`,variant:"destructive"});return}f(!0);const _=[];try{for(let O=0;O<k.length;O++){const M=k[O];if(!M.type.startsWith("image/")){x({title:"Invalid file type",description:"Please select only image files",variant:"destructive"});continue}if(M.size>5*1024*1024){x({title:"File too large",description:"Please select images smaller than 5MB",variant:"destructive"});continue}try{const T=await Qxe(M);_.push(T)}catch(T){if(console.error("Compression failed for file:",M.name,T),M.size<1024*1024)try{const I=new FileReader,A=await new Promise((V,D)=>{I.onload=()=>V(I.result),I.onerror=D,I.readAsDataURL(M)});_.push(A),x({title:"Image added",description:`${M.name} added without compression`,variant:"default"})}catch(I){console.error("FileReader failed:",I),x({title:"Upload failed",description:`Failed to process ${M.name}. Try a different image.`,variant:"destructive"})}else x({title:"File too large",description:`${M.name} is too large and compression failed. Try a smaller image.`,variant:"destructive"});continue}}if(_.length>0){const O=o?_:[...l,..._];c(O),n(O),x({title:"Images uploaded successfully",description:`${_.length} image${_.length>1?"s":""} added`})}}catch(O){console.error("Upload error:",O),x({title:"Upload failed",description:"Failed to upload images. Please try again.",variant:"destructive"})}finally{f(!1)}},j=()=>{if(!d.trim())return;if(l.length>=y){x({title:"Maximum images reached",description:`You can only add ${y} image${y>1?"s":""}`,variant:"destructive"});return}try{new URL(d)}catch{x({title:"Invalid URL",description:"Please enter a valid image URL",variant:"destructive"});return}const k=o?[d]:[...l,d];c(k),n(k),h(""),x({title:"Image URL added",description:"Image URL has been added successfully"})},N=k=>{const _=l.filter((O,M)=>M!==k);c(_),n(_)},C=()=>{var k;return(k=v.current)==null?void 0:k.click()},P=()=>{var k;return(k=p.current)==null?void 0:k.click()};return r.jsxs("div",{className:a,children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i,!o&&r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",t,"-",e," images)"]})]}),r.jsxs(Ds,{defaultValue:"upload",className:"w-full",children:[r.jsxs(ws,{className:"grid w-full grid-cols-3",children:[r.jsxs(at,{value:"upload",className:"flex items-center space-x-1",children:[r.jsx(Hs,{className:"h-4 w-4"}),r.jsx("span",{children:"Upload"})]}),r.jsxs(at,{value:"camera",className:"flex items-center space-x-1",children:[r.jsx(ko,{className:"h-4 w-4"}),r.jsx("span",{children:"Camera"})]}),r.jsxs(at,{value:"url",className:"flex items-center space-x-1",children:[r.jsx(Od,{className:"h-4 w-4"}),r.jsx("span",{children:"URL"})]})]}),r.jsx(Xe,{value:"upload",className:"mt-4",children:r.jsx(K,{children:r.jsxs(G,{className:"p-4",children:[r.jsxs("div",{onClick:C,className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary cursor-pointer transition-colors",children:[r.jsx(Hs,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Click to select images from your device"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Auto-compressed to 200KB for fast loading"})]}),r.jsx("input",{ref:v,type:"file",accept:"image/*",multiple:!o,onChange:k=>w(k.target.files),className:"hidden"})]})})}),r.jsx(Xe,{value:"camera",className:"mt-4",children:r.jsx(K,{children:r.jsxs(G,{className:"p-4",children:[r.jsxs("div",{onClick:P,className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary cursor-pointer transition-colors",children:[r.jsx(ko,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Take a photo with your camera"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Camera access required"})]}),r.jsx("input",{ref:p,type:"file",accept:"image/*",capture:"environment",multiple:!o,onChange:k=>w(k.target.files),className:"hidden"})]})})}),r.jsx(Xe,{value:"url",className:"mt-4",children:r.jsx(K,{children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(de,{type:"url",placeholder:"Enter image URL...",value:d,onChange:k=>h(k.target.value),className:"flex-1"}),r.jsx($,{onClick:j,disabled:!d.trim(),children:"Add URL"})]})})})})]}),l.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o?"Selected Image":`Selected Images (${l.length}/${y})`}),r.jsx("div",{className:`grid gap-3 ${o?"grid-cols-1":"grid-cols-2 md:grid-cols-3"}`,children:l.map((k,_)=>r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border-2 border-gray-200",children:r.jsx("img",{src:k,alt:`Selected ${_+1}`,className:"w-full h-full object-cover",onError:O=>{O.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Im0xNSAxMi0zIDMtMy0zIiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMiA5djYiIHN0cm9rZT0iIzlDQTNBRiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPC9zdmc+"}})}),r.jsx($,{variant:"destructive",size:"sm",onClick:()=>N(_),className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Fr,{className:"h-3 w-3"})})]},_))})]}),m&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-600 border-t-transparent"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Processing images..."}),r.jsx("p",{className:"text-xs text-blue-700",children:"Compressing and optimizing for better performance"})]})]})})]})}function R0({address:e,latitude:t,longitude:n,onLocationChange:s}){const[i,a]=b.useState(!1),{toast:o}=ft(),l=async()=>{if(!navigator.geolocation){o({title:"Location not supported",description:"Your browser doesn't support location services",variant:"destructive"});return}a(!0);try{const m=await new Promise((y,w)=>{navigator.geolocation.getCurrentPosition(y,w,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),{latitude:f,longitude:v}=m.coords,p=await c(f,v),x=`https://maps.google.com/?q=${f},${v}`;s({address:p,latitude:f.toString(),longitude:v.toString(),googleMapsLink:x}),o({title:"Location found",description:"Your location has been automatically filled"})}catch(m){console.error("Error getting location:",m),o({title:"Location error",description:"Could not get your location. Please enter manually.",variant:"destructive"})}finally{a(!1)}},c=async(m,f)=>{try{const v=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${m}&lon=${f}&addressdetails=1`);if(!v.ok)throw new Error("Geocoding failed");const p=await v.json();if(p.display_name)return p.display_name;throw new Error("No address found")}catch(v){return console.error("Reverse geocoding error:",v),`${m}, ${f}`}},d=m=>{s({address:m,latitude:t||"",longitude:n||"",googleMapsLink:t&&n?`https://maps.google.com/?q=${t},${n}`:""})},h=()=>{if(t&&n){const m=`https://maps.google.com/?q=${t},${n}`;window.open(m,"_blank")}else o({title:"No coordinates",description:"Please get your location first to generate Google Maps link",variant:"destructive"})};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"address",children:"Store Address"}),r.jsxs("div",{className:"flex gap-2 mt-1",children:[r.jsx(Yt,{id:"address",placeholder:"Complete store address",value:e,onChange:m=>d(m.target.value),className:"flex-1"}),r.jsxs($,{type:"button",variant:"outline",size:"sm",onClick:l,disabled:i,className:"whitespace-nowrap",children:[i?r.jsx(To,{className:"h-4 w-4 animate-spin"}):r.jsx(Re,{className:"h-4 w-4"}),i?"Getting...":"Get My Location"]})]})]}),t&&n&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"latitude",children:"Latitude"}),r.jsx(de,{id:"latitude",value:t,readOnly:!0,className:"bg-muted"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"longitude",children:"Longitude"}),r.jsx(de,{id:"longitude",value:n,readOnly:!0,className:"bg-muted"})]}),r.jsx("div",{className:"flex items-end",children:r.jsx($,{type:"button",variant:"outline",onClick:h,className:"w-full",children:"View on Google Maps"})})]})]})}var m2={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,s){s(t)})(Ff,function(n){var s="1.9.4";function i(u){var g,S,E,R;for(S=1,E=arguments.length;S<E;S++){R=arguments[S];for(g in R)u[g]=R[g]}return u}var a=Object.create||function(){function u(){}return function(g){return u.prototype=g,new u}}();function o(u,g){var S=Array.prototype.slice;if(u.bind)return u.bind.apply(u,S.call(arguments,1));var E=S.call(arguments,2);return function(){return u.apply(g,E.length?E.concat(S.call(arguments)):arguments)}}var l=0;function c(u){return"_leaflet_id"in u||(u._leaflet_id=++l),u._leaflet_id}function d(u,g,S){var E,R,Z,le;return le=function(){E=!1,R&&(Z.apply(S,R),R=!1)},Z=function(){E?R=arguments:(u.apply(S,arguments),setTimeout(le,g),E=!0)},Z}function h(u,g,S){var E=g[1],R=g[0],Z=E-R;return u===E&&S?u:((u-R)%Z+Z)%Z+R}function m(){return!1}function f(u,g){if(g===!1)return u;var S=Math.pow(10,g===void 0?6:g);return Math.round(u*S)/S}function v(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function p(u){return v(u).split(/\s+/)}function x(u,g){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?a(u.options):{});for(var S in g)u.options[S]=g[S];return u.options}function y(u,g,S){var E=[];for(var R in u)E.push(encodeURIComponent(S?R.toUpperCase():R)+"="+encodeURIComponent(u[R]));return(!g||g.indexOf("?")===-1?"?":"&")+E.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function j(u,g){return u.replace(w,function(S,E){var R=g[E];if(R===void 0)throw new Error("No value provided for variable "+S);return typeof R=="function"&&(R=R(g)),R})}var N=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function C(u,g){for(var S=0;S<u.length;S++)if(u[S]===g)return S;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function k(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var _=0;function O(u){var g=+new Date,S=Math.max(0,16-(g-_));return _=g+S,window.setTimeout(u,S)}var M=window.requestAnimationFrame||k("RequestAnimationFrame")||O,T=window.cancelAnimationFrame||k("CancelAnimationFrame")||k("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function I(u,g,S){if(S&&M===O)u.call(g);else return M.call(window,o(u,g))}function A(u){u&&T.call(window,u)}var V={__proto__:null,extend:i,create:a,bind:o,get lastId(){return l},stamp:c,throttle:d,wrapNum:h,falseFn:m,formatNum:f,trim:v,splitWords:p,setOptions:x,getParamString:y,template:j,isArray:N,indexOf:C,emptyImageUrl:P,requestFn:M,cancelFn:T,requestAnimFrame:I,cancelAnimFrame:A};function D(){}D.extend=function(u){var g=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=g.__super__=this.prototype,E=a(S);E.constructor=g,g.prototype=E;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(g[R]=this[R]);return u.statics&&i(g,u.statics),u.includes&&(W(u.includes),i.apply(null,[E].concat(u.includes))),i(E,u),delete E.statics,delete E.includes,E.options&&(E.options=S.options?a(S.options):{},i(E.options,u.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var Z=0,le=E._initHooks.length;Z<le;Z++)E._initHooks[Z].call(this)}},g},D.include=function(u){var g=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=g,this.mergeOptions(u.options)),this},D.mergeOptions=function(u){return i(this.prototype.options,u),this},D.addInitHook=function(u){var g=Array.prototype.slice.call(arguments,1),S=typeof u=="function"?u:function(){this[u].apply(this,g)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function W(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=N(u)?u:[u];for(var g=0;g<u.length;g++)u[g]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var U={on:function(u,g,S){if(typeof u=="object")for(var E in u)this._on(E,u[E],g);else{u=p(u);for(var R=0,Z=u.length;R<Z;R++)this._on(u[R],g,S)}return this},off:function(u,g,S){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var E in u)this._off(E,u[E],g);else{u=p(u);for(var R=arguments.length===1,Z=0,le=u.length;Z<le;Z++)R?this._off(u[Z]):this._off(u[Z],g,S)}return this},_on:function(u,g,S,E){if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}if(this._listens(u,g,S)===!1){S===this&&(S=void 0);var R={fn:g,ctx:S};E&&(R.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(R)}},_off:function(u,g,S){var E,R,Z;if(this._events&&(E=this._events[u],!!E)){if(arguments.length===1){if(this._firingCount)for(R=0,Z=E.length;R<Z;R++)E[R].fn=m;delete this._events[u];return}if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}var le=this._listens(u,g,S);if(le!==!1){var ve=E[le];this._firingCount&&(ve.fn=m,this._events[u]=E=E.slice()),E.splice(le,1)}}},fire:function(u,g,S){if(!this.listens(u,S))return this;var E=i({},g,{type:u,target:this,sourceTarget:g&&g.sourceTarget||this});if(this._events){var R=this._events[u];if(R){this._firingCount=this._firingCount+1||1;for(var Z=0,le=R.length;Z<le;Z++){var ve=R[Z],_e=ve.fn;ve.once&&this.off(u,_e,ve.ctx),_e.call(ve.ctx||this,E)}this._firingCount--}}return S&&this._propagateEvent(E),this},listens:function(u,g,S,E){typeof u!="string"&&console.warn('"string" type argument expected');var R=g;typeof g!="function"&&(E=!!g,R=void 0,S=void 0);var Z=this._events&&this._events[u];if(Z&&Z.length&&this._listens(u,R,S)!==!1)return!0;if(E){for(var le in this._eventParents)if(this._eventParents[le].listens(u,g,S,E))return!0}return!1},_listens:function(u,g,S){if(!this._events)return!1;var E=this._events[u]||[];if(!g)return!!E.length;S===this&&(S=void 0);for(var R=0,Z=E.length;R<Z;R++)if(E[R].fn===g&&E[R].ctx===S)return R;return!1},once:function(u,g,S){if(typeof u=="object")for(var E in u)this._on(E,u[E],g,!0);else{u=p(u);for(var R=0,Z=u.length;R<Z;R++)this._on(u[R],g,S,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[c(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[c(u)],this},_propagateEvent:function(u){for(var g in this._eventParents)this._eventParents[g].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};U.addEventListener=U.on,U.removeEventListener=U.clearAllEventListeners=U.off,U.addOneTimeEventListener=U.once,U.fireEvent=U.fire,U.hasEventListeners=U.listens;var Q=D.extend(U);function q(u,g,S){this.x=S?Math.round(u):u,this.y=S?Math.round(g):g}var B=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(u){return this.clone()._add(z(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(z(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new q(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new q(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=B(this.x),this.y=B(this.y),this},distanceTo:function(u){u=z(u);var g=u.x-this.x,S=u.y-this.y;return Math.sqrt(g*g+S*S)},equals:function(u){return u=z(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=z(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+f(this.x)+", "+f(this.y)+")"}};function z(u,g,S){return u instanceof q?u:N(u)?new q(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new q(u.x,u.y):new q(u,g,S)}function H(u,g){if(u)for(var S=g?[u,g]:u,E=0,R=S.length;E<R;E++)this.extend(S[E])}H.prototype={extend:function(u){var g,S;if(!u)return this;if(u instanceof q||typeof u[0]=="number"||"x"in u)g=S=z(u);else if(u=X(u),g=u.min,S=u.max,!g||!S)return this;return!this.min&&!this.max?(this.min=g.clone(),this.max=S.clone()):(this.min.x=Math.min(g.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(g.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(u){return z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return z(this.min.x,this.max.y)},getTopRight:function(){return z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var g,S;return typeof u[0]=="number"||u instanceof q?u=z(u):u=X(u),u instanceof H?(g=u.min,S=u.max):g=S=u,g.x>=this.min.x&&S.x<=this.max.x&&g.y>=this.min.y&&S.y<=this.max.y},intersects:function(u){u=X(u);var g=this.min,S=this.max,E=u.min,R=u.max,Z=R.x>=g.x&&E.x<=S.x,le=R.y>=g.y&&E.y<=S.y;return Z&&le},overlaps:function(u){u=X(u);var g=this.min,S=this.max,E=u.min,R=u.max,Z=R.x>g.x&&E.x<S.x,le=R.y>g.y&&E.y<S.y;return Z&&le},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var g=this.min,S=this.max,E=Math.abs(g.x-S.x)*u,R=Math.abs(g.y-S.y)*u;return X(z(g.x-E,g.y-R),z(S.x+E,S.y+R))},equals:function(u){return u?(u=X(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function X(u,g){return!u||u instanceof H?u:new H(u,g)}function ge(u,g){if(u)for(var S=g?[u,g]:u,E=0,R=S.length;E<R;E++)this.extend(S[E])}ge.prototype={extend:function(u){var g=this._southWest,S=this._northEast,E,R;if(u instanceof F)E=u,R=u;else if(u instanceof ge){if(E=u._southWest,R=u._northEast,!E||!R)return this}else return u?this.extend(pe(u)||Se(u)):this;return!g&&!S?(this._southWest=new F(E.lat,E.lng),this._northEast=new F(R.lat,R.lng)):(g.lat=Math.min(E.lat,g.lat),g.lng=Math.min(E.lng,g.lng),S.lat=Math.max(R.lat,S.lat),S.lng=Math.max(R.lng,S.lng)),this},pad:function(u){var g=this._southWest,S=this._northEast,E=Math.abs(g.lat-S.lat)*u,R=Math.abs(g.lng-S.lng)*u;return new ge(new F(g.lat-E,g.lng-R),new F(S.lat+E,S.lng+R))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof F||"lat"in u?u=pe(u):u=Se(u);var g=this._southWest,S=this._northEast,E,R;return u instanceof ge?(E=u.getSouthWest(),R=u.getNorthEast()):E=R=u,E.lat>=g.lat&&R.lat<=S.lat&&E.lng>=g.lng&&R.lng<=S.lng},intersects:function(u){u=Se(u);var g=this._southWest,S=this._northEast,E=u.getSouthWest(),R=u.getNorthEast(),Z=R.lat>=g.lat&&E.lat<=S.lat,le=R.lng>=g.lng&&E.lng<=S.lng;return Z&&le},overlaps:function(u){u=Se(u);var g=this._southWest,S=this._northEast,E=u.getSouthWest(),R=u.getNorthEast(),Z=R.lat>g.lat&&E.lat<S.lat,le=R.lng>g.lng&&E.lng<S.lng;return Z&&le},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,g){return u?(u=Se(u),this._southWest.equals(u.getSouthWest(),g)&&this._northEast.equals(u.getNorthEast(),g)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Se(u,g){return u instanceof ge?u:new ge(u,g)}function F(u,g,S){if(isNaN(u)||isNaN(g))throw new Error("Invalid LatLng object: ("+u+", "+g+")");this.lat=+u,this.lng=+g,S!==void 0&&(this.alt=+S)}F.prototype={equals:function(u,g){if(!u)return!1;u=pe(u);var S=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return S<=(g===void 0?1e-9:g)},toString:function(u){return"LatLng("+f(this.lat,u)+", "+f(this.lng,u)+")"},distanceTo:function(u){return Be.distance(this,pe(u))},wrap:function(){return Be.wrapLatLng(this)},toBounds:function(u){var g=180*u/40075017,S=g/Math.cos(Math.PI/180*this.lat);return Se([this.lat-g,this.lng-S],[this.lat+g,this.lng+S])},clone:function(){return new F(this.lat,this.lng,this.alt)}};function pe(u,g,S){return u instanceof F?u:N(u)&&typeof u[0]!="object"?u.length===3?new F(u[0],u[1],u[2]):u.length===2?new F(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new F(u.lat,"lng"in u?u.lng:u.lon,u.alt):g===void 0?null:new F(u,g,S)}var we={latLngToPoint:function(u,g){var S=this.projection.project(u),E=this.scale(g);return this.transformation._transform(S,E)},pointToLatLng:function(u,g){var S=this.scale(g),E=this.transformation.untransform(u,S);return this.projection.unproject(E)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var g=this.projection.bounds,S=this.scale(u),E=this.transformation.transform(g.min,S),R=this.transformation.transform(g.max,S);return new H(E,R)},infinite:!1,wrapLatLng:function(u){var g=this.wrapLng?h(u.lng,this.wrapLng,!0):u.lng,S=this.wrapLat?h(u.lat,this.wrapLat,!0):u.lat,E=u.alt;return new F(S,g,E)},wrapLatLngBounds:function(u){var g=u.getCenter(),S=this.wrapLatLng(g),E=g.lat-S.lat,R=g.lng-S.lng;if(E===0&&R===0)return u;var Z=u.getSouthWest(),le=u.getNorthEast(),ve=new F(Z.lat-E,Z.lng-R),_e=new F(le.lat-E,le.lng-R);return new ge(ve,_e)}},Be=i({},we,{wrapLng:[-180,180],R:6371e3,distance:function(u,g){var S=Math.PI/180,E=u.lat*S,R=g.lat*S,Z=Math.sin((g.lat-u.lat)*S/2),le=Math.sin((g.lng-u.lng)*S/2),ve=Z*Z+Math.cos(E)*Math.cos(R)*le*le,_e=2*Math.atan2(Math.sqrt(ve),Math.sqrt(1-ve));return this.R*_e}}),Pe=6378137,Ee={R:Pe,MAX_LATITUDE:85.0511287798,project:function(u){var g=Math.PI/180,S=this.MAX_LATITUDE,E=Math.max(Math.min(S,u.lat),-S),R=Math.sin(E*g);return new q(this.R*u.lng*g,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(u){var g=180/Math.PI;return new F((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*g,u.x*g/this.R)},bounds:function(){var u=Pe*Math.PI;return new H([-u,-u],[u,u])}()};function Ie(u,g,S,E){if(N(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=g,this._c=S,this._d=E}Ie.prototype={transform:function(u,g){return this._transform(u.clone(),g)},_transform:function(u,g){return g=g||1,u.x=g*(this._a*u.x+this._b),u.y=g*(this._c*u.y+this._d),u},untransform:function(u,g){return g=g||1,new q((u.x/g-this._b)/this._a,(u.y/g-this._d)/this._c)}};function Ne(u,g,S,E){return new Ie(u,g,S,E)}var xe=i({},Be,{code:"EPSG:3857",projection:Ee,transformation:function(){var u=.5/(Math.PI*Ee.R);return Ne(u,.5,-u,.5)}()}),J=i({},xe,{code:"EPSG:900913"});function De(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function Ue(u,g){var S="",E,R,Z,le,ve,_e;for(E=0,Z=u.length;E<Z;E++){for(ve=u[E],R=0,le=ve.length;R<le;R++)_e=ve[R],S+=(R?"L":"M")+_e.x+" "+_e.y;S+=g?mt.svg?"z":"x":""}return S||"M0 0"}var st=document.documentElement.style,ht="ActiveXObject"in window,Wt=ht&&!document.addEventListener,mr="msLaunchUri"in navigator&&!("documentMode"in document),Ft=fa("webkit"),ie=fa("android"),je=fa("android 2")||fa("android 3"),Ce=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Y=ie&&fa("Google")&&Ce<537&&!("AudioNode"in window),ye=!!window.opera,Te=!mr&&fa("chrome"),Ke=fa("gecko")&&!Ft&&!ye&&!ht,Pt=!Te&&fa("safari"),fr=fa("phantom"),gn="OTransition"in st,Uw=navigator.platform.indexOf("Win")===0,lu=ht&&"transition"in st,Ec="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!je,zg="MozPerspective"in st,Bg=!window.L_DISABLE_3D&&(lu||Ec||zg)&&!gn&&!fr,Oc=typeof orientation<"u"||fa("mobile"),Vg=Oc&&Ft,FZ=Oc&&Ec,LE=!window.PointerEvent&&window.MSPointerEvent,RE=!!(window.PointerEvent||LE),$E="ontouchstart"in window||!!window.TouchEvent,zZ=!window.L_NO_TOUCH&&($E||RE),BZ=Oc&&ye,VZ=Oc&&Ke,UZ=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,WZ=function(){var u=!1;try{var g=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",m,g),window.removeEventListener("testPassiveEventSupport",m,g)}catch{}return u}(),HZ=function(){return!!document.createElement("canvas").getContext}(),Ww=!!(document.createElementNS&&De("svg").createSVGRect),qZ=!!Ww&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),KZ=!Ww&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var g=u.firstChild;return g.style.behavior="url(#default#VML)",g&&typeof g.adj=="object"}catch{return!1}}(),GZ=navigator.platform.indexOf("Mac")===0,ZZ=navigator.platform.indexOf("Linux")===0;function fa(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var mt={ie:ht,ielt9:Wt,edge:mr,webkit:Ft,android:ie,android23:je,androidStock:Y,opera:ye,chrome:Te,gecko:Ke,safari:Pt,phantom:fr,opera12:gn,win:Uw,ie3d:lu,webkit3d:Ec,gecko3d:zg,any3d:Bg,mobile:Oc,mobileWebkit:Vg,mobileWebkit3d:FZ,msPointer:LE,pointer:RE,touch:zZ,touchNative:$E,mobileOpera:BZ,mobileGecko:VZ,retina:UZ,passiveEvents:WZ,canvas:HZ,svg:Ww,vml:KZ,inlineSvg:qZ,mac:GZ,linux:ZZ},FE=mt.msPointer?"MSPointerDown":"pointerdown",zE=mt.msPointer?"MSPointerMove":"pointermove",BE=mt.msPointer?"MSPointerUp":"pointerup",VE=mt.msPointer?"MSPointerCancel":"pointercancel",Hw={touchstart:FE,touchmove:zE,touchend:BE,touchcancel:VE},UE={touchstart:tY,touchmove:Ug,touchend:Ug,touchcancel:Ug},cu={},WE=!1;function YZ(u,g,S){return g==="touchstart"&&eY(),UE[g]?(S=UE[g].bind(this,S),u.addEventListener(Hw[g],S,!1),S):(console.warn("wrong event specified:",g),m)}function XZ(u,g,S){if(!Hw[g]){console.warn("wrong event specified:",g);return}u.removeEventListener(Hw[g],S,!1)}function QZ(u){cu[u.pointerId]=u}function JZ(u){cu[u.pointerId]&&(cu[u.pointerId]=u)}function HE(u){delete cu[u.pointerId]}function eY(){WE||(document.addEventListener(FE,QZ,!0),document.addEventListener(zE,JZ,!0),document.addEventListener(BE,HE,!0),document.addEventListener(VE,HE,!0),WE=!0)}function Ug(u,g){if(g.pointerType!==(g.MSPOINTER_TYPE_MOUSE||"mouse")){g.touches=[];for(var S in cu)g.touches.push(cu[S]);g.changedTouches=[g],u(g)}}function tY(u,g){g.MSPOINTER_TYPE_TOUCH&&g.pointerType===g.MSPOINTER_TYPE_TOUCH&&In(g),Ug(u,g)}function rY(u){var g={},S,E;for(E in u)S=u[E],g[E]=S&&S.bind?S.bind(u):S;return u=g,g.type="dblclick",g.detail=2,g.isTrusted=!1,g._simulated=!0,g}var nY=200;function sY(u,g){u.addEventListener("dblclick",g);var S=0,E;function R(Z){if(Z.detail!==1){E=Z.detail;return}if(!(Z.pointerType==="mouse"||Z.sourceCapabilities&&!Z.sourceCapabilities.firesTouchEvents)){var le=YE(Z);if(!(le.some(function(_e){return _e instanceof HTMLLabelElement&&_e.attributes.for})&&!le.some(function(_e){return _e instanceof HTMLInputElement||_e instanceof HTMLSelectElement}))){var ve=Date.now();ve-S<=nY?(E++,E===2&&g(rY(Z))):E=1,S=ve}}}return u.addEventListener("click",R),{dblclick:g,simDblclick:R}}function iY(u,g){u.removeEventListener("dblclick",g.dblclick),u.removeEventListener("click",g.simDblclick)}var qw=qg(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ef=qg(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),qE=ef==="webkitTransition"||ef==="OTransition"?ef+"End":"transitionend";function KE(u){return typeof u=="string"?document.getElementById(u):u}function tf(u,g){var S=u.style[g]||u.currentStyle&&u.currentStyle[g];if((!S||S==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(u,null);S=E?E[g]:null}return S==="auto"?null:S}function er(u,g,S){var E=document.createElement(u);return E.className=g||"",S&&S.appendChild(E),E}function zr(u){var g=u.parentNode;g&&g.removeChild(u)}function Wg(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function du(u){var g=u.parentNode;g&&g.lastChild!==u&&g.appendChild(u)}function uu(u){var g=u.parentNode;g&&g.firstChild!==u&&g.insertBefore(u,g.firstChild)}function Kw(u,g){if(u.classList!==void 0)return u.classList.contains(g);var S=Hg(u);return S.length>0&&new RegExp("(^|\\s)"+g+"(\\s|$)").test(S)}function Dt(u,g){if(u.classList!==void 0)for(var S=p(g),E=0,R=S.length;E<R;E++)u.classList.add(S[E]);else if(!Kw(u,g)){var Z=Hg(u);Gw(u,(Z?Z+" ":"")+g)}}function en(u,g){u.classList!==void 0?u.classList.remove(g):Gw(u,v((" "+Hg(u)+" ").replace(" "+g+" "," ")))}function Gw(u,g){u.className.baseVal===void 0?u.className=g:u.className.baseVal=g}function Hg(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function di(u,g){"opacity"in u.style?u.style.opacity=g:"filter"in u.style&&aY(u,g)}function aY(u,g){var S=!1,E="DXImageTransform.Microsoft.Alpha";try{S=u.filters.item(E)}catch{if(g===1)return}g=Math.round(g*100),S?(S.Enabled=g!==100,S.Opacity=g):u.style.filter+=" progid:"+E+"(opacity="+g+")"}function qg(u){for(var g=document.documentElement.style,S=0;S<u.length;S++)if(u[S]in g)return u[S];return!1}function Mc(u,g,S){var E=g||new q(0,0);u.style[qw]=(mt.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(S?" scale("+S+")":"")}function ln(u,g){u._leaflet_pos=g,mt.any3d?Mc(u,g):(u.style.left=g.x+"px",u.style.top=g.y+"px")}function Dc(u){return u._leaflet_pos||new q(0,0)}var rf,nf,Zw;if("onselectstart"in document)rf=function(){Tt(window,"selectstart",In)},nf=function(){yr(window,"selectstart",In)};else{var sf=qg(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rf=function(){if(sf){var u=document.documentElement.style;Zw=u[sf],u[sf]="none"}},nf=function(){sf&&(document.documentElement.style[sf]=Zw,Zw=void 0)}}function Yw(){Tt(window,"dragstart",In)}function Xw(){yr(window,"dragstart",In)}var Kg,Qw;function Jw(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(Gg(),Kg=u,Qw=u.style.outlineStyle,u.style.outlineStyle="none",Tt(window,"keydown",Gg))}function Gg(){Kg&&(Kg.style.outlineStyle=Qw,Kg=void 0,Qw=void 0,yr(window,"keydown",Gg))}function GE(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function eN(u){var g=u.getBoundingClientRect();return{x:g.width/u.offsetWidth||1,y:g.height/u.offsetHeight||1,boundingClientRect:g}}var oY={__proto__:null,TRANSFORM:qw,TRANSITION:ef,TRANSITION_END:qE,get:KE,getStyle:tf,create:er,remove:zr,empty:Wg,toFront:du,toBack:uu,hasClass:Kw,addClass:Dt,removeClass:en,setClass:Gw,getClass:Hg,setOpacity:di,testProp:qg,setTransform:Mc,setPosition:ln,getPosition:Dc,get disableTextSelection(){return rf},get enableTextSelection(){return nf},disableImageDrag:Yw,enableImageDrag:Xw,preventOutline:Jw,restoreOutline:Gg,getSizedParentNode:GE,getScale:eN};function Tt(u,g,S,E){if(g&&typeof g=="object")for(var R in g)rN(u,R,g[R],S);else{g=p(g);for(var Z=0,le=g.length;Z<le;Z++)rN(u,g[Z],S,E)}return this}var pa="_leaflet_events";function yr(u,g,S,E){if(arguments.length===1)ZE(u),delete u[pa];else if(g&&typeof g=="object")for(var R in g)nN(u,R,g[R],S);else if(g=p(g),arguments.length===2)ZE(u,function(ve){return C(g,ve)!==-1});else for(var Z=0,le=g.length;Z<le;Z++)nN(u,g[Z],S,E);return this}function ZE(u,g){for(var S in u[pa]){var E=S.split(/\d/)[0];(!g||g(E))&&nN(u,E,null,null,S)}}var tN={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function rN(u,g,S,E){var R=g+c(S)+(E?"_"+c(E):"");if(u[pa]&&u[pa][R])return this;var Z=function(ve){return S.call(E||u,ve||window.event)},le=Z;!mt.touchNative&&mt.pointer&&g.indexOf("touch")===0?Z=YZ(u,g,Z):mt.touch&&g==="dblclick"?Z=sY(u,Z):"addEventListener"in u?g==="touchstart"||g==="touchmove"||g==="wheel"||g==="mousewheel"?u.addEventListener(tN[g]||g,Z,mt.passiveEvents?{passive:!1}:!1):g==="mouseenter"||g==="mouseleave"?(Z=function(ve){ve=ve||window.event,iN(u,ve)&&le(ve)},u.addEventListener(tN[g],Z,!1)):u.addEventListener(g,le,!1):u.attachEvent("on"+g,Z),u[pa]=u[pa]||{},u[pa][R]=Z}function nN(u,g,S,E,R){R=R||g+c(S)+(E?"_"+c(E):"");var Z=u[pa]&&u[pa][R];if(!Z)return this;!mt.touchNative&&mt.pointer&&g.indexOf("touch")===0?XZ(u,g,Z):mt.touch&&g==="dblclick"?iY(u,Z):"removeEventListener"in u?u.removeEventListener(tN[g]||g,Z,!1):u.detachEvent("on"+g,Z),u[pa][R]=null}function Ic(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function sN(u){return rN(u,"wheel",Ic),this}function af(u){return Tt(u,"mousedown touchstart dblclick contextmenu",Ic),u._leaflet_disable_click=!0,this}function In(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Lc(u){return In(u),Ic(u),this}function YE(u){if(u.composedPath)return u.composedPath();for(var g=[],S=u.target;S;)g.push(S),S=S.parentNode;return g}function XE(u,g){if(!g)return new q(u.clientX,u.clientY);var S=eN(g),E=S.boundingClientRect;return new q((u.clientX-E.left)/S.x-g.clientLeft,(u.clientY-E.top)/S.y-g.clientTop)}var lY=mt.linux&&mt.chrome?window.devicePixelRatio:mt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function QE(u){return mt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/lY:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function iN(u,g){var S=g.relatedTarget;if(!S)return!0;try{for(;S&&S!==u;)S=S.parentNode}catch{return!1}return S!==u}var cY={__proto__:null,on:Tt,off:yr,stopPropagation:Ic,disableScrollPropagation:sN,disableClickPropagation:af,preventDefault:In,stop:Lc,getPropagationPath:YE,getMousePosition:XE,getWheelDelta:QE,isExternalTarget:iN,addListener:Tt,removeListener:yr},JE=Q.extend({run:function(u,g,S,E){this.stop(),this._el=u,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=Dc(u),this._offset=g.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=I(this._animate,this),this._step()},_step:function(u){var g=+new Date-this._startTime,S=this._duration*1e3;g<S?this._runFrame(this._easeOut(g/S),u):(this._runFrame(1),this._complete())},_runFrame:function(u,g){var S=this._startPos.add(this._offset.multiplyBy(u));g&&S._round(),ln(this._el,S),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Zt=Q.extend({options:{crs:xe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,g){g=x(this,g),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),g.maxBounds&&this.setMaxBounds(g.maxBounds),g.zoom!==void 0&&(this._zoom=this._limitZoom(g.zoom)),g.center&&g.zoom!==void 0&&this.setView(pe(g.center),g.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ef&&mt.any3d&&!mt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Tt(this._proxy,qE,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,g,S){if(g=g===void 0?this._zoom:this._limitZoom(g),u=this._limitCenter(pe(u),g,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=i({animate:S.animate},S.zoom),S.pan=i({animate:S.animate,duration:S.duration},S.pan));var E=this._zoom!==g?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,g,S.zoom):this._tryAnimatedPan(u,S.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(u,g,S.pan&&S.pan.noMoveStart),this},setZoom:function(u,g){return this._loaded?this.setView(this.getCenter(),u,{zoom:g}):(this._zoom=u,this)},zoomIn:function(u,g){return u=u||(mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,g)},zoomOut:function(u,g){return u=u||(mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,g)},setZoomAround:function(u,g,S){var E=this.getZoomScale(g),R=this.getSize().divideBy(2),Z=u instanceof q?u:this.latLngToContainerPoint(u),le=Z.subtract(R).multiplyBy(1-1/E),ve=this.containerPointToLatLng(R.add(le));return this.setView(ve,g,{zoom:S})},_getBoundsCenterZoom:function(u,g){g=g||{},u=u.getBounds?u.getBounds():Se(u);var S=z(g.paddingTopLeft||g.padding||[0,0]),E=z(g.paddingBottomRight||g.padding||[0,0]),R=this.getBoundsZoom(u,!1,S.add(E));if(R=typeof g.maxZoom=="number"?Math.min(g.maxZoom,R):R,R===1/0)return{center:u.getCenter(),zoom:R};var Z=E.subtract(S).divideBy(2),le=this.project(u.getSouthWest(),R),ve=this.project(u.getNorthEast(),R),_e=this.unproject(le.add(ve).divideBy(2).add(Z),R);return{center:_e,zoom:R}},fitBounds:function(u,g){if(u=Se(u),!u.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(u,g);return this.setView(S.center,S.zoom,g)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,g){return this.setView(u,this._zoom,{pan:g})},panBy:function(u,g){if(u=z(u).round(),g=g||{},!u.x&&!u.y)return this.fire("moveend");if(g.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new JE,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),g.noMoveStart||this.fire("movestart"),g.animate!==!1){Dt(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,S,g.duration||.25,g.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,g,S){if(S=S||{},S.animate===!1||!mt.any3d)return this.setView(u,g,S);this._stop();var E=this.project(this.getCenter()),R=this.project(u),Z=this.getSize(),le=this._zoom;u=pe(u),g=g===void 0?le:g;var ve=Math.max(Z.x,Z.y),_e=ve*this.getZoomScale(le,g),Me=R.distanceTo(E)||1,Qe=1.42,bt=Qe*Qe;function Rt(cn){var av=cn?-1:1,XY=cn?_e:ve,QY=_e*_e-ve*ve+av*bt*bt*Me*Me,JY=2*XY*bt*Me,xN=QY/JY,MO=Math.sqrt(xN*xN+1)-xN,eX=MO<1e-9?-18:Math.log(MO);return eX}function ss(cn){return(Math.exp(cn)-Math.exp(-cn))/2}function kn(cn){return(Math.exp(cn)+Math.exp(-cn))/2}function hi(cn){return ss(cn)/kn(cn)}var Ns=Rt(0);function gu(cn){return ve*(kn(Ns)/kn(Ns+Qe*cn))}function KY(cn){return ve*(kn(Ns)*hi(Ns+Qe*cn)-ss(Ns))/bt}function GY(cn){return 1-Math.pow(1-cn,1.5)}var ZY=Date.now(),EO=(Rt(1)-Ns)/Qe,YY=S.duration?1e3*S.duration:1e3*EO*.8;function OO(){var cn=(Date.now()-ZY)/YY,av=GY(cn)*EO;cn<=1?(this._flyToFrame=I(OO,this),this._move(this.unproject(E.add(R.subtract(E).multiplyBy(KY(av)/Me)),le),this.getScaleZoom(ve/gu(av),le),{flyTo:!0})):this._move(u,g)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),OO.call(this),this},flyToBounds:function(u,g){var S=this._getBoundsCenterZoom(u,g);return this.flyTo(S.center,S.zoom,g)},setMaxBounds:function(u){return u=Se(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var g=this.options.minZoom;return this.options.minZoom=u,this._loaded&&g!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var g=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&g!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,g){this._enforcingBounds=!0;var S=this.getCenter(),E=this._limitCenter(S,this._zoom,Se(u));return S.equals(E)||this.panTo(E,g),this._enforcingBounds=!1,this},panInside:function(u,g){g=g||{};var S=z(g.paddingTopLeft||g.padding||[0,0]),E=z(g.paddingBottomRight||g.padding||[0,0]),R=this.project(this.getCenter()),Z=this.project(u),le=this.getPixelBounds(),ve=X([le.min.add(S),le.max.subtract(E)]),_e=ve.getSize();if(!ve.contains(Z)){this._enforcingBounds=!0;var Me=Z.subtract(ve.getCenter()),Qe=ve.extend(Z).getSize().subtract(_e);R.x+=Me.x<0?-Qe.x:Qe.x,R.y+=Me.y<0?-Qe.y:Qe.y,this.panTo(this.unproject(R),g),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var g=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),E=g.divideBy(2).round(),R=S.divideBy(2).round(),Z=E.subtract(R);return!Z.x&&!Z.y?this:(u.animate&&u.pan?this.panBy(Z):(u.pan&&this._rawPanBy(Z),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:g,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var g=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(g,S,u):navigator.geolocation.getCurrentPosition(g,S,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var g=u.code,S=u.message||(g===1?"permission denied":g===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:g,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var g=u.coords.latitude,S=u.coords.longitude,E=new F(g,S),R=E.toBounds(u.coords.accuracy*2),Z=this._locateOptions;if(Z.setView){var le=this.getBoundsZoom(R);this.setView(E,Z.maxZoom?Math.min(le,Z.maxZoom):le)}var ve={latlng:E,bounds:R,timestamp:u.timestamp};for(var _e in u.coords)typeof u.coords[_e]=="number"&&(ve[_e]=u.coords[_e]);this.fire("locationfound",ve)}},addHandler:function(u,g){if(!g)return this;var S=this[u]=new g(this);return this._handlers.push(S),this.options[u]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),zr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)zr(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,g){var S="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),E=er("div",S,g||this._mapPane);return u&&(this._panes[u]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),g=this.unproject(u.getBottomLeft()),S=this.unproject(u.getTopRight());return new ge(g,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,g,S){u=Se(u),S=z(S||[0,0]);var E=this.getZoom()||0,R=this.getMinZoom(),Z=this.getMaxZoom(),le=u.getNorthWest(),ve=u.getSouthEast(),_e=this.getSize().subtract(S),Me=X(this.project(ve,E),this.project(le,E)).getSize(),Qe=mt.any3d?this.options.zoomSnap:1,bt=_e.x/Me.x,Rt=_e.y/Me.y,ss=g?Math.max(bt,Rt):Math.min(bt,Rt);return E=this.getScaleZoom(ss,E),Qe&&(E=Math.round(E/(Qe/100))*(Qe/100),E=g?Math.ceil(E/Qe)*Qe:Math.floor(E/Qe)*Qe),Math.max(R,Math.min(Z,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,g){var S=this._getTopLeftPoint(u,g);return new H(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,g){var S=this.options.crs;return g=g===void 0?this._zoom:g,S.scale(u)/S.scale(g)},getScaleZoom:function(u,g){var S=this.options.crs;g=g===void 0?this._zoom:g;var E=S.zoom(u*S.scale(g));return isNaN(E)?1/0:E},project:function(u,g){return g=g===void 0?this._zoom:g,this.options.crs.latLngToPoint(pe(u),g)},unproject:function(u,g){return g=g===void 0?this._zoom:g,this.options.crs.pointToLatLng(z(u),g)},layerPointToLatLng:function(u){var g=z(u).add(this.getPixelOrigin());return this.unproject(g)},latLngToLayerPoint:function(u){var g=this.project(pe(u))._round();return g._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(pe(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(Se(u))},distance:function(u,g){return this.options.crs.distance(pe(u),pe(g))},containerPointToLayerPoint:function(u){return z(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return z(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var g=this.containerPointToLayerPoint(z(u));return this.layerPointToLatLng(g)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(u)))},mouseEventToContainerPoint:function(u){return XE(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var g=this._container=KE(u);if(g){if(g._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Tt(g,"scroll",this._onScroll,this),this._containerId=c(g)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&mt.any3d,Dt(u,"leaflet-container"+(mt.touch?" leaflet-touch":"")+(mt.retina?" leaflet-retina":"")+(mt.ielt9?" leaflet-oldie":"")+(mt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var g=tf(u,"position");g!=="absolute"&&g!=="relative"&&g!=="fixed"&&g!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ln(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Dt(u.markerPane,"leaflet-zoom-hide"),Dt(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,g,S){ln(this._mapPane,new q(0,0));var E=!this._loaded;this._loaded=!0,g=this._limitZoom(g),this.fire("viewprereset");var R=this._zoom!==g;this._moveStart(R,S)._move(u,g)._moveEnd(R),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(u,g){return u&&this.fire("zoomstart"),g||this.fire("movestart"),this},_move:function(u,g,S,E){g===void 0&&(g=this._zoom);var R=this._zoom!==g;return this._zoom=g,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),E?S&&S.pinch&&this.fire("zoom",S):((R||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){ln(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[c(this._container)]=this;var g=u?yr:Tt;g(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&g(window,"resize",this._onResize,this),mt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=I(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,g){for(var S=[],E,R=g==="mouseout"||g==="mouseover",Z=u.target||u.srcElement,le=!1;Z;){if(E=this._targets[c(Z)],E&&(g==="click"||g==="preclick")&&this._draggableMoved(E)){le=!0;break}if(E&&E.listens(g,!0)&&(R&&!iN(Z,u)||(S.push(E),R))||Z===this._container)break;Z=Z.parentNode}return!S.length&&!le&&!R&&this.listens(g,!0)&&(S=[this]),S},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var g=u.target||u.srcElement;if(!(!this._loaded||g._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(g))){var S=u.type;S==="mousedown"&&Jw(g),this._fireDOMEvent(u,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,g,S){if(u.type==="click"){var E=i({},u);E.type="preclick",this._fireDOMEvent(E,E.type,S)}var R=this._findEventTargets(u,g);if(S){for(var Z=[],le=0;le<S.length;le++)S[le].listens(g,!0)&&Z.push(S[le]);R=Z.concat(R)}if(R.length){g==="contextmenu"&&In(u);var ve=R[0],_e={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var Me=ve.getLatLng&&(!ve._radius||ve._radius<=10);_e.containerPoint=Me?this.latLngToContainerPoint(ve.getLatLng()):this.mouseEventToContainerPoint(u),_e.layerPoint=this.containerPointToLayerPoint(_e.containerPoint),_e.latlng=Me?ve.getLatLng():this.layerPointToLatLng(_e.layerPoint)}for(le=0;le<R.length;le++)if(R[le].fire(g,_e,!0),_e.originalEvent._stopped||R[le].options.bubblingMouseEvents===!1&&C(this._mouseEvents,g)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,g=this._handlers.length;u<g;u++)this._handlers[u].disable()},whenReady:function(u,g){return this._loaded?u.call(g||this,{target:this}):this.on("load",u,g),this},_getMapPanePos:function(){return Dc(this._mapPane)||new q(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,g){var S=u&&g!==void 0?this._getNewPixelOrigin(u,g):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,g){var S=this.getSize()._divideBy(2);return this.project(u,g)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,g,S){var E=this._getNewPixelOrigin(S,g);return this.project(u,g)._subtract(E)},_latLngBoundsToNewLayerBounds:function(u,g,S){var E=this._getNewPixelOrigin(S,g);return X([this.project(u.getSouthWest(),g)._subtract(E),this.project(u.getNorthWest(),g)._subtract(E),this.project(u.getSouthEast(),g)._subtract(E),this.project(u.getNorthEast(),g)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,g,S){if(!S)return u;var E=this.project(u,g),R=this.getSize().divideBy(2),Z=new H(E.subtract(R),E.add(R)),le=this._getBoundsOffset(Z,S,g);return Math.abs(le.x)<=1&&Math.abs(le.y)<=1?u:this.unproject(E.add(le),g)},_limitOffset:function(u,g){if(!g)return u;var S=this.getPixelBounds(),E=new H(S.min.add(u),S.max.add(u));return u.add(this._getBoundsOffset(E,g))},_getBoundsOffset:function(u,g,S){var E=X(this.project(g.getNorthEast(),S),this.project(g.getSouthWest(),S)),R=E.min.subtract(u.min),Z=E.max.subtract(u.max),le=this._rebound(R.x,-Z.x),ve=this._rebound(R.y,-Z.y);return new q(le,ve)},_rebound:function(u,g){return u+g>0?Math.round(u-g)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(g))},_limitZoom:function(u){var g=this.getMinZoom(),S=this.getMaxZoom(),E=mt.any3d?this.options.zoomSnap:1;return E&&(u=Math.round(u/E)*E),Math.max(g,Math.min(S,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){en(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,g){var S=this._getCenterOffset(u)._trunc();return(g&&g.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,g),!0)},_createAnimProxy:function(){var u=this._proxy=er("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(g){var S=qw,E=this._proxy.style[S];Mc(this._proxy,this.project(g.center,g.zoom),this.getZoomScale(g.zoom,1)),E===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){zr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),g=this.getZoom();Mc(this._proxy,this.project(u,g),this.getZoomScale(g,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,g,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(g-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(g),R=this._getCenterOffset(u)._divideBy(1-1/E);return S.animate!==!0&&!this.getSize().contains(R)?!1:(I(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(u,g,!0)},this),!0)},_animateZoom:function(u,g,S,E){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=g,Dt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:g,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&en(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function dY(u,g){return new Zt(u,g)}var Ri=D.extend({options:{position:"topright"},initialize:function(u){x(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var g=this._map;return g&&g.removeControl(this),this.options.position=u,g&&g.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var g=this._container=this.onAdd(u),S=this.getPosition(),E=u._controlCorners[S];return Dt(g,"leaflet-control"),S.indexOf("bottom")!==-1?E.insertBefore(g,E.firstChild):E.appendChild(g),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(zr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),of=function(u){return new Ri(u)};Zt.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},g="leaflet-",S=this._controlContainer=er("div",g+"control-container",this._container);function E(R,Z){var le=g+R+" "+g+Z;u[R+Z]=er("div",le,S)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)zr(this._controlCorners[u]);zr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var eO=Ri.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,g,S,E){return S<E?-1:E<S?1:0}},initialize:function(u,g,S){x(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in u)this._addLayer(u[E],E);for(E in g)this._addLayer(g[E],E,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return Ri.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,g){return this._addLayer(u,g),this._map?this._update():this},addOverlay:function(u,g){return this._addLayer(u,g,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var g=this._getLayer(c(u));return g&&this._layers.splice(this._layers.indexOf(g),1),this._map?this._update():this},expand:function(){Dt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(Dt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):en(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return en(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",g=this._container=er("div",u),S=this.options.collapsed;g.setAttribute("aria-haspopup",!0),af(g),sN(g);var E=this._section=er("section",u+"-list");S&&(this._map.on("click",this.collapse,this),Tt(g,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=er("a",u+"-toggle",g);R.href="#",R.title="Layers",R.setAttribute("role","button"),Tt(R,{keydown:function(Z){Z.keyCode===13&&this._expandSafely()},click:function(Z){In(Z),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=er("div",u+"-base",E),this._separator=er("div",u+"-separator",E),this._overlaysList=er("div",u+"-overlays",E),g.appendChild(E)},_getLayer:function(u){for(var g=0;g<this._layers.length;g++)if(this._layers[g]&&c(this._layers[g].layer)===u)return this._layers[g]},_addLayer:function(u,g,S){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:g,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function(E,R){return this.options.sortFunction(E.layer,R.layer,E.name,R.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Wg(this._baseLayersList),Wg(this._overlaysList),this._layerControlInputs=[];var u,g,S,E,R=0;for(S=0;S<this._layers.length;S++)E=this._layers[S],this._addItem(E),g=g||E.overlay,u=u||!E.overlay,R+=E.overlay?0:1;return this.options.hideSingleBase&&(u=u&&R>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=g&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var g=this._getLayer(c(u.target)),S=g.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;S&&this._map.fire(S,g)},_createRadioElement:function(u,g){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(g?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=S,E.firstChild},_addItem:function(u){var g=document.createElement("label"),S=this._map.hasLayer(u.layer),E;u.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=S):E=this._createRadioElement("leaflet-base-layers_"+c(this),S),this._layerControlInputs.push(E),E.layerId=c(u.layer),Tt(E,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+u.name;var Z=document.createElement("span");g.appendChild(Z),Z.appendChild(E),Z.appendChild(R);var le=u.overlay?this._overlaysList:this._baseLayersList;return le.appendChild(g),this._checkDisabledLayers(),g},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,g,S,E=[],R=[];this._handlingClick=!0;for(var Z=u.length-1;Z>=0;Z--)g=u[Z],S=this._getLayer(g.layerId).layer,g.checked?E.push(S):g.checked||R.push(S);for(Z=0;Z<R.length;Z++)this._map.hasLayer(R[Z])&&this._map.removeLayer(R[Z]);for(Z=0;Z<E.length;Z++)this._map.hasLayer(E[Z])||this._map.addLayer(E[Z]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,g,S,E=this._map.getZoom(),R=u.length-1;R>=0;R--)g=u[R],S=this._getLayer(g.layerId).layer,g.disabled=S.options.minZoom!==void 0&&E<S.options.minZoom||S.options.maxZoom!==void 0&&E>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,Tt(u,"click",In),this.expand();var g=this;setTimeout(function(){yr(u,"click",In),g._preventClick=!1})}}),uY=function(u,g,S){return new eO(u,g,S)},aN=Ri.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var g="leaflet-control-zoom",S=er("div",g+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,g+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,g+"-out",S,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,g,S,E,R){var Z=er("a",S,E);return Z.innerHTML=u,Z.href="#",Z.title=g,Z.setAttribute("role","button"),Z.setAttribute("aria-label",g),af(Z),Tt(Z,"click",Lc),Tt(Z,"click",R,this),Tt(Z,"click",this._refocusOnMap,this),Z},_updateDisabled:function(){var u=this._map,g="leaflet-disabled";en(this._zoomInButton,g),en(this._zoomOutButton,g),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(Dt(this._zoomOutButton,g),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(Dt(this._zoomInButton,g),this._zoomInButton.setAttribute("aria-disabled","true"))}});Zt.mergeOptions({zoomControl:!0}),Zt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new aN,this.addControl(this.zoomControl))});var hY=function(u){return new aN(u)},tO=Ri.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var g="leaflet-control-scale",S=er("div",g),E=this.options;return this._addScales(E,g+"-line",S),u.on(E.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),S},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,g,S){u.metric&&(this._mScale=er("div",g,S)),u.imperial&&(this._iScale=er("div",g,S))},_update:function(){var u=this._map,g=u.getSize().y/2,S=u.distance(u.containerPointToLatLng([0,g]),u.containerPointToLatLng([this.options.maxWidth,g]));this._updateScales(S)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var g=this._getRoundNum(u),S=g<1e3?g+" m":g/1e3+" km";this._updateScale(this._mScale,S,g/u)},_updateImperial:function(u){var g=u*3.2808399,S,E,R;g>5280?(S=g/5280,E=this._getRoundNum(S),this._updateScale(this._iScale,E+" mi",E/S)):(R=this._getRoundNum(g),this._updateScale(this._iScale,R+" ft",R/g))},_updateScale:function(u,g,S){u.style.width=Math.round(this.options.maxWidth*S)+"px",u.innerHTML=g},_getRoundNum:function(u){var g=Math.pow(10,(Math.floor(u)+"").length-1),S=u/g;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,g*S}}),mY=function(u){return new tO(u)},fY='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',oN=Ri.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(mt.inlineSvg?fY+" ":"")+"Leaflet</a>"},initialize:function(u){x(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=er("div","leaflet-control-attribution"),af(this._container);for(var g in u._layers)u._layers[g].getAttribution&&this.addAttribution(u._layers[g].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var g in this._attributions)this._attributions[g]&&u.push(g);var S=[];this.options.prefix&&S.push(this.options.prefix),u.length&&S.push(u.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Zt.mergeOptions({attributionControl:!0}),Zt.addInitHook(function(){this.options.attributionControl&&new oN().addTo(this)});var pY=function(u){return new oN(u)};Ri.Layers=eO,Ri.Zoom=aN,Ri.Scale=tO,Ri.Attribution=oN,of.layers=uY,of.zoom=hY,of.scale=mY,of.attribution=pY;var xa=D.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xa.addTo=function(u,g){return u.addHandler(g,this),this};var xY={Events:U},rO=mt.touch?"touchstart mousedown":"mousedown",il=Q.extend({options:{clickTolerance:3},initialize:function(u,g,S,E){x(this,E),this._element=u,this._dragStartTarget=g||u,this._preventOutline=S},enable:function(){this._enabled||(Tt(this._dragStartTarget,rO,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(il._dragging===this&&this.finishDrag(!0),yr(this._dragStartTarget,rO,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Kw(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){il._dragging===this&&this.finishDrag();return}if(!(il._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(il._dragging=this,this._preventOutline&&Jw(this._element),Yw(),rf(),!this._moving)){this.fire("down");var g=u.touches?u.touches[0]:u,S=GE(this._element);this._startPoint=new q(g.clientX,g.clientY),this._startPos=Dc(this._element),this._parentScale=eN(S);var E=u.type==="mousedown";Tt(document,E?"mousemove":"touchmove",this._onMove,this),Tt(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var g=u.touches&&u.touches.length===1?u.touches[0]:u,S=new q(g.clientX,g.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,In(u),this._moved||(this.fire("dragstart"),this._moved=!0,Dt(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Dt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),ln(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){en(document.body,"leaflet-dragging"),this._lastTarget&&(en(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),yr(document,"mousemove touchmove",this._onMove,this),yr(document,"mouseup touchend touchcancel",this._onUp,this),Xw(),nf();var g=this._moved&&this._moving;this._moving=!1,il._dragging=!1,g&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function nO(u,g,S){var E,R=[1,4,2,8],Z,le,ve,_e,Me,Qe,bt,Rt;for(Z=0,Qe=u.length;Z<Qe;Z++)u[Z]._code=Rc(u[Z],g);for(ve=0;ve<4;ve++){for(bt=R[ve],E=[],Z=0,Qe=u.length,le=Qe-1;Z<Qe;le=Z++)_e=u[Z],Me=u[le],_e._code&bt?Me._code&bt||(Rt=Zg(Me,_e,bt,g,S),Rt._code=Rc(Rt,g),E.push(Rt)):(Me._code&bt&&(Rt=Zg(Me,_e,bt,g,S),Rt._code=Rc(Rt,g),E.push(Rt)),E.push(_e));u=E}return u}function sO(u,g){var S,E,R,Z,le,ve,_e,Me,Qe;if(!u||u.length===0)throw new Error("latlngs not passed");ui(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var bt=pe([0,0]),Rt=Se(u),ss=Rt.getNorthWest().distanceTo(Rt.getSouthWest())*Rt.getNorthEast().distanceTo(Rt.getNorthWest());ss<1700&&(bt=lN(u));var kn=u.length,hi=[];for(S=0;S<kn;S++){var Ns=pe(u[S]);hi.push(g.project(pe([Ns.lat-bt.lat,Ns.lng-bt.lng])))}for(ve=_e=Me=0,S=0,E=kn-1;S<kn;E=S++)R=hi[S],Z=hi[E],le=R.y*Z.x-Z.y*R.x,_e+=(R.x+Z.x)*le,Me+=(R.y+Z.y)*le,ve+=le*3;ve===0?Qe=hi[0]:Qe=[_e/ve,Me/ve];var gu=g.unproject(z(Qe));return pe([gu.lat+bt.lat,gu.lng+bt.lng])}function lN(u){for(var g=0,S=0,E=0,R=0;R<u.length;R++){var Z=pe(u[R]);g+=Z.lat,S+=Z.lng,E++}return pe([g/E,S/E])}var gY={__proto__:null,clipPolygon:nO,polygonCenter:sO,centroid:lN};function iO(u,g){if(!g||!u.length)return u.slice();var S=g*g;return u=jY(u,S),u=yY(u,S),u}function aO(u,g,S){return Math.sqrt(lf(u,g,S,!0))}function vY(u,g,S){return lf(u,g,S)}function yY(u,g){var S=u.length,E=typeof Uint8Array<"u"?Uint8Array:Array,R=new E(S);R[0]=R[S-1]=1,cN(u,R,g,0,S-1);var Z,le=[];for(Z=0;Z<S;Z++)R[Z]&&le.push(u[Z]);return le}function cN(u,g,S,E,R){var Z=0,le,ve,_e;for(ve=E+1;ve<=R-1;ve++)_e=lf(u[ve],u[E],u[R],!0),_e>Z&&(le=ve,Z=_e);Z>S&&(g[le]=1,cN(u,g,S,E,le),cN(u,g,S,le,R))}function jY(u,g){for(var S=[u[0]],E=1,R=0,Z=u.length;E<Z;E++)bY(u[E],u[R])>g&&(S.push(u[E]),R=E);return R<Z-1&&S.push(u[Z-1]),S}var oO;function lO(u,g,S,E,R){var Z=E?oO:Rc(u,S),le=Rc(g,S),ve,_e,Me;for(oO=le;;){if(!(Z|le))return[u,g];if(Z&le)return!1;ve=Z||le,_e=Zg(u,g,ve,S,R),Me=Rc(_e,S),ve===Z?(u=_e,Z=Me):(g=_e,le=Me)}}function Zg(u,g,S,E,R){var Z=g.x-u.x,le=g.y-u.y,ve=E.min,_e=E.max,Me,Qe;return S&8?(Me=u.x+Z*(_e.y-u.y)/le,Qe=_e.y):S&4?(Me=u.x+Z*(ve.y-u.y)/le,Qe=ve.y):S&2?(Me=_e.x,Qe=u.y+le*(_e.x-u.x)/Z):S&1&&(Me=ve.x,Qe=u.y+le*(ve.x-u.x)/Z),new q(Me,Qe,R)}function Rc(u,g){var S=0;return u.x<g.min.x?S|=1:u.x>g.max.x&&(S|=2),u.y<g.min.y?S|=4:u.y>g.max.y&&(S|=8),S}function bY(u,g){var S=g.x-u.x,E=g.y-u.y;return S*S+E*E}function lf(u,g,S,E){var R=g.x,Z=g.y,le=S.x-R,ve=S.y-Z,_e=le*le+ve*ve,Me;return _e>0&&(Me=((u.x-R)*le+(u.y-Z)*ve)/_e,Me>1?(R=S.x,Z=S.y):Me>0&&(R+=le*Me,Z+=ve*Me)),le=u.x-R,ve=u.y-Z,E?le*le+ve*ve:new q(R,Z)}function ui(u){return!N(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function cO(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ui(u)}function dO(u,g){var S,E,R,Z,le,ve,_e,Me;if(!u||u.length===0)throw new Error("latlngs not passed");ui(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Qe=pe([0,0]),bt=Se(u),Rt=bt.getNorthWest().distanceTo(bt.getSouthWest())*bt.getNorthEast().distanceTo(bt.getNorthWest());Rt<1700&&(Qe=lN(u));var ss=u.length,kn=[];for(S=0;S<ss;S++){var hi=pe(u[S]);kn.push(g.project(pe([hi.lat-Qe.lat,hi.lng-Qe.lng])))}for(S=0,E=0;S<ss-1;S++)E+=kn[S].distanceTo(kn[S+1])/2;if(E===0)Me=kn[0];else for(S=0,Z=0;S<ss-1;S++)if(le=kn[S],ve=kn[S+1],R=le.distanceTo(ve),Z+=R,Z>E){_e=(Z-E)/R,Me=[ve.x-_e*(ve.x-le.x),ve.y-_e*(ve.y-le.y)];break}var Ns=g.unproject(z(Me));return pe([Ns.lat+Qe.lat,Ns.lng+Qe.lng])}var wY={__proto__:null,simplify:iO,pointToSegmentDistance:aO,closestPointOnSegment:vY,clipSegment:lO,_getEdgeIntersection:Zg,_getBitCode:Rc,_sqClosestPointOnSegment:lf,isFlat:ui,_flat:cO,polylineCenter:dO},dN={project:function(u){return new q(u.lng,u.lat)},unproject:function(u){return new F(u.y,u.x)},bounds:new H([-180,-90],[180,90])},uN={R:6378137,R_MINOR:6356752314245179e-9,bounds:new H([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var g=Math.PI/180,S=this.R,E=u.lat*g,R=this.R_MINOR/S,Z=Math.sqrt(1-R*R),le=Z*Math.sin(E),ve=Math.tan(Math.PI/4-E/2)/Math.pow((1-le)/(1+le),Z/2);return E=-S*Math.log(Math.max(ve,1e-10)),new q(u.lng*g*S,E)},unproject:function(u){for(var g=180/Math.PI,S=this.R,E=this.R_MINOR/S,R=Math.sqrt(1-E*E),Z=Math.exp(-u.y/S),le=Math.PI/2-2*Math.atan(Z),ve=0,_e=.1,Me;ve<15&&Math.abs(_e)>1e-7;ve++)Me=R*Math.sin(le),Me=Math.pow((1-Me)/(1+Me),R/2),_e=Math.PI/2-2*Math.atan(Z*Me)-le,le+=_e;return new F(le*g,u.x*g/S)}},NY={__proto__:null,LonLat:dN,Mercator:uN,SphericalMercator:Ee},SY=i({},Be,{code:"EPSG:3395",projection:uN,transformation:function(){var u=.5/(Math.PI*uN.R);return Ne(u,.5,-u,.5)}()}),uO=i({},Be,{code:"EPSG:4326",projection:dN,transformation:Ne(1/180,1,-1/180,.5)}),_Y=i({},we,{projection:dN,transformation:Ne(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,g){var S=g.lng-u.lng,E=g.lat-u.lat;return Math.sqrt(S*S+E*E)},infinite:!0});we.Earth=Be,we.EPSG3395=SY,we.EPSG3857=xe,we.EPSG900913=J,we.EPSG4326=uO,we.Simple=_Y;var $i=Q.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[c(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[c(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var g=u.target;if(g.hasLayer(this)){if(this._map=g,this._zoomAnimated=g._zoomAnimated,this.getEvents){var S=this.getEvents();g.on(S,this),this.once("remove",function(){g.off(S,this)},this)}this.onAdd(g),this.fire("add"),g.fire("layeradd",{layer:this})}}});Zt.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var g=c(u);return this._layers[g]?this:(this._layers[g]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var g=c(u);return this._layers[g]?(this._loaded&&u.onRemove(this),delete this._layers[g],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return c(u)in this._layers},eachLayer:function(u,g){for(var S in this._layers)u.call(g,this._layers[S]);return this},_addLayers:function(u){u=u?N(u)?u:[u]:[];for(var g=0,S=u.length;g<S;g++)this.addLayer(u[g])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[c(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var g=c(u);this._zoomBoundLayers[g]&&(delete this._zoomBoundLayers[g],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,g=-1/0,S=this._getZoomSpan();for(var E in this._zoomBoundLayers){var R=this._zoomBoundLayers[E].options;u=R.minZoom===void 0?u:Math.min(u,R.minZoom),g=R.maxZoom===void 0?g:Math.max(g,R.maxZoom)}this._layersMaxZoom=g===-1/0?void 0:g,this._layersMinZoom=u===1/0?void 0:u,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var hu=$i.extend({initialize:function(u,g){x(this,g),this._layers={};var S,E;if(u)for(S=0,E=u.length;S<E;S++)this.addLayer(u[S])},addLayer:function(u){var g=this.getLayerId(u);return this._layers[g]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var g=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[g]&&this._map.removeLayer(this._layers[g]),delete this._layers[g],this},hasLayer:function(u){var g=typeof u=="number"?u:this.getLayerId(u);return g in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var g=Array.prototype.slice.call(arguments,1),S,E;for(S in this._layers)E=this._layers[S],E[u]&&E[u].apply(E,g);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,g){for(var S in this._layers)u.call(g,this._layers[S]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return c(u)}}),PY=function(u,g){return new hu(u,g)},Qa=hu.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),hu.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),hu.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new ge;for(var g in this._layers){var S=this._layers[g];u.extend(S.getBounds?S.getBounds():S.getLatLng())}return u}}),CY=function(u,g){return new Qa(u,g)},mu=D.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){x(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,g){var S=this._getIconUrl(u);if(!S){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(S,g&&g.tagName==="IMG"?g:null);return this._setIconStyles(E,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(u,g){var S=this.options,E=S[g+"Size"];typeof E=="number"&&(E=[E,E]);var R=z(E),Z=z(g==="shadow"&&S.shadowAnchor||S.iconAnchor||R&&R.divideBy(2,!0));u.className="leaflet-marker-"+g+" "+(S.className||""),Z&&(u.style.marginLeft=-Z.x+"px",u.style.marginTop=-Z.y+"px"),R&&(u.style.width=R.x+"px",u.style.height=R.y+"px")},_createImg:function(u,g){return g=g||document.createElement("img"),g.src=u,g},_getIconUrl:function(u){return mt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function kY(u){return new mu(u)}var cf=mu.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof cf.imagePath!="string"&&(cf.imagePath=this._detectIconPath()),(this.options.imagePath||cf.imagePath)+mu.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var g=function(S,E,R){var Z=E.exec(S);return Z&&Z[R]};return u=g(u,/^url\((['"])?(.+)\1\)$/,2),u&&g(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=er("div","leaflet-default-icon-path",document.body),g=tf(u,"background-image")||tf(u,"backgroundImage");if(document.body.removeChild(u),g=this._stripUrl(g),g)return g;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),hO=xa.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new il(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Dt(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&en(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var g=this._marker,S=g._map,E=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,Z=Dc(g._icon),le=S.getPixelBounds(),ve=S.getPixelOrigin(),_e=X(le.min._subtract(ve).add(R),le.max._subtract(ve).subtract(R));if(!_e.contains(Z)){var Me=z((Math.max(_e.max.x,Z.x)-_e.max.x)/(le.max.x-_e.max.x)-(Math.min(_e.min.x,Z.x)-_e.min.x)/(le.min.x-_e.min.x),(Math.max(_e.max.y,Z.y)-_e.max.y)/(le.max.y-_e.max.y)-(Math.min(_e.min.y,Z.y)-_e.min.y)/(le.min.y-_e.min.y)).multiplyBy(E);S.panBy(Me,{animate:!1}),this._draggable._newPos._add(Me),this._draggable._startPos._add(Me),ln(g._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=I(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=I(this._adjustPan.bind(this,u)))},_onDrag:function(u){var g=this._marker,S=g._shadow,E=Dc(g._icon),R=g._map.layerPointToLatLng(E);S&&ln(S,E),g._latlng=R,u.latlng=R,u.oldLatLng=this._oldLatLng,g.fire("move",u).fire("drag",u)},_onDragEnd:function(u){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Yg=$i.extend({options:{icon:new cf,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,g){x(this,g),this._latlng=pe(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var g=this._latlng;return this._latlng=pe(u),this.update(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,g="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=u.icon.createIcon(this._icon),E=!1;S!==this._icon&&(this._icon&&this._removeIcon(),E=!0,u.title&&(S.title=u.title),S.tagName==="IMG"&&(S.alt=u.alt||"")),Dt(S,g),u.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Tt(S,"focus",this._panOnFocus,this);var R=u.icon.createShadow(this._shadow),Z=!1;R!==this._shadow&&(this._removeShadow(),Z=!0),R&&(Dt(R,g),R.alt=""),this._shadow=R,u.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&Z&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&yr(this._icon,"focus",this._panOnFocus,this),zr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&zr(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&ln(this._icon,u),this._shadow&&ln(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var g=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(g)},_initInteraction:function(){if(this.options.interactive&&(Dt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hO)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hO(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&di(this._icon,u),this._shadow&&di(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var g=this.options.icon.options,S=g.iconSize?z(g.iconSize):z(0,0),E=g.iconAnchor?z(g.iconAnchor):z(0,0);u.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:S.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function TY(u,g){return new Yg(u,g)}var al=$i.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return x(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Xg=al.extend({options:{fill:!0,radius:10},initialize:function(u,g){x(this,g),this._latlng=pe(u),this._radius=this.options.radius},setLatLng:function(u){var g=this._latlng;return this._latlng=pe(u),this.redraw(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var g=u&&u.radius||this._radius;return al.prototype.setStyle.call(this,u),this.setRadius(g),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,g=this._radiusY||u,S=this._clickTolerance(),E=[u+S,g+S];this._pxBounds=new H(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function AY(u,g){return new Xg(u,g)}var hN=Xg.extend({initialize:function(u,g,S){if(typeof g=="number"&&(g=i({},S,{radius:g})),x(this,g),this._latlng=pe(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new ge(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:al.prototype.setStyle,_project:function(){var u=this._latlng.lng,g=this._latlng.lat,S=this._map,E=S.options.crs;if(E.distance===Be.distance){var R=Math.PI/180,Z=this._mRadius/Be.R/R,le=S.project([g+Z,u]),ve=S.project([g-Z,u]),_e=le.add(ve).divideBy(2),Me=S.unproject(_e).lat,Qe=Math.acos((Math.cos(Z*R)-Math.sin(g*R)*Math.sin(Me*R))/(Math.cos(g*R)*Math.cos(Me*R)))/R;(isNaN(Qe)||Qe===0)&&(Qe=Z/Math.cos(Math.PI/180*g)),this._point=_e.subtract(S.getPixelOrigin()),this._radius=isNaN(Qe)?0:_e.x-S.project([Me,u-Qe]).x,this._radiusY=_e.y-le.y}else{var bt=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(bt).x}this._updateBounds()}});function EY(u,g,S){return new hN(u,g,S)}var Ja=al.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,g){x(this,g),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var g=1/0,S=null,E=lf,R,Z,le=0,ve=this._parts.length;le<ve;le++)for(var _e=this._parts[le],Me=1,Qe=_e.length;Me<Qe;Me++){R=_e[Me-1],Z=_e[Me];var bt=E(u,R,Z,!0);bt<g&&(g=bt,S=E(u,R,Z))}return S&&(S.distance=Math.sqrt(g)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return dO(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,g){return g=g||this._defaultShape(),u=pe(u),g.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new ge,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return ui(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var g=[],S=ui(u),E=0,R=u.length;E<R;E++)S?(g[E]=pe(u[E]),this._bounds.extend(g[E])):g[E]=this._convertLatLngs(u[E]);return g},_project:function(){var u=new H;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),g=new q(u,u);this._rawPxBounds&&(this._pxBounds=new H([this._rawPxBounds.min.subtract(g),this._rawPxBounds.max.add(g)]))},_projectLatlngs:function(u,g,S){var E=u[0]instanceof F,R=u.length,Z,le;if(E){for(le=[],Z=0;Z<R;Z++)le[Z]=this._map.latLngToLayerPoint(u[Z]),S.extend(le[Z]);g.push(le)}else for(Z=0;Z<R;Z++)this._projectLatlngs(u[Z],g,S)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var g=this._parts,S,E,R,Z,le,ve,_e;for(S=0,R=0,Z=this._rings.length;S<Z;S++)for(_e=this._rings[S],E=0,le=_e.length;E<le-1;E++)ve=lO(_e[E],_e[E+1],u,E,!0),ve&&(g[R]=g[R]||[],g[R].push(ve[0]),(ve[1]!==_e[E+1]||E===le-2)&&(g[R].push(ve[1]),R++))}},_simplifyPoints:function(){for(var u=this._parts,g=this.options.smoothFactor,S=0,E=u.length;S<E;S++)u[S]=iO(u[S],g)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,g){var S,E,R,Z,le,ve,_e=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(S=0,Z=this._parts.length;S<Z;S++)for(ve=this._parts[S],E=0,le=ve.length,R=le-1;E<le;R=E++)if(!(!g&&E===0)&&aO(u,ve[R],ve[E])<=_e)return!0;return!1}});function OY(u,g){return new Ja(u,g)}Ja._flat=cO;var fu=Ja.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return sO(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var g=Ja.prototype._convertLatLngs.call(this,u),S=g.length;return S>=2&&g[0]instanceof F&&g[0].equals(g[S-1])&&g.pop(),g},_setLatLngs:function(u){Ja.prototype._setLatLngs.call(this,u),ui(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ui(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,g=this.options.weight,S=new q(g,g);if(u=new H(u.min.subtract(S),u.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,R=this._rings.length,Z;E<R;E++)Z=nO(this._rings[E],u,!0),Z.length&&this._parts.push(Z)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var g=!1,S,E,R,Z,le,ve,_e,Me;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Z=0,_e=this._parts.length;Z<_e;Z++)for(S=this._parts[Z],le=0,Me=S.length,ve=Me-1;le<Me;ve=le++)E=S[le],R=S[ve],E.y>u.y!=R.y>u.y&&u.x<(R.x-E.x)*(u.y-E.y)/(R.y-E.y)+E.x&&(g=!g);return g||Ja.prototype._containsPoint.call(this,u,!0)}});function MY(u,g){return new fu(u,g)}var eo=Qa.extend({initialize:function(u,g){x(this,g),this._layers={},u&&this.addData(u)},addData:function(u){var g=N(u)?u:u.features,S,E,R;if(g){for(S=0,E=g.length;S<E;S++)R=g[S],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var Z=this.options;if(Z.filter&&!Z.filter(u))return this;var le=Qg(u,Z);return le?(le.feature=tv(u),le.defaultOptions=le.options,this.resetStyle(le),Z.onEachFeature&&Z.onEachFeature(u,le),this.addLayer(le)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(g){this._setLayerStyle(g,u)},this)},_setLayerStyle:function(u,g){u.setStyle&&(typeof g=="function"&&(g=g(u.feature)),u.setStyle(g))}});function Qg(u,g){var S=u.type==="Feature"?u.geometry:u,E=S?S.coordinates:null,R=[],Z=g&&g.pointToLayer,le=g&&g.coordsToLatLng||mN,ve,_e,Me,Qe;if(!E&&!S)return null;switch(S.type){case"Point":return ve=le(E),mO(Z,u,ve,g);case"MultiPoint":for(Me=0,Qe=E.length;Me<Qe;Me++)ve=le(E[Me]),R.push(mO(Z,u,ve,g));return new Qa(R);case"LineString":case"MultiLineString":return _e=Jg(E,S.type==="LineString"?0:1,le),new Ja(_e,g);case"Polygon":case"MultiPolygon":return _e=Jg(E,S.type==="Polygon"?1:2,le),new fu(_e,g);case"GeometryCollection":for(Me=0,Qe=S.geometries.length;Me<Qe;Me++){var bt=Qg({geometry:S.geometries[Me],type:"Feature",properties:u.properties},g);bt&&R.push(bt)}return new Qa(R);case"FeatureCollection":for(Me=0,Qe=S.features.length;Me<Qe;Me++){var Rt=Qg(S.features[Me],g);Rt&&R.push(Rt)}return new Qa(R);default:throw new Error("Invalid GeoJSON object.")}}function mO(u,g,S,E){return u?u(g,S):new Yg(S,E&&E.markersInheritOptions&&E)}function mN(u){return new F(u[1],u[0],u[2])}function Jg(u,g,S){for(var E=[],R=0,Z=u.length,le;R<Z;R++)le=g?Jg(u[R],g-1,S):(S||mN)(u[R]),E.push(le);return E}function fN(u,g){return u=pe(u),u.alt!==void 0?[f(u.lng,g),f(u.lat,g),f(u.alt,g)]:[f(u.lng,g),f(u.lat,g)]}function ev(u,g,S,E){for(var R=[],Z=0,le=u.length;Z<le;Z++)R.push(g?ev(u[Z],ui(u[Z])?0:g-1,S,E):fN(u[Z],E));return!g&&S&&R.length>0&&R.push(R[0].slice()),R}function pu(u,g){return u.feature?i({},u.feature,{geometry:g}):tv(g)}function tv(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var pN={toGeoJSON:function(u){return pu(this,{type:"Point",coordinates:fN(this.getLatLng(),u)})}};Yg.include(pN),hN.include(pN),Xg.include(pN),Ja.include({toGeoJSON:function(u){var g=!ui(this._latlngs),S=ev(this._latlngs,g?1:0,!1,u);return pu(this,{type:(g?"Multi":"")+"LineString",coordinates:S})}}),fu.include({toGeoJSON:function(u){var g=!ui(this._latlngs),S=g&&!ui(this._latlngs[0]),E=ev(this._latlngs,S?2:g?1:0,!0,u);return g||(E=[E]),pu(this,{type:(S?"Multi":"")+"Polygon",coordinates:E})}}),hu.include({toMultiPoint:function(u){var g=[];return this.eachLayer(function(S){g.push(S.toGeoJSON(u).geometry.coordinates)}),pu(this,{type:"MultiPoint",coordinates:g})},toGeoJSON:function(u){var g=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(g==="MultiPoint")return this.toMultiPoint(u);var S=g==="GeometryCollection",E=[];return this.eachLayer(function(R){if(R.toGeoJSON){var Z=R.toGeoJSON(u);if(S)E.push(Z.geometry);else{var le=tv(Z);le.type==="FeatureCollection"?E.push.apply(E,le.features):E.push(le)}}}),S?pu(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function fO(u,g){return new eo(u,g)}var DY=fO,rv=$i.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,g,S){this._url=u,this._bounds=Se(g),x(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Dt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){zr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&du(this._image),this},bringToBack:function(){return this._map&&uu(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=Se(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",g=this._image=u?this._url:er("img");if(Dt(g,"leaflet-image-layer"),this._zoomAnimated&&Dt(g,"leaflet-zoom-animated"),this.options.className&&Dt(g,this.options.className),g.onselectstart=m,g.onmousemove=m,g.onload=o(this.fire,this,"load"),g.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=g.src;return}g.src=this._url,g.alt=this.options.alt},_animateZoom:function(u){var g=this._map.getZoomScale(u.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;Mc(this._image,S,g)},_reset:function(){var u=this._image,g=new H(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=g.getSize();ln(u,g.min),u.style.width=S.x+"px",u.style.height=S.y+"px"},_updateOpacity:function(){di(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),IY=function(u,g,S){return new rv(u,g,S)},pO=rv.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",g=this._image=u?this._url:er("video");if(Dt(g,"leaflet-image-layer"),this._zoomAnimated&&Dt(g,"leaflet-zoom-animated"),this.options.className&&Dt(g,this.options.className),g.onselectstart=m,g.onmousemove=m,g.onloadeddata=o(this.fire,this,"load"),u){for(var S=g.getElementsByTagName("source"),E=[],R=0;R<S.length;R++)E.push(S[R].src);this._url=S.length>0?E:[g.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(g.style,"objectFit")&&(g.style.objectFit="fill"),g.autoplay=!!this.options.autoplay,g.loop=!!this.options.loop,g.muted=!!this.options.muted,g.playsInline=!!this.options.playsInline;for(var Z=0;Z<this._url.length;Z++){var le=er("source");le.src=this._url[Z],g.appendChild(le)}}});function LY(u,g,S){return new pO(u,g,S)}var xO=rv.extend({_initImage:function(){var u=this._image=this._url;Dt(u,"leaflet-image-layer"),this._zoomAnimated&&Dt(u,"leaflet-zoom-animated"),this.options.className&&Dt(u,this.options.className),u.onselectstart=m,u.onmousemove=m}});function RY(u,g,S){return new xO(u,g,S)}var ga=$i.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,g){u&&(u instanceof F||N(u))?(this._latlng=pe(u),x(this,g)):(x(this,u),this._source=g),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&di(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&di(this._container,1),this.bringToFront(),this.options.interactive&&(Dt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(di(this._container,0),this._removeTimeout=setTimeout(o(zr,void 0,this._container),200)):zr(this._container),this.options.interactive&&(en(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=pe(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&du(this._container),this},bringToBack:function(){return this._map&&uu(this._container),this},_prepareOpen:function(u){var g=this._source;if(!g._map)return!1;if(g instanceof Qa){g=null;var S=this._source._layers;for(var E in S)if(S[E]._map){g=S[E];break}if(!g)return!1;this._source=g}if(!u)if(g.getCenter)u=g.getCenter();else if(g.getLatLng)u=g.getLatLng();else if(g.getBounds)u=g.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,g=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof g=="string")u.innerHTML=g;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(g)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),g=z(this.options.offset),S=this._getAnchor();this._zoomAnimated?ln(this._container,u.add(S)):g=g.add(u).add(S);var E=this._containerBottom=-g.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+g.x;this._container.style.bottom=E+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});Zt.include({_initOverlay:function(u,g,S,E){var R=g;return R instanceof u||(R=new u(E).setContent(g)),S&&R.setLatLng(S),R}}),$i.include({_initOverlay:function(u,g,S,E){var R=S;return R instanceof u?(x(R,E),R._source=this):(R=g&&!E?g:new u(E,this),R.setContent(S)),R}});var nv=ga.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,ga.prototype.openOn.call(this,u)},onAdd:function(u){ga.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof al||this._source.on("preclick",Ic))},onRemove:function(u){ga.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof al||this._source.off("preclick",Ic))},getEvents:function(){var u=ga.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",g=this._container=er("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=er("div",u+"-content-wrapper",g);if(this._contentNode=er("div",u+"-content",S),af(g),sN(this._contentNode),Tt(g,"contextmenu",Ic),this._tipContainer=er("div",u+"-tip-container",g),this._tip=er("div",u+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=er("a",u+"-close-button",g);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',Tt(E,"click",function(R){In(R),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,g=u.style;g.width="",g.whiteSpace="nowrap";var S=u.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),g.width=S+1+"px",g.whiteSpace="",g.height="";var E=u.offsetHeight,R=this.options.maxHeight,Z="leaflet-popup-scrolled";R&&E>R?(g.height=R+"px",Dt(u,Z)):en(u,Z),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var g=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),S=this._getAnchor();ln(this._container,g.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,g=parseInt(tf(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+g,E=this._containerWidth,R=new q(this._containerLeft,-S-this._containerBottom);R._add(Dc(this._container));var Z=u.layerPointToContainerPoint(R),le=z(this.options.autoPanPadding),ve=z(this.options.autoPanPaddingTopLeft||le),_e=z(this.options.autoPanPaddingBottomRight||le),Me=u.getSize(),Qe=0,bt=0;Z.x+E+_e.x>Me.x&&(Qe=Z.x+E-Me.x+_e.x),Z.x-Qe-ve.x<0&&(Qe=Z.x-ve.x),Z.y+S+_e.y>Me.y&&(bt=Z.y+S-Me.y+_e.y),Z.y-bt-ve.y<0&&(bt=Z.y-ve.y),(Qe||bt)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Qe,bt]))}},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),$Y=function(u,g){return new nv(u,g)};Zt.mergeOptions({closePopupOnClick:!0}),Zt.include({openPopup:function(u,g,S){return this._initOverlay(nv,u,g,S).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),$i.include({bindPopup:function(u,g){return this._popup=this._initOverlay(nv,this._popup,u,g),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof Qa||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Lc(u);var g=u.layer||u.target;if(this._popup._source===g&&!(g instanceof al)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=g,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var sv=ga.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){ga.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){ga.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=ga.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",g=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=er("div",g),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var g,S,E=this._map,R=this._container,Z=E.latLngToContainerPoint(E.getCenter()),le=E.layerPointToContainerPoint(u),ve=this.options.direction,_e=R.offsetWidth,Me=R.offsetHeight,Qe=z(this.options.offset),bt=this._getAnchor();ve==="top"?(g=_e/2,S=Me):ve==="bottom"?(g=_e/2,S=0):ve==="center"?(g=_e/2,S=Me/2):ve==="right"?(g=0,S=Me/2):ve==="left"?(g=_e,S=Me/2):le.x<Z.x?(ve="right",g=0,S=Me/2):(ve="left",g=_e+(Qe.x+bt.x)*2,S=Me/2),u=u.subtract(z(g,S,!0)).add(Qe).add(bt),en(R,"leaflet-tooltip-right"),en(R,"leaflet-tooltip-left"),en(R,"leaflet-tooltip-top"),en(R,"leaflet-tooltip-bottom"),Dt(R,"leaflet-tooltip-"+ve),ln(R,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&di(this._container,u)},_animateZoom:function(u){var g=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(g)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),FY=function(u,g){return new sv(u,g)};Zt.include({openTooltip:function(u,g,S){return this._initOverlay(sv,u,g,S).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),$i.include({bindTooltip:function(u,g){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(sv,this._tooltip,u,g),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var g=u?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[g](S),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof Qa||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var g=typeof u.getElement=="function"&&u.getElement();g&&(Tt(g,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),Tt(g,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var g=typeof u.getElement=="function"&&u.getElement();g&&g.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var g=this;this._map.once("moveend",function(){g._openOnceFlag=!1,g._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var g=u.latlng,S,E;this._tooltip.options.sticky&&u.originalEvent&&(S=this._map.mouseEventToContainerPoint(u.originalEvent),E=this._map.containerPointToLayerPoint(S),g=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(g)}});var gO=mu.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var g=u&&u.tagName==="DIV"?u:document.createElement("div"),S=this.options;if(S.html instanceof Element?(Wg(g),g.appendChild(S.html)):g.innerHTML=S.html!==!1?S.html:"",S.bgPos){var E=z(S.bgPos);g.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(g,"icon"),g},createShadow:function(){return null}});function zY(u){return new gO(u)}mu.Default=cf;var df=$i.extend({options:{tileSize:256,opacity:1,updateWhenIdle:mt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){x(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),zr(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(du(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(uu(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof q?u:new q(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var g=this.getPane().children,S=-u(-1/0,1/0),E=0,R=g.length,Z;E<R;E++)Z=g[E].style.zIndex,g[E]!==this._container&&Z&&(S=u(S,+Z));isFinite(S)&&(this.options.zIndex=S+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!mt.ielt9){di(this._container,this.options.opacity);var u=+new Date,g=!1,S=!1;for(var E in this._tiles){var R=this._tiles[E];if(!(!R.current||!R.loaded)){var Z=Math.min(1,(u-R.loaded)/200);di(R.el,Z),Z<1?g=!0:(R.active?S=!0:this._onOpaqueTile(R),R.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),g&&(A(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=er("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,g=this.options.maxZoom;if(u!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===u?(this._levels[S].el.style.zIndex=g-Math.abs(u-S),this._onUpdateLevel(S)):(zr(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var E=this._levels[u],R=this._map;return E||(E=this._levels[u]={},E.el=er("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=g,E.origin=R.project(R.unproject(R.getPixelOrigin()),u).round(),E.zoom=u,this._setZoomTransform(E,R.getCenter(),R.getZoom()),m(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var u,g,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)g=this._tiles[u],g.retain=g.current;for(u in this._tiles)if(g=this._tiles[u],g.current&&!g.active){var E=g.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var g in this._tiles)this._tiles[g].coords.z===u&&this._removeTile(g)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)zr(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,g,S,E){var R=Math.floor(u/2),Z=Math.floor(g/2),le=S-1,ve=new q(+R,+Z);ve.z=+le;var _e=this._tileCoordsToKey(ve),Me=this._tiles[_e];return Me&&Me.active?(Me.retain=!0,!0):(Me&&Me.loaded&&(Me.retain=!0),le>E?this._retainParent(R,Z,le,E):!1)},_retainChildren:function(u,g,S,E){for(var R=2*u;R<2*u+2;R++)for(var Z=2*g;Z<2*g+2;Z++){var le=new q(R,Z);le.z=S+1;var ve=this._tileCoordsToKey(le),_e=this._tiles[ve];if(_e&&_e.active){_e.retain=!0;continue}else _e&&_e.loaded&&(_e.retain=!0);S+1<E&&this._retainChildren(R,Z,S+1,E)}},_resetView:function(u){var g=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),g,g)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var g=this.options;return g.minNativeZoom!==void 0&&u<g.minNativeZoom?g.minNativeZoom:g.maxNativeZoom!==void 0&&g.maxNativeZoom<u?g.maxNativeZoom:u},_setView:function(u,g,S,E){var R=Math.round(g);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var Z=this.options.updateWhenZooming&&R!==this._tileZoom;(!E||Z)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(u),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(u,g)},_setZoomTransforms:function(u,g){for(var S in this._levels)this._setZoomTransform(this._levels[S],u,g)},_setZoomTransform:function(u,g,S){var E=this._map.getZoomScale(S,u.zoom),R=u.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(g,S)).round();mt.any3d?Mc(u.el,R,E):ln(u.el,R)},_resetGrid:function(){var u=this._map,g=u.options.crs,S=this._tileSize=this.getTileSize(),E=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=g.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,g.wrapLng[0]],E).x/S.x),Math.ceil(u.project([0,g.wrapLng[1]],E).x/S.y)],this._wrapY=g.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([g.wrapLat[0],0],E).y/S.x),Math.ceil(u.project([g.wrapLat[1],0],E).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var g=this._map,S=g._animatingZoom?Math.max(g._animateToZoom,g.getZoom()):g.getZoom(),E=g.getZoomScale(S,this._tileZoom),R=g.project(u,this._tileZoom).floor(),Z=g.getSize().divideBy(E*2);return new H(R.subtract(Z),R.add(Z))},_update:function(u){var g=this._map;if(g){var S=this._clampZoom(g.getZoom());if(u===void 0&&(u=g.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(u),R=this._pxBoundsToTileRange(E),Z=R.getCenter(),le=[],ve=this.options.keepBuffer,_e=new H(R.getBottomLeft().subtract([ve,-ve]),R.getTopRight().add([ve,-ve]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Me in this._tiles){var Qe=this._tiles[Me].coords;(Qe.z!==this._tileZoom||!_e.contains(new q(Qe.x,Qe.y)))&&(this._tiles[Me].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(u,S);return}for(var bt=R.min.y;bt<=R.max.y;bt++)for(var Rt=R.min.x;Rt<=R.max.x;Rt++){var ss=new q(Rt,bt);if(ss.z=this._tileZoom,!!this._isValidTile(ss)){var kn=this._tiles[this._tileCoordsToKey(ss)];kn?kn.current=!0:le.push(ss)}}if(le.sort(function(Ns,gu){return Ns.distanceTo(Z)-gu.distanceTo(Z)}),le.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var hi=document.createDocumentFragment();for(Rt=0;Rt<le.length;Rt++)this._addTile(le[Rt],hi);this._level.el.appendChild(hi)}}}},_isValidTile:function(u){var g=this._map.options.crs;if(!g.infinite){var S=this._globalTileRange;if(!g.wrapLng&&(u.x<S.min.x||u.x>S.max.x)||!g.wrapLat&&(u.y<S.min.y||u.y>S.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(u);return Se(this.options.bounds).overlaps(E)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var g=this._map,S=this.getTileSize(),E=u.scaleBy(S),R=E.add(S),Z=g.unproject(E,u.z),le=g.unproject(R,u.z);return[Z,le]},_tileCoordsToBounds:function(u){var g=this._tileCoordsToNwSe(u),S=new ge(g[0],g[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var g=u.split(":"),S=new q(+g[0],+g[1]);return S.z=+g[2],S},_removeTile:function(u){var g=this._tiles[u];g&&(zr(g.el),delete this._tiles[u],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){Dt(u,"leaflet-tile");var g=this.getTileSize();u.style.width=g.x+"px",u.style.height=g.y+"px",u.onselectstart=m,u.onmousemove=m,mt.ielt9&&this.options.opacity<1&&di(u,this.options.opacity)},_addTile:function(u,g){var S=this._getTilePos(u),E=this._tileCoordsToKey(u),R=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(R),this.createTile.length<2&&I(o(this._tileReady,this,u,null,R)),ln(R,S),this._tiles[E]={el:R,coords:u,current:!0},g.appendChild(R),this.fire("tileloadstart",{tile:R,coords:u})},_tileReady:function(u,g,S){g&&this.fire("tileerror",{error:g,tile:S,coords:u});var E=this._tileCoordsToKey(u);S=this._tiles[E],S&&(S.loaded=+new Date,this._map._fadeAnimated?(di(S.el,0),A(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),g||(Dt(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),mt.ielt9||!this._map._fadeAnimated?I(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var g=new q(this._wrapX?h(u.x,this._wrapX):u.x,this._wrapY?h(u.y,this._wrapY):u.y);return g.z=u.z,g},_pxBoundsToTileRange:function(u){var g=this.getTileSize();return new H(u.min.unscaleBy(g).floor(),u.max.unscaleBy(g).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function BY(u){return new df(u)}var xu=df.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,g){this._url=u,g=x(this,g),g.detectRetina&&mt.retina&&g.maxZoom>0?(g.tileSize=Math.floor(g.tileSize/2),g.zoomReverse?(g.zoomOffset--,g.minZoom=Math.min(g.maxZoom,g.minZoom+1)):(g.zoomOffset++,g.maxZoom=Math.max(g.minZoom,g.maxZoom-1)),g.minZoom=Math.max(0,g.minZoom)):g.zoomReverse?g.minZoom=Math.min(g.maxZoom,g.minZoom):g.maxZoom=Math.max(g.minZoom,g.maxZoom),typeof g.subdomains=="string"&&(g.subdomains=g.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,g){return this._url===u&&g===void 0&&(g=!0),this._url=u,g||this.redraw(),this},createTile:function(u,g){var S=document.createElement("img");return Tt(S,"load",o(this._tileOnLoad,this,g,S)),Tt(S,"error",o(this._tileOnError,this,g,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(u),S},getTileUrl:function(u){var g={r:mt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-u.y;this.options.tms&&(g.y=S),g["-y"]=S}return j(this._url,i(g,this.options))},_tileOnLoad:function(u,g){mt.ielt9?setTimeout(o(u,this,null,g),0):u(null,g)},_tileOnError:function(u,g,S){var E=this.options.errorTileUrl;E&&g.getAttribute("src")!==E&&(g.src=E),u(S,g)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,g=this.options.maxZoom,S=this.options.zoomReverse,E=this.options.zoomOffset;return S&&(u=g-u),u+E},_getSubdomain:function(u){var g=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[g]},_abortLoading:function(){var u,g;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(g=this._tiles[u].el,g.onload=m,g.onerror=m,!g.complete)){g.src=P;var S=this._tiles[u].coords;zr(g),delete this._tiles[u],this.fire("tileabort",{tile:g,coords:S})}},_removeTile:function(u){var g=this._tiles[u];if(g)return g.el.setAttribute("src",P),df.prototype._removeTile.call(this,u)},_tileReady:function(u,g,S){if(!(!this._map||S&&S.getAttribute("src")===P))return df.prototype._tileReady.call(this,u,g,S)}});function vO(u,g){return new xu(u,g)}var yO=xu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,g){this._url=u;var S=i({},this.defaultWmsParams);for(var E in g)E in this.options||(S[E]=g[E]);g=x(this,g);var R=g.detectRetina&&mt.retina?2:1,Z=this.getTileSize();S.width=Z.x*R,S.height=Z.y*R,this.wmsParams=S},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var g=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[g]=this._crs.code,xu.prototype.onAdd.call(this,u)},getTileUrl:function(u){var g=this._tileCoordsToNwSe(u),S=this._crs,E=X(S.project(g[0]),S.project(g[1])),R=E.min,Z=E.max,le=(this._wmsVersion>=1.3&&this._crs===uO?[R.y,R.x,Z.y,Z.x]:[R.x,R.y,Z.x,Z.y]).join(","),ve=xu.prototype.getTileUrl.call(this,u);return ve+y(this.wmsParams,ve,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+le},setParams:function(u,g){return i(this.wmsParams,u),g||this.redraw(),this}});function VY(u,g){return new yO(u,g)}xu.WMS=yO,vO.wms=VY;var to=$i.extend({options:{padding:.1},initialize:function(u){x(this,u),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Dt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,g){var S=this._map.getZoomScale(g,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,g),Z=E.multiplyBy(-S).add(R).subtract(this._map._getNewPixelOrigin(u,g));mt.any3d?Mc(this._container,Z,S):ln(this._container,Z)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,g=this._map.getSize(),S=this._map.containerPointToLayerPoint(g.multiplyBy(-u)).round();this._bounds=new H(S,S.add(g.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),jO=to.extend({options:{tolerance:0},getEvents:function(){var u=to.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){to.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");Tt(u,"mousemove",this._onMouseMove,this),Tt(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Tt(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,zr(this._container),yr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var g in this._layers)u=this._layers[g],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){to.prototype._update.call(this);var u=this._bounds,g=this._container,S=u.getSize(),E=mt.retina?2:1;ln(g,u.min),g.width=E*S.x,g.height=E*S.y,g.style.width=S.x+"px",g.style.height=S.y+"px",mt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){to.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[c(u)]=u;var g=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=g),this._drawLast=g,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var g=u._order,S=g.next,E=g.prev;S?S.prev=E:this._drawLast=E,E?E.next=S:this._drawFirst=S,delete u._order,delete this._layers[c(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var g=u.options.dashArray.split(/[, ]+/),S=[],E,R;for(R=0;R<g.length;R++){if(E=Number(g[R]),isNaN(E))return;S.push(E)}u.options._dashArray=S}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||I(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var g=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new H,this._redrawBounds.extend(u._pxBounds.min.subtract([g,g])),this._redrawBounds.extend(u._pxBounds.max.add([g,g]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var g=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,g.x,g.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,g=this._redrawBounds;if(this._ctx.save(),g){var S=g.getSize();this._ctx.beginPath(),this._ctx.rect(g.min.x,g.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)u=E.layer,(!g||u._pxBounds&&u._pxBounds.intersects(g))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,g){if(this._drawing){var S,E,R,Z,le=u._parts,ve=le.length,_e=this._ctx;if(ve){for(_e.beginPath(),S=0;S<ve;S++){for(E=0,R=le[S].length;E<R;E++)Z=le[S][E],_e[E?"lineTo":"moveTo"](Z.x,Z.y);g&&_e.closePath()}this._fillStroke(_e,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var g=u._point,S=this._ctx,E=Math.max(Math.round(u._radius),1),R=(Math.max(Math.round(u._radiusY),1)||E)/E;R!==1&&(S.save(),S.scale(1,R)),S.beginPath(),S.arc(g.x,g.y/R,E,0,Math.PI*2,!1),R!==1&&S.restore(),this._fillStroke(S,u)}},_fillStroke:function(u,g){var S=g.options;S.fill&&(u.globalAlpha=S.fillOpacity,u.fillStyle=S.fillColor||S.color,u.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(u.setLineDash&&u.setLineDash(g.options&&g.options._dashArray||[]),u.globalAlpha=S.opacity,u.lineWidth=S.weight,u.strokeStyle=S.color,u.lineCap=S.lineCap,u.lineJoin=S.lineJoin,u.stroke())},_onClick:function(u){for(var g=this._map.mouseEventToLayerPoint(u),S,E,R=this._drawFirst;R;R=R.next)S=R.layer,S.options.interactive&&S._containsPoint(g)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(S))&&(E=S);this._fireEvent(E?[E]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var g=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,g)}},_handleMouseOut:function(u){var g=this._hoveredLayer;g&&(en(this._container,"leaflet-interactive"),this._fireEvent([g],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,g){if(!this._mouseHoverThrottled){for(var S,E,R=this._drawFirst;R;R=R.next)S=R.layer,S.options.interactive&&S._containsPoint(g)&&(E=S);E!==this._hoveredLayer&&(this._handleMouseOut(u),E&&(Dt(this._container,"leaflet-interactive"),this._fireEvent([E],u,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,g,S){this._map._fireDOMEvent(g,S||g.type,u)},_bringToFront:function(u){var g=u._order;if(g){var S=g.next,E=g.prev;if(S)S.prev=E;else return;E?E.next=S:S&&(this._drawFirst=S),g.prev=this._drawLast,this._drawLast.next=g,g.next=null,this._drawLast=g,this._requestRedraw(u)}},_bringToBack:function(u){var g=u._order;if(g){var S=g.next,E=g.prev;if(E)E.next=S;else return;S?S.prev=E:E&&(this._drawLast=E),g.prev=null,g.next=this._drawFirst,this._drawFirst.prev=g,this._drawFirst=g,this._requestRedraw(u)}}});function bO(u){return mt.canvas?new jO(u):null}var uf=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),UY={_initContainer:function(){this._container=er("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(to.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var g=u._container=uf("shape");Dt(g,"leaflet-vml-shape "+(this.options.className||"")),g.coordsize="1 1",u._path=uf("path"),g.appendChild(u._path),this._updateStyle(u),this._layers[c(u)]=u},_addPath:function(u){var g=u._container;this._container.appendChild(g),u.options.interactive&&u.addInteractiveTarget(g)},_removePath:function(u){var g=u._container;zr(g),u.removeInteractiveTarget(g),delete this._layers[c(u)]},_updateStyle:function(u){var g=u._stroke,S=u._fill,E=u.options,R=u._container;R.stroked=!!E.stroke,R.filled=!!E.fill,E.stroke?(g||(g=u._stroke=uf("stroke")),R.appendChild(g),g.weight=E.weight+"px",g.color=E.color,g.opacity=E.opacity,E.dashArray?g.dashStyle=N(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):g.dashStyle="",g.endcap=E.lineCap.replace("butt","flat"),g.joinstyle=E.lineJoin):g&&(R.removeChild(g),u._stroke=null),E.fill?(S||(S=u._fill=uf("fill")),R.appendChild(S),S.color=E.fillColor||E.color,S.opacity=E.fillOpacity):S&&(R.removeChild(S),u._fill=null)},_updateCircle:function(u){var g=u._point.round(),S=Math.round(u._radius),E=Math.round(u._radiusY||S);this._setPath(u,u._empty()?"M0 0":"AL "+g.x+","+g.y+" "+S+","+E+" 0,"+65535*360)},_setPath:function(u,g){u._path.v=g},_bringToFront:function(u){du(u._container)},_bringToBack:function(u){uu(u._container)}},iv=mt.vml?uf:De,hf=to.extend({_initContainer:function(){this._container=iv("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=iv("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){zr(this._container),yr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){to.prototype._update.call(this);var u=this._bounds,g=u.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(g))&&(this._svgSize=g,S.setAttribute("width",g.x),S.setAttribute("height",g.y)),ln(S,u.min),S.setAttribute("viewBox",[u.min.x,u.min.y,g.x,g.y].join(" ")),this.fire("update")}},_initPath:function(u){var g=u._path=iv("path");u.options.className&&Dt(g,u.options.className),u.options.interactive&&Dt(g,"leaflet-interactive"),this._updateStyle(u),this._layers[c(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){zr(u._path),u.removeInteractiveTarget(u._path),delete this._layers[c(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var g=u._path,S=u.options;g&&(S.stroke?(g.setAttribute("stroke",S.color),g.setAttribute("stroke-opacity",S.opacity),g.setAttribute("stroke-width",S.weight),g.setAttribute("stroke-linecap",S.lineCap),g.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?g.setAttribute("stroke-dasharray",S.dashArray):g.removeAttribute("stroke-dasharray"),S.dashOffset?g.setAttribute("stroke-dashoffset",S.dashOffset):g.removeAttribute("stroke-dashoffset")):g.setAttribute("stroke","none"),S.fill?(g.setAttribute("fill",S.fillColor||S.color),g.setAttribute("fill-opacity",S.fillOpacity),g.setAttribute("fill-rule",S.fillRule||"evenodd")):g.setAttribute("fill","none"))},_updatePoly:function(u,g){this._setPath(u,Ue(u._parts,g))},_updateCircle:function(u){var g=u._point,S=Math.max(Math.round(u._radius),1),E=Math.max(Math.round(u._radiusY),1)||S,R="a"+S+","+E+" 0 1,0 ",Z=u._empty()?"M0 0":"M"+(g.x-S)+","+g.y+R+S*2+",0 "+R+-S*2+",0 ";this._setPath(u,Z)},_setPath:function(u,g){u._path.setAttribute("d",g)},_bringToFront:function(u){du(u._path)},_bringToBack:function(u){uu(u._path)}});mt.vml&&hf.include(UY);function wO(u){return mt.svg||mt.vml?new hf(u):null}Zt.include({getRenderer:function(u){var g=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return g||(g=this._renderer=this._createRenderer()),this.hasLayer(g)||this.addLayer(g),g},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var g=this._paneRenderers[u];return g===void 0&&(g=this._createRenderer({pane:u}),this._paneRenderers[u]=g),g},_createRenderer:function(u){return this.options.preferCanvas&&bO(u)||wO(u)}});var NO=fu.extend({initialize:function(u,g){fu.prototype.initialize.call(this,this._boundsToLatLngs(u),g)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=Se(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function WY(u,g){return new NO(u,g)}hf.create=iv,hf.pointsToPath=Ue,eo.geometryToLayer=Qg,eo.coordsToLatLng=mN,eo.coordsToLatLngs=Jg,eo.latLngToCoords=fN,eo.latLngsToCoords=ev,eo.getFeature=pu,eo.asFeature=tv,Zt.mergeOptions({boxZoom:!0});var SO=xa.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){Tt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){yr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){zr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),rf(),Yw(),this._startPoint=this._map.mouseEventToContainerPoint(u),Tt(document,{contextmenu:Lc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=er("div","leaflet-zoom-box",this._container),Dt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var g=new H(this._point,this._startPoint),S=g.getSize();ln(this._box,g.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(zr(this._box),en(this._container,"leaflet-crosshair")),nf(),Xw(),yr(document,{contextmenu:Lc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var g=new ge(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(g).fire("boxzoomend",{boxZoomBounds:g})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Zt.addInitHook("addHandler","boxZoom",SO),Zt.mergeOptions({doubleClickZoom:!0});var _O=xa.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var g=this._map,S=g.getZoom(),E=g.options.zoomDelta,R=u.originalEvent.shiftKey?S-E:S+E;g.options.doubleClickZoom==="center"?g.setZoom(R):g.setZoomAround(u.containerPoint,R)}});Zt.addInitHook("addHandler","doubleClickZoom",_O),Zt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var PO=xa.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new il(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}Dt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){en(this._map._container,"leaflet-grab"),en(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var g=Se(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(g.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(g.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var g=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(g),this._prunePositions(g)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),g=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=g.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,g){return u-(u-g)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),g=this._offsetLimit;u.x<g.min.x&&(u.x=this._viscousLimit(u.x,g.min.x)),u.y<g.min.y&&(u.y=this._viscousLimit(u.y,g.min.y)),u.x>g.max.x&&(u.x=this._viscousLimit(u.x,g.max.x)),u.y>g.max.y&&(u.y=this._viscousLimit(u.y,g.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,g=Math.round(u/2),S=this._initialWorldOffset,E=this._draggable._newPos.x,R=(E-g+S)%u+g-S,Z=(E+g+S)%u-g-S,le=Math.abs(R+S)<Math.abs(Z+S)?R:Z;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=le},_onDragEnd:function(u){var g=this._map,S=g.options,E=!S.inertia||u.noInertia||this._times.length<2;if(g.fire("dragend",u),E)g.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),Z=(this._lastTime-this._times[0])/1e3,le=S.easeLinearity,ve=R.multiplyBy(le/Z),_e=ve.distanceTo([0,0]),Me=Math.min(S.inertiaMaxSpeed,_e),Qe=ve.multiplyBy(Me/_e),bt=Me/(S.inertiaDeceleration*le),Rt=Qe.multiplyBy(-bt/2).round();!Rt.x&&!Rt.y?g.fire("moveend"):(Rt=g._limitOffset(Rt,g.options.maxBounds),I(function(){g.panBy(Rt,{duration:bt,easeLinearity:le,noMoveStart:!0,animate:!0})}))}}});Zt.addInitHook("addHandler","dragging",PO),Zt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var CO=xa.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),Tt(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),yr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,g=document.documentElement,S=u.scrollTop||g.scrollTop,E=u.scrollLeft||g.scrollLeft;this._map._container.focus(),window.scrollTo(E,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var g=this._panKeys={},S=this.keyCodes,E,R;for(E=0,R=S.left.length;E<R;E++)g[S.left[E]]=[-1*u,0];for(E=0,R=S.right.length;E<R;E++)g[S.right[E]]=[u,0];for(E=0,R=S.down.length;E<R;E++)g[S.down[E]]=[0,u];for(E=0,R=S.up.length;E<R;E++)g[S.up[E]]=[0,-1*u]},_setZoomDelta:function(u){var g=this._zoomKeys={},S=this.keyCodes,E,R;for(E=0,R=S.zoomIn.length;E<R;E++)g[S.zoomIn[E]]=u;for(E=0,R=S.zoomOut.length;E<R;E++)g[S.zoomOut[E]]=-u},_addHooks:function(){Tt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){yr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var g=u.keyCode,S=this._map,E;if(g in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(E=this._panKeys[g],u.shiftKey&&(E=z(E).multiplyBy(3)),S.options.maxBounds&&(E=S._limitOffset(z(E),S.options.maxBounds)),S.options.worldCopyJump){var R=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(E)));S.panTo(R)}else S.panBy(E)}else if(g in this._zoomKeys)S.setZoom(S.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[g]);else if(g===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;Lc(u)}}});Zt.addInitHook("addHandler","keyboard",CO),Zt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var kO=xa.extend({addHooks:function(){Tt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){yr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var g=QE(u),S=this._map.options.wheelDebounceTime;this._delta+=g,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var E=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),E),Lc(u)},_performZoom:function(){var u=this._map,g=u.getZoom(),S=this._map.options.zoomSnap||0;u._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,Z=S?Math.ceil(R/S)*S:R,le=u._limitZoom(g+(this._delta>0?Z:-Z))-g;this._delta=0,this._startTime=null,le&&(u.options.scrollWheelZoom==="center"?u.setZoom(g+le):u.setZoomAround(this._lastMousePos,g+le))}});Zt.addInitHook("addHandler","scrollWheelZoom",kO);var HY=600;Zt.mergeOptions({tapHold:mt.touchNative&&mt.safari&&mt.mobile,tapTolerance:15});var TO=xa.extend({addHooks:function(){Tt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){yr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var g=u.touches[0];this._startPos=this._newPos=new q(g.clientX,g.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Tt(document,"touchend",In),Tt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",g))},this),HY),Tt(document,"touchend touchcancel contextmenu",this._cancel,this),Tt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){yr(document,"touchend",In),yr(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),yr(document,"touchend touchcancel contextmenu",this._cancel,this),yr(document,"touchmove",this._onMove,this)},_onMove:function(u){var g=u.touches[0];this._newPos=new q(g.clientX,g.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,g){var S=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY});S._simulated=!0,g.target.dispatchEvent(S)}});Zt.addInitHook("addHandler","tapHold",TO),Zt.mergeOptions({touchZoom:mt.touch,bounceAtZoomLimits:!0});var AO=xa.extend({addHooks:function(){Dt(this._map._container,"leaflet-touch-zoom"),Tt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){en(this._map._container,"leaflet-touch-zoom"),yr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var g=this._map;if(!(!u.touches||u.touches.length!==2||g._animatingZoom||this._zooming)){var S=g.mouseEventToContainerPoint(u.touches[0]),E=g.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=g.getSize()._divideBy(2),this._startLatLng=g.containerPointToLatLng(this._centerPoint),g.options.touchZoom!=="center"&&(this._pinchStartLatLng=g.containerPointToLatLng(S.add(E)._divideBy(2))),this._startDist=S.distanceTo(E),this._startZoom=g.getZoom(),this._moved=!1,this._zooming=!0,g._stop(),Tt(document,"touchmove",this._onTouchMove,this),Tt(document,"touchend touchcancel",this._onTouchEnd,this),In(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var g=this._map,S=g.mouseEventToContainerPoint(u.touches[0]),E=g.mouseEventToContainerPoint(u.touches[1]),R=S.distanceTo(E)/this._startDist;if(this._zoom=g.getScaleZoom(R,this._startZoom),!g.options.bounceAtZoomLimits&&(this._zoom<g.getMinZoom()&&R<1||this._zoom>g.getMaxZoom()&&R>1)&&(this._zoom=g._limitZoom(this._zoom)),g.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var Z=S._add(E)._divideBy(2)._subtract(this._centerPoint);if(R===1&&Z.x===0&&Z.y===0)return;this._center=g.unproject(g.project(this._pinchStartLatLng,this._zoom).subtract(Z),this._zoom)}this._moved||(g._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var le=o(g._move,g,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=I(le,this,!0),In(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),yr(document,"touchmove",this._onTouchMove,this),yr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Zt.addInitHook("addHandler","touchZoom",AO),Zt.BoxZoom=SO,Zt.DoubleClickZoom=_O,Zt.Drag=PO,Zt.Keyboard=CO,Zt.ScrollWheelZoom=kO,Zt.TapHold=TO,Zt.TouchZoom=AO,n.Bounds=H,n.Browser=mt,n.CRS=we,n.Canvas=jO,n.Circle=hN,n.CircleMarker=Xg,n.Class=D,n.Control=Ri,n.DivIcon=gO,n.DivOverlay=ga,n.DomEvent=cY,n.DomUtil=oY,n.Draggable=il,n.Evented=Q,n.FeatureGroup=Qa,n.GeoJSON=eo,n.GridLayer=df,n.Handler=xa,n.Icon=mu,n.ImageOverlay=rv,n.LatLng=F,n.LatLngBounds=ge,n.Layer=$i,n.LayerGroup=hu,n.LineUtil=wY,n.Map=Zt,n.Marker=Yg,n.Mixin=xY,n.Path=al,n.Point=q,n.PolyUtil=gY,n.Polygon=fu,n.Polyline=Ja,n.Popup=nv,n.PosAnimation=JE,n.Projection=NY,n.Rectangle=NO,n.Renderer=to,n.SVG=hf,n.SVGOverlay=xO,n.TileLayer=xu,n.Tooltip=sv,n.Transformation=Ie,n.Util=V,n.VideoOverlay=pO,n.bind=o,n.bounds=X,n.canvas=bO,n.circle=EY,n.circleMarker=AY,n.control=of,n.divIcon=zY,n.extend=i,n.featureGroup=CY,n.geoJSON=fO,n.geoJson=DY,n.gridLayer=BY,n.icon=kY,n.imageOverlay=IY,n.latLng=pe,n.latLngBounds=Se,n.layerGroup=PY,n.map=dY,n.marker=TY,n.point=z,n.polygon=MY,n.polyline=OY,n.popup=$Y,n.rectangle=WY,n.setOptions=x,n.stamp=c,n.svg=wO,n.svgOverlay=RY,n.tileLayer=vO,n.tooltip=FY,n.transformation=Ne,n.version=s,n.videoOverlay=LY;var qY=window.L;n.noConflict=function(){return window.L=qY,this},window.L=n})})(m2,m2.exports);var $m=m2.exports;const rr=ur($m);delete rr.Icon.Default.prototype._getIconUrl;rr.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function K7({deliveryId:e,userType:t,onStatusUpdate:n}){const s=b.useRef(null),i=b.useRef(null),[a,o]=b.useState(null),[l,c]=b.useState(null),[d,h]=b.useState(!0),[m,f]=b.useState(null),[v,p]=b.useState({}),[x,y]=b.useState(null),[w,j]=b.useState(!1);b.useEffect(()=>{if(!s.current||i.current)return;const B=rr.map(s.current,{center:[26.4499,80.3319],zoom:13,zoomControl:!0});return rr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(B),i.current=B,N(),()=>{l&&l.close(),i.current&&(i.current.remove(),i.current=null)}},[]);const N=async()=>{try{if(h(!0),t==="customer"){const B=await fetch(`/api/orders/${e}/tracking`);if(!B.ok)throw new Error("Failed to fetch order data");const z=await B.json(),H=await fetch(`/api/deliveries/${e}/tracking`);let X=null;H.ok&&(X=await H.json()),o({delivery:X==null?void 0:X.delivery,currentLocation:X==null?void 0:X.currentLocation,route:X==null?void 0:X.route,statusHistory:(X==null?void 0:X.statusHistory)||[]})}else{const B=await fetch(`/api/tracking/${e}`);if(!B.ok)throw new Error("Failed to load tracking data");const z=await B.json();o(z),i.current&&z.route&&_(z)}C(),h(!1)}catch(B){console.error("Error loading tracking data:",B),f("Failed to load tracking data"),h(!1)}},C=()=>{const z=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,H=new WebSocket(z);H.onopen=()=>{console.log("WebSocket connected"),H.send(JSON.stringify({type:"auth",userId:1,userType:t,sessionId:`${Date.now()}_${Math.random()}`})),H.send(JSON.stringify({type:"subscribe_tracking",deliveryId:e}))},H.onmessage=X=>{const ge=JSON.parse(X.data);P(ge)},H.onclose=()=>{console.log("WebSocket disconnected"),setTimeout(()=>{(!l||l.readyState===WebSocket.CLOSED)&&C()},3e3)},H.onerror=X=>{console.error("WebSocket error:",X)},c(H)},P=B=>{switch(B.type){case"location_update":B.deliveryId===e&&O(B.latitude,B.longitude);break;case"status_update":B.deliveryId===e&&M(B.status,B.description);break;default:console.log("Unknown message type:",B.type)}},k=(B,z)=>{const H=[40,40];let X="";switch(B){case"pickup":X=`
          <div style="
            width: 40px; 
            height: 40px; 
            background: linear-gradient(135deg, #10B981, #059669);
            border: 3px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
            position: relative;
          ">
            <svg width="20" height="20" fill="white" viewBox="0 0 24 24">
              <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z"/>
              <path d="m8 7 4-4 4 4"/>
            </svg>
            <div style="
              position: absolute;
              bottom: -8px;
              left: 50%;
              transform: translateX(-50%);
              background: #10B981;
              color: white;
              padding: 2px 6px;
              border-radius: 8px;
              font-size: 8px;
              font-weight: bold;
              white-space: nowrap;
            ">PICKUP</div>
          </div>
        `;break;case"delivery":X=`
          <div style="
            width: 40px; 
            height: 40px; 
            background: linear-gradient(135deg, #EF4444, #DC2626);
            border: 3px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
            position: relative;
          ">
            <svg width="20" height="20" fill="white" viewBox="0 0 24 24">
              <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
              <polyline points="9,22 9,12 15,12 15,22"/>
            </svg>
            <div style="
              position: absolute;
              bottom: -8px;
              left: 50%;
              transform: translateX(-50%);
              background: #EF4444;
              color: white;
              padding: 2px 6px;
              border-radius: 8px;
              font-size: 8px;
              font-weight: bold;
              white-space: nowrap;
            ">DELIVERY</div>
          </div>
        `;break;case"delivery_partner":X=`
          <div style="
            width: 40px; 
            height: 40px; 
            background: linear-gradient(135deg, #3B82F6, #2563EB);
            border: 3px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
            position: relative;
            ${z==="en_route_pickup"||z==="en_route_delivery"?"animation: pulse 2s infinite;":""}
          ">
            <svg width="20" height="20" fill="white" viewBox="0 0 24 24">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
            <div style="
              position: absolute;
              bottom: -8px;
              left: 50%;
              transform: translateX(-50%);
              background: #3B82F6;
              color: white;
              padding: 2px 6px;
              border-radius: 8px;
              font-size: 8px;
              font-weight: bold;
              white-space: nowrap;
            ">RIDER</div>
          </div>
          <style>
            @keyframes pulse {
              0%, 100% { transform: scale(1); }
              50% { transform: scale(1.1); }
            }
          </style>
        `;break}return rr.divIcon({html:X,iconSize:H,className:"custom-marker",iconAnchor:[20,20],popupAnchor:[0,-20]})},_=B=>{var we,Be,Pe;if(!i.current||!B.route)return;const z=i.current;Object.values(v).forEach(Ee=>{Ee&&z.removeLayer(Ee)}),x&&z.removeLayer(x);const H={},X=rr.marker([B.route.pickupLocation.lat,B.route.pickupLocation.lng],{icon:k("pickup")}).addTo(z);X.bindPopup(`
      <div style="padding: 10px; min-width: 200px;">
        <h3 style="margin: 0 0 8px 0; color: #10B981; font-weight: bold;">
           Pickup Location
        </h3>
        <p style="margin: 0; color: #666;">
          ${((we=B.delivery)==null?void 0:we.pickupAddress)||"Shop/Store Location"}
        </p>
        <div style="margin-top: 8px;">
          <button onclick="window.open('https://www.google.com/maps/search/?api=1&query=${B.route.pickupLocation.lat},${B.route.pickupLocation.lng}', '_blank')" 
                  style="background: #10B981; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer;">
            Open in Google Maps
          </button>
        </div>
      </div>
    `),H.pickup=X;const ge=rr.marker([B.route.deliveryLocation.lat,B.route.deliveryLocation.lng],{icon:k("delivery")}).addTo(z);if(ge.bindPopup(`
      <div style="padding: 10px; min-width: 200px;">
        <h3 style="margin: 0 0 8px 0; color: #EF4444; font-weight: bold;">
           Delivery Location
        </h3>
        <p style="margin: 0; color: #666;">
          ${((Be=B.delivery)==null?void 0:Be.deliveryAddress)||"Customer Location"}
        </p>
        <div style="margin-top: 8px;">
          <button onclick="window.open('https://www.google.com/maps/search/?api=1&query=${B.route.deliveryLocation.lat},${B.route.deliveryLocation.lng}', '_blank')" 
                  style="background: #EF4444; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer;">
            Open in Google Maps
          </button>
        </div>
      </div>
    `),H.delivery=ge,B.currentLocation){const Ee=rr.marker([B.currentLocation.latitude,B.currentLocation.longitude],{icon:k("delivery_partner",(Pe=B.delivery)==null?void 0:Pe.status)}).addTo(z),Ie=new Date(B.currentLocation.timestamp).toLocaleTimeString();Ee.bindPopup(`
        <div style="padding: 10px; min-width: 200px;">
          <h3 style="margin: 0 0 8px 0; color: #3B82F6; font-weight: bold;">
             Delivery Partner
          </h3>
          <p style="margin: 0; color: #666;">
            Last update: ${Ie}
          </p>
          <div style="margin-top: 8px;">
            <button onclick="window.open('https://www.google.com/maps/search/?api=1&query=${B.currentLocation.latitude},${B.currentLocation.longitude}', '_blank')" 
                    style="background: #3B82F6; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer;">
              Track in Google Maps
            </button>
          </div>
        </div>
      `),H.deliveryPartner=Ee}const Se=[[B.route.pickupLocation.lat,B.route.pickupLocation.lng],[B.route.deliveryLocation.lat,B.route.deliveryLocation.lng]];if(B.route.polyline)try{const Ee=T(B.route.polyline);Se.length=0,Ee.forEach(Ie=>{Se.push([Ie.lat,Ie.lng])})}catch(Ee){console.error("Error decoding polyline:",Ee)}const F=rr.polyline(Se,{color:"#3B82F6",weight:4,opacity:.8,dashArray:"10, 5"}).addTo(z);y(F),p(H);const pe=rr.featureGroup([X,ge,...H.deliveryPartner?[H.deliveryPartner]:[]]);z.fitBounds(pe.getBounds().pad(.1))},O=(B,z)=>{var ge;if(!i.current)return;const H=i.current;v.deliveryPartner&&H.removeLayer(v.deliveryPartner);const X=rr.marker([B,z],{icon:k("delivery_partner",(ge=a==null?void 0:a.delivery)==null?void 0:ge.status)}).addTo(H);X.bindPopup(`
      <div style="padding: 10px; min-width: 200px;">
        <h3 style="margin: 0 0 8px 0; color: #3B82F6; font-weight: bold;">
           Delivery Partner
        </h3>
        <p style="margin: 0; color: #666;">
          Current location (Live)
        </p>
        <div style="margin-top: 8px;">
          <button onclick="window.open('https://www.google.com/maps/search/?api=1&query=${B},${z}', '_blank')" 
                  style="background: #3B82F6; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer;">
            Track in Google Maps
          </button>
        </div>
      </div>
    `),p(Se=>({...Se,deliveryPartner:X})),o(Se=>Se?{...Se,currentLocation:{latitude:B,longitude:z,timestamp:new Date}}:null)},M=(B,z)=>{o(H=>H?{...H,delivery:{...H.delivery,status:B},statusHistory:[{status:B,description:z,timestamp:new Date().toISOString()},...H.statusHistory]}:null),n&&n(B)},T=B=>{const z=[];let H=0,X=0,ge=0;for(;H<B.length;){let Se=0,F=0,pe;do pe=B.charCodeAt(H++)-63,F|=(pe&31)<<Se,Se+=5;while(pe>=32);const we=F&1?~(F>>1):F>>1;X+=we,Se=0,F=0;do pe=B.charCodeAt(H++)-63,F|=(pe&31)<<Se,Se+=5;while(pe>=32);const Be=F&1?~(F>>1):F>>1;ge+=Be,z.push({lat:X/1e5,lng:ge/1e5})}return z},I=B=>{if(!(a!=null&&a.route))return;const{pickupLocation:z,deliveryLocation:H}=a.route,X=B==="pickup"?z:H;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(ge=>{const Se=ge.coords.latitude,F=ge.coords.longitude,pe=`https://www.google.com/maps/dir/${Se},${F}/${X.lat},${X.lng}`;window.open(pe,"_blank")},()=>{const ge=`https://www.google.com/maps/search/?api=1&query=${X.lat},${X.lng}`;window.open(ge,"_blank")});else{const ge=`https://www.google.com/maps/search/?api=1&query=${X.lat},${X.lng}`;window.open(ge,"_blank")}},A=()=>{if(!(a!=null&&a.route))return;const{pickupLocation:B,deliveryLocation:z}=a.route,H=`https://www.google.com/maps/dir/${B.lat},${B.lng}/${z.lat},${z.lng}`;window.open(H,"_blank")},V=()=>{if(t!=="delivery_partner")return;j(!0);const B=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(H=>{const X={deliveryId:e,deliveryPartnerId:1,latitude:H.coords.latitude,longitude:H.coords.longitude,heading:H.coords.heading,speed:H.coords.speed,accuracy:H.coords.accuracy};fetch("/api/tracking/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}),O(H.coords.latitude,H.coords.longitude)})};B();const z=setInterval(B,1e4);window.locationTrackingInterval=z},D=()=>{j(!1),window.locationTrackingInterval&&(clearInterval(window.locationTrackingInterval),window.locationTrackingInterval=null)},W=B=>B<1e3?`${B}m`:`${(B/1e3).toFixed(1)}km`,U=B=>{const z=Math.round(B/60);if(z<60)return`${z} min`;const H=Math.floor(z/60),X=z%60;return`${H}h ${X}m`},Q=B=>{switch(B){case"pending":return"bg-yellow-500";case"assigned":return"bg-blue-500";case"en_route_pickup":return"bg-orange-500";case"picked_up":return"bg-purple-500";case"en_route_delivery":return"bg-indigo-500";case"delivered":return"bg-green-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},q=B=>{switch(B){case"pending":return"Order Placed";case"assigned":return"Delivery Partner Assigned";case"en_route_pickup":return"En Route to Pickup";case"picked_up":return"Order Picked Up";case"en_route_delivery":return"En Route to Delivery";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return B}};return d?r.jsx(K,{className:"w-full",children:r.jsx(G,{className:"p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{children:"Loading tracking information..."})]})})})}):m?r.jsx(K,{className:"w-full",children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"text-center text-red-500",children:[r.jsx("p",{children:m}),r.jsx($,{onClick:N,className:"mt-4",children:"Retry"})]})})}):r.jsxs("div",{className:"w-full space-y-4",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-5 w-5"}),"Live Delivery Tracking"]}),(a==null?void 0:a.delivery)&&r.jsx(ue,{className:`${Q(a.delivery.status)} text-white`,children:q(a.delivery.status)})]})}),r.jsxs(G,{children:[(a==null?void 0:a.route)&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(n0,{className:"h-4 w-4 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Distance"}),r.jsx("p",{className:"text-sm text-gray-600",children:W(a.route.distance)})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(jt,{className:"h-4 w-4 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Est. Time"}),r.jsx("p",{className:"text-sm text-gray-600",children:U(a.route.estimatedDuration)})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_t,{className:"h-4 w-4 text-gray-500"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[t==="delivery_partner"&&r.jsxs("div",{className:"flex gap-1",children:[r.jsxs($,{onClick:()=>I("pickup"),variant:"outline",size:"sm",className:"text-xs",children:[r.jsx(ar,{className:"h-3 w-3 mr-1"}),"To Pickup"]}),r.jsxs($,{onClick:()=>I("delivery"),variant:"outline",size:"sm",className:"text-xs",children:[r.jsx(si,{className:"h-3 w-3 mr-1"}),"To Customer"]})]}),r.jsxs($,{onClick:A,variant:"outline",size:"sm",className:"text-xs",children:[r.jsx(n0,{className:"h-3 w-3 mr-1"}),"Full Route"]})]})]})]}),t==="delivery_partner"&&r.jsxs("div",{className:"flex items-center gap-4 p-3 bg-blue-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${w?"bg-green-500 animate-pulse":"bg-gray-300"}`}),r.jsx("span",{className:"text-sm font-medium",children:"Live Tracking"})]}),w?r.jsx($,{onClick:D,variant:"outline",size:"sm",children:"Stop Tracking"}):r.jsxs($,{onClick:V,size:"sm",className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),"Start Tracking"]})]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-5 w-5"}),"Delivery Route Map",r.jsx(ue,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Live"})]})}),r.jsx(G,{className:"p-0",children:r.jsx("div",{ref:s,className:"w-full h-96 bg-gray-100 rounded-b-lg",style:{minHeight:"500px"}})})]}),(a==null?void 0:a.statusHistory)&&a.statusHistory.length>0&&r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-5 w-5"}),"Delivery Timeline"]})}),r.jsx(G,{children:r.jsx("div",{className:"space-y-3",children:a.statusHistory.map((B,z)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${Q(B.status)} mt-1.5`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:q(B.status)}),B.description&&r.jsx("p",{className:"text-sm text-gray-600",children:B.description}),r.jsx("p",{className:"text-xs text-gray-400",children:new Date(B.timestamp).toLocaleString()})]})]},z))})})]})]})}function Pg({deliveryId:e,userType:t,onStatusUpdate:n}){return r.jsx(K7,{deliveryId:e,userType:t,onStatusUpdate:n})}const Jxe=ee.object({name:ee.string().min(1,"Product name is required"),description:ee.string().optional(),price:ee.string().min(1,"Price is required"),originalPrice:ee.string().optional(),categoryId:ee.number().min(1,"Category is required"),stock:ee.number().min(0,"Stock must be 0 or greater"),imageUrl:ee.string().optional(),images:ee.array(ee.string()).min(1,"At least 1 image is required").max(6,"Maximum 6 images allowed"),isFastSell:ee.boolean().default(!1),isOnOffer:ee.boolean().default(!1),offerPercentage:ee.number().min(0).max(100).default(0),offerEndDate:ee.string().optional(),preparationTime:ee.string().optional(),ingredients:ee.array(ee.string()).default([]),allergens:ee.array(ee.string()).default([]),spiceLevel:ee.string().optional(),isVegetarian:ee.boolean().default(!1),isVegan:ee.boolean().default(!1),nutritionInfo:ee.string().optional()}),ege=ee.object({name:ee.string().min(1,"Store name is required"),description:ee.string().optional(),address:ee.string().min(1,"Address is required"),latitude:ee.string().optional(),longitude:ee.string().optional(),phone:ee.string().optional(),website:ee.string().url().optional().or(ee.literal("")),logo:ee.string().optional(),coverImage:ee.string().optional(),storeType:ee.enum(["retail","restaurant"]).default("retail"),cuisineType:ee.string().optional(),deliveryTime:ee.string().optional(),minimumOrder:ee.string().optional(),deliveryFee:ee.string().optional(),isDeliveryAvailable:ee.boolean().default(!1),openingHours:ee.string().optional()});function tge(){const[e,t]=b.useState("overview"),[n,s]=b.useState(null);b.useState(null),b.useState(!1);const[i,a]=b.useState([]);b.useState([]);const{user:o}=Gt(),{toast:l}=ft(),{data:c=[]}=Le({queryKey:["/api/stores/owner",o==null?void 0:o.id],queryFn:async()=>{if(!(o!=null&&o.id))return[];const T=await fetch(`/api/stores/owner/${o.id}`);if(!T.ok)throw new Error("Failed to fetch stores");return T.json()},enabled:!!o}),d=c[0],{data:h=[]}=Le({queryKey:[`/api/products/store/${d==null?void 0:d.id}`],queryFn:async()=>{if(!(d!=null&&d.id))return[];const T=await fetch(`/api/products/store/${d.id}`);if(!T.ok)throw new Error("Failed to fetch store products");return T.json()},enabled:!!d}),{data:m=[]}=Le({queryKey:[`/api/orders/store/${d==null?void 0:d.id}`],queryFn:async()=>{if(!(d!=null&&d.id))return[];const T=await fetch(`/api/orders/store/${d.id}`);if(!T.ok)throw new Error("Failed to fetch store orders");return T.json()},enabled:!!d,refetchInterval:3e4,refetchOnWindowFocus:!0}),{data:f=[]}=Le({queryKey:["/api/categories"]});Le({queryKey:["/api/delivery-partners"],queryFn:async()=>{const T=await fetch("/api/delivery-partners");if(!T.ok)throw new Error("Failed to fetch delivery partners");const I=await T.json(),A=await fetch("/api/users"),V=A.ok?await A.json():[];return I.map(D=>{const W=V.find(U=>U.id===D.userId);return{...D,name:(W==null?void 0:W.fullName)||`Partner ${D.id}`,email:(W==null?void 0:W.email)||"No email"}})}});const v=fn({resolver:pn(Jxe),defaultValues:{name:"",description:"",price:"",originalPrice:"",categoryId:1,stock:0,imageUrl:"",images:[],isFastSell:!1,isOnOffer:!1,offerPercentage:0,offerEndDate:"",preparationTime:"",ingredients:[],allergens:[],spiceLevel:"",isVegetarian:!1,isVegan:!1,nutritionInfo:""}}),p=fn({resolver:pn(ege),defaultValues:{name:"",description:"",address:"",latitude:"",longitude:"",phone:"",website:"",logo:"",coverImage:"",storeType:"retail",cuisineType:"",deliveryTime:"",minimumOrder:"",deliveryFee:"",isDeliveryAvailable:!1,openingHours:""}}),x=m.length,y=h.length,w=m.reduce((T,I)=>T+Number(I.totalAmount),0),j=m.filter(T=>T.status==="pending").length,N=async T=>{var I;if(d)try{const A={...T,storeId:d.id,price:T.price,originalPrice:T.originalPrice||void 0,images:T.images||[],imageUrl:((I=T.images)==null?void 0:I[0])||void 0,isFastSell:T.isFastSell||!1,isOnOffer:T.isOnOffer||!1,offerPercentage:T.offerPercentage||0,offerEndDate:T.offerEndDate||void 0,productType:d.storeType==="restaurant"?"food":"retail",preparationTime:d.storeType==="restaurant"&&T.preparationTime||null,ingredients:d.storeType==="restaurant"?T.ingredients||[]:[],allergens:d.storeType==="restaurant"?T.allergens||[]:[],spiceLevel:d.storeType==="restaurant"&&T.spiceLevel||null,isVegetarian:d.storeType==="restaurant"&&T.isVegetarian||!1,isVegan:d.storeType==="restaurant"&&T.isVegan||!1,nutritionInfo:d.storeType==="restaurant"&&T.nutritionInfo||null};n?(await zh(`/api/products/${n.id}`,A),l({title:"Product updated successfully"})):(await ea("/api/products",A),l({title:"Product added successfully"})),v.reset(),s(null),Br.invalidateQueries({queryKey:[`/api/products/store/${d.id}`]}),Br.invalidateQueries({queryKey:["/api/products"]})}catch(A){l({title:"Error",description:A instanceof Error?A.message:"Failed to save product",variant:"destructive"})}},C=T=>{var I;s(T),v.reset({name:T.name,description:T.description||"",price:T.price,originalPrice:T.originalPrice||"",categoryId:T.categoryId||0,stock:T.stock||0,imageUrl:((I=T.images)==null?void 0:I[0])||"",images:T.images||[],isFastSell:T.isFastSell||!1,isOnOffer:T.isOnOffer||!1,offerPercentage:T.offerPercentage||0,offerEndDate:T.offerEndDate||""}),t("add-product")},P=async T=>{if(confirm("Are you sure you want to delete this product?"))try{await jb(`/api/products/${T}`),l({title:"Product deleted successfully"}),d&&(Br.invalidateQueries({queryKey:[`/api/products/store/${d.id}`]}),Br.invalidateQueries({queryKey:["/api/products"]}))}catch{l({title:"Error",description:"Failed to delete product",variant:"destructive"})}},k=async T=>{try{const I={...T,ownerId:o.id,phone:T.phone||null,description:T.description||null,website:T.website||null,logo:T.logo||null,coverImage:T.coverImage||null,latitude:T.latitude||null,longitude:T.longitude||null,storeType:T.storeType,cuisineType:T.storeType==="restaurant"&&T.cuisineType||null,deliveryTime:T.storeType==="restaurant"&&T.deliveryTime||null,minimumOrder:T.storeType==="restaurant"&&T.minimumOrder?T.minimumOrder:null,deliveryFee:T.storeType==="restaurant"&&T.deliveryFee?T.deliveryFee:null,isDeliveryAvailable:T.storeType==="restaurant"?T.isDeliveryAvailable:!1,openingHours:T.storeType==="restaurant"&&T.openingHours||null};await ea("/api/stores",I),l({title:"Store created successfully"}),p.reset(),Br.invalidateQueries({queryKey:["/api/stores"]}),Br.invalidateQueries({queryKey:["/api/stores","owner",o.id]})}catch(I){l({title:"Error",description:I instanceof Error?I.message:"Failed to create store",variant:"destructive"})}},_=async(T,I)=>{try{await zh(`/api/orders/${T}/status`,{status:I}),l({title:"Order status updated successfully"}),Br.invalidateQueries({queryKey:[`/api/orders/store/${d==null?void 0:d.id}`]}),Br.invalidateQueries({queryKey:["/api/orders/store"]}),Br.invalidateQueries({queryKey:["/api/orders"]}),d!=null&&d.id&&Br.refetchQueries({queryKey:[`/api/orders/store/${d.id}`]})}catch(A){console.error("Order status update error:",A),l({title:"Error",description:"Failed to update order status",variant:"destructive"})}},O=async(T,I,A=!1)=>{try{const V=await ea("/api/notifications/delivery-assignment",{orderId:T,message:I,storeId:d==null?void 0:d.id,shopkeeperId:o==null?void 0:o.id,urgent:A,notificationType:"first_accept_first_serve"}),D={id:Date.now(),orderId:T,message:I,urgent:A,sentAt:new Date().toISOString(),status:"sent",acceptedBy:null};a(W=>[D,...W]),l({title:A?"Urgent delivery notification sent":"Delivery notification sent",description:"All available delivery partners have been notified"})}catch{l({title:"Error",description:"Failed to notify delivery partners",variant:"destructive"})}},M=async(T,I)=>{try{await ea("/api/notifications/broadcast-delivery",{message:T,orderIds:I,storeId:d==null?void 0:d.id,shopkeeperId:o==null?void 0:o.id}),l({title:"Broadcast notification sent",description:`Notified delivery partners about ${I.length} orders`})}catch{l({title:"Error",description:"Failed to send broadcast notification",variant:"destructive"})}};return!o||o.role!=="shopkeeper"?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx(K,{className:"w-full max-w-md",children:r.jsxs(G,{className:"pt-6 text-center",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-muted-foreground",children:"This page is only accessible to shopkeepers."})]})})}):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx("div",{className:"flex justify-between items-center mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Shopkeeper Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:d?`Managing ${d.name}`:"Manage your store"})]})}),r.jsxs(Ds,{value:e,onValueChange:t,children:[r.jsxs(ws,{className:`grid w-full ${d?"grid-cols-6":"grid-cols-2"}`,children:[r.jsx(at,{value:"overview",children:"Overview"}),!d&&r.jsx(at,{value:"create-store",children:"Create Store"}),d&&r.jsxs(r.Fragment,{children:[r.jsx(at,{value:"inventory",children:"Inventory"}),r.jsx(at,{value:"products",children:"Products"}),r.jsx(at,{value:"add-product",children:n?"Edit Product":"Add Product"}),r.jsx(at,{value:"orders",children:"Orders"}),r.jsx(at,{value:"notifications",children:"Notifications"})]})]}),r.jsxs(Xe,{value:"overview",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Products"}),r.jsx("p",{className:"text-2xl font-bold",children:y})]}),r.jsx(Ye,{className:"h-8 w-8 text-primary"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),r.jsx("p",{className:"text-2xl font-bold",children:x})]}),r.jsx(_n,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",w.toLocaleString()]})]}),r.jsx(Qr,{className:"h-8 w-8 text-yellow-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Orders"}),r.jsx("p",{className:"text-2xl font-bold",children:j})]}),r.jsx(jt,{className:"h-8 w-8 text-orange-600"})]})})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Recent Orders"})}),r.jsx(G,{children:m.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"No orders yet"})}):r.jsx("div",{className:"space-y-4",children:m.slice(0,5).map(T=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:["Order #",T.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T.customerName}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(T.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-semibold",children:["",Number(T.totalAmount).toLocaleString()]}),r.jsx(ue,{variant:T.status==="delivered"?"default":T.status==="shipped"?"secondary":T.status==="processing"?"outline":"destructive",children:T.status})]})]},T.id))})})]})]}),r.jsx(Xe,{value:"inventory",className:"space-y-6",children:r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Add New Product"]}),r.jsx("p",{className:"text-muted-foreground",children:"Add products to your store inventory"})]}),r.jsx(G,{children:r.jsx(Rr,{...v,children:r.jsxs("form",{onSubmit:v.handleSubmit(N),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(ae,{control:v.control,name:"name",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Product Name *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter product name",...T})}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"categoryId",render:({field:T})=>{var I;return r.jsxs(se,{children:[r.jsx(ce,{children:"Category *"}),r.jsxs(dt,{onValueChange:A=>T.onChange(parseInt(A)),defaultValue:(I=T.value)==null?void 0:I.toString(),children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select category"})})}),r.jsx(lt,{children:f.map(A=>r.jsx(oe,{value:A.id.toString(),children:A.name},A.id))})]}),r.jsx(me,{})]})}})]}),r.jsx(ae,{control:v.control,name:"description",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Description"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter product description",className:"min-h-24",...T})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(ae,{control:v.control,name:"price",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Price *"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"0.00",...T})}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"originalPrice",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Original Price"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"0.00",...T})}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"stock",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Stock Quantity *"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter quantity",...T,onChange:I=>T.onChange(parseInt(I.target.value)||0)})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:v.control,name:"images",render:({field:T})=>r.jsxs(se,{children:[r.jsx(Ks,{label:"Product Images",maxImages:6,minImages:1,onImagesChange:T.onChange,initialImages:T.value||[],className:"col-span-full"}),r.jsx(me,{})]})}),r.jsxs($,{type:"submit",className:"w-full",children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),n?"Update Product":"Add Product"]})]})})})]})}),r.jsx(Xe,{value:"create-store",className:"space-y-6",children:r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Create Your Store"}),r.jsx("p",{className:"text-muted-foreground",children:"Set up your store to start selling products on Siraha Bazaar"})]}),r.jsx(G,{children:r.jsx(Rr,{...p,children:r.jsxs("form",{onSubmit:p.handleSubmit(k),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:p.control,name:"name",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Store Name"}),r.jsx(he,{children:r.jsx(de,{placeholder:"My Awesome Store",...T})}),r.jsx(me,{})]})}),r.jsx(ae,{control:p.control,name:"phone",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Phone Number"}),r.jsx(he,{children:r.jsx(de,{placeholder:"+1234567890",...T})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:p.control,name:"description",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Description"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Tell customers about your store...",...T})}),r.jsx(me,{})]})}),r.jsx(R0,{address:p.watch("address"),latitude:p.watch("latitude"),longitude:p.watch("longitude"),onLocationChange:T=>{p.setValue("address",T.address),p.setValue("latitude",T.latitude),p.setValue("longitude",T.longitude)}}),r.jsx(ae,{control:p.control,name:"website",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Website (Optional)"}),r.jsx(he,{children:r.jsx(de,{placeholder:"https://mystore.com",...T})}),r.jsx(me,{})]})}),r.jsx(ae,{control:p.control,name:"storeType",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Store Type"}),r.jsxs(dt,{onValueChange:T.onChange,defaultValue:T.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select store type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"retail",children:"Retail Store"}),r.jsx(oe,{value:"restaurant",children:"Restaurant"})]})]}),r.jsx(me,{})]})}),p.watch("storeType")==="restaurant"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:p.control,name:"cuisineType",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Cuisine Type"}),r.jsxs(dt,{onValueChange:T.onChange,defaultValue:T.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select cuisine type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"indian",children:"Indian"}),r.jsx(oe,{value:"chinese",children:"Chinese"}),r.jsx(oe,{value:"fast-food",children:"Fast Food"}),r.jsx(oe,{value:"italian",children:"Italian"}),r.jsx(oe,{value:"mexican",children:"Mexican"}),r.jsx(oe,{value:"continental",children:"Continental"}),r.jsx(oe,{value:"desserts",children:"Desserts & Sweets"}),r.jsx(oe,{value:"beverages",children:"Beverages"})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:p.control,name:"deliveryTime",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Delivery Time"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 25-35 mins",...T})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:p.control,name:"minimumOrder",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Minimum Order Amount ()"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 200",...T})}),r.jsx(me,{})]})}),r.jsx(ae,{control:p.control,name:"deliveryFee",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Delivery Fee ()"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 40 (0 for free)",...T})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:p.control,name:"isDeliveryAvailable",render:({field:T})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base",children:"Delivery Available"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable home delivery for your restaurant"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:T.value,onChange:T.onChange,className:"rounded"})})]})}),r.jsx(ae,{control:p.control,name:"openingHours",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Opening Hours"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 9:00 AM - 11:00 PM",...T})}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(ae,{control:p.control,name:"logo",render:({field:T})=>r.jsxs(se,{children:[r.jsx(Ks,{label:"Store Logo",single:!0,maxImages:1,minImages:0,onImagesChange:I=>T.onChange(I[0]||""),initialImages:T.value?[T.value]:[]}),r.jsx(me,{})]})}),r.jsx(ae,{control:p.control,name:"coverImage",render:({field:T})=>r.jsxs(se,{children:[r.jsx(Ks,{label:"Store Cover Image",single:!0,maxImages:1,minImages:0,onImagesChange:I=>T.onChange(I[0]||""),initialImages:T.value?[T.value]:[]}),r.jsx(me,{})]})})]}),r.jsx($,{type:"submit",className:"w-full",children:"Create Store"})]})})})]})}),r.jsx(Xe,{value:"products",className:"space-y-6",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Manage Products"}),r.jsxs($,{onClick:()=>t("add-product"),children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})}),r.jsx(G,{children:h.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ye,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No products added yet"}),r.jsx($,{className:"mt-4",onClick:()=>t("add-product"),children:"Add Your First Product"})]}):r.jsx("div",{className:"space-y-4",children:h.map(T=>{var I;return r.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[r.jsx("img",{src:((I=T.images)==null?void 0:I[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100",alt:T.name,className:"w-16 h-16 object-cover rounded-lg"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium",children:T.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Price: ",Number(T.price).toLocaleString()]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Stock: ",T.stock," units"]}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[T.isFastSell&&r.jsx(ue,{variant:"destructive",className:"text-xs",children:" Fast Sell"}),T.isOnOffer&&r.jsxs(ue,{variant:"secondary",className:"text-xs",children:[" ",T.offerPercentage,"% OFF"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ue,{variant:T.isActive?"default":"secondary",children:T.isActive?"Active":"Inactive"}),r.jsx($,{variant:"outline",size:"sm",onClick:()=>C(T),children:r.jsx(us,{className:"h-4 w-4"})}),r.jsx($,{variant:"outline",size:"sm",onClick:()=>P(T.id),children:r.jsx(ei,{className:"h-4 w-4"})})]})]},T.id)})})})]})}),r.jsx(Xe,{value:"add-product",className:"space-y-6",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:n?"Edit Product":"Add New Product"})}),r.jsx(G,{children:r.jsx(Rr,{...v,children:r.jsxs("form",{onSubmit:v.handleSubmit(N),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(ae,{control:v.control,name:"name",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Product Name"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter product name",...T})}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"categoryId",render:({field:T})=>{var I;return r.jsxs(se,{children:[r.jsx(ce,{children:"Category"}),r.jsxs(dt,{onValueChange:A=>T.onChange(parseInt(A)),value:(I=T.value)==null?void 0:I.toString(),children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select category"})})}),r.jsx(lt,{children:f.map(A=>r.jsx(oe,{value:A.id.toString(),children:A.name},A.id))})]}),r.jsx(me,{})]})}}),r.jsx(ae,{control:v.control,name:"price",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Price ()"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter price",...T})}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"originalPrice",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Original Price () - Optional"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter original price",...T})}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"stock",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Stock Quantity"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter quantity",...T,onChange:I=>T.onChange(parseInt(I.target.value)||0)})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:v.control,name:"images",render:({field:T})=>r.jsxs(se,{children:[r.jsx(Ks,{label:"Product Images",maxImages:6,minImages:1,onImagesChange:T.onChange,initialImages:T.value||[],className:"col-span-full"}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"description",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Description"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter product description",className:"min-h-20",...T})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[r.jsxs("h3",{className:"font-medium text-lg flex items-center gap-2",children:[r.jsx(wn,{className:"h-5 w-5"}),"Special Features"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:v.control,name:"isFastSell",render:({field:T})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base font-medium",children:"Fast Sell Product"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Mark as fast-selling/trending item"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:T.value,onChange:T.onChange,className:"w-4 h-4"})})]})}),r.jsx(ae,{control:v.control,name:"isOnOffer",render:({field:T})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base font-medium",children:"Special Offer"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Apply discount offer"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:T.value,onChange:T.onChange,className:"w-4 h-4"})})]})})]}),v.watch("isOnOffer")&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.jsx(ae,{control:v.control,name:"offerPercentage",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Discount Percentage (%)"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter discount percentage",min:"0",max:"100",...T,onChange:I=>T.onChange(parseInt(I.target.value)||0)})}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"offerEndDate",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Offer End Date"}),r.jsx(he,{children:r.jsx(de,{type:"date",...T})}),r.jsx(me,{})]})})]})]}),(d==null?void 0:d.storeType)==="restaurant"&&r.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-orange-50",children:[r.jsxs("h3",{className:"font-medium text-lg flex items-center gap-2",children:[r.jsx(Rh,{className:"h-5 w-5"}),"Food Item Details"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:v.control,name:"preparationTime",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Preparation Time"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 15-20 mins",...T})}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"spiceLevel",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Spice Level"}),r.jsxs(dt,{onValueChange:T.onChange,defaultValue:T.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select spice level"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"",children:"Not Applicable"}),r.jsx(oe,{value:"mild",children:"Mild"}),r.jsx(oe,{value:"medium",children:"Medium"}),r.jsx(oe,{value:"hot",children:"Hot"}),r.jsx(oe,{value:"extra-hot",children:"Extra Hot"})]})]}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:v.control,name:"isVegetarian",render:({field:T})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base font-medium",children:"Vegetarian"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Contains no meat or fish"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:T.value,onChange:T.onChange,className:"w-4 h-4"})})]})}),r.jsx(ae,{control:v.control,name:"isVegan",render:({field:T})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base font-medium",children:"Vegan"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Contains no animal products"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:T.value,onChange:T.onChange,className:"w-4 h-4"})})]})})]}),r.jsx(ae,{control:v.control,name:"nutritionInfo",render:({field:T})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Nutrition Information (Optional)"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"e.g., Calories: 350, Protein: 15g, Carbs: 45g, Fat: 12g",className:"min-h-20",...T})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx($,{type:"submit",className:"btn-primary",children:n?"Update Product":"Add Product"}),n&&r.jsx($,{type:"button",variant:"outline",onClick:()=>{s(null),v.reset()},children:"Cancel"})]})]})})})]})}),r.jsx(Xe,{value:"orders",className:"space-y-6",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Order Management"})}),r.jsx(G,{children:m.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(_n,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No orders yet"})]}):r.jsx("div",{className:"space-y-4",children:m.map(T=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold",children:["Order #",T.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.customerName,"  ",T.phone]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(T.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right space-y-2",children:[r.jsxs("p",{className:"font-semibold text-lg",children:["",Number(T.totalAmount).toLocaleString()]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(dt,{value:T.status,onValueChange:I=>_(T.id,I),children:[r.jsx(ot,{className:"w-32",children:r.jsx(ut,{})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"pending",children:"Pending"}),r.jsx(oe,{value:"processing",children:"Processing"}),r.jsx(oe,{value:"ready_for_pickup",children:"Ready for Pickup"}),r.jsx(oe,{value:"assigned_for_delivery",children:"Assigned for Delivery"}),r.jsx(oe,{value:"shipped",children:"Shipped"}),r.jsx(oe,{value:"delivered",children:"Delivered"}),r.jsx(oe,{value:"cancelled",children:"Cancelled"})]})]})}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[T.status!=="assigned_for_delivery"&&T.status!=="delivered"&&T.status!=="cancelled"&&r.jsx("div",{className:"flex gap-2",children:r.jsxs($,{onClick:()=>{O(T.id,` New Order Available: Order #${T.id} from ${d==null?void 0:d.name}. Customer: ${T.customerName}. Total: ${T.totalAmount}. First to accept gets delivery!`,!1)},className:"bg-orange-600 hover:bg-orange-700 text-white",children:[r.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Send to All Partners (First Accept)"]})}),T.status==="assigned_for_delivery"&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 w-full",children:[r.jsx("p",{className:"text-sm text-green-700 font-medium",children:" Delivery partner assigned and notified"}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Order is being processed for delivery"})]})]})]})]}),r.jsx(hn,{className:"my-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Delivery Address:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T.shippingAddress})]})]},T.id))})})]})}),r.jsxs(Xe,{value:"notifications",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ready for Pickup"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.filter(T=>T.status==="ready_for_pickup").length})]}),r.jsx(yt,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Processing"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.filter(T=>T.status==="processing").length})]}),r.jsx(xd,{className:"h-8 w-8 text-blue-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Notifications Sent"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.length})]}),r.jsx(Qt,{className:"h-8 w-8 text-purple-600"})]})})})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-5 w-5"}),"First Accept First Serve - Delivery Notifications"]}),r.jsx("p",{className:"text-muted-foreground",children:"Send notifications to all available delivery partners. The first one to accept gets the delivery."})]}),r.jsxs(G,{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsxs($,{onClick:()=>{const T=m.filter(I=>I.status==="ready_for_pickup");T.length>0&&M(` URGENT: ${T.length} orders ready for immediate pickup from ${d==null?void 0:d.name}`,T.map(I=>I.id))},disabled:m.filter(T=>T.status==="ready_for_pickup").length===0,className:"bg-red-600 hover:bg-red-700",children:[r.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Broadcast All Ready Orders (Urgent)"]}),r.jsxs($,{variant:"outline",onClick:()=>{const T=m.filter(I=>I.status==="processing");T.length>0&&M(` ${T.length} orders being prepared at ${d==null?void 0:d.name}`,T.map(I=>I.id))},disabled:m.filter(T=>T.status==="processing").length===0,children:[r.jsx(Dd,{className:"h-4 w-4 mr-2"}),"Notify About Processing Orders"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Individual Order Notifications"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.filter(T=>T.status==="processing"||T.status==="ready_for_pickup").map(T=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-3 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium",children:["Order #",T.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T.customerName}),r.jsx("p",{className:"text-xs text-muted-foreground",children:T.phone}),r.jsx(ue,{variant:T.status==="ready_for_pickup"?"default":"secondary",className:T.status==="ready_for_pickup"?"bg-green-100 text-green-800":"",children:T.status.replace("_"," ").toUpperCase()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-semibold",children:["",Number(T.totalAmount).toLocaleString()]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(T.createdAt).toLocaleDateString()})]})]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsxs("p",{className:"truncate",children:[" ",T.shippingAddress]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs($,{size:"sm",className:"w-full bg-red-600 hover:bg-red-700",onClick:()=>O(T.id,` URGENT PICKUP: Order #${T.id} ready NOW from ${d==null?void 0:d.name}! Customer: ${T.customerName}, Amount: ${T.totalAmount}. First to accept gets this delivery!`,!0),children:[r.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Send Urgent Alert (First Accept First Serve)"]}),r.jsxs($,{size:"sm",variant:"outline",className:"w-full",onClick:()=>O(T.id,` Pickup Available: Order #${T.id} at ${d==null?void 0:d.name}. Customer: ${T.customerName}, Amount: ${T.totalAmount}. Accept to claim this delivery!`,!1),children:[r.jsx(Dd,{className:"h-4 w-4 mr-2"}),"Send Standard Notification"]})]}),T.deliveryPartner&&r.jsxs("div",{className:"mt-4 border-t pt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h5",{className:"font-semibold flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4"}),"Live Delivery Tracking"]}),r.jsx(ue,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Live"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"Contact Delivery Partner:"}),r.jsxs("a",{href:`tel:${T.deliveryPartner.phone}`,className:"text-blue-600 hover:underline ml-2",children:[r.jsx(Vt,{className:"inline h-4 w-4 mr-1"}),T.deliveryPartner.phone]})]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Partner: ",T.deliveryPartner.name||"Assigned Partner"]})]}),r.jsx("div",{className:"h-64 rounded-lg overflow-hidden border",children:r.jsx(Pg,{deliveryId:T.id,userType:"shopkeeper"})})]})]},T.id))}),m.filter(T=>T.status==="processing"||T.status==="ready_for_pickup").length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ct,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No orders ready for delivery notifications"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'Orders with "Processing" or "Ready for Pickup" status will appear here'})]})]}),i.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Recent Notifications"}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:i.slice(0,10).map(T=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[T.urgent?r.jsx(Nr,{className:"h-4 w-4 text-red-500"}):r.jsx(Qt,{className:"h-4 w-4 text-blue-500"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium",children:["Order #",T.orderId]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(T.sentAt).toLocaleString()})]})]}),r.jsx(ue,{variant:T.urgent?"destructive":"secondary",children:T.urgent?"Urgent":"Standard"})]},T.id))})]})]})]})]})]})]})})}function rge({storeId:e,customerId:t,orderItems:n}){const[s,i]=b.useState({orderId:"",orderItemId:"",reason:"",description:""}),{toast:a}=ft(),o=on(),{data:l}=Le({queryKey:["/api/stores",e,"return-policy"],queryFn:async()=>{const v=await fetch(`/api/stores/${e}/return-policy`);if(!v.ok)throw new Error("Failed to fetch return policy");return v.json()},enabled:!!e}),{data:c}=Le({queryKey:["/api/returns/customer",t],queryFn:async()=>{const v=await fetch(`/api/returns/customer/${t}`);if(!v.ok)throw new Error("Failed to fetch returns");return v.json()},enabled:!!t}),d=pt({mutationFn:async v=>{const p=await fetch("/api/returns",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...v,customerId:t})});if(!p.ok)throw new Error("Failed to create return request");return p.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/returns/customer",t]}),i({orderId:"",orderItemId:"",reason:"",description:""}),a({title:"Success",description:"Return request submitted successfully"})},onError:v=>{a({title:"Error",description:v.message,variant:"destructive"})}}),h=v=>{v.preventDefault(),d.mutate(s)},m=v=>{switch(v){case"requested":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},f=v=>{switch(v){case"requested":return r.jsx(jt,{className:"h-4 w-4"});case"approved":return r.jsx(yt,{className:"h-4 w-4"});case"rejected":return r.jsx(Ms,{className:"h-4 w-4"});case"completed":return r.jsx(Ye,{className:"h-4 w-4"});default:return r.jsx(jt,{className:"h-4 w-4"})}};return r.jsxs("div",{className:"space-y-6",children:[e&&r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ms,{className:"h-5 w-5"}),"Return Policy"]}),r.jsx(kt,{children:"Our return policy and guidelines"})]}),r.jsx(G,{children:l?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Return Period"}),r.jsxs("p",{className:"text-blue-700",children:[l.returnDays," days from delivery"]})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Status"}),r.jsx("p",{className:"text-green-700",children:l.isActive?"Active":"Inactive"})]})]}),l.returnConditions&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Return Conditions"}),r.jsx("p",{className:"text-gray-600 text-sm whitespace-pre-wrap",children:l.returnConditions})]})]}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Ms,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"No return policy available for this store"})]})})]}),t&&r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Request Return"}),r.jsx(kt,{children:"Submit a return request for your order"})]}),r.jsx(G,{children:r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{htmlFor:"orderId",children:"Order ID"}),r.jsx(de,{id:"orderId",value:s.orderId,onChange:v=>i({...s,orderId:v.target.value}),placeholder:"Enter order ID",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{htmlFor:"orderItemId",children:"Order Item ID"}),r.jsx(de,{id:"orderItemId",value:s.orderItemId,onChange:v=>i({...s,orderItemId:v.target.value}),placeholder:"Enter item ID",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{htmlFor:"reason",children:"Reason for Return"}),r.jsx(de,{id:"reason",value:s.reason,onChange:v=>i({...s,reason:v.target.value}),placeholder:"e.g., Damaged item, Wrong size, etc.",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(be,{htmlFor:"description",children:"Description (Optional)"}),r.jsx(Yt,{id:"description",value:s.description,onChange:v=>i({...s,description:v.target.value}),placeholder:"Provide additional details about the return...",rows:3})]}),r.jsx($,{type:"submit",className:"w-full",disabled:d.isPending,children:d.isPending?"Submitting...":"Submit Return Request"})]})})]}),t&&c&&r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Your Returns"}),r.jsx(kt,{children:"Track your return requests"})]}),r.jsx(G,{children:c.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Ye,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"No return requests found"}),r.jsx("p",{className:"text-sm",children:"Your return requests will appear here"})]}):r.jsx("div",{className:"space-y-4",children:c.map(v=>r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("h3",{className:"font-semibold",children:["Return #",v.id]}),r.jsx(ue,{className:m(v.status),children:r.jsxs("div",{className:"flex items-center gap-1",children:[f(v.status),r.jsx("span",{className:"capitalize",children:v.status})]})})]}),r.jsx("span",{className:"text-sm text-gray-500",children:new Date(v.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Order ID:"})," #",v.orderId]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Reason:"})," ",v.reason]})]}),v.description&&r.jsxs("div",{className:"mt-3 text-sm",children:[r.jsx("span",{className:"font-medium",children:"Description:"}),r.jsx("p",{className:"text-gray-600 mt-1",children:v.description})]}),v.refundAmount&&r.jsxs("div",{className:"mt-3 text-sm",children:[r.jsx("span",{className:"font-medium",children:"Refund Amount:"}),r.jsxs("span",{className:"text-green-600 font-semibold ml-1",children:["",v.refundAmount]})]})]},v.id))})})]})]})}const nge=ee.object({fullName:ee.string().min(2,"Full name must be at least 2 characters"),email:ee.string().email("Please enter a valid email address"),phone:ee.string().min(10,"Phone number must be at least 10 digits")}),sge=ee.object({title:ee.string().min(1,"Address title is required"),address:ee.string().min(10,"Full address is required"),city:ee.string().min(1,"City is required"),postalCode:ee.string().min(1,"Postal code is required")});function ige(){const[e,t]=b.useState("orders"),{user:n,logout:s}=Gt(),{wishlistItems:i}=bb(),{toast:a}=ft(),{data:o=[]}=Le({queryKey:[`/api/orders/customer/${n==null?void 0:n.id}`],enabled:!!n}),l=fn({resolver:pn(nge),defaultValues:{fullName:(n==null?void 0:n.fullName)||"",email:(n==null?void 0:n.email)||"",phone:(n==null?void 0:n.phone)||""}});fn({resolver:pn(sge),defaultValues:{title:"",address:"",city:"Siraha",postalCode:""}});const c=async m=>{if(n)try{await zh(`/api/users/${n.id}`,m),a({title:"Profile updated",description:"Your profile has been updated successfully."})}catch{a({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}},d=m=>{switch(m){case"delivered":return r.jsx(yt,{className:"h-4 w-4 text-green-600"});case"shipped":return r.jsx(Ct,{className:"h-4 w-4 text-blue-600"});case"processing":return r.jsx(jt,{className:"h-4 w-4 text-yellow-600"});case"cancelled":return r.jsx(ps,{className:"h-4 w-4 text-red-600"});default:return r.jsx(Ye,{className:"h-4 w-4 text-gray-600"})}},h=m=>{switch(m){case"delivered":return"default";case"shipped":return"secondary";case"processing":return"outline";case"cancelled":return"destructive";default:return"outline"}};return!n||n.role!=="customer"?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx(K,{className:"w-full max-w-md",children:r.jsxs(G,{className:"pt-6 text-center",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-muted-foreground",children:"This page is only accessible to customers."})]})})}):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Account"}),r.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",n.fullName]})]}),r.jsx($,{variant:"outline",onClick:s,children:"Logout"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsx(K,{children:r.jsxs(G,{className:"p-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Wr,{className:"h-10 w-10 text-primary"})}),r.jsx("h3",{className:"font-semibold text-foreground",children:n.fullName}),r.jsx("p",{className:"text-sm text-muted-foreground",children:n.email})]}),r.jsxs("nav",{className:"space-y-2",children:[r.jsxs("button",{onClick:()=>t("orders"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="orders"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Vo,{className:"h-4 w-4"}),r.jsx("span",{children:"Order History"})]}),r.jsxs("button",{onClick:()=>t("tracking"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="tracking"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Ct,{className:"h-4 w-4"}),r.jsx("span",{children:"Live Tracking"})]}),r.jsxs("button",{onClick:()=>t("addresses"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="addresses"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Re,{className:"h-4 w-4"}),r.jsx("span",{children:"Addresses"})]}),r.jsxs("button",{onClick:()=>t("wishlist"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="wishlist"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Ma,{className:"h-4 w-4"}),r.jsx("span",{children:"Wishlist"})]}),r.jsxs("button",{onClick:()=>t("notifications"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="notifications"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Qt,{className:"h-4 w-4"}),r.jsx("span",{children:"Notifications"})]}),r.jsxs("button",{onClick:()=>t("returns"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="returns"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Ms,{className:"h-4 w-4"}),r.jsx("span",{children:"Returns"})]}),r.jsxs("button",{onClick:()=>t("profile"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors flex items-center space-x-3 ${e==="profile"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(Id,{className:"h-4 w-4"}),r.jsx("span",{children:"Profile Settings"})]})]})]})})}),r.jsxs("div",{className:"lg:col-span-3",children:[e==="orders"&&r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Order History"})}),r.jsx(G,{children:o.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Vo,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No orders yet"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't placed any orders yet. Start shopping to see your orders here."}),r.jsx($,{children:"Start Shopping"})]}):r.jsx("div",{className:"space-y-6",children:o.map(m=>r.jsxs("div",{className:"border rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-lg",children:["Order #",m.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Placed on ",new Date(m.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d(m.status),r.jsx(ue,{variant:h(m.status),children:m.status.charAt(0).toUpperCase()+m.status.slice(1)})]}),r.jsxs("p",{className:"font-semibold text-lg",children:["",Number(m.totalAmount).toLocaleString()]})]})]}),r.jsx(hn,{className:"my-4"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Order Items"}),r.jsx("div",{className:"space-y-2",children:m.items&&m.items.length>0?m.items.map((f,v)=>{var p;return r.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted rounded-md",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-sm",children:((p=f.product)==null?void 0:p.name)||`Product ID: ${f.productId}`}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Quantity: ",f.quantity,"  ",parseFloat(f.price).toFixed(2)]})]}),r.jsxs("p",{className:"font-medium text-sm",children:["",(parseFloat(f.price)*f.quantity).toFixed(2)]})]},v)}):r.jsx("p",{className:"text-sm text-muted-foreground",children:"No items found"})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Delivery Address"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:m.shippingAddress})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Payment Method"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:m.paymentMethod==="cod"?"Cash on Delivery":m.paymentMethod.toUpperCase()})]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-6",children:[r.jsx($,{variant:"outline",size:"sm",children:"View Details"}),m.status==="delivered"&&r.jsx($,{variant:"outline",size:"sm",children:"Reorder"}),m.status!=="delivered"&&m.status!=="cancelled"&&r.jsx(Ae,{href:`/orders/${m.id}/tracking`,children:r.jsx($,{variant:"outline",size:"sm",children:"Track Order"})})]})]},m.id))})})]}),e==="addresses"&&r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Saved Addresses"}),r.jsx($,{size:"sm",children:"Add New Address"})]})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"border rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("h3",{className:"font-medium",children:"Home"}),r.jsx(ue,{variant:"secondary",children:"Default"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:n.fullName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Mahendra Chowk, Siraha-56600",r.jsx("br",{}),"Nepal",r.jsx("br",{}),"Phone: ",n.phone||"+977-9841234567"]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx($,{variant:"outline",size:"sm",children:"Edit"}),r.jsx($,{variant:"outline",size:"sm",children:"Delete"})]})]})}),r.jsx("div",{className:"border rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:"Office"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:n.fullName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["District Office, Siraha-56600",r.jsx("br",{}),"Nepal",r.jsx("br",{}),"Phone: ",n.phone||"+977-9841234567"]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx($,{variant:"outline",size:"sm",children:"Edit"}),r.jsx($,{variant:"outline",size:"sm",children:"Delete"})]})]})})]})})]}),e==="wishlist"&&r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"My Wishlist"}),r.jsxs(ue,{variant:"secondary",children:[i.length," items"]})]})}),r.jsxs(G,{children:[i.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ma,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Your wishlist is empty"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Save items you love to your wishlist and shop them later."}),r.jsx($,{children:"Start Shopping"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.slice(0,6).map(m=>{var f,v,p,x,y;return r.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsx("img",{src:((v=(f=m.product)==null?void 0:f.images)==null?void 0:v[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",alt:((p=m.product)==null?void 0:p.name)||"Product",className:"w-full h-32 object-cover rounded mb-3"}),r.jsx("h4",{className:"font-medium text-sm mb-2 line-clamp-2",children:((x=m.product)==null?void 0:x.name)||"Product Name"}),r.jsxs("p",{className:"text-lg font-bold text-primary mb-3",children:["",((y=m.product)==null?void 0:y.price)||"0"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx($,{size:"sm",className:"flex-1",children:"Add to Cart"}),r.jsx($,{variant:"outline",size:"sm",children:r.jsx(Ma,{className:"h-4 w-4"})})]})]},m.id)})}),i.length>6&&r.jsx("div",{className:"mt-6 text-center",children:r.jsx($,{variant:"outline",children:"View All Wishlist Items"})})]})]}),e==="tracking"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),r.jsx("span",{children:"Order Tracking System"})]}),r.jsxs(ue,{variant:"secondary",children:[o.length," orders"]})]})}),r.jsx(G,{children:o.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ye,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No orders found"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't placed any orders yet. Start shopping to see your order tracking here."}),r.jsx(Ae,{href:"/",children:r.jsx($,{children:"Start Shopping"})})]}):r.jsxs("div",{className:"space-y-4",children:[o.slice(0,5).map(m=>r.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-lg",children:["Order #",m.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Placed on ",new Date(m.createdAt).toLocaleDateString()]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(ue,{className:`
                                  ${m.status==="delivered"?"bg-green-500":m.status==="pending"?"bg-yellow-500":"bg-blue-500"} text-white
                                `,children:m.status.charAt(0).toUpperCase()+m.status.slice(1)}),r.jsxs("p",{className:"text-sm font-semibold mt-1",children:["",Number(m.totalAmount).toLocaleString()]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(yt,{className:`h-4 w-4 ${m.status!=="pending"?"text-green-500":"text-gray-300"}`}),r.jsx("span",{className:"text-sm",children:"Order Placed"}),r.jsx("div",{className:"h-px bg-gray-300 flex-1"}),r.jsx(yt,{className:`h-4 w-4 ${m.status==="delivered"?"text-green-500":"text-gray-300"}`}),r.jsx("span",{className:"text-sm",children:"Delivered"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ae,{href:`/orders/${m.id}/tracking`,children:r.jsxs($,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4"}),"Track Order"]})}),m.status!=="delivered"&&r.jsxs($,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-4 w-4"}),"Contact Support"]})]})]},m.id)),o.length>5&&r.jsx("div",{className:"text-center pt-4",children:r.jsx($,{variant:"outline",children:"View All Orders"})})]})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center space-x-2",children:[r.jsx(Ct,{className:"h-5 w-5"}),r.jsx("span",{children:"Live Delivery Tracking"})]})}),r.jsx(G,{children:(()=>{const m=o.filter(f=>f.status==="shipped"||f.status==="processing"||f.status==="out for delivery"||f.status==="picked_up"||f.status==="en_route_delivery");return m.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ct,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No active deliveries"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have any orders currently being delivered."}),r.jsx(Ae,{href:"/",children:r.jsx($,{children:"Start Shopping"})})]}):r.jsx("div",{className:"space-y-6",children:m.map(f=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-blue-50",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium",children:["Order #",f.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Status: ",r.jsx(ue,{variant:"secondary",children:f.status})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: ",Number(f.totalAmount).toLocaleString()]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm font-medium text-green-600",children:"Live Tracking"})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ordered on ",new Date(f.createdAt).toLocaleDateString()]})]})]}),r.jsx("div",{className:"h-96 border rounded-lg",children:r.jsx(Pg,{deliveryId:f.id,userType:"customer",onStatusUpdate:v=>{console.log(`Order ${f.id} status updated to: ${v}`)}})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ae,{href:`/orders/${f.id}/tracking`,children:r.jsx($,{variant:"outline",size:"sm",children:"View Full Timeline"})}),r.jsx($,{variant:"outline",size:"sm",children:"Contact Delivery Partner"}),r.jsxs($,{variant:"outline",size:"sm",children:[r.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]},f.id))})})()})]})]}),e==="profile"&&r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Profile Settings"})}),r.jsx(G,{children:r.jsx(Rr,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(ae,{control:l.control,name:"fullName",render:({field:m})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Full Name"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter your full name",...m})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"email",render:({field:m})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Email Address"}),r.jsx(he,{children:r.jsx(de,{type:"email",placeholder:"Enter your email",...m})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"phone",render:({field:m})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Phone Number"}),r.jsx(he,{children:r.jsx(de,{type:"tel",placeholder:"Enter your phone number",...m})}),r.jsx(me,{})]})})]}),r.jsx(hn,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Account Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Account Type:"}),r.jsx("p",{className:"font-medium capitalize",children:n.role})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Member Since:"}),r.jsx("p",{className:"font-medium",children:new Date(n.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),r.jsx($,{type:"submit",className:"btn-primary",children:"Update Profile"})]})})})]}),e==="notifications"&&r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center space-x-2",children:[r.jsx(Qt,{className:"h-5 w-5"}),r.jsx("span",{children:"Notifications"})]})}),r.jsx(G,{children:r.jsx(Eb,{})})]}),e==="returns"&&r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center space-x-2",children:[r.jsx(Ms,{className:"h-5 w-5"}),r.jsx("span",{children:"Returns & Refunds"})]})}),r.jsx(G,{children:r.jsx(rge,{customerId:n.id,orderItems:o.flatMap(m=>m.items)})})]})]})]})]})})}const Gs=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:n,className:Ve("w-full caption-bottom text-sm",e),...t})}));Gs.displayName="Table";const Zs=b.forwardRef(({className:e,...t},n)=>r.jsx("thead",{ref:n,className:Ve("[&_tr]:border-b",e),...t}));Zs.displayName="TableHeader";const Ys=b.forwardRef(({className:e,...t},n)=>r.jsx("tbody",{ref:n,className:Ve("[&_tr:last-child]:border-0",e),...t}));Ys.displayName="TableBody";const age=b.forwardRef(({className:e,...t},n)=>r.jsx("tfoot",{ref:n,className:Ve("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));age.displayName="TableFooter";const br=b.forwardRef(({className:e,...t},n)=>r.jsx("tr",{ref:n,className:Ve("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));br.displayName="TableRow";const qe=b.forwardRef(({className:e,...t},n)=>r.jsx("th",{ref:n,className:Ve("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));qe.displayName="TableHead";const He=b.forwardRef(({className:e,...t},n)=>r.jsx("td",{ref:n,className:Ve("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));He.displayName="TableCell";const oge=b.forwardRef(({className:e,...t},n)=>r.jsx("caption",{ref:n,className:Ve("mt-4 text-sm text-muted-foreground",e),...t}));oge.displayName="TableCaption";function lge(){const[,e]=Jr(),{toast:t}=ft(),n=on(),[s,i]=b.useState(null),[a,o]=b.useState(""),[l,c]=b.useState(null),[d,h]=b.useState(null),[m,f]=b.useState(!1),[v,p]=b.useState({name:"",minDistance:"",maxDistance:"",baseFee:"",perKmRate:"",isActive:!0}),[x,y]=b.useState("pending"),[w,j]=b.useState(!1),[N,C]=b.useState(!1),[P,k]=b.useState({fullName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),[_,O]=b.useState([]);b.useEffect(()=>{const J=localStorage.getItem("adminUser");if(!J){e("/admin/login");return}c(JSON.parse(J))},[e]);const{data:M=[],isLoading:T}=Le({queryKey:["/api/admin/users"],enabled:!!l}),{data:I=[],isLoading:A}=Le({queryKey:["/api/admin/users/pending"],enabled:!!l}),{data:V=[],isLoading:D}=Le({queryKey:["/api/delivery-zones"],enabled:!!l}),{data:W=[],isLoading:U}=Le({queryKey:["/api/delivery-partners"],enabled:!!l}),{data:Q=[],isLoading:q}=Le({queryKey:["/api/products"],enabled:!!l}),{data:B}=Le({queryKey:["/api/admin/profile",l==null?void 0:l.id],enabled:!!(l!=null&&l.id)}),z=pt({mutationFn:async J=>await Kt(`/api/admin/users/${J}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),t({title:"User approved",description:"The shopkeeper account has been approved successfully."})},onError:()=>{t({title:"Approval failed",description:"Failed to approve user. Please try again.",variant:"destructive"})}}),H=pt({mutationFn:async({userId:J,reason:De})=>await Kt(`/api/admin/users/${J}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id,reason:De})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),i(null),o(""),t({title:"User rejected",description:"The shopkeeper application has been rejected."})},onError:()=>{t({title:"Rejection failed",description:"Failed to reject user. Please try again.",variant:"destructive"})}}),X=pt({mutationFn:async J=>await Kt("/api/admin/delivery-zones",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...J,adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-zones"]}),f(!1),p({name:"",minDistance:"",maxDistance:"",baseFee:"",perKmRate:"",isActive:!0}),t({title:"Zone created",description:"Delivery zone has been created successfully."})},onError:()=>{t({title:"Creation failed",description:"Failed to create delivery zone.",variant:"destructive"})}}),ge=pt({mutationFn:async({id:J,data:De})=>await Kt(`/api/admin/delivery-zones/${J}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...De,adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-zones"]}),h(null),t({title:"Zone updated",description:"Delivery zone has been updated successfully."})},onError:()=>{t({title:"Update failed",description:"Failed to update delivery zone.",variant:"destructive"})}}),Se=pt({mutationFn:async J=>await Kt(`/api/admin/delivery-zones/${J}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-zones"]}),t({title:"Zone deleted",description:"Delivery zone has been deleted successfully."})},onError:()=>{t({title:"Deletion failed",description:"Failed to delete delivery zone.",variant:"destructive"})}}),F=pt({mutationFn:async J=>await Kt(`/api/delivery-partners/${J}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners"]}),t({title:"Partner approved",description:"Delivery partner has been approved successfully."})},onError:()=>{t({title:"Approval failed",description:"Failed to approve delivery partner. Please try again.",variant:"destructive"})}}),pe=pt({mutationFn:async({partnerId:J,reason:De})=>await Kt(`/api/delivery-partners/${J}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id,reason:De})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners"]}),t({title:"Partner rejected",description:"Delivery partner application has been rejected."})},onError:()=>{t({title:"Rejection failed",description:"Failed to reject delivery partner. Please try again.",variant:"destructive"})}}),we=pt({mutationFn:async J=>await Kt(`/api/admin/profile/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/profile",l.id]}),j(!1),k({fullName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),t({title:"Profile updated",description:"Admin profile has been updated successfully."})},onError:()=>{t({title:"Update failed",description:"Failed to update profile. Please try again.",variant:"destructive"})}}),Be=pt({mutationFn:async J=>await Kt("/api/admin/change-password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id,...J})}),onSuccess:()=>{C(!1),k({fullName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),t({title:"Password changed",description:"Admin password has been changed successfully."})},onError:()=>{t({title:"Password change failed",description:"Failed to change password. Please check your current password.",variant:"destructive"})}}),Pe=pt({mutationFn:async J=>await Kt(`/api/admin/products/${J}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/products"]}),t({title:"Product deleted",description:"Product has been deleted successfully."})},onError:()=>{t({title:"Deletion failed",description:"Failed to delete product. Please try again.",variant:"destructive"})}}),Ee=pt({mutationFn:async J=>await Kt("/api/admin/products/bulk-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productIds:J,adminId:l.id})}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/products"]}),O([]),t({title:"Products deleted",description:"Selected products have been deleted successfully."})},onError:()=>{t({title:"Bulk deletion failed",description:"Failed to delete selected products. Please try again.",variant:"destructive"})}}),Ie=()=>{localStorage.removeItem("adminUser"),e("/admin/login"),t({title:"Logged out",description:"You have been logged out successfully."})},Ne=J=>{switch(J){case"active":return r.jsxs(ue,{variant:"default",className:"bg-green-100 text-green-800",children:[r.jsx(yt,{className:"h-3 w-3 mr-1"}),"Active"]});case"pending":return r.jsxs(ue,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Pending"]});case"rejected":return r.jsxs(ue,{variant:"destructive",children:[r.jsx(ps,{className:"h-3 w-3 mr-1"}),"Rejected"]});default:return r.jsx(ue,{variant:"outline",children:J})}},xe=J=>new Date(J).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l?r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Up,{className:"h-8 w-8 text-blue-600 mr-3"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Siraha Bazaar Administration"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("span",{className:"text-sm text-gray-600",children:["Welcome, ",l.fullName]}),r.jsxs(Dr,{open:w,onOpenChange:j,children:[r.jsx(Ps,{asChild:!0,children:r.jsxs($,{variant:"outline",size:"sm",children:[r.jsx(Id,{className:"h-4 w-4 mr-2"}),"Settings"]})}),r.jsxs(Ar,{children:[r.jsxs(Er,{children:[r.jsx(Or,{children:"Admin Profile Settings"}),r.jsx(Us,{children:"Update your admin profile information"})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"admin-name",className:"text-right",children:"Full Name"}),r.jsx(de,{id:"admin-name",value:P.fullName||(B==null?void 0:B.fullName)||"",onChange:J=>k({...P,fullName:J.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"admin-email",className:"text-right",children:"Email"}),r.jsx(de,{id:"admin-email",type:"email",value:P.email||(B==null?void 0:B.email)||"",onChange:J=>k({...P,email:J.target.value}),className:"col-span-3"})]})]}),r.jsxs(mo,{children:[r.jsx($,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),r.jsxs($,{onClick:()=>we.mutate(P),disabled:we.isPending,children:[r.jsx(ZN,{className:"h-4 w-4 mr-2"}),"Update Profile"]})]})]})]}),r.jsxs(Dr,{open:N,onOpenChange:C,children:[r.jsx(Ps,{asChild:!0,children:r.jsxs($,{variant:"outline",size:"sm",children:[r.jsx(T_,{className:"h-4 w-4 mr-2"}),"Change Password"]})}),r.jsxs(Ar,{children:[r.jsxs(Er,{children:[r.jsx(Or,{children:"Change Admin Password"}),r.jsx(Us,{children:"Enter your current password and choose a new one"})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"current-password",className:"text-right",children:"Current Password"}),r.jsx(de,{id:"current-password",type:"password",value:P.currentPassword,onChange:J=>k({...P,currentPassword:J.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"new-password",className:"text-right",children:"New Password"}),r.jsx(de,{id:"new-password",type:"password",value:P.newPassword,onChange:J=>k({...P,newPassword:J.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"confirm-password",className:"text-right",children:"Confirm Password"}),r.jsx(de,{id:"confirm-password",type:"password",value:P.confirmPassword,onChange:J=>k({...P,confirmPassword:J.target.value}),className:"col-span-3"})]})]}),r.jsxs(mo,{children:[r.jsx($,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),r.jsxs($,{onClick:()=>{if(P.newPassword!==P.confirmPassword){t({title:"Password mismatch",description:"New password and confirm password don't match.",variant:"destructive"});return}Be.mutate({currentPassword:P.currentPassword,newPassword:P.newPassword})},disabled:Be.isPending||!P.currentPassword||!P.newPassword,children:[r.jsx(T_,{className:"h-4 w-4 mr-2"}),"Change Password"]})]})]})]}),r.jsx($,{variant:"outline",onClick:Ie,children:"Logout"})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(gd,{className:"h-8 w-8 text-blue-600"}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.length})]})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(jt,{className:"h-8 w-8 text-yellow-600"}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Approval"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.length})]})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(O_,{className:"h-8 w-8 text-green-600"}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Shopkeepers"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.filter(J=>J.role==="shopkeeper"&&J.status==="active").length})]})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(ar,{className:"h-8 w-8 text-purple-600"}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Customers"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:M.filter(J=>J.role==="customer").length})]})]})})})]}),I.length>0&&r.jsxs(ii,{className:"mb-6",children:[r.jsx(Nr,{className:"h-4 w-4"}),r.jsxs(ai,{children:["You have ",I.length," pending shopkeeper application",I.length>1?"s":""," waiting for approval."]})]}),r.jsxs("div",{className:"flex gap-6",children:[r.jsx("div",{className:"w-64 bg-white shadow-sm rounded-lg p-4 h-fit",children:r.jsxs("nav",{className:"space-y-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Admin Navigation"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("button",{onClick:()=>y("pending"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${x==="pending"?"bg-blue-100 text-blue-700 border-l-4 border-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(jt,{className:"h-4 w-4"}),"Pending Approvals",I.length>0&&r.jsx(ue,{variant:"secondary",className:"ml-auto",children:I.length})]}),r.jsxs("button",{onClick:()=>y("delivery-partners"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${x==="delivery-partners"?"bg-green-100 text-green-700 border-l-4 border-green-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(Ct,{className:"h-4 w-4"}),"Delivery Partners",W.filter(J=>J.status==="pending").length>0&&r.jsx(ue,{variant:"secondary",className:"ml-auto bg-orange-100 text-orange-800",children:W.filter(J=>J.status==="pending").length})]}),r.jsxs("button",{onClick:()=>y("all"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${x==="all"?"bg-purple-100 text-purple-700 border-l-4 border-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(gd,{className:"h-4 w-4"}),"All Users",r.jsx(ue,{variant:"outline",className:"ml-auto",children:M.length})]}),r.jsxs("button",{onClick:()=>y("products"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${x==="products"?"bg-orange-100 text-orange-700 border-l-4 border-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(Ye,{className:"h-4 w-4"}),"Products",r.jsx(ue,{variant:"outline",className:"ml-auto",children:Q.length})]}),r.jsxs("button",{onClick:()=>y("delivery-zones"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${x==="delivery-zones"?"bg-indigo-100 text-indigo-700 border-l-4 border-indigo-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(Re,{className:"h-4 w-4"}),"Delivery Zones",r.jsx(ue,{variant:"outline",className:"ml-auto",children:V.length})]})]})]})}),r.jsx("div",{className:"flex-1",children:r.jsxs(Ds,{value:x,className:"space-y-6",children:[r.jsx("div",{className:"hidden",children:r.jsxs(ws,{children:[r.jsx(at,{value:"pending",children:"Pending Approvals"}),r.jsx(at,{value:"all",children:"All Users"}),r.jsx(at,{value:"delivery-partners",children:"Delivery Partners"}),r.jsx(at,{value:"products",children:"Products"}),r.jsx(at,{value:"delivery-zones",children:"Delivery Zones"})]})}),r.jsx(Xe,{value:"pending",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Pending Shopkeeper Applications"})}),r.jsx(G,{children:A?r.jsx("div",{className:"text-center py-8",children:"Loading..."}):I.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No pending applications"}):r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{children:"Name"}),r.jsx(qe,{children:"Email"}),r.jsx(qe,{children:"Phone"}),r.jsx(qe,{children:"Applied Date"}),r.jsx(qe,{children:"Actions"})]})}),r.jsx(Ys,{children:I.map(J=>r.jsxs(br,{children:[r.jsx(He,{className:"font-medium",children:J.fullName}),r.jsx(He,{children:J.email}),r.jsx(He,{children:J.phone}),r.jsx(He,{children:xe(J.createdAt)}),r.jsx(He,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($,{size:"sm",onClick:()=>z.mutate(J.id),disabled:z.isPending,children:[r.jsx(O_,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(Dr,{children:[r.jsx(Ps,{asChild:!0,children:r.jsxs($,{size:"sm",variant:"destructive",onClick:()=>i(J),children:[r.jsx(Xte,{className:"h-4 w-4 mr-1"}),"Reject"]})}),r.jsxs(Ar,{children:[r.jsxs(Er,{children:[r.jsx(Or,{children:"Reject Application"}),r.jsxs(Us,{children:["Are you sure you want to reject ",J.fullName,"'s shopkeeper application?"]})]}),r.jsx("div",{children:r.jsx(Yt,{placeholder:"Enter reason for rejection (optional)",value:a,onChange:De=>o(De.target.value)})}),r.jsxs(mo,{children:[r.jsx($,{variant:"outline",onClick:()=>{i(null),o("")},children:"Cancel"}),r.jsx($,{variant:"destructive",onClick:()=>H.mutate({userId:J.id,reason:a}),disabled:H.isPending,children:"Reject Application"})]})]})]})]})})]},J.id))})]})})]})}),r.jsx(Xe,{value:"delivery-partners",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4m-6 0V6a2 2 0 012-2h2a2 2 0 012 2v1m-6 0h6m0 0v.5a2 2 0 01-2 2H10a2 2 0 01-2-2V7m8 4l3 3-3 3m-3-3h12"})}),"Delivery Partner Management"]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and manage delivery partner applications"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(ue,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[W.filter(J=>J.status==="pending").length," Pending"]}),r.jsxs(ue,{variant:"default",className:"bg-green-100 text-green-800",children:[W.filter(J=>J.status==="approved").length," Approved"]})]})]})}),r.jsxs(G,{children:[U?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading delivery partners..."})]}):r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{children:"Partner ID"}),r.jsx(qe,{children:"User ID"}),r.jsx(qe,{children:"Vehicle"}),r.jsx(qe,{children:"License"}),r.jsx(qe,{children:"Areas"}),r.jsx(qe,{children:"Status"}),r.jsx(qe,{children:"Rating"}),r.jsx(qe,{children:"Total Deliveries"}),r.jsx(qe,{children:"Earnings"}),r.jsx(qe,{children:"Actions"})]})}),r.jsx(Ys,{children:W.map(J=>r.jsxs(br,{children:[r.jsxs(He,{className:"font-medium",children:["#",J.id]}),r.jsx(He,{children:J.userId}),r.jsx(He,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:J.vehicleType}),r.jsx("p",{className:"text-sm text-gray-500",children:J.vehicleNumber})]})}),r.jsx(He,{children:J.drivingLicense}),r.jsx(He,{children:J.deliveryAreas&&J.deliveryAreas.length>0?J.deliveryAreas.join(", "):"Not specified"}),r.jsx(He,{children:J.status==="approved"?r.jsxs(ue,{variant:"default",className:"bg-green-100 text-green-800",children:[r.jsx(yt,{className:"h-3 w-3 mr-1"}),"Approved"]}):J.status==="pending"?r.jsxs(ue,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Pending"]}):r.jsxs(ue,{variant:"destructive",children:[r.jsx(ps,{className:"h-3 w-3 mr-1"}),J.status]})}),r.jsx(He,{children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium",children:J.rating||"0.00"}),r.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"/5.00"})]})}),r.jsx(He,{children:J.totalDeliveries||0}),r.jsxs(He,{children:["Rs. ",J.totalEarnings||"0.00"]}),r.jsx(He,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($,{size:"sm",variant:"outline",children:[r.jsx(hs,{className:"h-4 w-4 mr-1"}),"View"]}),J.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs($,{size:"sm",onClick:()=>F.mutate(J.id),disabled:F.isPending,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(yt,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs(Dr,{children:[r.jsx(Ps,{asChild:!0,children:r.jsxs($,{size:"sm",variant:"destructive",children:[r.jsx(ps,{className:"h-4 w-4 mr-1"}),"Reject"]})}),r.jsxs(Ar,{children:[r.jsxs(Er,{children:[r.jsx(Or,{children:"Reject Delivery Partner"}),r.jsx(Us,{children:"Are you sure you want to reject this delivery partner application?"})]}),r.jsx("div",{children:r.jsx(Yt,{placeholder:"Enter reason for rejection (optional)",value:a,onChange:De=>o(De.target.value)})}),r.jsxs(mo,{children:[r.jsx($,{variant:"outline",onClick:()=>o(""),children:"Cancel"}),r.jsx($,{variant:"destructive",onClick:()=>pe.mutate({partnerId:J.id,reason:a}),disabled:pe.isPending,children:"Reject Application"})]})]})]})]})]})})]},J.id))})]}),W.length===0&&!U&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(gd,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No delivery partners found"})]})]})]})}),r.jsx(Xe,{value:"all",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"All Users"})}),r.jsx(G,{children:T?r.jsx("div",{className:"text-center py-8",children:"Loading..."}):r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{children:"Name"}),r.jsx(qe,{children:"Email"}),r.jsx(qe,{children:"Role"}),r.jsx(qe,{children:"Status"}),r.jsx(qe,{children:"Joined Date"}),r.jsx(qe,{children:"Actions"})]})}),r.jsx(Ys,{children:M.map(J=>r.jsxs(br,{children:[r.jsx(He,{className:"font-medium",children:J.fullName}),r.jsx(He,{children:J.email}),r.jsx(He,{children:r.jsx(ue,{variant:J.role==="shopkeeper"?"default":"secondary",children:J.role})}),r.jsx(He,{children:Ne(J.status)}),r.jsx(He,{children:xe(J.createdAt)}),r.jsx(He,{children:r.jsxs($,{size:"sm",variant:"outline",children:[r.jsx(hs,{className:"h-4 w-4 mr-1"}),"View"]})})]},J.id))})]})})]})}),r.jsx(Xe,{value:"products",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-6 w-6 text-orange-600"}),"Product Management"]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage all products across the platform"})]}),r.jsxs("div",{className:"flex gap-2",children:[_.length>0&&r.jsxs($,{variant:"destructive",onClick:()=>Ee.mutate(_),disabled:Ee.isPending,children:[r.jsx(ei,{className:"h-4 w-4 mr-2"}),"Delete Selected (",_.length,")"]}),r.jsxs(ue,{variant:"outline",children:[Q.length," Total Products"]})]})]})}),r.jsxs(G,{children:[q?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading products..."})]}):r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{className:"w-12",children:r.jsx("input",{type:"checkbox",checked:_.length===Q.length&&Q.length>0,onChange:J=>{J.target.checked?O(Q.map(De=>De.id)):O([])},className:"rounded"})}),r.jsx(qe,{children:"Product"}),r.jsx(qe,{children:"Store"}),r.jsx(qe,{children:"Category"}),r.jsx(qe,{children:"Price"}),r.jsx(qe,{children:"Stock"}),r.jsx(qe,{children:"Status"}),r.jsx(qe,{children:"Actions"})]})}),r.jsx(Ys,{children:Q.map(J=>r.jsxs(br,{children:[r.jsx(He,{children:r.jsx("input",{type:"checkbox",checked:_.includes(J.id),onChange:De=>{De.target.checked?O([..._,J.id]):O(_.filter(Ue=>Ue!==J.id))},className:"rounded"})}),r.jsx(He,{children:r.jsxs("div",{className:"flex items-center space-x-3",children:[J.imageUrl&&r.jsx("img",{src:J.imageUrl,alt:J.name,className:"w-10 h-10 rounded object-cover"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:J.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",J.id]})]})]})}),r.jsx(He,{children:J.storeName||"Unknown Store"}),r.jsx(He,{children:J.category||"Uncategorized"}),r.jsxs(He,{children:["Rs. ",J.price]}),r.jsx(He,{children:r.jsx("span",{className:`font-medium ${J.stock<10?"text-red-600":"text-green-600"}`,children:J.stock})}),r.jsx(He,{children:J.isActive?r.jsx(ue,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"}):r.jsx(ue,{variant:"secondary",children:"Inactive"})}),r.jsx(He,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($,{size:"sm",variant:"outline",children:[r.jsx(hs,{className:"h-4 w-4 mr-1"}),"View"]}),r.jsxs(Dr,{children:[r.jsx(Ps,{asChild:!0,children:r.jsxs($,{size:"sm",variant:"destructive",children:[r.jsx(ei,{className:"h-4 w-4 mr-1"}),"Delete"]})}),r.jsxs(Ar,{children:[r.jsxs(Er,{children:[r.jsx(Or,{children:"Delete Product"}),r.jsxs(Us,{children:['Are you sure you want to delete "',J.name,'"? This action cannot be undone.']})]}),r.jsxs(mo,{children:[r.jsx($,{variant:"outline",children:"Cancel"}),r.jsx($,{variant:"destructive",onClick:()=>Pe.mutate(J.id),disabled:Pe.isPending,children:"Delete Product"})]})]})]})]})})]},J.id))})]}),Q.length===0&&!q&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Ye,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No products found"})]})]})]})}),r.jsx(Xe,{value:"delivery-zones",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-5 w-5"}),"Delivery Zone Management"]}),r.jsxs(Dr,{open:m,onOpenChange:f,children:[r.jsx(Ps,{asChild:!0,children:r.jsxs($,{children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Zone"]})}),r.jsxs(Ar,{children:[r.jsxs(Er,{children:[r.jsx(Or,{children:"Create New Delivery Zone"}),r.jsx(Us,{children:"Add a new delivery zone with custom pricing."})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"name",className:"text-right",children:"Name"}),r.jsx(de,{id:"name",value:v.name,onChange:J=>p({...v,name:J.target.value}),className:"col-span-3",placeholder:"e.g., Inner City"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"minDistance",className:"text-right",children:"Min Distance (km)"}),r.jsx(de,{id:"minDistance",type:"number",step:"0.01",value:v.minDistance,onChange:J=>p({...v,minDistance:J.target.value}),className:"col-span-3",placeholder:"0"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"maxDistance",className:"text-right",children:"Max Distance (km)"}),r.jsx(de,{id:"maxDistance",type:"number",step:"0.01",value:v.maxDistance,onChange:J=>p({...v,maxDistance:J.target.value}),className:"col-span-3",placeholder:"5"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"baseFee",className:"text-right",children:"Base Fee (Rs.)"}),r.jsx(de,{id:"baseFee",type:"number",step:"0.01",value:v.baseFee,onChange:J=>p({...v,baseFee:J.target.value}),className:"col-span-3",placeholder:"30.00"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"perKmRate",className:"text-right",children:"Per km Rate (Rs.)"}),r.jsx(de,{id:"perKmRate",type:"number",step:"0.01",value:v.perKmRate,onChange:J=>p({...v,perKmRate:J.target.value}),className:"col-span-3",placeholder:"5.00"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(jn,{id:"isActive",checked:v.isActive,onCheckedChange:J=>p({...v,isActive:J})}),r.jsx(be,{htmlFor:"isActive",children:"Active Zone"})]})]}),r.jsxs(mo,{children:[r.jsx($,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),r.jsxs($,{onClick:()=>X.mutate(v),disabled:X.isPending,children:[r.jsx(ZN,{className:"h-4 w-4 mr-2"}),"Create Zone"]})]})]})]})]})}),r.jsxs(G,{children:[D?r.jsx("div",{className:"text-center py-8",children:"Loading delivery zones..."}):r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{children:"Zone Name"}),r.jsx(qe,{children:"Distance Range"}),r.jsx(qe,{children:"Base Fee"}),r.jsx(qe,{children:"Per Km Rate"}),r.jsx(qe,{children:"Status"}),r.jsx(qe,{children:"Sample Fee (10km)"}),r.jsx(qe,{children:"Actions"})]})}),r.jsx(Ys,{children:V.map(J=>r.jsxs(br,{children:[r.jsx(He,{className:"font-medium",children:J.name}),r.jsxs(He,{children:[J.minDistance," - ",J.maxDistance," km"]}),r.jsxs(He,{children:["Rs. ",J.baseFee]}),r.jsxs(He,{children:["Rs. ",J.perKmRate,"/km"]}),r.jsx(He,{children:J.isActive?r.jsxs(ue,{variant:"default",className:"bg-green-100 text-green-800",children:[r.jsx(yt,{className:"h-3 w-3 mr-1"}),"Active"]}):r.jsx(ue,{variant:"secondary",children:"Inactive"})}),r.jsxs(He,{children:["Rs. ",(parseFloat(J.baseFee)+10*parseFloat(J.perKmRate)).toFixed(2)]}),r.jsx(He,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(Dr,{children:[r.jsx(Ps,{asChild:!0,children:r.jsxs($,{size:"sm",variant:"outline",onClick:()=>h({...J}),children:[r.jsx(us,{className:"h-4 w-4 mr-1"}),"Edit"]})}),r.jsxs(Ar,{children:[r.jsxs(Er,{children:[r.jsx(Or,{children:"Edit Delivery Zone"}),r.jsx(Us,{children:"Modify the delivery zone pricing and settings."})]}),d&&r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"edit-name",className:"text-right",children:"Name"}),r.jsx(de,{id:"edit-name",value:d.name,onChange:De=>h({...d,name:De.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"edit-minDistance",className:"text-right",children:"Min Distance (km)"}),r.jsx(de,{id:"edit-minDistance",type:"number",step:"0.01",value:d.minDistance,onChange:De=>h({...d,minDistance:De.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"edit-maxDistance",className:"text-right",children:"Max Distance (km)"}),r.jsx(de,{id:"edit-maxDistance",type:"number",step:"0.01",value:d.maxDistance,onChange:De=>h({...d,maxDistance:De.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"edit-baseFee",className:"text-right",children:"Base Fee (Rs.)"}),r.jsx(de,{id:"edit-baseFee",type:"number",step:"0.01",value:d.baseFee,onChange:De=>h({...d,baseFee:De.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(be,{htmlFor:"edit-perKmRate",className:"text-right",children:"Per km Rate (Rs.)"}),r.jsx(de,{id:"edit-perKmRate",type:"number",step:"0.01",value:d.perKmRate,onChange:De=>h({...d,perKmRate:De.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(jn,{id:"edit-isActive",checked:d.isActive,onCheckedChange:De=>h({...d,isActive:De})}),r.jsx(be,{htmlFor:"edit-isActive",children:"Active Zone"})]})]}),r.jsxs(mo,{children:[r.jsx($,{variant:"outline",onClick:()=>h(null),children:"Cancel"}),r.jsxs($,{onClick:()=>ge.mutate({id:d.id,data:d}),disabled:ge.isPending,children:[r.jsx(ZN,{className:"h-4 w-4 mr-2"}),"Update Zone"]})]})]})]}),r.jsxs($,{size:"sm",variant:"destructive",onClick:()=>Se.mutate(J.id),disabled:Se.isPending,children:[r.jsx(ei,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},J.id))})]}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Delivery Fee Calculator Preview"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:V.filter(J=>J.isActive).map(J=>r.jsxs("div",{className:"bg-white p-3 rounded border",children:[r.jsx("h4",{className:"font-medium text-sm",children:J.name}),r.jsxs("p",{className:"text-xs text-gray-600",children:[J.minDistance,"-",J.maxDistance,"km"]}),r.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[r.jsxs("div",{children:["5km: Rs. ",(parseFloat(J.baseFee)+5*parseFloat(J.perKmRate)).toFixed(2)]}),r.jsxs("div",{children:["10km: Rs. ",(parseFloat(J.baseFee)+10*parseFloat(J.perKmRate)).toFixed(2)]}),r.jsxs("div",{children:["15km: Rs. ",(parseFloat(J.baseFee)+15*parseFloat(J.perKmRate)).toFixed(2)]})]})]},J.id))})]})]})]})})]})})]})]})]}):null}const cge=ee.object({email:ee.string().email("Please enter a valid email address"),password:ee.string().min(1,"Password is required")});function dge(){const[,e]=Jr(),{toast:t}=ft(),[n,s]=b.useState(""),i=fn({resolver:pn(cge),defaultValues:{email:"",password:""}}),a=pt({mutationFn:async l=>await(await Kt("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).json(),onSuccess:l=>{localStorage.setItem("adminUser",JSON.stringify(l.admin)),t({title:"Login successful",description:"Welcome to the admin panel"}),e("/admin/dashboard")},onError:l=>{s(l.message||"Login failed"),t({title:"Login failed",description:"Please check your credentials and try again",variant:"destructive"})}}),o=l=>{s(""),a.mutate(l)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4",children:r.jsxs(K,{className:"w-full max-w-md",children:[r.jsxs(re,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:r.jsx(Up,{className:"h-6 w-6 text-white"})}),r.jsx(ne,{className:"text-2xl font-bold",children:"Admin Login"}),r.jsx(kt,{children:"Access the Siraha Bazaar administration panel"})]}),r.jsxs(G,{children:[r.jsx(Rr,{...i,children:r.jsxs("form",{onSubmit:i.handleSubmit(o),className:"space-y-4",children:[n&&r.jsx(ii,{variant:"destructive",children:r.jsx(ai,{children:n})}),r.jsx(ae,{control:i.control,name:"email",render:({field:l})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Email Address"}),r.jsx(he,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(de,{...l,type:"email",placeholder:"sirahabazzar@gmail.com",className:"pl-10",disabled:a.isPending})]})}),r.jsx(me,{})]})}),r.jsx(ae,{control:i.control,name:"password",render:({field:l})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Password"}),r.jsx(he,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Fte,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(de,{...l,type:"password",placeholder:"Enter your password",className:"pl-10",disabled:a.isPending})]})}),r.jsx(me,{})]})}),r.jsx($,{type:"submit",className:"w-full",disabled:a.isPending,children:a.isPending?"Signing in...":"Sign In"})]})}),r.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-sm mb-2",children:"Default Admin Credentials:"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Email: sirahabazzar@gmail.com"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Password: admin123"})]})]})]})})}var HT="Progress",qT=100,[uge,AUe]=xn(HT),[hge,mge]=uge(HT),G7=b.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:i,getValueLabel:a=fge,...o}=e;(i||i===0)&&!BD(i)&&console.error(pge(`${i}`,"Progress"));const l=BD(i)?i:qT;s!==null&&!VD(s,l)&&console.error(xge(`${s}`,"Progress"));const c=VD(s,l)?s:null,d=$0(c)?a(c,l):void 0;return r.jsx(hge,{scope:n,value:c,max:l,children:r.jsx(Je.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":$0(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":X7(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});G7.displayName=HT;var Z7="ProgressIndicator",Y7=b.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,i=mge(Z7,n);return r.jsx(Je.div,{"data-state":X7(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:t})});Y7.displayName=Z7;function fge(e,t){return`${Math.round(e/t*100)}%`}function X7(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function $0(e){return typeof e=="number"}function BD(e){return $0(e)&&!isNaN(e)&&e>0}function VD(e,t){return $0(e)&&!isNaN(e)&&e<=t&&e>=0}function pge(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${qT}\`.`}function xge(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${qT} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Q7=G7,gge=Y7;const yd=b.forwardRef(({className:e,value:t,...n},s)=>r.jsx(Q7,{ref:s,className:Ve("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:r.jsx(gge,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));yd.displayName=Q7.displayName;var J7="AlertDialog",[vge,EUe]=xn(J7,[nU]),tl=nU(),eW=e=>{const{__scopeAlertDialog:t,...n}=e,s=tl(t);return r.jsx(ST,{...s,...n,modal:!0})};eW.displayName=J7;var yge="AlertDialogTrigger",tW=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=tl(n);return r.jsx(_T,{...i,...s,ref:t})});tW.displayName=yge;var jge="AlertDialogPortal",rW=e=>{const{__scopeAlertDialog:t,...n}=e,s=tl(t);return r.jsx(PT,{...s,...n})};rW.displayName=jge;var bge="AlertDialogOverlay",nW=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=tl(n);return r.jsx(vg,{...i,...s,ref:t})});nW.displayName=bge;var uh="AlertDialogContent",[wge,Nge]=vge(uh),Sge=ez("AlertDialogContent"),sW=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...i}=e,a=tl(n),o=b.useRef(null),l=Nt(t,o),c=b.useRef(null);return r.jsx(dme,{contentName:uh,titleName:iW,docsSlug:"alert-dialog",children:r.jsx(wge,{scope:n,cancelRef:c,children:r.jsxs(yg,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:$e(i.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(Sge,{children:s}),r.jsx(Pge,{contentRef:o})]})})})});sW.displayName=uh;var iW="AlertDialogTitle",aW=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=tl(n);return r.jsx(jg,{...i,...s,ref:t})});aW.displayName=iW;var oW="AlertDialogDescription",lW=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=tl(n);return r.jsx(bg,{...i,...s,ref:t})});lW.displayName=oW;var _ge="AlertDialogAction",cW=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=tl(n);return r.jsx(Rb,{...i,...s,ref:t})});cW.displayName=_ge;var dW="AlertDialogCancel",uW=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:i}=Nge(dW,n),a=tl(n),o=Nt(t,i);return r.jsx(Rb,{...a,...s,ref:o})});uW.displayName=dW;var Pge=({contentRef:e})=>{const t=`\`${uh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${uh}\` by passing a \`${oW}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${uh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Cge=eW,kge=tW,Tge=rW,hW=nW,mW=sW,fW=cW,pW=uW,xW=aW,gW=lW;const UD=Cge,WD=kge,Age=Tge,vW=b.forwardRef(({className:e,...t},n)=>r.jsx(hW,{className:Ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));vW.displayName=hW.displayName;const f2=b.forwardRef(({className:e,...t},n)=>r.jsxs(Age,{children:[r.jsx(vW,{}),r.jsx(mW,{ref:n,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));f2.displayName=mW.displayName;const p2=({className:e,...t})=>r.jsx("div",{className:Ve("flex flex-col space-y-2 text-center sm:text-left",e),...t});p2.displayName="AlertDialogHeader";const x2=({className:e,...t})=>r.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});x2.displayName="AlertDialogFooter";const g2=b.forwardRef(({className:e,...t},n)=>r.jsx(xW,{ref:n,className:Ve("text-lg font-semibold",e),...t}));g2.displayName=xW.displayName;const v2=b.forwardRef(({className:e,...t},n)=>r.jsx(gW,{ref:n,className:Ve("text-sm text-muted-foreground",e),...t}));v2.displayName=gW.displayName;const y2=b.forwardRef(({className:e,...t},n)=>r.jsx(fW,{ref:n,className:Ve(Dk(),e),...t}));y2.displayName=fW.displayName;const j2=b.forwardRef(({className:e,...t},n)=>r.jsx(pW,{ref:n,className:Ve(Dk({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));j2.displayName=pW.displayName;function Ege(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}function qb(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const b2=e=>Array.isArray(e);function yW(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function fx(e){return typeof e=="string"||Array.isArray(e)}function HD(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function KT(e,t,n,s){if(typeof t=="function"){const[i,a]=HD(s);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=HD(s);t=t(n!==void 0?n:e.custom,i,a)}return t}function Kb(e,t,n){const s=e.getProps();return KT(s,t,n!==void 0?n:s.custom,e)}const GT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ZT=["initial",...GT],Cg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nu=new Set(Cg),Eo=e=>e*1e3,Oo=e=>e/1e3,Oge={type:"spring",stiffness:500,damping:25,restSpeed:10},Mge=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Dge={type:"keyframes",duration:.8},Ige={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Lge=(e,{keyframes:t})=>t.length>2?Dge:nu.has(e)?e.startsWith("scale")?Mge(t[1]):Oge:Ige;function YT(e,t){return e?e[t]||e.default||e:void 0}const Rge={skipAnimations:!1,useManualTiming:!1},$ge=e=>e!==null;function Gb(e,{repeat:t,repeatType:n="loop"},s){const i=e.filter($ge),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||s===void 0?i[a]:s}const ts=e=>e;let w2=ts;function Fge(e){let t=new Set,n=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(c.schedule(d),e()),d(o)}const c={schedule:(d,h=!1,m=!1)=>{const v=m&&s?t:n;return h&&a.add(d),v.has(d)||v.add(d),d},cancel:d=>{n.delete(d),a.delete(d)},process:d=>{if(o=d,s){i=!0;return}s=!0,[t,n]=[n,t],n.clear(),t.forEach(l),s=!1,i&&(i=!1,c.process(d))}};return c}const Rv=["read","resolveKeyframes","update","preRender","render","postRender"],zge=40;function jW(e,t){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=Rv.reduce((w,j)=>(w[j]=Fge(a),w),{}),{read:l,resolveKeyframes:c,update:d,preRender:h,render:m,postRender:f}=o,v=()=>{const w=performance.now();n=!1,i.delta=s?1e3/60:Math.max(Math.min(w-i.timestamp,zge),1),i.timestamp=w,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),h.process(i),m.process(i),f.process(i),i.isProcessing=!1,n&&t&&(s=!1,e(v))},p=()=>{n=!0,s=!0,i.isProcessing||e(v)};return{schedule:Rv.reduce((w,j)=>{const N=o[j];return w[j]=(C,P=!1,k=!1)=>(n||p(),N.schedule(C,P,k)),w},{}),cancel:w=>{for(let j=0;j<Rv.length;j++)o[Rv[j]].cancel(w)},state:i,steps:o}}const{schedule:xr,cancel:pc,state:Fn,steps:A1}=jW(typeof requestAnimationFrame<"u"?requestAnimationFrame:ts,!0),bW=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Bge=1e-7,Vge=12;function Uge(e,t,n,s,i){let a,o,l=0;do o=t+(n-t)/2,a=bW(o,s,i)-e,a>0?n=o:t=o;while(Math.abs(a)>Bge&&++l<Vge);return o}function kg(e,t,n,s){if(e===t&&n===s)return ts;const i=a=>Uge(a,0,1,e,n);return a=>a===0||a===1?a:bW(i(a),t,s)}const wW=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,NW=e=>t=>1-e(1-t),SW=kg(.33,1.53,.69,.99),XT=NW(SW),_W=wW(XT),PW=e=>(e*=2)<1?.5*XT(e):.5*(2-Math.pow(2,-10*(e-1))),QT=e=>1-Math.sin(Math.acos(e)),CW=NW(QT),kW=wW(QT),TW=e=>/^0[^.\s]+$/u.test(e);function Wge(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||TW(e):!0}const AW=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),EW=e=>t=>typeof t=="string"&&t.startsWith(e),OW=EW("--"),Hge=EW("var(--"),JT=e=>Hge(e)?qge.test(e.split("/*")[0].trim()):!1,qge=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Kge=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Gge(e){const t=Kge.exec(e);if(!t)return[,];const[,n,s,i]=t;return[`--${n??s}`,i]}function MW(e,t,n=1){const[s,i]=Gge(e);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const o=a.trim();return AW(o)?parseFloat(o):o}return JT(i)?MW(i,t,n+1):i}const Go=(e,t,n)=>n>t?t:n<e?e:n,Fm={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},px={...Fm,transform:e=>Go(0,1,e)},$v={...Fm,default:1},Tg=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ml=Tg("deg"),$a=Tg("%"),vt=Tg("px"),Zge=Tg("vh"),Yge=Tg("vw"),qD={...$a,parse:e=>$a.parse(e)/100,transform:e=>$a.transform(e*100)},Xge=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),KD=e=>e===Fm||e===vt,GD=(e,t)=>parseFloat(e.split(", ")[t]),ZD=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/u);if(i)return GD(i[1],t);{const a=s.match(/^matrix\((.+)\)$/u);return a?GD(a[1],e):0}},Qge=new Set(["x","y","z"]),Jge=Cg.filter(e=>!Qge.has(e));function eve(e){const t=[];return Jge.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Gh={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:ZD(4,13),y:ZD(5,14)};Gh.translateX=Gh.x;Gh.translateY=Gh.y;const DW=e=>t=>t.test(e),tve={test:e=>e==="auto",parse:e=>e},IW=[Fm,vt,$a,ml,Yge,Zge,tve],YD=e=>IW.find(DW(e)),jd=new Set;let N2=!1,S2=!1;function LW(){if(S2){const e=Array.from(jd).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const i=eve(s);i.length&&(n.set(s,i),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([a,o])=>{var l;(l=s.getValue(a))===null||l===void 0||l.set(o)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}S2=!1,N2=!1,jd.forEach(e=>e.complete()),jd.clear()}function RW(){jd.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(S2=!0)})}function rve(){RW(),LW()}class eA{constructor(t,n,s,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(jd.add(this),N2||(N2=!0,xr.read(RW),xr.resolveKeyframes(LW))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:i}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const o=i==null?void 0:i.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(s&&n){const c=s.readValue(n,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),i&&o===void 0&&i.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),jd.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,jd.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const mp=e=>Math.round(e*1e5)/1e5,tA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function nve(e){return e==null}const sve=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rA=(e,t)=>n=>!!(typeof n=="string"&&sve.test(n)&&n.startsWith(e)||t&&!nve(n)&&Object.prototype.hasOwnProperty.call(n,t)),$W=(e,t,n)=>s=>{if(typeof s!="string")return s;const[i,a,o,l]=s.match(tA);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},ive=e=>Go(0,255,e),E1={...Fm,transform:e=>Math.round(ive(e))},td={test:rA("rgb","red"),parse:$W("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+E1.transform(e)+", "+E1.transform(t)+", "+E1.transform(n)+", "+mp(px.transform(s))+")"};function ave(e){let t="",n="",s="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const _2={test:rA("#"),parse:ave,transform:td.transform},Uu={test:rA("hsl","hue"),parse:$W("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+$a.transform(mp(t))+", "+$a.transform(mp(n))+", "+mp(px.transform(s))+")"},Kn={test:e=>td.test(e)||_2.test(e)||Uu.test(e),parse:e=>td.test(e)?td.parse(e):Uu.test(e)?Uu.parse(e):_2.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?td.transform(e):Uu.transform(e)},ove=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lve(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(tA))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(ove))===null||n===void 0?void 0:n.length)||0)>0}const FW="number",zW="color",cve="var",dve="var(",XD="${}",uve=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xx(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},i=[];let a=0;const l=t.replace(uve,c=>(Kn.test(c)?(s.color.push(a),i.push(zW),n.push(Kn.parse(c))):c.startsWith(dve)?(s.var.push(a),i.push(cve),n.push(c)):(s.number.push(a),i.push(FW),n.push(parseFloat(c))),++a,XD)).split(XD);return{values:n,split:l,indexes:s,types:i}}function BW(e){return xx(e).values}function VW(e){const{split:t,types:n}=xx(e),s=t.length;return i=>{let a="";for(let o=0;o<s;o++)if(a+=t[o],i[o]!==void 0){const l=n[o];l===FW?a+=mp(i[o]):l===zW?a+=Kn.transform(i[o]):a+=i[o]}return a}}const hve=e=>typeof e=="number"?0:e;function mve(e){const t=BW(e);return VW(e)(t.map(hve))}const xc={test:lve,parse:BW,createTransformer:VW,getAnimatableNone:mve},fve=new Set(["brightness","contrast","saturate","opacity"]);function pve(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(tA)||[];if(!s)return e;const i=n.replace(s,"");let a=fve.has(t)?1:0;return s!==n&&(a*=100),t+"("+a+i+")"}const xve=/\b([a-z-]*)\(.*?\)/gu,P2={...xc,getAnimatableNone:e=>{const t=e.match(xve);return t?t.map(pve).join(" "):e}},gve={borderWidth:vt,borderTopWidth:vt,borderRightWidth:vt,borderBottomWidth:vt,borderLeftWidth:vt,borderRadius:vt,radius:vt,borderTopLeftRadius:vt,borderTopRightRadius:vt,borderBottomRightRadius:vt,borderBottomLeftRadius:vt,width:vt,maxWidth:vt,height:vt,maxHeight:vt,top:vt,right:vt,bottom:vt,left:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,backgroundPositionX:vt,backgroundPositionY:vt},vve={rotate:ml,rotateX:ml,rotateY:ml,rotateZ:ml,scale:$v,scaleX:$v,scaleY:$v,scaleZ:$v,skew:ml,skewX:ml,skewY:ml,distance:vt,translateX:vt,translateY:vt,translateZ:vt,x:vt,y:vt,z:vt,perspective:vt,transformPerspective:vt,opacity:px,originX:qD,originY:qD,originZ:vt},QD={...Fm,transform:Math.round},nA={...gve,...vve,zIndex:QD,size:vt,fillOpacity:px,strokeOpacity:px,numOctaves:QD},yve={...nA,color:Kn,backgroundColor:Kn,outlineColor:Kn,fill:Kn,stroke:Kn,borderColor:Kn,borderTopColor:Kn,borderRightColor:Kn,borderBottomColor:Kn,borderLeftColor:Kn,filter:P2,WebkitFilter:P2},sA=e=>yve[e];function UW(e,t){let n=sA(e);return n!==P2&&(n=xc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const jve=new Set(["auto","none","0"]);function bve(e,t,n){let s=0,i;for(;s<e.length&&!i;){const a=e[s];typeof a=="string"&&!jve.has(a)&&xx(a).values.length&&(i=e[s]),s++}if(i&&n)for(const a of t)e[a]=UW(n,i)}class WW extends eA{constructor(t,n,s,i,a){super(t,n,s,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),JT(d))){const h=MW(d,n.current);h!==void 0&&(t[c]=h),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Xge.has(s)||t.length!==2)return;const[i,a]=t,o=YD(i),l=YD(a);if(o!==l)if(KD(o)&&KD(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let i=0;i<t.length;i++)Wge(t[i])&&s.push(i);s.length&&bve(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Gh[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(s,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:s,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(s);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=Gh[s](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,d])=>{n.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function iA(e){return typeof e=="function"}let _y;function wve(){_y=void 0}const Fa={now:()=>(_y===void 0&&Fa.set(Fn.isProcessing||Rge.useManualTiming?Fn.timestamp:performance.now()),_y),set:e=>{_y=e,queueMicrotask(wve)}},JD=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(xc.test(e)||e==="0")&&!e.startsWith("url("));function Nve(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Sve(e,t,n,s){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=JD(i,t),l=JD(a,t);return!o||!l?!1:Nve(e)||(n==="spring"||iA(n))&&s}const _ve=40;class HW{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Fa.now(),this.options={autoplay:t,delay:n,type:s,repeat:i,repeatDelay:a,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>_ve?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&rve(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Fa.now(),this.hasAttemptedResolve=!0;const{name:s,type:i,velocity:a,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!Sve(t,s,i,a))if(o)this.options.duration=0;else{c==null||c(Gb(t,this.options,n)),l==null||l(),this.resolveFinishedPromise();return}const h=this.initPlayback(t,n);h!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Zh=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},qW=(e,t,n=10)=>{let s="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)s+=e(Zh(0,i-1,a))+", ";return`linear(${s.substring(0,s.length-2)})`};function KW(e,t){return t?e*(1e3/t):0}const Pve=5;function GW(e,t,n){const s=Math.max(t-Pve,0);return KW(n-e(s),t-s)}const Zr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},O1=.001;function Cve({duration:e=Zr.duration,bounce:t=Zr.bounce,velocity:n=Zr.velocity,mass:s=Zr.mass}){let i,a,o=1-t;o=Go(Zr.minDamping,Zr.maxDamping,o),e=Go(Zr.minDuration,Zr.maxDuration,Oo(e)),o<1?(i=d=>{const h=d*o,m=h*e,f=h-n,v=C2(d,o),p=Math.exp(-m);return O1-f/v*p},a=d=>{const m=d*o*e,f=m*n+n,v=Math.pow(o,2)*Math.pow(d,2)*e,p=Math.exp(-m),x=C2(Math.pow(d,2),o);return(-i(d)+O1>0?-1:1)*((f-v)*p)/x}):(i=d=>{const h=Math.exp(-d*e),m=(d-n)*e+1;return-O1+h*m},a=d=>{const h=Math.exp(-d*e),m=(n-d)*(e*e);return h*m});const l=5/e,c=Tve(i,a,l);if(e=Eo(e),isNaN(c))return{stiffness:Zr.stiffness,damping:Zr.damping,duration:e};{const d=Math.pow(c,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:e}}}const kve=12;function Tve(e,t,n){let s=n;for(let i=1;i<kve;i++)s=s-e(s)/t(s);return s}function C2(e,t){return e*Math.sqrt(1-t*t)}const k2=2e4;function ZW(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<k2;)t+=n,s=e.next(t);return t>=k2?1/0:t}const Ave=["duration","bounce"],Eve=["stiffness","damping","mass"];function eI(e,t){return t.some(n=>e[n]!==void 0)}function Ove(e){let t={velocity:Zr.velocity,stiffness:Zr.stiffness,damping:Zr.damping,mass:Zr.mass,isResolvedFromDuration:!1,...e};if(!eI(e,Eve)&&eI(e,Ave))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,a=2*Go(.05,1,1-e.bounce)*Math.sqrt(i);t={...t,mass:Zr.mass,stiffness:i,damping:a}}else{const n=Cve(e);t={...t,...n,mass:Zr.mass},t.isResolvedFromDuration=!0}return t}function YW(e=Zr.visualDuration,t=Zr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:d,mass:h,duration:m,velocity:f,isResolvedFromDuration:v}=Ove({...n,velocity:-Oo(n.velocity||0)}),p=f||0,x=d/(2*Math.sqrt(c*h)),y=o-a,w=Oo(Math.sqrt(c/h)),j=Math.abs(y)<5;s||(s=j?Zr.restSpeed.granular:Zr.restSpeed.default),i||(i=j?Zr.restDelta.granular:Zr.restDelta.default);let N;if(x<1){const P=C2(w,x);N=k=>{const _=Math.exp(-x*w*k);return o-_*((p+x*w*y)/P*Math.sin(P*k)+y*Math.cos(P*k))}}else if(x===1)N=P=>o-Math.exp(-w*P)*(y+(p+w*y)*P);else{const P=w*Math.sqrt(x*x-1);N=k=>{const _=Math.exp(-x*w*k),O=Math.min(P*k,300);return o-_*((p+x*w*y)*Math.sinh(O)+P*y*Math.cosh(O))/P}}const C={calculatedDuration:v&&m||null,next:P=>{const k=N(P);if(v)l.done=P>=m;else{let _=0;x<1&&(_=P===0?Eo(p):GW(N,P,k));const O=Math.abs(_)<=s,M=Math.abs(o-k)<=i;l.done=O&&M}return l.value=l.done?o:k,l},toString:()=>{const P=Math.min(ZW(C),k2),k=qW(_=>C.next(P*_).value,P,30);return P+"ms "+k}};return C}function tI({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const m=e[0],f={done:!1,value:m},v=O=>l!==void 0&&O<l||c!==void 0&&O>c,p=O=>l===void 0?c:c===void 0||Math.abs(l-O)<Math.abs(c-O)?l:c;let x=n*t;const y=m+x,w=o===void 0?y:o(y);w!==y&&(x=w-m);const j=O=>-x*Math.exp(-O/s),N=O=>w+j(O),C=O=>{const M=j(O),T=N(O);f.done=Math.abs(M)<=d,f.value=f.done?w:T};let P,k;const _=O=>{v(f.value)&&(P=O,k=YW({keyframes:[f.value,p(f.value)],velocity:GW(N,O,f.value),damping:i,stiffness:a,restDelta:d,restSpeed:h}))};return _(0),{calculatedDuration:null,next:O=>{let M=!1;return!k&&P===void 0&&(M=!0,C(O),_(O)),P!==void 0&&O>=P?k.next(O-P):(!M&&C(O),f)}}}const Mve=kg(.42,0,1,1),Dve=kg(0,0,.58,1),XW=kg(.42,0,.58,1),Ive=e=>Array.isArray(e)&&typeof e[0]!="number",aA=e=>Array.isArray(e)&&typeof e[0]=="number",rI={linear:ts,easeIn:Mve,easeInOut:XW,easeOut:Dve,circIn:QT,circInOut:kW,circOut:CW,backIn:XT,backInOut:_W,backOut:SW,anticipate:PW},nI=e=>{if(aA(e)){w2(e.length===4);const[t,n,s,i]=e;return kg(t,n,s,i)}else if(typeof e=="string")return w2(rI[e]!==void 0),rI[e];return e},Lve=(e,t)=>n=>t(e(n)),Xl=(...e)=>e.reduce(Lve),Hr=(e,t,n)=>e+(t-e)*n;function M1(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Rve({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let i=0,a=0,o=0;if(!t)i=a=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;i=M1(c,l,e+1/3),a=M1(c,l,e),o=M1(c,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:s}}function F0(e,t){return n=>n>0?t:e}const D1=(e,t,n)=>{const s=e*e,i=n*(t*t-s)+s;return i<0?0:Math.sqrt(i)},$ve=[_2,td,Uu],Fve=e=>$ve.find(t=>t.test(e));function sI(e){const t=Fve(e);if(!t)return!1;let n=t.parse(e);return t===Uu&&(n=Rve(n)),n}const iI=(e,t)=>{const n=sI(e),s=sI(t);if(!n||!s)return F0(e,t);const i={...n};return a=>(i.red=D1(n.red,s.red,a),i.green=D1(n.green,s.green,a),i.blue=D1(n.blue,s.blue,a),i.alpha=Hr(n.alpha,s.alpha,a),td.transform(i))},T2=new Set(["none","hidden"]);function zve(e,t){return T2.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Bve(e,t){return n=>Hr(e,t,n)}function oA(e){return typeof e=="number"?Bve:typeof e=="string"?JT(e)?F0:Kn.test(e)?iI:Wve:Array.isArray(e)?QW:typeof e=="object"?Kn.test(e)?iI:Vve:F0}function QW(e,t){const n=[...e],s=n.length,i=e.map((a,o)=>oA(a)(a,t[o]));return a=>{for(let o=0;o<s;o++)n[o]=i[o](a);return n}}function Vve(e,t){const n={...e,...t},s={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(s[i]=oA(e[i])(e[i],t[i]));return i=>{for(const a in s)n[a]=s[a](i);return n}}function Uve(e,t){var n;const s=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],l=e.indexes[o][i[o]],c=(n=e.values[l])!==null&&n!==void 0?n:0;s[a]=c,i[o]++}return s}const Wve=(e,t)=>{const n=xc.createTransformer(t),s=xx(e),i=xx(t);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?T2.has(e)&&!i.values.length||T2.has(t)&&!s.values.length?zve(e,t):Xl(QW(Uve(s,i),i.values),n):F0(e,t)};function JW(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Hr(e,t,n):oA(e)(e,t)}function Hve(e,t,n){const s=[],i=n||JW,a=e.length-1;for(let o=0;o<a;o++){let l=i(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||ts:t;l=Xl(c,l)}s.push(l)}return s}function qve(e,t,{clamp:n=!0,ease:s,mixer:i}={}){const a=e.length;if(w2(a===t.length),a===1)return()=>t[0];if(a===2&&e[0]===e[1])return()=>t[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Hve(t,s,i),l=o.length,c=d=>{let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const m=Zh(e[h],e[h+1],d);return o[h](m)};return n?d=>c(Go(e[0],e[a-1],d)):c}function Kve(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const i=Zh(0,t,s);e.push(Hr(n,1,i))}}function Gve(e){const t=[0];return Kve(t,e.length-1),t}function Zve(e,t){return e.map(n=>n*t)}function Yve(e,t){return e.map(()=>t||XW).splice(0,e.length-1)}function z0({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const i=Ive(s)?s.map(nI):nI(s),a={done:!1,value:t[0]},o=Zve(n&&n.length===t.length?n:Gve(t),e),l=qve(o,t,{ease:Array.isArray(i)?i:Yve(t,i)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const Xve=e=>{const t=({timestamp:n})=>e(n);return{start:()=>xr.update(t,!0),stop:()=>pc(t),now:()=>Fn.isProcessing?Fn.timestamp:Fa.now()}},Qve={decay:tI,inertia:tI,tween:z0,keyframes:z0,spring:YW},Jve=e=>e/100;class lA extends HW{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:s,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||eA,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(a,l,n,s,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,l=iA(n)?n:Qve[n]||z0;let c,d;l!==z0&&typeof t[0]!="number"&&(c=Xl(Jve,JW(t[0],t[1])),t=[0,100]);const h=l({...this.options,keyframes:t});a==="mirror"&&(d=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=ZW(h));const{calculatedDuration:m}=h,f=m+i,v=f*(s+1)-i;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:f,totalDuration:v}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:O}=this.options;return{done:!0,value:O[O.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:h,resolvedDuration:m}=s;if(this.startTime===null)return a.next(0);const{delay:f,repeat:v,repeatType:p,repeatDelay:x,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-h/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const w=this.currentTime-f*(this.speed>=0?1:-1),j=this.speed>=0?w<0:w>h;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let N=this.currentTime,C=a;if(v){const O=Math.min(this.currentTime,h)/m;let M=Math.floor(O),T=O%1;!T&&O>=1&&(T=1),T===1&&M--,M=Math.min(M,v+1),!!(M%2)&&(p==="reverse"?(T=1-T,x&&(T-=x/m)):p==="mirror"&&(C=o)),N=Go(0,1,T)*m}const P=j?{done:!1,value:c[0]}:C.next(N);l&&(P.value=l(P.value));let{done:k}=P;!j&&d!==null&&(k=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return _&&i!==void 0&&(P.value=Gb(c,this.options,i)),y&&y(P.value),_&&this.finish(),P}get duration(){const{resolved:t}=this;return t?Oo(t.calculatedDuration):0}get time(){return Oo(this.currentTime)}set time(t){t=Eo(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Oo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=Xve,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const eye=new Set(["opacity","clipPath","filter","transform"]);function cA(e){let t;return()=>(t===void 0&&(t=e()),t)}const tye={linearEasing:void 0};function rye(e,t){const n=cA(e);return()=>{var s;return(s=tye[t])!==null&&s!==void 0?s:n()}}const B0=rye(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function eH(e){return!!(typeof e=="function"&&B0()||!e||typeof e=="string"&&(e in A2||B0())||aA(e)||Array.isArray(e)&&e.every(eH))}const Xf=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,A2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xf([0,.65,.55,1]),circOut:Xf([.55,0,1,.45]),backIn:Xf([.31,.01,.66,-.59]),backOut:Xf([.33,1.53,.69,.99])};function tH(e,t){if(e)return typeof e=="function"&&B0()?qW(e,t):aA(e)?Xf(e):Array.isArray(e)?e.map(n=>tH(n,t)||A2.easeOut):A2[e]}function nye(e,t,n,{delay:s=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[t]:n};c&&(d.offset=c);const h=tH(l,i);return Array.isArray(h)&&(d.easing=h),e.animate(d,{delay:s,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function aI(e,t){e.timeline=t,e.onfinish=null}const sye=cA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),V0=10,iye=2e4;function aye(e){return iA(e.type)||e.type==="spring"||!eH(e.ease)}function oye(e,t){const n=new lA({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const i=[];let a=0;for(;!s.done&&a<iye;)s=n.sample(a),i.push(s.value),a+=V0;return{times:void 0,keyframes:i,duration:a-V0,ease:"linear"}}const rH={anticipate:PW,backInOut:_W,circInOut:kW};function lye(e){return e in rH}class oI extends HW{constructor(t){super(t);const{name:n,motionValue:s,element:i,keyframes:a}=this.options;this.resolver=new WW(a,(o,l)=>this.onKeyframesResolved(o,l),n,s,i),this.resolver.scheduleResolve()}initPlayback(t,n){var s;let{duration:i=300,times:a,ease:o,type:l,motionValue:c,name:d,startTime:h}=this.options;if(!(!((s=c.owner)===null||s===void 0)&&s.current))return!1;if(typeof o=="string"&&B0()&&lye(o)&&(o=rH[o]),aye(this.options)){const{onComplete:f,onUpdate:v,motionValue:p,element:x,...y}=this.options,w=oye(t,y);t=w.keyframes,t.length===1&&(t[1]=t[0]),i=w.duration,a=w.times,o=w.ease,l="keyframes"}const m=nye(c.owner.current,d,t,{...this.options,duration:i,times:a,ease:o});return m.startTime=h??this.calcStartTime(),this.pendingTimeline?(aI(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:f}=this.options;c.set(Gb(t,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:i,times:a,type:l,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Oo(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Oo(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=Eo(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return ts;const{animation:s}=n;aI(s,t)}return ts}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:i,type:a,ease:o,times:l}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:m,element:f,...v}=this.options,p=new lA({...v,keyframes:s,duration:i,type:a,ease:o,times:l,isGenerator:!0}),x=Eo(this.time);d.setWithVelocity(p.sample(x-V0).value,p.sample(x).value,V0)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:i,repeatType:a,damping:o,type:l}=t;return sye()&&s&&eye.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&a!=="mirror"&&o!==0&&l!=="inertia"}}const cye=cA(()=>window.ScrollTimeline!==void 0);class dye{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t,n){const s=this.animations.map(i=>cye()&&i.attachTimeline?i.attachTimeline(t):n(i));return()=>{s.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function uye({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const dA=(e,t,n,s={},i,a)=>o=>{const l=YT(s,e)||{},c=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-Eo(c);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:i};uye(l)||(h={...h,...Lge(e,h)}),h.duration&&(h.duration=Eo(h.duration)),h.repeatDelay&&(h.repeatDelay=Eo(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(m=!0)),m&&!a&&t.get()!==void 0){const f=Gb(h.keyframes,l);if(f!==void 0)return xr.update(()=>{h.onUpdate(f),h.onComplete()}),new dye([])}return!a&&oI.supports(h)?new oI(h):new lA(h)},hye=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),mye=e=>b2(e)?e[e.length-1]||0:e;function uA(e,t){e.indexOf(t)===-1&&e.push(t)}function hA(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class mA{constructor(){this.subscriptions=[]}add(t){return uA(this.subscriptions,t),()=>hA(this.subscriptions,t)}notify(t,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,s);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const lI=30,fye=e=>!isNaN(parseFloat(e));class pye{constructor(t,n={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{const a=Fa.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Fa.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=fye(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new mA);const s=this.events[t].add(n);return t==="change"?()=>{s(),xr.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Fa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lI);return KW(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gx(e,t){return new pye(e,t)}function xye(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,gx(n))}function gye(e,t){const n=Kb(e,t);let{transitionEnd:s={},transition:i={},...a}=n||{};a={...a,...s};for(const o in a){const l=mye(a[o]);xye(e,o,l)}}const fA=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),vye="framerAppearId",nH="data-"+fA(vye);function sH(e){return e.props[nH]}const Jn=e=>!!(e&&e.getVelocity);function yye(e){return!!(Jn(e)&&e.add)}function E2(e,t){const n=e.getValue("willChange");if(yye(n))return n.add(t)}function jye({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function iH(e,t,{delay:n=0,transitionOverride:s,type:i}={}){var a;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;s&&(o=s);const d=[],h=i&&e.animationState&&e.animationState.getState()[i];for(const m in c){const f=e.getValue(m,(a=e.latestValues[m])!==null&&a!==void 0?a:null),v=c[m];if(v===void 0||h&&jye(h,m))continue;const p={delay:n,...YT(o||{},m)};let x=!1;if(window.MotionHandoffAnimation){const w=sH(e);if(w){const j=window.MotionHandoffAnimation(w,m,xr);j!==null&&(p.startTime=j,x=!0)}}E2(e,m),f.start(dA(m,f,v,e.shouldReduceMotion&&nu.has(m)?{type:!1}:p,e,x));const y=f.animation;y&&d.push(y)}return l&&Promise.all(d).then(()=>{xr.update(()=>{l&&gye(e,l)})}),d}function O2(e,t,n={}){var s;const i=Kb(e,t,n.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(iH(e,i,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:f}=a;return bye(e,t,h+d,m,f,n)}:()=>Promise.resolve(),{when:c}=a;if(c){const[d,h]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>h())}else return Promise.all([o(),l(n.delay)])}function bye(e,t,n=0,s=0,i=1,a){const o=[],l=(e.variantChildren.size-1)*s,c=i===1?(d=0)=>d*s:(d=0)=>l-d*s;return Array.from(e.variantChildren).sort(wye).forEach((d,h)=>{d.notify("AnimationStart",t),o.push(O2(d,t,{...a,delay:n+c(h)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function wye(e,t){return e.sortNodePosition(t)}function Nye(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(a=>O2(e,a,n));s=Promise.all(i)}else if(typeof t=="string")s=O2(e,t,n);else{const i=typeof t=="function"?Kb(e,t,n.custom):t;s=Promise.all(iH(e,i,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}const Sye=ZT.length;function aH(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?aH(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Sye;n++){const s=ZT[n],i=e.props[s];(fx(i)||i===!1)&&(t[s]=i)}return t}const _ye=[...GT].reverse(),Pye=GT.length;function Cye(e){return t=>Promise.all(t.map(({animation:n,options:s})=>Nye(e,n,s)))}function kye(e){let t=Cye(e),n=cI(),s=!0;const i=c=>(d,h)=>{var m;const f=Kb(e,h,c==="exit"?(m=e.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(f){const{transition:v,transitionEnd:p,...x}=f;d={...d,...x,...p}}return d};function a(c){t=c(e)}function o(c){const{props:d}=e,h=aH(e.parent)||{},m=[],f=new Set;let v={},p=1/0;for(let y=0;y<Pye;y++){const w=_ye[y],j=n[w],N=d[w]!==void 0?d[w]:h[w],C=fx(N),P=w===c?j.isActive:null;P===!1&&(p=y);let k=N===h[w]&&N!==d[w]&&C;if(k&&s&&e.manuallyAnimateOnMount&&(k=!1),j.protectedKeys={...v},!j.isActive&&P===null||!N&&!j.prevProp||qb(N)||typeof N=="boolean")continue;const _=Tye(j.prevProp,N);let O=_||w===c&&j.isActive&&!k&&C||y>p&&C,M=!1;const T=Array.isArray(N)?N:[N];let I=T.reduce(i(w),{});P===!1&&(I={});const{prevResolvedValues:A={}}=j,V={...A,...I},D=Q=>{O=!0,f.has(Q)&&(M=!0,f.delete(Q)),j.needsAnimating[Q]=!0;const q=e.getValue(Q);q&&(q.liveStyle=!1)};for(const Q in V){const q=I[Q],B=A[Q];if(v.hasOwnProperty(Q))continue;let z=!1;b2(q)&&b2(B)?z=!yW(q,B):z=q!==B,z?q!=null?D(Q):f.add(Q):q!==void 0&&f.has(Q)?D(Q):j.protectedKeys[Q]=!0}j.prevProp=N,j.prevResolvedValues=I,j.isActive&&(v={...v,...I}),s&&e.blockInitialAnimation&&(O=!1),O&&(!(k&&_)||M)&&m.push(...T.map(Q=>({animation:Q,options:{type:w}})))}if(f.size){const y={};f.forEach(w=>{const j=e.getBaseTarget(w),N=e.getValue(w);N&&(N.liveStyle=!0),y[w]=j??null}),m.push({animation:y})}let x=!!m.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(x=!1),s=!1,x?t(m):Promise.resolve()}function l(c,d){var h;if(n[c].isActive===d)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(f=>{var v;return(v=f.animationState)===null||v===void 0?void 0:v.setActive(c,d)}),n[c].isActive=d;const m=o(c);for(const f in n)n[f].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=cI(),s=!0}}}function Tye(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!yW(t,e):!1}function $c(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cI(){return{animate:$c(!0),whileInView:$c(),whileHover:$c(),whileTap:$c(),whileDrag:$c(),whileFocus:$c(),exit:$c()}}class _c{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Aye extends _c{constructor(t){super(t),t.animationState||(t.animationState=kye(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();qb(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let Eye=0;class Oye extends _c{constructor(){super(...arguments),this.id=Eye++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Mye={animation:{Feature:Aye},exit:{Feature:Oye}};function Dye(e,t,n){var s;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const a=(s=void 0)!==null&&s!==void 0?s:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const Vi={x:!1,y:!1};function oH(){return Vi.x||Vi.y}function dI(e){return t=>{t.pointerType==="touch"||oH()||e(t)}}function Iye(e,t,n={}){const s=new AbortController,i={passive:!0,...n,signal:s.signal},a=dI(o=>{const{target:l}=o,c=t(o);if(!c||!l)return;const d=dI(h=>{c(h),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,i)});return Dye(e).forEach(o=>{o.addEventListener("pointerenter",a,i)}),()=>s.abort()}function Lye(e){return e==="x"||e==="y"?Vi[e]?null:(Vi[e]=!0,()=>{Vi[e]=!1}):Vi.x||Vi.y?null:(Vi.x=Vi.y=!0,()=>{Vi.x=Vi.y=!1})}const lH=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Ag(e){return{point:{x:e.pageX,y:e.pageY}}}const Rye=e=>t=>lH(t)&&e(t,Ag(t));function wo(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function Ql(e,t,n,s){return wo(e,t,Rye(n),s)}const uI=(e,t)=>Math.abs(e-t);function $ye(e,t){const n=uI(e.x,t.x),s=uI(e.y,t.y);return Math.sqrt(n**2+s**2)}class cH{constructor(t,n,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=L1(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,v=$ye(m.offset,{x:0,y:0})>=3;if(!f&&!v)return;const{point:p}=m,{timestamp:x}=Fn;this.history.push({...p,timestamp:x});const{onStart:y,onMove:w}=this.handlers;f||(y&&y(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,f)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=I1(f,this.transformPagePoint),xr.update(this.updatePoint,!0)},this.handlePointerUp=(m,f)=>{this.end();const{onEnd:v,onSessionEnd:p,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=L1(m.type==="pointercancel"?this.lastMoveEventInfo:I1(f,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,y),p&&p(m,y)},!lH(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.contextWindow=i||window;const o=Ag(t),l=I1(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=Fn;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=n;h&&h(t,L1(l,this.history)),this.removeListeners=Xl(Ql(this.contextWindow,"pointermove",this.handlePointerMove),Ql(this.contextWindow,"pointerup",this.handlePointerUp),Ql(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),pc(this.updatePoint)}}function I1(e,t){return t?{point:t(e.point)}:e}function hI(e,t){return{x:e.x-t.x,y:e.y-t.y}}function L1({point:e},t){return{point:e,delta:hI(e,dH(t)),offset:hI(e,Fye(t)),velocity:zye(t,.1)}}function Fye(e){return e[0]}function dH(e){return e[e.length-1]}function zye(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const i=dH(e);for(;n>=0&&(s=e[n],!(i.timestamp-s.timestamp>Eo(t)));)n--;if(!s)return{x:0,y:0};const a=Oo(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Wu(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const uH=1e-4,Bye=1-uH,Vye=1+uH,hH=.01,Uye=0-hH,Wye=0+hH;function oi(e){return e.max-e.min}function Hye(e,t,n){return Math.abs(e-t)<=n}function mI(e,t,n,s=.5){e.origin=s,e.originPoint=Hr(t.min,t.max,e.origin),e.scale=oi(n)/oi(t),e.translate=Hr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Bye&&e.scale<=Vye||isNaN(e.scale))&&(e.scale=1),(e.translate>=Uye&&e.translate<=Wye||isNaN(e.translate))&&(e.translate=0)}function fp(e,t,n,s){mI(e.x,t.x,n.x,s?s.originX:void 0),mI(e.y,t.y,n.y,s?s.originY:void 0)}function fI(e,t,n){e.min=n.min+t.min,e.max=e.min+oi(t)}function qye(e,t,n){fI(e.x,t.x,n.x),fI(e.y,t.y,n.y)}function pI(e,t,n){e.min=t.min-n.min,e.max=e.min+oi(t)}function pp(e,t,n){pI(e.x,t.x,n.x),pI(e.y,t.y,n.y)}function Kye(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Hr(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Hr(n,e,s.max):Math.min(e,n)),e}function xI(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Gye(e,{top:t,left:n,bottom:s,right:i}){return{x:xI(e.x,n,i),y:xI(e.y,t,s)}}function gI(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function Zye(e,t){return{x:gI(e.x,t.x),y:gI(e.y,t.y)}}function Yye(e,t){let n=.5;const s=oi(e),i=oi(t);return i>s?n=Zh(t.min,t.max-s,e.min):s>i&&(n=Zh(e.min,e.max-i,t.min)),Go(0,1,n)}function Xye(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const M2=.35;function Qye(e=M2){return e===!1?e=0:e===!0&&(e=M2),{x:vI(e,"left","right"),y:vI(e,"top","bottom")}}function vI(e,t,n){return{min:yI(e,t),max:yI(e,n)}}function yI(e,t){return typeof e=="number"?e:e[t]||0}const jI=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hu=()=>({x:jI(),y:jI()}),bI=()=>({min:0,max:0}),tn=()=>({x:bI(),y:bI()});function gi(e){return[e("x"),e("y")]}function mH({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function Jye({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function e0e(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function R1(e){return e===void 0||e===1}function D2({scale:e,scaleX:t,scaleY:n}){return!R1(e)||!R1(t)||!R1(n)}function Wc(e){return D2(e)||fH(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function fH(e){return wI(e.x)||wI(e.y)}function wI(e){return e&&e!=="0%"}function U0(e,t,n){const s=e-n,i=t*s;return n+i}function NI(e,t,n,s,i){return i!==void 0&&(e=U0(e,i,s)),U0(e,n,s)+t}function I2(e,t=0,n=1,s,i){e.min=NI(e.min,t,n,s,i),e.max=NI(e.max,t,n,s,i)}function pH(e,{x:t,y:n}){I2(e.x,t.translate,t.scale,t.originPoint),I2(e.y,n.translate,n.scale,n.originPoint)}const SI=.999999999999,_I=1.0000000000001;function t0e(e,t,n,s=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,o;for(let l=0;l<i;l++){a=n[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ku(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,pH(e,o)),s&&Wc(a.latestValues)&&Ku(e,a.latestValues))}t.x<_I&&t.x>SI&&(t.x=1),t.y<_I&&t.y>SI&&(t.y=1)}function qu(e,t){e.min=e.min+t,e.max=e.max+t}function PI(e,t,n,s,i=.5){const a=Hr(e.min,e.max,i);I2(e,t,n,a,s)}function Ku(e,t){PI(e.x,t.x,t.scaleX,t.scale,t.originX),PI(e.y,t.y,t.scaleY,t.scale,t.originY)}function xH(e,t){return mH(e0e(e.getBoundingClientRect(),t))}function r0e(e,t,n){const s=xH(e,n),{scroll:i}=t;return i&&(qu(s.x,i.offset.x),qu(s.y,i.offset.y)),s}const gH=({current:e})=>e?e.ownerDocument.defaultView:null,n0e=new WeakMap;class s0e{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ag(h).point)},a=(h,m)=>{const{drag:f,dragPropagation:v,onDragStart:p}=this.getProps();if(f&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Lye(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gi(y=>{let w=this.getAxisMotionValue(y).get()||0;if($a.test(w)){const{projection:j}=this.visualElement;if(j&&j.layout){const N=j.layout.layoutBox[y];N&&(w=oi(N)*(parseFloat(w)/100))}}this.originPoint[y]=w}),p&&xr.postRender(()=>p(h,m)),E2(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,m)=>{const{dragPropagation:f,dragDirectionLock:v,onDirectionLock:p,onDrag:x}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:y}=m;if(v&&this.currentDirection===null){this.currentDirection=i0e(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",m.point,y),this.updateAxis("y",m.point,y),this.visualElement.render(),x&&x(h,m)},l=(h,m)=>this.stop(h,m),c=()=>gi(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new cH(t,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:gH(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&xr.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:i}=this.getProps();if(!s||!Fv(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=Kye(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&Wu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Gye(i.layoutBox,n):this.constraints=!1,this.elastic=Qye(s),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&gi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Xye(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Wu(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=r0e(s,i.root,this.visualElement.getTransformPagePoint());let o=Zye(i.layout.layoutBox,a);if(n){const l=n(Jye(o));this.hasMutatedConstraints=!!l,l&&(o=mH(l))}return o}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=gi(h=>{if(!Fv(h,n,this.currentDirection))return;let m=c&&c[h]||{};o&&(m={min:0,max:0});const f=i?200:1e6,v=i?40:1e7,p={type:"inertia",velocity:s?t[h]:0,bounceStiffness:f,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(h,p)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return E2(this.visualElement,t),s.start(dA(t,s,0,n,this.visualElement,!1))}stopAnimation(){gi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gi(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){gi(n=>{const{drag:s}=this.getProps();if(!Fv(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];a.set(t[n]-Hr(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Wu(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};gi(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=Yye({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),gi(o=>{if(!Fv(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Hr(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;n0e.set(this.visualElement,this);const t=this.visualElement.current,n=Ql(t,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Wu(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xr.read(s);const o=wo(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(gi(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=c[h].translate,m.set(m.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=M2,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function Fv(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function i0e(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class a0e extends _c{constructor(t){super(t),this.removeGroupControls=ts,this.removeListeners=ts,this.controls=new s0e(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ts}unmount(){this.removeGroupControls(),this.removeListeners()}}const CI=e=>(t,n)=>{e&&xr.postRender(()=>e(t,n))};class o0e extends _c{constructor(){super(...arguments),this.removePointerDownListener=ts}onPointerDown(t){this.session=new cH(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gH(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:CI(t),onStart:CI(n),onMove:s,onEnd:(a,o)=>{delete this.session,i&&xr.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Ql(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Zb=b.createContext(null);function l0e(){const e=b.useContext(Zb);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,i=b.useId();b.useEffect(()=>s(i),[]);const a=b.useCallback(()=>n&&n(i),[i,n]);return!t&&n?[!1,a]:[!0]}const pA=b.createContext({}),vH=b.createContext({}),Py={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kI(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const kf={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(vt.test(e))e=parseFloat(e);else return e;const n=kI(e,t.target.x),s=kI(e,t.target.y);return`${n}% ${s}%`}},c0e={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,i=xc.parse(e);if(i.length>5)return s;const a=xc.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=c;const d=Hr(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}},W0={};function d0e(e){Object.assign(W0,e)}const{schedule:xA,cancel:OUe}=jW(queueMicrotask,!1);class u0e extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=t;d0e(h0e),a&&(n.group&&n.group.add(a),s&&s.register&&i&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Py.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:i,isPresent:a}=this.props,o=s.projection;return o&&(o.isPresent=a,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||xr.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),xA.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function yH(e){const[t,n]=l0e(),s=b.useContext(pA);return r.jsx(u0e,{...e,layoutGroup:s,switchLayoutGroup:b.useContext(vH),isPresent:t,safeToRemove:n})}const h0e={borderRadius:{...kf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kf,borderTopRightRadius:kf,borderBottomLeftRadius:kf,borderBottomRightRadius:kf,boxShadow:c0e},jH=["TopLeft","TopRight","BottomLeft","BottomRight"],m0e=jH.length,TI=e=>typeof e=="string"?parseFloat(e):e,AI=e=>typeof e=="number"||vt.test(e);function f0e(e,t,n,s,i,a){i?(e.opacity=Hr(0,n.opacity!==void 0?n.opacity:1,p0e(s)),e.opacityExit=Hr(t.opacity!==void 0?t.opacity:1,0,x0e(s))):a&&(e.opacity=Hr(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let o=0;o<m0e;o++){const l=`border${jH[o]}Radius`;let c=EI(t,l),d=EI(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||AI(c)===AI(d)?(e[l]=Math.max(Hr(TI(c),TI(d),s),0),($a.test(d)||$a.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=Hr(t.rotate||0,n.rotate||0,s))}function EI(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const p0e=bH(0,.5,CW),x0e=bH(.5,.95,ts);function bH(e,t,n){return s=>s<e?0:s>t?1:n(Zh(e,t,s))}function OI(e,t){e.min=t.min,e.max=t.max}function mi(e,t){OI(e.x,t.x),OI(e.y,t.y)}function MI(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function DI(e,t,n,s,i){return e-=t,e=U0(e,1/n,s),i!==void 0&&(e=U0(e,1/i,s)),e}function g0e(e,t=0,n=1,s=.5,i,a=e,o=e){if($a.test(t)&&(t=parseFloat(t),t=Hr(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Hr(a.min,a.max,s);e===a&&(l-=t),e.min=DI(e.min,t,n,l,i),e.max=DI(e.max,t,n,l,i)}function II(e,t,[n,s,i],a,o){g0e(e,t[n],t[s],t[i],t.scale,a,o)}const v0e=["x","scaleX","originX"],y0e=["y","scaleY","originY"];function LI(e,t,n,s){II(e.x,t,v0e,n?n.x:void 0,s?s.x:void 0),II(e.y,t,y0e,n?n.y:void 0,s?s.y:void 0)}function RI(e){return e.translate===0&&e.scale===1}function wH(e){return RI(e.x)&&RI(e.y)}function $I(e,t){return e.min===t.min&&e.max===t.max}function j0e(e,t){return $I(e.x,t.x)&&$I(e.y,t.y)}function FI(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function NH(e,t){return FI(e.x,t.x)&&FI(e.y,t.y)}function zI(e){return oi(e.x)/oi(e.y)}function BI(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class b0e{constructor(){this.members=[]}add(t){uA(this.members,t),t.scheduleRender()}remove(t){if(hA(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function w0e(e,t,n){let s="";const i=e.x.translate/t.x,a=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(s=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:m,rotateY:f,skewX:v,skewY:p}=n;d&&(s=`perspective(${d}px) ${s}`),h&&(s+=`rotate(${h}deg) `),m&&(s+=`rotateX(${m}deg) `),f&&(s+=`rotateY(${f}deg) `),v&&(s+=`skewX(${v}deg) `),p&&(s+=`skewY(${p}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const N0e=(e,t)=>e.depth-t.depth;class S0e{constructor(){this.children=[],this.isDirty=!1}add(t){uA(this.children,t),this.isDirty=!0}remove(t){hA(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(N0e),this.isDirty=!1,this.children.forEach(t)}}function Cy(e){const t=Jn(e)?e.get():e;return hye(t)?t.toValue():t}function _0e(e,t){const n=Fa.now(),s=({timestamp:i})=>{const a=i-n;a>=t&&(pc(s),e(a-t))};return xr.read(s,!0),()=>pc(s)}function P0e(e){return e instanceof SVGElement&&e.tagName!=="svg"}function C0e(e,t,n){const s=Jn(e)?e:gx(e);return s.start(dA("",s,t,n)),s.animation}const Hc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Qf=typeof window<"u"&&window.MotionDebug!==void 0,$1=["","X","Y","Z"],k0e={visibility:"hidden"},VI=1e3;let T0e=0;function F1(e,t,n,s){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),s&&(s[e]=0))}function SH(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=sH(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",xr,!(i||a))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&SH(s)}function _H({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},l=t==null?void 0:t()){this.id=T0e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qf&&(Hc.totalNodes=Hc.resolvedTargetDeltas=Hc.recalculatedProjection=0),this.nodes.forEach(O0e),this.nodes.forEach(R0e),this.nodes.forEach($0e),this.nodes.forEach(M0e),Qf&&window.MotionDebug.record(Hc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new S0e)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new mA),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=P0e(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let m;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=_0e(f,250),Py.hasAnimatedSinceResize&&(Py.hasAnimatedSinceResize=!1,this.nodes.forEach(WI))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:f,hasRelativeTargetChanged:v,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||U0e,{onLayoutAnimationStart:y,onLayoutAnimationComplete:w}=h.getProps(),j=!this.targetLayout||!NH(this.targetLayout,p)||v,N=!f&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||f&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,N);const C={...YT(x,"layout"),onPlay:y,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else f||WI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,pc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(F0e),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&SH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(UI);return}this.isUpdating||this.nodes.forEach(I0e),this.isUpdating=!1,this.nodes.forEach(L0e),this.nodes.forEach(A0e),this.nodes.forEach(E0e),this.clearAllSnapshots();const l=Fa.now();Fn.delta=Go(0,1e3/60,l-Fn.timestamp),Fn.timestamp=l,Fn.isProcessing=!0,A1.update.process(Fn),A1.preRender.process(Fn),A1.render.process(Fn),Fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(D0e),this.sharedNodes.forEach(z0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!wH(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(l||Wc(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),W0e(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return tn();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(H0e))){const{scroll:h}=this.root;h&&(qu(c.x,h.offset.x),qu(c.y,h.offset.y))}return c}removeElementScroll(o){var l;const c=tn();if(mi(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:f}=h;h!==this.root&&m&&f.layoutScroll&&(m.wasRoot&&mi(c,o),qu(c.x,m.offset.x),qu(c.y,m.offset.y))}return c}applyTransform(o,l=!1){const c=tn();mi(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ku(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Wc(h.latestValues)&&Ku(c,h.latestValues)}return Wc(this.latestValues)&&Ku(c,this.latestValues),c}removeTransform(o){const l=tn();mi(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Wc(d.latestValues))continue;D2(d.latestValues)&&d.updateSnapshot();const h=tn(),m=d.measurePageBox();mi(h,m),LI(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Wc(this.latestValues)&&LI(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:f}=this.options;if(!(!this.layout||!(m||f))){if(this.resolvedRelativeTargetAt=Fn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),pp(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=tn(),this.targetWithTransforms=tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qye(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mi(this.target,this.layout.layoutBox),pH(this.target,this.targetDelta)):mi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),pp(this.relativeTargetOrigin,this.target,v.target),mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qf&&Hc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||D2(this.parent.latestValues)||fH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Fn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;mi(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,v=this.treeScale.y;t0e(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=tn());const{target:p}=l;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(MI(this.prevProjectionDelta.x,this.projectionDelta.x),MI(this.prevProjectionDelta.y,this.projectionDelta.y)),fp(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==v||!BI(this.projectionDelta.x,this.prevProjectionDelta.x)||!BI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Qf&&Hc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hu(),this.projectionDelta=Hu(),this.projectionDeltaWithTransform=Hu()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},m=Hu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=tn(),v=c?c.source:void 0,p=this.layout?this.layout.source:void 0,x=v!==p,y=this.getStack(),w=!y||y.members.length<=1,j=!!(x&&!w&&this.options.crossfade===!0&&!this.path.some(V0e));this.animationProgress=0;let N;this.mixTargetDelta=C=>{const P=C/1e3;HI(m.x,o.x,P),HI(m.y,o.y,P),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pp(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),B0e(this.relativeTarget,this.relativeTargetOrigin,f,P),N&&j0e(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=tn()),mi(N,this.relativeTarget)),x&&(this.animationValues=h,f0e(h,d,this.latestValues,P,j,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(pc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xr.update(()=>{Py.hasAnimatedSinceResize=!0,this.currentAnimation=C0e(0,VI,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(VI),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&PH(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||tn();const m=oi(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const f=oi(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}mi(l,c),Ku(l,h),fp(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new b0e),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&F1("z",o,d,this.animationValues);for(let h=0;h<$1.length;h++)F1(`rotate${$1[h]}`,o,d,this.animationValues),F1(`skew${$1[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return k0e;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Cy(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Cy(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Wc(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const f=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=w0e(this.projectionDeltaWithTransform,this.treeScale,f),h&&(d.transform=h(f,d.transform));const{x:v,y:p}=this.projectionDelta;d.transformOrigin=`${v.origin*100}% ${p.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=m===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const x in W0){if(f[x]===void 0)continue;const{correct:y,applyTo:w}=W0[x],j=d.transform==="none"?f[x]:y(f[x],m);if(w){const N=w.length;for(let C=0;C<N;C++)d[w[C]]=j}else d[x]=j}return this.options.layoutId&&(d.pointerEvents=m===this?Cy(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(UI),this.root.sharedNodes.clear()}}}function A0e(e){e.updateLayout()}function E0e(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:a}=e.options,o=n.source!==e.layout.source;a==="size"?gi(m=>{const f=o?n.measuredBox[m]:n.layoutBox[m],v=oi(f);f.min=s[m].min,f.max=f.min+v}):PH(a,n.layoutBox,s)&&gi(m=>{const f=o?n.measuredBox[m]:n.layoutBox[m],v=oi(s[m]);f.max=f.min+v,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+v)});const l=Hu();fp(l,s,n.layoutBox);const c=Hu();o?fp(c,e.applyTransform(i,!0),n.measuredBox):fp(c,s,n.layoutBox);const d=!wH(l);let h=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:v}=m;if(f&&v){const p=tn();pp(p,n.layoutBox,f.layoutBox);const x=tn();pp(x,s,v.layoutBox),NH(p,x)||(h=!0),m.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=p,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function O0e(e){Qf&&Hc.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function M0e(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function D0e(e){e.clearSnapshot()}function UI(e){e.clearMeasurements()}function I0e(e){e.isLayoutDirty=!1}function L0e(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function WI(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function R0e(e){e.resolveTargetDelta()}function $0e(e){e.calcProjection()}function F0e(e){e.resetSkewAndRotation()}function z0e(e){e.removeLeadSnapshot()}function HI(e,t,n){e.translate=Hr(t.translate,0,n),e.scale=Hr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function qI(e,t,n,s){e.min=Hr(t.min,n.min,s),e.max=Hr(t.max,n.max,s)}function B0e(e,t,n,s){qI(e.x,t.x,n.x,s),qI(e.y,t.y,n.y,s)}function V0e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const U0e={duration:.45,ease:[.4,0,.1,1]},KI=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),GI=KI("applewebkit/")&&!KI("chrome/")?Math.round:ts;function ZI(e){e.min=GI(e.min),e.max=GI(e.max)}function W0e(e){ZI(e.x),ZI(e.y)}function PH(e,t,n){return e==="position"||e==="preserve-aspect"&&!Hye(zI(t),zI(n),.2)}function H0e(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const q0e=_H({attachResizeListener:(e,t)=>wo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),z1={current:void 0},CH=_H({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!z1.current){const e=new q0e({});e.mount(window),e.setOptions({layoutScroll:!0}),z1.current=e}return z1.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),K0e={pan:{Feature:o0e},drag:{Feature:a0e,ProjectionNode:CH,MeasureLayout:yH}};function YI(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n);const i=s[n?"onHoverStart":"onHoverEnd"];i&&xr.postRender(()=>i(t,Ag(t)))}class G0e extends _c{mount(){const{current:t,props:n}=this.node;t&&(this.unmount=Iye(t,s=>(YI(this.node,s,!0),i=>YI(this.node,i,!1)),{passive:!n.onHoverStart&&!n.onHoverEnd}))}unmount(){}}class Z0e extends _c{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xl(wo(this.node.current,"focus",()=>this.onFocus()),wo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const kH=(e,t)=>t?e===t?!0:kH(e,t.parentElement):!1;function B1(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Ag(n))}class Y0e extends _c{constructor(){super(...arguments),this.removeStartListeners=ts,this.removeEndListeners=ts,this.removeAccessibleListeners=ts,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),a=Ql(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:h,globalTapTarget:m}=this.node.getProps(),f=!m&&!kH(this.node.current,l.target)?h:d;f&&xr.update(()=>f(l,c))},{passive:!(s.onTap||s.onPointerUp)}),o=Ql(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Xl(a,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||B1("up",(c,d)=>{const{onTap:h}=this.node.getProps();h&&xr.postRender(()=>h(c,d))})};this.removeEndListeners(),this.removeEndListeners=wo(this.node.current,"keyup",o),B1("down",(l,c)=>{this.startPress(l,c)})},n=wo(this.node.current,"keydown",t),s=()=>{this.isPressing&&B1("cancel",(a,o)=>this.cancelPress(a,o))},i=wo(this.node.current,"blur",s);this.removeAccessibleListeners=Xl(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&xr.postRender(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!oH()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&xr.postRender(()=>s(t,n))}mount(){const t=this.node.getProps(),n=Ql(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=wo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Xl(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const L2=new WeakMap,V1=new WeakMap,X0e=e=>{const t=L2.get(e.target);t&&t(e)},Q0e=e=>{e.forEach(X0e)};function J0e({root:e,...t}){const n=e||document;V1.has(n)||V1.set(n,{});const s=V1.get(n),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(Q0e,{root:e,...t})),s[i]}function eje(e,t,n){const s=J0e(t);return L2.set(e,n),s.observe(e),()=>{L2.delete(e),s.unobserve(e)}}const tje={some:0,all:1};class rje extends _c{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:a}=t,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:tje[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),f=d?h:m;f&&f(c)};return eje(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(nje(t,n))&&this.startObserver()}unmount(){}}function nje({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const sje={inView:{Feature:rje},tap:{Feature:Y0e},focus:{Feature:Z0e},hover:{Feature:G0e}},ije={layout:{ProjectionNode:CH,MeasureLayout:yH}},gA=b.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Yb=b.createContext({}),vA=typeof window<"u",TH=vA?b.useLayoutEffect:b.useEffect,AH=b.createContext({strict:!1});function aje(e,t,n,s,i){var a,o;const{visualElement:l}=b.useContext(Yb),c=b.useContext(AH),d=b.useContext(Zb),h=b.useContext(gA).reducedMotion,m=b.useRef();s=s||c.renderer,!m.current&&s&&(m.current=s(e,{visualState:t,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const f=m.current,v=b.useContext(vH);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&oje(m.current,n,i,v);const p=b.useRef(!1);b.useInsertionEffect(()=>{f&&p.current&&f.update(n,d)});const x=n[nH],y=b.useRef(!!x&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return TH(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),xA.render(f.render),y.current&&f.animationState&&f.animationState.animateChanges())}),b.useEffect(()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,x)}),y.current=!1))}),f}function oje(e,t,n,s){const{layoutId:i,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:EH(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||l&&Wu(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,layoutScroll:c,layoutRoot:d})}function EH(e){if(e)return e.options.allowProjection!==!1?e.projection:EH(e.parent)}function lje(e,t,n){return b.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):Wu(n)&&(n.current=s))},[t])}function Xb(e){return qb(e.animate)||ZT.some(t=>fx(e[t]))}function OH(e){return!!(Xb(e)||e.variants)}function cje(e,t){if(Xb(e)){const{initial:n,animate:s}=e;return{initial:n===!1||fx(n)?n:void 0,animate:fx(s)?s:void 0}}return e.inherit!==!1?t:{}}function dje(e){const{initial:t,animate:n}=cje(e,b.useContext(Yb));return b.useMemo(()=>({initial:t,animate:n}),[XI(t),XI(n)])}function XI(e){return Array.isArray(e)?e.join(" "):e}const QI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yh={};for(const e in QI)Yh[e]={isEnabled:t=>QI[e].some(n=>!!t[n])};function uje(e){for(const t in e)Yh[t]={...Yh[t],...e[t]}}const hje=Symbol.for("motionComponentSymbol");function mje({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:i}){e&&uje(e);function a(l,c){let d;const h={...b.useContext(gA),...l,layoutId:fje(l)},{isStatic:m}=h,f=dje(l),v=s(l,m);if(!m&&vA){pje();const p=xje(h);d=p.MeasureLayout,f.visualElement=aje(i,v,h,t,p.ProjectionNode)}return r.jsxs(Yb.Provider,{value:f,children:[d&&f.visualElement?r.jsx(d,{visualElement:f.visualElement,...h}):null,n(i,l,lje(v,f.visualElement,c),v,m,f.visualElement)]})}const o=b.forwardRef(a);return o[hje]=i,o}function fje({layoutId:e}){const t=b.useContext(pA).id;return t&&e!==void 0?t+"-"+e:e}function pje(e,t){b.useContext(AH).strict}function xje(e){const{drag:t,layout:n}=Yh;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const gje=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yA(e){return typeof e!="string"||e.includes("-")?!1:!!(gje.indexOf(e)>-1||/[A-Z]/u.test(e))}function MH(e,{style:t,vars:n},s,i){Object.assign(e.style,t,i&&i.getProjectionStyles(s));for(const a in n)e.style.setProperty(a,n[a])}const DH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IH(e,t,n,s){MH(e,t,void 0,s);for(const i in t.attrs)e.setAttribute(DH.has(i)?i:fA(i),t.attrs[i])}function LH(e,{layout:t,layoutId:n}){return nu.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!W0[e]||e==="opacity")}function jA(e,t,n){var s;const{style:i}=e,a={};for(const o in i)(Jn(i[o])||t.style&&Jn(t.style[o])||LH(o,e)||((s=n==null?void 0:n.getValue(o))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function RH(e,t,n){const s=jA(e,t,n);for(const i in e)if(Jn(e[i])||Jn(t[i])){const a=Cg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[a]=e[i]}return s}function bA(e){const t=b.useRef(null);return t.current===null&&(t.current=e()),t.current}function vje({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,i,a){const o={latestValues:yje(s,i,a,e),renderState:t()};return n&&(o.mount=l=>n(s,l,o)),o}const $H=e=>(t,n)=>{const s=b.useContext(Yb),i=b.useContext(Zb),a=()=>vje(e,t,s,i);return n?a():bA(a)};function yje(e,t,n,s){const i={},a=s(e,{});for(const f in a)i[f]=Cy(a[f]);let{initial:o,animate:l}=e;const c=Xb(e),d=OH(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const m=h?l:o;if(m&&typeof m!="boolean"&&!qb(m)){const f=Array.isArray(m)?m:[m];for(let v=0;v<f.length;v++){const p=KT(e,f[v]);if(p){const{transitionEnd:x,transition:y,...w}=p;for(const j in w){let N=w[j];if(Array.isArray(N)){const C=h?N.length-1:0;N=N[C]}N!==null&&(i[j]=N)}for(const j in x)i[j]=x[j]}}}return i}const wA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),FH=()=>({...wA(),attrs:{}}),zH=(e,t)=>t&&typeof e=="number"?t.transform(e):e,jje={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},bje=Cg.length;function wje(e,t,n){let s="",i=!0;for(let a=0;a<bje;a++){const o=Cg[a],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=zH(l,nA[o]);if(!c){i=!1;const h=jje[o]||o;s+=`${h}(${d}) `}n&&(t[o]=d)}}return s=s.trim(),n?s=n(t,i?"":s):i&&(s="none"),s}function NA(e,t,n){const{style:s,vars:i,transformOrigin:a}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(nu.has(c)){o=!0;continue}else if(OW(c)){i[c]=d;continue}else{const h=zH(d,nA[c]);c.startsWith("origin")?(l=!0,a[c]=h):s[c]=h}}if(t.transform||(o||n?s.transform=wje(t,e.transform,n):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=a;s.transformOrigin=`${c} ${d} ${h}`}}function JI(e,t,n){return typeof e=="string"?e:vt.transform(t+n*e)}function Nje(e,t,n){const s=JI(t,e.x,e.width),i=JI(n,e.y,e.height);return`${s} ${i}`}const Sje={offset:"stroke-dashoffset",array:"stroke-dasharray"},_je={offset:"strokeDashoffset",array:"strokeDasharray"};function Pje(e,t,n=1,s=0,i=!0){e.pathLength=1;const a=i?Sje:_je;e[a.offset]=vt.transform(-s);const o=vt.transform(t),l=vt.transform(n);e[a.array]=`${o} ${l}`}function SA(e,{attrX:t,attrY:n,attrScale:s,originX:i,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},h,m){if(NA(e,d,m),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:v,dimensions:p}=e;f.transform&&(p&&(v.transform=f.transform),delete f.transform),p&&(i!==void 0||a!==void 0||v.transform)&&(v.transformOrigin=Nje(p,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),s!==void 0&&(f.scale=s),o!==void 0&&Pje(f,o,l,c,!1)}const _A=e=>typeof e=="string"&&e.toLowerCase()==="svg",Cje={useVisualState:$H({scrapeMotionValuesFromProps:RH,createRenderState:FH,onMount:(e,t,{renderState:n,latestValues:s})=>{xr.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),xr.render(()=>{SA(n,s,_A(t.tagName),e.transformTemplate),IH(t,n)})}})},kje={useVisualState:$H({scrapeMotionValuesFromProps:jA,createRenderState:wA})};function BH(e,t,n){for(const s in t)!Jn(t[s])&&!LH(s,n)&&(e[s]=t[s])}function Tje({transformTemplate:e},t){return b.useMemo(()=>{const n=wA();return NA(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Aje(e,t){const n=e.style||{},s={};return BH(s,n,e),Object.assign(s,Tje(e,t)),s}function Eje(e,t){const n={},s=Aje(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const Oje=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function H0(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Oje.has(e)}let VH=e=>!H0(e);function Mje(e){e&&(VH=t=>t.startsWith("on")?!H0(t):e(t))}try{Mje(require("@emotion/is-prop-valid").default)}catch{}function Dje(e,t,n){const s={};for(const i in e)i==="values"&&typeof e.values=="object"||(VH(i)||n===!0&&H0(i)||!t&&!H0(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}function Ije(e,t,n,s){const i=b.useMemo(()=>{const a=FH();return SA(a,t,_A(s),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};BH(a,e.style,e),i.style={...a,...i.style}}return i}function Lje(e=!1){return(n,s,i,{latestValues:a},o)=>{const c=(yA(n)?Ije:Eje)(s,a,o,n),d=Dje(s,typeof n=="string",e),h=n!==b.Fragment?{...d,...c,ref:i}:{},{children:m}=s,f=b.useMemo(()=>Jn(m)?m.get():m,[m]);return b.createElement(n,{...h,children:f})}}function Rje(e,t){return function(s,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...yA(s)?Cje:kje,preloadedFeatures:e,useRender:Lje(i),createVisualElement:t,Component:s};return mje(o)}}const R2={current:null},UH={current:!1};function $je(){if(UH.current=!0,!!vA)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>R2.current=e.matches;e.addListener(t),t()}else R2.current=!1}function Fje(e,t,n){for(const s in t){const i=t[s],a=n[s];if(Jn(i))e.addValue(s,i);else if(Jn(a))e.addValue(s,gx(i,{owner:e}));else if(a!==i)if(e.hasValue(s)){const o=e.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(s);e.addValue(s,gx(o!==void 0?o:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const eL=new WeakMap,zje=[...IW,Kn,xc],Bje=e=>zje.find(DW(e)),tL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Vje{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Fa.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,xr.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=Xb(n),this.isVariantNode=OH(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in m){const v=m[f];c[f]!==void 0&&Jn(v)&&v.set(c[f],!1)}}mount(t){this.current=t,eL.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),UH.current||$je(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:R2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){eL.delete(this.current),this.projection&&this.projection.unmount(),pc(this.notifyUpdate),pc(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=nu.has(t),i=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&xr.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Yh){const n=Yh[t];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[t]&&i&&s(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<tL.length;s++){const i=tL[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=t[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Fje(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=gx(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var s;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(AW(i)||TW(i))?i=parseFloat(i):!Bje(i)&&xc.test(n)&&(i=UW(t,n)),this.setBaseTarget(t,Jn(i)?i.get():i)),Jn(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const o=KT(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[t])}if(s&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Jn(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new mA),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class WH extends Vje{constructor(){super(...arguments),this.KeyframeResolver=WW}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Jn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Uje(e){return window.getComputedStyle(e)}class Wje extends WH{constructor(){super(...arguments),this.type="html",this.renderInstance=MH}readValueFromInstance(t,n){if(nu.has(n)){const s=sA(n);return s&&s.default||0}else{const s=Uje(t),i=(OW(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return xH(t,n)}build(t,n,s){NA(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return jA(t,n,s)}}class Hje extends WH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(nu.has(n)){const s=sA(n);return s&&s.default||0}return n=DH.has(n)?n:fA(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return RH(t,n,s)}build(t,n,s){SA(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,i){IH(t,n,s,i)}mount(t){this.isSVGTag=_A(t.tagName),super.mount(t)}}const qje=(e,t)=>yA(e)?new Hje(t):new Wje(t,{allowProjection:e!==b.Fragment}),Kje=Rje({...Mye,...sje,...K0e,...ije},qje),rL=Ege(Kje);class Gje extends b.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Zje({children:e,isPresent:t}){const n=b.useId(),s=b.useRef(null),i=b.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=b.useContext(gA);return b.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=i.current;if(t||!s.current||!o||!l)return;s.current.dataset.motionPopId=n;const h=document.createElement("style");return a&&(h.nonce=a),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[t]),r.jsx(Gje,{isPresent:t,childRef:s,sizeRef:i,children:b.cloneElement(e,{ref:s})})}const Yje=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:o})=>{const l=bA(Xje),c=b.useId(),d=b.useCallback(m=>{l.set(m,!0);for(const f of l.values())if(!f)return;s&&s()},[l,s]),h=b.useMemo(()=>({id:c,initial:t,isPresent:n,custom:i,onExitComplete:d,register:m=>(l.set(m,!1),()=>l.delete(m))}),a?[Math.random(),d]:[n,d]);return b.useMemo(()=>{l.forEach((m,f)=>l.set(f,!1))},[n]),b.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),o==="popLayout"&&(e=r.jsx(Zje,{isPresent:n,children:e})),r.jsx(Zb.Provider,{value:h,children:e})};function Xje(){return new Map}const zv=e=>e.key||"";function nL(e){const t=[];return b.Children.forEach(e,n=>{b.isValidElement(n)&&t.push(n)}),t}const Qje=({children:e,exitBeforeEnter:t,custom:n,initial:s=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=b.useMemo(()=>nL(e),[e]),c=l.map(zv),d=b.useRef(!0),h=b.useRef(l),m=bA(()=>new Map),[f,v]=b.useState(l),[p,x]=b.useState(l);TH(()=>{d.current=!1,h.current=l;for(let j=0;j<p.length;j++){const N=zv(p[j]);c.includes(N)?m.delete(N):m.get(N)!==!0&&m.set(N,!1)}},[p,c.length,c.join("-")]);const y=[];if(l!==f){let j=[...l];for(let N=0;N<p.length;N++){const C=p[N],P=zv(C);c.includes(P)||(j.splice(N,0,C),y.push(C))}o==="wait"&&y.length&&(j=y),x(nL(j)),v(l);return}const{forceRender:w}=b.useContext(pA);return r.jsx(r.Fragment,{children:p.map(j=>{const N=zv(j),C=l===p||c.includes(N),P=()=>{if(m.has(N))m.set(N,!0);else return;let k=!0;m.forEach(_=>{_||(k=!1)}),k&&(w==null||w(),x(h.current),i&&i())};return r.jsx(Yje,{isPresent:C,initial:!d.current||s?void 0:!1,custom:C?void 0:n,presenceAffectsLayout:a,mode:o,onExitComplete:C?void 0:P,children:j},N)})})};function sL(){var je,Ce;const[,e]=Jr(),{toast:t}=ft(),n=on(),[s,i]=b.useState(null),[a,o]=b.useState("overview"),[l,c]=b.useState(""),[d,h]=b.useState("all"),[m,f]=b.useState(!1),[v,p]=b.useState(!1),[x,y]=b.useState(null),[w,j]=b.useState(!1),[N,C]=b.useState(null),[P,k]=b.useState(null),[_,O]=b.useState(!1),[M,T]=b.useState(!1),[I,A]=b.useState({name:"",minDistance:"",maxDistance:"",baseFee:"",perKmRate:"",isActive:!0}),[V,D]=b.useState(!1);b.useEffect(()=>{const Y=localStorage.getItem("adminUser");if(Y&&Y!=="undefined"&&Y!=="null")try{const ye=JSON.parse(Y);i(ye)}catch(ye){console.error("Error parsing admin user data:",ye),localStorage.removeItem("adminUser"),e("/admin/login")}else e("/admin/login")},[e]),Le({queryKey:["/api/admin/dashboard/stats"],enabled:!!s});const{data:W=[]}=Le({queryKey:["/api/admin/users"],enabled:!!s}),{data:U=[]}=Le({queryKey:["/api/delivery-partners"],enabled:!!s}),{data:Q=[]}=Le({queryKey:["/api/admin/stores"],enabled:!!s}),{data:q=[]}=Le({queryKey:["/api/admin/products"],enabled:!!s}),{data:B=[]}=Le({queryKey:["/api/admin/orders"],enabled:!!s}),{data:z=[]}=Le({queryKey:["/api/admin/users/pending"],enabled:!!s}),{data:H=[]}=Le({queryKey:["/api/admin/coupons"],enabled:!!s}),{data:X=[]}=Le({queryKey:["/api/delivery-zones"],enabled:!!s}),ge=pt({mutationFn:async Y=>(await Kt(`/api/admin/users/${Y}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:s.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),t({title:"Success",description:"User approved successfully"})},onError:Y=>{t({title:"Error",description:Y.message||"Failed to approve user",variant:"destructive"})}}),Se=pt({mutationFn:async({userId:Y,reason:ye})=>(await Kt(`/api/admin/users/${Y}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:s.id,reason:ye})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),t({title:"Success",description:"User rejected successfully"})},onError:Y=>{t({title:"Error",description:Y.message||"Failed to reject user",variant:"destructive"})}}),F=pt({mutationFn:async Y=>(await Kt(`/api/delivery-partners/${Y}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:s.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners"]}),n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),t({title:"Success",description:"Delivery partner approved successfully"})},onError:Y=>{t({title:"Error",description:Y.message||"Failed to approve delivery partner",variant:"destructive"})}}),pe=pt({mutationFn:async({partnerId:Y,reason:ye})=>(await Kt(`/api/delivery-partners/${Y}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:s.id,reason:ye})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners"]}),n.invalidateQueries({queryKey:["/api/admin/users"]}),n.invalidateQueries({queryKey:["/api/admin/users/pending"]}),t({title:"Success",description:"Delivery partner rejected successfully"})},onError:Y=>{t({title:"Error",description:Y.message||"Failed to reject delivery partner",variant:"destructive"})}}),we=pt({mutationFn:async Y=>(await Kt(`/api/admin/users/${Y}/ban`,{method:"PUT"})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),t({title:"Success",description:"User banned successfully"})}}),Be=pt({mutationFn:async Y=>(await Kt(`/api/admin/users/${Y}/unban`,{method:"PUT"})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/users"]}),t({title:"Success",description:"User unbanned successfully"})}}),Pe=pt({mutationFn:async({id:Y,data:ye})=>(await Kt(`/api/admin/delivery-zones/${Y}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ye,adminId:s.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-zones"]}),O(!1),k(null),t({title:"Success",description:"Delivery zone updated successfully"})},onError:Y=>{t({title:"Error",description:Y.message||"Failed to update delivery zone",variant:"destructive"})}}),Ee=pt({mutationFn:async Y=>(await Kt("/api/admin/delivery-zones",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Y,adminId:s.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-zones"]}),T(!1),A({name:"",minDistance:"",maxDistance:"",baseFee:"",perKmRate:"",isActive:!0}),t({title:"Success",description:"Delivery zone created successfully"})},onError:Y=>{t({title:"Error",description:Y.message||"Failed to create delivery zone",variant:"destructive"})}}),Ie=pt({mutationFn:async Y=>(await Kt("/api/admin/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Y,adminId:s.id})})).json(),onSuccess:Y=>{const ye={...s,...Y.admin};i(ye),localStorage.setItem("adminUser",JSON.stringify(ye)),t({title:"Success",description:"Profile updated successfully"}),D(!1)},onError:Y=>{t({title:"Error",description:Y.message||"Failed to update profile",variant:"destructive"})}}),Ne=()=>{localStorage.removeItem("adminUser"),e("/admin/login")},xe=Array.isArray(W)?W.length:0,J=Array.isArray(Q)?Q.length:0,De=Array.isArray(q)?q.length:0,Ue=Array.isArray(B)?B.length:0,st=Array.isArray(z)?z.length:0,ht=Array.isArray(W)?W.filter(Y=>Y.status==="active").length:0,Wt=Array.isArray(B)?B.reduce((Y,ye)=>Y+(ye.total||0),0):0,mr=Ue>0?Wt/Ue:0,Ft=({status:Y})=>{const ye={active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",banned:"bg-red-100 text-red-800",rejected:"bg-gray-100 text-gray-800"};return r.jsx(ue,{className:ye[Y]||"bg-gray-100 text-gray-800",children:Y.charAt(0).toUpperCase()+Y.slice(1)})},ie=[{id:"overview",label:"Overview",icon:si},{id:"users",label:"Users",icon:gd},{id:"stores",label:"Stores",icon:ar},{id:"products",label:"Products",icon:Ye},{id:"orders",label:"Orders",icon:_n},{id:"pending",label:"Pending Approvals",icon:jt},{id:"coupons",label:"Coupons",icon:Wp},{id:"delivery",label:"Delivery Zones",icon:Ct},{id:"analytics",label:"Analytics",icon:C_},{id:"settings",label:"Settings",icon:Id}];return s?r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsxs(rL.div,{initial:!1,animate:{width:m?80:280},className:"bg-white shadow-lg border-r border-gray-200 flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Up,{className:"h-8 w-8 text-blue-600"}),!m&&r.jsxs("div",{className:"ml-3",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Admin Panel"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Siraha Bazaar"})]})]}),!m&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(xo,{className:"h-8 w-8",children:r.jsx(go,{className:"bg-blue-100 text-blue-600",children:((je=s.fullName)==null?void 0:je.charAt(0))||"A"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.fullName}),r.jsx("p",{className:"text-xs text-gray-500",children:"Administrator"})]})]})})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-2",children:ie.map(Y=>{const ye=Y.icon,Te=a===Y.id;return r.jsxs("button",{onClick:()=>o(Y.id),className:`w-full flex items-center px-3 py-2 rounded-lg text-left transition-colors ${Te?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(ye,{className:"h-5 w-5"}),!m&&r.jsx("span",{className:"ml-3",children:Y.label}),Y.id==="pending"&&st>0&&r.jsx(ue,{className:"ml-auto bg-red-500 text-white",children:st})]},Y.id)})}),r.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-2",children:[r.jsxs($,{variant:"ghost",size:"sm",onClick:()=>f(!m),className:"w-full justify-start",children:[r.jsx(po,{className:"h-4 w-4"}),!m&&r.jsx("span",{className:"ml-2",children:"Collapse"})]}),r.jsxs($,{variant:"ghost",size:"sm",onClick:Ne,className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50",children:[r.jsx(Vp,{className:"h-4 w-4"}),!m&&r.jsx("span",{className:"ml-2",children:"Logout"})]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 capitalize",children:a.replace("-"," ")}),r.jsx("p",{className:"text-sm text-gray-500",children:"Manage your platform efficiently"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs($,{variant:"outline",size:"sm",children:[r.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Refresh"]}),r.jsxs($,{variant:"outline",size:"sm",children:[r.jsx(Qd,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),r.jsx("main",{className:"flex-1 overflow-auto p-6",children:r.jsx(Qje,{mode:"wait",children:r.jsxs(rL.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:[a==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:xe}),r.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[ht," active"]})]}),r.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:r.jsx(gd,{className:"h-6 w-6 text-blue-600"})})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Stores"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:J}),r.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:[Q.filter(Y=>Y.status==="active").length," active"]})]}),r.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:r.jsx(ar,{className:"h-6 w-6 text-green-600"})})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Ue}),r.jsxs("p",{className:"text-sm text-purple-600 mt-1",children:["$",mr.toFixed(2)," avg"]})]}),r.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:r.jsx(_n,{className:"h-6 w-6 text-purple-600"})})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),r.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",Wt.toFixed(2)]}),r.jsx("p",{className:"text-sm text-green-600 mt-1",children:"+12% from last month"})]}),r.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:r.jsx(Qr,{className:"h-6 w-6 text-yellow-600"})})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center",children:[r.jsx(jt,{className:"h-5 w-5 mr-2"}),"Pending Approvals"]}),r.jsx(kt,{children:"Users waiting for approval"})]}),r.jsx(G,{children:!Array.isArray(z)||z.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No pending approvals"}):r.jsxs("div",{className:"space-y-3",children:[Array.isArray(z)&&z.slice(0,3).map(Y=>{var ye;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(xo,{className:"h-8 w-8",children:r.jsx(go,{children:((ye=Y.fullName)==null?void 0:ye.charAt(0))||"U"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium",children:Y.fullName}),r.jsx("p",{className:"text-xs text-gray-500",children:Y.email})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx($,{size:"sm",onClick:()=>ge.mutate(Y.id),disabled:ge.isPending||Se.isPending,className:"bg-green-600 hover:bg-green-700 text-white disabled:opacity-50 transition-all duration-200",children:ge.isPending?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):r.jsx(yt,{className:"h-4 w-4"})}),r.jsx($,{size:"sm",variant:"outline",onClick:()=>Se.mutate({userId:Y.id,reason:"Admin rejection"}),disabled:ge.isPending||Se.isPending,className:"border-red-300 text-red-600 hover:bg-red-50 disabled:opacity-50 transition-all duration-200",children:Se.isPending?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):r.jsx(ps,{className:"h-4 w-4"})})]})]},Y.id)}),Array.isArray(z)&&z.length>3&&r.jsxs($,{variant:"outline",size:"sm",onClick:()=>o("pending"),className:"w-full",children:["View All (",z.length,")"]})]})})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center",children:[r.jsx(wn,{className:"h-5 w-5 mr-2"}),"Recent Activity"]}),r.jsx(kt,{children:"Latest platform activities"})]}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm",children:"New store registered"}),r.jsx("p",{className:"text-xs text-gray-500",children:"2 hours ago"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm",children:"Order #1234 completed"}),r.jsx("p",{className:"text-xs text-gray-500",children:"4 hours ago"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm",children:"New product added"}),r.jsx("p",{className:"text-xs text-gray-500",children:"6 hours ago"})]})]})]})})]})]})]}),a==="users"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(de,{placeholder:"Search users...",value:l,onChange:Y=>c(Y.target.value),className:"pl-10 w-80"})]}),r.jsxs(dt,{value:d,onValueChange:h,children:[r.jsx(ot,{className:"w-40",children:r.jsx(ut,{placeholder:"Filter by status"})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Status"}),r.jsx(oe,{value:"active",children:"Active"}),r.jsx(oe,{value:"pending",children:"Pending"}),r.jsx(oe,{value:"banned",children:"Banned"})]})]})]}),r.jsxs($,{children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),r.jsx(K,{children:r.jsx(G,{className:"p-0",children:r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{children:"User"}),r.jsx(qe,{children:"Email"}),r.jsx(qe,{children:"Role"}),r.jsx(qe,{children:"Status"}),r.jsx(qe,{children:"Joined"}),r.jsx(qe,{children:"Actions"})]})}),r.jsx(Ys,{children:Array.isArray(W)&&W.filter(Y=>{var Ke,Pt;const ye=((Ke=Y.fullName)==null?void 0:Ke.toLowerCase().includes(l.toLowerCase()))||((Pt=Y.email)==null?void 0:Pt.toLowerCase().includes(l.toLowerCase())),Te=d==="all"||Y.status===d;return ye&&Te}).map(Y=>{var ye;return r.jsxs(br,{children:[r.jsx(He,{children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(xo,{className:"h-8 w-8",children:r.jsx(go,{children:((ye=Y.fullName)==null?void 0:ye.charAt(0))||"U"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"font-medium",children:Y.fullName}),r.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",Y.id]})]})]})}),r.jsx(He,{children:Y.email}),r.jsx(He,{children:r.jsx(ue,{variant:"outline",children:Y.role})}),r.jsx(He,{children:r.jsx(Ft,{status:Y.status})}),r.jsx(He,{children:Y.createdAt?new Date(Y.createdAt).toLocaleDateString():"N/A"}),r.jsx(He,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($,{size:"sm",variant:"outline",onClick:()=>{y(Y),p(!0)},children:r.jsx(hs,{className:"h-4 w-4"})}),Y.status==="banned"?r.jsx($,{size:"sm",variant:"outline",onClick:()=>Be.mutate(Y.id),disabled:Be.isPending,children:r.jsx(O_,{className:"h-4 w-4"})}):r.jsxs(UD,{children:[r.jsx(WD,{asChild:!0,children:r.jsx($,{size:"sm",variant:"destructive",children:r.jsx(Ote,{className:"h-4 w-4"})})}),r.jsxs(f2,{children:[r.jsxs(p2,{children:[r.jsx(g2,{children:"Ban User"}),r.jsxs(v2,{children:["Are you sure you want to ban ",Y.fullName,"? This action can be reversed later."]})]}),r.jsxs(x2,{children:[r.jsx(j2,{children:"Cancel"}),r.jsx(y2,{onClick:()=>we.mutate(Y.id),className:"bg-red-600 hover:bg-red-700",children:"Ban User"})]})]})]})]})})]},Y.id)})})]})})})]}),a==="stores"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(de,{placeholder:"Search stores...",value:l,onChange:Y=>c(Y.target.value),className:"pl-10 w-80"})]})}),r.jsxs($,{children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Store"]})]}),r.jsx(K,{children:r.jsx(G,{className:"p-0",children:r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{children:"Store"}),r.jsx(qe,{children:"```python Type"}),r.jsx(qe,{children:"Owner"}),r.jsx(qe,{children:"Status"}),r.jsx(qe,{children:"Products"}),r.jsx(qe,{children:"Actions"})]})}),r.jsx(Ys,{children:Array.isArray(Q)&&Q.filter(Y=>{var ye;return(ye=Y.name)==null?void 0:ye.toLowerCase().includes(l.toLowerCase())}).map(Y=>{var ye;return r.jsxs(br,{children:[r.jsx(He,{children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center",children:r.jsx(ar,{className:"h-5 w-5 text-gray-500"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"font-medium",children:Y.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(ye=Y.description)==null?void 0:ye.substring(0,50),"..."]})]})]})}),r.jsx(He,{children:r.jsx(ue,{variant:"outline",children:Y.type})}),r.jsx(He,{children:Y.ownerName||"N/A"}),r.jsx(He,{children:r.jsx(Ft,{status:Y.status||"active"})}),r.jsx(He,{children:Y.productCount||0}),r.jsx(He,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($,{size:"sm",variant:"outline",onClick:()=>{C(Y),j(!0)},children:r.jsx(hs,{className:"h-4 w-4"})}),r.jsx($,{size:"sm",variant:"outline",children:r.jsx(us,{className:"h-4 w-4"})})]})})]},Y.id)})})]})})})]}),a==="pending"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Pending User Approvals"}),r.jsx(kt,{children:"Users waiting for admin approval to access the platform"})]}),r.jsx(G,{children:z.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(yt,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"All caught up!"}),r.jsx("p",{className:"text-gray-500",children:"No pending user approvals at the moment."})]}):r.jsx("div",{className:"space-y-4",children:Array.isArray(z)&&z.map(Y=>{var ye;return r.jsx(K,{className:"border-l-4 border-l-yellow-400",children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(xo,{className:"h-12 w-12",children:r.jsx(go,{className:"bg-yellow-100 text-yellow-600",children:((ye=Y.fullName)==null?void 0:ye.charAt(0))||"U"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:Y.fullName}),r.jsx("p",{className:"text-sm text-gray-500",children:Y.email}),r.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[r.jsx(ue,{variant:"outline",children:Y.role}),r.jsxs("span",{className:"text-xs text-gray-500",children:["Applied: ",Y.createdAt?new Date(Y.createdAt).toLocaleDateString():"N/A"]})]})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs($,{onClick:()=>ge.mutate(Y.id),disabled:ge.isPending||Se.isPending,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50 transition-all duration-200",children:[ge.isPending?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):r.jsx(yt,{className:"h-4 w-4 mr-2"}),ge.isPending?"Approving...":"Approve"]}),r.jsxs($,{variant:"destructive",onClick:()=>Se.mutate({userId:Y.id,reason:"Admin rejection"}),disabled:ge.isPending||Se.isPending,className:"disabled:opacity-50 transition-all duration-200",children:[Se.isPending?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):r.jsx(ps,{className:"h-4 w-4 mr-2"}),Se.isPending?"Rejecting...":"Reject"]})]})]})})},Y.id)})})})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Pending Delivery Partner Approvals"}),r.jsx(kt,{children:"Delivery partners waiting for admin approval to start working"})]}),r.jsx(G,{children:(()=>{const Y=U.filter(ye=>ye.status==="pending");return Y.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(yt,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"All caught up!"}),r.jsx("p",{className:"text-gray-500",children:"No pending delivery partner approvals at the moment."})]}):r.jsx("div",{className:"space-y-4",children:Y.map(ye=>{var Ke;const Te=W.find(Pt=>Pt.id===ye.userId);return r.jsx(K,{className:"border-l-4 border-l-orange-400",children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(xo,{className:"h-12 w-12",children:r.jsx(go,{className:"bg-orange-100 text-orange-600",children:r.jsx(Ct,{className:"h-6 w-6"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:(Te==null?void 0:Te.fullName)||"Unknown User"}),r.jsx("p",{className:"text-sm text-gray-500",children:Te==null?void 0:Te.email}),r.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[r.jsxs(ue,{variant:"outline",className:"text-orange-600 border-orange-300",children:[ye.vehicleType,"  ",ye.vehicleNumber]}),r.jsxs("span",{className:"text-xs text-gray-500",children:["Applied: ",ye.createdAt?new Date(ye.createdAt).toLocaleDateString():"N/A"]})]}),r.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Areas:"}),(Ke=ye.deliveryAreas)==null?void 0:Ke.map((Pt,fr)=>r.jsx(ue,{variant:"secondary",className:"text-xs px-1 py-0",children:Pt},fr))]})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx($,{onClick:()=>F.mutate(ye.id),disabled:F.isPending||pe.isPending,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50 transition-all duration-200",children:F.isPending?r.jsxs(r.Fragment,{children:[r.jsx(To,{className:"h-4 w-4 mr-2 animate-spin"}),"Approving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(yt,{className:"h-4 w-4 mr-2"}),"Approve"]})}),r.jsxs(UD,{children:[r.jsx(WD,{asChild:!0,children:r.jsxs($,{variant:"destructive",disabled:F.isPending||pe.isPending,children:[r.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Reject"]})}),r.jsxs(f2,{children:[r.jsxs(p2,{children:[r.jsx(g2,{children:"Reject Delivery Partner"}),r.jsxs(v2,{children:["Are you sure you want to reject ",Te==null?void 0:Te.fullName,"? Please provide a reason for rejection."]})]}),r.jsx(Yt,{placeholder:"Reason for rejection...",id:`reject-reason-${ye.id}`,className:"mt-2"}),r.jsxs(x2,{children:[r.jsx(j2,{children:"Cancel"}),r.jsx(y2,{onClick:()=>{var fr;const Pt=((fr=document.getElementById(`reject-reason-${ye.id}`))==null?void 0:fr.value)||"Application does not meet requirements";pe.mutate({partnerId:ye.id,reason:Pt})},className:"bg-red-600 hover:bg-red-700",children:pe.isPending?r.jsxs(r.Fragment,{children:[r.jsx(To,{className:"h-4 w-4 mr-2 animate-spin"}),"Rejecting..."]}):"Reject Partner"})]})]})]})]})]})})},ye.id)})})})()})]})]}),a==="products"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(de,{placeholder:"Search products...",value:l,onChange:Y=>c(Y.target.value),className:"pl-10 w-80"})]})}),r.jsxs($,{children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),r.jsx(K,{children:r.jsx(G,{className:"p-0",children:r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{children:"Product"}),r.jsx(qe,{children:"Store"}),r.jsx(qe,{children:"Price"}),r.jsx(qe,{children:"Stock"}),r.jsx(qe,{children:"Status"}),r.jsx(qe,{children:"Actions"})]})}),r.jsx(Ys,{children:Array.isArray(q)&&q.filter(Y=>{var ye;return(ye=Y.name)==null?void 0:ye.toLowerCase().includes(l.toLowerCase())}).map(Y=>{var ye;return r.jsxs(br,{children:[r.jsx(He,{children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center",children:r.jsx(Ye,{className:"h-5 w-5 text-gray-500"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"font-medium",children:Y.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(ye=Y.description)==null?void 0:ye.substring(0,50),"..."]})]})]})}),r.jsx(He,{children:Y.storeName||"N/A"}),r.jsxs(He,{children:["$",Y.price]}),r.jsx(He,{children:Y.stock||0}),r.jsx(He,{children:r.jsx(Ft,{status:Y.isActive?"active":"inactive"})}),r.jsx(He,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($,{size:"sm",variant:"outline",children:r.jsx(hs,{className:"h-4 w-4"})}),r.jsx($,{size:"sm",variant:"outline",children:r.jsx(us,{className:"h-4 w-4"})})]})})]},Y.id)})})]})})})]}),a==="orders"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(de,{placeholder:"Search orders...",value:l,onChange:Y=>c(Y.target.value),className:"pl-10 w-80"})]}),r.jsxs(dt,{value:d,onValueChange:h,children:[r.jsx(ot,{className:"w-40",children:r.jsx(ut,{placeholder:"Filter by status"})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Status"}),r.jsx(oe,{value:"pending",children:"Pending"}),r.jsx(oe,{value:"confirmed",children:"Confirmed"}),r.jsx(oe,{value:"shipped",children:"Shipped"}),r.jsx(oe,{value:"delivered",children:"Delivered"}),r.jsx(oe,{value:"cancelled",children:"Cancelled"})]})]})]})}),r.jsx(K,{children:r.jsx(G,{className:"p-0",children:r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{children:"Order ID"}),r.jsx(qe,{children:"Customer"}),r.jsx(qe,{children:"Total"}),r.jsx(qe,{children:"Status"}),r.jsx(qe,{children:"Date"}),r.jsx(qe,{children:"Actions"})]})}),r.jsx(Ys,{children:Array.isArray(B)&&B.filter(Y=>d==="all"||Y.status===d).map(Y=>r.jsxs(br,{children:[r.jsx(He,{children:r.jsxs("span",{className:"font-mono text-sm",children:["#",Y.id]})}),r.jsx(He,{children:Y.customerName||"N/A"}),r.jsxs(He,{children:["$",Y.totalAmount||Y.total||0]}),r.jsx(He,{children:r.jsx(Ft,{status:Y.status})}),r.jsx(He,{children:Y.createdAt?new Date(Y.createdAt).toLocaleDateString():"N/A"}),r.jsx(He,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($,{size:"sm",variant:"outline",children:r.jsx(hs,{className:"h-4 w-4"})}),r.jsx($,{size:"sm",variant:"outline",children:r.jsx(us,{className:"h-4 w-4"})})]})})]},Y.id))})]})})})]}),a==="coupons"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Coupon Management"}),r.jsxs($,{children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Coupon"]})]}),r.jsx(K,{children:r.jsx(G,{className:"p-0",children:r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{children:"Code"}),r.jsx(qe,{children:"Discount"}),r.jsx(qe,{children:"Min Order"}),r.jsx(qe,{children:"Usage"}),r.jsx(qe,{children:"Status"}),r.jsx(qe,{children:"Expires"}),r.jsx(qe,{children:"Actions"})]})}),r.jsx(Ys,{children:Array.isArray(H)&&H.map(Y=>r.jsxs(br,{children:[r.jsx(He,{children:r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:Y.code})}),r.jsx(He,{children:Y.discountType==="percentage"?`${Y.discountValue}%`:`$${Y.discountValue}`}),r.jsxs(He,{children:["$",Y.minimumOrderAmount||0]}),r.jsxs(He,{children:[Y.usedCount||0," / ",Y.usageLimit||""]}),r.jsx(He,{children:r.jsx(Ft,{status:Y.isActive?"active":"inactive"})}),r.jsx(He,{children:Y.expiresAt?new Date(Y.expiresAt).toLocaleDateString():"Never"}),r.jsx(He,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($,{size:"sm",variant:"outline",children:r.jsx(us,{className:"h-4 w-4"})}),r.jsx($,{size:"sm",variant:"destructive",children:r.jsx(ei,{className:"h-4 w-4"})})]})})]},Y.id))})]})})})]}),a==="delivery"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Delivery Zone Management"}),r.jsxs($,{onClick:()=>T(!0),children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Zone"]})]}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:Array.isArray(X)&&X.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ct,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No delivery zones configured"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Set up delivery zones to manage shipping fees and coverage areas."}),r.jsxs($,{children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Create First Zone"]})]}):r.jsx("div",{className:"space-y-4",children:Array.isArray(X)&&X.map(Y=>r.jsx(K,{className:"border",children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:Y.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[Y.minDistance,"km - ",Y.maxDistance,"km"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Base fee: $",Y.baseFee," + $",Y.perKmRate,"/km"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(jn,{checked:Y.isActive,className:"data-[state=checked]:bg-green-600"}),r.jsx($,{size:"sm",variant:"outline",onClick:()=>{k(Y),O(!0)},children:r.jsx(us,{className:"h-4 w-4"})}),r.jsx($,{size:"sm",variant:"destructive",children:r.jsx(ei,{className:"h-4 w-4"})})]})]})})},Y.id))})})})]}),a==="settings"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-medium",children:"System Settings"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Admin Profile"}),r.jsx(kt,{children:"Manage your admin account details"})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"admin-name",children:"Full Name"}),r.jsx(de,{id:"admin-name",value:(s==null?void 0:s.fullName)||"",readOnly:!0,className:"mt-1 bg-gray-50"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"admin-email",children:"Email"}),r.jsx(de,{id:"admin-email",value:(s==null?void 0:s.email)||"",readOnly:!0,className:"mt-1 bg-gray-50"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(Dr,{open:V,onOpenChange:D,children:[r.jsx(Ps,{asChild:!0,children:r.jsxs($,{variant:"outline",size:"sm",children:[r.jsx(us,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})}),r.jsxs(Ar,{children:[r.jsxs(Er,{children:[r.jsx(Or,{children:"Edit Admin Profile"}),r.jsx(Us,{children:"Update your admin account information"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"edit-name",children:"Full Name"}),r.jsx(de,{id:"edit-name",defaultValue:(s==null?void 0:s.fullName)||"",placeholder:"Enter your full name"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"edit-email",children:"Email"}),r.jsx(de,{id:"edit-email",type:"email",defaultValue:(s==null?void 0:s.email)||"",placeholder:"Enter your email"})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx($,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),r.jsx($,{onClick:()=>{const Y=document.getElementById("edit-name"),ye=document.getElementById("edit-email");if(!Y.value||!ye.value){t({title:"Error",description:"Please fill in all fields.",variant:"destructive"});return}Ie.mutate({fullName:Y.value,email:ye.value})},disabled:Ie.isPending,children:"Save Changes"})]})]})]})]}),r.jsxs(Dr,{children:[r.jsx(Ps,{asChild:!0,children:r.jsxs($,{variant:"outline",size:"sm",children:[r.jsx(Up,{className:"h-4 w-4 mr-2"}),"Change Password"]})}),r.jsxs(Ar,{children:[r.jsxs(Er,{children:[r.jsx(Or,{children:"Change Admin Password"}),r.jsx(Us,{children:"Enter your current password and choose a new secure password"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"current-password",children:"Current Password"}),r.jsx(de,{id:"current-password",type:"password",placeholder:"Enter your current password"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-password",children:"New Password"}),r.jsx(de,{id:"new-password",type:"password",placeholder:"Enter new password"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"confirm-password",children:"Confirm New Password"}),r.jsx(de,{id:"confirm-password",type:"password",placeholder:"Confirm new password"})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(Ps,{asChild:!0,children:r.jsx($,{variant:"outline",children:"Cancel"})}),r.jsx($,{onClick:async()=>{const Y=document.getElementById("current-password"),ye=document.getElementById("new-password"),Te=document.getElementById("confirm-password");if(!Y.value||!ye.value){t({title:"Error",description:"Please fill in all password fields.",variant:"destructive"});return}if(ye.value!==Te.value){t({title:"Error",description:"New passwords do not match.",variant:"destructive"});return}if(ye.value.length<6){t({title:"Error",description:"New password must be at least 6 characters long.",variant:"destructive"});return}try{const Ke=await Kt("/api/admin/change-password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:s.id,currentPassword:Y.value,newPassword:ye.value})}),Pt=await Ke.json();Ke.ok?(t({title:"Password Changed",description:"Your admin password has been changed successfully."}),Y.value="",ye.value="",Te.value=""):t({title:"Error",description:Pt.error||"Failed to change password.",variant:"destructive"})}catch{t({title:"Error",description:"Network error. Please try again.",variant:"destructive"})}},children:"Change Password"})]})]})]})]})]})]})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Platform Settings"}),r.jsx(kt,{children:"Configure general platform settings"})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"maintenance",children:"Maintenance Mode"}),r.jsx(jn,{id:"maintenance"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"registration",children:"Allow New Registrations"}),r.jsx(jn,{id:"registration",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"notifications",children:"Email Notifications"}),r.jsx(jn,{id:"notifications",defaultChecked:!0})]})]})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Commission Settings"}),r.jsx(kt,{children:"Set platform commission rates"})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"store-commission",children:"Store Commission (%)"}),r.jsx(de,{id:"store-commission",type:"number",defaultValue:"5",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"restaurant-commission",children:"Restaurant Commission (%)"}),r.jsx(de,{id:"restaurant-commission",type:"number",defaultValue:"8",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"delivery-commission",children:"Delivery Commission (%)"}),r.jsx(de,{id:"delivery-commission",type:"number",defaultValue:"3",className:"mt-1"})]})]})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Payment Settings"}),r.jsx(kt,{children:"Configure payment options"})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"cod",children:"Cash on Delivery"}),r.jsx(jn,{id:"cod",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"stripe",children:"Stripe Payments"}),r.jsx(jn,{id:"stripe",defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"paypal",children:"PayPal Payments"}),r.jsx(jn,{id:"paypal"})]})]})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Security Settings"}),r.jsx(kt,{children:"Manage security configurations"})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"session-timeout",children:"Session Timeout (minutes)"}),r.jsx(de,{id:"session-timeout",type:"number",defaultValue:"60",className:"mt-1"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"two-factor",children:"Two-Factor Authentication"}),r.jsx(jn,{id:"two-factor"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"password-policy",children:"Strong Password Policy"}),r.jsx(jn,{id:"password-policy",defaultChecked:!0})]})]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"System Information"})}),r.jsx(G,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Platform Version"}),r.jsx("p",{className:"mt-1 text-lg font-semibold",children:"v2.1.0"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Database Status"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-green-600",children:"Connected"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Last Backup"}),r.jsx("p",{className:"mt-1 text-lg font-semibold",children:new Date().toLocaleDateString()})]})]})})]})]}),a==="analytics"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Platform Growth"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"User Growth"}),r.jsx("span",{children:"85%"})]}),r.jsx(yd,{value:85,className:"mt-2"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Store Growth"}),r.jsx("span",{children:"72%"})]}),r.jsx(yd,{value:72,className:"mt-2"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Revenue Growth"}),r.jsx("span",{children:"91%"})]}),r.jsx(yd,{value:91,className:"mt-2"})]})]})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Quick Stats"})}),r.jsx(G,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:xe}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Users"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:J}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Stores"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Ue}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Orders"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:De}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Products"})]})]})})]})]})})]},a)})})]}),r.jsx(Dr,{open:v,onOpenChange:p,children:r.jsxs(Ar,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Er,{children:r.jsx(Or,{children:"Complete User Registration Details"})}),x&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(xo,{className:"h-16 w-16",children:r.jsx(go,{className:"text-lg",children:((Ce=x.fullName)==null?void 0:Ce.charAt(0))||"U"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold",children:x.fullName}),r.jsx("p",{className:"text-gray-500",children:x.email}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[r.jsx(ue,{variant:"outline",children:x.role}),r.jsx(Ft,{status:x.status})]})]})]}),r.jsx(hn,{}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-600",children:"Basic Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"User ID"}),r.jsx("p",{className:"mt-1",children:x.id})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Phone"}),r.jsx("p",{className:"mt-1",children:x.phone||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Email"}),r.jsx("p",{className:"mt-1",children:x.email})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Firebase UID"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:x.firebaseUid||"Not linked"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Address"}),r.jsx("p",{className:"mt-1",children:x.address||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Joined Date"}),r.jsx("p",{className:"mt-1",children:x.createdAt?new Date(x.createdAt).toLocaleDateString():"N/A"})]})]})]}),x.role==="shopkeeper"&&r.jsxs(r.Fragment,{children:[r.jsx(hn,{}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold mb-3 text-green-600",children:"Shopkeeper Details"}),(()=>{const Y=Q.find(ye=>ye.ownerId===x.id);return Y?r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Name"}),r.jsx("p",{className:"mt-1",children:Y.name})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Type"}),r.jsx("p",{className:"mt-1",children:r.jsx(ue,{variant:"outline",children:Y.type})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Address"}),r.jsx("p",{className:"mt-1",children:Y.address||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Description"}),r.jsx("p",{className:"mt-1",children:Y.description||"No description"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Phone"}),r.jsx("p",{className:"mt-1",children:Y.phone||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store Approval Status"}),r.jsx("p",{className:"mt-1",children:r.jsx(Ft,{status:Y.status||"active"})})]}),Y.type==="restaurant"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Delivery Fee"}),r.jsxs("p",{className:"mt-1",children:["",Y.deliveryFee||"Not set"]})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Minimum Order"}),r.jsxs("p",{className:"mt-1",children:["",Y.minimumOrder||"Not set"]})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Cuisine Type"}),r.jsx("p",{className:"mt-1",children:Y.cuisineType||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Opening Hours"}),r.jsx("p",{className:"mt-1",children:Y.openingHours||"Not specified"})]})]})]}):r.jsx("p",{className:"text-gray-500 italic",children:"No store information found for this shopkeeper."})})()]})]}),x.role==="delivery_partner"&&r.jsxs(r.Fragment,{children:[r.jsx(hn,{}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-lg font-semibold mb-4 text-orange-600 flex items-center",children:[r.jsx(Ct,{className:"h-5 w-5 mr-2"}),"Comprehensive Delivery Partner Information"]}),(()=>{var ye;const Y=U.find(Te=>Te.userId===x.id);return Y?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Partner ID"}),r.jsx("p",{className:"mt-1 font-semibold",children:Y.id})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Approval Status"}),r.jsx("p",{className:"mt-1",children:r.jsx(Ft,{status:Y.status})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Registration Date"}),r.jsx("p",{className:"mt-1 text-sm",children:Y.createdAt?new Date(Y.createdAt).toLocaleDateString():"N/A"})]})]})}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(pk,{className:"h-4 w-4 mr-2"}),"Vehicle Details"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Type"}),r.jsx("p",{className:"mt-1",children:r.jsx(ue,{variant:"outline",children:Y.vehicleType})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Number"}),r.jsx("p",{className:"mt-1 font-mono",children:Y.vehicleNumber})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Brand"}),r.jsx("p",{className:"mt-1",children:Y.vehicleBrand||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Model"}),r.jsx("p",{className:"mt-1",children:Y.vehicleModel||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Year"}),r.jsx("p",{className:"mt-1",children:Y.vehicleYear||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Color"}),r.jsx("p",{className:"mt-1",children:Y.vehicleColor||"Not specified"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(Ws,{className:"h-4 w-4 mr-2"}),"License & Documents"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Driving License"}),r.jsx("p",{className:"mt-1 font-mono",children:Y.drivingLicense||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"License Expiry"}),r.jsx("p",{className:"mt-1",children:Y.licenseExpiryDate||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"ID Proof Type"}),r.jsx("p",{className:"mt-1",children:r.jsx(ue,{variant:"secondary",children:Y.idProofType})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"ID Proof Number"}),r.jsx("p",{className:"mt-1 font-mono",children:Y.idProofNumber})]})]})]}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(zp,{className:"h-4 w-4 mr-2"}),"Banking Information"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Account Number"}),r.jsx("p",{className:"mt-1 font-mono",children:Y.bankAccountNumber})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"IFSC Code"}),r.jsx("p",{className:"mt-1 font-mono",children:Y.ifscCode})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Bank Name"}),r.jsx("p",{className:"mt-1",children:Y.bankName||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Account Holder"}),r.jsx("p",{className:"mt-1",children:Y.accountHolderName||"Not specified"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Emergency Contact"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Contact Number"}),r.jsx("p",{className:"mt-1 font-mono",children:Y.emergencyContact})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Contact Name"}),r.jsx("p",{className:"mt-1",children:Y.emergencyContactName||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Relationship"}),r.jsx("p",{className:"mt-1",children:Y.emergencyContactRelation||"Not specified"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),"Working Preferences & Experience"]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Delivery Areas"}),r.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:((ye=Y.deliveryAreas)==null?void 0:ye.length)>0?Y.deliveryAreas.map((Te,Ke)=>r.jsx(ue,{variant:"secondary",className:"text-xs",children:Te},Ke)):r.jsx("span",{className:"text-gray-500",children:"No areas specified"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Working Hours"}),r.jsx("p",{className:"mt-1",children:Y.workingHours||"Not specified"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Experience"}),r.jsx("p",{className:"mt-1",children:Y.experience||"Not specified"})]})]}),Y.previousEmployment&&r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Previous Employment"}),r.jsx("p",{className:"mt-1 text-sm",children:Y.previousEmployment})]}),Y.references&&r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"References"}),r.jsx("p",{className:"mt-1 text-sm",children:Y.references})]})]})]}),(Y.idProofUrl||Y.drivingLicenseUrl||Y.vehicleRegistrationUrl||Y.insuranceUrl||Y.photoUrl)&&r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Uploaded Documents"]}),r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[Y.idProofUrl&&r.jsxs($,{size:"sm",variant:"outline",onClick:()=>window.open(Y.idProofUrl,"_blank"),children:[r.jsx(Ws,{className:"h-3 w-3 mr-1"}),"ID Proof"]}),Y.drivingLicenseUrl&&r.jsxs($,{size:"sm",variant:"outline",onClick:()=>window.open(Y.drivingLicenseUrl,"_blank"),children:[r.jsx(Ws,{className:"h-3 w-3 mr-1"}),"Driving License"]}),Y.vehicleRegistrationUrl&&r.jsxs($,{size:"sm",variant:"outline",onClick:()=>window.open(Y.vehicleRegistrationUrl,"_blank"),children:[r.jsx(Ws,{className:"h-3 w-3 mr-1"}),"Vehicle Registration"]}),Y.insuranceUrl&&r.jsxs($,{size:"sm",variant:"outline",onClick:()=>window.open(Y.insuranceUrl,"_blank"),children:[r.jsx(Ws,{className:"h-3 w-3 mr-1"}),"Insurance"]}),Y.photoUrl&&r.jsxs($,{size:"sm",variant:"outline",onClick:()=>window.open(Y.photoUrl,"_blank"),children:[r.jsx(Wr,{className:"h-3 w-3 mr-1"}),"Photo"]})]})})]}),r.jsxs("div",{children:[r.jsxs("h5",{className:"text-md font-medium text-gray-800 mb-3 flex items-center",children:[r.jsx(wn,{className:"h-4 w-4 mr-2"}),"Current Status & Performance"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 bg-blue-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Current Availability"}),r.jsx("p",{className:"mt-1",children:r.jsx(ue,{variant:Y.isAvailable?"default":"secondary",children:Y.isAvailable?"Available":"Offline"})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Total Deliveries"}),r.jsx("p",{className:"mt-1 text-lg font-bold text-blue-700",children:Y.totalDeliveries||0})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Rating"}),r.jsx("p",{className:"mt-1 text-lg font-bold text-blue-700",children:Y.rating?`${parseFloat(Y.rating).toFixed(1)}`:"No ratings yet"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Total Earnings"}),r.jsxs("p",{className:"mt-1 text-lg font-bold text-blue-700",children:["",parseFloat(Y.totalEarnings||"0").toFixed(2)]})]}),Y.approvalDate&&r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Approved On"}),r.jsx("p",{className:"mt-1 text-sm",children:new Date(Y.approvalDate).toLocaleDateString()})]}),Y.rejectionReason&&r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-red-600",children:"Rejection Reason"}),r.jsx("p",{className:"mt-1 text-red-600 text-sm",children:Y.rejectionReason})]})]})]})]}):r.jsx("p",{className:"text-gray-500 italic",children:"No delivery partner information found for this user."})})()]})]}),x.role==="customer"&&r.jsxs(r.Fragment,{children:[r.jsx(hn,{}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold mb-3 text-purple-600",children:"Customer Activity"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),r.jsx("p",{className:"mt-1",children:B.filter(Y=>Y.userId===x.id).length})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Account Status"}),r.jsx("p",{className:"mt-1",children:r.jsx(Ft,{status:x.status})})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Location"}),r.jsx("p",{className:"mt-1",children:x.address||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Last Active"}),r.jsx("p",{className:"mt-1",children:x.updatedAt?new Date(x.updatedAt).toLocaleDateString():"Unknown"})]})]})]})]})]})]})}),r.jsx(Dr,{open:w,onOpenChange:j,children:r.jsxs(Ar,{className:"max-w-2xl",children:[r.jsx(Er,{children:r.jsx(Or,{children:"Store Details"})}),N&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:r.jsx(ar,{className:"h-8 w-8 text-gray-500"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold",children:N.name}),r.jsx("p",{className:"text-gray-500",children:N.description}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[r.jsx(ue,{variant:"outline",children:N.type}),r.jsx(Ft,{status:N.status||"active"})]})]})]}),r.jsx(hn,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Store ID"}),r.jsx("p",{className:"mt-1",children:N.id})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Owner"}),r.jsx("p",{className:"mt-1",children:N.ownerName||"N/A"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Address"}),r.jsx("p",{className:"mt-1",children:N.address||"Not provided"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium text-gray-600",children:"Products"}),r.jsx("p",{className:"mt-1",children:N.productCount||0})]})]})]})]})}),r.jsx(Dr,{open:_,onOpenChange:O,children:r.jsxs(Ar,{className:"max-w-md",children:[r.jsx(Er,{children:r.jsx(Or,{children:"Edit Delivery Zone"})}),P&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"name",children:"Name"}),r.jsx(de,{id:"name",value:P.name,onChange:Y=>k({...P,name:Y.target.value}),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"minDistance",children:"Min Distance (km)"}),r.jsx(de,{id:"minDistance",type:"number",value:P.minDistance,onChange:Y=>k({...P,minDistance:Y.target.value}),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"maxDistance",children:"Max Distance (km)"}),r.jsx(de,{id:"maxDistance",type:"number",value:P.maxDistance,onChange:Y=>k({...P,maxDistance:Y.target.value}),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"baseFee",children:"Base Fee"}),r.jsx(de,{id:"baseFee",type:"number",step:"0.01",value:P.baseFee,onChange:Y=>k({...P,baseFee:Y.target.value}),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"perKmRate",children:"Per KM Rate"}),r.jsx(de,{id:"perKmRate",type:"number",step:"0.01",value:P.perKmRate,onChange:Y=>k({...P,perKmRate:Y.target.value}),className:"mt-1"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"isActive",children:"Active"}),r.jsx(jn,{id:"isActive",checked:P.isActive,onCheckedChange:Y=>k({...P,isActive:Y}),className:"data-[state=checked]:bg-green-600"})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx($,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),r.jsx($,{onClick:()=>{new FormData;const Y=document.querySelectorAll("#name, #minDistance, #maxDistance, #baseFee, #perKmRate"),ye={};Y.forEach(Te=>{Te.type==="number"?ye[Te.id]=parseFloat(Te.value)||0:ye[Te.id]=Te.value}),ye.isActive=P.isActive,Pe.mutate({id:P.id,data:ye})},disabled:Pe.isPending,children:Pe.isPending?"Saving...":"Update Zone"})]})]})]})}),r.jsx(Dr,{open:M,onOpenChange:T,children:r.jsxs(Ar,{className:"max-w-md",children:[r.jsx(Er,{children:r.jsx(Or,{children:"Create New Delivery Zone"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-name",children:"Name"}),r.jsx(de,{id:"new-name",value:I.name,onChange:Y=>A({...I,name:Y.target.value}),className:"mt-1",placeholder:"e.g., Inner City"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-minDistance",children:"Min Distance (km)"}),r.jsx(de,{id:"new-minDistance",type:"number",step:"0.01",value:I.minDistance,onChange:Y=>A({...I,minDistance:Y.target.value}),className:"mt-1",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-maxDistance",children:"Max Distance (km)"}),r.jsx(de,{id:"new-maxDistance",type:"number",step:"0.01",value:I.maxDistance,onChange:Y=>A({...I,maxDistance:Y.target.value}),className:"mt-1",placeholder:"5"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-baseFee",children:"Base Fee"}),r.jsx(de,{id:"new-baseFee",type:"number",step:"0.01",value:I.baseFee,onChange:Y=>A({...I,baseFee:Y.target.value}),className:"mt-1",placeholder:"30.00"})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"new-perKmRate",children:"Per KM Rate"}),r.jsx(de,{id:"new-perKmRate",type:"number",step:"0.01",value:I.perKmRate,onChange:Y=>A({...I,perKmRate:Y.target.value}),className:"mt-1",placeholder:"5.00"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(be,{htmlFor:"new-isActive",children:"Active"}),r.jsx(jn,{id:"new-isActive",checked:I.isActive,onCheckedChange:Y=>A({...I,isActive:Y}),className:"data-[state=checked]:bg-green-600"})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx($,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),r.jsx($,{onClick:()=>Ee.mutate(I),disabled:Ee.isPending,children:Ee.isPending?"Creating...":"Create Zone"})]})]})]})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})}function HH(e,t){const n=b.useRef(t);b.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const Jje=1;function ebe(e){return Object.freeze({__version:Jje,map:e})}function qH(e,t){return Object.freeze({...e,...t})}const KH=b.createContext(null),GH=KH.Provider;function PA(){const e=b.useContext(KH);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function ZH(e){function t(n,s){const{instance:i,context:a}=e(n).current;return b.useImperativeHandle(s,()=>i),n.children==null?null:te.createElement(GH,{value:a},n.children)}return b.forwardRef(t)}function tbe(e){function t(n,s){const[i,a]=b.useState(!1),{instance:o}=e(n,a).current;b.useImperativeHandle(s,()=>o),b.useEffect(function(){i&&o.update()},[o,i,n.children]);const l=o._contentNode;return l?jc.createPortal(n.children,l):null}return b.forwardRef(t)}function rbe(e){function t(n,s){const{instance:i}=e(n).current;return b.useImperativeHandle(s,()=>i),null}return b.forwardRef(t)}function CA(e,t){const n=b.useRef();b.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function Qb(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function nbe(e,t){return function(s,i){const a=PA(),o=e(Qb(s,a),a);return HH(a.map,s.attribution),CA(o.current,s.eventHandlers),t(o.current,a,s,i),o}}function Jb(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function ew(e,t){return t==null?function(s,i){const a=b.useRef();return a.current||(a.current=e(s,i)),a}:function(s,i){const a=b.useRef();a.current||(a.current=e(s,i));const o=b.useRef(s),{instance:l}=a.current;return b.useEffect(function(){o.current!==s&&(t(l,s,o.current),o.current=s)},[l,s,i]),a}}function YH(e,t){b.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function XH(e){return function(n){const s=PA(),i=e(Qb(n,s),s);return HH(s.map,n.attribution),CA(i.current,n.eventHandlers),YH(i.current,s),i}}function sbe(e,t){const n=b.useRef();b.useEffect(function(){if(t.pathOptions!==n.current){const i=t.pathOptions??{};e.instance.setStyle(i),n.current=i}},[e,t])}function ibe(e){return function(n){const s=PA(),i=e(Qb(n,s),s);return CA(i.current,n.eventHandlers),YH(i.current,s),sbe(i.current,n),i}}function abe(e,t){const n=ew(e,t),s=XH(n);return ZH(s)}function obe(e,t){const n=ew(e),s=nbe(n,t);return tbe(s)}function lbe(e,t){const n=ew(e,t),s=ibe(n);return ZH(s)}function cbe(e,t){const n=ew(e,t),s=XH(n);return rbe(s)}function dbe(e,t,n){const{opacity:s,zIndex:i}=t;s!=null&&s!==n.opacity&&e.setOpacity(s),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function $2(){return $2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$2.apply(this,arguments)}function ube({bounds:e,boundsOptions:t,center:n,children:s,className:i,id:a,placeholder:o,style:l,whenReady:c,zoom:d,...h},m){const[f]=b.useState({className:i,id:a,style:l}),[v,p]=b.useState(null);b.useImperativeHandle(m,()=>(v==null?void 0:v.map)??null,[v]);const x=b.useCallback(w=>{if(w!==null&&v===null){const j=new $m.Map(w,h);n!=null&&d!=null?j.setView(n,d):e!=null&&j.fitBounds(e,t),c!=null&&j.whenReady(c),p(ebe(j))}},[]);b.useEffect(()=>()=>{v==null||v.map.remove()},[v]);const y=v?te.createElement(GH,{value:v},s):o??null;return te.createElement("div",$2({},f,{ref:x}),y)}const tw=b.forwardRef(ube),za=abe(function({position:t,...n},s){const i=new $m.Marker(t,n);return Jb(i,qH(s,{overlayContainer:i}))},function(t,n,s){n.position!==s.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==s.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==s.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==s.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==s.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),QH=lbe(function({positions:t,...n},s){const i=new $m.Polyline(t,n);return Jb(i,qH(s,{overlayContainer:i}))},function(t,n,s){n.positions!==s.positions&&t.setLatLngs(n.positions)}),Jl=obe(function(t,n){const s=new $m.Popup(t,n.overlayContainer);return Jb(s,n)},function(t,n,{position:s},i){b.useEffect(function(){const{instance:o}=t;function l(d){d.popup===o&&(o.update(),i(!0))}function c(d){d.popup===o&&i(!1)}return n.map.on({popupopen:l,popupclose:c}),n.overlayContainer==null?(s!=null&&o.setLatLng(s),o.openOn(n.map)):n.overlayContainer.bindPopup(o),function(){var h;n.map.off({popupopen:l,popupclose:c}),(h=n.overlayContainer)==null||h.unbindPopup(),n.map.removeLayer(o)}},[t,n,i,s])}),rw=cbe(function({url:t,...n},s){const i=new $m.TileLayer(t,Qb(n,s));return Jb(i,s)},function(t,n,s){dbe(t,n,s);const{url:i}=n;i!=null&&i!==s.url&&t.setUrl(i)});delete rr.Icon.Default.prototype._getIconUrl;rr.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const hbe=e=>{const t=e.logo||"/default-store-logo.png";return new rr.DivIcon({html:`
      <div style="
        width: 40px; 
        height: 40px; 
        background: white; 
        border: 3px solid #3b82f6; 
        border-radius: 50%; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        position: relative;
      ">
        <img src="${t}" 
             style="width: 28px; height: 28px; border-radius: 50%; object-fit: cover;" 
             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjMzk4NGZmIi8+Cjwvc3ZnPg=='" />
        <div style="
          position: absolute; 
          bottom: -2px; 
          right: -2px; 
          width: 12px; 
          height: 12px; 
          background: #10b981; 
          border: 2px solid white; 
          border-radius: 50%;
        "></div>
      </div>
    `,className:"custom-store-marker",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]})},mbe=new rr.DivIcon({html:`
    <div style="
      width: 32px; 
      height: 32px; 
      background: #3b82f6; 
      border: 4px solid white; 
      border-radius: 50%; 
      display: flex; 
      align-items: center; 
      justify-content: center;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
      animation: pulse 2s infinite;
    ">
      <div style="
        width: 16px; 
        height: 16px; 
        background: white; 
        border-radius: 50%;
      "></div>
    </div>
  `,className:"custom-user-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]});function fbe({storeType:e="retail"}){const[t,n]=b.useState(null),[s,i]=b.useState(null),[a,o]=b.useState({lat:"",lon:""}),[l,c]=b.useState(!1),[d,h]=b.useState(null),[m,f]=b.useState(!1),[v,p]=b.useState(""),[x,y]=b.useState([]),[w,j]=b.useState(!1),[N,C]=b.useState(!1),[P,k]=b.useState(null),[_,O]=b.useState(!1),M=b.useRef(null),{toast:T}=ft(),I=()=>{if(!navigator.geolocation){h("Geolocation is not supported by this browser");return}c(!0),h(null),navigator.geolocation.getCurrentPosition(X=>{n({latitude:X.coords.latitude,longitude:X.coords.longitude}),f(!0),c(!1)},X=>{let ge="Failed to get your location";switch(X.code){case X.PERMISSION_DENIED:ge="Location access denied. Please enable location services.";break;case X.POSITION_UNAVAILABLE:ge="Location information is unavailable.";break;case X.TIMEOUT:ge="Location request timed out.";break}h(ge),c(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},A=()=>{const X=parseFloat(a.lat),ge=parseFloat(a.lon);!isNaN(X)&&!isNaN(ge)?(n({latitude:X,longitude:ge}),f(!0),h(null)):h("Please enter valid latitude and longitude values")},V=async X=>{if(!X.trim()||X.length<2){y([]),j(!1);return}try{C(!0);const ge=await fetch(`/api/geocode/search?q=${encodeURIComponent(X)}`);if(!ge.ok)throw console.error("Geocoding API error:",ge.status,ge.statusText),new Error(`HTTP ${ge.status}: ${ge.statusText}`);const Se=await ge.json();if(console.log("Geocoding search results:",Se),!Array.isArray(Se)||Se.length===0){y([]),j(!1);return}y(Se),j(Se.length>0)}catch(ge){console.error("Location search error:",ge),y([]),j(!1),T({title:"Search Error",description:"Unable to search for locations. Please try again.",variant:"destructive"})}finally{C(!1)}},D=async X=>{var ge,Se,F;try{if(!X.position){T({title:"Location Error",description:"Selected location doesn't have coordinates",variant:"destructive"});return}const{lat:pe,lng:we}=X.position;n({latitude:pe,longitude:we}),k(X.title||((ge=X.address)==null?void 0:ge.label)||"Selected Location"),f(!0),h(null),p(X.title||((Se=X.address)==null?void 0:Se.label)||""),j(!1),T({title:"Location Found",description:`Searching stores near ${X.title||((F=X.address)==null?void 0:F.label)}`})}catch(pe){console.error("Error setting location:",pe),T({title:"Location Error",description:"Failed to set the selected location",variant:"destructive"})}},W=()=>{p(""),y([]),j(!1),k(null)},U=()=>{t?f(!0):I()},{data:Q,isLoading:q}=Le({queryKey:["/api/stores/nearby",t==null?void 0:t.latitude,t==null?void 0:t.longitude,e],queryFn:async()=>{if(!t)return[];const X=`/api/stores/nearby?lat=${t.latitude}&lon=${t.longitude}&storeType=${e}`,ge=await fetch(X);if(!ge.ok)throw new Error("Failed to fetch nearby stores");return ge.json()},enabled:!!t&&m}),B=X=>{if(!t)return"#";const ge=`${t.latitude},${t.longitude}`,Se=`${X.latitude},${X.longitude}`;return`https://www.google.com/maps/dir/${ge}/${Se}`},H=e==="restaurant"?{title:"Restaurant Locations & Directions",description:"Find nearby restaurants and get directions to them",buttonText:"Find Nearby Restaurants",subtitle:"Click to track your location and discover restaurants near you",cardTitle:"Nearby Restaurants",cardDescription:"Restaurants sorted by distance from closest to farthest"}:{title:"Store Locations & Directions",description:"Find nearby retail stores and get directions to them",buttonText:"Find Nearby Stores",subtitle:"Click to track your location and discover stores near you",cardTitle:"Nearby Stores",cardDescription:"Stores sorted by distance from closest to farthest"};return b.useEffect(()=>{I()},[]),b.useEffect(()=>{const X=setTimeout(()=>{v.trim().length>=2&&V(v)},300);return()=>clearTimeout(X)},[v]),r.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2 text-lg md:text-xl",children:[r.jsx(Re,{className:"h-5 w-5"}),H.title]}),r.jsx(kt,{children:H.description})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx($,{onClick:U,size:"lg",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg font-semibold shadow-lg",disabled:l,children:l?r.jsxs(r.Fragment,{children:[r.jsx(To,{className:"h-5 w-5 mr-2 animate-spin"}),"Getting Location..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ni,{className:"h-5 w-5 mr-2"}),H.buttonText]})}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:H.subtitle})]}),d&&r.jsx(ii,{className:"border-red-200 bg-red-50",children:r.jsx(ai,{className:"text-red-700",children:d})}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Search for a location:"}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(de,{placeholder:"Search for a city, place, or address (e.g., Siraha, Kathmandu)",value:v,onChange:X=>p(X.target.value),className:"pl-10 pr-10"}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Powered by OpenStreetMap - Free and accurate location search"}),v&&r.jsx($,{variant:"ghost",size:"sm",onClick:W,className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",children:r.jsx(Fr,{className:"h-4 w-4"})}),N&&r.jsx(To,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 animate-spin text-gray-400"})]}),w&&x.length>0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map((X,ge)=>{var Se,F;return r.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>D(X),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Re,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:X.title||((Se=X.address)==null?void 0:Se.label)||"Unknown Location"}),((F=X.address)==null?void 0:F.label)&&X.title!==X.address.label&&r.jsx("p",{className:"text-sm text-gray-600 truncate",children:X.address.label}),X.resultType&&r.jsx(ue,{variant:"outline",className:"text-xs mt-1",children:X.resultType})]})]})},ge)})})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Or enter coordinates manually:"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsx(de,{placeholder:"Latitude",value:a.lat,onChange:X=>o({...a,lat:X.target.value}),className:"flex-1 min-w-0"}),r.jsx(de,{placeholder:"Longitude",value:a.lon,onChange:X=>o({...a,lon:X.target.value}),className:"flex-1 min-w-0"}),r.jsxs($,{onClick:A,variant:"outline",className:"w-full sm:w-auto",children:[r.jsx(A_,{className:"h-4 w-4 mr-2"}),"Set Location"]})]})]}),t&&r.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ni,{className:"h-4 w-4 text-green-600"}),r.jsx("div",{className:"flex-1",children:P?r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-green-700 font-medium",children:[" ",P]}),r.jsxs("p",{className:"text-xs text-green-600",children:[t.latitude.toFixed(4),", ",t.longitude.toFixed(4)]})]}):r.jsxs("p",{className:"text-sm text-green-700 font-medium",children:["Current Location: ",t.latitude.toFixed(4),", ",t.longitude.toFixed(4)]})}),P&&r.jsx($,{variant:"ghost",size:"sm",onClick:()=>{k(null),p(""),I()},className:"h-8 w-8 p-0",children:r.jsx(Ni,{className:"h-4 w-4"})})]})})]})]}),t&&m&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ni,{className:"h-5 w-5 text-blue-600"}),H.cardTitle,Q&&Q.length>0&&r.jsxs(ue,{variant:"secondary",className:"ml-2",children:[Q.length," found"]})]}),r.jsx(kt,{children:H.cardDescription})]}),r.jsx(G,{children:q?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(To,{className:"h-8 w-8 mx-auto animate-spin text-blue-600"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Finding nearby stores..."})]}):Q&&Q.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map((X,ge)=>r.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-all duration-200 ${(s==null?void 0:s.id)===X.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,onClick:()=>{i(X),O(!0)},children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs(ue,{variant:ge<3?"default":"secondary",className:`text-xs px-2 py-1 ${ge===0?"bg-green-600":ge===1?"bg-blue-600":ge===2?"bg-orange-600":""}`,children:["#",ge+1]}),r.jsxs(ue,{variant:X.distance<1?"destructive":X.distance<5?"default":"secondary",className:`${X.distance<1?"bg-green-600":X.distance<5?"bg-blue-600":""}`,children:[X.distance.toFixed(1),"km"]})]}),r.jsx("h3",{className:"font-semibold text-lg mb-1",children:X.name}),r.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:X.description}),r.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[r.jsx(Bt,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm",children:X.rating}),r.jsxs("span",{className:"text-xs text-gray-500",children:["(",X.totalReviews,")"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs($,{size:"sm",onClick:Se=>{Se.stopPropagation(),window.open(B(X),"_blank")},className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(_t,{className:"h-4 w-4 mr-1"}),"Navigate with Google Maps"]}),r.jsx($,{size:"sm",variant:"outline",onClick:Se=>{Se.stopPropagation(),i(X),O(!0)},className:"w-full",children:"View on Map"})]})]},X.id))}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No stores found in your area"})})]}),r.jsxs("div",{className:"relative w-full h-[600px] rounded-xl overflow-hidden shadow-lg",children:[t?r.jsxs(tw,{center:s?[parseFloat(s.latitude),parseFloat(s.longitude)]:[t.latitude,t.longitude],zoom:s?16:14,style:{height:"100%",width:"100%"},className:"z-0",scrollWheelZoom:!0,doubleClickZoom:!0,touchZoom:!0,zoomControl:!1,ref:M,children:[r.jsx(rw,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.jsx(za,{position:[t.latitude,t.longitude],icon:mbe,children:r.jsx(Jl,{children:r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold",children:"Your Location"}),r.jsx("p",{className:"text-sm text-gray-600",children:P||"Current GPS Position"})]})})}),Q&&Q.map(X=>X.latitude&&X.longitude&&r.jsx(za,{position:[parseFloat(X.latitude),parseFloat(X.longitude)],icon:hbe(X),eventHandlers:{click:()=>{i(X),O(!0)}},children:r.jsx(Jl,{children:r.jsxs("div",{className:"text-center max-w-xs",children:[r.jsx("h3",{className:"font-semibold",children:X.name}),r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:X.address}),r.jsxs("div",{className:"flex items-center justify-center gap-1 mb-2",children:[r.jsx(Bt,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm",children:X.rating})]}),r.jsxs(ue,{variant:"outline",className:"text-xs",children:[X.distance.toFixed(1),"km away"]})]})})},X.id))]}):r.jsx("div",{className:"flex items-center justify-center h-full bg-gray-100 text-gray-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Re,{className:"h-12 w-12 mx-auto mb-3"}),r.jsx("p",{className:"text-lg font-medium",children:"Enable location to view the map"}),r.jsx("p",{className:"text-sm",children:'Click "Get Current Location" above to start'})]})}),r.jsxs("div",{className:"absolute top-4 right-4 z-[999] flex flex-col gap-2",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:[r.jsx($,{variant:"ghost",size:"sm",onClick:()=>{M.current&&M.current.zoomIn()},className:"w-10 h-10 p-0 rounded-none border-b border-gray-200 hover:bg-blue-50",title:"Zoom In",children:r.jsx("span",{className:"text-lg font-bold text-blue-600",children:"+"})}),r.jsx($,{variant:"ghost",size:"sm",onClick:()=>{M.current&&M.current.zoomOut()},className:"w-10 h-10 p-0 rounded-none hover:bg-blue-50",title:"Zoom Out",children:r.jsx("span",{className:"text-lg font-bold text-blue-600",children:""})})]}),s&&r.jsxs($,{onClick:()=>window.open(B(s),"_blank"),className:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg whitespace-nowrap",size:"sm",title:"Navigate with Google Maps",children:[r.jsx(_t,{className:"h-4 w-4 mr-1"}),"Navigate"]}),r.jsx($,{variant:"outline",size:"sm",onClick:()=>{t&&M.current&&M.current.setView([t.latitude,t.longitude],15)},className:"bg-white shadow-lg hover:bg-blue-50",title:"Center on My Location",children:r.jsx(Ni,{className:"h-4 w-4 text-blue-600"})}),s&&r.jsx($,{variant:"outline",size:"sm",onClick:()=>{const X=`https://www.google.com/maps/dir/${t==null?void 0:t.latitude},${t==null?void 0:t.longitude}/${s.latitude},${s.longitude}`;window.open(X,"_blank")},className:"bg-white shadow-lg hover:bg-green-50",title:"Open Full Screen Directions",children:r.jsx(A_,{className:"h-4 w-4 text-green-600"})})]}),_&&s&&r.jsx("div",{className:"absolute top-4 left-4 z-[1000] max-w-sm",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-gray-200 p-4 transform transition-all duration-300 animate-in slide-in-from-left-5",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.name}),r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx(Bt,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm font-medium",children:s.rating}),r.jsxs("span",{className:"text-xs text-gray-500",children:["(",s.totalReviews," reviews)"]})]})]}),r.jsx($,{variant:"ghost",size:"sm",onClick:()=>O(!1),className:"h-8 w-8 p-0 text-gray-400 hover:text-gray-600",children:r.jsx(Fr,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Re,{className:"h-4 w-4"}),r.jsx("span",{className:"line-clamp-2",children:s.address})]})}),s.phone&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Vt,{className:"h-4 w-4"}),r.jsx("span",{children:s.phone})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(ue,{variant:"outline",className:"text-xs",children:[s.distance.toFixed(1)," km away"]}),s.distance<1&&r.jsx(ue,{variant:"secondary",className:"text-xs bg-green-100 text-green-700",children:"Very Close!"})]}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:s.description}),r.jsxs("div",{className:"space-y-2 pt-2",children:[r.jsxs($,{size:"sm",onClick:()=>window.open(B(s),"_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(_t,{className:"h-4 w-4 mr-1"}),"Open in Google Maps"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx($,{size:"sm",variant:"outline",onClick:()=>{navigator.share?navigator.share({title:s.name,text:`Check out ${s.name} at ${s.address}`,url:B(s)}):(navigator.clipboard.writeText(B(s)),T({title:"Location Copied",description:"Google Maps link copied to clipboard"}))},className:"flex-1",children:"Share"}),r.jsx($,{size:"sm",variant:"outline",onClick:()=>window.open(`/stores/${s.slug}`,"_blank"),className:"flex-1",children:"Visit Store"})]})]})]})]})})]})]})]})}function pbe(){const{user:e}=Gt();return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[r.jsx(Re,{className:"h-8 w-8"}),"Store Locations"]}),r.jsx("p",{className:"text-gray-600",children:"Find nearby stores and get directions to them"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(fbe,{storeType:"retail"})}),r.jsxs("div",{className:"space-y-6",children:[e&&r.jsx(Eb,{userId:e.id}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"How It Works"}),r.jsx(kt,{children:"Getting directions to stores"})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"1. Share Your Location"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Allow location access or enter your coordinates manually"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"2. Find Nearby Stores"}),r.jsx("p",{className:"text-sm text-gray-600",children:"View stores sorted by distance from your location"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"3. Get Directions"}),r.jsx("p",{className:"text-sm text-gray-600",children:'Click "Get Directions" to open Google Maps navigation'})]})]})]})]})]})]})}delete rr.Icon.Default.prototype._getIconUrl;rr.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const xbe=e=>{const t=e.logo||"/default-restaurant-logo.png";return new rr.DivIcon({html:`
      <div style="
        width: 40px; 
        height: 40px; 
        background: white; 
        border: 3px solid #dc2626; 
        border-radius: 50%; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        position: relative;
      ">
        <img src="${t}" 
             style="width: 28px; height: 28px; border-radius: 50%; object-fit: cover;" 
             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTggMTNMMTEgMTZMMTYgMTFNMjEgMTJDMjEgMTYuOTcwNiAxNi45NzA2IDIxIDEyIDIxQzcuMDI5NDQgMjEgMyAxNi45NzA2IDMgMTJDMyA3LjAyOTQ0IDcuMDI5NDQgMyAxMiAzQzE2Ljk3MDYgMyAyMSA3LjAyOTQ0IDIxIDEyWiIgc3Ryb2tlPSIjZGMyNjI2IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K'" />
        <div style="
          position: absolute; 
          bottom: -2px; 
          right: -2px; 
          width: 12px; 
          height: 12px; 
          background: #10b981; 
          border: 2px solid white; 
          border-radius: 50%;
        "></div>
      </div>
    `,className:"custom-restaurant-marker",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]})},gbe=new rr.DivIcon({html:`
    <div style="
      width: 32px; 
      height: 32px; 
      background: #2563eb; 
      border: 3px solid white; 
      border-radius: 50%; 
      display: flex; 
      align-items: center; 
      justify-content: center;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    ">
      <div style="
        width: 16px; 
        height: 16px; 
        background: white; 
        border-radius: 50%;
      "></div>
    </div>
  `,className:"custom-user-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]});function vbe({cuisineFilter:e}){const[t,n]=b.useState(null),[s,i]=b.useState(null),[a,o]=b.useState({lat:"",lon:""}),[l,c]=b.useState(!1),[d,h]=b.useState(null),[m,f]=b.useState(!1),[v,p]=b.useState(""),[x,y]=b.useState([]),[w,j]=b.useState(!1),[N,C]=b.useState(!1),[P,k]=b.useState(null),[_,O]=b.useState(!1),M=b.useRef(null),{toast:T}=ft(),I=()=>{if(!navigator.geolocation){h("Geolocation is not supported by this browser");return}c(!0),h(null),navigator.geolocation.getCurrentPosition(H=>{n({latitude:H.coords.latitude,longitude:H.coords.longitude}),c(!1),f(!0)},H=>{h(`Error getting location: ${H.message}`),c(!1)})},A=()=>{t?f(!0):I()},{data:V,isLoading:D}=Le({queryKey:["/api/stores/nearby",t==null?void 0:t.latitude,t==null?void 0:t.longitude,"restaurant",e],queryFn:async()=>{if(!t)return[];let H=`/api/stores/nearby?lat=${t.latitude}&lon=${t.longitude}&storeType=restaurant`;const X=await fetch(H);if(!X.ok)throw new Error("Failed to fetch nearby restaurants");let ge=await X.json();return e&&e!=="all"&&(ge=ge.filter(Se=>Se.cuisineType===e)),ge},enabled:!!t&&m}),W=H=>{if(!t)return"#";const X=`${t.latitude},${t.longitude}`,ge=`${H.latitude},${H.longitude}`;return`https://www.google.com/maps/dir/${X}/${ge}`},U=async H=>{if(!H.trim()){y([]),j(!1);return}C(!0);try{const X=await fetch(`/api/geocode/search?q=${encodeURIComponent(H)}`);if(X.ok){const ge=await X.json();y(ge.results||[]),j(!0)}}catch(X){console.error("Search error:",X)}finally{C(!1)}},Q=H=>{var X;H.position&&(n({latitude:H.position.lat,longitude:H.position.lng}),k(H.title||((X=H.address)==null?void 0:X.label)||"Selected Location"),f(!0),j(!1),h(null))},q=()=>{p(""),y([]),j(!1),k(null)},B=()=>{const H=parseFloat(a.lat),X=parseFloat(a.lon);if(isNaN(H)||isNaN(X)){h("Please enter valid coordinates");return}n({latitude:H,longitude:X}),h(null),f(!0),k(null)};b.useEffect(()=>{const H=setTimeout(()=>{v&&U(v)},300);return()=>clearTimeout(H)},[v]);const z=[26.6586,86.2003];return b.useEffect(()=>{I()},[]),r.jsxs("div",{className:"w-full space-y-6",children:[r.jsxs("div",{className:"text-center space-y-4",children:[r.jsxs("h2",{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[r.jsx(Da,{className:"h-6 w-6 text-red-600"}),"Restaurant Locations & Food Delivery"]}),r.jsx("p",{className:"text-gray-600",children:"Find nearby restaurants and get directions for pickup or delivery"}),r.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(de,{type:"text",placeholder:"Search for places like 'Siraha', 'Kathmandu', 'Pokhara'...",value:v,onChange:H=>p(H.target.value),className:"pl-10 pr-10"}),v&&r.jsx("button",{onClick:q,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Fr,{className:"h-4 w-4"})})]}),w&&x.length>0&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-60 overflow-y-auto",children:x.map((H,X)=>{var ge;return r.jsx("button",{onClick:()=>Q(H),className:"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:H.title}),r.jsx("div",{className:"text-xs text-gray-500",children:(ge=H.address)==null?void 0:ge.label})]})]})},X)})}),N&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 p-4",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(To,{className:"h-4 w-4 animate-spin mr-2"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Searching..."})]})})]}),P&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{className:"text-sm font-medium text-green-800",children:[" ",P]})]}),r.jsxs($,{onClick:()=>{I(),k(null)},variant:"outline",size:"sm",className:"text-xs",children:[r.jsx(Ni,{className:"h-3 w-3 mr-1"}),"Use GPS"]})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{placeholder:"Latitude",value:a.lat,onChange:H=>o({...a,lat:H.target.value}),className:"w-24"}),r.jsx(de,{placeholder:"Longitude",value:a.lon,onChange:H=>o({...a,lon:H.target.value}),className:"w-24"}),r.jsxs($,{onClick:B,variant:"outline",size:"sm",children:[r.jsx(Re,{className:"h-4 w-4 mr-1"}),"Set"]})]}),r.jsxs($,{onClick:A,disabled:l,className:"bg-red-600 hover:bg-red-700",children:[l?r.jsx(To,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx(Ni,{className:"h-4 w-4 mr-2"}),"Find Nearby Restaurants"]})]})]}),d&&r.jsx(ii,{className:"max-w-md mx-auto",children:r.jsx(ai,{children:d})}),r.jsx("p",{className:"text-sm text-gray-500",children:"Click to track your location and discover restaurants near you"})]}),t&&m&&r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ni,{className:"h-5 w-5 text-red-600"}),"Nearby Restaurants",V&&V.length>0&&r.jsxs(ue,{variant:"secondary",className:"ml-2",children:[V.length," found"]})]}),r.jsx(kt,{children:"Restaurants sorted by distance from closest to farthest"})]}),r.jsx(G,{children:D?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(To,{className:"h-8 w-8 mx-auto animate-spin text-red-600"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Finding nearby restaurants..."})]}):V&&V.length>0?r.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:V.map((H,X)=>r.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all duration-200 ${(s==null?void 0:s.id)===H.id?"border-red-500 bg-red-50 shadow-md":"border-gray-200 hover:border-red-300 hover:shadow-sm"}`,onClick:()=>i(H),children:r.jsxs("div",{className:"flex flex-col space-y-3",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:H.name}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsxs(ue,{variant:X<3?"default":"secondary",className:"text-xs",children:[H.distance.toFixed(1)," km away"]}),H.distance<1&&r.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Very Close!"})]})]}),r.jsx("p",{className:"text-gray-600 text-sm mb-2",children:H.description}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm text-gray-500 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Re,{className:"h-4 w-4 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:H.address})]}),H.phone&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Vt,{className:"h-4 w-4 flex-shrink-0"}),r.jsx("span",{children:H.phone})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[H.cuisineType&&r.jsx(ue,{variant:"outline",children:H.cuisineType}),H.deliveryTime&&r.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[r.jsx(jt,{className:"h-3 w-3"}),r.jsx("span",{children:H.deliveryTime})]}),H.minimumOrder&&r.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[r.jsx(Qr,{className:"h-3 w-3"}),r.jsxs("span",{children:["Min: $",H.minimumOrder]})]}),H.isDeliveryAvailable&&r.jsx(ue,{variant:"secondary",className:"text-green-600",children:"Delivery Available"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Bt,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsxs("span",{className:"text-sm",children:[H.rating," (",H.totalReviews," reviews)"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($,{size:"sm",variant:"outline",onClick:ge=>{ge.stopPropagation(),window.open(W(H),"_blank")},className:"flex-1 sm:flex-none",children:[r.jsx(_t,{className:"h-4 w-4 mr-1"}),"Directions"]}),r.jsx($,{size:"sm",onClick:ge=>{ge.stopPropagation(),i(H)},className:"flex-1 sm:flex-none bg-red-600 hover:bg-red-700",children:"View Menu"})]})]})]})},H.id))}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No restaurants found in your area"})})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Restaurant Map"}),r.jsx(ue,{variant:"secondary",className:"text-xs",children:"Enhanced Controls"})]}),r.jsx(kt,{children:"Interactive map with zoom controls and Google Maps navigation"})]}),r.jsx(G,{className:"p-0 relative",children:r.jsxs("div",{className:"h-[600px] w-full relative overflow-hidden rounded-b-lg",children:[r.jsxs(tw,{ref:M,center:s!=null&&s.latitude&&(s!=null&&s.longitude)?[parseFloat(s.latitude),parseFloat(s.longitude)]:t?[t.latitude,t.longitude]:z,zoom:s?15:t?13:12,className:"h-full w-full",scrollWheelZoom:!0,doubleClickZoom:!0,touchZoom:!0,zoomControl:!1,children:[r.jsx(rw,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),V==null?void 0:V.map(H=>H.latitude&&H.longitude&&r.jsx(za,{position:[parseFloat(H.latitude),parseFloat(H.longitude)],icon:xbe(H),eventHandlers:{click:()=>{i(H),O(!0)}}},H.id)),t&&r.jsx(za,{position:[t.latitude,t.longitude],icon:gbe})]}),r.jsxs("div",{className:"absolute top-4 right-4 z-[1000] flex flex-col gap-2",children:[r.jsx("button",{onClick:()=>{const H=M.current;H&&H.setZoom(H.getZoom()+1)},className:"w-10 h-10 bg-white border border-gray-300 rounded-lg shadow-lg hover:bg-gray-50 flex items-center justify-center text-lg font-bold text-gray-700 hover:text-gray-900 transition-colors",title:"Zoom In",children:"+"}),r.jsx("button",{onClick:()=>{const H=M.current;H&&H.setZoom(H.getZoom()-1)},className:"w-10 h-10 bg-white border border-gray-300 rounded-lg shadow-lg hover:bg-gray-50 flex items-center justify-center text-lg font-bold text-gray-700 hover:text-gray-900 transition-colors",title:"Zoom Out",children:""}),r.jsx("button",{onClick:()=>{t&&M.current?M.current.setView([t.latitude,t.longitude],15):I()},className:"w-10 h-10 bg-white border border-gray-300 rounded-lg shadow-lg hover:bg-gray-50 flex items-center justify-center text-gray-700 hover:text-gray-900 transition-colors",title:"Center on My Location",children:r.jsx(Ni,{className:"h-4 w-4"})})]}),s&&_&&r.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-[1000] bg-white rounded-lg shadow-2xl border border-gray-200 max-w-md mx-auto",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.name}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.address})]}),r.jsx("button",{onClick:()=>O(!1),className:"ml-2 p-1 hover:bg-gray-100 rounded-full",children:r.jsx(Fr,{className:"h-4 w-4 text-gray-500"})})]}),r.jsxs("div",{className:"flex items-center gap-4 mb-3 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Bt,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{children:s.rating})]}),r.jsxs(ue,{variant:"outline",className:"text-xs",children:[s.distance.toFixed(1)," km away"]}),s.cuisineType&&r.jsx(ue,{variant:"secondary",className:"text-xs",children:s.cuisineType})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[r.jsxs($,{size:"sm",onClick:()=>{const H=`https://www.google.com/maps/search/?api=1&query=${s.latitude},${s.longitude}`;window.open(H,"_blank")},variant:"outline",className:"flex items-center gap-1",children:[r.jsx(A_,{className:"h-4 w-4"}),"Open in Google Maps"]}),r.jsxs($,{size:"sm",onClick:()=>{if(t){const H=`https://www.google.com/maps/dir/${t.latitude},${t.longitude}/${s.latitude},${s.longitude}`;window.open(H,"_blank")}},variant:"outline",className:"flex items-center gap-1",children:[r.jsx(_t,{className:"h-4 w-4"}),"Navigate"]}),r.jsxs($,{size:"sm",onClick:()=>{const H={title:s.name,text:`Check out ${s.name} at ${s.address}`,url:`https://www.google.com/maps/search/?api=1&query=${s.latitude},${s.longitude}`};navigator.share?navigator.share(H):(navigator.clipboard.writeText(H.url),T({title:"Link copied!",description:"Restaurant location copied to clipboard"}))},className:"bg-red-600 hover:bg-red-700 flex items-center gap-1",children:[r.jsx(Da,{className:"h-4 w-4"}),"Share"]})]})]})})]})})]}),s&&r.jsxs(K,{className:"xl:col-span-2",children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Da,{className:"h-5 w-5 text-red-600"}),s.name]}),r.jsx(kt,{children:s.address})]}),r.jsxs(G,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"Restaurant Details"}),r.jsx("p",{className:"text-sm text-gray-600",children:s.description}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bt,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsxs("span",{children:[s.rating," (",s.totalReviews," reviews)"]})]}),s.phone&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vt,{className:"h-4 w-4"}),r.jsx("span",{children:s.phone})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"Delivery Information"}),s.cuisineType&&r.jsxs("p",{className:"text-sm",children:["Cuisine: ",s.cuisineType]}),s.deliveryTime&&r.jsxs("p",{className:"text-sm",children:["Delivery Time: ",s.deliveryTime]}),s.minimumOrder&&r.jsxs("p",{className:"text-sm",children:["Minimum Order: $",s.minimumOrder]}),s.deliveryFee&&r.jsxs("p",{className:"text-sm",children:["Delivery Fee: $",s.deliveryFee]}),r.jsx(ue,{variant:s.isDeliveryAvailable?"default":"secondary",children:s.isDeliveryAvailable?"Delivery Available":"Pickup Only"})]})]}),r.jsx("div",{className:"pt-4 border-t",children:r.jsxs($,{className:"w-full bg-red-600 hover:bg-red-700",onClick:()=>window.open(W(s),"_blank"),children:[r.jsx(_t,{className:"h-4 w-4 mr-2"}),"Get Directions in Google Maps"]})})]})]})]})]})}function ybe(){const{user:e}=Gt(),[t,n]=b.useState("all"),s=[{value:"all",label:"All Cuisines"},{value:"indian",label:"Indian"},{value:"chinese",label:"Chinese"},{value:"fast-food",label:"Fast Food"},{value:"italian",label:"Italian"},{value:"nepali",label:"Nepali"},{value:"continental",label:"Continental"},{value:"thai",label:"Thai"},{value:"pizza",label:"Pizza"},{value:"burger",label:"Burger"},{value:"dessert",label:"Dessert"}];return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[r.jsx(Da,{className:"h-8 w-8 text-red-600"}),"Restaurant Locations & Food Delivery"]}),r.jsx("p",{className:"text-gray-600",children:"Find nearby restaurants, check delivery options, and get directions"})]}),r.jsxs(K,{className:"mb-6",children:[r.jsxs(re,{children:[r.jsx(ne,{className:"text-lg",children:"Filter by Cuisine"}),r.jsx(kt,{children:"Choose your preferred cuisine type"})]}),r.jsx(G,{children:r.jsxs(dt,{value:t,onValueChange:n,children:[r.jsx(ot,{className:"w-full md:w-64",children:r.jsx(ut,{placeholder:"Select cuisine type"})}),r.jsx(lt,{children:s.map(i=>r.jsx(oe,{value:i.value,children:i.label},i.value))})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(vbe,{cuisineFilter:t})}),r.jsxs("div",{className:"space-y-6",children:[e&&r.jsx(Eb,{userId:e.id}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"How Food Delivery Works"}),r.jsx(kt,{children:"Order food from local restaurants"})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4 text-red-600"}),"1. Find Restaurants"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Share your location to discover nearby restaurants and their menus"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(jt,{className:"h-4 w-4 text-red-600"}),"2. Check Delivery Time"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"View estimated delivery times and minimum order requirements"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(Qr,{className:"h-4 w-4 text-red-600"}),"3. Place Your Order"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Browse menus, add items to cart, and complete your order"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(pk,{className:"h-4 w-4 text-red-600"}),"4. Track Delivery"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Get real-time updates on your order status and delivery progress"})]})]})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Delivery Features"}),r.jsx(kt,{children:"What we offer"})]}),r.jsxs(G,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{children:"Real-time order tracking"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{children:"Multiple payment options"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{children:"Live location sharing with restaurants"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{children:"Cuisine-based filtering"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{children:"Distance-based restaurant discovery"})]})]})]})]})]})]})}function jbe(){const{user:e}=Gt(),{wishlistItems:t,removeFromWishlist:n,isLoading:s}=bb(),{addToCart:i}=wc(),{toast:a}=ft(),o=async(c,d)=>{try{await i(c,1),a({title:"Added to cart",description:`${d} has been added to your cart.`})}catch{a({title:"Error",description:"Failed to add item to cart. Please try again.",variant:"destructive"})}},l=async(c,d)=>{try{await n(c),a({title:"Removed from wishlist",description:`${d} has been removed from your wishlist.`})}catch{a({title:"Error",description:"Failed to remove item from wishlist. Please try again.",variant:"destructive"})}};return e?s?r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading your wishlist..."})]})})}):r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Wishlist"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:[t.length," ",t.length===1?"item":"items"," saved for later"]})]}),t.length===0?r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center",children:"Your wishlist is empty"})}),r.jsx(G,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ma,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No items in your wishlist"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Save items you love to your wishlist and shop them later."}),r.jsx(Ae,{href:"/products",children:r.jsx($,{children:"Start Shopping"})})]})})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(c=>{var d,h,m,f,v,p;return r.jsxs(K,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:((h=(d=c.product)==null?void 0:d.images)==null?void 0:h[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",alt:((m=c.product)==null?void 0:m.name)||"Product",className:"w-full h-48 object-cover"}),r.jsx($,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 h-8 w-8 p-0 bg-white/80 hover:bg-white",onClick:()=>{var x;return l(c.id,((x=c.product)==null?void 0:x.name)||"Product")},children:r.jsx(ei,{className:"h-4 w-4 text-red-500"})})]}),r.jsxs(G,{className:"p-4",children:[r.jsx(Ae,{href:`/products/${c.productId}`,children:r.jsx("h3",{className:"font-semibold text-lg mb-2 hover:text-primary transition-colors line-clamp-2",children:((f=c.product)==null?void 0:f.name)||"Product Name"})}),r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-2xl font-bold text-primary",children:["",((v=c.product)==null?void 0:v.price)||"0"]}),((p=c.product)==null?void 0:p.originalPrice)&&Number(c.product.originalPrice)>Number(c.product.price)&&r.jsxs("p",{className:"text-sm text-gray-500 line-through",children:["",c.product.originalPrice]})]})}),r.jsx("div",{className:"flex gap-2",children:r.jsxs($,{className:"flex-1",onClick:()=>{var x;return o(c.productId,((x=c.product)==null?void 0:x.name)||"Product")},children:[r.jsx(_n,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})})]})]},c.id)})})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ma,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Login Required"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Please login to view your wishlist."}),r.jsx(Ae,{href:"/login",children:r.jsx($,{children:"Login"})})]})})})}function iL(){const{mode:e}=ua(),s=e==="shopping"?[{name:"Electronics",icon:"",href:"/products?category=4"},{name:"Clothing",icon:"",href:"/products?category=5"},{name:"Books",icon:"",href:"/products?category=6"},{name:"Sports",icon:"",href:"/products?category=7"},{name:"Beauty",icon:"",href:"/products?category=8"},{name:"Toys",icon:"",href:"/products?category=9"},{name:"Health",icon:"",href:"/products?category=10"},{name:"Automotive",icon:"",href:"/products?category=11"},{name:"Garden",icon:"",href:"/products?category=12"},{name:"Groceries",icon:"",href:"/products?category=2"},{name:"Fancy Items",icon:"",href:"/products?category=3"}]:[{name:"Indian Cuisine",icon:"",href:"/products?category=food&cuisine=indian"},{name:"Chinese",icon:"",href:"/products?category=food&cuisine=chinese"},{name:"Fast Food",icon:"",href:"/products?category=food&cuisine=fast-food"},{name:"Italian",icon:"",href:"/products?category=food&cuisine=italian"},{name:"Mexican",icon:"",href:"/products?category=food&cuisine=mexican"},{name:"Continental",icon:"",href:"/products?category=food&cuisine=continental"},{name:"Desserts & Sweets",icon:"",href:"/products?category=food&cuisine=desserts"},{name:"Beverages",icon:"",href:"/products?category=food&cuisine=beverages"},{name:"Pizza",icon:"",href:"/products?category=food&type=pizza"},{name:"Biryani",icon:"",href:"/products?category=food&type=biryani"},{name:"Snacks",icon:"",href:"/products?category=food&type=snacks"},{name:"Healthy Food",icon:"",href:"/products?category=food&type=healthy"}],i=e==="shopping"?"All Categories":"Food Menu";return r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center mb-8",children:[r.jsx(Ae,{href:"/",children:r.jsxs($,{variant:"ghost",size:"sm",className:"mr-4",children:[r.jsx(bc,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:i})]}),r.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-2 sm:gap-4",children:s.map(a=>r.jsx(Ae,{href:a.href,children:r.jsxs("div",{className:"category-card text-center hover:shadow-lg transition-shadow p-2 sm:p-4",children:[r.jsx("div",{className:"text-2xl sm:text-3xl mb-1 sm:mb-2",children:a.icon}),r.jsx("div",{className:"text-xs sm:text-sm font-semibold text-foreground",children:a.name})]})},a.name))})]})})}function aL({onImageSelect:e,selectedImages:t,maxImages:n,buttonText:s="Add Images"}){var W;const[i,a]=b.useState(!1),[o,l]=b.useState(""),[c,d]=b.useState(""),[h,m]=b.useState("google"),[f,v]=b.useState(!1),[p,x]=b.useState(""),[y,w]=b.useState("food"),j=b.useRef(null),N=b.useRef(null),{toast:C}=ft(),P={google:{name:"Google Images",baseUrl:"https://images.google.com",searchUrl:"https://images.google.com/search?q=",icon:""},amazon:{name:"Amazon India",baseUrl:"https://amazon.in",searchUrl:"https://amazon.in/s?k=",icon:""},flipkart:{name:"Flipkart",baseUrl:"https://flipkart.com",searchUrl:"https://flipkart.com/search?q=",icon:""},bigbasket:{name:"BigBasket",baseUrl:"https://bigbasket.com",searchUrl:"https://bigbasket.com/ps/?q=",icon:""}},k=["mashal tel mustard oil","dhara mustard oil","fortune mustard oil","patanjali mustard oil","MDH masala powder","everest spices"],_={food:[{url:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400",title:"Pizza",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400",title:"Burger",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=400",title:"Salad",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1551782450-a2132b4ba21d?w=400",title:"Pasta",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1565958011703-44f9829ba187?w=400",title:"Sandwich",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400",title:"Soup",source:"Unsplash"}],electronics:[{url:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400",title:"Smartphone",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400",title:"Laptop",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1583394838336-acd977736f90?w=400",title:"Headphones",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1551808525-51a94da548ce?w=400",title:"Camera",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400",title:"Tablet",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=400",title:"Smartwatch",source:"Unsplash"}],clothing:[{url:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400",title:"T-Shirt",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1542272604-787c3835535d?w=400",title:"Jeans",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=400",title:"Dress",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1549298916-b41d501d3772?w=400",title:"Sneakers",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=400",title:"Jacket",source:"Unsplash"},{url:"https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=400",title:"Hat",source:"Unsplash"}]},O=U=>{var B;const Q=(B=U.target.files)==null?void 0:B[0];if(!Q)return;if(n<=0){C({title:"Image Limit Reached",description:"Maximum number of images reached",variant:"destructive"});return}const q=new FileReader;q.onload=z=>{var X;const H=(X=z.target)==null?void 0:X.result;H&&!t.includes(H)&&(e(H),C({title:"Image Added",description:"File uploaded successfully"}))},q.readAsDataURL(Q)},M=U=>{O(U)},T=async U=>new Promise(Q=>{const q=new Image;q.onload=()=>Q(!0),q.onerror=()=>Q(!1),q.src=U,setTimeout(()=>Q(!1),5e3)}),I=async()=>{if(!o.trim()){C({title:"Invalid URL",description:"Please enter a valid image URL",variant:"destructive"});return}if(t.includes(o)){C({title:"Duplicate Image",description:"This image has already been added",variant:"destructive"});return}if(n<=0){C({title:"Image Limit Reached",description:"Maximum number of images reached",variant:"destructive"});return}v(!0);try{await T(o)?(e(o),l(""),x(""),C({title:"Image Added",description:"Image URL added successfully"})):C({title:"Invalid Image",description:"Unable to load image from this URL",variant:"destructive"})}catch{C({title:"Error",description:"Failed to validate image URL",variant:"destructive"})}finally{v(!1)}},A=()=>{if(!c.trim())return;const Q=`${P[h].searchUrl}${encodeURIComponent(c)}`;window.open(Q,"_blank")},V=U=>{if(t.includes(U)){C({title:"Duplicate Image",description:"This image has already been added",variant:"destructive"});return}if(n<=0){C({title:"Image Limit Reached",description:"Maximum number of images reached",variant:"destructive"});return}e(U),C({title:"Image Added",description:"Sample image added successfully"})},D=async()=>{try{const U=await navigator.clipboard.readText();U&&(l(U),x(U))}catch{C({title:"Clipboard Error",description:"Unable to read from clipboard",variant:"destructive"})}};return r.jsxs(Dr,{open:i,onOpenChange:a,children:[r.jsx(Ps,{asChild:!0,children:r.jsxs($,{variant:"outline",className:"w-full",disabled:n<=0,children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),s," (",t.length,"/",t.length+n,")"]})}),r.jsxs(Ar,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Er,{children:r.jsxs(Or,{className:"flex items-center gap-2",children:[r.jsx(Bp,{className:"h-5 w-5"}),"Add Product Images",r.jsxs(ue,{variant:"secondary",children:[t.length,"/",t.length+n," images"]})]})}),r.jsxs(Ds,{defaultValue:"upload",className:"w-full",children:[r.jsxs(ws,{className:"grid w-full grid-cols-4",children:[r.jsx(at,{value:"upload",children:"Upload"}),r.jsx(at,{value:"camera",children:"Camera"}),r.jsx(at,{value:"url",children:"Paste URL"}),r.jsx(at,{value:"search",children:"Search"})]}),r.jsx(Xe,{value:"upload",className:"space-y-4",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[r.jsx(Hs,{className:"h-5 w-5"}),"Upload from Device"]})}),r.jsx(G,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(Hs,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Upload Image Files"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose JPG, PNG, or GIF files from your device"}),r.jsxs($,{onClick:()=>{var U;return(U=j.current)==null?void 0:U.click()},children:[r.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Choose Files"]}),r.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:O,className:"hidden"})]})})]})}),r.jsx(Xe,{value:"camera",className:"space-y-4",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[r.jsx(ko,{className:"h-5 w-5"}),"Take Photo"]})}),r.jsx(G,{children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(ko,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Capture with Camera"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Take a photo directly with your device camera"}),r.jsxs($,{onClick:()=>{var U;return(U=N.current)==null?void 0:U.click()},children:[r.jsx(ko,{className:"h-4 w-4 mr-2"}),"Open Camera"]}),r.jsx("input",{ref:N,type:"file",accept:"image/*",capture:"environment",onChange:M,className:"hidden"})]})})]})}),r.jsx(Xe,{value:"url",className:"space-y-4",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[r.jsx($te,{className:"h-5 w-5"}),"Add Image URL"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{placeholder:"Paste image URL here...",value:o,onChange:U=>{l(U.target.value),x(U.target.value)},onKeyPress:U=>U.key==="Enter"&&I(),className:"flex-1"}),r.jsx($,{variant:"outline",onClick:D,children:r.jsx(Lte,{className:"h-4 w-4"})}),r.jsx($,{onClick:I,disabled:!o.trim()||f,children:f?"Validating...":"Add Image"})]}),p&&r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Preview:"}),r.jsx("img",{src:p,alt:"Preview",className:"max-w-full h-32 object-cover rounded",onError:()=>x("")})]}),r.jsx("div",{className:"border rounded-lg p-4 bg-blue-50",children:r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:" Tip:"}),' Right-click any image  "Copy image address"  Paste here']})})]})]})}),r.jsx(Xe,{value:"search",className:"space-y-4",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[r.jsx(Qn,{className:"h-5 w-5"}),"Search for Images"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{placeholder:"Search for images...",value:c,onChange:U=>d(U.target.value),onKeyPress:U=>U.key==="Enter"&&A(),className:"flex-1"}),r.jsx($,{onClick:A,disabled:!c.trim(),children:r.jsx(Qn,{className:"h-4 w-4"})})]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(P).map(([U,Q])=>r.jsxs($,{variant:h===U?"default":"outline",size:"sm",onClick:()=>m(U),className:"text-xs justify-start",children:[r.jsx("span",{className:"mr-2",children:Q.icon}),Q.name]},U))}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:" Popular Local Items:"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:k.map(U=>r.jsx($,{variant:"outline",size:"sm",onClick:()=>{d(U);const q=`${P[h].searchUrl}${encodeURIComponent(U)}`;window.open(q,"_blank")},className:"text-xs text-left justify-start",children:U},U))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsx("p",{className:"text-sm font-medium",children:" Sample Images:"}),r.jsxs("select",{value:y,onChange:U=>w(U.target.value),className:"text-xs border rounded px-2 py-1",children:[r.jsx("option",{value:"food",children:"Food"}),r.jsx("option",{value:"electronics",children:"Electronics"}),r.jsx("option",{value:"clothing",children:"Clothing"})]})]}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:(W=_[y])==null?void 0:W.map((U,Q)=>r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:U.url,alt:U.title,className:"w-full h-20 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>V(U.url)}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:r.jsx($,{size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>V(U.url),children:r.jsx(zt,{className:"h-3 w-3"})})}),t.includes(U.url)&&r.jsx("div",{className:"absolute top-1 right-1 bg-green-500 rounded-full p-1",children:r.jsx(Ed,{className:"h-3 w-3 text-white"})})]},Q))})]}),r.jsx("div",{className:"border rounded-lg p-4 bg-orange-50",children:r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:" How to find local items:"}),' Search  Find image  Right-click  "Copy image address"  Go to "Paste URL" tab  Add image']})})]})]})})]}),t.length>0&&r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("p",{className:"text-sm font-medium mb-2",children:["Selected Images (",t.length,"):"]}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.slice(-8).map((U,Q)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:U,alt:`Selected ${Q+1}`,className:"w-full h-16 object-cover rounded"}),r.jsx("div",{className:"absolute top-1 right-1 bg-green-500 rounded-full p-1",children:r.jsx(Ed,{className:"h-3 w-3 text-white"})})]},Q))})]})]})]})}const bbe=ee.object({name:ee.string().min(1,"Product name is required"),description:ee.string().optional(),price:ee.string().min(1,"Price is required"),originalPrice:ee.string().optional(),categoryId:ee.number().min(1,"Category is required"),stock:ee.number().min(0,"Stock must be 0 or greater"),imageUrl:ee.string().optional(),images:ee.array(ee.string()).min(1,"At least 1 image is required").max(6,"Maximum 6 images allowed"),isFastSell:ee.boolean().default(!1),isOnOffer:ee.boolean().default(!1),offerPercentage:ee.number().min(0).max(100).default(0),offerEndDate:ee.string().optional(),productType:ee.enum(["retail","food"]).default("retail"),preparationTime:ee.string().optional(),ingredients:ee.array(ee.string()).default([]),allergens:ee.array(ee.string()).default([]),spiceLevel:ee.string().optional(),isVegetarian:ee.boolean().default(!1),isVegan:ee.boolean().default(!1),nutritionInfo:ee.string().optional()}),wbe=ee.object({name:ee.string().min(1,"Store name is required"),description:ee.string().optional(),address:ee.string().min(1,"Address is required"),latitude:ee.string().optional(),longitude:ee.string().optional(),phone:ee.string().optional(),website:ee.string().url().optional().or(ee.literal("")),logo:ee.string().optional(),coverImage:ee.string().optional(),storeType:ee.enum(["retail","restaurant"]).default("retail"),cuisineType:ee.string().optional(),deliveryTime:ee.string().optional(),minimumOrder:ee.string().optional(),deliveryFee:ee.string().optional(),isDeliveryAvailable:ee.boolean().default(!1),openingHours:ee.string().optional()});function Nbe(){const[e,t]=b.useState("overview"),[n,s]=b.useState(null);b.useState(null),b.useState(!1);const[i,a]=b.useState([]);b.useState([]);const[o,l]=b.useState(!1),[c,d]=b.useState([]),[h,m]=b.useState([]),[f,v]=b.useState(""),[p,x]=b.useState(""),{user:y}=Gt(),{toast:w}=ft(),j=()=>{if(f.trim()&&!c.includes(f.trim())){const F=[...c,f.trim()];d(F),A.setValue("ingredients",F),v("")}},N=F=>{const pe=c.filter(we=>we!==F);d(pe),A.setValue("ingredients",pe)},C=()=>{if(p.trim()&&!h.includes(p.trim())){const F=[...h,p.trim()];m(F),A.setValue("allergens",F),x("")}},P=F=>{const pe=h.filter(we=>we!==F);m(pe),A.setValue("allergens",pe)},{data:k=[]}=Le({queryKey:["/api/stores/owner",y==null?void 0:y.id],queryFn:async()=>{if(!(y!=null&&y.id))return[];const F=await fetch(`/api/stores/owner/${y.id}`);if(!F.ok)throw new Error("Failed to fetch stores");return F.json()},enabled:!!y}),_=k[0],O=(_==null?void 0:_.storeType)==="restaurant"||(_==null?void 0:_.name)&&_.name.toLowerCase().includes("restaurant"),{data:M=[]}=Le({queryKey:[`/api/products/store/${_==null?void 0:_.id}`],queryFn:async()=>{if(!(_!=null&&_.id))return[];const F=await fetch(`/api/products/store/${_.id}`);if(!F.ok)throw new Error("Failed to fetch store products");return F.json()},enabled:!!_}),{data:T=[]}=Le({queryKey:[`/api/orders/store/${_==null?void 0:_.id}`],queryFn:async()=>{if(!(_!=null&&_.id))return[];const F=await fetch(`/api/orders/store/${_.id}`);if(!F.ok)throw new Error("Failed to fetch store orders");return F.json()},enabled:!!_,refetchInterval:3e4,refetchOnWindowFocus:!0}),{data:I=[]}=Le({queryKey:["/api/categories"]});Le({queryKey:["/api/delivery-partners"],queryFn:async()=>{const F=await fetch("/api/delivery-partners");if(!F.ok)throw new Error("Failed to fetch delivery partners");const pe=await F.json(),we=await fetch("/api/users"),Be=we.ok?await we.json():[];return pe.map(Pe=>{const Ee=Be.find(Ie=>Ie.id===Pe.userId);return{...Pe,name:(Ee==null?void 0:Ee.fullName)||`Partner ${Pe.id}`,email:(Ee==null?void 0:Ee.email)||"No email"}})}});const A=fn({resolver:pn(bbe),defaultValues:{name:"",description:"",price:"",originalPrice:"",categoryId:1,stock:0,imageUrl:"",images:[],isFastSell:!1,isOnOffer:!1,offerPercentage:0,offerEndDate:"",preparationTime:"",ingredients:[],allergens:[],spiceLevel:"",isVegetarian:!1,isVegan:!1,nutritionInfo:""}}),V=fn({resolver:pn(wbe),defaultValues:{name:"",description:"",address:"",latitude:"",longitude:"",phone:"",website:"",logo:"",coverImage:"",storeType:"retail",cuisineType:"",deliveryTime:"",minimumOrder:"",deliveryFee:"",isDeliveryAvailable:!1,openingHours:""}}),D=T.length,W=M.length,U=T.reduce((F,pe)=>F+Number(pe.totalAmount),0),Q=T.filter(F=>F.status==="pending").length,q=async F=>{var pe;if(_)try{const we={...F,storeId:_.id,price:F.price,originalPrice:F.originalPrice||void 0,images:F.images||[],imageUrl:((pe=F.images)==null?void 0:pe[0])||void 0,isFastSell:F.isFastSell||!1,isOnOffer:F.isOnOffer||!1,offerPercentage:F.offerPercentage||0,offerEndDate:F.offerEndDate||void 0,productType:(_==null?void 0:_.storeType)==="restaurant"||_!=null&&_.name&&_.name.toLowerCase().includes("restaurant")?"food":"retail",preparationTime:((_==null?void 0:_.storeType)==="restaurant"||_!=null&&_.name&&_.name.toLowerCase().includes("restaurant"))&&F.preparationTime||null,ingredients:(_==null?void 0:_.storeType)==="restaurant"||_!=null&&_.name&&_.name.toLowerCase().includes("restaurant")?c:[],allergens:(_==null?void 0:_.storeType)==="restaurant"||_!=null&&_.name&&_.name.toLowerCase().includes("restaurant")?h:[],spiceLevel:((_==null?void 0:_.storeType)==="restaurant"||_!=null&&_.name&&_.name.toLowerCase().includes("restaurant"))&&F.spiceLevel||null,isVegetarian:((_==null?void 0:_.storeType)==="restaurant"||_!=null&&_.name&&_.name.toLowerCase().includes("restaurant"))&&F.isVegetarian||!1,isVegan:((_==null?void 0:_.storeType)==="restaurant"||_!=null&&_.name&&_.name.toLowerCase().includes("restaurant"))&&F.isVegan||!1,nutritionInfo:((_==null?void 0:_.storeType)==="restaurant"||_!=null&&_.name&&_.name.toLowerCase().includes("restaurant"))&&F.nutritionInfo||null};n?(await zh(`/api/products/${n.id}`,we),w({title:"Product updated successfully"})):(await ea("/api/products",we),w({title:"Product added successfully"})),A.reset(),s(null),l(!1),Br.invalidateQueries({queryKey:[`/api/products/store/${_.id}`]}),Br.invalidateQueries({queryKey:["/api/products"]})}catch(we){w({title:"Error",description:we instanceof Error?we.message:"Failed to save product",variant:"destructive"})}},B=F=>{var pe;s(F),A.reset({name:F.name,description:F.description||"",price:F.price,originalPrice:F.originalPrice||"",categoryId:F.categoryId||0,stock:F.stock||0,imageUrl:((pe=F.images)==null?void 0:pe[0])||"",images:F.images||[],isFastSell:F.isFastSell||!1,isOnOffer:F.isOnOffer||!1,offerPercentage:F.offerPercentage||0,offerEndDate:F.offerEndDate||""}),t("add-product")},z=async F=>{if(confirm("Are you sure you want to delete this product?"))try{await jb(`/api/products/${F}`),w({title:"Product deleted successfully"}),_&&(Br.invalidateQueries({queryKey:[`/api/products/store/${_.id}`]}),Br.invalidateQueries({queryKey:["/api/products"]}))}catch{w({title:"Error",description:"Failed to delete product",variant:"destructive"})}},H=async F=>{try{const pe={...F,ownerId:y.id,phone:F.phone||null,description:F.description||null,website:F.website||null,logo:F.logo||null,coverImage:F.coverImage||null,latitude:F.latitude||null,longitude:F.longitude||null,storeType:F.storeType,cuisineType:F.storeType==="restaurant"&&F.cuisineType||null,deliveryTime:F.storeType==="restaurant"&&F.deliveryTime||null,minimumOrder:F.storeType==="restaurant"&&F.minimumOrder?F.minimumOrder:null,deliveryFee:F.storeType==="restaurant"&&F.deliveryFee?F.deliveryFee:null,isDeliveryAvailable:F.storeType==="restaurant"?F.isDeliveryAvailable:!1,openingHours:F.storeType==="restaurant"&&F.openingHours||null};await ea("/api/stores",pe),w({title:"Store created successfully"}),V.reset(),Br.invalidateQueries({queryKey:["/api/stores"]}),Br.invalidateQueries({queryKey:["/api/stores","owner",y.id]})}catch(pe){w({title:"Error",description:pe instanceof Error?pe.message:"Failed to create store",variant:"destructive"})}},X=async(F,pe)=>{try{await zh(`/api/orders/${F}/status`,{status:pe}),w({title:"Order status updated successfully"}),Br.invalidateQueries({queryKey:[`/api/orders/store/${_==null?void 0:_.id}`]}),Br.invalidateQueries({queryKey:["/api/orders/store"]}),Br.invalidateQueries({queryKey:["/api/orders"]}),_!=null&&_.id&&Br.refetchQueries({queryKey:[`/api/orders/store/${_.id}`]})}catch(we){console.error("Order status update error:",we),w({title:"Error",description:"Failed to update order status",variant:"destructive"})}},ge=async(F,pe,we=!1)=>{try{const Be=await ea("/api/notifications/delivery-assignment",{orderId:F,message:pe,storeId:_==null?void 0:_.id,shopkeeperId:y==null?void 0:y.id,urgent:we,notificationType:"first_accept_first_serve"}),Pe={id:Date.now(),orderId:F,message:pe,urgent:we,sentAt:new Date().toISOString(),status:"sent",acceptedBy:null};a(Ee=>[Pe,...Ee]),w({title:we?"Urgent delivery notification sent":"Delivery notification sent",description:"All available delivery partners have been notified"})}catch{w({title:"Error",description:"Failed to notify delivery partners",variant:"destructive"})}},Se=async(F,pe)=>{try{await ea("/api/notifications/broadcast-delivery",{message:F,orderIds:pe,storeId:_==null?void 0:_.id,shopkeeperId:y==null?void 0:y.id}),w({title:"Broadcast notification sent",description:`Notified delivery partners about ${pe.length} orders`})}catch{w({title:"Error",description:"Failed to send broadcast notification",variant:"destructive"})}};return!y||y.role!=="shopkeeper"?r.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center",children:r.jsx(K,{className:"w-full max-w-md",children:r.jsxs(G,{className:"pt-6 text-center",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-muted-foreground",children:"This page is only accessible to shopkeepers."})]})})}):r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsx("div",{className:"flex justify-between items-center mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Shopkeeper Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:_?`Managing ${_.name}`:"Manage your store"})]})}),r.jsxs(Ds,{value:e,onValueChange:t,children:[r.jsxs(ws,{className:`grid w-full gap-2 h-auto p-2 bg-white dark:bg-gray-800 rounded-lg ${_?"grid-cols-2 md:grid-cols-4":"grid-cols-2"}`,children:[r.jsxs(at,{value:"overview",className:"flex flex-col items-center gap-1 p-3 text-xs font-medium data-[state=active]:bg-orange-100 data-[state=active]:text-orange-600 dark:data-[state=active]:bg-orange-900 dark:data-[state=active]:text-orange-400",children:[r.jsx(si,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),!_&&r.jsxs(at,{value:"create-store",className:"flex flex-col items-center gap-1 p-3 text-xs font-medium data-[state=active]:bg-orange-100 data-[state=active]:text-orange-600 dark:data-[state=active]:bg-orange-900 dark:data-[state=active]:text-orange-400",children:[r.jsx(ar,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Create Store"})]}),_&&r.jsxs(r.Fragment,{children:[r.jsxs(at,{value:"analytics",className:"flex flex-col items-center gap-1 p-3 text-xs font-medium data-[state=active]:bg-orange-100 data-[state=active]:text-orange-600 dark:data-[state=active]:bg-orange-900 dark:data-[state=active]:text-orange-400",children:[r.jsx(wn,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]}),r.jsxs(at,{value:"orders",className:"flex flex-col items-center gap-1 p-3 text-xs font-medium data-[state=active]:bg-orange-100 data-[state=active]:text-orange-600 dark:data-[state=active]:bg-orange-900 dark:data-[state=active]:text-orange-400",children:[r.jsx(_n,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Orders"})]}),r.jsxs(at,{value:"notifications",className:"flex flex-col items-center gap-1 p-3 text-xs font-medium data-[state=active]:bg-orange-100 data-[state=active]:text-orange-600 dark:data-[state=active]:bg-orange-900 dark:data-[state=active]:text-orange-400",children:[r.jsx(Qt,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]})]})]}),r.jsxs(Xe,{value:"overview",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Products"}),r.jsx("p",{className:"text-2xl font-bold",children:W})]}),r.jsx(Ye,{className:"h-8 w-8 text-primary"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),r.jsx("p",{className:"text-2xl font-bold",children:D})]}),r.jsx(_n,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",U.toLocaleString()]})]}),r.jsx(Qr,{className:"h-8 w-8 text-yellow-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Orders"}),r.jsx("p",{className:"text-2xl font-bold",children:Q})]}),r.jsx(jt,{className:"h-8 w-8 text-orange-600"})]})})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Recent Orders"})}),r.jsx(G,{children:T.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-muted-foreground",children:"No orders yet"})}):r.jsx("div",{className:"space-y-4",children:T.slice(0,5).map(F=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:["Order #",F.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:F.customerName}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(F.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-semibold",children:["",Number(F.totalAmount).toLocaleString()]}),r.jsx(ue,{variant:F.status==="delivered"?"default":F.status==="shipped"?"secondary":F.status==="processing"?"outline":"destructive",children:F.status})]})]},F.id))})})]})]}),r.jsxs(Xe,{value:"analytics",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Store Analytics"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(dt,{defaultValue:"30",children:[r.jsx(ot,{className:"w-40",children:r.jsx(ut,{})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"7",children:"Last 7 days"}),r.jsx(oe,{value:"30",children:"Last 30 days"}),r.jsx(oe,{value:"90",children:"Last 90 days"}),r.jsx(oe,{value:"365",children:"Last year"})]})]}),r.jsx($,{variant:"outline",size:"sm",children:r.jsx(wn,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(K,{children:r.jsxs(G,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Conversion Rate"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[D>0?(D/(W*10)*100).toFixed(1):0,"%"]})]}),r.jsx(wn,{className:"h-8 w-8 text-green-600"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"+2.5% from last month"})]})}),r.jsx(K,{children:r.jsxs(G,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Average Order Value"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",D>0?(U/D).toFixed(0):0]})]}),r.jsx(Qr,{className:"h-8 w-8 text-blue-600"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"+5.2% from last month"})]})}),r.jsx(K,{children:r.jsxs(G,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Customer Rating"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Bt,{className:"h-5 w-5 text-yellow-500 fill-current"}),r.jsx("span",{className:"text-2xl font-bold",children:(_==null?void 0:_.rating)||"0.0"})]})]}),r.jsx(Bt,{className:"h-8 w-8 text-yellow-500"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[(_==null?void 0:_.totalReviews)||0," reviews"]})]})}),r.jsx(K,{children:r.jsxs(G,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Growth Rate"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"+12.5%"})]}),r.jsx(wn,{className:"h-8 w-8 text-purple-600"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Monthly growth"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Revenue Trend"}),r.jsx("p",{className:"text-muted-foreground",children:"Monthly revenue performance"})]}),r.jsx(G,{children:r.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 dark:bg-gray-800 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx(wn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),r.jsx("p",{className:"text-muted-foreground",children:"Revenue chart visualization"}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Current total: ",U.toLocaleString()]})]})})})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Order Status Distribution"}),r.jsx("p",{className:"text-muted-foreground",children:"Breakdown of order statuses"})]}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Delivered"})]}),r.jsx("span",{className:"text-sm font-medium",children:T.filter(F=>F.status==="delivered").length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Processing"})]}),r.jsx("span",{className:"text-sm font-medium",children:T.filter(F=>F.status==="processing").length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Pending"})]}),r.jsx("span",{className:"text-sm font-medium",children:T.filter(F=>F.status==="pending").length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Shipped"})]}),r.jsx("span",{className:"text-sm font-medium",children:T.filter(F=>F.status==="shipped").length})]})]})})]})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Top Performing Products"}),r.jsx("p",{className:"text-muted-foreground",children:"Your best-selling products this month"})]}),r.jsx(G,{children:M.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ye,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),r.jsx("p",{className:"text-muted-foreground",children:"No products to analyze"})]}):r.jsx("div",{className:"space-y-4",children:M.slice(0,5).map((F,pe)=>{var we;return r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["#",pe+1]}),r.jsx("img",{src:((we=F.images)==null?void 0:we[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43",alt:F.name,className:"w-10 h-10 object-cover rounded"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:F.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["",Number(F.price).toLocaleString()]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-sm font-medium",children:["Stock: ",F.stock]}),r.jsx(ue,{variant:F.isActive?"default":"secondary",children:F.isActive?"Active":"Inactive"})]})]},F.id)})})})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Business Insights"}),r.jsx("p",{className:"text-muted-foreground",children:"AI-powered recommendations for your store"})]}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg",children:[r.jsx(wn,{className:"h-5 w-5 text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Revenue Opportunity"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Consider adding more products in high-demand categories to increase revenue by an estimated 15-20%."})]})]}),r.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 rounded-lg",children:[r.jsx(Bt,{className:"h-5 w-5 text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Customer Satisfaction"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Your store rating is performing well. Maintain quality service to keep customers happy."})]})]}),r.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-orange-50 rounded-lg",children:[r.jsx(Ye,{className:"h-5 w-5 text-orange-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Inventory Management"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:M.filter(F=>F.stock<10).length>0?`${M.filter(F=>F.stock<10).length} products are running low on stock. Consider restocking soon.`:"Your inventory levels look healthy across all products."})]})]})]})})]})]}),r.jsx(Xe,{value:"inventory",className:"space-y-6",children:r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Add New Product"]}),r.jsx("p",{className:"text-muted-foreground",children:"Add products to your store inventory"})]}),r.jsx(G,{children:r.jsx(Rr,{...A,children:r.jsxs("form",{onSubmit:A.handleSubmit(q),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(ae,{control:A.control,name:"name",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Product Name *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter product name",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:A.control,name:"categoryId",render:({field:F})=>{var pe;return r.jsxs(se,{children:[r.jsx(ce,{children:"Category *"}),r.jsxs(dt,{onValueChange:we=>F.onChange(parseInt(we)),defaultValue:(pe=F.value)==null?void 0:pe.toString(),children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select category"})})}),r.jsx(lt,{children:I.map(we=>r.jsx(oe,{value:we.id.toString(),children:we.name},we.id))})]}),r.jsx(me,{})]})}})]}),r.jsx(ae,{control:A.control,name:"description",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Description"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter product description",className:"min-h-24",...F})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(ae,{control:A.control,name:"price",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Price *"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"0.00",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:A.control,name:"originalPrice",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Original Price"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"0.00",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:A.control,name:"stock",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Stock Quantity *"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter quantity",...F,onChange:pe=>F.onChange(parseInt(pe.target.value)||0)})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:A.control,name:"images",render:({field:F})=>r.jsxs(se,{children:[r.jsx(Ks,{label:"Product Images",maxImages:6,minImages:1,onImagesChange:F.onChange,initialImages:F.value||[],className:"col-span-full"}),r.jsx(me,{})]})}),r.jsxs($,{type:"submit",className:"w-full",children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),n?"Update Product":"Add Product"]})]})})})]})}),r.jsx(Xe,{value:"create-store",className:"space-y-6",children:r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Create Your Store"}),r.jsx("p",{className:"text-muted-foreground",children:"Set up your store to start selling products on Siraha Bazaar"})]}),r.jsx(G,{children:r.jsx(Rr,{...V,children:r.jsxs("form",{onSubmit:V.handleSubmit(H),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:V.control,name:"name",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Store Name"}),r.jsx(he,{children:r.jsx(de,{placeholder:"My Awesome Store",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:V.control,name:"phone",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Phone Number"}),r.jsx(he,{children:r.jsx(de,{placeholder:"+1234567890",...F})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:V.control,name:"description",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Description"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Tell customers about your store...",...F})}),r.jsx(me,{})]})}),r.jsx(R0,{address:V.watch("address"),latitude:V.watch("latitude"),longitude:V.watch("longitude"),onLocationChange:F=>{V.setValue("address",F.address),V.setValue("latitude",F.latitude),V.setValue("longitude",F.longitude)}}),r.jsx(ae,{control:V.control,name:"website",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Website (Optional)"}),r.jsx(he,{children:r.jsx(de,{placeholder:"https://mystore.com",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:V.control,name:"storeType",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Store Type"}),r.jsxs(dt,{onValueChange:F.onChange,defaultValue:F.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select store type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"retail",children:"Retail Store"}),r.jsx(oe,{value:"restaurant",children:"Restaurant"})]})]}),r.jsx(me,{})]})}),V.watch("storeType")==="restaurant"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:V.control,name:"cuisineType",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Cuisine Type"}),r.jsxs(dt,{onValueChange:F.onChange,defaultValue:F.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select cuisine type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"indian",children:"Indian"}),r.jsx(oe,{value:"chinese",children:"Chinese"}),r.jsx(oe,{value:"fast-food",children:"Fast Food"}),r.jsx(oe,{value:"italian",children:"Italian"}),r.jsx(oe,{value:"mexican",children:"Mexican"}),r.jsx(oe,{value:"continental",children:"Continental"}),r.jsx(oe,{value:"desserts",children:"Desserts & Sweets"}),r.jsx(oe,{value:"beverages",children:"Beverages"})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:V.control,name:"deliveryTime",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Delivery Time"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 25-35 mins",...F})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:V.control,name:"minimumOrder",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Minimum Order Amount ()"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 200",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:V.control,name:"deliveryFee",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Delivery Fee ()"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 40 (0 for free)",...F})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:V.control,name:"isDeliveryAvailable",render:({field:F})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base",children:"Delivery Available"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable home delivery for your restaurant"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:F.value,onChange:F.onChange,className:"rounded"})})]})}),r.jsx(ae,{control:V.control,name:"openingHours",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Opening Hours"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 9:00 AM - 11:00 PM",...F})}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(ae,{control:V.control,name:"logo",render:({field:F})=>r.jsxs(se,{children:[r.jsx(Ks,{label:"Store Logo",single:!0,maxImages:1,minImages:0,onImagesChange:pe=>F.onChange(pe[0]||""),initialImages:F.value?[F.value]:[]}),r.jsx(me,{})]})}),r.jsx(ae,{control:V.control,name:"coverImage",render:({field:F})=>r.jsxs(se,{children:[r.jsx(Ks,{label:"Store Cover Image",single:!0,maxImages:1,minImages:0,onImagesChange:pe=>F.onChange(pe[0]||""),initialImages:F.value?[F.value]:[]}),r.jsx(me,{})]})})]}),r.jsx($,{type:"submit",className:"w-full",children:"Create Store"})]})})})]})}),r.jsx(Xe,{value:"products",className:"space-y-6",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Manage Products"}),r.jsxs($,{onClick:()=>t("add-product"),children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})}),r.jsx(G,{children:M.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ye,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No products added yet"}),r.jsx($,{className:"mt-4",onClick:()=>t("add-product"),children:"Add Your First Product"})]}):r.jsx("div",{className:"space-y-4",children:M.map(F=>{var pe;return r.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[r.jsx("img",{src:((pe=F.images)==null?void 0:pe[0])||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100",alt:F.name,className:"w-16 h-16 object-cover rounded-lg"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium",children:F.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Price: ",Number(F.price).toLocaleString()]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Stock: ",F.stock," units"]}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[F.isFastSell&&r.jsx(ue,{variant:"destructive",className:"text-xs",children:" Fast Sell"}),F.isOnOffer&&r.jsxs(ue,{variant:"secondary",className:"text-xs",children:[" ",F.offerPercentage,"% OFF"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ue,{variant:F.isActive?"default":"secondary",children:F.isActive?"Active":"Inactive"}),r.jsx($,{variant:"outline",size:"sm",onClick:()=>B(F),children:r.jsx(us,{className:"h-4 w-4"})}),r.jsx($,{variant:"outline",size:"sm",onClick:()=>z(F.id),children:r.jsx(ei,{className:"h-4 w-4"})})]})]},F.id)})})})]})}),r.jsx(Xe,{value:"add-product",className:"space-y-4",children:r.jsxs(K,{children:[r.jsx(re,{className:"pb-4",children:r.jsxs(ne,{className:"flex items-center gap-2 text-lg",children:[r.jsx(zt,{className:"h-5 w-5"}),n?"Edit Product":"Add New Product"]})}),r.jsx(G,{className:"p-4",children:r.jsx(Rr,{...A,children:r.jsxs("form",{onSubmit:A.handleSubmit(q),className:"space-y-3 max-h-[70vh] overflow-y-auto",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(ae,{control:A.control,name:"name",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Product Name"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter product name",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:A.control,name:"categoryId",render:({field:F})=>{var pe;return r.jsxs(se,{children:[r.jsx(ce,{children:"Category"}),r.jsxs(dt,{onValueChange:we=>F.onChange(parseInt(we)),value:(pe=F.value)==null?void 0:pe.toString(),children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select category"})})}),r.jsx(lt,{children:I.map(we=>r.jsx(oe,{value:we.id.toString(),children:we.name},we.id))})]}),r.jsx(me,{})]})}}),r.jsx(ae,{control:A.control,name:"price",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Price ()"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter price",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:A.control,name:"originalPrice",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Original Price () - Optional"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter original price",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:A.control,name:"stock",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Stock Quantity"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter quantity",...F,onChange:pe=>F.onChange(parseInt(pe.target.value)||0)})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:A.control,name:"images",render:({field:F})=>{var pe;return r.jsxs(se,{children:[r.jsx(ce,{children:"Product Images"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ks,{label:"",maxImages:6,minImages:1,onImagesChange:F.onChange,initialImages:F.value||[],className:"col-span-full"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 border-t border-gray-200"}),r.jsx("span",{className:"text-sm text-gray-500 px-2",children:"or"}),r.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),r.jsx(aL,{onImageSelect:we=>{const Be=F.value||[];Be.length<6&&F.onChange([...Be,we])},selectedImages:F.value||[],maxImages:6-(((pe=F.value)==null?void 0:pe.length)||0),buttonText:"Add Images"})]}),r.jsx(me,{})]})}}),r.jsx(ae,{control:A.control,name:"description",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Description"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter product description",className:"min-h-20",...F})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[r.jsxs("h3",{className:"font-medium text-lg flex items-center gap-2",children:[r.jsx(wn,{className:"h-5 w-5"}),"Special Features"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:A.control,name:"isFastSell",render:({field:F})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base font-medium",children:"Fast Sell Product"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Mark as fast-selling/trending item"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:F.value,onChange:F.onChange,className:"w-4 h-4"})})]})}),r.jsx(ae,{control:A.control,name:"isOnOffer",render:({field:F})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base font-medium",children:"Special Offer"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Apply discount offer"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:F.value,onChange:F.onChange,className:"w-4 h-4"})})]})})]}),A.watch("isOnOffer")&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.jsx(ae,{control:A.control,name:"offerPercentage",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Discount Percentage (%)"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter discount percentage",min:"0",max:"100",...F,onChange:pe=>F.onChange(parseInt(pe.target.value)||0)})}),r.jsx(me,{})]})}),r.jsx(ae,{control:A.control,name:"offerEndDate",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Offer End Date"}),r.jsx(he,{children:r.jsx(de,{type:"date",...F})}),r.jsx(me,{})]})})]})]}),(_==null?void 0:_.storeType)==="restaurant"&&r.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-orange-50",children:[r.jsxs("h3",{className:"font-medium text-lg flex items-center gap-2",children:[r.jsx(Rh,{className:"h-5 w-5"}),"Food Item Details"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:A.control,name:"preparationTime",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Preparation Time"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 15-20 mins",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:A.control,name:"spiceLevel",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Spice Level"}),r.jsxs(dt,{onValueChange:F.onChange,defaultValue:F.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select spice level"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"",children:"Not Applicable"}),r.jsx(oe,{value:"mild",children:"Mild"}),r.jsx(oe,{value:"medium",children:"Medium"}),r.jsx(oe,{value:"hot",children:"Hot"}),r.jsx(oe,{value:"extra-hot",children:"Extra Hot"})]})]}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:A.control,name:"isVegetarian",render:({field:F})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base font-medium",children:"Vegetarian"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Contains no meat or fish"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:F.value,onChange:F.onChange,className:"w-4 h-4"})})]})}),r.jsx(ae,{control:A.control,name:"isVegan",render:({field:F})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base font-medium",children:"Vegan"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Contains no animal products"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:F.value,onChange:F.onChange,className:"w-4 h-4"})})]})})]}),r.jsx(ae,{control:A.control,name:"nutritionInfo",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Nutrition Information (Optional)"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"e.g., Calories: 350, Protein: 15g, Carbs: 45g, Fat: 12g",className:"min-h-20",...F})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsxs($,{type:"submit",className:"flex-1 h-10",size:"sm",children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),n?"Update Product":"Add Product"]}),n&&r.jsx($,{type:"button",variant:"outline",size:"sm",className:"h-10",onClick:()=>{s(null),A.reset()},children:"Cancel"})]})]})})})]})}),r.jsx(Xe,{value:"store",className:"space-y-6",children:_?r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(ar,{className:"h-5 w-5"}),"Store Information"]}),r.jsx("p",{className:"text-muted-foreground",children:"Manage your store details and settings"})]}),r.jsxs(G,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Store Name"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:_.name})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Store Type"}),r.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:_.storeType})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Address"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:_.address})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Phone"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:_.phone||"Not set"})]}),_.storeType==="restaurant"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Cuisine Type"}),r.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:_.cuisineType||"Not set"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Delivery Time"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:_.deliveryTime||"Not set"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Minimum Order"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["",_.minimumOrder||"Not set"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Delivery Fee"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["",_.deliveryFee||"Not set"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Rating"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bt,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[_.rating||"0.0"," (",_.totalReviews||0," reviews)"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Status"}),r.jsx(ue,{variant:_.isApproved?"default":"secondary",children:_.isApproved?"Approved":"Pending Approval"})]})]}),r.jsx(hn,{}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs($,{variant:"outline",className:"flex-1",children:[r.jsx(us,{className:"h-4 w-4 mr-2"}),"Edit Store Details"]}),r.jsxs($,{variant:"outline",className:"flex-1",children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),"Update Location"]})]})]})]}):r.jsx(K,{children:r.jsxs(G,{className:"text-center py-8",children:[r.jsx(ar,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Please create a store first"}),r.jsx($,{className:"mt-4",onClick:()=>t("create-store"),children:"Create Store"})]})})}),r.jsx(Xe,{value:"orders",className:"space-y-6",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Order Management"})}),r.jsx(G,{children:T.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(_n,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No orders yet"})]}):r.jsx("div",{className:"space-y-4",children:T.map(F=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold",children:["Order #",F.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[F.customerName,"  ",F.phone]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(F.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right space-y-2",children:[r.jsxs("p",{className:"font-semibold text-lg",children:["",Number(F.totalAmount).toLocaleString()]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(dt,{value:F.status,onValueChange:pe=>X(F.id,pe),children:[r.jsx(ot,{className:"w-32",children:r.jsx(ut,{})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"pending",children:"Pending"}),r.jsx(oe,{value:"processing",children:"Processing"}),r.jsx(oe,{value:"ready_for_pickup",children:"Ready for Pickup"}),r.jsx(oe,{value:"assigned_for_delivery",children:"Assigned for Delivery"}),r.jsx(oe,{value:"shipped",children:"Shipped"}),r.jsx(oe,{value:"delivered",children:"Delivered"}),r.jsx(oe,{value:"cancelled",children:"Cancelled"})]})]})}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[F.status!=="assigned_for_delivery"&&F.status!=="delivered"&&F.status!=="cancelled"&&r.jsx("div",{className:"flex gap-2",children:r.jsxs($,{onClick:()=>{ge(F.id,` New Order Available: Order #${F.id} from ${_==null?void 0:_.name}. Customer: ${F.customerName}. Total: ${F.totalAmount}. First to accept gets delivery!`,!1)},className:"bg-orange-600 hover:bg-orange-700 text-white",children:[r.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Send to All Partners (First Accept)"]})}),F.status==="assigned_for_delivery"&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 w-full",children:[r.jsx("p",{className:"text-sm text-green-700 font-medium",children:" Delivery partner assigned and notified"}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Order is being processed for delivery"})]})]})]})]}),r.jsx(hn,{className:"my-3"}),F.items&&F.items.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Order Items:"}),r.jsx("div",{className:"space-y-2",children:F.items.map(pe=>{var Pe,Ee;const Be=(()=>{var Ie,Ne;return(Ie=pe.product)!=null&&Ie.images&&pe.product.images.length>0?pe.product.images[0]:(Ne=pe.product)!=null&&Ne.imageUrl?pe.product.imageUrl:null})();return r.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"w-12 h-12 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0 relative",children:[Be?r.jsx("img",{src:Be,alt:((Pe=pe.product)==null?void 0:Pe.name)||"Product",className:"w-full h-full object-cover",onError:Ie=>{var xe;Ie.currentTarget.classList.add("hidden");const Ne=(xe=Ie.currentTarget.parentElement)==null?void 0:xe.querySelector(".fallback-icon");Ne&&Ne.classList.remove("hidden")}}):null,r.jsx(Ye,{className:`fallback-icon w-6 h-6 text-gray-400 absolute inset-0 m-auto ${Be?"hidden":"flex"}`})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:((Ee=pe.product)==null?void 0:Ee.name)||`Product #${pe.productId}`}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Qty: ",pe.quantity,"  ",Number(pe.price).toLocaleString()," = ",(pe.quantity*Number(pe.price)).toLocaleString()]})]})]},pe.id)})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Delivery Address:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:F.shippingAddress})]})]},F.id))})})]})}),r.jsxs(Xe,{value:"notifications",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ready for Pickup"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:T.filter(F=>F.status==="ready_for_pickup").length})]}),r.jsx(yt,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Processing"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:T.filter(F=>F.status==="processing").length})]}),r.jsx(xd,{className:"h-8 w-8 text-blue-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Notifications Sent"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.length})]}),r.jsx(Qt,{className:"h-8 w-8 text-purple-600"})]})})})]}),r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-5 w-5"}),"First Accept First Serve - Delivery Notifications"]}),r.jsx("p",{className:"text-muted-foreground",children:"Send notifications to all available delivery partners. The first one to accept gets the delivery."})]}),r.jsxs(G,{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap gap-3 p-4 bg-gray-50 rounded-lg",children:[r.jsxs($,{onClick:()=>{const F=T.filter(pe=>pe.status==="ready_for_pickup");F.length>0&&Se(` URGENT: ${F.length} orders ready for immediate pickup from ${_==null?void 0:_.name}`,F.map(pe=>pe.id))},disabled:T.filter(F=>F.status==="ready_for_pickup").length===0,className:"bg-red-600 hover:bg-red-700",children:[r.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Broadcast All Ready Orders (Urgent)"]}),r.jsxs($,{variant:"outline",onClick:()=>{const F=T.filter(pe=>pe.status==="processing");F.length>0&&Se(` ${F.length} orders being prepared at ${_==null?void 0:_.name}`,F.map(pe=>pe.id))},disabled:T.filter(F=>F.status==="processing").length===0,children:[r.jsx(Dd,{className:"h-4 w-4 mr-2"}),"Notify About Processing Orders"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Individual Order Notifications"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:T.filter(F=>F.status==="processing"||F.status==="ready_for_pickup").map(F=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-3 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium",children:["Order #",F.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:F.customerName}),r.jsx("p",{className:"text-xs text-muted-foreground",children:F.phone}),r.jsx(ue,{variant:F.status==="ready_for_pickup"?"default":"secondary",className:F.status==="ready_for_pickup"?"bg-green-100 text-green-800":"",children:F.status.replace("_"," ").toUpperCase()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-semibold",children:["",Number(F.totalAmount).toLocaleString()]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(F.createdAt).toLocaleDateString()})]})]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsxs("p",{className:"truncate",children:[" ",F.shippingAddress]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs($,{size:"sm",className:"w-full bg-red-600 hover:bg-red-700",onClick:()=>ge(F.id,` URGENT PICKUP: Order #${F.id} ready NOW from ${_==null?void 0:_.name}! Customer: ${F.customerName}, Amount: ${F.totalAmount}. First to accept gets this delivery!`,!0),children:[r.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Send Urgent Alert (First Accept First Serve)"]}),r.jsxs($,{size:"sm",variant:"outline",className:"w-full",onClick:()=>ge(F.id,` Pickup Available: Order #${F.id} at ${_==null?void 0:_.name}. Customer: ${F.customerName}, Amount: ${F.totalAmount}. Accept to claim this delivery!`,!1),children:[r.jsx(Dd,{className:"h-4 w-4 mr-2"}),"Send Standard Notification"]})]}),F.deliveryPartner&&r.jsxs("div",{className:"mt-4 border-t pt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h5",{className:"font-semibold flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4"}),"Live Delivery Tracking"]}),r.jsx(ue,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Live"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"Contact Delivery Partner:"}),r.jsxs("a",{href:`tel:${F.deliveryPartner.phone}`,className:"text-blue-600 hover:underline ml-2",children:[r.jsx(Vt,{className:"inline h-4 w-4 mr-1"}),F.deliveryPartner.phone]})]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Partner:"," ",F.deliveryPartner.name||"Assigned Partner"]})]}),r.jsx("div",{className:"h-64 rounded-lg overflow-hidden border",children:r.jsx(Pg,{deliveryId:F.id,userType:"shopkeeper"})})]})]},F.id))}),T.filter(F=>F.status==="processing"||F.status==="ready_for_pickup").length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ct,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No orders ready for delivery notifications"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'Orders with "Processing" or "Ready for Pickup" status will appear here'})]})]}),i.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg",children:"Recent Notifications"}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:i.slice(0,10).map(F=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[F.urgent?r.jsx(Nr,{className:"h-4 w-4 text-red-500"}):r.jsx(Qt,{className:"h-4 w-4 text-blue-500"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium",children:["Order #",F.orderId]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(F.sentAt).toLocaleString()})]})]}),r.jsx(ue,{variant:F.urgent?"destructive":"secondary",children:F.urgent?"Urgent":"Standard"})]},F.id))})]})]})]})]})]}),_&&r.jsxs(Dr,{open:o,onOpenChange:l,children:[r.jsx(Ps,{asChild:!0,children:r.jsx($,{size:"lg",className:"fixed bottom-20 right-6 h-14 w-14 rounded-full shadow-lg bg-orange-500 hover:bg-orange-600 text-white z-50",onClick:()=>{s(null),A.reset()},children:r.jsx(zt,{className:"h-6 w-6"})})}),r.jsxs(Ar,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Er,{children:[r.jsxs(Or,{className:"flex items-center gap-2",children:[r.jsx(zt,{className:"h-5 w-5"}),n?"Edit Product":"Add New Product"]}),r.jsx(Us,{children:n?"Update your product details and images":"Add a new product to your store with images and details"})]}),r.jsx("div",{className:"mt-4",children:r.jsx(Rr,{...A,children:r.jsxs("form",{onSubmit:A.handleSubmit(q),className:"space-y-6",children:[r.jsx(ae,{control:A.control,name:"name",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:O?"Menu Item Name *":"Product Name *"}),r.jsx(he,{children:r.jsx(de,{placeholder:O?"Enter menu item name":"Enter product name",className:"h-11",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:A.control,name:"categoryId",render:({field:F})=>{var pe;return r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Category *"}),r.jsxs(dt,{onValueChange:we=>F.onChange(parseInt(we)),defaultValue:(pe=F.value)==null?void 0:pe.toString(),children:[r.jsx(he,{children:r.jsx(ot,{className:"h-11",children:r.jsx(ut,{placeholder:"Select a category"})})}),r.jsx(lt,{children:I.length>0?I.map(we=>r.jsx(oe,{value:we.id.toString(),children:we.name},we.id)):r.jsx(oe,{value:"1",disabled:!0,children:"Loading categories..."})})]}),r.jsx(me,{})]})}}),r.jsx(ae,{control:A.control,name:"description",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Description"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter product description",rows:4,...F})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsx(ae,{control:A.control,name:"price",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Price *"}),r.jsx(he,{children:r.jsx(de,{type:"number",step:"0.01",placeholder:"0.00",className:"h-11",...F})}),r.jsx(me,{})]})}),r.jsx(ae,{control:A.control,name:"originalPrice",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Original Price"}),r.jsx(he,{children:r.jsx(de,{type:"number",step:"0.01",placeholder:"0.00",className:"h-11",...F})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:A.control,name:"stock",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Stock Quantity *"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter stock quantity",className:"h-11",...F,onChange:pe=>F.onChange(parseInt(pe.target.value)||0)})}),r.jsx(me,{})]})}),r.jsx(ae,{control:A.control,name:"images",render:({field:F})=>{var pe;return r.jsxs(se,{children:[r.jsx(ce,{children:"Product Images"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ks,{label:"",maxImages:6,minImages:1,onImagesChange:F.onChange,initialImages:F.value||[],className:"col-span-full"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 border-t border-gray-200"}),r.jsx("span",{className:"text-sm text-gray-500 px-2",children:"or"}),r.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),r.jsx(aL,{onImageSelect:we=>{const Be=F.value||[];Be.length<6&&F.onChange([...Be,we])},selectedImages:F.value||[],maxImages:6-(((pe=F.value)==null?void 0:pe.length)||0),buttonText:"Add Images"})]}),r.jsx(me,{})]})}}),O&&r.jsxs("div",{className:"space-y-6 border-t pt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-orange-600",children:"Food Item Details"}),r.jsx(ae,{control:A.control,name:"preparationTime",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Preparation Time"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 15-20 minutes",className:"h-11",...F})}),r.jsx(me,{})]})}),r.jsxs("div",{children:[r.jsx(ce,{className:"text-base font-medium",children:"Ingredients"}),r.jsxs("div",{className:"mt-2 space-y-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{placeholder:"Enter ingredient",value:f,onChange:F=>v(F.target.value),className:"h-11",onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),j())}),r.jsx($,{type:"button",onClick:j,className:"h-11",children:r.jsx(zt,{className:"h-4 w-4"})})]}),c.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((F,pe)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:[F,r.jsx($,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-orange-200",onClick:()=>N(F),children:r.jsx(Fr,{className:"h-3 w-3"})})]},pe))})]})]}),r.jsxs("div",{children:[r.jsx(ce,{className:"text-base font-medium",children:"Allergens"}),r.jsxs("div",{className:"mt-2 space-y-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{placeholder:"Enter allergen",value:p,onChange:F=>x(F.target.value),className:"h-11",onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),C())}),r.jsx($,{type:"button",onClick:C,className:"h-11",children:r.jsx(zt,{className:"h-4 w-4"})})]}),h.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:h.map((F,pe)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:[F,r.jsx($,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-red-200",onClick:()=>P(F),children:r.jsx(Fr,{className:"h-3 w-3"})})]},pe))})]})]}),r.jsx(ae,{control:A.control,name:"spiceLevel",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Spice Level"}),r.jsxs(dt,{onValueChange:F.onChange,defaultValue:F.value,children:[r.jsx(he,{children:r.jsx(ot,{className:"h-11",children:r.jsx(ut,{placeholder:"Select spice level"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"mild",children:"Mild"}),r.jsx(oe,{value:"medium",children:"Medium"}),r.jsx(oe,{value:"hot",children:"Hot"}),r.jsx(oe,{value:"extra-hot",children:"Extra Hot"})]})]}),r.jsx(me,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsx(ae,{control:A.control,name:"isVegetarian",render:({field:F})=>r.jsxs(se,{className:"flex flex-row items-center space-x-3 space-y-0",children:[r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:F.value,onChange:F.onChange,className:"h-4 w-4"})}),r.jsx(ce,{className:"text-base font-medium",children:"Vegetarian"})]})}),r.jsx(ae,{control:A.control,name:"isVegan",render:({field:F})=>r.jsxs(se,{className:"flex flex-row items-center space-x-3 space-y-0",children:[r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:F.value,onChange:F.onChange,className:"h-4 w-4"})}),r.jsx(ce,{className:"text-base font-medium",children:"Vegan"})]})})]}),r.jsx(ae,{control:A.control,name:"nutritionInfo",render:({field:F})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Nutrition Information"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter nutrition information (optional)",rows:3,...F})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsxs($,{type:"submit",className:"flex-1",children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),n?"Update Product":"Add Product"]}),r.jsx($,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"})]})]})})})]})]})]})})}const Sbe=ee.object({name:ee.string().min(1,"Product name is required"),description:ee.string().optional(),price:ee.string().min(1,"Price is required"),originalPrice:ee.string().optional(),categoryId:ee.number().min(1,"Category is required"),stock:ee.number().min(0,"Stock must be 0 or greater"),imageUrl:ee.string().optional(),images:ee.array(ee.string()).min(1,"At least 1 image is required").max(6,"Maximum 6 images allowed"),isFastSell:ee.boolean().default(!1),isOnOffer:ee.boolean().default(!1),offerPercentage:ee.number().min(0).max(100).default(0),offerEndDate:ee.string().optional(),preparationTime:ee.string().optional(),ingredients:ee.array(ee.string()).default([]),allergens:ee.array(ee.string()).default([]),spiceLevel:ee.string().optional(),isVegetarian:ee.boolean().default(!1),isVegan:ee.boolean().default(!1),nutritionInfo:ee.string().optional()});function _be(){const{toast:e}=ft(),t=on(),[n,s]=b.useState(""),[i,a]=b.useState("all"),[o,l]=b.useState("all"),[c,d]=b.useState(null),[h,m]=b.useState(!1),{user:f}=Gt(),v=fn({resolver:pn(Sbe),defaultValues:{name:"",description:"",price:"",originalPrice:"",categoryId:1,stock:0,imageUrl:"",images:[],isFastSell:!1,isOnOffer:!1,offerPercentage:0,offerEndDate:"",preparationTime:"",ingredients:[],allergens:[],spiceLevel:"",isVegetarian:!1,isVegan:!1,nutritionInfo:""}}),{data:p=[]}=Le({queryKey:["/api/categories"]}),{data:x=[],isLoading:y,error:w}=Le({queryKey:["/api/stores/owner",f==null?void 0:f.id],queryFn:async()=>{if(!(f!=null&&f.id))return[];try{const A=await fetch(`/api/stores/owner/${f.id}`);if(!A.ok){if(A.status===404)return[];throw new Error(`Failed to fetch stores: ${A.status}`)}const V=await A.json();return console.log("Stores fetched for user:",f.id,"Count:",V.length),Array.isArray(V)?V:[]}catch(A){throw console.error("Store fetch error:",A),A}},enabled:!!f&&f.role==="shopkeeper"&&f.status==="active"}),j=x[0],{data:N=[],isLoading:C,error:P}=Le({queryKey:[`/api/products/store/${j==null?void 0:j.id}`],queryFn:async()=>{if(!(j!=null&&j.id))return[];try{const A=await fetch(`/api/products/store/${j.id}`);if(!A.ok){if(A.status===404)return[];throw new Error(`Failed to fetch store products: ${A.status}`)}const V=await A.json();return console.log("Products fetched for store:",j.id,"Count:",V.length),Array.isArray(V)?V:[]}catch(A){throw console.error("Products fetch error:",A),A}},enabled:!!j}),k=N.filter(A=>{const V=A.name.toLowerCase().includes(n.toLowerCase()),D=i==="all"||A.categoryId.toString()===i,W=o==="all"||o==="low"&&A.stock<=5||o==="out"&&A.stock===0||o==="available"&&A.stock>5;return V&&D&&W}),_=N.filter(A=>A.stock<=5&&A.stock>0),O=N.filter(A=>A.stock===0),M=async A=>{var V;if(j)try{const D={...A,storeId:j.id,price:A.price,originalPrice:A.originalPrice||void 0,images:A.images||[],imageUrl:((V=A.images)==null?void 0:V[0])||void 0,isFastSell:A.isFastSell||!1,isOnOffer:A.isOnOffer||!1,offerPercentage:A.offerPercentage||0,offerEndDate:A.offerEndDate||void 0,productType:j.storeType==="restaurant"?"food":"retail",preparationTime:j.storeType==="restaurant"&&A.preparationTime||null,ingredients:j.storeType==="restaurant"?A.ingredients||[]:[],allergens:j.storeType==="restaurant"?A.allergens||[]:[],spiceLevel:j.storeType==="restaurant"&&A.spiceLevel||null,isVegetarian:j.storeType==="restaurant"&&A.isVegetarian||!1,isVegan:j.storeType==="restaurant"&&A.isVegan||!1,nutritionInfo:j.storeType==="restaurant"&&A.nutritionInfo||null};if(c){if(!(await fetch(`/api/products/${c.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})).ok)throw new Error("Failed to update product");e({title:"Product updated successfully"})}else{if(!(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})).ok)throw new Error("Failed to create product");e({title:"Product added successfully"})}v.reset(),d(null),m(!1),t.invalidateQueries({queryKey:[`/api/products/store/${j.id}`]}),t.invalidateQueries({queryKey:["/api/products"]})}catch(D){e({title:"Error",description:D instanceof Error?D.message:"Failed to save product",variant:"destructive"})}},T=A=>{var V;d(A),v.reset({name:A.name,description:A.description||"",price:A.price,originalPrice:A.originalPrice||"",categoryId:A.categoryId||1,stock:A.stock||0,imageUrl:((V=A.images)==null?void 0:V[0])||"",images:A.images||[],isFastSell:A.isFastSell||!1,isOnOffer:A.isOnOffer||!1,offerPercentage:A.offerPercentage||0,offerEndDate:"",preparationTime:A.preparationTime||"",spiceLevel:A.spiceLevel||"",isVegetarian:A.isVegetarian||!1,isVegan:A.isVegan||!1}),m(!0)},I=async A=>{if(confirm("Are you sure you want to delete this product?"))try{if(!(await fetch(`/api/products/${A}`,{method:"DELETE"})).ok)throw new Error("Failed to delete product");e({title:"Product deleted successfully"}),j&&(t.invalidateQueries({queryKey:[`/api/products/store/${j.id}`]}),t.invalidateQueries({queryKey:["/api/products"]}))}catch{e({title:"Error",description:"Failed to delete product",variant:"destructive"})}};return!f||f.role!=="shopkeeper"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-md",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center text-red-600",children:"Access Denied"})}),r.jsxs(G,{children:[r.jsx("p",{className:"text-center text-muted-foreground",children:"You need to be a shopkeeper to access inventory management."}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx(Ae,{href:"/",className:"text-primary hover:underline",children:"Go back to homepage"})})]})]})}):f.role==="shopkeeper"&&f.status!=="active"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-lg",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center text-yellow-600",children:"Pending Admin Approval"})}),r.jsxs(G,{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex items-center justify-center",children:r.jsx(Ye,{className:"h-8 w-8 text-yellow-600"})}),r.jsx("p",{className:"text-muted-foreground",children:"Your seller account is pending approval from our admin team. You cannot access inventory management until approved."}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:r.jsx(Ae,{href:"/",children:r.jsx($,{variant:"outline",children:"Go to Homepage"})})})]})]})}):y?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsx(K,{className:"w-full max-w-md",children:r.jsxs(G,{className:"pt-6 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading your store information..."})]})})}):w?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-md",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center text-red-600",children:"Error Loading Store"})}),r.jsxs(G,{className:"text-center",children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:"Failed to load your store information. Please try again."}),r.jsx($,{onClick:()=>window.location.reload(),children:"Retry"})]})]})}):j?r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center py-3 sm:py-4 gap-3 sm:gap-0",children:[r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[r.jsx(Ye,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Inventory Management"}),r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:j.name})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 w-full sm:w-auto",children:[r.jsxs($,{onClick:()=>m(!0),className:"bg-primary flex-1 sm:flex-none text-sm",children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Product"]}),r.jsxs($,{variant:"outline",size:"sm",className:"hidden sm:flex",children:[r.jsx(Qd,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[r.jsx(ne,{className:"text-xs sm:text-sm font-medium",children:"Total Products"}),r.jsx(Ye,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})]}),r.jsxs(G,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold",children:N.length}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.jsx(wn,{className:"h-3 w-3 inline mr-1"}),"Active inventory items"]})]})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[r.jsx(ne,{className:"text-xs sm:text-sm font-medium",children:"Low Stock Alert"}),r.jsx(sc,{className:"h-3 w-3 sm:h-4 sm:w-4 text-orange-500"})]}),r.jsxs(G,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-orange-600",children:_.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Items with 5 units remaining"})]})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[r.jsx(ne,{className:"text-xs sm:text-sm font-medium",children:"Out of Stock"}),r.jsx(Zte,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500"})]}),r.jsxs(G,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-red-600",children:O.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Items requiring restocking"})]})]})]}),r.jsxs(K,{className:"mb-4 sm:mb-6",children:[r.jsx(re,{className:"p-3 sm:p-6",children:r.jsx(ne,{className:"text-lg sm:text-xl",children:"Product Management"})}),r.jsxs(G,{className:"p-3 sm:p-6",children:[r.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 mb-4 sm:mb-6",children:[r.jsx("div",{className:"flex-1",children:r.jsx(de,{placeholder:"Search products...",value:n,onChange:A=>s(A.target.value),className:"w-full text-sm"})}),r.jsxs("div",{className:"flex gap-2 sm:gap-4 flex-col sm:flex-row",children:[r.jsxs(dt,{value:i,onValueChange:a,children:[r.jsx(ot,{className:"w-full sm:w-48",children:r.jsx(ut,{placeholder:"All Categories"})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Categories"}),Array.isArray(p)&&p.map(A=>r.jsx(oe,{value:A.id.toString(),children:A.name},A.id))]})]}),r.jsxs(dt,{value:o,onValueChange:l,children:[r.jsx(ot,{className:"w-full sm:w-48",children:r.jsx(ut,{placeholder:"Stock Status"})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Stock"}),r.jsxs(oe,{value:"available",children:["Available (",">","5)"]}),r.jsx(oe,{value:"low",children:"Low Stock (5)"}),r.jsx(oe,{value:"out",children:"Out of Stock"})]})]})]})]}),r.jsx("div",{className:"space-y-3 sm:space-y-4",children:k.length>0?k.map(A=>{var V;return r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 border rounded-lg hover:shadow-md transition-shadow gap-3 sm:gap-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[r.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:(V=A.images)!=null&&V[0]?r.jsx("img",{src:A.images[0],alt:A.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(Ye,{className:"h-4 w-4 sm:h-6 sm:w-6 text-gray-400"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-sm sm:text-base truncate",children:A.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["",A.price]}),r.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[r.jsxs(ue,{variant:A.stock===0?"destructive":A.stock<=5?"secondary":"default",className:"text-xs",children:["Stock: ",A.stock]}),A.isOnOffer&&r.jsxs(ue,{variant:"outline",className:"text-green-600 text-xs",children:[A.offerPercentage,"% OFF"]}),A.isFastSell&&r.jsx(ue,{variant:"outline",className:"text-blue-600 text-xs",children:"Fast Sell"})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 justify-end sm:justify-start",children:[r.jsxs($,{onClick:()=>T(A),variant:"outline",size:"sm",className:"flex-1 sm:flex-none",children:[r.jsx(us,{className:"h-4 w-4"}),r.jsx("span",{className:"ml-1 sm:hidden",children:"Edit"})]}),r.jsxs($,{onClick:()=>I(A.id),variant:"destructive",size:"sm",className:"flex-1 sm:flex-none",children:[r.jsx(ei,{className:"h-4 w-4"}),r.jsx("span",{className:"ml-1 sm:hidden",children:"Delete"})]})]})]},A.id)}):r.jsxs("div",{className:"text-center py-6 sm:py-8",children:[r.jsx(Ye,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:n||i!=="all"||o!=="all"?"No products match your filters":"No products in inventory"}),!h&&r.jsxs($,{onClick:()=>m(!0),className:"mt-4 text-sm",children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})]})})]})]}),h&&r.jsxs(K,{children:[r.jsx(re,{className:"p-3 sm:p-6",children:r.jsxs(ne,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[r.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5"}),c?"Edit Product":"Add New Product"]})}),r.jsx(G,{className:"p-3 sm:p-6",children:r.jsx(Rr,{...v,children:r.jsxs("form",{onSubmit:v.handleSubmit(M),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[r.jsx(ae,{control:v.control,name:"name",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Product Name *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter product name",...A})}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"categoryId",render:({field:A})=>{var V;return r.jsxs(se,{children:[r.jsx(ce,{children:"Category *"}),r.jsxs(dt,{onValueChange:D=>A.onChange(parseInt(D)),defaultValue:(V=A.value)==null?void 0:V.toString(),children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select category"})})}),r.jsx(lt,{children:Array.isArray(p)&&p.map(D=>r.jsx(oe,{value:D.id.toString(),children:D.name},D.id))})]}),r.jsx(me,{})]})}})]}),r.jsx(ae,{control:v.control,name:"description",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Description"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter product description",className:"min-h-24",...A})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx(ae,{control:v.control,name:"price",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Price *"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"0.00",...A})}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"originalPrice",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Original Price"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"0.00",...A})}),r.jsx(me,{})]})}),r.jsx(ae,{control:v.control,name:"stock",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Stock Quantity *"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"Enter quantity",...A,onChange:V=>A.onChange(parseInt(V.target.value)||0)})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:v.control,name:"images",render:({field:A})=>r.jsxs(se,{children:[r.jsx(Ks,{label:"Product Images",maxImages:6,minImages:1,onImagesChange:A.onChange,initialImages:A.value||[],className:"col-span-full"}),r.jsx(me,{})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4",children:[r.jsx($,{type:"button",variant:"outline",onClick:()=>{m(!1),d(null),v.reset()},className:"order-2 sm:order-1",children:"Cancel"}),r.jsxs($,{type:"submit",className:"order-1 sm:order-2",children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),c?"Update Product":"Add Product"]})]})]})})})]})]})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-md",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center",children:"No Store Found"})}),r.jsxs(G,{className:"text-center",children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:"You need to create a store before managing inventory."}),r.jsx(Ae,{href:"/seller/store",children:r.jsx($,{children:"Create Store"})})]})]})})}const Pbe=ee.object({storeId:ee.number(),title:ee.string().min(1,"Title is required"),description:ee.string().optional(),discountType:ee.enum(["percentage","fixed_amount"]),discountValue:ee.number().min(.01,"Discount value must be greater than 0"),minOrderAmount:ee.number().min(0).optional(),maxDiscountAmount:ee.number().min(0).optional(),startDate:ee.string(),endDate:ee.string(),usageLimit:ee.number().min(1).optional(),isActive:ee.boolean().default(!0)});function Cbe(){const{toast:e}=ft(),t=on(),{user:n}=Gt(),[s,i]=b.useState(""),[a,o]=b.useState("all"),[l,c]=b.useState(!1),[d,h]=b.useState(null),[m,f]=b.useState(!1);if(!n||n.role!=="shopkeeper")return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-md",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center text-red-600",children:"Access Denied"})}),r.jsx(G,{children:r.jsx("p",{className:"text-center text-muted-foreground",children:"You need to be a shopkeeper to access promotions management."})})]})});if(n.role==="shopkeeper"&&n.status!=="active")return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-lg",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center text-yellow-600",children:"Pending Admin Approval"})}),r.jsxs(G,{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex items-center justify-center",children:r.jsx(jt,{className:"h-8 w-8 text-yellow-600"})}),r.jsx("p",{className:"text-muted-foreground",children:"Your seller account is pending approval from our admin team. You cannot access promotions management until approved."}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:r.jsx(Ae,{href:"/",children:r.jsx($,{variant:"outline",children:"Go to Homepage"})})})]})]})});const v=(n==null?void 0:n.id)||1,p=fn({resolver:pn(Pbe),defaultValues:{storeId:v,discountType:"percentage",isActive:!0}}),{data:x,isLoading:y}=Le({queryKey:["/api/seller/promotions",v]}),w=pt({mutationFn:async A=>await ea("/api/seller/promotions",A),onSuccess:()=>{e({title:"Promotion Created",description:"Your promotion has been created successfully"}),t.invalidateQueries({queryKey:["/api/seller/promotions",v]}),c(!1),p.reset()},onError:()=>{e({title:"Error",description:"Failed to create promotion",variant:"destructive"})}}),j=pt({mutationFn:async({id:A,data:V})=>await zh(`/api/seller/promotions/${A}`,V),onSuccess:()=>{e({title:"Promotion Updated",description:"Your promotion has been updated successfully"}),t.invalidateQueries({queryKey:["/api/seller/promotions",v]}),f(!1),h(null)},onError:()=>{e({title:"Error",description:"Failed to update promotion",variant:"destructive"})}}),N=pt({mutationFn:async A=>await jb(`/api/seller/promotions/${A}`),onSuccess:()=>{e({title:"Promotion Deleted",description:"Your promotion has been deleted successfully"}),t.invalidateQueries({queryKey:["/api/seller/promotions",v]})},onError:()=>{e({title:"Error",description:"Failed to delete promotion",variant:"destructive"})}}),C=A=>{w.mutate(A)},P=A=>{h(A),p.reset({storeId:A.storeId,title:A.title,description:A.description||"",discountType:A.discountType,discountValue:parseFloat(A.discountValue),minOrderAmount:A.minOrderAmount?parseFloat(A.minOrderAmount):void 0,maxDiscountAmount:A.maxDiscountAmount?parseFloat(A.maxDiscountAmount):void 0,startDate:A.startDate.split("T")[0],endDate:A.endDate.split("T")[0],usageLimit:A.usageLimit||void 0,isActive:A.isActive}),f(!0)},k=A=>{d&&j.mutate({id:d.id,data:A})},_=A=>{confirm("Are you sure you want to delete this promotion?")&&N.mutate(A)},O=(x==null?void 0:x.filter(A=>{const V=A.title.toLowerCase().includes(s.toLowerCase()),D=new Date,W=new Date(A.startDate),U=new Date(A.endDate);let Q=!0;return a==="active"?Q=A.isActive&&D>=W&&D<=U:a==="inactive"?Q=!A.isActive:a==="expired"?Q=D>U:a==="scheduled"&&(Q=D<W),V&&Q}))||[],M=(x==null?void 0:x.filter(A=>{const V=new Date,D=new Date(A.startDate),W=new Date(A.endDate);return A.isActive&&V>=D&&V<=W}).length)||0,T=(x==null?void 0:x.reduce((A,V)=>A+V.usedCount,0))||0,I=(x==null?void 0:x.filter(A=>{const V=new Date(A.endDate),D=new Date;return D.setDate(D.getDate()+3),V<=D&&V>new Date}).length)||0;return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Wp,{className:"h-8 w-8 text-primary"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Promotions & Offers"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and manage promotional campaigns"})]})]}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsxs($,{onClick:()=>c(!0),children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Create Promotion"]})})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Active Promotions"}),r.jsx(Wp,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:M}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Total Usage"}),r.jsx(gd,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:T}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Times used"})]})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Expiring Soon"}),r.jsx(ql,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:I}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Within 3 days"})]})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Total Promotions"}),r.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(x==null?void 0:x.length)||0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]})]}),r.jsx(K,{className:"mb-6",children:r.jsx(G,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(de,{placeholder:"Search promotions...",value:s,onChange:A=>i(A.target.value),className:"pl-10"})]})}),r.jsxs(dt,{value:a,onValueChange:o,children:[r.jsx(ot,{className:"w-40",children:r.jsx(ut,{})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Promotions"}),r.jsx(oe,{value:"active",children:"Active"}),r.jsx(oe,{value:"scheduled",children:"Scheduled"}),r.jsx(oe,{value:"expired",children:"Expired"}),r.jsx(oe,{value:"inactive",children:"Inactive"})]})]})]})})}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Promotional Campaigns"})}),r.jsx(G,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{children:"Promotion"}),r.jsx(qe,{children:"Discount"}),r.jsx(qe,{children:"Duration"}),r.jsx(qe,{children:"Usage"}),r.jsx(qe,{children:"Status"}),r.jsx(qe,{children:"Actions"})]})}),r.jsx(Ys,{children:O.map(A=>{const V=new Date,D=new Date(A.startDate),W=new Date(A.endDate),U=A.isActive&&V>=D&&V<=W,Q=V>W,q=V<D,B=A.usageLimit?A.usedCount/A.usageLimit*100:0;return r.jsxs(br,{children:[r.jsx(He,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:A.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:A.description||"No description"})]})}),r.jsx(He,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:A.discountType==="percentage"?`${A.discountValue}% off`:`${A.discountValue} off`}),A.minOrderAmount&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Min: ",A.minOrderAmount]})]})}),r.jsx(He,{children:r.jsx("div",{children:r.jsxs("p",{className:"text-sm",children:[new Date(A.startDate).toLocaleDateString()," -",new Date(A.endDate).toLocaleDateString()]})})}),r.jsx(He,{children:r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:[A.usedCount,A.usageLimit&&` / ${A.usageLimit}`]}),A.usageLimit&&r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:r.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${Math.min(B,100)}%`}})})]})}),r.jsx(He,{children:r.jsx(ue,{variant:U?"default":q?"secondary":Q?"destructive":"outline",children:U?"Active":q?"Scheduled":Q?"Expired":"Inactive"})}),r.jsx(He,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx($,{size:"sm",variant:"outline",onClick:()=>P(A),children:r.jsx(us,{className:"h-3 w-3"})}),r.jsx($,{size:"sm",variant:"outline",onClick:()=>_(A.id),children:r.jsx(ei,{className:"h-3 w-3"})})]})})]},A.id)})})]})})})]})]}),r.jsx(Dr,{open:l,onOpenChange:c,children:r.jsxs(Ar,{className:"max-w-2xl",children:[r.jsx(Er,{children:r.jsx(Or,{children:"Create New Promotion"})}),r.jsx(Rr,{...p,children:r.jsxs("form",{onSubmit:p.handleSubmit(C),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:p.control,name:"title",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Promotion Title"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., Summer Sale",...A})}),r.jsx(me,{})]})}),r.jsx(ae,{control:p.control,name:"discountType",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Discount Type"}),r.jsxs(dt,{onValueChange:A.onChange,defaultValue:A.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"percentage",children:"Percentage Off"}),r.jsx(oe,{value:"fixed_amount",children:"Fixed Amount Off"})]})]}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:p.control,name:"description",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Description (Optional)"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Promotion description",...A})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(ae,{control:p.control,name:"discountValue",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Discount Value"}),r.jsx(he,{children:r.jsx(de,{type:"number",step:"0.01",placeholder:"10",...A,onChange:V=>A.onChange(parseFloat(V.target.value)||0)})}),r.jsx(me,{})]})}),r.jsx(ae,{control:p.control,name:"minOrderAmount",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Min Order Amount"}),r.jsx(he,{children:r.jsx(de,{type:"number",step:"0.01",placeholder:"500",...A,onChange:V=>A.onChange(parseFloat(V.target.value)||void 0)})}),r.jsx(me,{})]})}),r.jsx(ae,{control:p.control,name:"usageLimit",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Usage Limit"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"100",...A,onChange:V=>A.onChange(parseInt(V.target.value)||void 0)})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:p.control,name:"startDate",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Start Date"}),r.jsx(he,{children:r.jsx(de,{type:"date",...A})}),r.jsx(me,{})]})}),r.jsx(ae,{control:p.control,name:"endDate",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"End Date"}),r.jsx(he,{children:r.jsx(de,{type:"date",...A})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx($,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),r.jsx($,{type:"submit",disabled:w.isPending,children:w.isPending?"Creating...":"Create Promotion"})]})]})})]})}),r.jsx(Dr,{open:m,onOpenChange:f,children:r.jsxs(Ar,{className:"max-w-2xl",children:[r.jsx(Er,{children:r.jsx(Or,{children:"Edit Promotion"})}),r.jsx(Rr,{...p,children:r.jsxs("form",{onSubmit:p.handleSubmit(k),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:p.control,name:"title",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Promotion Title"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., Summer Sale",...A})}),r.jsx(me,{})]})}),r.jsx(ae,{control:p.control,name:"discountType",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Discount Type"}),r.jsxs(dt,{onValueChange:A.onChange,value:A.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"percentage",children:"Percentage Off"}),r.jsx(oe,{value:"fixed_amount",children:"Fixed Amount Off"})]})]}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx($,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),r.jsx($,{type:"submit",disabled:j.isPending,children:j.isPending?"Updating...":"Update Promotion"})]})]})})]})})]})}function kbe(){const{toast:e}=ft(),t=on(),{user:n}=Gt(),[s,i]=b.useState(""),[a,o]=b.useState("all"),[l,c]=b.useState(null),[d,h]=b.useState(!1);if(!n||n.role!=="shopkeeper")return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-md",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center text-red-600",children:"Access Denied"})}),r.jsx(G,{children:r.jsx("p",{className:"text-center text-muted-foreground",children:"You need to be a shopkeeper to access order management."})})]})});if(n.role==="shopkeeper"&&n.status!=="active")return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-lg",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center text-yellow-600",children:"Pending Admin Approval"})}),r.jsxs(G,{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex items-center justify-center",children:r.jsx(jt,{className:"h-8 w-8 text-yellow-600"})}),r.jsx("p",{className:"text-muted-foreground",children:"Your seller account is pending approval from our admin team. You cannot access order management until approved."}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:r.jsx(Ae,{href:"/",children:r.jsx($,{variant:"outline",children:"Go to Homepage"})})})]})]})});const{data:m,isLoading:f,error:v}=Le({queryKey:["/api/orders/store",n==null?void 0:n.id],queryFn:async()=>{if(!(n!=null&&n.id))throw new Error("User ID is required");try{const k=await fetch(`/api/orders/store?userId=${n.id}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!k.ok){if(k.status===404)return[];throw new Error(`Failed to fetch orders: ${k.status} ${k.statusText}`)}const _=await k.json();return console.log("Orders fetched for user:",n.id,"Count:",_.length),Array.isArray(_)?_:[]}catch(k){throw console.error("Order fetch error:",k),k}},enabled:!!(n!=null&&n.id)&&n.role==="shopkeeper"&&n.status==="active",retry:2,staleTime:30*1e3}),{data:p,isLoading:x}=Le({queryKey:["/api/order-items",l==null?void 0:l.id],queryFn:()=>fetch(`/api/order-items?orderId=${l==null?void 0:l.id}`).then(k=>k.json()),enabled:!!(l!=null&&l.id)}),y=pt({mutationFn:async({orderId:k,status:_})=>await Kt("PUT",`/api/orders/${k}/status`),onSuccess:()=>{e({title:"Order Updated",description:"Order status has been updated successfully"}),t.invalidateQueries({queryKey:["/api/orders/store",n==null?void 0:n.id]}),t.invalidateQueries({queryKey:["/api/orders/store"]}),t.invalidateQueries({queryKey:["/api/orders"]}),t.refetchQueries({queryKey:["/api/orders/store",n==null?void 0:n.id]})},onError:k=>{console.error("Order status update error:",k),e({title:"Error",description:"Failed to update order status",variant:"destructive"})}}),w=(k,_)=>{y.mutate({orderId:k,status:_})},j=k=>{c(k),h(!0)},N=(m==null?void 0:m.filter(k=>{const _=k.customerName.toLowerCase().includes(s.toLowerCase())||k.id.toString().includes(s)||k.phone.includes(s),O=a==="all"||k.status===a;return _&&O}))||[],C=k=>{switch(k){case"pending":return"secondary";case"processing":return"default";case"shipped":return"outline";case"delivered":return"default";case"cancelled":return"destructive";default:return"secondary"}},P=(m==null?void 0:m.reduce((k,_)=>(k[_.status]=(k[_.status]||0)+1,k),{}))||{};return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center py-3 sm:py-4 gap-3 sm:gap-0",children:[r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[r.jsx(_n,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Order Management"}),r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Track and manage customer orders"})]})]}),r.jsx("div",{className:"flex items-center space-x-2 sm:space-x-3 w-full sm:w-auto",children:r.jsx(Ae,{href:"/seller/dashboard",className:"w-full sm:w-auto",children:r.jsx($,{variant:"outline",className:"w-full sm:w-auto text-sm",children:"Back to Dashboard"})})})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-8",children:[r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 sm:gap-6 mb-6 sm:mb-8",children:[r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[r.jsx(ne,{className:"text-xs sm:text-sm font-medium",children:"Pending"}),r.jsx(Ye,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500"})]}),r.jsx(G,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-yellow-600",children:P.pending||0})})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[r.jsx(ne,{className:"text-xs sm:text-sm font-medium",children:"Processing"}),r.jsx(Ye,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-500"})]}),r.jsx(G,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:P.processing||0})})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[r.jsx(ne,{className:"text-xs sm:text-sm font-medium",children:"Shipped"}),r.jsx(Ct,{className:"h-3 w-3 sm:h-4 sm:w-4 text-purple-500"})]}),r.jsx(G,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:P.shipped||0})})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[r.jsx(ne,{className:"text-xs sm:text-sm font-medium",children:"Delivered"}),r.jsx(yt,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500"})]}),r.jsx(G,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-green-600",children:P.delivered||0})})]}),r.jsxs(K,{className:"col-span-2 sm:col-span-1",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3 sm:p-6",children:[r.jsx(ne,{className:"text-xs sm:text-sm font-medium",children:"Cancelled"}),r.jsx(ps,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500"})]}),r.jsx(G,{className:"p-3 pt-0 sm:p-6 sm:pt-0",children:r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-red-600",children:P.cancelled||0})})]})]}),r.jsx(K,{className:"mb-4 sm:mb-6",children:r.jsx(G,{className:"pt-4 sm:pt-6 p-3 sm:p-6",children:r.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(de,{placeholder:"Search by customer name, order ID, or phone...",value:s,onChange:k=>i(k.target.value),className:"pl-10 text-sm"})]})}),r.jsxs(dt,{value:a,onValueChange:o,children:[r.jsx(ot,{className:"w-full sm:w-40",children:r.jsx(ut,{})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"all",children:"All Orders"}),r.jsx(oe,{value:"pending",children:"Pending"}),r.jsx(oe,{value:"processing",children:"Processing"}),r.jsx(oe,{value:"shipped",children:"Shipped"}),r.jsx(oe,{value:"delivered",children:"Delivered"}),r.jsx(oe,{value:"cancelled",children:"Cancelled"})]})]})]})})}),r.jsxs(K,{children:[r.jsx(re,{className:"p-3 sm:p-6",children:r.jsx(ne,{className:"text-lg sm:text-xl",children:"Customer Orders"})}),r.jsx(G,{className:"p-0 sm:p-6",children:v?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ps,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load orders"}),r.jsx($,{onClick:()=>t.invalidateQueries({queryKey:["/api/orders/store",n==null?void 0:n.id]}),variant:"outline",children:"Retry"})]}):f?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Loading orders..."})]}):r.jsxs("div",{children:[r.jsxs("div",{className:"block sm:hidden space-y-3 px-3",children:[N.map(k=>r.jsx(K,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-mono text-sm font-medium",children:["#",k.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:k.customerName})]}),r.jsx(ue,{variant:C(k.status),className:"text-xs",children:k.status})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-lg font-bold",children:["",parseFloat(k.totalAmount).toLocaleString()]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(k.createdAt).toLocaleDateString()})]}),k.items&&k.items.length>0&&r.jsxs("div",{className:"space-y-2",children:[k.items.slice(0,2).map((_,O)=>{var M,T,I;return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"w-8 h-8 bg-gray-100 rounded-md overflow-hidden flex items-center justify-center",children:[(M=_.product)!=null&&M.imageUrl?r.jsx("img",{src:_.product.imageUrl,alt:_.product.name||"Product",className:"w-full h-full object-cover",onError:A=>{var D;A.currentTarget.classList.add("hidden");const V=(D=A.currentTarget.parentElement)==null?void 0:D.querySelector(".fallback-icon");V&&V.classList.remove("hidden")}}):null,r.jsx(Ye,{className:`h-4 w-4 text-gray-400 ${(T=_.product)!=null&&T.imageUrl?"hidden":"flex"}`})]}),r.jsxs("div",{className:"flex-1 text-xs text-muted-foreground",children:[r.jsx("div",{className:"truncate font-medium",children:((I=_.product)==null?void 0:I.name)||`Product #${_.productId}`}),r.jsxs("div",{className:"text-xs",children:["Qty: ",_.quantity,"  ",parseFloat(_.price).toFixed(2)]})]})]},O)}),k.items.length>2&&r.jsxs("div",{className:"text-xs text-muted-foreground pl-10",children:["+",k.items.length-2," more items"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(dt,{value:k.status,onValueChange:_=>w(k.id,_),children:[r.jsx(ot,{className:"flex-1 h-8 text-xs",children:r.jsx(ut,{})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"pending",children:"Pending"}),r.jsx(oe,{value:"processing",children:"Processing"}),r.jsx(oe,{value:"shipped",children:"Shipped"}),r.jsx(oe,{value:"delivered",children:"Delivered"}),r.jsx(oe,{value:"cancelled",children:"Cancelled"})]})]}),r.jsx($,{size:"sm",variant:"outline",onClick:()=>j(k),className:"h-8 px-3",children:r.jsx(hs,{className:"h-3 w-3"})})]})]})},k.id)),N.length===0&&!f&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(_n,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No orders found"}),a!=="all"&&r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Try changing the filter or search term"})]})]}),r.jsx("div",{className:"hidden sm:block overflow-x-auto",children:r.jsxs(Gs,{children:[r.jsx(Zs,{children:r.jsxs(br,{children:[r.jsx(qe,{children:"Order & Products"}),r.jsx(qe,{children:"Customer"}),r.jsx(qe,{children:"Amount"}),r.jsx(qe,{children:"Status"}),r.jsx(qe,{children:"Date"}),r.jsx(qe,{children:"Actions"})]})}),r.jsxs(Ys,{children:[N.map(k=>r.jsxs(br,{children:[r.jsx(He,{children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"font-mono text-sm",children:["#",k.id]}),k.items&&k.items.length>0&&r.jsxs("div",{className:"space-y-1",children:[k.items.slice(0,2).map((_,O)=>{var M,T,I;return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"w-6 h-6 bg-gray-100 rounded-sm overflow-hidden flex items-center justify-center",children:[(M=_.product)!=null&&M.imageUrl?r.jsx("img",{src:_.product.imageUrl,alt:_.product.name||"Product",className:"w-full h-full object-cover",onError:A=>{var D;A.currentTarget.classList.add("hidden");const V=(D=A.currentTarget.parentElement)==null?void 0:D.querySelector(".fallback-icon");V&&V.classList.remove("hidden")}}):null,r.jsx(Ye,{className:`fallback-icon h-3 w-3 text-gray-400 ${(T=_.product)!=null&&T.imageUrl?"hidden":"flex"}`})]}),r.jsxs("div",{className:"flex-1 text-xs text-muted-foreground",children:[r.jsx("div",{className:"truncate font-medium",children:((I=_.product)==null?void 0:I.name)||`Product #${_.productId}`}),r.jsxs("div",{className:"text-xs opacity-75",children:["Qty: ",_.quantity]})]})]},O)}),k.items.length>2&&r.jsxs("div",{className:"text-xs text-muted-foreground pl-8",children:["+",k.items.length-2," more items"]})]})]})}),r.jsx(He,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:k.customerName}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[r.jsx(Vt,{className:"h-3 w-3 mr-1"}),k.phone]})]})}),r.jsxs(He,{className:"font-medium",children:["",parseFloat(k.totalAmount).toLocaleString()]}),r.jsx(He,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ue,{variant:C(k.status),children:k.status}),r.jsxs(dt,{value:k.status,onValueChange:_=>w(k.id,_),children:[r.jsx(ot,{className:"w-32 h-7",children:r.jsx(ut,{})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"pending",children:"Pending"}),r.jsx(oe,{value:"processing",children:"Processing"}),r.jsx(oe,{value:"shipped",children:"Shipped"}),r.jsx(oe,{value:"delivered",children:"Delivered"}),r.jsx(oe,{value:"cancelled",children:"Cancelled"})]})]})]})}),r.jsx(He,{children:new Date(k.createdAt).toLocaleDateString()}),r.jsx(He,{children:r.jsxs($,{size:"sm",variant:"outline",onClick:()=>j(k),children:[r.jsx(hs,{className:"h-3 w-3 mr-1"}),"View"]})})]},k.id)),N.length===0&&!f&&r.jsx(br,{children:r.jsxs(He,{colSpan:6,className:"text-center py-8",children:[r.jsx(_n,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No orders found"}),a!=="all"&&r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Try changing the filter or search term"})]})})]})]})})]})})]})]}),r.jsx(Dr,{open:d,onOpenChange:h,children:r.jsxs(Ar,{className:"max-w-4xl max-h-[90vh] overflow-y-auto w-[95vw] sm:w-full",children:[r.jsx(Er,{children:r.jsxs(Or,{children:["Order Details - #",l==null?void 0:l.id]})}),l&&r.jsxs(Ds,{defaultValue:"details",className:"w-full",children:[r.jsxs(ws,{children:[r.jsx(at,{value:"details",children:"Order Details"}),r.jsx(at,{value:"shipping",children:"Shipping Info"}),r.jsx(at,{value:"items",children:"Order Items"})]}),r.jsx(Xe,{value:"details",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-lg",children:"Customer Information"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",l.customerName]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Phone:"})," ",l.phone]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Payment:"})," ",l.paymentMethod]})]})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-lg",children:"Order Summary"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Total Amount:"})," ",parseFloat(l.totalAmount).toLocaleString()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Status:"}),r.jsx(ue,{className:"ml-2",variant:C(l.status),children:l.status})]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Order Date:"})," ",new Date(l.createdAt).toLocaleString()]})]})})]})]})}),r.jsx(Xe,{value:"shipping",className:"space-y-4",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-lg",children:"Shipping Address"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("p",{className:"flex items-start",children:[r.jsx(Re,{className:"h-4 w-4 mr-2 mt-1"}),l.shippingAddress]}),l.latitude&&l.longitude&&r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs($,{variant:"outline",size:"sm",onClick:()=>{const k=`https://www.google.com/maps?q=${l.latitude},${l.longitude}`;window.open(k,"_blank")},className:"w-fit",children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),"View on Google Maps"]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Coordinates: ",l.latitude,", ",l.longitude]})]})]})})]})}),r.jsx(Xe,{value:"items",className:"space-y-4",children:r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-lg",children:"Order Items"})}),r.jsx(G,{children:x?r.jsx("p",{children:"Loading order items..."}):r.jsx("div",{className:"space-y-3",children:x?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Loading order items..."})]}):p&&p.length>0?p.map(k=>{var _,O,M,T;return r.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center relative",children:(_=k.product)!=null&&_.imageUrl?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:k.product.imageUrl,alt:k.product.name||"Product",className:"w-full h-full object-cover",onError:I=>{var V;I.currentTarget.classList.add("hidden");const A=(V=I.currentTarget.parentElement)==null?void 0:V.querySelector(".fallback-icon");A&&A.classList.remove("hidden")}}),r.jsx(Ye,{className:"fallback-icon h-8 w-8 text-gray-400 absolute inset-0 m-auto hidden"})]}):r.jsx(Ye,{className:"h-8 w-8 text-gray-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-base",children:((O=k.product)==null?void 0:O.name)||`Product #${k.productId}`}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",k.quantity,"  ",parseFloat(k.price).toFixed(2)]}),((M=k.product)==null?void 0:M.description)&&r.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:k.product.description}),((T=k.product)==null?void 0:T.category)&&r.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Category: ",k.product.category]}),!k.product&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Product details unavailable"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-medium text-lg",children:["",(parseFloat(k.price)*k.quantity).toLocaleString()]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Unit Price: ",parseFloat(k.price).toFixed(2)]}),r.jsxs("p",{className:"text-xs text-green-600",children:["Qty: ",k.quantity]})]})]},k.id)}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ye,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No items found in this order"}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"This order may have been created before product details were properly linked."})]})})})]})})]})]})})]})}function JH({className:e="",variant:t="outline",size:n="sm"}){const{user:s}=Gt(),i=()=>{if(!s)return"/";switch(s.role){case"shopkeeper":return"/seller/dashboard";case"admin":return"/admin";case"delivery_partner":return"/delivery-partner/dashboard";default:return"/customer-dashboard"}},a=()=>{if(!s)return"Home";switch(s.role){case"shopkeeper":return"Seller Dashboard";case"admin":return"Admin Dashboard";case"delivery_partner":return"Delivery Dashboard";default:return"My Dashboard"}};return r.jsx(Ae,{href:i(),children:r.jsx($,{variant:t,size:n,className:`flex items-center ${e}`,title:`Back to ${a()}`,children:r.jsx(bc,{className:"h-4 w-4"})})})}const Tbe=ee.object({name:ee.string().min(1,"Store name is required").transform(e=>e.trim()),description:ee.string().optional().default(""),address:ee.string().min(1,"Address is required").transform(e=>e.trim()),latitude:ee.string().optional().default(""),longitude:ee.string().optional().default(""),phone:ee.string().optional().default("").transform(e=>(e==null?void 0:e.trim())||""),website:ee.string().optional().default("").transform(e=>{if(!e||e.trim()==="")return"";const t=e.trim();return t&&!t.startsWith("http://")&&!t.startsWith("https://")?`https://${t}`:t}).pipe(ee.string().url().optional().or(ee.literal(""))),logo:ee.string().optional().default(""),coverImage:ee.string().optional().default(""),storeType:ee.enum(["retail","restaurant"]).default("retail"),cuisineType:ee.string().optional().default(""),deliveryTime:ee.string().optional().default(""),minimumOrder:ee.string().optional().default("").transform(e=>(e==null?void 0:e.trim())||""),deliveryFee:ee.string().optional().default("").transform(e=>(e==null?void 0:e.trim())||""),isDeliveryAvailable:ee.boolean().default(!1),openingHours:ee.string().optional().default("")});function Abe(){const{toast:e}=ft(),t=on(),[n,s]=b.useState(!1),[i,a]=b.useState(!1),{user:o}=Gt(),l=fn({resolver:pn(Tbe),defaultValues:{name:"",description:"",address:"",latitude:"",longitude:"",phone:"",website:"",logo:"",coverImage:"",storeType:"retail",cuisineType:"",deliveryTime:"",minimumOrder:"",deliveryFee:"",isDeliveryAvailable:!1,openingHours:""}}),{data:c,isLoading:d}=Le({queryKey:["/api/stores/owner",o==null?void 0:o.id],enabled:!!(o!=null&&o.id)}),h=c==null?void 0:c[0],m=pt({mutationFn:async y=>{try{const w=await fetch("/api/stores",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...y,ownerId:o==null?void 0:o.id})});if(!w.ok){const N=(await w.json().catch(()=>({}))).message||`Store creation failed (${w.status})`;throw new Error(N)}return w.json()}catch(w){throw w instanceof TypeError&&w.message.includes("fetch")?new Error("Network connection error. Please check your internet connection."):w}},onSuccess:y=>{const j=(y.storeType||"store")==="restaurant"?"restaurant":"retail store";e({title:"Store Created Successfully!",description:`Your ${j} "${y.name||"store"}" is now live on Siraha Bazaar`}),t.invalidateQueries({queryKey:["/api/stores/owner",o==null?void 0:o.id]}),a(!1),l.reset()},onError:y=>{console.warn("Store creation error:",y.message);let w="Unable to create your store right now. Please try again.";y.message.includes("network")||y.message.includes("connection")?w="Network connection issue. Please check your internet and try again.":y.message.includes("duplicate")||y.message.includes("exists")?w="A store with this name already exists. Please choose a different name.":y.message.includes("validation")&&(w="Please check your store information and try again."),e({title:"Store Creation Issue",description:w,variant:"destructive"})}}),f=pt({mutationFn:async y=>{try{const w=await fetch(`/api/stores/${h==null?void 0:h.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!w.ok){const N=(await w.json().catch(()=>({}))).message||`Store update failed (${w.status})`;throw new Error(N)}return w.json()}catch(w){throw w instanceof TypeError&&w.message.includes("fetch")?new Error("Network connection error. Please check your internet connection."):w}},onSuccess:y=>{const j=(y.storeType||(h==null?void 0:h.storeType)||"store")==="restaurant"?"restaurant":"retail store";e({title:"Store Updated Successfully!",description:`Your ${j} information has been updated`}),t.invalidateQueries({queryKey:["/api/stores/owner",o==null?void 0:o.id]}),s(!1)},onError:y=>{console.warn("Store update error:",y.message);let w="Unable to update your store right now. Please try again.";y.message.includes("network")||y.message.includes("connection")?w="Network connection issue. Please check your internet and try again.":y.message.includes("not found")?w="Store not found. Please refresh the page and try again.":y.message.includes("validation")&&(w="Please check your store information and try again."),e({title:"Store Update Issue",description:w,variant:"destructive"})}}),v=y=>{var j,N;const w={...y,name:((j=y.name)==null?void 0:j.trim())||"",description:y.description||"",address:((N=y.address)==null?void 0:N.trim())||"",phone:y.phone||"",website:y.website||"",logo:y.logo||"",coverImage:y.coverImage||"",latitude:y.latitude||"",longitude:y.longitude||"",cuisineType:y.cuisineType||"",deliveryTime:y.deliveryTime||"",minimumOrder:y.minimumOrder||"",deliveryFee:y.deliveryFee||"",openingHours:y.openingHours||"",isDeliveryAvailable:!!y.isDeliveryAvailable,storeType:y.storeType||"retail"};console.log("Creating store with cleaned data:",w),m.mutate(w)},p=y=>{var j,N;const w={...y,name:((j=y.name)==null?void 0:j.trim())||"",description:y.description||"",address:((N=y.address)==null?void 0:N.trim())||"",phone:y.phone||"",website:y.website||"",logo:y.logo||"",coverImage:y.coverImage||"",latitude:y.latitude||"",longitude:y.longitude||"",cuisineType:y.cuisineType||"",deliveryTime:y.deliveryTime||"",minimumOrder:y.minimumOrder||"",deliveryFee:y.deliveryFee||"",openingHours:y.openingHours||"",isDeliveryAvailable:!!y.isDeliveryAvailable,storeType:y.storeType||"retail"};console.log("Updating store with cleaned data:",w),f.mutate(w)},x=()=>{var y,w;h&&(l.reset({name:h.name||"",description:h.description||"",address:h.address||"",latitude:h.latitude||"",longitude:h.longitude||"",phone:h.phone||"",website:h.website||"",logo:h.logo||"",coverImage:h.coverImage||"",storeType:h.storeType==="restaurant"?"restaurant":"retail",cuisineType:h.cuisineType||"",deliveryTime:h.deliveryTime||"",minimumOrder:((y=h.minimumOrder)==null?void 0:y.toString())||"",deliveryFee:((w=h.deliveryFee)==null?void 0:w.toString())||"",isDeliveryAvailable:!!h.isDeliveryAvailable,openingHours:h.openingHours||""}),s(!0))};return!o||o.role!=="shopkeeper"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-md",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center text-red-600",children:"Access Denied"})}),r.jsx(G,{children:r.jsx("p",{className:"text-center text-muted-foreground",children:"You need to be a shopkeeper to access store management."})})]})}):o.role==="shopkeeper"&&o.status!=="active"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-lg",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center text-yellow-600",children:"Pending Admin Approval"})}),r.jsxs(G,{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-yellow-100 dark:bg-yellow-900/20 flex items-center justify-center",children:r.jsx(jt,{className:"h-8 w-8 text-yellow-600"})}),r.jsx("p",{className:"text-muted-foreground",children:"Your seller account is pending approval from our admin team. You cannot access store management until approved."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsx(Ae,{href:"/",children:r.jsx($,{variant:"outline",children:"Go to Homepage"})}),r.jsx(Ae,{href:"/account",children:r.jsx($,{variant:"default",children:"View Account Status"})})]})]})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ar,{className:"h-8 w-8 text-primary"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Store Management"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your store information and settings"})]})]}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsx(JH,{})})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:d?r.jsx("div",{className:"space-y-6",children:r.jsx(K,{children:r.jsx(G,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),r.jsxs("div",{className:"flex-1 space-y-3",children:[r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-3/4"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"h-6 w-20 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),r.jsx("div",{className:"h-6 w-16 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]})]})})})}):h?r.jsxs("div",{className:"space-y-6",children:[r.jsx(K,{children:r.jsx(G,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center overflow-hidden",children:[h.logo?r.jsx("img",{src:h.logo,alt:h.name||"Store Logo",className:"w-full h-full object-cover",onError:y=>{var N;const w=y.target;w.style.display="none";const j=(N=w.parentElement)==null?void 0:N.querySelector(".fallback-icon");j&&(j.style.display="block")}}):null,r.jsx(ar,{className:`h-12 w-12 text-muted-foreground fallback-icon ${h.logo?"hidden":"block"}`})]})}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.name||"My Store"}),r.jsx("p",{className:"text-muted-foreground",children:h.description||"No description added yet."}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Bt,{className:"h-4 w-4 text-yellow-400 fill-current"}),r.jsx("span",{className:"text-sm",children:h.rating?parseFloat(h.rating).toFixed(1):"0.0"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",h.totalReviews||0," reviews)"]})]}),r.jsx(ue,{variant:h.storeType==="restaurant"?"default":"secondary",children:h.storeType==="restaurant"?r.jsxs(r.Fragment,{children:[r.jsx(Rh,{className:"h-3 w-3 mr-1"})," Restaurant"]}):r.jsxs(r.Fragment,{children:[r.jsx(ar,{className:"h-3 w-3 mr-1"})," Retail"]})}),r.jsx(ue,{variant:h.isActive?"default":"secondary",children:h.isActive?"Active":"Inactive"})]})]}),r.jsxs($,{onClick:x,className:"mt-4 sm:mt-0",children:[r.jsx(us,{className:"h-4 w-4 mr-2"}),"Edit Store"]})]})})]})})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Contact Information"})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Re,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Address"}),r.jsx("p",{className:"text-muted-foreground",children:h.address||"No address provided"})]})]}),h.phone&&h.phone.trim()&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Vt,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Phone"}),r.jsx("p",{className:"text-muted-foreground",children:h.phone})]})]}),h.website&&h.website.trim()&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(vk,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Website"}),r.jsx("a",{href:h.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline break-all",children:h.website})]})]}),(!h.phone||!h.phone.trim())&&(!h.website||!h.website.trim())&&r.jsx("div",{className:"text-center py-4",children:r.jsx("p",{className:"text-muted-foreground text-sm",children:"Add your phone number and website to help customers connect with you"})})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Store Statistics"})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:h.totalReviews||0}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Reviews"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",children:h.rating?parseFloat(h.rating).toFixed(1):"0.0"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Rating"})]})]}),r.jsxs("div",{className:"pt-4",children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Store created on ",h.createdAt?new Date(h.createdAt).toLocaleDateString():"Unknown date"]}),h.storeType==="restaurant"&&r.jsxs("div",{className:"mt-2 space-y-1",children:[h.cuisineType&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("strong",{children:"Cuisine:"})," ",h.cuisineType]}),h.deliveryTime&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("strong",{children:"Delivery Time:"})," ",h.deliveryTime]}),h.minimumOrder&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("strong",{children:"Minimum Order:"})," ",h.minimumOrder]})]})]})]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Quick Actions"})}),r.jsx(G,{children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsx(Ae,{href:"/seller/products/add",children:r.jsxs($,{className:"w-full",children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Product"]})}),r.jsx(Ae,{href:"/seller/inventory",children:r.jsx($,{variant:"outline",className:"w-full",children:"View Inventory"})}),r.jsx(Ae,{href:"/seller/orders",children:r.jsx($,{variant:"outline",className:"w-full",children:"Manage Orders"})})]})})]})]}):r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs(K,{children:[r.jsxs(re,{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(ar,{className:"h-8 w-8 text-primary"})}),r.jsx(ne,{className:"text-2xl",children:"Create Your Store"}),r.jsx("p",{className:"text-muted-foreground",children:"Set up your store to start selling products on Siraha Bazaar"})]}),r.jsx(G,{children:r.jsx(Rr,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(v),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:l.control,name:"name",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Store Name"}),r.jsx(he,{children:r.jsx(de,{placeholder:"My Awesome Store",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"storeType",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Store Type"}),r.jsxs(dt,{onValueChange:y.onChange,defaultValue:y.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select store type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"retail",children:"Retail Store"}),r.jsx(oe,{value:"restaurant",children:"Restaurant"})]})]}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:l.control,name:"description",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Description"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Tell customers about your store...",...y})}),r.jsx(me,{})]})}),r.jsx(R0,{address:l.watch("address"),latitude:l.watch("latitude"),longitude:l.watch("longitude"),onLocationChange:y=>{l.setValue("address",y.address),l.setValue("latitude",y.latitude),l.setValue("longitude",y.longitude)}}),r.jsx(ae,{control:l.control,name:"website",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Website (Optional)"}),r.jsx(he,{children:r.jsx(de,{placeholder:"https://mystore.com",...y})}),r.jsx(me,{})]})}),l.watch("storeType")==="restaurant"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-lg bg-orange-50 dark:bg-orange-950/20",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("h3",{className:"text-lg font-medium text-orange-800 dark:text-orange-200 mb-2",children:" Restaurant Information"}),r.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mb-4",children:"Additional fields for restaurants"})]}),r.jsx(ae,{control:l.control,name:"phone",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Phone Number"}),r.jsx(he,{children:r.jsx(de,{placeholder:"+977-XXXXXXXXX",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"deliveryFee",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Delivery Fee ()"}),r.jsx(he,{children:r.jsx(de,{placeholder:"50",type:"number",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"minimumOrder",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Minimum Order ()"}),r.jsx(he,{children:r.jsx(de,{placeholder:"300",type:"number",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"deliveryTime",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Delivery Time"}),r.jsx(he,{children:r.jsx(de,{placeholder:"30-45 minutes",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"cuisineType",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Cuisine Type"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Nepali, Indian, Chinese",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"openingHours",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Opening Hours"}),r.jsx(he,{children:r.jsx(de,{placeholder:"9:00 AM - 10:00 PM",...y})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(ae,{control:l.control,name:"logo",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Store Logo"}),r.jsx(he,{children:r.jsx(Ks,{label:"Store Logo",maxImages:1,minImages:0,onImagesChange:w=>y.onChange(w[0]||""),initialImages:y.value?[y.value]:[],className:"w-full"})}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Auto-compressed to 200KB for fast loading"}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"coverImage",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Store Cover Image"}),r.jsx(he,{children:r.jsx(Ks,{label:"Store Cover Image",maxImages:1,minImages:0,onImagesChange:w=>y.onChange(w[0]||""),initialImages:y.value?[y.value]:[],className:"w-full"})}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Auto-compressed to 200KB for fast loading"}),r.jsx(me,{})]})})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx($,{type:"submit",disabled:m.isPending,size:"lg",className:"w-full sm:w-auto px-8",children:m.isPending?"Creating...":"Create Store"})})]})})})]})})}),r.jsx(Dr,{open:n,onOpenChange:s,children:r.jsxs(Ar,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Er,{children:r.jsx(Or,{children:"Edit Store Information"})}),r.jsx(Rr,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(p),className:"space-y-4 pb-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:l.control,name:"name",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Store Name"}),r.jsx(he,{children:r.jsx(de,{placeholder:"My Awesome Store",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"storeType",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Store Type"}),r.jsxs(dt,{onValueChange:y.onChange,defaultValue:y.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select store type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"retail",children:"Retail Store"}),r.jsx(oe,{value:"restaurant",children:"Restaurant"})]})]}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:l.control,name:"description",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Description"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Tell customers about your store...",...y})}),r.jsx(me,{})]})}),r.jsx(R0,{address:l.watch("address"),latitude:l.watch("latitude"),longitude:l.watch("longitude"),onLocationChange:y=>{l.setValue("address",y.address),l.setValue("latitude",y.latitude),l.setValue("longitude",y.longitude)}}),r.jsx(ae,{control:l.control,name:"website",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Website (Optional)"}),r.jsx(he,{children:r.jsx(de,{placeholder:"https://mystore.com",...y})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:l.control,name:"logo",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Store Logo"}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsx("div",{className:"flex items-center justify-center w-full",children:r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[r.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[r.jsx(zt,{className:"w-6 h-6 mb-2 text-gray-500"}),r.jsx("p",{className:"text-sm text-gray-500 font-semibold",children:"Upload Logo"}),r.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG recommended"})]}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:w=>{var N;const j=(N=w.target.files)==null?void 0:N[0];if(j){const C=new FileReader;C.onload=P=>{var _;const k=(_=P.target)==null?void 0:_.result;k&&y.onChange(k)},C.readAsDataURL(j)}}})]})}),r.jsx("div",{className:"flex items-center justify-center w-full",children:r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-orange-300 border-dashed rounded-lg cursor-pointer bg-orange-50 hover:bg-orange-100",children:[r.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[r.jsx(ko,{className:"w-6 h-6 mb-2 text-orange-500"}),r.jsx("p",{className:"text-sm text-orange-600 font-semibold",children:"Take Photo"}),r.jsx("p",{className:"text-xs text-orange-500",children:"Camera capture"})]}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",capture:"environment",onChange:w=>{var N;const j=(N=w.target.files)==null?void 0:N[0];if(j){const C=new FileReader;C.onload=P=>{var _;const k=(_=P.target)==null?void 0:_.result;k&&y.onChange(k)},C.readAsDataURL(j)}}})]})})]}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{placeholder:"Or paste image URL...",value:y.value||"",onChange:w=>y.onChange(w.target.value),className:"pr-10"}),r.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r.jsx(Od,{className:"h-4 w-4 text-gray-400"})})]}),y.value&&r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:y.value,alt:"Store logo preview",className:"w-full h-24 object-cover rounded-lg border"}),r.jsx($,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>y.onChange(""),children:r.jsx(Fr,{className:"h-4 w-4"})})]})]})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"coverImage",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Cover Image"}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsx("div",{className:"flex items-center justify-center w-full",children:r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[r.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[r.jsx(zt,{className:"w-6 h-6 mb-2 text-gray-500"}),r.jsx("p",{className:"text-sm text-gray-500 font-semibold",children:"Upload Cover"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Wide format preferred"})]}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:w=>{var N;const j=(N=w.target.files)==null?void 0:N[0];if(j){const C=new FileReader;C.onload=P=>{var _;const k=(_=P.target)==null?void 0:_.result;k&&y.onChange(k)},C.readAsDataURL(j)}}})]})}),r.jsx("div",{className:"flex items-center justify-center w-full",children:r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-orange-300 border-dashed rounded-lg cursor-pointer bg-orange-50 hover:bg-orange-100",children:[r.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[r.jsx(ko,{className:"w-6 h-6 mb-2 text-orange-500"}),r.jsx("p",{className:"text-sm text-orange-600 font-semibold",children:"Take Photo"}),r.jsx("p",{className:"text-xs text-orange-500",children:"Camera capture"})]}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",capture:"environment",onChange:w=>{var N;const j=(N=w.target.files)==null?void 0:N[0];if(j){const C=new FileReader;C.onload=P=>{var _;const k=(_=P.target)==null?void 0:_.result;k&&y.onChange(k)},C.readAsDataURL(j)}}})]})})]}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{placeholder:"Or paste image URL...",value:y.value||"",onChange:w=>y.onChange(w.target.value),className:"pr-10"}),r.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r.jsx(Od,{className:"h-4 w-4 text-gray-400"})})]}),y.value&&r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:y.value,alt:"Store cover preview",className:"w-full h-24 object-cover rounded-lg border"}),r.jsx($,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>y.onChange(""),children:r.jsx(Fr,{className:"h-4 w-4"})})]})]})}),r.jsx(me,{})]})})]}),l.watch("storeType")==="restaurant"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-lg bg-orange-50 dark:bg-orange-950/20",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsx("h3",{className:"text-lg font-medium text-orange-800 dark:text-orange-200 mb-2",children:" Restaurant Information"})}),r.jsx(ae,{control:l.control,name:"phone",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Phone Number"}),r.jsx(he,{children:r.jsx(de,{placeholder:"+977-XXXXXXXXX",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"deliveryFee",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Delivery Fee ()"}),r.jsx(he,{children:r.jsx(de,{placeholder:"50",type:"number",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"minimumOrder",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Minimum Order ()"}),r.jsx(he,{children:r.jsx(de,{placeholder:"300",type:"number",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"deliveryTime",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Delivery Time"}),r.jsx(he,{children:r.jsx(de,{placeholder:"30-45 minutes",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"cuisineType",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Cuisine Type"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Nepali, Indian, Chinese",...y})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"openingHours",render:({field:y})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Opening Hours"}),r.jsx(he,{children:r.jsx(de,{placeholder:"9:00 AM - 10:00 PM",...y})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx($,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),r.jsx($,{type:"submit",disabled:f.isPending,children:f.isPending?"Updating...":"Update Store"})]})]})})]})})]})}const Ebe=ee.object({name:ee.string().min(2,"Product name must be at least 2 characters"),categoryId:ee.number().min(1,"Category is required"),description:ee.string().optional(),price:ee.string().min(1,"Price is required"),originalPrice:ee.string().optional(),stock:ee.number().min(0,"Stock cannot be negative"),images:ee.array(ee.string()).default([]),productType:ee.enum(["retail","food"]).default("retail"),preparationTime:ee.string().optional(),ingredients:ee.array(ee.string()).default([]),allergens:ee.array(ee.string()).default([]),spiceLevel:ee.string().optional(),isVegetarian:ee.boolean().default(!1),isVegan:ee.boolean().default(!1),nutritionInfo:ee.string().optional()});function Obe(){const[,e]=Jr(),{user:t}=Gt(),{toast:n}=ft(),s=on(),[i,a]=b.useState(!1),[o,l]=b.useState([]),[c,d]=b.useState([]),[h,m]=b.useState(""),[f,v]=b.useState(""),{data:p=[]}=Le({queryKey:["/api/categories"]}),{data:x=[],isLoading:y,error:w}=Le({queryKey:[`/api/stores/owner/${t==null?void 0:t.id}`],queryFn:async()=>{if(!(t!=null&&t.id))return[];const A=await fetch(`/api/stores/owner/${t.id}`);if(!A.ok){if(A.status===404)return[];throw new Error("Failed to fetch stores")}return A.json()},enabled:!!t}),j=x[0],N=(j==null?void 0:j.storeType)==="restaurant"||(j==null?void 0:j.name)&&j.name.toLowerCase().includes("restaurant"),C=N?"food":"retail",P=fn({resolver:pn(Ebe),defaultValues:{name:"",categoryId:1,description:"",price:"",originalPrice:"",stock:0,images:[],productType:C,preparationTime:"",ingredients:[],allergens:[],spiceLevel:"",isVegetarian:!1,isVegan:!1,nutritionInfo:""}}),k=P.watch("productType"),_=()=>{if(h.trim()&&!o.includes(h.trim())){const A=[...o,h.trim()];l(A),P.setValue("ingredients",A),m("")}},O=A=>{const V=o.filter(D=>D!==A);l(V),P.setValue("ingredients",V)},M=()=>{if(f.trim()&&!c.includes(f.trim())){const A=[...c,f.trim()];d(A),P.setValue("allergens",A),v("")}},T=A=>{const V=c.filter(D=>D!==A);d(V),P.setValue("allergens",V)},I=async A=>{if(!j){n({title:"Error",description:"Please create a store first",variant:"destructive"});return}a(!0);try{const V={...A,storeId:j.id,ingredients:o,allergens:c,productType:N?"food":A.productType};if(!(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).ok)throw new Error("Failed to create product");n({title:N?"Menu item added successfully!":"Product added successfully!"}),await Promise.all([s.invalidateQueries({queryKey:[`/api/products/store/${j.id}`]}),s.invalidateQueries({queryKey:["/api/products"]}),s.invalidateQueries({queryKey:["/api/products/store",t==null?void 0:t.id]}),s.invalidateQueries({queryKey:["/api/seller/inventory",t==null?void 0:t.id]}),s.invalidateQueries({queryKey:["/api/seller/dashboard",t==null?void 0:t.id]})]),e("/seller/inventory")}catch{n({title:"Error",description:N?"Failed to add menu item":"Failed to add product",variant:"destructive"})}finally{a(!1)}};return!t||t.role!=="shopkeeper"?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-md",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center text-red-600",children:"Access Denied"})}),r.jsxs(G,{children:[r.jsx("p",{className:"text-center text-muted-foreground",children:"You need to be a shopkeeper to add products."}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx(Ae,{href:"/",className:"text-primary hover:underline",children:"Go back to homepage"})})]})]})}):j?r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"flex items-center justify-between py-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ae,{href:"/seller/inventory",children:r.jsxs($,{variant:"ghost",size:"sm",children:[r.jsx(bc,{className:"h-4 w-4 mr-2"}),"Back"]})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:N?"Add New Menu Item":"Add New Product"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:N?"Add items to your restaurant menu":"Add products to your store inventory"})]})]})})})}),r.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsx(Rr,{...P,children:r.jsxs("form",{onSubmit:P.handleSubmit(I),className:"space-y-6",children:[r.jsx(ae,{control:P.control,name:"name",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:N?"Menu Item Name *":"Product Name *"}),r.jsx(he,{children:r.jsx(de,{placeholder:N?"Enter menu item name":"Enter product name",className:"h-11",...A})}),r.jsx(me,{})]})}),!N&&r.jsx(ae,{control:P.control,name:"productType",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Product Type *"}),r.jsxs(dt,{onValueChange:A.onChange,defaultValue:A.value,children:[r.jsx(he,{children:r.jsx(ot,{className:"h-11",children:r.jsx(ut,{placeholder:"Select product type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"retail",children:"Retail Product"}),r.jsx(oe,{value:"food",children:"Food Item"})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:P.control,name:"categoryId",render:({field:A})=>{var V;return r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Category *"}),r.jsxs(dt,{onValueChange:D=>A.onChange(parseInt(D)),defaultValue:(V=A.value)==null?void 0:V.toString(),children:[r.jsx(he,{children:r.jsx(ot,{className:"h-11",children:r.jsx(ut,{placeholder:"Select a category"})})}),r.jsx(lt,{children:p.length>0?p.map(D=>r.jsx(oe,{value:D.id.toString(),children:D.name},D.id)):r.jsx(oe,{value:"1",disabled:!0,children:"Loading categories..."})})]}),r.jsx(me,{})]})}}),r.jsx(ae,{control:P.control,name:"description",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Description"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter product description",rows:4,...A})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsx(ae,{control:P.control,name:"price",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Price *"}),r.jsx(he,{children:r.jsx(de,{type:"number",step:"0.01",placeholder:"0.00",className:"h-11",...A})}),r.jsx(me,{})]})}),r.jsx(ae,{control:P.control,name:"originalPrice",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Original Price"}),r.jsx(he,{children:r.jsx(de,{type:"number",step:"0.01",placeholder:"0.00",className:"h-11",...A})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:P.control,name:"stock",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:N||k==="food"?"Available Quantity *":"Stock Quantity *"}),r.jsx(he,{children:r.jsx(de,{type:"number",placeholder:"0",className:"h-11",...A,onChange:V=>A.onChange(parseInt(V.target.value)||0)})}),r.jsx(me,{})]})}),(N||k==="food")&&r.jsxs("div",{className:"space-y-6 border-t pt-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Food Item Details"}),r.jsx(ae,{control:P.control,name:"preparationTime",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Preparation Time"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., 15-20 mins",className:"h-11",...A})}),r.jsx(me,{})]})}),r.jsx(ae,{control:P.control,name:"spiceLevel",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Spice Level"}),r.jsxs(dt,{onValueChange:A.onChange,value:A.value||"",children:[r.jsx(he,{children:r.jsx(ot,{className:"h-11",children:r.jsx(ut,{placeholder:"Select spice level"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"mild",children:"Mild"}),r.jsx(oe,{value:"medium",children:"Medium"}),r.jsx(oe,{value:"hot",children:"Hot"}),r.jsx(oe,{value:"extra-hot",children:"Extra Hot"})]})]}),r.jsx(me,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsx(ae,{control:P.control,name:"isVegetarian",render:({field:A})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base",children:"Vegetarian"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Contains no meat"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:A.value,onChange:A.onChange})})]})}),r.jsx(ae,{control:P.control,name:"isVegan",render:({field:A})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base",children:"Vegan"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"No animal products"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:A.value,onChange:A.onChange})})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(ce,{className:"text-base font-medium",children:"Ingredients"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{placeholder:"Add ingredient",value:h,onChange:A=>m(A.target.value),className:"h-11 flex-1",onKeyPress:A=>A.key==="Enter"&&(A.preventDefault(),_())}),r.jsxs($,{type:"button",variant:"outline",onClick:_,className:"h-11",children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add"]})]}),o.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((A,V)=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[A,r.jsx("button",{type:"button",onClick:()=>O(A),className:"ml-2 text-blue-600 hover:text-blue-800",children:r.jsx(Fr,{className:"h-3 w-3"})})]},V))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(ce,{className:"text-base font-medium",children:"Allergens"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{placeholder:"Add allergen",value:f,onChange:A=>v(A.target.value),className:"h-11 flex-1",onKeyPress:A=>A.key==="Enter"&&(A.preventDefault(),M())}),r.jsxs($,{type:"button",variant:"outline",onClick:M,className:"h-11",children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((A,V)=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:[A,r.jsx("button",{type:"button",onClick:()=>T(A),className:"ml-2 text-red-600 hover:text-red-800",children:r.jsx(Fr,{className:"h-3 w-3"})})]},V))})]}),r.jsx(ae,{control:P.control,name:"nutritionInfo",render:({field:A})=>r.jsxs(se,{children:[r.jsx(ce,{className:"text-base font-medium",children:"Nutrition Information"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"e.g., Calories: 350, Protein: 15g, Carbs: 45g, Fat: 12g",rows:3,...A})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:P.control,name:"images",render:({field:A})=>r.jsxs(se,{children:[r.jsx(Ks,{label:"Product Images",maxImages:6,minImages:1,onImagesChange:A.onChange,initialImages:A.value||[],className:"col-span-full"}),r.jsx(me,{})]})}),r.jsx($,{type:"submit",className:"w-full h-11 text-base",disabled:i,children:i?N?"Adding Menu Item...":"Adding Product...":N?"Add Menu Item":"Add Product"})]})})})})})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs(K,{className:"w-full max-w-md",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-center",children:"No Store Found"})}),r.jsxs(G,{children:[r.jsx("p",{className:"text-center text-muted-foreground mb-4",children:"You need to create a store before adding products."}),r.jsx("div",{className:"flex justify-center",children:r.jsx(Ae,{href:"/seller/store",children:r.jsx($,{children:"Create Store"})})})]})]})})}var Mbe=Array.isArray,Is=Mbe,Dbe=typeof Ff=="object"&&Ff&&Ff.Object===Object&&Ff,eq=Dbe,Ibe=eq,Lbe=typeof self=="object"&&self&&self.Object===Object&&self,Rbe=Ibe||Lbe||Function("return this")(),Xa=Rbe,$be=Xa,Fbe=$be.Symbol,Eg=Fbe,oL=Eg,tq=Object.prototype,zbe=tq.hasOwnProperty,Bbe=tq.toString,Tf=oL?oL.toStringTag:void 0;function Vbe(e){var t=zbe.call(e,Tf),n=e[Tf];try{e[Tf]=void 0;var s=!0}catch{}var i=Bbe.call(e);return s&&(t?e[Tf]=n:delete e[Tf]),i}var Ube=Vbe,Wbe=Object.prototype,Hbe=Wbe.toString;function qbe(e){return Hbe.call(e)}var Kbe=qbe,lL=Eg,Gbe=Ube,Zbe=Kbe,Ybe="[object Null]",Xbe="[object Undefined]",cL=lL?lL.toStringTag:void 0;function Qbe(e){return e==null?e===void 0?Xbe:Ybe:cL&&cL in Object(e)?Gbe(e):Zbe(e)}var rl=Qbe;function Jbe(e){return e!=null&&typeof e=="object"}var nl=Jbe,ewe=rl,twe=nl,rwe="[object Symbol]";function nwe(e){return typeof e=="symbol"||twe(e)&&ewe(e)==rwe}var zm=nwe,swe=Is,iwe=zm,awe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,owe=/^\w*$/;function lwe(e,t){if(swe(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||iwe(e)?!0:owe.test(e)||!awe.test(e)||t!=null&&e in Object(t)}var kA=lwe;function cwe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Pc=cwe;const Bm=ur(Pc);var dwe=rl,uwe=Pc,hwe="[object AsyncFunction]",mwe="[object Function]",fwe="[object GeneratorFunction]",pwe="[object Proxy]";function xwe(e){if(!uwe(e))return!1;var t=dwe(e);return t==mwe||t==fwe||t==hwe||t==pwe}var TA=xwe;const At=ur(TA);var gwe=Xa,vwe=gwe["__core-js_shared__"],ywe=vwe,U1=ywe,dL=function(){var e=/[^.]+$/.exec(U1&&U1.keys&&U1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function jwe(e){return!!dL&&dL in e}var bwe=jwe,wwe=Function.prototype,Nwe=wwe.toString;function Swe(e){if(e!=null){try{return Nwe.call(e)}catch{}try{return e+""}catch{}}return""}var rq=Swe,_we=TA,Pwe=bwe,Cwe=Pc,kwe=rq,Twe=/[\\^$.*+?()[\]{}|]/g,Awe=/^\[object .+?Constructor\]$/,Ewe=Function.prototype,Owe=Object.prototype,Mwe=Ewe.toString,Dwe=Owe.hasOwnProperty,Iwe=RegExp("^"+Mwe.call(Dwe).replace(Twe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Lwe(e){if(!Cwe(e)||Pwe(e))return!1;var t=_we(e)?Iwe:Awe;return t.test(kwe(e))}var Rwe=Lwe;function $we(e,t){return e==null?void 0:e[t]}var Fwe=$we,zwe=Rwe,Bwe=Fwe;function Vwe(e,t){var n=Bwe(e,t);return zwe(n)?n:void 0}var su=Vwe,Uwe=su,Wwe=Uwe(Object,"create"),nw=Wwe,uL=nw;function Hwe(){this.__data__=uL?uL(null):{},this.size=0}var qwe=Hwe;function Kwe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Gwe=Kwe,Zwe=nw,Ywe="__lodash_hash_undefined__",Xwe=Object.prototype,Qwe=Xwe.hasOwnProperty;function Jwe(e){var t=this.__data__;if(Zwe){var n=t[e];return n===Ywe?void 0:n}return Qwe.call(t,e)?t[e]:void 0}var eNe=Jwe,tNe=nw,rNe=Object.prototype,nNe=rNe.hasOwnProperty;function sNe(e){var t=this.__data__;return tNe?t[e]!==void 0:nNe.call(t,e)}var iNe=sNe,aNe=nw,oNe="__lodash_hash_undefined__";function lNe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=aNe&&t===void 0?oNe:t,this}var cNe=lNe,dNe=qwe,uNe=Gwe,hNe=eNe,mNe=iNe,fNe=cNe;function Vm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Vm.prototype.clear=dNe;Vm.prototype.delete=uNe;Vm.prototype.get=hNe;Vm.prototype.has=mNe;Vm.prototype.set=fNe;var pNe=Vm;function xNe(){this.__data__=[],this.size=0}var gNe=xNe;function vNe(e,t){return e===t||e!==e&&t!==t}var AA=vNe,yNe=AA;function jNe(e,t){for(var n=e.length;n--;)if(yNe(e[n][0],t))return n;return-1}var sw=jNe,bNe=sw,wNe=Array.prototype,NNe=wNe.splice;function SNe(e){var t=this.__data__,n=bNe(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():NNe.call(t,n,1),--this.size,!0}var _Ne=SNe,PNe=sw;function CNe(e){var t=this.__data__,n=PNe(t,e);return n<0?void 0:t[n][1]}var kNe=CNe,TNe=sw;function ANe(e){return TNe(this.__data__,e)>-1}var ENe=ANe,ONe=sw;function MNe(e,t){var n=this.__data__,s=ONe(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var DNe=MNe,INe=gNe,LNe=_Ne,RNe=kNe,$Ne=ENe,FNe=DNe;function Um(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Um.prototype.clear=INe;Um.prototype.delete=LNe;Um.prototype.get=RNe;Um.prototype.has=$Ne;Um.prototype.set=FNe;var iw=Um,zNe=su,BNe=Xa,VNe=zNe(BNe,"Map"),EA=VNe,hL=pNe,UNe=iw,WNe=EA;function HNe(){this.size=0,this.__data__={hash:new hL,map:new(WNe||UNe),string:new hL}}var qNe=HNe;function KNe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var GNe=KNe,ZNe=GNe;function YNe(e,t){var n=e.__data__;return ZNe(t)?n[typeof t=="string"?"string":"hash"]:n.map}var aw=YNe,XNe=aw;function QNe(e){var t=XNe(this,e).delete(e);return this.size-=t?1:0,t}var JNe=QNe,e1e=aw;function t1e(e){return e1e(this,e).get(e)}var r1e=t1e,n1e=aw;function s1e(e){return n1e(this,e).has(e)}var i1e=s1e,a1e=aw;function o1e(e,t){var n=a1e(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var l1e=o1e,c1e=qNe,d1e=JNe,u1e=r1e,h1e=i1e,m1e=l1e;function Wm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Wm.prototype.clear=c1e;Wm.prototype.delete=d1e;Wm.prototype.get=u1e;Wm.prototype.has=h1e;Wm.prototype.set=m1e;var OA=Wm,nq=OA,f1e="Expected a function";function MA(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(f1e);var n=function(){var s=arguments,i=t?t.apply(this,s):s[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,s);return n.cache=a.set(i,o)||a,o};return n.cache=new(MA.Cache||nq),n}MA.Cache=nq;var sq=MA;const p1e=ur(sq);var x1e=sq,g1e=500;function v1e(e){var t=x1e(e,function(s){return n.size===g1e&&n.clear(),s}),n=t.cache;return t}var y1e=v1e,j1e=y1e,b1e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,w1e=/\\(\\)?/g,N1e=j1e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(b1e,function(n,s,i,a){t.push(i?a.replace(w1e,"$1"):s||n)}),t}),S1e=N1e;function _1e(e,t){for(var n=-1,s=e==null?0:e.length,i=Array(s);++n<s;)i[n]=t(e[n],n,e);return i}var DA=_1e,mL=Eg,P1e=DA,C1e=Is,k1e=zm,T1e=1/0,fL=mL?mL.prototype:void 0,pL=fL?fL.toString:void 0;function iq(e){if(typeof e=="string")return e;if(C1e(e))return P1e(e,iq)+"";if(k1e(e))return pL?pL.call(e):"";var t=e+"";return t=="0"&&1/e==-T1e?"-0":t}var A1e=iq,E1e=A1e;function O1e(e){return e==null?"":E1e(e)}var aq=O1e,M1e=Is,D1e=kA,I1e=S1e,L1e=aq;function R1e(e,t){return M1e(e)?e:D1e(e,t)?[e]:I1e(L1e(e))}var oq=R1e,$1e=zm,F1e=1/0;function z1e(e){if(typeof e=="string"||$1e(e))return e;var t=e+"";return t=="0"&&1/e==-F1e?"-0":t}var ow=z1e,B1e=oq,V1e=ow;function U1e(e,t){t=B1e(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[V1e(t[n++])];return n&&n==s?e:void 0}var IA=U1e,W1e=IA;function H1e(e,t,n){var s=e==null?void 0:W1e(e,t);return s===void 0?n:s}var lq=H1e;const ki=ur(lq);function q1e(e){return e==null}var K1e=q1e;const $t=ur(K1e);var G1e=rl,Z1e=Is,Y1e=nl,X1e="[object String]";function Q1e(e){return typeof e=="string"||!Z1e(e)&&Y1e(e)&&G1e(e)==X1e}var J1e=Q1e;const Og=ur(J1e);var cq={exports:{}},hr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA=Symbol.for("react.element"),RA=Symbol.for("react.portal"),lw=Symbol.for("react.fragment"),cw=Symbol.for("react.strict_mode"),dw=Symbol.for("react.profiler"),uw=Symbol.for("react.provider"),hw=Symbol.for("react.context"),eSe=Symbol.for("react.server_context"),mw=Symbol.for("react.forward_ref"),fw=Symbol.for("react.suspense"),pw=Symbol.for("react.suspense_list"),xw=Symbol.for("react.memo"),gw=Symbol.for("react.lazy"),tSe=Symbol.for("react.offscreen"),dq;dq=Symbol.for("react.module.reference");function Ii(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case LA:switch(e=e.type,e){case lw:case dw:case cw:case fw:case pw:return e;default:switch(e=e&&e.$$typeof,e){case eSe:case hw:case mw:case gw:case xw:case uw:return e;default:return t}}case RA:return t}}}hr.ContextConsumer=hw;hr.ContextProvider=uw;hr.Element=LA;hr.ForwardRef=mw;hr.Fragment=lw;hr.Lazy=gw;hr.Memo=xw;hr.Portal=RA;hr.Profiler=dw;hr.StrictMode=cw;hr.Suspense=fw;hr.SuspenseList=pw;hr.isAsyncMode=function(){return!1};hr.isConcurrentMode=function(){return!1};hr.isContextConsumer=function(e){return Ii(e)===hw};hr.isContextProvider=function(e){return Ii(e)===uw};hr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===LA};hr.isForwardRef=function(e){return Ii(e)===mw};hr.isFragment=function(e){return Ii(e)===lw};hr.isLazy=function(e){return Ii(e)===gw};hr.isMemo=function(e){return Ii(e)===xw};hr.isPortal=function(e){return Ii(e)===RA};hr.isProfiler=function(e){return Ii(e)===dw};hr.isStrictMode=function(e){return Ii(e)===cw};hr.isSuspense=function(e){return Ii(e)===fw};hr.isSuspenseList=function(e){return Ii(e)===pw};hr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===lw||e===dw||e===cw||e===fw||e===pw||e===tSe||typeof e=="object"&&e!==null&&(e.$$typeof===gw||e.$$typeof===xw||e.$$typeof===uw||e.$$typeof===hw||e.$$typeof===mw||e.$$typeof===dq||e.getModuleId!==void 0)};hr.typeOf=Ii;cq.exports=hr;var rSe=cq.exports,nSe=rl,sSe=nl,iSe="[object Number]";function aSe(e){return typeof e=="number"||sSe(e)&&nSe(e)==iSe}var uq=aSe;const oSe=ur(uq);var lSe=uq;function cSe(e){return lSe(e)&&e!=+e}var dSe=cSe;const Hm=ur(dSe);var ra=function(t){return t===0?0:t>0?1:-1},rd=function(t){return Og(t)&&t.indexOf("%")===t.length-1},We=function(t){return oSe(t)&&!Hm(t)},Pn=function(t){return We(t)||Og(t)},uSe=0,qm=function(t){var n=++uSe;return"".concat(t||"").concat(n)},qd=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!We(t)&&!Og(t))return s;var a;if(rd(t)){var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return Hm(a)&&(a=s),i&&a>n&&(a=n),a},bl=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},hSe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,s={},i=0;i<n;i++)if(!s[t[i]])s[t[i]]=!0;else return!0;return!1},zn=function(t,n){return We(t)&&We(n)?function(s){return t+s*(n-t)}:function(){return n}};function q0(e,t,n){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):ki(s,t))===n})}function hh(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function F2(e){"@babel/helpers - typeof";return F2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F2(e)}var mSe=["viewBox","children"],fSe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xL=["points","pathLength"],W1={svg:mSe,polygon:xL,polyline:xL},$A=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],K0=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(b.isValidElement(t)&&(s=t.props),!Bm(s))return null;var i={};return Object.keys(s).forEach(function(a){$A.includes(a)&&(i[a]=n||function(o){return s[a](s,o)})}),i},pSe=function(t,n,s){return function(i){return t(n,s,i),null}},G0=function(t,n,s){if(!Bm(t)||F2(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var o=t[a];$A.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=pSe(o,n,s))}),i},xSe=["children"],gSe=["children"];function gL(e,t){if(e==null)return{};var n=vSe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function vSe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function z2(e){"@babel/helpers - typeof";return z2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z2(e)}var vL={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Mo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},yL=null,H1=null,FA=function e(t){if(t===yL&&Array.isArray(H1))return H1;var n=[];return b.Children.forEach(t,function(s){$t(s)||(rSe.isFragment(s)?n=n.concat(e(s.props.children)):n.push(s))}),H1=n,yL=t,n};function Ti(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(function(i){return Mo(i)}):s=[Mo(t)],FA(e).forEach(function(i){var a=ki(i,"type.displayName")||ki(i,"type.name");s.indexOf(a)!==-1&&n.push(i)}),n}function zs(e,t){var n=Ti(e,t);return n&&n[0]}var jL=function(t){if(!t||!t.props)return!1;var n=t.props,s=n.width,i=n.height;return!(!We(s)||s<=0||!We(i)||i<=0)},ySe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],jSe=function(t){return t&&t.type&&Og(t.type)&&ySe.indexOf(t.type)>=0},hq=function(t){return t&&z2(t)==="object"&&"clipDot"in t},bSe=function(t,n,s,i){var a,o=(a=W1==null?void 0:W1[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!At(t)&&(i&&o.includes(n)||fSe.includes(n))||s&&$A.includes(n)},Mt=function(t,n,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(b.isValidElement(t)&&(i=t.props),!Bm(i))return null;var a={};return Object.keys(i).forEach(function(o){var l;bSe((l=i)===null||l===void 0?void 0:l[o],o,n,s)&&(a[o]=i[o])}),a},B2=function e(t,n){if(t===n)return!0;var s=b.Children.count(t);if(s!==b.Children.count(n))return!1;if(s===0)return!0;if(s===1)return bL(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<s;i++){var a=t[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!e(a,o))return!1}else if(!bL(a,o))return!1}return!0},bL=function(t,n){if($t(t)&&$t(n))return!0;if(!$t(t)&&!$t(n)){var s=t.props||{},i=s.children,a=gL(s,xSe),o=n.props||{},l=o.children,c=gL(o,gSe);return i&&l?hh(a,c)&&B2(i,l):!i&&!l?hh(a,c):!1}return!1},wL=function(t,n){var s=[],i={};return FA(t).forEach(function(a,o){if(jSe(a))s.push(a);else if(a){var l=Mo(a.type),c=n[l]||{},d=c.handler,h=c.once;if(d&&(!h||!i[l])){var m=d(a,l,o);s.push(m),i[l]=!0}}}),s},wSe=function(t){var n=t&&t.type;return n&&vL[n]?vL[n]:null},NSe=function(t,n){return FA(n).indexOf(t)},SSe=["children","width","height","viewBox","className","style","title","desc"];function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},V2.apply(this,arguments)}function _Se(e,t){if(e==null)return{};var n=PSe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function PSe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function U2(e){var t=e.children,n=e.width,s=e.height,i=e.viewBox,a=e.className,o=e.style,l=e.title,c=e.desc,d=_Se(e,SSe),h=i||{width:n,height:s,x:0,y:0},m=Ht("recharts-surface",a);return te.createElement("svg",V2({},Mt(d,!0,"svg"),{className:m,width:n,height:s,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),te.createElement("title",null,l),te.createElement("desc",null,c),t)}var CSe=["children","className"];function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},W2.apply(this,arguments)}function kSe(e,t){if(e==null)return{};var n=TSe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function TSe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Sr=te.forwardRef(function(e,t){var n=e.children,s=e.className,i=kSe(e,CSe),a=Ht("recharts-layer",s);return te.createElement("g",W2({className:a},Mt(i,!0),{ref:t}),n)}),Do=function(t,n){for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a]};function ASe(e,t,n){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++s<i;)a[s]=e[s+t];return a}var ESe=ASe,OSe=ESe;function MSe(e,t,n){var s=e.length;return n=n===void 0?s:n,!t&&n>=s?e:OSe(e,t,n)}var DSe=MSe,ISe="\\ud800-\\udfff",LSe="\\u0300-\\u036f",RSe="\\ufe20-\\ufe2f",$Se="\\u20d0-\\u20ff",FSe=LSe+RSe+$Se,zSe="\\ufe0e\\ufe0f",BSe="\\u200d",VSe=RegExp("["+BSe+ISe+FSe+zSe+"]");function USe(e){return VSe.test(e)}var mq=USe;function WSe(e){return e.split("")}var HSe=WSe,fq="\\ud800-\\udfff",qSe="\\u0300-\\u036f",KSe="\\ufe20-\\ufe2f",GSe="\\u20d0-\\u20ff",ZSe=qSe+KSe+GSe,YSe="\\ufe0e\\ufe0f",XSe="["+fq+"]",H2="["+ZSe+"]",q2="\\ud83c[\\udffb-\\udfff]",QSe="(?:"+H2+"|"+q2+")",pq="[^"+fq+"]",xq="(?:\\ud83c[\\udde6-\\uddff]){2}",gq="[\\ud800-\\udbff][\\udc00-\\udfff]",JSe="\\u200d",vq=QSe+"?",yq="["+YSe+"]?",e_e="(?:"+JSe+"(?:"+[pq,xq,gq].join("|")+")"+yq+vq+")*",t_e=yq+vq+e_e,r_e="(?:"+[pq+H2+"?",H2,xq,gq,XSe].join("|")+")",n_e=RegExp(q2+"(?="+q2+")|"+r_e+t_e,"g");function s_e(e){return e.match(n_e)||[]}var i_e=s_e,a_e=HSe,o_e=mq,l_e=i_e;function c_e(e){return o_e(e)?l_e(e):a_e(e)}var d_e=c_e,u_e=DSe,h_e=mq,m_e=d_e,f_e=aq;function p_e(e){return function(t){t=f_e(t);var n=h_e(t)?m_e(t):void 0,s=n?n[0]:t.charAt(0),i=n?u_e(n,1).join(""):t.slice(1);return s[e]()+i}}var x_e=p_e,g_e=x_e,v_e=g_e("toUpperCase"),y_e=v_e;const vw=ur(y_e);function jr(e){return function(){return e}}const jq=Math.cos,Z0=Math.sin,ma=Math.sqrt,Y0=Math.PI,yw=2*Y0,K2=Math.PI,G2=2*K2,qc=1e-6,j_e=G2-qc;function bq(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function b_e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return bq;const n=10**t;return function(s){this._+=s[0];for(let i=1,a=s.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+s[i]}}class w_e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?bq:b_e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,i){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+i}`}bezierCurveTo(t,n,s,i,a,o){this._append`C${+t},${+n},${+s},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,s,i,a){if(t=+t,n=+n,s=+s,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=s-t,d=i-n,h=o-t,m=l-n,f=h*h+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>qc)if(!(Math.abs(m*c-d*h)>qc)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let v=s-o,p=i-l,x=c*c+d*d,y=v*v+p*p,w=Math.sqrt(x),j=Math.sqrt(f),N=a*Math.tan((K2-Math.acos((x+f-y)/(2*w*j)))/2),C=N/j,P=N/w;Math.abs(C-1)>qc&&this._append`L${t+C*h},${n+C*m}`,this._append`A${a},${a},0,0,${+(m*v>h*p)},${this._x1=t+P*c},${this._y1=n+P*d}`}}arc(t,n,s,i,a,o){if(t=+t,n=+n,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(i),c=s*Math.sin(i),d=t+l,h=n+c,m=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>qc||Math.abs(this._y1-h)>qc)&&this._append`L${d},${h}`,s&&(f<0&&(f=f%G2+G2),f>j_e?this._append`A${s},${s},0,1,${m},${t-l},${n-c}A${s},${s},0,1,${m},${this._x1=d},${this._y1=h}`:f>qc&&this._append`A${s},${s},0,${+(f>=K2)},${m},${this._x1=t+s*Math.cos(a)},${this._y1=n+s*Math.sin(a)}`)}rect(t,n,s,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+i}h${-s}Z`}toString(){return this._}}function zA(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new w_e(t)}function BA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wq(e){this._context=e}wq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function jw(e){return new wq(e)}function Nq(e){return e[0]}function Sq(e){return e[1]}function _q(e,t){var n=jr(!0),s=null,i=jw,a=null,o=zA(l);e=typeof e=="function"?e:e===void 0?Nq:jr(e),t=typeof t=="function"?t:t===void 0?Sq:jr(t);function l(c){var d,h=(c=BA(c)).length,m,f=!1,v;for(s==null&&(a=i(v=o())),d=0;d<=h;++d)!(d<h&&n(m=c[d],d,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(m,d,c),+t(m,d,c));if(v)return a=null,v+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:jr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:jr(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:jr(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,s!=null&&(a=i(s)),l):i},l.context=function(c){return arguments.length?(c==null?s=a=null:a=i(s=c),l):s},l}function Bv(e,t,n){var s=null,i=jr(!0),a=null,o=jw,l=null,c=zA(d);e=typeof e=="function"?e:e===void 0?Nq:jr(+e),t=typeof t=="function"?t:jr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Sq:jr(+n);function d(m){var f,v,p,x=(m=BA(m)).length,y,w=!1,j,N=new Array(x),C=new Array(x);for(a==null&&(l=o(j=c())),f=0;f<=x;++f){if(!(f<x&&i(y=m[f],f,m))===w)if(w=!w)v=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=f-1;p>=v;--p)l.point(N[p],C[p]);l.lineEnd(),l.areaEnd()}w&&(N[f]=+e(y,f,m),C[f]=+t(y,f,m),l.point(s?+s(y,f,m):N[f],n?+n(y,f,m):C[f]))}if(j)return l=null,j+""||null}function h(){return _q().defined(i).curve(o).context(a)}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:jr(+m),s=null,d):e},d.x0=function(m){return arguments.length?(e=typeof m=="function"?m:jr(+m),d):e},d.x1=function(m){return arguments.length?(s=m==null?null:typeof m=="function"?m:jr(+m),d):s},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:jr(+m),n=null,d):t},d.y0=function(m){return arguments.length?(t=typeof m=="function"?m:jr(+m),d):t},d.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:jr(+m),d):n},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(n)},d.lineX1=function(){return h().x(s).y(t)},d.defined=function(m){return arguments.length?(i=typeof m=="function"?m:jr(!!m),d):i},d.curve=function(m){return arguments.length?(o=m,a!=null&&(l=o(a)),d):o},d.context=function(m){return arguments.length?(m==null?a=l=null:l=o(a=m),d):a},d}class Pq{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function N_e(e){return new Pq(e,!0)}function S_e(e){return new Pq(e,!1)}const VA={draw(e,t){const n=ma(t/Y0);e.moveTo(n,0),e.arc(0,0,n,0,yw)}},__e={draw(e,t){const n=ma(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Cq=ma(1/3),P_e=Cq*2,C_e={draw(e,t){const n=ma(t/P_e),s=n*Cq;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},k_e={draw(e,t){const n=ma(t),s=-n/2;e.rect(s,s,n,n)}},T_e=.8908130915292852,kq=Z0(Y0/10)/Z0(7*Y0/10),A_e=Z0(yw/10)*kq,E_e=-jq(yw/10)*kq,O_e={draw(e,t){const n=ma(t*T_e),s=A_e*n,i=E_e*n;e.moveTo(0,-n),e.lineTo(s,i);for(let a=1;a<5;++a){const o=yw*a/5,l=jq(o),c=Z0(o);e.lineTo(c*n,-l*n),e.lineTo(l*s-c*i,c*s+l*i)}e.closePath()}},q1=ma(3),M_e={draw(e,t){const n=-ma(t/(q1*3));e.moveTo(0,n*2),e.lineTo(-q1*n,-n),e.lineTo(q1*n,-n),e.closePath()}},fi=-.5,pi=ma(3)/2,Z2=1/ma(12),D_e=(Z2/2+1)*3,I_e={draw(e,t){const n=ma(t/D_e),s=n/2,i=n*Z2,a=s,o=n*Z2+n,l=-a,c=o;e.moveTo(s,i),e.lineTo(a,o),e.lineTo(l,c),e.lineTo(fi*s-pi*i,pi*s+fi*i),e.lineTo(fi*a-pi*o,pi*a+fi*o),e.lineTo(fi*l-pi*c,pi*l+fi*c),e.lineTo(fi*s+pi*i,fi*i-pi*s),e.lineTo(fi*a+pi*o,fi*o-pi*a),e.lineTo(fi*l+pi*c,fi*c-pi*l),e.closePath()}};function L_e(e,t){let n=null,s=zA(i);e=typeof e=="function"?e:jr(e||VA),t=typeof t=="function"?t:jr(t===void 0?64:+t);function i(){let a;if(n||(n=a=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:jr(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:jr(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function X0(){}function Q0(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Tq(e){this._context=e}Tq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Q0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Q0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function R_e(e){return new Tq(e)}function Aq(e){this._context=e}Aq.prototype={areaStart:X0,areaEnd:X0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Q0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $_e(e){return new Aq(e)}function Eq(e){this._context=e}Eq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:Q0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function F_e(e){return new Eq(e)}function Oq(e){this._context=e}Oq.prototype={areaStart:X0,areaEnd:X0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function z_e(e){return new Oq(e)}function NL(e){return e<0?-1:1}function SL(e,t,n){var s=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(s||i<0&&-0),o=(n-e._y1)/(i||s<0&&-0),l=(a*i+o*s)/(s+i);return(NL(a)+NL(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function _L(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function K1(e,t,n){var s=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-s)/3;e._context.bezierCurveTo(s+l,i+l*t,a-l,o-l*n,a,o)}function J0(e){this._context=e}J0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:K1(this,this._t0,_L(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,K1(this,_L(this,n=SL(this,e,t)),n);break;default:K1(this,this._t0,n=SL(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Mq(e){this._context=new Dq(e)}(Mq.prototype=Object.create(J0.prototype)).point=function(e,t){J0.prototype.point.call(this,t,e)};function Dq(e){this._context=e}Dq.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,i,a){this._context.bezierCurveTo(t,e,s,n,a,i)}};function B_e(e){return new J0(e)}function V_e(e){return new Mq(e)}function Iq(e){this._context=e}Iq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=PL(e),i=PL(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(s[0][a],i[0][a],s[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function PL(e){var t,n=e.length-1,s,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=i[t]/a[t-1],a[t]-=s,o[t]-=s*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function U_e(e){return new Iq(e)}function bw(e,t){this._context=e,this._t=t}bw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function W_e(e){return new bw(e,.5)}function H_e(e){return new bw(e,0)}function q_e(e){return new bw(e,1)}function Xh(e,t){if((o=e.length)>1)for(var n=1,s,i,a=e[t[0]],o,l=a.length;n<o;++n)for(i=a,a=e[t[n]],s=0;s<l;++s)a[s][1]+=a[s][0]=isNaN(i[s][1])?i[s][0]:i[s][1]}function Y2(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function K_e(e,t){return e[t]}function G_e(e){const t=[];return t.key=e,t}function Z_e(){var e=jr([]),t=Y2,n=Xh,s=K_e;function i(a){var o=Array.from(e.apply(this,arguments),G_e),l,c=o.length,d=-1,h;for(const m of a)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(m,o[l].key,d,a)]).data=m;for(l=0,h=BA(t(o));l<c;++l)o[h[l]].index=l;return n(o,h),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:jr(Array.from(a)),i):e},i.value=function(a){return arguments.length?(s=typeof a=="function"?a:jr(+a),i):s},i.order=function(a){return arguments.length?(t=a==null?Y2:typeof a=="function"?a:jr(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??Xh,i):n},i}function Y_e(e,t){if((s=e.length)>0){for(var n,s,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<s;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<s;++n)e[n][i][1]/=o}Xh(e,t)}}function X_e(e,t){if((i=e.length)>0){for(var n=0,s=e[t[0]],i,a=s.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;s[n][1]+=s[n][0]=-l/2}Xh(e,t)}}function Q_e(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,s=1,i,a,o;s<a;++s){for(var l=0,c=0,d=0;l<o;++l){for(var h=e[t[l]],m=h[s][1]||0,f=h[s-1][1]||0,v=(m-f)/2,p=0;p<l;++p){var x=e[t[p]],y=x[s][1]||0,w=x[s-1][1]||0;v+=y-w}c+=m,d+=v*m}i[s-1][1]+=i[s-1][0]=n,c&&(n-=d/c)}i[s-1][1]+=i[s-1][0]=n,Xh(e,t)}}function vx(e){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vx(e)}var J_e=["type","size","sizeType"];function X2(){return X2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},X2.apply(this,arguments)}function CL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function kL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CL(Object(n),!0).forEach(function(s){e2e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function e2e(e,t,n){return t=t2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t2e(e){var t=r2e(e,"string");return vx(t)=="symbol"?t:t+""}function r2e(e,t){if(vx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(vx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n2e(e,t){if(e==null)return{};var n=s2e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function s2e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Lq={symbolCircle:VA,symbolCross:__e,symbolDiamond:C_e,symbolSquare:k_e,symbolStar:O_e,symbolTriangle:M_e,symbolWye:I_e},i2e=Math.PI/180,a2e=function(t){var n="symbol".concat(vw(t));return Lq[n]||VA},o2e=function(t,n,s){if(n==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*i2e;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},l2e=function(t,n){Lq["symbol".concat(vw(t))]=n},UA=function(t){var n=t.type,s=n===void 0?"circle":n,i=t.size,a=i===void 0?64:i,o=t.sizeType,l=o===void 0?"area":o,c=n2e(t,J_e),d=kL(kL({},c),{},{type:s,size:a,sizeType:l}),h=function(){var y=a2e(s),w=L_e().type(y).size(o2e(a,l,s));return w()},m=d.className,f=d.cx,v=d.cy,p=Mt(d,!0);return f===+f&&v===+v&&a===+a?te.createElement("path",X2({},p,{className:Ht("recharts-symbols",m),transform:"translate(".concat(f,", ").concat(v,")"),d:h()})):null};UA.registerSymbol=l2e;function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}function Q2(){return Q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Q2.apply(this,arguments)}function TL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function c2e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TL(Object(n),!0).forEach(function(s){yx(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function d2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u2e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,$q(s.key),s)}}function h2e(e,t,n){return t&&u2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function m2e(e,t,n){return t=ej(t),f2e(e,Rq()?Reflect.construct(t,n||[],ej(e).constructor):t.apply(e,n))}function f2e(e,t){if(t&&(Qh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p2e(e)}function p2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rq=function(){return!!e})()}function ej(e){return ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ej(e)}function x2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J2(e,t)}function J2(e,t){return J2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},J2(e,t)}function yx(e,t,n){return t=$q(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $q(e){var t=g2e(e,"string");return Qh(t)=="symbol"?t:t+""}function g2e(e,t){if(Qh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Qh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xi=32,WA=function(e){function t(){return d2e(this,t),m2e(this,t,arguments)}return x2e(t,e),h2e(t,[{key:"renderIcon",value:function(s){var i=this.props.inactiveColor,a=xi/2,o=xi/6,l=xi/3,c=s.inactive?i:s.color;if(s.type==="plainline")return te.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:a,x2:xi,y2:a,className:"recharts-legend-icon"});if(s.type==="line")return te.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(xi,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(s.type==="rect")return te.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(xi/8,"h").concat(xi,"v").concat(xi*3/4,"h").concat(-xi,"z"),className:"recharts-legend-icon"});if(te.isValidElement(s.legendIcon)){var d=c2e({},s);return delete d.legendIcon,te.cloneElement(s.legendIcon,d)}return te.createElement(UA,{fill:c,cx:a,cy:a,size:xi,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,i=this.props,a=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,h={x:0,y:0,width:xi,height:xi},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(v,p){var x=v.formatter||c,y=Ht(yx(yx({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",v.inactive));if(v.type==="none")return null;var w=At(v.value)?null:v.value;Do(!At(v.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var j=v.inactive?d:v.color;return te.createElement("li",Q2({className:y,style:m,key:"legend-item-".concat(p)},G0(s.props,v,p)),te.createElement(U2,{width:o,height:o,viewBox:h,style:f},s.renderIcon(v)),te.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},x?x(w,v,p):w))})}},{key:"render",value:function(){var s=this.props,i=s.payload,a=s.layout,o=s.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return te.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(b.PureComponent);yx(WA,"displayName","Legend");yx(WA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var v2e=iw;function y2e(){this.__data__=new v2e,this.size=0}var j2e=y2e;function b2e(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var w2e=b2e;function N2e(e){return this.__data__.get(e)}var S2e=N2e;function _2e(e){return this.__data__.has(e)}var P2e=_2e,C2e=iw,k2e=EA,T2e=OA,A2e=200;function E2e(e,t){var n=this.__data__;if(n instanceof C2e){var s=n.__data__;if(!k2e||s.length<A2e-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new T2e(s)}return n.set(e,t),this.size=n.size,this}var O2e=E2e,M2e=iw,D2e=j2e,I2e=w2e,L2e=S2e,R2e=P2e,$2e=O2e;function Km(e){var t=this.__data__=new M2e(e);this.size=t.size}Km.prototype.clear=D2e;Km.prototype.delete=I2e;Km.prototype.get=L2e;Km.prototype.has=R2e;Km.prototype.set=$2e;var Fq=Km,F2e="__lodash_hash_undefined__";function z2e(e){return this.__data__.set(e,F2e),this}var B2e=z2e;function V2e(e){return this.__data__.has(e)}var U2e=V2e,W2e=OA,H2e=B2e,q2e=U2e;function tj(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new W2e;++t<n;)this.add(e[t])}tj.prototype.add=tj.prototype.push=H2e;tj.prototype.has=q2e;var zq=tj;function K2e(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var Bq=K2e;function G2e(e,t){return e.has(t)}var Vq=G2e,Z2e=zq,Y2e=Bq,X2e=Vq,Q2e=1,J2e=2;function ePe(e,t,n,s,i,a){var o=n&Q2e,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=a.get(e),h=a.get(t);if(d&&h)return d==t&&h==e;var m=-1,f=!0,v=n&J2e?new Z2e:void 0;for(a.set(e,t),a.set(t,e);++m<l;){var p=e[m],x=t[m];if(s)var y=o?s(x,p,m,t,e,a):s(p,x,m,e,t,a);if(y!==void 0){if(y)continue;f=!1;break}if(v){if(!Y2e(t,function(w,j){if(!X2e(v,j)&&(p===w||i(p,w,n,s,a)))return v.push(j)})){f=!1;break}}else if(!(p===x||i(p,x,n,s,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var Uq=ePe,tPe=Xa,rPe=tPe.Uint8Array,nPe=rPe;function sPe(e){var t=-1,n=Array(e.size);return e.forEach(function(s,i){n[++t]=[i,s]}),n}var iPe=sPe;function aPe(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var HA=aPe,AL=Eg,EL=nPe,oPe=AA,lPe=Uq,cPe=iPe,dPe=HA,uPe=1,hPe=2,mPe="[object Boolean]",fPe="[object Date]",pPe="[object Error]",xPe="[object Map]",gPe="[object Number]",vPe="[object RegExp]",yPe="[object Set]",jPe="[object String]",bPe="[object Symbol]",wPe="[object ArrayBuffer]",NPe="[object DataView]",OL=AL?AL.prototype:void 0,G1=OL?OL.valueOf:void 0;function SPe(e,t,n,s,i,a,o){switch(n){case NPe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case wPe:return!(e.byteLength!=t.byteLength||!a(new EL(e),new EL(t)));case mPe:case fPe:case gPe:return oPe(+e,+t);case pPe:return e.name==t.name&&e.message==t.message;case vPe:case jPe:return e==t+"";case xPe:var l=cPe;case yPe:var c=s&uPe;if(l||(l=dPe),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;s|=hPe,o.set(e,t);var h=lPe(l(e),l(t),s,i,a,o);return o.delete(e),h;case bPe:if(G1)return G1.call(e)==G1.call(t)}return!1}var _Pe=SPe;function PPe(e,t){for(var n=-1,s=t.length,i=e.length;++n<s;)e[i+n]=t[n];return e}var Wq=PPe,CPe=Wq,kPe=Is;function TPe(e,t,n){var s=t(e);return kPe(e)?s:CPe(s,n(e))}var APe=TPe;function EPe(e,t){for(var n=-1,s=e==null?0:e.length,i=0,a=[];++n<s;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var OPe=EPe;function MPe(){return[]}var DPe=MPe,IPe=OPe,LPe=DPe,RPe=Object.prototype,$Pe=RPe.propertyIsEnumerable,ML=Object.getOwnPropertySymbols,FPe=ML?function(e){return e==null?[]:(e=Object(e),IPe(ML(e),function(t){return $Pe.call(e,t)}))}:LPe,zPe=FPe;function BPe(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var VPe=BPe,UPe=rl,WPe=nl,HPe="[object Arguments]";function qPe(e){return WPe(e)&&UPe(e)==HPe}var KPe=qPe,DL=KPe,GPe=nl,Hq=Object.prototype,ZPe=Hq.hasOwnProperty,YPe=Hq.propertyIsEnumerable,XPe=DL(function(){return arguments}())?DL:function(e){return GPe(e)&&ZPe.call(e,"callee")&&!YPe.call(e,"callee")},qA=XPe,rj={exports:{}};function QPe(){return!1}var JPe=QPe;rj.exports;(function(e,t){var n=Xa,s=JPe,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(rj,rj.exports);var qq=rj.exports,eCe=9007199254740991,tCe=/^(?:0|[1-9]\d*)$/;function rCe(e,t){var n=typeof e;return t=t??eCe,!!t&&(n=="number"||n!="symbol"&&tCe.test(e))&&e>-1&&e%1==0&&e<t}var KA=rCe,nCe=9007199254740991;function sCe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=nCe}var GA=sCe,iCe=rl,aCe=GA,oCe=nl,lCe="[object Arguments]",cCe="[object Array]",dCe="[object Boolean]",uCe="[object Date]",hCe="[object Error]",mCe="[object Function]",fCe="[object Map]",pCe="[object Number]",xCe="[object Object]",gCe="[object RegExp]",vCe="[object Set]",yCe="[object String]",jCe="[object WeakMap]",bCe="[object ArrayBuffer]",wCe="[object DataView]",NCe="[object Float32Array]",SCe="[object Float64Array]",_Ce="[object Int8Array]",PCe="[object Int16Array]",CCe="[object Int32Array]",kCe="[object Uint8Array]",TCe="[object Uint8ClampedArray]",ACe="[object Uint16Array]",ECe="[object Uint32Array]",Cr={};Cr[NCe]=Cr[SCe]=Cr[_Ce]=Cr[PCe]=Cr[CCe]=Cr[kCe]=Cr[TCe]=Cr[ACe]=Cr[ECe]=!0;Cr[lCe]=Cr[cCe]=Cr[bCe]=Cr[dCe]=Cr[wCe]=Cr[uCe]=Cr[hCe]=Cr[mCe]=Cr[fCe]=Cr[pCe]=Cr[xCe]=Cr[gCe]=Cr[vCe]=Cr[yCe]=Cr[jCe]=!1;function OCe(e){return oCe(e)&&aCe(e.length)&&!!Cr[iCe(e)]}var MCe=OCe;function DCe(e){return function(t){return e(t)}}var Kq=DCe,nj={exports:{}};nj.exports;(function(e,t){var n=eq,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===s,o=a&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(nj,nj.exports);var ICe=nj.exports,LCe=MCe,RCe=Kq,IL=ICe,LL=IL&&IL.isTypedArray,$Ce=LL?RCe(LL):LCe,Gq=$Ce,FCe=VPe,zCe=qA,BCe=Is,VCe=qq,UCe=KA,WCe=Gq,HCe=Object.prototype,qCe=HCe.hasOwnProperty;function KCe(e,t){var n=BCe(e),s=!n&&zCe(e),i=!n&&!s&&VCe(e),a=!n&&!s&&!i&&WCe(e),o=n||s||i||a,l=o?FCe(e.length,String):[],c=l.length;for(var d in e)(t||qCe.call(e,d))&&!(o&&(d=="length"||i&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||UCe(d,c)))&&l.push(d);return l}var GCe=KCe,ZCe=Object.prototype;function YCe(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ZCe;return e===n}var XCe=YCe;function QCe(e,t){return function(n){return e(t(n))}}var Zq=QCe,JCe=Zq,eke=JCe(Object.keys,Object),tke=eke,rke=XCe,nke=tke,ske=Object.prototype,ike=ske.hasOwnProperty;function ake(e){if(!rke(e))return nke(e);var t=[];for(var n in Object(e))ike.call(e,n)&&n!="constructor"&&t.push(n);return t}var oke=ake,lke=TA,cke=GA;function dke(e){return e!=null&&cke(e.length)&&!lke(e)}var Mg=dke,uke=GCe,hke=oke,mke=Mg;function fke(e){return mke(e)?uke(e):hke(e)}var ww=fke,pke=APe,xke=zPe,gke=ww;function vke(e){return pke(e,gke,xke)}var yke=vke,RL=yke,jke=1,bke=Object.prototype,wke=bke.hasOwnProperty;function Nke(e,t,n,s,i,a){var o=n&jke,l=RL(e),c=l.length,d=RL(t),h=d.length;if(c!=h&&!o)return!1;for(var m=c;m--;){var f=l[m];if(!(o?f in t:wke.call(t,f)))return!1}var v=a.get(e),p=a.get(t);if(v&&p)return v==t&&p==e;var x=!0;a.set(e,t),a.set(t,e);for(var y=o;++m<c;){f=l[m];var w=e[f],j=t[f];if(s)var N=o?s(j,w,f,t,e,a):s(w,j,f,e,t,a);if(!(N===void 0?w===j||i(w,j,n,s,a):N)){x=!1;break}y||(y=f=="constructor")}if(x&&!y){var C=e.constructor,P=t.constructor;C!=P&&"constructor"in e&&"constructor"in t&&!(typeof C=="function"&&C instanceof C&&typeof P=="function"&&P instanceof P)&&(x=!1)}return a.delete(e),a.delete(t),x}var Ske=Nke,_ke=su,Pke=Xa,Cke=_ke(Pke,"DataView"),kke=Cke,Tke=su,Ake=Xa,Eke=Tke(Ake,"Promise"),Oke=Eke,Mke=su,Dke=Xa,Ike=Mke(Dke,"Set"),Yq=Ike,Lke=su,Rke=Xa,$ke=Lke(Rke,"WeakMap"),Fke=$ke,eP=kke,tP=EA,rP=Oke,nP=Yq,sP=Fke,Xq=rl,Gm=rq,$L="[object Map]",zke="[object Object]",FL="[object Promise]",zL="[object Set]",BL="[object WeakMap]",VL="[object DataView]",Bke=Gm(eP),Vke=Gm(tP),Uke=Gm(rP),Wke=Gm(nP),Hke=Gm(sP),Kc=Xq;(eP&&Kc(new eP(new ArrayBuffer(1)))!=VL||tP&&Kc(new tP)!=$L||rP&&Kc(rP.resolve())!=FL||nP&&Kc(new nP)!=zL||sP&&Kc(new sP)!=BL)&&(Kc=function(e){var t=Xq(e),n=t==zke?e.constructor:void 0,s=n?Gm(n):"";if(s)switch(s){case Bke:return VL;case Vke:return $L;case Uke:return FL;case Wke:return zL;case Hke:return BL}return t});var qke=Kc,Z1=Fq,Kke=Uq,Gke=_Pe,Zke=Ske,UL=qke,WL=Is,HL=qq,Yke=Gq,Xke=1,qL="[object Arguments]",KL="[object Array]",Vv="[object Object]",Qke=Object.prototype,GL=Qke.hasOwnProperty;function Jke(e,t,n,s,i,a){var o=WL(e),l=WL(t),c=o?KL:UL(e),d=l?KL:UL(t);c=c==qL?Vv:c,d=d==qL?Vv:d;var h=c==Vv,m=d==Vv,f=c==d;if(f&&HL(e)){if(!HL(t))return!1;o=!0,h=!1}if(f&&!h)return a||(a=new Z1),o||Yke(e)?Kke(e,t,n,s,i,a):Gke(e,t,c,n,s,i,a);if(!(n&Xke)){var v=h&&GL.call(e,"__wrapped__"),p=m&&GL.call(t,"__wrapped__");if(v||p){var x=v?e.value():e,y=p?t.value():t;return a||(a=new Z1),i(x,y,n,s,a)}}return f?(a||(a=new Z1),Zke(e,t,n,s,i,a)):!1}var eTe=Jke,tTe=eTe,ZL=nl;function Qq(e,t,n,s,i){return e===t?!0:e==null||t==null||!ZL(e)&&!ZL(t)?e!==e&&t!==t:tTe(e,t,n,s,Qq,i)}var ZA=Qq,rTe=Fq,nTe=ZA,sTe=1,iTe=2;function aTe(e,t,n,s){var i=n.length,a=i,o=!s;if(e==null)return!a;for(e=Object(e);i--;){var l=n[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=n[i];var c=l[0],d=e[c],h=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var m=new rTe;if(s)var f=s(d,h,c,e,t,m);if(!(f===void 0?nTe(h,d,sTe|iTe,s,m):f))return!1}}return!0}var oTe=aTe,lTe=Pc;function cTe(e){return e===e&&!lTe(e)}var Jq=cTe,dTe=Jq,uTe=ww;function hTe(e){for(var t=uTe(e),n=t.length;n--;){var s=t[n],i=e[s];t[n]=[s,i,dTe(i)]}return t}var mTe=hTe;function fTe(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var eK=fTe,pTe=oTe,xTe=mTe,gTe=eK;function vTe(e){var t=xTe(e);return t.length==1&&t[0][2]?gTe(t[0][0],t[0][1]):function(n){return n===e||pTe(n,e,t)}}var yTe=vTe;function jTe(e,t){return e!=null&&t in Object(e)}var bTe=jTe,wTe=oq,NTe=qA,STe=Is,_Te=KA,PTe=GA,CTe=ow;function kTe(e,t,n){t=wTe(t,e);for(var s=-1,i=t.length,a=!1;++s<i;){var o=CTe(t[s]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++s!=i?a:(i=e==null?0:e.length,!!i&&PTe(i)&&_Te(o,i)&&(STe(e)||NTe(e)))}var TTe=kTe,ATe=bTe,ETe=TTe;function OTe(e,t){return e!=null&&ETe(e,t,ATe)}var MTe=OTe,DTe=ZA,ITe=lq,LTe=MTe,RTe=kA,$Te=Jq,FTe=eK,zTe=ow,BTe=1,VTe=2;function UTe(e,t){return RTe(e)&&$Te(t)?FTe(zTe(e),t):function(n){var s=ITe(n,e);return s===void 0&&s===t?LTe(n,e):DTe(t,s,BTe|VTe)}}var WTe=UTe;function HTe(e){return e}var Zm=HTe;function qTe(e){return function(t){return t==null?void 0:t[e]}}var KTe=qTe,GTe=IA;function ZTe(e){return function(t){return GTe(t,e)}}var YTe=ZTe,XTe=KTe,QTe=YTe,JTe=kA,eAe=ow;function tAe(e){return JTe(e)?XTe(eAe(e)):QTe(e)}var rAe=tAe,nAe=yTe,sAe=WTe,iAe=Zm,aAe=Is,oAe=rAe;function lAe(e){return typeof e=="function"?e:e==null?iAe:typeof e=="object"?aAe(e)?sAe(e[0],e[1]):nAe(e):oAe(e)}var Cc=lAe;function cAe(e,t,n,s){for(var i=e.length,a=n+(s?1:-1);s?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var tK=cAe;function dAe(e){return e!==e}var uAe=dAe;function hAe(e,t,n){for(var s=n-1,i=e.length;++s<i;)if(e[s]===t)return s;return-1}var mAe=hAe,fAe=tK,pAe=uAe,xAe=mAe;function gAe(e,t,n){return t===t?xAe(e,t,n):fAe(e,pAe,n)}var vAe=gAe,yAe=vAe;function jAe(e,t){var n=e==null?0:e.length;return!!n&&yAe(e,t,0)>-1}var bAe=jAe;function wAe(e,t,n){for(var s=-1,i=e==null?0:e.length;++s<i;)if(n(t,e[s]))return!0;return!1}var NAe=wAe;function SAe(){}var _Ae=SAe,Y1=Yq,PAe=_Ae,CAe=HA,kAe=1/0,TAe=Y1&&1/CAe(new Y1([,-0]))[1]==kAe?function(e){return new Y1(e)}:PAe,AAe=TAe,EAe=zq,OAe=bAe,MAe=NAe,DAe=Vq,IAe=AAe,LAe=HA,RAe=200;function $Ae(e,t,n){var s=-1,i=OAe,a=e.length,o=!0,l=[],c=l;if(n)o=!1,i=MAe;else if(a>=RAe){var d=t?null:IAe(e);if(d)return LAe(d);o=!1,i=DAe,c=new EAe}else c=t?[]:l;e:for(;++s<a;){var h=e[s],m=t?t(h):h;if(h=n||h!==0?h:0,o&&m===m){for(var f=c.length;f--;)if(c[f]===m)continue e;t&&c.push(m),l.push(h)}else i(c,m,n)||(c!==l&&c.push(m),l.push(h))}return l}var FAe=$Ae,zAe=Cc,BAe=FAe;function VAe(e,t){return e&&e.length?BAe(e,zAe(t)):[]}var UAe=VAe;const YL=ur(UAe);function rK(e,t,n){return t===!0?YL(e,n):At(t)?YL(e,t):e}function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}var WAe=["ref"];function XL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function io(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XL(Object(n),!0).forEach(function(s){Nw(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XL(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function HAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QL(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,sK(s.key),s)}}function qAe(e,t,n){return t&&QL(e.prototype,t),n&&QL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function KAe(e,t,n){return t=sj(t),GAe(e,nK()?Reflect.construct(t,n||[],sj(e).constructor):t.apply(e,n))}function GAe(e,t){if(t&&(Jh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZAe(e)}function ZAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nK=function(){return!!e})()}function sj(e){return sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sj(e)}function YAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iP(e,t)}function iP(e,t){return iP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},iP(e,t)}function Nw(e,t,n){return t=sK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sK(e){var t=XAe(e,"string");return Jh(t)=="symbol"?t:t+""}function XAe(e,t){if(Jh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Jh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QAe(e,t){if(e==null)return{};var n=JAe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function JAe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function eEe(e){return e.value}function tEe(e,t){if(te.isValidElement(e))return te.cloneElement(e,t);if(typeof e=="function")return te.createElement(e,t);t.ref;var n=QAe(t,WAe);return te.createElement(WA,n)}var JL=1,ec=function(e){function t(){var n;HAe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=KAe(this,t,[].concat(i)),Nw(n,"lastBoundingBox",{width:-1,height:-1}),n}return YAe(t,e),qAe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>JL||Math.abs(i.height-this.lastBoundingBox.height)>JL)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,s&&s(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?io({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var i=this.props,a=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,h=i.chartHeight,m,f;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&a==="vertical"){var v=this.getBBoxSnapshot();m={left:((d||0)-v.width)/2}}else m=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var p=this.getBBoxSnapshot();f={top:((h||0)-p.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return io(io({},m),f)}},{key:"render",value:function(){var s=this,i=this.props,a=i.content,o=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,h=i.payload,m=io(io({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return te.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(v){s.wrapperNode=v}},tEe(a,io(io({},this.props),{},{payload:rK(h,d,eEe)})))}}],[{key:"getWithHeight",value:function(s,i){var a=io(io({},this.defaultProps),s.props),o=a.layout;return o==="vertical"&&We(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||i}:null}}])}(b.PureComponent);Nw(ec,"displayName","Legend");Nw(ec,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var e3=Eg,rEe=qA,nEe=Is,t3=e3?e3.isConcatSpreadable:void 0;function sEe(e){return nEe(e)||rEe(e)||!!(t3&&e&&e[t3])}var iEe=sEe,aEe=Wq,oEe=iEe;function iK(e,t,n,s,i){var a=-1,o=e.length;for(n||(n=oEe),i||(i=[]);++a<o;){var l=e[a];t>0&&n(l)?t>1?iK(l,t-1,n,s,i):aEe(i,l):s||(i[i.length]=l)}return i}var aK=iK;function lEe(e){return function(t,n,s){for(var i=-1,a=Object(t),o=s(t),l=o.length;l--;){var c=o[e?l:++i];if(n(a[c],c,a)===!1)break}return t}}var cEe=lEe,dEe=cEe,uEe=dEe(),hEe=uEe,mEe=hEe,fEe=ww;function pEe(e,t){return e&&mEe(e,t,fEe)}var oK=pEe,xEe=Mg;function gEe(e,t){return function(n,s){if(n==null)return n;if(!xEe(n))return e(n,s);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&s(o[a],a,o)!==!1;);return n}}var vEe=gEe,yEe=oK,jEe=vEe,bEe=jEe(yEe),YA=bEe,wEe=YA,NEe=Mg;function SEe(e,t){var n=-1,s=NEe(e)?Array(e.length):[];return wEe(e,function(i,a,o){s[++n]=t(i,a,o)}),s}var lK=SEe;function _Ee(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var PEe=_Ee,r3=zm;function CEe(e,t){if(e!==t){var n=e!==void 0,s=e===null,i=e===e,a=r3(e),o=t!==void 0,l=t===null,c=t===t,d=r3(t);if(!l&&!d&&!a&&e>t||a&&o&&c&&!l&&!d||s&&o&&c||!n&&c||!i)return 1;if(!s&&!a&&!d&&e<t||d&&n&&i&&!s&&!a||l&&n&&i||!o&&i||!c)return-1}return 0}var kEe=CEe,TEe=kEe;function AEe(e,t,n){for(var s=-1,i=e.criteria,a=t.criteria,o=i.length,l=n.length;++s<o;){var c=TEe(i[s],a[s]);if(c){if(s>=l)return c;var d=n[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var EEe=AEe,X1=DA,OEe=IA,MEe=Cc,DEe=lK,IEe=PEe,LEe=Kq,REe=EEe,$Ee=Zm,FEe=Is;function zEe(e,t,n){t.length?t=X1(t,function(a){return FEe(a)?function(o){return OEe(o,a.length===1?a[0]:a)}:a}):t=[$Ee];var s=-1;t=X1(t,LEe(MEe));var i=DEe(e,function(a,o,l){var c=X1(t,function(d){return d(a)});return{criteria:c,index:++s,value:a}});return IEe(i,function(a,o){return REe(a,o,n)})}var BEe=zEe;function VEe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var UEe=VEe,WEe=UEe,n3=Math.max;function HEe(e,t,n){return t=n3(t===void 0?e.length-1:t,0),function(){for(var s=arguments,i=-1,a=n3(s.length-t,0),o=Array(a);++i<a;)o[i]=s[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=s[i];return l[t]=n(o),WEe(e,this,l)}}var qEe=HEe;function KEe(e){return function(){return e}}var GEe=KEe,ZEe=su,YEe=function(){try{var e=ZEe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),cK=YEe,XEe=GEe,s3=cK,QEe=Zm,JEe=s3?function(e,t){return s3(e,"toString",{configurable:!0,enumerable:!1,value:XEe(t),writable:!0})}:QEe,eOe=JEe,tOe=800,rOe=16,nOe=Date.now;function sOe(e){var t=0,n=0;return function(){var s=nOe(),i=rOe-(s-n);if(n=s,i>0){if(++t>=tOe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var iOe=sOe,aOe=eOe,oOe=iOe,lOe=oOe(aOe),cOe=lOe,dOe=Zm,uOe=qEe,hOe=cOe;function mOe(e,t){return hOe(uOe(e,t,dOe),e+"")}var fOe=mOe,pOe=AA,xOe=Mg,gOe=KA,vOe=Pc;function yOe(e,t,n){if(!vOe(n))return!1;var s=typeof t;return(s=="number"?xOe(n)&&gOe(t,n.length):s=="string"&&t in n)?pOe(n[t],e):!1}var Sw=yOe,jOe=aK,bOe=BEe,wOe=fOe,i3=Sw,NOe=wOe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&i3(e,t[0],t[1])?t=[]:n>2&&i3(t[0],t[1],t[2])&&(t=[t[0]]),bOe(e,jOe(t,1),[])}),SOe=NOe;const XA=ur(SOe);function jx(e){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(e)}function aP(){return aP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},aP.apply(this,arguments)}function _Oe(e,t){return TOe(e)||kOe(e,t)||COe(e,t)||POe()}function POe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function COe(e,t){if(e){if(typeof e=="string")return a3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a3(e,t)}}function a3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function kOe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function TOe(e){if(Array.isArray(e))return e}function o3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Q1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o3(Object(n),!0).forEach(function(s){AOe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o3(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function AOe(e,t,n){return t=EOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EOe(e){var t=OOe(e,"string");return jx(t)=="symbol"?t:t+""}function OOe(e,t){if(jx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(jx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MOe(e){return Array.isArray(e)&&Pn(e[0])&&Pn(e[1])?e.join(" ~ "):e}var DOe=function(t){var n=t.separator,s=n===void 0?" : ":n,i=t.contentStyle,a=i===void 0?{}:i,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,h=t.payload,m=t.formatter,f=t.itemSorter,v=t.wrapperClassName,p=t.labelClassName,x=t.label,y=t.labelFormatter,w=t.accessibilityLayer,j=w===void 0?!1:w,N=function(){if(h&&h.length){var A={padding:0,margin:0},V=(f?XA(h,f):h).map(function(D,W){if(D.type==="none")return null;var U=Q1({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},l),Q=D.formatter||m||MOe,q=D.value,B=D.name,z=q,H=B;if(Q&&z!=null&&H!=null){var X=Q(q,B,D,W,h);if(Array.isArray(X)){var ge=_Oe(X,2);z=ge[0],H=ge[1]}else z=X}return te.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:U},Pn(H)?te.createElement("span",{className:"recharts-tooltip-item-name"},H):null,Pn(H)?te.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,te.createElement("span",{className:"recharts-tooltip-item-value"},z),te.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return te.createElement("ul",{className:"recharts-tooltip-item-list",style:A},V)}return null},C=Q1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),P=Q1({margin:0},d),k=!$t(x),_=k?x:"",O=Ht("recharts-default-tooltip",v),M=Ht("recharts-tooltip-label",p);k&&y&&h!==void 0&&h!==null&&(_=y(x,h));var T=j?{role:"status","aria-live":"assertive"}:{};return te.createElement("div",aP({className:O,style:C},T),te.createElement("p",{className:M,style:P},te.isValidElement(_)?_:"".concat(_)),N())};function bx(e){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bx(e)}function Uv(e,t,n){return t=IOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IOe(e){var t=LOe(e,"string");return bx(t)=="symbol"?t:t+""}function LOe(e,t){if(bx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(bx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Af="recharts-tooltip-wrapper",ROe={visibility:"hidden"};function $Oe(e){var t=e.coordinate,n=e.translateX,s=e.translateY;return Ht(Af,Uv(Uv(Uv(Uv({},"".concat(Af,"-right"),We(n)&&t&&We(t.x)&&n>=t.x),"".concat(Af,"-left"),We(n)&&t&&We(t.x)&&n<t.x),"".concat(Af,"-bottom"),We(s)&&t&&We(t.y)&&s>=t.y),"".concat(Af,"-top"),We(s)&&t&&We(t.y)&&s<t.y))}function l3(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.key,i=e.offsetTopLeft,a=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(a&&We(a[s]))return a[s];var h=n[s]-l-i,m=n[s]+i;if(t[s])return o[s]?h:m;if(o[s]){var f=h,v=c[s];return f<v?Math.max(m,c[s]):Math.max(h,c[s])}var p=m+l,x=c[s]+d;return p>x?Math.max(h,c[s]):Math.max(m,c[s])}function FOe(e){var t=e.translateX,n=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function zOe(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,i=e.position,a=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,h,m;return o.height>0&&o.width>0&&n?(h=l3({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),m=l3({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=FOe({translateX:h,translateY:m,useTranslate3d:l})):d=ROe,{cssProperties:d,cssClasses:$Oe({translateX:h,translateY:m,coordinate:n})}}function em(e){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}function c3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function d3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(n),!0).forEach(function(s){lP(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c3(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function BOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VOe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uK(s.key),s)}}function UOe(e,t,n){return t&&VOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WOe(e,t,n){return t=ij(t),HOe(e,dK()?Reflect.construct(t,n||[],ij(e).constructor):t.apply(e,n))}function HOe(e,t){if(t&&(em(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qOe(e)}function qOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dK=function(){return!!e})()}function ij(e){return ij=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ij(e)}function KOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oP(e,t)}function oP(e,t){return oP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},oP(e,t)}function lP(e,t,n){return t=uK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uK(e){var t=GOe(e,"string");return em(t)=="symbol"?t:t+""}function GOe(e,t){if(em(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(em(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u3=1,ZOe=function(e){function t(){var n;BOe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=WOe(this,t,[].concat(i)),lP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),lP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,h;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(h=n.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&d!==void 0?d:0}})}}),n}return KOe(t,e),UOe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>u3||Math.abs(s.height-this.state.lastBoundingBox.height)>u3)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,h=i.coordinate,m=i.hasPayload,f=i.isAnimationActive,v=i.offset,p=i.position,x=i.reverseDirection,y=i.useTranslate3d,w=i.viewBox,j=i.wrapperStyle,N=zOe({allowEscapeViewBox:o,coordinate:h,offsetTopLeft:v,position:p,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:w}),C=N.cssClasses,P=N.cssProperties,k=d3(d3({transition:f&&a?"transform ".concat(l,"ms ").concat(c):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&m?"visible":"hidden",position:"absolute",top:0,left:0},j);return te.createElement("div",{tabIndex:-1,className:C,style:k,ref:function(O){s.wrapperNode=O}},d)}}])}(b.PureComponent),YOe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ba={isSsr:YOe(),get:function(t){return Ba[t]},set:function(t,n){if(typeof t=="string")Ba[t]=n;else{var s=Object.keys(t);s&&s.length&&s.forEach(function(i){Ba[i]=t[i]})}}};function tm(e){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tm(e)}function h3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function m3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h3(Object(n),!0).forEach(function(s){QA(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h3(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function XOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QOe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,mK(s.key),s)}}function JOe(e,t,n){return t&&QOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function e4e(e,t,n){return t=aj(t),t4e(e,hK()?Reflect.construct(t,n||[],aj(e).constructor):t.apply(e,n))}function t4e(e,t){if(t&&(tm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r4e(e)}function r4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hK=function(){return!!e})()}function aj(e){return aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aj(e)}function n4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cP(e,t)}function cP(e,t){return cP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},cP(e,t)}function QA(e,t,n){return t=mK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mK(e){var t=s4e(e,"string");return tm(t)=="symbol"?t:t+""}function s4e(e,t){if(tm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(tm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i4e(e){return e.dataKey}function a4e(e,t){return te.isValidElement(e)?te.cloneElement(e,t):typeof e=="function"?te.createElement(e,t):te.createElement(DOe,t)}var qi=function(e){function t(){return XOe(this,t),e4e(this,t,arguments)}return n4e(t,e),JOe(t,[{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,h=i.coordinate,m=i.filterNull,f=i.isAnimationActive,v=i.offset,p=i.payload,x=i.payloadUniqBy,y=i.position,w=i.reverseDirection,j=i.useTranslate3d,N=i.viewBox,C=i.wrapperStyle,P=p??[];m&&P.length&&(P=rK(p.filter(function(_){return _.value!=null&&(_.hide!==!0||s.props.includeHidden)}),x,i4e));var k=P.length>0;return te.createElement(ZOe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:a,coordinate:h,hasPayload:k,offset:v,position:y,reverseDirection:w,useTranslate3d:j,viewBox:N,wrapperStyle:C},a4e(d,m3(m3({},this.props),{},{payload:P})))}}])}(b.PureComponent);QA(qi,"displayName","Tooltip");QA(qi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ba.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var o4e=Xa,l4e=function(){return o4e.Date.now()},c4e=l4e,d4e=/\s/;function u4e(e){for(var t=e.length;t--&&d4e.test(e.charAt(t)););return t}var h4e=u4e,m4e=h4e,f4e=/^\s+/;function p4e(e){return e&&e.slice(0,m4e(e)+1).replace(f4e,"")}var x4e=p4e,g4e=x4e,f3=Pc,v4e=zm,p3=NaN,y4e=/^[-+]0x[0-9a-f]+$/i,j4e=/^0b[01]+$/i,b4e=/^0o[0-7]+$/i,w4e=parseInt;function N4e(e){if(typeof e=="number")return e;if(v4e(e))return p3;if(f3(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=f3(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=g4e(e);var n=j4e.test(e);return n||b4e.test(e)?w4e(e.slice(2),n?2:8):y4e.test(e)?p3:+e}var fK=N4e,S4e=Pc,J1=c4e,x3=fK,_4e="Expected a function",P4e=Math.max,C4e=Math.min;function k4e(e,t,n){var s,i,a,o,l,c,d=0,h=!1,m=!1,f=!0;if(typeof e!="function")throw new TypeError(_4e);t=x3(t)||0,S4e(n)&&(h=!!n.leading,m="maxWait"in n,a=m?P4e(x3(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f);function v(k){var _=s,O=i;return s=i=void 0,d=k,o=e.apply(O,_),o}function p(k){return d=k,l=setTimeout(w,t),h?v(k):o}function x(k){var _=k-c,O=k-d,M=t-_;return m?C4e(M,a-O):M}function y(k){var _=k-c,O=k-d;return c===void 0||_>=t||_<0||m&&O>=a}function w(){var k=J1();if(y(k))return j(k);l=setTimeout(w,x(k))}function j(k){return l=void 0,f&&s?v(k):(s=i=void 0,o)}function N(){l!==void 0&&clearTimeout(l),d=0,s=c=i=l=void 0}function C(){return l===void 0?o:j(J1())}function P(){var k=J1(),_=y(k);if(s=arguments,i=this,c=k,_){if(l===void 0)return p(c);if(m)return clearTimeout(l),l=setTimeout(w,t),v(c)}return l===void 0&&(l=setTimeout(w,t)),o}return P.cancel=N,P.flush=C,P}var T4e=k4e,A4e=T4e,E4e=Pc,O4e="Expected a function";function M4e(e,t,n){var s=!0,i=!0;if(typeof e!="function")throw new TypeError(O4e);return E4e(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),A4e(e,t,{leading:s,maxWait:t,trailing:i})}var D4e=M4e;const pK=ur(D4e);function wx(e){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wx(e)}function g3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Wv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g3(Object(n),!0).forEach(function(s){I4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g3(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function I4e(e,t,n){return t=L4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L4e(e){var t=R4e(e,"string");return wx(t)=="symbol"?t:t+""}function R4e(e,t){if(wx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(wx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $4e(e,t){return V4e(e)||B4e(e,t)||z4e(e,t)||F4e()}function F4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z4e(e,t){if(e){if(typeof e=="string")return v3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v3(e,t)}}function v3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function B4e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function V4e(e){if(Array.isArray(e))return e}var y3=b.forwardRef(function(e,t){var n=e.aspect,s=e.initialDimension,i=s===void 0?{width:-1,height:-1}:s,a=e.width,o=a===void 0?"100%":a,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,h=d===void 0?0:d,m=e.minHeight,f=e.maxHeight,v=e.children,p=e.debounce,x=p===void 0?0:p,y=e.id,w=e.className,j=e.onResize,N=e.style,C=N===void 0?{}:N,P=b.useRef(null),k=b.useRef();k.current=j,b.useImperativeHandle(t,function(){return Object.defineProperty(P.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),P.current},configurable:!0})});var _=b.useState({containerWidth:i.width,containerHeight:i.height}),O=$4e(_,2),M=O[0],T=O[1],I=b.useCallback(function(V,D){T(function(W){var U=Math.round(V),Q=Math.round(D);return W.containerWidth===U&&W.containerHeight===Q?W:{containerWidth:U,containerHeight:Q}})},[]);b.useEffect(function(){var V=function(B){var z,H=B[0].contentRect,X=H.width,ge=H.height;I(X,ge),(z=k.current)===null||z===void 0||z.call(k,X,ge)};x>0&&(V=pK(V,x,{trailing:!0,leading:!1}));var D=new ResizeObserver(V),W=P.current.getBoundingClientRect(),U=W.width,Q=W.height;return I(U,Q),D.observe(P.current),function(){D.disconnect()}},[I,x]);var A=b.useMemo(function(){var V=M.containerWidth,D=M.containerHeight;if(V<0||D<0)return null;Do(rd(o)||rd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Do(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=rd(o)?V:o,U=rd(c)?D:c;n&&n>0&&(W?U=W/n:U&&(W=U*n),f&&U>f&&(U=f)),Do(W>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,U,o,c,h,m,n);var Q=!Array.isArray(v)&&Mo(v.type).endsWith("Chart");return te.Children.map(v,function(q){return te.isValidElement(q)?b.cloneElement(q,Wv({width:W,height:U},Q?{style:Wv({height:"100%",width:"100%",maxHeight:U,maxWidth:W},q.props.style)}:{})):q})},[n,v,c,f,m,h,M,o]);return te.createElement("div",{id:y?"".concat(y):void 0,className:Ht("recharts-responsive-container",w),style:Wv(Wv({},C),{},{width:o,height:c,minWidth:h,minHeight:m,maxHeight:f}),ref:P},A)}),xK=function(t){return null};xK.displayName="Cell";function Nx(e){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nx(e)}function j3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function dP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j3(Object(n),!0).forEach(function(s){U4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j3(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function U4e(e,t,n){return t=W4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W4e(e){var t=H4e(e,"string");return Nx(t)=="symbol"?t:t+""}function H4e(e,t){if(Nx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Nx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _u={widthCache:{},cacheCount:0},q4e=2e3,K4e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},b3="recharts_measurement_span";function G4e(e){var t=dP({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var xp=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ba.isSsr)return{width:0,height:0};var s=G4e(n),i=JSON.stringify({text:t,copyStyle:s});if(_u.widthCache[i])return _u.widthCache[i];try{var a=document.getElementById(b3);a||(a=document.createElement("span"),a.setAttribute("id",b3),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=dP(dP({},K4e),s);Object.assign(a.style,o),a.textContent="".concat(t);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return _u.widthCache[i]=c,++_u.cacheCount>q4e&&(_u.cacheCount=0,_u.widthCache={}),c}catch{return{width:0,height:0}}},Z4e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Sx(e){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sx(e)}function oj(e,t){return J4e(e)||Q4e(e,t)||X4e(e,t)||Y4e()}function Y4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X4e(e,t){if(e){if(typeof e=="string")return w3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w3(e,t)}}function w3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Q4e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function J4e(e){if(Array.isArray(e))return e}function eMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N3(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,rMe(s.key),s)}}function tMe(e,t,n){return t&&N3(e.prototype,t),n&&N3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rMe(e){var t=nMe(e,"string");return Sx(t)=="symbol"?t:t+""}function nMe(e,t){if(Sx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Sx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var S3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sMe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,iMe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,gK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},aMe=Object.keys(gK),Gu="NaN";function oMe(e,t){return e*gK[t]}var Hv=function(){function e(t,n){eMe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!sMe.test(n)&&(this.num=NaN,this.unit=""),aMe.includes(n)&&(this.num=oMe(t,n),this.unit="px")}return tMe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var s,i=(s=iMe.exec(n))!==null&&s!==void 0?s:[],a=oj(i,3),o=a[1],l=a[2];return new e(parseFloat(o),l??"")}}])}();function vK(e){if(e.includes(Gu))return Gu;for(var t=e;t.includes("*")||t.includes("/");){var n,s=(n=S3.exec(t))!==null&&n!==void 0?n:[],i=oj(s,4),a=i[1],o=i[2],l=i[3],c=Hv.parse(a??""),d=Hv.parse(l??""),h=o==="*"?c.multiply(d):c.divide(d);if(h.isNaN())return Gu;t=t.replace(S3,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,f=(m=_3.exec(t))!==null&&m!==void 0?m:[],v=oj(f,4),p=v[1],x=v[2],y=v[3],w=Hv.parse(p??""),j=Hv.parse(y??""),N=x==="+"?w.add(j):w.subtract(j);if(N.isNaN())return Gu;t=t.replace(_3,N.toString())}return t}var P3=/\(([^()]*)\)/;function lMe(e){for(var t=e;t.includes("(");){var n=P3.exec(t),s=oj(n,2),i=s[1];t=t.replace(P3,vK(i))}return t}function cMe(e){var t=e.replace(/\s+/g,"");return t=lMe(t),t=vK(t),t}function dMe(e){try{return cMe(e)}catch{return Gu}}function eS(e){var t=dMe(e.slice(5,-1));return t===Gu?"":t}var uMe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],hMe=["dx","dy","angle","className","breakAll"];function uP(){return uP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},uP.apply(this,arguments)}function C3(e,t){if(e==null)return{};var n=mMe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function mMe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function k3(e,t){return gMe(e)||xMe(e,t)||pMe(e,t)||fMe()}function fMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pMe(e,t){if(e){if(typeof e=="string")return T3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T3(e,t)}}function T3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function xMe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function gMe(e){if(Array.isArray(e))return e}var yK=/[ \f\n\r\t\v\u2028\u2029]+/,jK=function(t){var n=t.children,s=t.breakAll,i=t.style;try{var a=[];$t(n)||(s?a=n.toString().split(""):a=n.toString().split(yK));var o=a.map(function(c){return{word:c,width:xp(c,i).width}}),l=s?0:xp("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},vMe=function(t,n,s,i,a){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,h=We(o),m=l,f=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(U,Q){var q=Q.word,B=Q.width,z=U[U.length-1];if(z&&(i==null||a||z.width+B+s<Number(i)))z.words.push(q),z.width+=B+s;else{var H={words:[q],width:B};U.push(H)}return U},[])},v=f(n),p=function(W){return W.reduce(function(U,Q){return U.width>Q.width?U:Q})};if(!h)return v;for(var x="",y=function(W){var U=m.slice(0,W),Q=jK({breakAll:d,style:c,children:U+x}).wordsWithComputedWidth,q=f(Q),B=q.length>o||p(q).width>Number(i);return[B,q]},w=0,j=m.length-1,N=0,C;w<=j&&N<=m.length-1;){var P=Math.floor((w+j)/2),k=P-1,_=y(k),O=k3(_,2),M=O[0],T=O[1],I=y(P),A=k3(I,1),V=A[0];if(!M&&!V&&(w=P+1),M&&V&&(j=P-1),!M&&V){C=T;break}N++}return C||v},A3=function(t){var n=$t(t)?[]:t.toString().split(yK);return[{words:n}]},yMe=function(t){var n=t.width,s=t.scaleToFit,i=t.children,a=t.style,o=t.breakAll,l=t.maxLines;if((n||s)&&!Ba.isSsr){var c,d,h=jK({breakAll:o,children:i,style:a});if(h){var m=h.wordsWithComputedWidth,f=h.spaceWidth;c=m,d=f}else return A3(i);return vMe({breakAll:o,children:i,maxLines:l,style:a},c,d,n,s)}return A3(i)},E3="#808080",lj=function(t){var n=t.x,s=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,h=t.scaleToFit,m=h===void 0?!1:h,f=t.textAnchor,v=f===void 0?"start":f,p=t.verticalAnchor,x=p===void 0?"end":p,y=t.fill,w=y===void 0?E3:y,j=C3(t,uMe),N=b.useMemo(function(){return yMe({breakAll:j.breakAll,children:j.children,maxLines:j.maxLines,scaleToFit:m,style:j.style,width:j.width})},[j.breakAll,j.children,j.maxLines,m,j.style,j.width]),C=j.dx,P=j.dy,k=j.angle,_=j.className,O=j.breakAll,M=C3(j,hMe);if(!Pn(s)||!Pn(a))return null;var T=s+(We(C)?C:0),I=a+(We(P)?P:0),A;switch(x){case"start":A=eS("calc(".concat(d,")"));break;case"middle":A=eS("calc(".concat((N.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:A=eS("calc(".concat(N.length-1," * -").concat(l,")"));break}var V=[];if(m){var D=N[0].width,W=j.width;V.push("scale(".concat((We(W)?W/D:1)/D,")"))}return k&&V.push("rotate(".concat(k,", ").concat(T,", ").concat(I,")")),V.length&&(M.transform=V.join(" ")),te.createElement("text",uP({},Mt(M,!0),{x:T,y:I,className:Ht("recharts-text",_),textAnchor:v,fill:w.includes("url")?E3:w}),N.map(function(U,Q){var q=U.words.join(O?"":" ");return te.createElement("tspan",{x:T,dy:Q===0?A:l,key:"".concat(q,"-").concat(Q)},q)}))};function tc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jMe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function JA(e){let t,n,s;e.length!==2?(t=tc,n=(l,c)=>tc(e(l),c),s=(l,c)=>e(l)-c):(t=e===tc||e===jMe?e:bMe,n=e,s=e);function i(l,c,d=0,h=l.length){if(d<h){if(t(c,c)!==0)return h;do{const m=d+h>>>1;n(l[m],c)<0?d=m+1:h=m}while(d<h)}return d}function a(l,c,d=0,h=l.length){if(d<h){if(t(c,c)!==0)return h;do{const m=d+h>>>1;n(l[m],c)<=0?d=m+1:h=m}while(d<h)}return d}function o(l,c,d=0,h=l.length){const m=i(l,c,d,h-1);return m>d&&s(l[m-1],c)>-s(l[m],c)?m-1:m}return{left:i,center:o,right:a}}function bMe(){return 0}function bK(e){return e===null?NaN:+e}function*wMe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const NMe=JA(tc),Dg=NMe.right;JA(bK).center;class O3 extends Map{constructor(t,n=PMe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,i]of t)this.set(s,i)}get(t){return super.get(M3(this,t))}has(t){return super.has(M3(this,t))}set(t,n){return super.set(SMe(this,t),n)}delete(t){return super.delete(_Me(this,t))}}function M3({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function SMe({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function _Me({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function PMe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function CMe(e=tc){if(e===tc)return wK;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const s=e(t,n);return s||s===0?s:(e(n,n)===0)-(e(t,t)===0)}}function wK(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const kMe=Math.sqrt(50),TMe=Math.sqrt(10),AMe=Math.sqrt(2);function cj(e,t,n){const s=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(s)),a=s/Math.pow(10,i),o=a>=kMe?10:a>=TMe?5:a>=AMe?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?cj(e,t,n*2):[l,c,d]}function hP(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const s=t<e,[i,a,o]=s?cj(t,e,n):cj(e,t,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(a-d)/-o;else for(let d=0;d<l;++d)c[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function mP(e,t,n){return t=+t,e=+e,n=+n,cj(e,t,n)[2]}function fP(e,t,n){t=+t,e=+e,n=+n;const s=t<e,i=s?mP(t,e,n):mP(e,t,n);return(s?-1:1)*(i<0?1/-i:i)}function D3(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function I3(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function NK(e,t,n=0,s=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(e.length-1,s)),!(n<=t&&t<=s))return e;for(i=i===void 0?wK:CMe(i);s>n;){if(s-n>600){const c=s-n+1,d=t-n+1,h=Math.log(c),m=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*m*(c-m)/c)*(d-c/2<0?-1:1),v=Math.max(n,Math.floor(t-d*m/c+f)),p=Math.min(s,Math.floor(t+(c-d)*m/c+f));NK(e,t,v,p,i)}const a=e[t];let o=n,l=s;for(Ef(e,n,t),i(e[s],a)>0&&Ef(e,n,s);o<l;){for(Ef(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?Ef(e,n,l):(++l,Ef(e,l,s)),l<=t&&(n=l+1),t<=l&&(s=l-1)}return e}function Ef(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function EMe(e,t,n){if(e=Float64Array.from(wMe(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return I3(e);if(t>=1)return D3(e);var s,i=(s-1)*t,a=Math.floor(i),o=D3(NK(e,a).subarray(0,a+1)),l=I3(e.subarray(a+1));return o+(l-o)*(i-a)}}function OMe(e,t,n=bK){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,i=(s-1)*t,a=Math.floor(i),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function MMe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var s=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++s<i;)a[s]=e+s*n;return a}function Li(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function sl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const pP=Symbol("implicit");function eE(){var e=new O3,t=[],n=[],s=pP;function i(a){let o=e.get(a);if(o===void 0){if(s!==pP)return s;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new O3;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return eE(t,n).unknown(s)},Li.apply(i,arguments),i}function _x(){var e=eE().unknown(void 0),t=e.domain,n=e.range,s=0,i=1,a,o,l=!1,c=0,d=0,h=.5;delete e.unknown;function m(){var f=t().length,v=i<s,p=v?i:s,x=v?s:i;a=(x-p)/Math.max(1,f-c+d*2),l&&(a=Math.floor(a)),p+=(x-p-a*(f-c))*h,o=a*(1-c),l&&(p=Math.round(p),o=Math.round(o));var y=MMe(f).map(function(w){return p+a*w});return n(v?y.reverse():y)}return e.domain=function(f){return arguments.length?(t(f),m()):t()},e.range=function(f){return arguments.length?([s,i]=f,s=+s,i=+i,m()):[s,i]},e.rangeRound=function(f){return[s,i]=f,s=+s,i=+i,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(f){return arguments.length?(l=!!f,m()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),m()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),m()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,m()):d},e.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),m()):h},e.copy=function(){return _x(t(),[s,i]).round(l).paddingInner(c).paddingOuter(d).align(h)},Li.apply(m(),arguments)}function SK(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return SK(t())},e}function gp(){return SK(_x.apply(null,arguments).paddingInner(1))}function tE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _K(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Ig(){}var Px=.7,dj=1/Px,mh="\\s*([+-]?\\d+)\\s*",Cx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Va="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DMe=/^#([0-9a-f]{3,8})$/,IMe=new RegExp(`^rgb\\(${mh},${mh},${mh}\\)$`),LMe=new RegExp(`^rgb\\(${Va},${Va},${Va}\\)$`),RMe=new RegExp(`^rgba\\(${mh},${mh},${mh},${Cx}\\)$`),$Me=new RegExp(`^rgba\\(${Va},${Va},${Va},${Cx}\\)$`),FMe=new RegExp(`^hsl\\(${Cx},${Va},${Va}\\)$`),zMe=new RegExp(`^hsla\\(${Cx},${Va},${Va},${Cx}\\)$`),L3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tE(Ig,kx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:R3,formatHex:R3,formatHex8:BMe,formatHsl:VMe,formatRgb:$3,toString:$3});function R3(){return this.rgb().formatHex()}function BMe(){return this.rgb().formatHex8()}function VMe(){return PK(this).formatHsl()}function $3(){return this.rgb().formatRgb()}function kx(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=DMe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?F3(t):n===3?new Ts(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?qv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?qv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=IMe.exec(e))?new Ts(t[1],t[2],t[3],1):(t=LMe.exec(e))?new Ts(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=RMe.exec(e))?qv(t[1],t[2],t[3],t[4]):(t=$Me.exec(e))?qv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=FMe.exec(e))?V3(t[1],t[2]/100,t[3]/100,1):(t=zMe.exec(e))?V3(t[1],t[2]/100,t[3]/100,t[4]):L3.hasOwnProperty(e)?F3(L3[e]):e==="transparent"?new Ts(NaN,NaN,NaN,0):null}function F3(e){return new Ts(e>>16&255,e>>8&255,e&255,1)}function qv(e,t,n,s){return s<=0&&(e=t=n=NaN),new Ts(e,t,n,s)}function UMe(e){return e instanceof Ig||(e=kx(e)),e?(e=e.rgb(),new Ts(e.r,e.g,e.b,e.opacity)):new Ts}function xP(e,t,n,s){return arguments.length===1?UMe(e):new Ts(e,t,n,s??1)}function Ts(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}tE(Ts,xP,_K(Ig,{brighter(e){return e=e==null?dj:Math.pow(dj,e),new Ts(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Px:Math.pow(Px,e),new Ts(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ts(bd(this.r),bd(this.g),bd(this.b),uj(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:z3,formatHex:z3,formatHex8:WMe,formatRgb:B3,toString:B3}));function z3(){return`#${nd(this.r)}${nd(this.g)}${nd(this.b)}`}function WMe(){return`#${nd(this.r)}${nd(this.g)}${nd(this.b)}${nd((isNaN(this.opacity)?1:this.opacity)*255)}`}function B3(){const e=uj(this.opacity);return`${e===1?"rgb(":"rgba("}${bd(this.r)}, ${bd(this.g)}, ${bd(this.b)}${e===1?")":`, ${e})`}`}function uj(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function nd(e){return e=bd(e),(e<16?"0":"")+e.toString(16)}function V3(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ji(e,t,n,s)}function PK(e){if(e instanceof Ji)return new Ji(e.h,e.s,e.l,e.opacity);if(e instanceof Ig||(e=kx(e)),!e)return new Ji;if(e instanceof Ji)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,i=Math.min(t,n,s),a=Math.max(t,n,s),o=NaN,l=a-i,c=(a+i)/2;return l?(t===a?o=(n-s)/l+(n<s)*6:n===a?o=(s-t)/l+2:o=(t-n)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new Ji(o,l,c,e.opacity)}function HMe(e,t,n,s){return arguments.length===1?PK(e):new Ji(e,t,n,s??1)}function Ji(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}tE(Ji,HMe,_K(Ig,{brighter(e){return e=e==null?dj:Math.pow(dj,e),new Ji(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Px:Math.pow(Px,e),new Ji(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,i=2*n-s;return new Ts(tS(e>=240?e-240:e+120,i,s),tS(e,i,s),tS(e<120?e+240:e-120,i,s),this.opacity)},clamp(){return new Ji(U3(this.h),Kv(this.s),Kv(this.l),uj(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uj(this.opacity);return`${e===1?"hsl(":"hsla("}${U3(this.h)}, ${Kv(this.s)*100}%, ${Kv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function U3(e){return e=(e||0)%360,e<0?e+360:e}function Kv(e){return Math.max(0,Math.min(1,e||0))}function tS(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const rE=e=>()=>e;function qMe(e,t){return function(n){return e+n*t}}function KMe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function GMe(e){return(e=+e)==1?CK:function(t,n){return n-t?KMe(t,n,e):rE(isNaN(t)?n:t)}}function CK(e,t){var n=t-e;return n?qMe(e,n):rE(isNaN(e)?t:e)}const W3=function e(t){var n=GMe(t);function s(i,a){var o=n((i=xP(i)).r,(a=xP(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),d=CK(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=c(h),i.opacity=d(h),i+""}}return s.gamma=e,s}(1);function ZMe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),i;return function(a){for(i=0;i<n;++i)s[i]=e[i]*(1-a)+t[i]*a;return s}}function YMe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function XMe(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,i=new Array(s),a=new Array(n),o;for(o=0;o<s;++o)i[o]=Ym(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<s;++o)a[o]=i[o](l);return a}}function QMe(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function hj(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function JMe(e,t){var n={},s={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ym(e[i],t[i]):s[i]=t[i];return function(a){for(i in n)s[i]=n[i](a);return s}}var gP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rS=new RegExp(gP.source,"g");function eDe(e){return function(){return e}}function tDe(e){return function(t){return e(t)+""}}function rDe(e,t){var n=gP.lastIndex=rS.lastIndex=0,s,i,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=gP.exec(e))&&(i=rS.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(s=s[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:hj(s,i)})),n=rS.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?tDe(c[0].x):eDe(t):(t=c.length,function(d){for(var h=0,m;h<t;++h)l[(m=c[h]).i]=m.x(d);return l.join("")})}function Ym(e,t){var n=typeof t,s;return t==null||n==="boolean"?rE(t):(n==="number"?hj:n==="string"?(s=kx(t))?(t=s,W3):rDe:t instanceof kx?W3:t instanceof Date?QMe:YMe(t)?ZMe:Array.isArray(t)?XMe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?JMe:hj)(e,t)}function nE(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function nDe(e,t){t===void 0&&(t=e,e=Ym);for(var n=0,s=t.length-1,i=t[0],a=new Array(s<0?0:s);n<s;)a[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return a[l](o-l)}}function sDe(e){return function(){return e}}function mj(e){return+e}var H3=[0,1];function ms(e){return e}function vP(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:sDe(isNaN(t)?NaN:.5)}function iDe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function aDe(e,t,n){var s=e[0],i=e[1],a=t[0],o=t[1];return i<s?(s=vP(i,s),a=n(o,a)):(s=vP(s,i),a=n(a,o)),function(l){return a(s(l))}}function oDe(e,t,n){var s=Math.min(e.length,t.length)-1,i=new Array(s),a=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)i[o]=vP(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var c=Dg(e,l,1,s)-1;return a[c](i[c](l))}}function Lg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function _w(){var e=H3,t=H3,n=Ym,s,i,a,o=ms,l,c,d;function h(){var f=Math.min(e.length,t.length);return o!==ms&&(o=iDe(e[0],e[f-1])),l=f>2?oDe:aDe,c=d=null,m}function m(f){return f==null||isNaN(f=+f)?a:(c||(c=l(e.map(s),t,n)))(s(o(f)))}return m.invert=function(f){return o(i((d||(d=l(t,e.map(s),hj)))(f)))},m.domain=function(f){return arguments.length?(e=Array.from(f,mj),h()):e.slice()},m.range=function(f){return arguments.length?(t=Array.from(f),h()):t.slice()},m.rangeRound=function(f){return t=Array.from(f),n=nE,h()},m.clamp=function(f){return arguments.length?(o=f?!0:ms,h()):o!==ms},m.interpolate=function(f){return arguments.length?(n=f,h()):n},m.unknown=function(f){return arguments.length?(a=f,m):a},function(f,v){return s=f,i=v,h()}}function sE(){return _w()(ms,ms)}function lDe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fj(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function rm(e){return e=fj(Math.abs(e)),e?e[1]:NaN}function cDe(e,t){return function(n,s){for(var i=n.length,a=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function dDe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var uDe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tx(e){if(!(t=uDe.exec(e)))throw new Error("invalid format: "+e);var t;return new iE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Tx.prototype=iE.prototype;function iE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}iE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hDe(e){e:for(var t=e.length,n=1,s=-1,i;n<t;++n)switch(e[n]){case".":s=i=n;break;case"0":s===0&&(s=n),i=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(i+1):e}var kK;function mDe(e,t){var n=fj(e,t);if(!n)return e+"";var s=n[0],i=n[1],a=i-(kK=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=s.length;return a===o?s:a>o?s+new Array(a-o+1).join("0"):a>0?s.slice(0,a)+"."+s.slice(a):"0."+new Array(1-a).join("0")+fj(e,Math.max(0,t+a-1))[0]}function q3(e,t){var n=fj(e,t);if(!n)return e+"";var s=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+s:s.length>i+1?s.slice(0,i+1)+"."+s.slice(i+1):s+new Array(i-s.length+2).join("0")}const K3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:lDe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>q3(e*100,t),r:q3,s:mDe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function G3(e){return e}var Z3=Array.prototype.map,Y3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function fDe(e){var t=e.grouping===void 0||e.thousands===void 0?G3:cDe(Z3.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?G3:dDe(Z3.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(m){m=Tx(m);var f=m.fill,v=m.align,p=m.sign,x=m.symbol,y=m.zero,w=m.width,j=m.comma,N=m.precision,C=m.trim,P=m.type;P==="n"?(j=!0,P="g"):K3[P]||(N===void 0&&(N=12),C=!0,P="g"),(y||f==="0"&&v==="=")&&(y=!0,f="0",v="=");var k=x==="$"?n:x==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",_=x==="$"?s:/[%p]/.test(P)?o:"",O=K3[P],M=/[defgprs%]/.test(P);N=N===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function T(I){var A=k,V=_,D,W,U;if(P==="c")V=O(I)+V,I="";else{I=+I;var Q=I<0||1/I<0;if(I=isNaN(I)?c:O(Math.abs(I),N),C&&(I=hDe(I)),Q&&+I==0&&p!=="+"&&(Q=!1),A=(Q?p==="("?p:l:p==="-"||p==="("?"":p)+A,V=(P==="s"?Y3[8+kK/3]:"")+V+(Q&&p==="("?")":""),M){for(D=-1,W=I.length;++D<W;)if(U=I.charCodeAt(D),48>U||U>57){V=(U===46?i+I.slice(D+1):I.slice(D))+V,I=I.slice(0,D);break}}}j&&!y&&(I=t(I,1/0));var q=A.length+I.length+V.length,B=q<w?new Array(w-q+1).join(f):"";switch(j&&y&&(I=t(B+I,B.length?w-V.length:1/0),B=""),v){case"<":I=A+I+V+B;break;case"=":I=A+B+I+V;break;case"^":I=B.slice(0,q=B.length>>1)+A+I+V+B.slice(q);break;default:I=B+A+I+V;break}return a(I)}return T.toString=function(){return m+""},T}function h(m,f){var v=d((m=Tx(m),m.type="f",m)),p=Math.max(-8,Math.min(8,Math.floor(rm(f)/3)))*3,x=Math.pow(10,-p),y=Y3[8+p/3];return function(w){return v(x*w)+y}}return{format:d,formatPrefix:h}}var Gv,aE,TK;pDe({thousands:",",grouping:[3],currency:["$",""]});function pDe(e){return Gv=fDe(e),aE=Gv.format,TK=Gv.formatPrefix,Gv}function xDe(e){return Math.max(0,-rm(Math.abs(e)))}function gDe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rm(t)/3)))*3-rm(Math.abs(e)))}function vDe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,rm(t)-rm(e))+1}function AK(e,t,n,s){var i=fP(e,t,n),a;switch(s=Tx(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(a=gDe(i,o))&&(s.precision=a),TK(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(a=vDe(i,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=a-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(a=xDe(i))&&(s.precision=a-(s.type==="%")*2);break}}return aE(s)}function kc(e){var t=e.domain;return e.ticks=function(n){var s=t();return hP(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var i=t();return AK(i[0],i[i.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),i=0,a=s.length-1,o=s[i],l=s[a],c,d,h=10;for(l<o&&(d=o,o=l,l=d,d=i,i=a,a=d);h-- >0;){if(d=mP(o,l,n),d===c)return s[i]=o,s[a]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function pj(){var e=sE();return e.copy=function(){return Lg(e,pj())},Li.apply(e,arguments),kc(e)}function EK(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,mj),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return EK(e).unknown(t)},e=arguments.length?Array.from(e,mj):[0,1],kc(n)}function OK(e,t){e=e.slice();var n=0,s=e.length-1,i=e[n],a=e[s],o;return a<i&&(o=n,n=s,s=o,o=i,i=a,a=o),e[n]=t.floor(i),e[s]=t.ceil(a),e}function X3(e){return Math.log(e)}function Q3(e){return Math.exp(e)}function yDe(e){return-Math.log(-e)}function jDe(e){return-Math.exp(-e)}function bDe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function wDe(e){return e===10?bDe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function NDe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function J3(e){return(t,n)=>-e(-t,n)}function oE(e){const t=e(X3,Q3),n=t.domain;let s=10,i,a;function o(){return i=NDe(s),a=wDe(s),n()[0]<0?(i=J3(i),a=J3(a),e(yDe,jDe)):e(X3,Q3),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let d=c[0],h=c[c.length-1];const m=h<d;m&&([d,h]=[h,d]);let f=i(d),v=i(h),p,x;const y=l==null?10:+l;let w=[];if(!(s%1)&&v-f<y){if(f=Math.floor(f),v=Math.ceil(v),d>0){for(;f<=v;++f)for(p=1;p<s;++p)if(x=f<0?p/a(-f):p*a(f),!(x<d)){if(x>h)break;w.push(x)}}else for(;f<=v;++f)for(p=s-1;p>=1;--p)if(x=f>0?p/a(-f):p*a(f),!(x<d)){if(x>h)break;w.push(x)}w.length*2<y&&(w=hP(d,h,y))}else w=hP(f,v,Math.min(v-f,y)).map(a);return m?w.reverse():w},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=Tx(c)).precision==null&&(c.trim=!0),c=aE(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return h=>{let m=h/a(Math.round(i(h)));return m*s<s-.5&&(m*=s),m<=d?c(h):""}},t.nice=()=>n(OK(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function MK(){const e=oE(_w()).domain([1,10]);return e.copy=()=>Lg(e,MK()).base(e.base()),Li.apply(e,arguments),e}function eR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function tR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function lE(e){var t=1,n=e(eR(t),tR(t));return n.constant=function(s){return arguments.length?e(eR(t=+s),tR(t)):t},kc(n)}function DK(){var e=lE(_w());return e.copy=function(){return Lg(e,DK()).constant(e.constant())},Li.apply(e,arguments)}function rR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function SDe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function _De(e){return e<0?-e*e:e*e}function cE(e){var t=e(ms,ms),n=1;function s(){return n===1?e(ms,ms):n===.5?e(SDe,_De):e(rR(n),rR(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,s()):n},kc(t)}function dE(){var e=cE(_w());return e.copy=function(){return Lg(e,dE()).exponent(e.exponent())},Li.apply(e,arguments),e}function PDe(){return dE.apply(null,arguments).exponent(.5)}function nR(e){return Math.sign(e)*e*e}function CDe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function IK(){var e=sE(),t=[0,1],n=!1,s;function i(a){var o=CDe(e(a));return isNaN(o)?s:n?Math.round(o):o}return i.invert=function(a){return e.invert(nR(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,mj)).map(nR)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return IK(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},Li.apply(i,arguments),kc(i)}function LK(){var e=[],t=[],n=[],s;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=OMe(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?s:t[Dg(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(tc),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(s=o,a):s},a.quantiles=function(){return n.slice()},a.copy=function(){return LK().domain(e).range(t).unknown(s)},Li.apply(a,arguments)}function RK(){var e=0,t=1,n=1,s=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[Dg(s,c,0,n)]:a}function l(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=n?[s[n-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return RK().domain([e,t]).range(i).unknown(a)},Li.apply(kc(o),arguments)}function $K(){var e=[.5],t=[0,1],n,s=1;function i(a){return a!=null&&a<=a?t[Dg(e,a,0,s)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),s=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),s=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return $K().domain(e).range(t).unknown(n)},Li.apply(i,arguments)}const nS=new Date,sS=new Date;function Cn(e,t,n,s){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let d;do c.push(d=new Date(+a)),t(a,l),e(a);while(d<a&&a<o);return c},i.filter=a=>Cn(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(nS.setTime(+a),sS.setTime(+o),e(nS),e(sS),Math.floor(n(nS,sS))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(s?o=>s(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const xj=Cn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);xj.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Cn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):xj);xj.range;const No=1e3,_i=No*60,So=_i*60,Zo=So*24,uE=Zo*7,sR=Zo*30,iS=Zo*365,sd=Cn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*No)},(e,t)=>(t-e)/No,e=>e.getUTCSeconds());sd.range;const hE=Cn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*No)},(e,t)=>{e.setTime(+e+t*_i)},(e,t)=>(t-e)/_i,e=>e.getMinutes());hE.range;const mE=Cn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*_i)},(e,t)=>(t-e)/_i,e=>e.getUTCMinutes());mE.range;const fE=Cn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*No-e.getMinutes()*_i)},(e,t)=>{e.setTime(+e+t*So)},(e,t)=>(t-e)/So,e=>e.getHours());fE.range;const pE=Cn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*So)},(e,t)=>(t-e)/So,e=>e.getUTCHours());pE.range;const Rg=Cn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_i)/Zo,e=>e.getDate()-1);Rg.range;const Pw=Cn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Zo,e=>e.getUTCDate()-1);Pw.range;const FK=Cn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Zo,e=>Math.floor(e/Zo));FK.range;function iu(e){return Cn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*_i)/uE)}const Cw=iu(0),gj=iu(1),kDe=iu(2),TDe=iu(3),nm=iu(4),ADe=iu(5),EDe=iu(6);Cw.range;gj.range;kDe.range;TDe.range;nm.range;ADe.range;EDe.range;function au(e){return Cn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/uE)}const kw=au(0),vj=au(1),ODe=au(2),MDe=au(3),sm=au(4),DDe=au(5),IDe=au(6);kw.range;vj.range;ODe.range;MDe.range;sm.range;DDe.range;IDe.range;const xE=Cn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());xE.range;const gE=Cn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());gE.range;const Yo=Cn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Yo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Cn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Yo.range;const Xo=Cn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Xo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Cn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Xo.range;function zK(e,t,n,s,i,a){const o=[[sd,1,No],[sd,5,5*No],[sd,15,15*No],[sd,30,30*No],[a,1,_i],[a,5,5*_i],[a,15,15*_i],[a,30,30*_i],[i,1,So],[i,3,3*So],[i,6,6*So],[i,12,12*So],[s,1,Zo],[s,2,2*Zo],[n,1,uE],[t,1,sR],[t,3,3*sR],[e,1,iS]];function l(d,h,m){const f=h<d;f&&([d,h]=[h,d]);const v=m&&typeof m.range=="function"?m:c(d,h,m),p=v?v.range(d,+h+1):[];return f?p.reverse():p}function c(d,h,m){const f=Math.abs(h-d)/m,v=JA(([,,y])=>y).right(o,f);if(v===o.length)return e.every(fP(d/iS,h/iS,m));if(v===0)return xj.every(Math.max(fP(d,h,m),1));const[p,x]=o[f/o[v-1][2]<o[v][2]/f?v-1:v];return p.every(x)}return[l,c]}const[LDe,RDe]=zK(Xo,gE,kw,FK,pE,mE),[$De,FDe]=zK(Yo,xE,Cw,Rg,fE,hE);function aS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function oS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Of(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function zDe(e){var t=e.dateTime,n=e.date,s=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Mf(i),h=Df(i),m=Mf(a),f=Df(a),v=Mf(o),p=Df(o),x=Mf(l),y=Df(l),w=Mf(c),j=Df(c),N={a:Q,A:q,b:B,B:z,c:null,d:dR,e:dR,f:cIe,g:yIe,G:bIe,H:aIe,I:oIe,j:lIe,L:BK,m:dIe,M:uIe,p:H,q:X,Q:mR,s:fR,S:hIe,u:mIe,U:fIe,V:pIe,w:xIe,W:gIe,x:null,X:null,y:vIe,Y:jIe,Z:wIe,"%":hR},C={a:ge,A:Se,b:F,B:pe,c:null,d:uR,e:uR,f:PIe,g:LIe,G:$Ie,H:NIe,I:SIe,j:_Ie,L:UK,m:CIe,M:kIe,p:we,q:Be,Q:mR,s:fR,S:TIe,u:AIe,U:EIe,V:OIe,w:MIe,W:DIe,x:null,X:null,y:IIe,Y:RIe,Z:FIe,"%":hR},P={a:T,A:I,b:A,B:V,c:D,d:lR,e:lR,f:rIe,g:oR,G:aR,H:cR,I:cR,j:QDe,L:tIe,m:XDe,M:JDe,p:M,q:YDe,Q:sIe,s:iIe,S:eIe,u:HDe,U:qDe,V:KDe,w:WDe,W:GDe,x:W,X:U,y:oR,Y:aR,Z:ZDe,"%":nIe};N.x=k(n,N),N.X=k(s,N),N.c=k(t,N),C.x=k(n,C),C.X=k(s,C),C.c=k(t,C);function k(Pe,Ee){return function(Ie){var Ne=[],xe=-1,J=0,De=Pe.length,Ue,st,ht;for(Ie instanceof Date||(Ie=new Date(+Ie));++xe<De;)Pe.charCodeAt(xe)===37&&(Ne.push(Pe.slice(J,xe)),(st=iR[Ue=Pe.charAt(++xe)])!=null?Ue=Pe.charAt(++xe):st=Ue==="e"?" ":"0",(ht=Ee[Ue])&&(Ue=ht(Ie,st)),Ne.push(Ue),J=xe+1);return Ne.push(Pe.slice(J,xe)),Ne.join("")}}function _(Pe,Ee){return function(Ie){var Ne=Of(1900,void 0,1),xe=O(Ne,Pe,Ie+="",0),J,De;if(xe!=Ie.length)return null;if("Q"in Ne)return new Date(Ne.Q);if("s"in Ne)return new Date(Ne.s*1e3+("L"in Ne?Ne.L:0));if(Ee&&!("Z"in Ne)&&(Ne.Z=0),"p"in Ne&&(Ne.H=Ne.H%12+Ne.p*12),Ne.m===void 0&&(Ne.m="q"in Ne?Ne.q:0),"V"in Ne){if(Ne.V<1||Ne.V>53)return null;"w"in Ne||(Ne.w=1),"Z"in Ne?(J=oS(Of(Ne.y,0,1)),De=J.getUTCDay(),J=De>4||De===0?vj.ceil(J):vj(J),J=Pw.offset(J,(Ne.V-1)*7),Ne.y=J.getUTCFullYear(),Ne.m=J.getUTCMonth(),Ne.d=J.getUTCDate()+(Ne.w+6)%7):(J=aS(Of(Ne.y,0,1)),De=J.getDay(),J=De>4||De===0?gj.ceil(J):gj(J),J=Rg.offset(J,(Ne.V-1)*7),Ne.y=J.getFullYear(),Ne.m=J.getMonth(),Ne.d=J.getDate()+(Ne.w+6)%7)}else("W"in Ne||"U"in Ne)&&("w"in Ne||(Ne.w="u"in Ne?Ne.u%7:"W"in Ne?1:0),De="Z"in Ne?oS(Of(Ne.y,0,1)).getUTCDay():aS(Of(Ne.y,0,1)).getDay(),Ne.m=0,Ne.d="W"in Ne?(Ne.w+6)%7+Ne.W*7-(De+5)%7:Ne.w+Ne.U*7-(De+6)%7);return"Z"in Ne?(Ne.H+=Ne.Z/100|0,Ne.M+=Ne.Z%100,oS(Ne)):aS(Ne)}}function O(Pe,Ee,Ie,Ne){for(var xe=0,J=Ee.length,De=Ie.length,Ue,st;xe<J;){if(Ne>=De)return-1;if(Ue=Ee.charCodeAt(xe++),Ue===37){if(Ue=Ee.charAt(xe++),st=P[Ue in iR?Ee.charAt(xe++):Ue],!st||(Ne=st(Pe,Ie,Ne))<0)return-1}else if(Ue!=Ie.charCodeAt(Ne++))return-1}return Ne}function M(Pe,Ee,Ie){var Ne=d.exec(Ee.slice(Ie));return Ne?(Pe.p=h.get(Ne[0].toLowerCase()),Ie+Ne[0].length):-1}function T(Pe,Ee,Ie){var Ne=v.exec(Ee.slice(Ie));return Ne?(Pe.w=p.get(Ne[0].toLowerCase()),Ie+Ne[0].length):-1}function I(Pe,Ee,Ie){var Ne=m.exec(Ee.slice(Ie));return Ne?(Pe.w=f.get(Ne[0].toLowerCase()),Ie+Ne[0].length):-1}function A(Pe,Ee,Ie){var Ne=w.exec(Ee.slice(Ie));return Ne?(Pe.m=j.get(Ne[0].toLowerCase()),Ie+Ne[0].length):-1}function V(Pe,Ee,Ie){var Ne=x.exec(Ee.slice(Ie));return Ne?(Pe.m=y.get(Ne[0].toLowerCase()),Ie+Ne[0].length):-1}function D(Pe,Ee,Ie){return O(Pe,t,Ee,Ie)}function W(Pe,Ee,Ie){return O(Pe,n,Ee,Ie)}function U(Pe,Ee,Ie){return O(Pe,s,Ee,Ie)}function Q(Pe){return o[Pe.getDay()]}function q(Pe){return a[Pe.getDay()]}function B(Pe){return c[Pe.getMonth()]}function z(Pe){return l[Pe.getMonth()]}function H(Pe){return i[+(Pe.getHours()>=12)]}function X(Pe){return 1+~~(Pe.getMonth()/3)}function ge(Pe){return o[Pe.getUTCDay()]}function Se(Pe){return a[Pe.getUTCDay()]}function F(Pe){return c[Pe.getUTCMonth()]}function pe(Pe){return l[Pe.getUTCMonth()]}function we(Pe){return i[+(Pe.getUTCHours()>=12)]}function Be(Pe){return 1+~~(Pe.getUTCMonth()/3)}return{format:function(Pe){var Ee=k(Pe+="",N);return Ee.toString=function(){return Pe},Ee},parse:function(Pe){var Ee=_(Pe+="",!1);return Ee.toString=function(){return Pe},Ee},utcFormat:function(Pe){var Ee=k(Pe+="",C);return Ee.toString=function(){return Pe},Ee},utcParse:function(Pe){var Ee=_(Pe+="",!0);return Ee.toString=function(){return Pe},Ee}}}var iR={"-":"",_:" ",0:"0"},Dn=/^\s*\d+/,BDe=/^%/,VDe=/[\\^$*+?|[\]().{}]/g;function nr(e,t,n){var s=e<0?"-":"",i=(s?-e:e)+"",a=i.length;return s+(a<n?new Array(n-a+1).join(t)+i:i)}function UDe(e){return e.replace(VDe,"\\$&")}function Mf(e){return new RegExp("^(?:"+e.map(UDe).join("|")+")","i")}function Df(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function WDe(e,t,n){var s=Dn.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function HDe(e,t,n){var s=Dn.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function qDe(e,t,n){var s=Dn.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function KDe(e,t,n){var s=Dn.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function GDe(e,t,n){var s=Dn.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function aR(e,t,n){var s=Dn.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function oR(e,t,n){var s=Dn.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function ZDe(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function YDe(e,t,n){var s=Dn.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function XDe(e,t,n){var s=Dn.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function lR(e,t,n){var s=Dn.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function QDe(e,t,n){var s=Dn.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function cR(e,t,n){var s=Dn.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function JDe(e,t,n){var s=Dn.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function eIe(e,t,n){var s=Dn.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function tIe(e,t,n){var s=Dn.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function rIe(e,t,n){var s=Dn.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function nIe(e,t,n){var s=BDe.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function sIe(e,t,n){var s=Dn.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function iIe(e,t,n){var s=Dn.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function dR(e,t){return nr(e.getDate(),t,2)}function aIe(e,t){return nr(e.getHours(),t,2)}function oIe(e,t){return nr(e.getHours()%12||12,t,2)}function lIe(e,t){return nr(1+Rg.count(Yo(e),e),t,3)}function BK(e,t){return nr(e.getMilliseconds(),t,3)}function cIe(e,t){return BK(e,t)+"000"}function dIe(e,t){return nr(e.getMonth()+1,t,2)}function uIe(e,t){return nr(e.getMinutes(),t,2)}function hIe(e,t){return nr(e.getSeconds(),t,2)}function mIe(e){var t=e.getDay();return t===0?7:t}function fIe(e,t){return nr(Cw.count(Yo(e)-1,e),t,2)}function VK(e){var t=e.getDay();return t>=4||t===0?nm(e):nm.ceil(e)}function pIe(e,t){return e=VK(e),nr(nm.count(Yo(e),e)+(Yo(e).getDay()===4),t,2)}function xIe(e){return e.getDay()}function gIe(e,t){return nr(gj.count(Yo(e)-1,e),t,2)}function vIe(e,t){return nr(e.getFullYear()%100,t,2)}function yIe(e,t){return e=VK(e),nr(e.getFullYear()%100,t,2)}function jIe(e,t){return nr(e.getFullYear()%1e4,t,4)}function bIe(e,t){var n=e.getDay();return e=n>=4||n===0?nm(e):nm.ceil(e),nr(e.getFullYear()%1e4,t,4)}function wIe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nr(t/60|0,"0",2)+nr(t%60,"0",2)}function uR(e,t){return nr(e.getUTCDate(),t,2)}function NIe(e,t){return nr(e.getUTCHours(),t,2)}function SIe(e,t){return nr(e.getUTCHours()%12||12,t,2)}function _Ie(e,t){return nr(1+Pw.count(Xo(e),e),t,3)}function UK(e,t){return nr(e.getUTCMilliseconds(),t,3)}function PIe(e,t){return UK(e,t)+"000"}function CIe(e,t){return nr(e.getUTCMonth()+1,t,2)}function kIe(e,t){return nr(e.getUTCMinutes(),t,2)}function TIe(e,t){return nr(e.getUTCSeconds(),t,2)}function AIe(e){var t=e.getUTCDay();return t===0?7:t}function EIe(e,t){return nr(kw.count(Xo(e)-1,e),t,2)}function WK(e){var t=e.getUTCDay();return t>=4||t===0?sm(e):sm.ceil(e)}function OIe(e,t){return e=WK(e),nr(sm.count(Xo(e),e)+(Xo(e).getUTCDay()===4),t,2)}function MIe(e){return e.getUTCDay()}function DIe(e,t){return nr(vj.count(Xo(e)-1,e),t,2)}function IIe(e,t){return nr(e.getUTCFullYear()%100,t,2)}function LIe(e,t){return e=WK(e),nr(e.getUTCFullYear()%100,t,2)}function RIe(e,t){return nr(e.getUTCFullYear()%1e4,t,4)}function $Ie(e,t){var n=e.getUTCDay();return e=n>=4||n===0?sm(e):sm.ceil(e),nr(e.getUTCFullYear()%1e4,t,4)}function FIe(){return"+0000"}function hR(){return"%"}function mR(e){return+e}function fR(e){return Math.floor(+e/1e3)}var Pu,HK,qK;zIe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zIe(e){return Pu=zDe(e),HK=Pu.format,Pu.parse,qK=Pu.utcFormat,Pu.utcParse,Pu}function BIe(e){return new Date(e)}function VIe(e){return e instanceof Date?+e:+new Date(+e)}function vE(e,t,n,s,i,a,o,l,c,d){var h=sE(),m=h.invert,f=h.domain,v=d(".%L"),p=d(":%S"),x=d("%I:%M"),y=d("%I %p"),w=d("%a %d"),j=d("%b %d"),N=d("%B"),C=d("%Y");function P(k){return(c(k)<k?v:l(k)<k?p:o(k)<k?x:a(k)<k?y:s(k)<k?i(k)<k?w:j:n(k)<k?N:C)(k)}return h.invert=function(k){return new Date(m(k))},h.domain=function(k){return arguments.length?f(Array.from(k,VIe)):f().map(BIe)},h.ticks=function(k){var _=f();return e(_[0],_[_.length-1],k??10)},h.tickFormat=function(k,_){return _==null?P:d(_)},h.nice=function(k){var _=f();return(!k||typeof k.range!="function")&&(k=t(_[0],_[_.length-1],k??10)),k?f(OK(_,k)):h},h.copy=function(){return Lg(h,vE(e,t,n,s,i,a,o,l,c,d))},h}function UIe(){return Li.apply(vE($De,FDe,Yo,xE,Cw,Rg,fE,hE,sd,HK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function WIe(){return Li.apply(vE(LDe,RDe,Xo,gE,kw,Pw,pE,mE,sd,qK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Tw(){var e=0,t=1,n,s,i,a,o=ms,l=!1,c;function d(m){return m==null||isNaN(m=+m)?c:o(i===0?.5:(m=(a(m)-n)*i,l?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t]=m,n=a(e=+e),s=a(t=+t),i=n===s?0:1/(s-n),d):[e,t]},d.clamp=function(m){return arguments.length?(l=!!m,d):l},d.interpolator=function(m){return arguments.length?(o=m,d):o};function h(m){return function(f){var v,p;return arguments.length?([v,p]=f,o=m(v,p),d):[o(0),o(1)]}}return d.range=h(Ym),d.rangeRound=h(nE),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return a=m,n=m(e),s=m(t),i=n===s?0:1/(s-n),d}}function Tc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function KK(){var e=kc(Tw()(ms));return e.copy=function(){return Tc(e,KK())},sl.apply(e,arguments)}function GK(){var e=oE(Tw()).domain([1,10]);return e.copy=function(){return Tc(e,GK()).base(e.base())},sl.apply(e,arguments)}function ZK(){var e=lE(Tw());return e.copy=function(){return Tc(e,ZK()).constant(e.constant())},sl.apply(e,arguments)}function yE(){var e=cE(Tw());return e.copy=function(){return Tc(e,yE()).exponent(e.exponent())},sl.apply(e,arguments)}function HIe(){return yE.apply(null,arguments).exponent(.5)}function YK(){var e=[],t=ms;function n(s){if(s!=null&&!isNaN(s=+s))return t((Dg(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let i of s)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(tc),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,i)=>t(i/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(i,a)=>EMe(e,a/s))},n.copy=function(){return YK(t).domain(e)},sl.apply(n,arguments)}function Aw(){var e=0,t=.5,n=1,s=1,i,a,o,l,c,d=ms,h,m=!1,f;function v(x){return isNaN(x=+x)?f:(x=.5+((x=+h(x))-a)*(s*x<s*a?l:c),d(m?Math.max(0,Math.min(1,x)):x))}v.domain=function(x){return arguments.length?([e,t,n]=x,i=h(e=+e),a=h(t=+t),o=h(n=+n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,v):[e,t,n]},v.clamp=function(x){return arguments.length?(m=!!x,v):m},v.interpolator=function(x){return arguments.length?(d=x,v):d};function p(x){return function(y){var w,j,N;return arguments.length?([w,j,N]=y,d=nDe(x,[w,j,N]),v):[d(0),d(.5),d(1)]}}return v.range=p(Ym),v.rangeRound=p(nE),v.unknown=function(x){return arguments.length?(f=x,v):f},function(x){return h=x,i=x(e),a=x(t),o=x(n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,v}}function XK(){var e=kc(Aw()(ms));return e.copy=function(){return Tc(e,XK())},sl.apply(e,arguments)}function QK(){var e=oE(Aw()).domain([.1,1,10]);return e.copy=function(){return Tc(e,QK()).base(e.base())},sl.apply(e,arguments)}function JK(){var e=lE(Aw());return e.copy=function(){return Tc(e,JK()).constant(e.constant())},sl.apply(e,arguments)}function jE(){var e=cE(Aw());return e.copy=function(){return Tc(e,jE()).exponent(e.exponent())},sl.apply(e,arguments)}function qIe(){return jE.apply(null,arguments).exponent(.5)}const pR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:_x,scaleDiverging:XK,scaleDivergingLog:QK,scaleDivergingPow:jE,scaleDivergingSqrt:qIe,scaleDivergingSymlog:JK,scaleIdentity:EK,scaleImplicit:pP,scaleLinear:pj,scaleLog:MK,scaleOrdinal:eE,scalePoint:gp,scalePow:dE,scaleQuantile:LK,scaleQuantize:RK,scaleRadial:IK,scaleSequential:KK,scaleSequentialLog:GK,scaleSequentialPow:yE,scaleSequentialQuantile:YK,scaleSequentialSqrt:HIe,scaleSequentialSymlog:ZK,scaleSqrt:PDe,scaleSymlog:DK,scaleThreshold:$K,scaleTime:UIe,scaleUtc:WIe,tickFormat:AK},Symbol.toStringTag,{value:"Module"}));var KIe=zm;function GIe(e,t,n){for(var s=-1,i=e.length;++s<i;){var a=e[s],o=t(a);if(o!=null&&(l===void 0?o===o&&!KIe(o):n(o,l)))var l=o,c=a}return c}var eG=GIe;function ZIe(e,t){return e>t}var YIe=ZIe,XIe=eG,QIe=YIe,JIe=Zm;function eLe(e){return e&&e.length?XIe(e,JIe,QIe):void 0}var tLe=eLe;const Il=ur(tLe);function rLe(e,t){return e<t}var nLe=rLe,sLe=eG,iLe=nLe,aLe=Zm;function oLe(e){return e&&e.length?sLe(e,aLe,iLe):void 0}var lLe=oLe;const Ew=ur(lLe);var cLe=DA,dLe=Cc,uLe=lK,hLe=Is;function mLe(e,t){var n=hLe(e)?cLe:uLe;return n(e,dLe(t))}var fLe=mLe,pLe=aK,xLe=fLe;function gLe(e,t){return pLe(xLe(e,t),1)}var vLe=gLe;const yLe=ur(vLe);var jLe=ZA;function bLe(e,t){return jLe(e,t)}var wLe=bLe;const im=ur(wLe);var Xm=1e9,NLe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wE,$r=!0,Mi="[DecimalError] ",wd=Mi+"Invalid argument: ",bE=Mi+"Exponent out of range: ",Qm=Math.floor,Gc=Math.pow,SLe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xs,An=1e7,Tr=7,tG=9007199254740991,yj=Qm(tG/Tr),nt={};nt.absoluteValue=nt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};nt.comparedTo=nt.cmp=function(e){var t,n,s,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(s=a.d.length,i=e.d.length,t=0,n=s<i?s:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return s===i?0:s>i^a.s<0?1:-1};nt.decimalPlaces=nt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Tr;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};nt.dividedBy=nt.div=function(e){return Io(this,new this.constructor(e))};nt.dividedToIntegerBy=nt.idiv=function(e){var t=this,n=t.constructor;return vr(Io(t,new n(e),0,1),n.precision)};nt.equals=nt.eq=function(e){return!this.cmp(e)};nt.exponent=function(){return mn(this)};nt.greaterThan=nt.gt=function(e){return this.cmp(e)>0};nt.greaterThanOrEqualTo=nt.gte=function(e){return this.cmp(e)>=0};nt.isInteger=nt.isint=function(){return this.e>this.d.length-2};nt.isNegative=nt.isneg=function(){return this.s<0};nt.isPositive=nt.ispos=function(){return this.s>0};nt.isZero=function(){return this.s===0};nt.lessThan=nt.lt=function(e){return this.cmp(e)<0};nt.lessThanOrEqualTo=nt.lte=function(e){return this.cmp(e)<1};nt.logarithm=nt.log=function(e){var t,n=this,s=n.constructor,i=s.precision,a=i+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Xs))throw Error(Mi+"NaN");if(n.s<1)throw Error(Mi+(n.s?"NaN":"-Infinity"));return n.eq(Xs)?new s(0):($r=!1,t=Io(Ax(n,a),Ax(e,a),a),$r=!0,vr(t,i))};nt.minus=nt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sG(t,e):rG(t,(e.s=-e.s,e))};nt.modulo=nt.mod=function(e){var t,n=this,s=n.constructor,i=s.precision;if(e=new s(e),!e.s)throw Error(Mi+"NaN");return n.s?($r=!1,t=Io(n,e,0,1).times(e),$r=!0,n.minus(t)):vr(new s(n),i)};nt.naturalExponential=nt.exp=function(){return nG(this)};nt.naturalLogarithm=nt.ln=function(){return Ax(this)};nt.negated=nt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};nt.plus=nt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?rG(t,e):sG(t,(e.s=-e.s,e))};nt.precision=nt.sd=function(e){var t,n,s,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(wd+e);if(t=mn(i)+1,s=i.d.length-1,n=s*Tr+1,s=i.d[s],s){for(;s%10==0;s/=10)n--;for(s=i.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};nt.squareRoot=nt.sqrt=function(){var e,t,n,s,i,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Mi+"NaN")}for(e=mn(l),$r=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=Ta(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Qm((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(i.toString()),n=c.precision,i=o=n+3;;)if(a=s,s=a.plus(Io(l,a,o+2)).times(.5),Ta(a.d).slice(0,o)===(t=Ta(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(vr(a,n+1,0),a.times(a).eq(l)){s=a;break}}else if(t!="9999")break;o+=4}return $r=!0,vr(s,n)};nt.times=nt.mul=function(e){var t,n,s,i,a,o,l,c,d,h=this,m=h.constructor,f=h.d,v=(e=new m(e)).d;if(!h.s||!e.s)return new m(0);for(e.s*=h.s,n=h.e+e.e,c=f.length,d=v.length,c<d&&(a=f,f=v,v=a,o=c,c=d,d=o),a=[],o=c+d,s=o;s--;)a.push(0);for(s=d;--s>=0;){for(t=0,i=c+s;i>s;)l=a[i]+v[s]*f[i-s-1]+t,a[i--]=l%An|0,t=l/An|0;a[i]=(a[i]+t)%An|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,$r?vr(e,m.precision):e};nt.toDecimalPlaces=nt.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(Ka(e,0,Xm),t===void 0?t=s.rounding:Ka(t,0,8),vr(n,e+mn(n)+1,t))};nt.toExponential=function(e,t){var n,s=this,i=s.constructor;return e===void 0?n=Kd(s,!0):(Ka(e,0,Xm),t===void 0?t=i.rounding:Ka(t,0,8),s=vr(new i(s),e+1,t),n=Kd(s,!0,e+1)),n};nt.toFixed=function(e,t){var n,s,i=this,a=i.constructor;return e===void 0?Kd(i):(Ka(e,0,Xm),t===void 0?t=a.rounding:Ka(t,0,8),s=vr(new a(i),e+mn(i)+1,t),n=Kd(s.abs(),!1,e+mn(s)+1),i.isneg()&&!i.isZero()?"-"+n:n)};nt.toInteger=nt.toint=function(){var e=this,t=e.constructor;return vr(new t(e),mn(e)+1,t.rounding)};nt.toNumber=function(){return+this};nt.toPower=nt.pow=function(e){var t,n,s,i,a,o,l=this,c=l.constructor,d=12,h=+(e=new c(e));if(!e.s)return new c(Xs);if(l=new c(l),!l.s){if(e.s<1)throw Error(Mi+"Infinity");return l}if(l.eq(Xs))return l;if(s=c.precision,e.eq(Xs))return vr(l,s);if(t=e.e,n=e.d.length-1,o=t>=n,a=l.s,o){if((n=h<0?-h:h)<=tG){for(i=new c(Xs),t=Math.ceil(s/Tr+4),$r=!1;n%2&&(i=i.times(l),gR(i.d,t)),n=Qm(n/2),n!==0;)l=l.times(l),gR(l.d,t);return $r=!0,e.s<0?new c(Xs).div(i):vr(i,s)}}else if(a<0)throw Error(Mi+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,$r=!1,i=e.times(Ax(l,s+d)),$r=!0,i=nG(i),i.s=a,i};nt.toPrecision=function(e,t){var n,s,i=this,a=i.constructor;return e===void 0?(n=mn(i),s=Kd(i,n<=a.toExpNeg||n>=a.toExpPos)):(Ka(e,1,Xm),t===void 0?t=a.rounding:Ka(t,0,8),i=vr(new a(i),e,t),n=mn(i),s=Kd(i,e<=n||n<=a.toExpNeg,e)),s};nt.toSignificantDigits=nt.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Ka(e,1,Xm),t===void 0?t=s.rounding:Ka(t,0,8)),vr(new s(n),e,t)};nt.toString=nt.valueOf=nt.val=nt.toJSON=nt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=mn(e),n=e.constructor;return Kd(e,t<=n.toExpNeg||t>=n.toExpPos)};function rG(e,t){var n,s,i,a,o,l,c,d,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),$r?vr(t,m):t;if(c=e.d,d=t.d,o=e.e,i=t.e,c=c.slice(),a=o-i,a){for(a<0?(s=c,a=-a,l=d.length):(s=d,i=o,l=c.length),o=Math.ceil(m/Tr),l=o>l?o+1:l+1,a>l&&(a=l,s.length=1),s.reverse();a--;)s.push(0);s.reverse()}for(l=c.length,a=d.length,l-a<0&&(a=l,s=d,d=c,c=s),n=0;a;)n=(c[--a]=c[a]+d[a]+n)/An|0,c[a]%=An;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,$r?vr(t,m):t}function Ka(e,t,n){if(e!==~~e||e<t||e>n)throw Error(wd+e)}function Ta(e){var t,n,s,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)s=e[t]+"",n=Tr-s.length,n&&(a+=gl(n)),a+=s;o=e[t],s=o+"",n=Tr-s.length,n&&(a+=gl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Io=function(){function e(s,i){var a,o=0,l=s.length;for(s=s.slice();l--;)a=s[l]*i+o,s[l]=a%An|0,o=a/An|0;return o&&s.unshift(o),s}function t(s,i,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(s[l]!=i[l]){c=s[l]>i[l]?1:-1;break}return c}function n(s,i,a){for(var o=0;a--;)s[a]-=o,o=s[a]<i[a]?1:0,s[a]=o*An+s[a]-i[a];for(;!s[0]&&s.length>1;)s.shift()}return function(s,i,a,o){var l,c,d,h,m,f,v,p,x,y,w,j,N,C,P,k,_,O,M=s.constructor,T=s.s==i.s?1:-1,I=s.d,A=i.d;if(!s.s)return new M(s);if(!i.s)throw Error(Mi+"Division by zero");for(c=s.e-i.e,_=A.length,P=I.length,v=new M(T),p=v.d=[],d=0;A[d]==(I[d]||0);)++d;if(A[d]>(I[d]||0)&&--c,a==null?j=a=M.precision:o?j=a+(mn(s)-mn(i))+1:j=a,j<0)return new M(0);if(j=j/Tr+2|0,d=0,_==1)for(h=0,A=A[0],j++;(d<P||h)&&j--;d++)N=h*An+(I[d]||0),p[d]=N/A|0,h=N%A|0;else{for(h=An/(A[0]+1)|0,h>1&&(A=e(A,h),I=e(I,h),_=A.length,P=I.length),C=_,x=I.slice(0,_),y=x.length;y<_;)x[y++]=0;O=A.slice(),O.unshift(0),k=A[0],A[1]>=An/2&&++k;do h=0,l=t(A,x,_,y),l<0?(w=x[0],_!=y&&(w=w*An+(x[1]||0)),h=w/k|0,h>1?(h>=An&&(h=An-1),m=e(A,h),f=m.length,y=x.length,l=t(m,x,f,y),l==1&&(h--,n(m,_<f?O:A,f))):(h==0&&(l=h=1),m=A.slice()),f=m.length,f<y&&m.unshift(0),n(x,m,y),l==-1&&(y=x.length,l=t(A,x,_,y),l<1&&(h++,n(x,_<y?O:A,y))),y=x.length):l===0&&(h++,x=[0]),p[d++]=h,l&&x[0]?x[y++]=I[C]||0:(x=[I[C]],y=1);while((C++<P||x[0]!==void 0)&&j--)}return p[0]||p.shift(),v.e=c,vr(v,o?a+mn(v)+1:a)}}();function nG(e,t){var n,s,i,a,o,l,c=0,d=0,h=e.constructor,m=h.precision;if(mn(e)>16)throw Error(bE+mn(e));if(!e.s)return new h(Xs);for(t==null?($r=!1,l=m):l=t,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(Gc(2,d))/Math.LN10*2+5|0,l+=s,n=i=a=new h(Xs),h.precision=l;;){if(i=vr(i.times(e),l),n=n.times(++c),o=a.plus(Io(i,n,l)),Ta(o.d).slice(0,l)===Ta(a.d).slice(0,l)){for(;d--;)a=vr(a.times(a),l);return h.precision=m,t==null?($r=!0,vr(a,m)):a}a=o}}function mn(e){for(var t=e.e*Tr,n=e.d[0];n>=10;n/=10)t++;return t}function lS(e,t,n){if(t>e.LN10.sd())throw $r=!0,n&&(e.precision=n),Error(Mi+"LN10 precision limit exceeded");return vr(new e(e.LN10),t)}function gl(e){for(var t="";e--;)t+="0";return t}function Ax(e,t){var n,s,i,a,o,l,c,d,h,m=1,f=10,v=e,p=v.d,x=v.constructor,y=x.precision;if(v.s<1)throw Error(Mi+(v.s?"NaN":"-Infinity"));if(v.eq(Xs))return new x(0);if(t==null?($r=!1,d=y):d=t,v.eq(10))return t==null&&($r=!0),lS(x,d);if(d+=f,x.precision=d,n=Ta(p),s=n.charAt(0),a=mn(v),Math.abs(a)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)v=v.times(e),n=Ta(v.d),s=n.charAt(0),m++;a=mn(v),s>1?(v=new x("0."+n),a++):v=new x(s+"."+n.slice(1))}else return c=lS(x,d+2,y).times(a+""),v=Ax(new x(s+"."+n.slice(1)),d-f).plus(c),x.precision=y,t==null?($r=!0,vr(v,y)):v;for(l=o=v=Io(v.minus(Xs),v.plus(Xs),d),h=vr(v.times(v),d),i=3;;){if(o=vr(o.times(h),d),c=l.plus(Io(o,new x(i),d)),Ta(c.d).slice(0,d)===Ta(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(lS(x,d+2,y).times(a+""))),l=Io(l,new x(m),d),x.precision=y,t==null?($r=!0,vr(l,y)):l;l=c,i+=2}}function xR(e,t){var n,s,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(s,i),t){if(i-=s,n=n-s-1,e.e=Qm(n/Tr),e.d=[],s=(n+1)%Tr,n<0&&(s+=Tr),s<i){for(s&&e.d.push(+t.slice(0,s)),i-=Tr;s<i;)e.d.push(+t.slice(s,s+=Tr));t=t.slice(s),s=Tr-t.length}else s-=i;for(;s--;)t+="0";if(e.d.push(+t),$r&&(e.e>yj||e.e<-yj))throw Error(bE+n)}else e.s=0,e.e=0,e.d=[0];return e}function vr(e,t,n){var s,i,a,o,l,c,d,h,m=e.d;for(o=1,a=m[0];a>=10;a/=10)o++;if(s=t-o,s<0)s+=Tr,i=t,d=m[h=0];else{if(h=Math.ceil((s+1)/Tr),a=m.length,h>=a)return e;for(d=a=m[h],o=1;a>=10;a/=10)o++;s%=Tr,i=s-Tr+o}if(n!==void 0&&(a=Gc(10,o-i-1),l=d/a%10|0,c=t<0||m[h+1]!==void 0||d%a,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(s>0?i>0?d/Gc(10,o-i):0:m[h-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return c?(a=mn(e),m.length=1,t=t-a-1,m[0]=Gc(10,(Tr-t%Tr)%Tr),e.e=Qm(-t/Tr)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(s==0?(m.length=h,a=1,h--):(m.length=h+1,a=Gc(10,Tr-s),m[h]=i>0?(d/Gc(10,o-i)%Gc(10,i)|0)*a:0),c)for(;;)if(h==0){(m[0]+=a)==An&&(m[0]=1,++e.e);break}else{if(m[h]+=a,m[h]!=An)break;m[h--]=0,a=1}for(s=m.length;m[--s]===0;)m.pop();if($r&&(e.e>yj||e.e<-yj))throw Error(bE+mn(e));return e}function sG(e,t){var n,s,i,a,o,l,c,d,h,m,f=e.constructor,v=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),$r?vr(t,v):t;if(c=e.d,m=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(h=o<0,h?(n=c,o=-o,l=m.length):(n=m,s=d,l=c.length),i=Math.max(Math.ceil(v/Tr),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=m.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(c[i]!=m[i]){h=c[i]<m[i];break}o=0}for(h&&(n=c,c=m,m=n,t.s=-t.s),l=c.length,i=m.length-l;i>0;--i)c[l++]=0;for(i=m.length;i>o;){if(c[--i]<m[i]){for(a=i;a&&c[--a]===0;)c[a]=An-1;--c[a],c[i]+=An}c[i]-=m[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,$r?vr(t,v):t):new f(0)}function Kd(e,t,n){var s,i=mn(e),a=Ta(e.d),o=a.length;return t?(n&&(s=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+gl(s):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+gl(-i-1)+a,n&&(s=n-o)>0&&(a+=gl(s))):i>=o?(a+=gl(i+1-o),n&&(s=n-i-1)>0&&(a=a+"."+gl(s))):((s=i+1)<o&&(a=a.slice(0,s)+"."+a.slice(s)),n&&(s=n-o)>0&&(i+1===o&&(a+="."),a+=gl(s))),e.s<0?"-"+a:a}function gR(e,t){if(e.length>t)return e.length=t,!0}function iG(e){var t,n,s;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(wd+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return xR(o,a.toString())}else if(typeof a!="string")throw Error(wd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,SLe.test(a))xR(o,a);else throw Error(wd+a)}if(i.prototype=nt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=iG,i.config=i.set=_Le,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return i.config(e),i}function _Le(e){if(!e||typeof e!="object")throw Error(Mi+"Object expected");var t,n,s,i=["precision",1,Xm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((s=e[n=i[t]])!==void 0)if(Qm(s)===s&&s>=i[t+1]&&s<=i[t+2])this[n]=s;else throw Error(wd+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(wd+n+": "+s);return this}var wE=iG(NLe);Xs=new wE(1);const pr=wE;function PLe(e){return ALe(e)||TLe(e)||kLe(e)||CLe()}function CLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kLe(e,t){if(e){if(typeof e=="string")return yP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yP(e,t)}}function TLe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function ALe(e){if(Array.isArray(e))return yP(e)}function yP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var ELe=function(t){return t},aG={"@@functional/placeholder":!0},oG=function(t){return t===aG},vR=function(t){return function n(){return arguments.length===0||arguments.length===1&&oG(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},OLe=function e(t,n){return t===1?n:vR(function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];var o=i.filter(function(l){return l!==aG}).length;return o>=t?n.apply(void 0,i):e(t-o,vR(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var h=i.map(function(m){return oG(m)?c.shift():m});return n.apply(void 0,PLe(h).concat(c))}))})},Ow=function(t){return OLe(t.length,t)},jP=function(t,n){for(var s=[],i=t;i<n;++i)s[i-t]=i;return s},MLe=Ow(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),DLe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return ELe;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},bP=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},lG=function(t){var n=null,s=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,s=t.apply(void 0,a)),s}};function ILe(e){var t;return e===0?t=1:t=Math.floor(new pr(e).abs().log(10).toNumber())+1,t}function LLe(e,t,n){for(var s=new pr(e),i=0,a=[];s.lt(t)&&i<1e5;)a.push(s.toNumber()),s=s.add(n),i++;return a}var RLe=Ow(function(e,t,n){var s=+e,i=+t;return s+n*(i-s)}),$Le=Ow(function(e,t,n){var s=t-+e;return s=s||1/0,(n-e)/s}),FLe=Ow(function(e,t,n){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(n-e)/s))});const Mw={rangeStep:LLe,getDigitCount:ILe,interpolateNumber:RLe,uninterpolateNumber:$Le,uninterpolateTruncation:FLe};function wP(e){return VLe(e)||BLe(e)||cG(e)||zLe()}function zLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BLe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function VLe(e){if(Array.isArray(e))return NP(e)}function Ex(e,t){return HLe(e)||WLe(e,t)||cG(e,t)||ULe()}function ULe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cG(e,t){if(e){if(typeof e=="string")return NP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NP(e,t)}}function NP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function WLe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,i=!1,a=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(c){i=!0,a=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function HLe(e){if(Array.isArray(e))return e}function dG(e){var t=Ex(e,2),n=t[0],s=t[1],i=n,a=s;return n>s&&(i=s,a=n),[i,a]}function uG(e,t,n){if(e.lte(0))return new pr(0);var s=Mw.getDigitCount(e.toNumber()),i=new pr(10).pow(s),a=e.div(i),o=s!==1?.05:.1,l=new pr(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return t?c:new pr(Math.ceil(c))}function qLe(e,t,n){var s=1,i=new pr(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(s=new pr(10).pow(Mw.getDigitCount(e)-1),i=new pr(Math.floor(i.div(s).toNumber())).mul(s)):a>1&&(i=new pr(Math.floor(e)))}else e===0?i=new pr(Math.floor((t-1)/2)):n||(i=new pr(Math.floor(e)));var o=Math.floor((t-1)/2),l=DLe(MLe(function(c){return i.add(new pr(c-o).mul(s)).toNumber()}),jP);return l(0,t)}function hG(e,t,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new pr(0),tickMin:new pr(0),tickMax:new pr(0)};var a=uG(new pr(t).sub(e).div(n-1),s,i),o;e<=0&&t>=0?o=new pr(0):(o=new pr(e).add(t).div(2),o=o.sub(new pr(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new pr(t).sub(o).div(a).toNumber()),d=l+c+1;return d>n?hG(e,t,n,s,i+1):(d<n&&(c=t>0?c+(n-d):c,l=t>0?l:l+(n-d)),{step:a,tickMin:o.sub(new pr(l).mul(a)),tickMax:o.add(new pr(c).mul(a))})}function KLe(e){var t=Ex(e,2),n=t[0],s=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=dG([n,s]),c=Ex(l,2),d=c[0],h=c[1];if(d===-1/0||h===1/0){var m=h===1/0?[d].concat(wP(jP(0,i-1).map(function(){return 1/0}))):[].concat(wP(jP(0,i-1).map(function(){return-1/0})),[h]);return n>s?bP(m):m}if(d===h)return qLe(d,i,a);var f=hG(d,h,o,a),v=f.step,p=f.tickMin,x=f.tickMax,y=Mw.rangeStep(p,x.add(new pr(.1).mul(v)),v);return n>s?bP(y):y}function GLe(e,t){var n=Ex(e,2),s=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=dG([s,i]),l=Ex(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,i];if(c===d)return[c];var h=Math.max(t,2),m=uG(new pr(d).sub(c).div(h-1),a,0),f=[].concat(wP(Mw.rangeStep(new pr(c),new pr(d).sub(new pr(.99).mul(m)),m)),[d]);return s>i?bP(f):f}var ZLe=lG(KLe),YLe=lG(GLe),XLe="Invariant failed";function Gd(e,t){throw new Error(XLe)}var QLe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function am(e){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},am(e)}function jj(){return jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jj.apply(this,arguments)}function JLe(e,t){return n3e(e)||r3e(e,t)||t3e(e,t)||e3e()}function e3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t3e(e,t){if(e){if(typeof e=="string")return yR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yR(e,t)}}function yR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function r3e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function n3e(e){if(Array.isArray(e))return e}function s3e(e,t){if(e==null)return{};var n=i3e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function i3e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function a3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o3e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,pG(s.key),s)}}function l3e(e,t,n){return t&&o3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function c3e(e,t,n){return t=bj(t),d3e(e,mG()?Reflect.construct(t,n||[],bj(e).constructor):t.apply(e,n))}function d3e(e,t){if(t&&(am(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u3e(e)}function u3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mG=function(){return!!e})()}function bj(e){return bj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bj(e)}function h3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SP(e,t)}function SP(e,t){return SP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},SP(e,t)}function fG(e,t,n){return t=pG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pG(e){var t=m3e(e,"string");return am(t)=="symbol"?t:t+""}function m3e(e,t){if(am(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(am(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $g=function(e){function t(){return a3e(this,t),c3e(this,t,arguments)}return h3e(t,e),l3e(t,[{key:"render",value:function(){var s=this.props,i=s.offset,a=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,h=s.xAxis,m=s.yAxis,f=s3e(s,QLe),v=Mt(f,!1);this.props.direction==="x"&&h.type!=="number"&&Gd();var p=c.map(function(x){var y=d(x,l),w=y.x,j=y.y,N=y.value,C=y.errorVal;if(!C)return null;var P=[],k,_;if(Array.isArray(C)){var O=JLe(C,2);k=O[0],_=O[1]}else k=_=C;if(a==="vertical"){var M=h.scale,T=j+i,I=T+o,A=T-o,V=M(N-k),D=M(N+_);P.push({x1:D,y1:I,x2:D,y2:A}),P.push({x1:V,y1:T,x2:D,y2:T}),P.push({x1:V,y1:I,x2:V,y2:A})}else if(a==="horizontal"){var W=m.scale,U=w+i,Q=U-o,q=U+o,B=W(N-k),z=W(N+_);P.push({x1:Q,y1:z,x2:q,y2:z}),P.push({x1:U,y1:B,x2:U,y2:z}),P.push({x1:Q,y1:B,x2:q,y2:B})}return te.createElement(Sr,jj({className:"recharts-errorBar",key:"bar-".concat(P.map(function(H){return"".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))},v),P.map(function(H){return te.createElement("line",jj({},H,{key:"line-".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))}))});return te.createElement(Sr,{className:"recharts-errorBars"},p)}}])}(te.Component);fG($g,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});fG($g,"displayName","ErrorBar");function Ox(e){"@babel/helpers - typeof";return Ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ox(e)}function jR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Fc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jR(Object(n),!0).forEach(function(s){f3e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function f3e(e,t,n){return t=p3e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p3e(e){var t=x3e(e,"string");return Ox(t)=="symbol"?t:t+""}function x3e(e,t){if(Ox(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ox(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xG=function(t){var n=t.children,s=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,o=zs(n,ec);if(!o)return null;var l=ec.defaultProps,c=l!==void 0?Fc(Fc({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:a==="children"?d=(s||[]).reduce(function(h,m){var f=m.item,v=m.props,p=v.sectors||v.data||[];return h.concat(p.map(function(x){return{type:o.props.iconType||f.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):d=(s||[]).map(function(h){var m=h.item,f=m.type.defaultProps,v=f!==void 0?Fc(Fc({},f),m.props):{},p=v.dataKey,x=v.name,y=v.legendType,w=v.hide;return{inactive:w,dataKey:p,type:c.iconType||y||"square",color:NE(m),value:x||p,payload:v}}),Fc(Fc(Fc({},c),ec.getWithHeight(o,i)),{},{payload:d,item:o})};function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function bR(e){return j3e(e)||y3e(e)||v3e(e)||g3e()}function g3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v3e(e,t){if(e){if(typeof e=="string")return _P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _P(e,t)}}function y3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function j3e(e){if(Array.isArray(e))return _P(e)}function _P(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function wR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wR(Object(n),!0).forEach(function(s){fh(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function fh(e,t,n){return t=b3e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b3e(e){var t=w3e(e,"string");return Mx(t)=="symbol"?t:t+""}function w3e(e,t){if(Mx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Mx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gs(e,t,n){return $t(e)||$t(t)?n:Pn(t)?ki(e,t,n):At(t)?t(e):n}function vp(e,t,n,s){var i=yLe(e,function(l){return gs(l,t)});if(n==="number"){var a=i.filter(function(l){return We(l)||parseFloat(l)});return a.length?[Ew(a),Il(a)]:[1/0,-1/0]}var o=s?i.filter(function(l){return!$t(l)}):i;return o.map(function(l){return Pn(l)||l instanceof Date?l:""})}var N3e=function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=s==null?void 0:s.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,d=0;d<l;d++){var h=d>0?i[d-1].coordinate:i[l-1].coordinate,m=i[d].coordinate,f=d>=l-1?i[0].coordinate:i[d+1].coordinate,v=void 0;if(ra(m-h)!==ra(f-m)){var p=[];if(ra(f-m)===ra(c[1]-c[0])){v=f;var x=m+c[1]-c[0];p[0]=Math.min(x,(x+h)/2),p[1]=Math.max(x,(x+h)/2)}else{v=h;var y=f+c[1]-c[0];p[0]=Math.min(m,(y+m)/2),p[1]=Math.max(m,(y+m)/2)}var w=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(t>w[0]&&t<=w[1]||t>=p[0]&&t<=p[1]){o=i[d].index;break}}else{var j=Math.min(h,f),N=Math.max(h,f);if(t>(j+m)/2&&t<=(N+m)/2){o=i[d].index;break}}}else for(var C=0;C<l;C++)if(C===0&&t<=(s[C].coordinate+s[C+1].coordinate)/2||C>0&&C<l-1&&t>(s[C].coordinate+s[C-1].coordinate)/2&&t<=(s[C].coordinate+s[C+1].coordinate)/2||C===l-1&&t>(s[C].coordinate+s[C-1].coordinate)/2){o=s[C].index;break}return o},NE=function(t){var n,s=t,i=s.type.displayName,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Xr(Xr({},t.type.defaultProps),t.props):t.props,o=a.stroke,l=a.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},S3e=function(t){var n=t.barSize,s=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},l=Object.keys(a),c=0,d=l.length;c<d;c++)for(var h=a[l[c]].stackGroups,m=Object.keys(h),f=0,v=m.length;f<v;f++){var p=h[m[f]],x=p.items,y=p.cateAxisId,w=x.filter(function(_){return Mo(_.type).indexOf("Bar")>=0});if(w&&w.length){var j=w[0].type.defaultProps,N=j!==void 0?Xr(Xr({},j),w[0].props):w[0].props,C=N.barSize,P=N[y];o[P]||(o[P]=[]);var k=$t(C)?n:C;o[P].push({item:w[0],stackList:w.slice(1),barSize:$t(k)?void 0:qd(k,s,0)})}}return o},_3e=function(t){var n=t.barGap,s=t.barCategoryGap,i=t.bandSize,a=t.sizeList,o=a===void 0?[]:a,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=qd(n,i,0,!0),h,m=[];if(o[0].barSize===+o[0].barSize){var f=!1,v=i/c,p=o.reduce(function(C,P){return C+P.barSize||0},0);p+=(c-1)*d,p>=i&&(p-=(c-1)*d,d=0),p>=i&&v>0&&(f=!0,v*=.9,p=c*v);var x=(i-p)/2>>0,y={offset:x-d,size:0};h=o.reduce(function(C,P){var k={item:P.item,position:{offset:y.offset+y.size+d,size:f?v:P.barSize}},_=[].concat(bR(C),[k]);return y=_[_.length-1].position,P.stackList&&P.stackList.length&&P.stackList.forEach(function(O){_.push({item:O,position:y})}),_},m)}else{var w=qd(s,i,0,!0);i-2*w-(c-1)*d<=0&&(d=0);var j=(i-2*w-(c-1)*d)/c;j>1&&(j>>=0);var N=l===+l?Math.min(j,l):j;h=o.reduce(function(C,P,k){var _=[].concat(bR(C),[{item:P.item,position:{offset:w+(j+d)*k+(j-N)/2,size:N}}]);return P.stackList&&P.stackList.length&&P.stackList.forEach(function(O){_.push({item:O,position:_[_.length-1].position})}),_},m)}return h},P3e=function(t,n,s,i){var a=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=xG({children:a,legendWidth:c});if(d){var h=i||{},m=h.width,f=h.height,v=d.align,p=d.verticalAlign,x=d.layout;if((x==="vertical"||x==="horizontal"&&p==="middle")&&v!=="center"&&We(t[v]))return Xr(Xr({},t),{},fh({},v,t[v]+(m||0)));if((x==="horizontal"||x==="vertical"&&v==="center")&&p!=="middle"&&We(t[p]))return Xr(Xr({},t),{},fh({},p,t[p]+(f||0)))}return t},C3e=function(t,n,s){return $t(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||s==="x"?n==="xAxis":s==="y"?n==="yAxis":!0},gG=function(t,n,s,i,a){var o=n.props.children,l=Ti(o,$g).filter(function(d){return C3e(i,a,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,h){var m=gs(h,s);if($t(m))return d;var f=Array.isArray(m)?[Ew(m),Il(m)]:[m,m],v=c.reduce(function(p,x){var y=gs(h,x,0),w=f[0]-Math.abs(Array.isArray(y)?y[0]:y),j=f[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(w,p[0]),Math.max(j,p[1])]},[1/0,-1/0]);return[Math.min(v[0],d[0]),Math.max(v[1],d[1])]},[1/0,-1/0])}return null},k3e=function(t,n,s,i,a){var o=n.map(function(l){return gG(t,l,s,a,i)}).filter(function(l){return!$t(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},vG=function(t,n,s,i,a){var o=n.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&gG(t,c,d,i)||vp(t,d,s,a)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var h=0,m=d.length;h<m;h++)l[d[h]]||(l[d[h]]=!0,c.push(d[h]));return c},[])},yG=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},jG=function(t,n,s,i){if(i)return t.map(function(c){return c.coordinate});var a,o,l=t.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===s&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(s),l},_o=function(t,n,s){if(!t)return null;var i=t.scale,a=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||s)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?ra(l[0]-l[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var h=(t.ticks||t.niceTicks).map(function(m){var f=a?a.indexOf(m):m;return{coordinate:i(f)+d,value:m,offset:d}});return h.filter(function(m){return!Hm(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,f){return{coordinate:i(m)+d,value:m,index:f,offset:d}}):i.ticks&&!s?i.ticks(t.tickCount).map(function(m){return{coordinate:i(m)+d,value:m,offset:d}}):i.domain().map(function(m,f){return{coordinate:i(m)+d,value:a?a[m]:m,index:f,offset:d}})},cS=new WeakMap,Zv=function(t,n){if(typeof n!="function")return t;cS.has(t)||cS.set(t,new WeakMap);var s=cS.get(t);if(s.has(n))return s.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return s.set(n,i),i},T3e=function(t,n,s){var i=t.scale,a=t.type,o=t.layout,l=t.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:_x(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:pj(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?{scale:gp(),realScaleType:"point"}:a==="category"?{scale:_x(),realScaleType:"band"}:{scale:pj(),realScaleType:"linear"};if(Og(i)){var c="scale".concat(vw(i));return{scale:(pR[c]||gp)(),realScaleType:pR[c]?c:"point"}}return At(i)?{scale:i}:{scale:gp(),realScaleType:"point"}},NR=1e-4,A3e=function(t){var n=t.domain();if(!(!n||n.length<=2)){var s=n.length,i=t.range(),a=Math.min(i[0],i[1])-NR,o=Math.max(i[0],i[1])+NR,l=t(n[0]),c=t(n[s-1]);(l<a||l>o||c<a||c>o)&&t.domain([n[0],n[s-1]])}},E3e=function(t,n){if(!t)return null;for(var s=0,i=t.length;s<i;s++)if(t[s].item===n)return t[s].position;return null},O3e=function(t,n){if(!n||n.length!==2||!We(n[0])||!We(n[1]))return t;var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[t[0],t[1]];return(!We(t[0])||t[0]<s)&&(a[0]=s),(!We(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<s&&(a[1]=s),a},M3e=function(t){var n=t.length;if(!(n<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0,l=0;l<n;++l){var c=Hm(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=a,t[l][s][1]=a+c,a=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},D3e=function(t){var n=t.length;if(!(n<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0;o<n;++o){var l=Hm(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=a,t[o][s][1]=a+l,a=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},I3e={sign:M3e,expand:Y_e,none:Xh,silhouette:X_e,wiggle:Q_e,positive:D3e},L3e=function(t,n,s){var i=n.map(function(l){return l.props.dataKey}),a=I3e[s],o=Z_e().keys(i).value(function(l,c){return+gs(l,c,0)}).order(Y2).offset(a);return o(t)},R3e=function(t,n,s,i,a,o){if(!t)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(m,f){var v,p=(v=f.type)!==null&&v!==void 0&&v.defaultProps?Xr(Xr({},f.type.defaultProps),f.props):f.props,x=p.stackId,y=p.hide;if(y)return m;var w=p[s],j=m[w]||{hasStack:!1,stackGroups:{}};if(Pn(x)){var N=j.stackGroups[x]||{numericAxisId:s,cateAxisId:i,items:[]};N.items.push(f),j.hasStack=!0,j.stackGroups[x]=N}else j.stackGroups[qm("_stackId_")]={numericAxisId:s,cateAxisId:i,items:[f]};return Xr(Xr({},m),{},fh({},w,j))},c),h={};return Object.keys(d).reduce(function(m,f){var v=d[f];if(v.hasStack){var p={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(x,y){var w=v.stackGroups[y];return Xr(Xr({},x),{},fh({},y,{numericAxisId:s,cateAxisId:i,items:w.items,stackedData:L3e(t,w.items,a)}))},p)}return Xr(Xr({},m),{},fh({},f,v))},h)},$3e=function(t,n){var s=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=s||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var h=ZLe(d,a,l);return t.domain([Ew(h),Il(h)]),{niceTicks:h}}if(a&&i==="number"){var m=t.domain(),f=YLe(m,a,l);return{niceTicks:f}}return null};function wj(e){var t=e.axis,n=e.ticks,s=e.bandSize,i=e.entry,a=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!$t(i[t.dataKey])){var l=q0(n,"value",i[t.dataKey]);if(l)return l.coordinate+s/2}return n[a]?n[a].coordinate+s/2:null}var c=gs(i,$t(o)?t.dataKey:o);return $t(c)?null:t.scale(c)}var SR=function(t){var n=t.axis,s=t.ticks,i=t.offset,a=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return s[l]?s[l].coordinate+i:null;var c=gs(o,n.dataKey,n.domain[l]);return $t(c)?null:n.scale(c)-a/2+i},F3e=function(t){var n=t.numericAxis,s=n.scale.domain();if(n.type==="number"){var i=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);return i<=0&&a>=0?0:a<0?a:i}return s[0]},z3e=function(t,n){var s,i=(s=t.type)!==null&&s!==void 0&&s.defaultProps?Xr(Xr({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(Pn(a)){var o=n[a];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},B3e=function(t){return t.reduce(function(n,s){return[Ew(s.concat([n[0]]).filter(We)),Il(s.concat([n[1]]).filter(We))]},[1/0,-1/0])},bG=function(t,n,s){return Object.keys(t).reduce(function(i,a){var o=t[a],l=o.stackedData,c=l.reduce(function(d,h){var m=B3e(h.slice(n,s+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},_R=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PP=function(t,n,s){if(At(t))return t(n,s);if(!Array.isArray(t))return n;var i=[];if(We(t[0]))i[0]=s?t[0]:Math.min(t[0],n[0]);else if(_R.test(t[0])){var a=+_R.exec(t[0])[1];i[0]=n[0]-a}else At(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(We(t[1]))i[1]=s?t[1]:Math.max(t[1],n[1]);else if(PR.test(t[1])){var o=+PR.exec(t[1])[1];i[1]=n[1]+o}else At(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},Nj=function(t,n,s){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!s||i>0)return i}if(t&&n&&n.length>=2){for(var a=XA(n,function(m){return m.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var d=a[l],h=a[l-1];o=Math.min((d.coordinate||0)-(h.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},CR=function(t,n,s){return!t||!t.length||im(t,ki(s,"type.defaultProps.domain"))?n:t},wG=function(t,n){var s=t.type.defaultProps?Xr(Xr({},t.type.defaultProps),t.props):t.props,i=s.dataKey,a=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,h=s.hide;return Xr(Xr({},Mt(t,!1)),{},{dataKey:i,unit:o,formatter:l,name:a||i,color:NE(t),value:gs(n,i),type:c,payload:n,chartType:d,hide:h})};function Dx(e){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dx(e)}function kR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function TR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(n),!0).forEach(function(s){V3e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function V3e(e,t,n){return t=U3e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U3e(e){var t=W3e(e,"string");return Dx(t)=="symbol"?t:t+""}function W3e(e,t){if(Dx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Dx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sj=Math.PI/180,H3e=function(t){return t*180/Math.PI},Bn=function(t,n,s,i){return{x:t+Math.cos(-Sj*i)*s,y:n+Math.sin(-Sj*i)*s}},q3e=function(t,n){var s=t.x,i=t.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(s-a,2)+Math.pow(i-o,2))},K3e=function(t,n){var s=t.x,i=t.y,a=n.cx,o=n.cy,l=q3e({x:s,y:i},{x:a,y:o});if(l<=0)return{radius:l};var c=(s-a)/l,d=Math.acos(c);return i>o&&(d=2*Math.PI-d),{radius:l,angle:H3e(d),angleInRadian:d}},G3e=function(t){var n=t.startAngle,s=t.endAngle,i=Math.floor(n/360),a=Math.floor(s/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:s-o*360}},Z3e=function(t,n){var s=n.startAngle,i=n.endAngle,a=Math.floor(s/360),o=Math.floor(i/360),l=Math.min(a,o);return t+l*360},AR=function(t,n){var s=t.x,i=t.y,a=K3e({x:s,y:i},n),o=a.radius,l=a.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var h=G3e(n),m=h.startAngle,f=h.endAngle,v=l,p;if(m<=f){for(;v>f;)v-=360;for(;v<m;)v+=360;p=v>=m&&v<=f}else{for(;v>m;)v-=360;for(;v<f;)v+=360;p=v>=f&&v<=m}return p?TR(TR({},n),{},{radius:o,angle:Z3e(v,n)}):null};function Ix(e){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}var Y3e=["offset"];function X3e(e){return tRe(e)||eRe(e)||J3e(e)||Q3e()}function Q3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J3e(e,t){if(e){if(typeof e=="string")return CP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CP(e,t)}}function eRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tRe(e){if(Array.isArray(e))return CP(e)}function CP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function rRe(e,t){if(e==null)return{};var n=nRe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function nRe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function ER(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ER(Object(n),!0).forEach(function(s){sRe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function sRe(e,t,n){return t=iRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iRe(e){var t=aRe(e,"string");return Ix(t)=="symbol"?t:t+""}function aRe(e,t){if(Ix(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ix(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lx(){return Lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Lx.apply(this,arguments)}var oRe=function(t){var n=t.value,s=t.formatter,i=$t(t.children)?n:t.children;return At(s)?s(i):i},lRe=function(t,n){var s=ra(n-t),i=Math.min(Math.abs(n-t),360);return s*i},cRe=function(t,n,s){var i=t.position,a=t.viewBox,o=t.offset,l=t.className,c=a,d=c.cx,h=c.cy,m=c.innerRadius,f=c.outerRadius,v=c.startAngle,p=c.endAngle,x=c.clockWise,y=(m+f)/2,w=lRe(v,p),j=w>=0?1:-1,N,C;i==="insideStart"?(N=v+j*o,C=x):i==="insideEnd"?(N=p-j*o,C=!x):i==="end"&&(N=p+j*o,C=x),C=w<=0?C:!C;var P=Bn(d,h,y,N),k=Bn(d,h,y,N+(C?1:-1)*359),_="M".concat(P.x,",").concat(P.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),O=$t(t.id)?qm("recharts-radial-line-"):t.id;return te.createElement("text",Lx({},s,{dominantBaseline:"central",className:Ht("recharts-radial-bar-label",l)}),te.createElement("defs",null,te.createElement("path",{id:O,d:_})),te.createElement("textPath",{xlinkHref:"#".concat(O)},n))},dRe=function(t){var n=t.viewBox,s=t.offset,i=t.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,d=a.outerRadius,h=a.startAngle,m=a.endAngle,f=(h+m)/2;if(i==="outside"){var v=Bn(o,l,d+s,f),p=v.x,x=v.y;return{x:p,y:x,textAnchor:p>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+d)/2,w=Bn(o,l,y,f),j=w.x,N=w.y;return{x:j,y:N,textAnchor:"middle",verticalAnchor:"middle"}},uRe=function(t){var n=t.viewBox,s=t.parentViewBox,i=t.offset,a=t.position,o=n,l=o.x,c=o.y,d=o.width,h=o.height,m=h>=0?1:-1,f=m*i,v=m>0?"end":"start",p=m>0?"start":"end",x=d>=0?1:-1,y=x*i,w=x>0?"end":"start",j=x>0?"start":"end";if(a==="top"){var N={x:l+d/2,y:c-m*i,textAnchor:"middle",verticalAnchor:v};return vn(vn({},N),s?{height:Math.max(c-s.y,0),width:d}:{})}if(a==="bottom"){var C={x:l+d/2,y:c+h+f,textAnchor:"middle",verticalAnchor:p};return vn(vn({},C),s?{height:Math.max(s.y+s.height-(c+h),0),width:d}:{})}if(a==="left"){var P={x:l-y,y:c+h/2,textAnchor:w,verticalAnchor:"middle"};return vn(vn({},P),s?{width:Math.max(P.x-s.x,0),height:h}:{})}if(a==="right"){var k={x:l+d+y,y:c+h/2,textAnchor:j,verticalAnchor:"middle"};return vn(vn({},k),s?{width:Math.max(s.x+s.width-k.x,0),height:h}:{})}var _=s?{width:d,height:h}:{};return a==="insideLeft"?vn({x:l+y,y:c+h/2,textAnchor:j,verticalAnchor:"middle"},_):a==="insideRight"?vn({x:l+d-y,y:c+h/2,textAnchor:w,verticalAnchor:"middle"},_):a==="insideTop"?vn({x:l+d/2,y:c+f,textAnchor:"middle",verticalAnchor:p},_):a==="insideBottom"?vn({x:l+d/2,y:c+h-f,textAnchor:"middle",verticalAnchor:v},_):a==="insideTopLeft"?vn({x:l+y,y:c+f,textAnchor:j,verticalAnchor:p},_):a==="insideTopRight"?vn({x:l+d-y,y:c+f,textAnchor:w,verticalAnchor:p},_):a==="insideBottomLeft"?vn({x:l+y,y:c+h-f,textAnchor:j,verticalAnchor:v},_):a==="insideBottomRight"?vn({x:l+d-y,y:c+h-f,textAnchor:w,verticalAnchor:v},_):Bm(a)&&(We(a.x)||rd(a.x))&&(We(a.y)||rd(a.y))?vn({x:l+qd(a.x,d),y:c+qd(a.y,h),textAnchor:"end",verticalAnchor:"end"},_):vn({x:l+d/2,y:c+h/2,textAnchor:"middle",verticalAnchor:"middle"},_)},hRe=function(t){return"cx"in t&&We(t.cx)};function Yn(e){var t=e.offset,n=t===void 0?5:t,s=rRe(e,Y3e),i=vn({offset:n},s),a=i.viewBox,o=i.position,l=i.value,c=i.children,d=i.content,h=i.className,m=h===void 0?"":h,f=i.textBreakAll;if(!a||$t(l)&&$t(c)&&!b.isValidElement(d)&&!At(d))return null;if(b.isValidElement(d))return b.cloneElement(d,i);var v;if(At(d)){if(v=b.createElement(d,i),b.isValidElement(v))return v}else v=oRe(i);var p=hRe(a),x=Mt(i,!0);if(p&&(o==="insideStart"||o==="insideEnd"||o==="end"))return cRe(i,v,x);var y=p?dRe(i):uRe(i);return te.createElement(lj,Lx({className:Ht("recharts-label",m)},x,y,{breakAll:f}),v)}Yn.displayName="Label";var NG=function(t){var n=t.cx,s=t.cy,i=t.angle,a=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,h=t.outerRadius,m=t.x,f=t.y,v=t.top,p=t.left,x=t.width,y=t.height,w=t.clockWise,j=t.labelViewBox;if(j)return j;if(We(x)&&We(y)){if(We(m)&&We(f))return{x:m,y:f,width:x,height:y};if(We(v)&&We(p))return{x:v,y:p,width:x,height:y}}return We(m)&&We(f)?{x:m,y:f,width:0,height:0}:We(n)&&We(s)?{cx:n,cy:s,startAngle:a||i||0,endAngle:o||i||0,innerRadius:d||0,outerRadius:h||c||l||0,clockWise:w}:t.viewBox?t.viewBox:{}},mRe=function(t,n){return t?t===!0?te.createElement(Yn,{key:"label-implicit",viewBox:n}):Pn(t)?te.createElement(Yn,{key:"label-implicit",viewBox:n,value:t}):b.isValidElement(t)?t.type===Yn?b.cloneElement(t,{key:"label-implicit",viewBox:n}):te.createElement(Yn,{key:"label-implicit",content:t,viewBox:n}):At(t)?te.createElement(Yn,{key:"label-implicit",content:t,viewBox:n}):Bm(t)?te.createElement(Yn,Lx({viewBox:n},t,{key:"label-implicit"})):null:null},fRe=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var i=t.children,a=NG(t),o=Ti(i,Yn).map(function(c,d){return b.cloneElement(c,{viewBox:n||a,key:"label-".concat(d)})});if(!s)return o;var l=mRe(t.label,n||a);return[l].concat(X3e(o))};Yn.parseViewBox=NG;Yn.renderCallByParent=fRe;function pRe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var xRe=pRe;const gRe=ur(xRe);function Rx(e){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(e)}var vRe=["valueAccessor"],yRe=["data","dataKey","clockWise","id","textBreakAll"];function jRe(e){return SRe(e)||NRe(e)||wRe(e)||bRe()}function bRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wRe(e,t){if(e){if(typeof e=="string")return kP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kP(e,t)}}function NRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SRe(e){if(Array.isArray(e))return kP(e)}function kP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function _j(){return _j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_j.apply(this,arguments)}function OR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function MR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OR(Object(n),!0).forEach(function(s){_Re(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function _Re(e,t,n){return t=PRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PRe(e){var t=CRe(e,"string");return Rx(t)=="symbol"?t:t+""}function CRe(e,t){if(Rx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Rx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DR(e,t){if(e==null)return{};var n=kRe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function kRe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var TRe=function(t){return Array.isArray(t.value)?gRe(t.value):t.value};function Lo(e){var t=e.valueAccessor,n=t===void 0?TRe:t,s=DR(e,vRe),i=s.data,a=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=DR(s,yRe);return!i||!i.length?null:te.createElement(Sr,{className:"recharts-label-list"},i.map(function(h,m){var f=$t(a)?n(h,m):gs(h&&h.payload,a),v=$t(l)?{}:{id:"".concat(l,"-").concat(m)};return te.createElement(Yn,_j({},Mt(h,!0),d,v,{parentViewBox:h.parentViewBox,value:f,textBreakAll:c,viewBox:Yn.parseViewBox($t(o)?h:MR(MR({},h),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}Lo.displayName="LabelList";function ARe(e,t){return e?e===!0?te.createElement(Lo,{key:"labelList-implicit",data:t}):te.isValidElement(e)||At(e)?te.createElement(Lo,{key:"labelList-implicit",data:t,content:e}):Bm(e)?te.createElement(Lo,_j({data:t},e,{key:"labelList-implicit"})):null:null}function ERe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,i=Ti(s,Lo).map(function(o,l){return b.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return i;var a=ARe(e.label,t);return[a].concat(jRe(i))}Lo.renderCallByParent=ERe;function $x(e){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$x(e)}function TP(){return TP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},TP.apply(this,arguments)}function IR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function LR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IR(Object(n),!0).forEach(function(s){ORe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ORe(e,t,n){return t=MRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MRe(e){var t=DRe(e,"string");return $x(t)=="symbol"?t:t+""}function DRe(e,t){if($x(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if($x(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IRe=function(t,n){var s=ra(n-t),i=Math.min(Math.abs(n-t),359.999);return s*i},Yv=function(t){var n=t.cx,s=t.cy,i=t.radius,a=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,h=c*(l?1:-1)+i,m=Math.asin(c/h)/Sj,f=d?a:a+o*m,v=Bn(n,s,h,f),p=Bn(n,s,i,f),x=d?a-o*m:a,y=Bn(n,s,h*Math.cos(m*Sj),x);return{center:v,circleTangency:p,lineTangency:y,theta:m}},SG=function(t){var n=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.startAngle,l=t.endAngle,c=IRe(o,l),d=o+c,h=Bn(n,s,a,o),m=Bn(n,s,a,d),f="M ".concat(h.x,",").concat(h.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(i>0){var v=Bn(n,s,i,o),p=Bn(n,s,i,d);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(v.x,",").concat(v.y," Z")}else f+="L ".concat(n,",").concat(s," Z");return f},LRe=function(t){var n=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,h=t.endAngle,m=ra(h-d),f=Yv({cx:n,cy:s,radius:a,angle:d,sign:m,cornerRadius:o,cornerIsExternal:c}),v=f.circleTangency,p=f.lineTangency,x=f.theta,y=Yv({cx:n,cy:s,radius:a,angle:h,sign:-m,cornerRadius:o,cornerIsExternal:c}),w=y.circleTangency,j=y.lineTangency,N=y.theta,C=c?Math.abs(d-h):Math.abs(d-h)-x-N;if(C<0)return l?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):SG({cx:n,cy:s,innerRadius:i,outerRadius:a,startAngle:d,endAngle:h});var P="M ".concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(C>180),",").concat(+(m<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
  `);if(i>0){var k=Yv({cx:n,cy:s,radius:i,angle:d,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=k.circleTangency,O=k.lineTangency,M=k.theta,T=Yv({cx:n,cy:s,radius:i,angle:h,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=T.circleTangency,A=T.lineTangency,V=T.theta,D=c?Math.abs(d-h):Math.abs(d-h)-M-V;if(D<0&&o===0)return"".concat(P,"L").concat(n,",").concat(s,"Z");P+="L".concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(D>180),",").concat(+(m>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,"Z")}else P+="L".concat(n,",").concat(s,"Z");return P},RRe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_G=function(t){var n=LR(LR({},RRe),t),s=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,h=n.startAngle,m=n.endAngle,f=n.className;if(o<a||h===m)return null;var v=Ht("recharts-sector",f),p=o-a,x=qd(l,p,0,!0),y;return x>0&&Math.abs(h-m)<360?y=LRe({cx:s,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(x,p/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:h,endAngle:m}):y=SG({cx:s,cy:i,innerRadius:a,outerRadius:o,startAngle:h,endAngle:m}),te.createElement("path",TP({},Mt(n,!0),{className:v,d:y,role:"img"}))};function Fx(e){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fx(e)}function AP(){return AP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},AP.apply(this,arguments)}function RR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function $R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RR(Object(n),!0).forEach(function(s){$Re(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function $Re(e,t,n){return t=FRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FRe(e){var t=zRe(e,"string");return Fx(t)=="symbol"?t:t+""}function zRe(e,t){if(Fx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Fx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FR={curveBasisClosed:$_e,curveBasisOpen:F_e,curveBasis:R_e,curveBumpX:N_e,curveBumpY:S_e,curveLinearClosed:z_e,curveLinear:jw,curveMonotoneX:B_e,curveMonotoneY:V_e,curveNatural:U_e,curveStep:W_e,curveStepAfter:q_e,curveStepBefore:H_e},Xv=function(t){return t.x===+t.x&&t.y===+t.y},If=function(t){return t.x},Lf=function(t){return t.y},BRe=function(t,n){if(At(t))return t;var s="curve".concat(vw(t));return(s==="curveMonotone"||s==="curveBump")&&n?FR["".concat(s).concat(n==="vertical"?"Y":"X")]:FR[s]||jw},VRe=function(t){var n=t.type,s=n===void 0?"linear":n,i=t.points,a=i===void 0?[]:i,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,h=BRe(s,l),m=d?a.filter(function(x){return Xv(x)}):a,f;if(Array.isArray(o)){var v=d?o.filter(function(x){return Xv(x)}):o,p=m.map(function(x,y){return $R($R({},x),{},{base:v[y]})});return l==="vertical"?f=Bv().y(Lf).x1(If).x0(function(x){return x.base.x}):f=Bv().x(If).y1(Lf).y0(function(x){return x.base.y}),f.defined(Xv).curve(h),f(p)}return l==="vertical"&&We(o)?f=Bv().y(Lf).x1(If).x0(o):We(o)?f=Bv().x(If).y1(Lf).y0(o):f=_q().x(If).y(Lf),f.defined(Xv).curve(h),f(m)},ph=function(t){var n=t.className,s=t.points,i=t.path,a=t.pathRef;if((!s||!s.length)&&!i)return null;var o=s&&s.length?VRe(t):i;return te.createElement("path",AP({},Mt(t,!1),K0(t),{className:Ht("recharts-curve",n),d:o,ref:a}))},PG={exports:{}},URe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",WRe=URe,HRe=WRe;function CG(){}function kG(){}kG.resetWarningCache=CG;var qRe=function(){function e(s,i,a,o,l,c){if(c!==HRe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:kG,resetWarningCache:CG};return n.PropTypes=n,n};PG.exports=qRe();var KRe=PG.exports;const sr=ur(KRe);var GRe=Object.getOwnPropertyNames,ZRe=Object.getOwnPropertySymbols,YRe=Object.prototype.hasOwnProperty;function zR(e,t){return function(s,i,a){return e(s,i,a)&&t(s,i,a)}}function Qv(e){return function(n,s,i){if(!n||!s||typeof n!="object"||typeof s!="object")return e(n,s,i);var a=i.cache,o=a.get(n),l=a.get(s);if(o&&l)return o===s&&l===n;a.set(n,s),a.set(s,n);var c=e(n,s,i);return a.delete(n),a.delete(s),c}}function BR(e){return GRe(e).concat(ZRe(e))}var XRe=Object.hasOwn||function(e,t){return YRe.call(e,t)};function ou(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var QRe="__v",JRe="__o",e5e="_owner",VR=Object.getOwnPropertyDescriptor,UR=Object.keys;function t5e(e,t,n){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n.equals(e[s],t[s],s,s,e,t,n))return!1;return!0}function r5e(e,t){return ou(e.getTime(),t.getTime())}function n5e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function s5e(e,t){return e===t}function WR(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var d=t.entries(),h=!1,m=0;(l=d.next())&&!l.done;){if(i[m]){m++;continue}var f=o.value,v=l.value;if(n.equals(f[0],v[0],c,m,e,t,n)&&n.equals(f[1],v[1],f[0],v[0],e,t,n)){h=i[m]=!0;break}m++}if(!h)return!1;c++}return!0}var i5e=ou;function a5e(e,t,n){var s=UR(e),i=s.length;if(UR(t).length!==i)return!1;for(;i-- >0;)if(!TG(e,t,n,s[i]))return!1;return!0}function Rf(e,t,n){var s=BR(e),i=s.length;if(BR(t).length!==i)return!1;for(var a,o,l;i-- >0;)if(a=s[i],!TG(e,t,n,a)||(o=VR(e,a),l=VR(t,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function o5e(e,t){return ou(e.valueOf(),t.valueOf())}function l5e(e,t){return e.source===t.source&&e.flags===t.flags}function HR(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.values(),o,l;(o=a.next())&&!o.done;){for(var c=t.values(),d=!1,h=0;(l=c.next())&&!l.done;){if(!i[h]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){d=i[h]=!0;break}h++}if(!d)return!1}return!0}function c5e(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function d5e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function TG(e,t,n,s){return(s===e5e||s===JRe||s===QRe)&&(e.$$typeof||t.$$typeof)?!0:XRe(t,s)&&n.equals(e[s],t[s],s,s,e,t,n)}var u5e="[object Arguments]",h5e="[object Boolean]",m5e="[object Date]",f5e="[object Error]",p5e="[object Map]",x5e="[object Number]",g5e="[object Object]",v5e="[object RegExp]",y5e="[object Set]",j5e="[object String]",b5e="[object URL]",w5e=Array.isArray,qR=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,KR=Object.assign,N5e=Object.prototype.toString.call.bind(Object.prototype.toString);function S5e(e){var t=e.areArraysEqual,n=e.areDatesEqual,s=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,h=e.areSetsEqual,m=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(p,x,y){if(p===x)return!0;if(p==null||x==null)return!1;var w=typeof p;if(w!==typeof x)return!1;if(w!=="object")return w==="number"?o(p,x,y):w==="function"?i(p,x,y):!1;var j=p.constructor;if(j!==x.constructor)return!1;if(j===Object)return l(p,x,y);if(w5e(p))return t(p,x,y);if(qR!=null&&qR(p))return m(p,x,y);if(j===Date)return n(p,x,y);if(j===RegExp)return d(p,x,y);if(j===Map)return a(p,x,y);if(j===Set)return h(p,x,y);var N=N5e(p);return N===m5e?n(p,x,y):N===v5e?d(p,x,y):N===p5e?a(p,x,y):N===y5e?h(p,x,y):N===g5e?typeof p.then!="function"&&typeof x.then!="function"&&l(p,x,y):N===b5e?f(p,x,y):N===f5e?s(p,x,y):N===u5e?l(p,x,y):N===h5e||N===x5e||N===j5e?c(p,x,y):!1}}function _5e(e){var t=e.circular,n=e.createCustomConfig,s=e.strict,i={areArraysEqual:s?Rf:t5e,areDatesEqual:r5e,areErrorsEqual:n5e,areFunctionsEqual:s5e,areMapsEqual:s?zR(WR,Rf):WR,areNumbersEqual:i5e,areObjectsEqual:s?Rf:a5e,arePrimitiveWrappersEqual:o5e,areRegExpsEqual:l5e,areSetsEqual:s?zR(HR,Rf):HR,areTypedArraysEqual:s?Rf:c5e,areUrlsEqual:d5e};if(n&&(i=KR({},i,n(i))),t){var a=Qv(i.areArraysEqual),o=Qv(i.areMapsEqual),l=Qv(i.areObjectsEqual),c=Qv(i.areSetsEqual);i=KR({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function P5e(e){return function(t,n,s,i,a,o,l){return e(t,n,l)}}function C5e(e){var t=e.circular,n=e.comparator,s=e.createState,i=e.equals,a=e.strict;if(s)return function(c,d){var h=s(),m=h.cache,f=m===void 0?t?new WeakMap:void 0:m,v=h.meta;return n(c,d,{cache:f,equals:i,meta:v,strict:a})};if(t)return function(c,d){return n(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,d){return n(c,d,o)}}var k5e=Ac();Ac({strict:!0});Ac({circular:!0});Ac({circular:!0,strict:!0});Ac({createInternalComparator:function(){return ou}});Ac({strict:!0,createInternalComparator:function(){return ou}});Ac({circular:!0,createInternalComparator:function(){return ou}});Ac({circular:!0,createInternalComparator:function(){return ou},strict:!0});function Ac(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,s=e.createInternalComparator,i=e.createState,a=e.strict,o=a===void 0?!1:a,l=_5e(e),c=S5e(l),d=s?s(c):P5e(c);return C5e({circular:n,comparator:c,createState:i,equals:d,strict:o})}function T5e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function GR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,s=function i(a){n<0&&(n=a),a-n>t?(e(a),n=-1):T5e(i)};requestAnimationFrame(s)}function EP(e){"@babel/helpers - typeof";return EP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EP(e)}function A5e(e){return D5e(e)||M5e(e)||O5e(e)||E5e()}function E5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O5e(e,t){if(e){if(typeof e=="string")return ZR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZR(e,t)}}function ZR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function M5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function D5e(e){if(Array.isArray(e))return e}function I5e(){var e={},t=function(){return null},n=!1,s=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=A5e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){GR(i.bind(null,d),c);return}i(c),GR(i.bind(null,d));return}EP(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,s(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function zx(e){"@babel/helpers - typeof";return zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zx(e)}function YR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function XR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YR(Object(n),!0).forEach(function(s){AG(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function AG(e,t,n){return t=L5e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L5e(e){var t=R5e(e,"string");return zx(t)==="symbol"?t:String(t)}function R5e(e,t){if(zx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(zx(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $5e=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(s,i){return s.filter(function(a){return i.includes(a)})})},F5e=function(t){return t},z5e=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},yp=function(t,n){return Object.keys(n).reduce(function(s,i){return XR(XR({},s),{},AG({},i,t(i,n[i])))},{})},QR=function(t,n,s){return t.map(function(i){return"".concat(z5e(i)," ").concat(n,"ms ").concat(s)}).join(",")};function B5e(e,t){return W5e(e)||U5e(e,t)||EG(e,t)||V5e()}function V5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U5e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function W5e(e){if(Array.isArray(e))return e}function H5e(e){return G5e(e)||K5e(e)||EG(e)||q5e()}function q5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EG(e,t){if(e){if(typeof e=="string")return OP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OP(e,t)}}function K5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function G5e(e){if(Array.isArray(e))return OP(e)}function OP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var Pj=1e-4,OG=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},MG=function(t,n){return t.map(function(s,i){return s*Math.pow(n,i)}).reduce(function(s,i){return s+i})},JR=function(t,n){return function(s){var i=OG(t,n);return MG(i,s)}},Z5e=function(t,n){return function(s){var i=OG(t,n),a=[].concat(H5e(i.map(function(o,l){return o*l}).slice(1)),[0]);return MG(a,s)}},e5=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,l=1;break;case"ease":i=.25,a=.1,o=.25,l=1;break;case"ease-in":i=.42,a=0,o=1,l=1;break;case"ease-out":i=.42,a=0,o=.58,l=1;break;case"ease-in-out":i=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),h=B5e(d,4);i=h[0],a=h[1],o=h[2],l=h[3]}}}var m=JR(i,o),f=JR(a,l),v=Z5e(i,o),p=function(w){return w>1?1:w<0?0:w},x=function(w){for(var j=w>1?1:w,N=j,C=0;C<8;++C){var P=m(N)-j,k=v(N);if(Math.abs(P-j)<Pj||k<Pj)return f(N);N=p(N-P/k)}return f(N)};return x.isStepper=!1,x},Y5e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,s=n===void 0?100:n,i=t.damping,a=i===void 0?8:i,o=t.dt,l=o===void 0?17:o,c=function(h,m,f){var v=-(h-m)*s,p=f*a,x=f+(v-p)*l/1e3,y=f*l/1e3+h;return Math.abs(y-m)<Pj&&Math.abs(x)<Pj?[m,0]:[y,x]};return c.isStepper=!0,c.dt=l,c},X5e=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return e5(i);case"spring":return Y5e();default:if(i.split("(")[0]==="cubic-bezier")return e5(i)}return typeof i=="function"?i:null};function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}function t5(e){return e$e(e)||J5e(e)||DG(e)||Q5e()}function Q5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function e$e(e){if(Array.isArray(e))return DP(e)}function r5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r5(Object(n),!0).forEach(function(s){MP(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function MP(e,t,n){return t=t$e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t$e(e){var t=r$e(e,"string");return Bx(t)==="symbol"?t:String(t)}function r$e(e,t){if(Bx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Bx(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n$e(e,t){return a$e(e)||i$e(e,t)||DG(e,t)||s$e()}function s$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DG(e,t){if(e){if(typeof e=="string")return DP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DP(e,t)}}function DP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function i$e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function a$e(e){if(Array.isArray(e))return e}var Cj=function(t,n,s){return t+(n-t)*s},IP=function(t){var n=t.from,s=t.to;return n!==s},o$e=function e(t,n,s){var i=yp(function(a,o){if(IP(o)){var l=t(o.from,o.to,o.velocity),c=n$e(l,2),d=c[0],h=c[1];return Rn(Rn({},o),{},{from:d,velocity:h})}return o},n);return s<1?yp(function(a,o){return IP(o)?Rn(Rn({},o),{},{velocity:Cj(o.velocity,i[a].velocity,s),from:Cj(o.from,i[a].from,s)}):o},n):e(t,i,s-1)};const l$e=function(e,t,n,s,i){var a=$5e(e,t),o=a.reduce(function(y,w){return Rn(Rn({},y),{},MP({},w,[e[w],t[w]]))},{}),l=a.reduce(function(y,w){return Rn(Rn({},y),{},MP({},w,{from:e[w],velocity:0,to:t[w]}))},{}),c=-1,d,h,m=function(){return null},f=function(){return yp(function(w,j){return j.from},l)},v=function(){return!Object.values(l).filter(IP).length},p=function(w){d||(d=w);var j=w-d,N=j/n.dt;l=o$e(n,l,N),i(Rn(Rn(Rn({},e),t),f())),d=w,v()||(c=requestAnimationFrame(m))},x=function(w){h||(h=w);var j=(w-h)/s,N=yp(function(P,k){return Cj.apply(void 0,t5(k).concat([n(j)]))},o);if(i(Rn(Rn(Rn({},e),t),N)),j<1)c=requestAnimationFrame(m);else{var C=yp(function(P,k){return Cj.apply(void 0,t5(k).concat([n(1)]))},o);i(Rn(Rn(Rn({},e),t),C))}};return m=n.isStepper?p:x,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}};function om(e){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},om(e)}var c$e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function d$e(e,t){if(e==null)return{};var n=u$e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function u$e(e,t){if(e==null)return{};var n={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function dS(e){return p$e(e)||f$e(e)||m$e(e)||h$e()}function h$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m$e(e,t){if(e){if(typeof e=="string")return LP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LP(e,t)}}function f$e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function p$e(e){if(Array.isArray(e))return LP(e)}function LP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function n5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n5(Object(n),!0).forEach(function(s){Jf(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Jf(e,t,n){return t=IG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g$e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,IG(s.key),s)}}function v$e(e,t,n){return t&&g$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IG(e){var t=y$e(e,"string");return om(t)==="symbol"?t:String(t)}function y$e(e,t){if(om(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(om(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RP(e,t)}function RP(e,t){return RP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},RP(e,t)}function b$e(e){var t=w$e();return function(){var s=kj(e),i;if(t){var a=kj(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return $P(this,i)}}function $P(e,t){if(t&&(om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FP(e)}function FP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kj(e){return kj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kj(e)}var Ga=function(e){j$e(n,e);var t=b$e(n);function n(s,i){var a;x$e(this,n),a=t.call(this,s,i);var o=a.props,l=o.isActive,c=o.attributeName,d=o.from,h=o.to,m=o.steps,f=o.children,v=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(FP(a)),a.changeStyle=a.changeStyle.bind(FP(a)),!l||v<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:h}),$P(a);if(m&&m.length)a.state={style:m[0].style};else if(d){if(typeof f=="function")return a.state={style:d},$P(a);a.state={style:c?Jf({},c,d):d}}else a.state={style:{}};return a}return v$e(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,d=a.shouldReAnimate,h=a.to,m=a.from,f=this.state.style;if(l){if(!o){var v={style:c?Jf({},c,h):h};this.state&&f&&(c&&f[c]!==h||!c&&f!==h)&&this.setState(v);return}if(!(k5e(i.to,h)&&i.canBegin&&i.isActive)){var p=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=p||d?m:i.to;if(this.state&&f){var y={style:c?Jf({},c,x):x};(c&&f[c]!==x||!c&&f!==x)&&this.setState(y)}this.runAnimation(zi(zi({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,l=i.to,c=i.duration,d=i.easing,h=i.begin,m=i.onAnimationEnd,f=i.onAnimationStart,v=l$e(o,l,X5e(d),c,this.changeStyle),p=function(){a.stopJSAnimation=v()};this.manager.start([f,h,p,c,m])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,l=i.begin,c=i.onAnimationStart,d=o[0],h=d.style,m=d.duration,f=m===void 0?0:m,v=function(x,y,w){if(w===0)return x;var j=y.duration,N=y.easing,C=N===void 0?"ease":N,P=y.style,k=y.properties,_=y.onAnimationEnd,O=w>0?o[w-1]:y,M=k||Object.keys(P);if(typeof C=="function"||C==="spring")return[].concat(dS(x),[a.runJSAnimation.bind(a,{from:O.style,to:P,duration:j,easing:C}),j]);var T=QR(M,j,C),I=zi(zi(zi({},O.style),P),{},{transition:T});return[].concat(dS(x),[I,j,_]).filter(F5e)};return this.manager.start([c].concat(dS(o.reduce(v,[h,Math.max(f,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=I5e());var a=i.begin,o=i.duration,l=i.attributeName,c=i.to,d=i.easing,h=i.onAnimationStart,m=i.onAnimationEnd,f=i.steps,v=i.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof d=="function"||typeof v=="function"||d==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var x=l?Jf({},l,c):c,y=QR(Object.keys(x),o,d);p.start([h,a,zi(zi({},x),{},{transition:y}),o,m])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=d$e(i,c$e),d=b.Children.count(a),h=this.state.style;if(typeof a=="function")return a(h);if(!l||d===0||o<=0)return a;var m=function(v){var p=v.props,x=p.style,y=x===void 0?{}:x,w=p.className,j=b.cloneElement(v,zi(zi({},c),{},{style:zi(zi({},y),h),className:w}));return j};return d===1?m(b.Children.only(a)):te.createElement("div",null,b.Children.map(a,function(f){return m(f)}))}}]),n}(b.PureComponent);Ga.displayName="Animate";Ga.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ga.propTypes={from:sr.oneOfType([sr.object,sr.string]),to:sr.oneOfType([sr.object,sr.string]),attributeName:sr.string,duration:sr.number,begin:sr.number,easing:sr.oneOfType([sr.string,sr.func]),steps:sr.arrayOf(sr.shape({duration:sr.number.isRequired,style:sr.object.isRequired,easing:sr.oneOfType([sr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),sr.func]),properties:sr.arrayOf("string"),onAnimationEnd:sr.func})),children:sr.oneOfType([sr.node,sr.func]),isActive:sr.bool,canBegin:sr.bool,onAnimationEnd:sr.func,shouldReAnimate:sr.bool,onAnimationStart:sr.func,onAnimationReStart:sr.func};function Vx(e){"@babel/helpers - typeof";return Vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vx(e)}function Tj(){return Tj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Tj.apply(this,arguments)}function N$e(e,t){return C$e(e)||P$e(e,t)||_$e(e,t)||S$e()}function S$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _$e(e,t){if(e){if(typeof e=="string")return s5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s5(e,t)}}function s5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function P$e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function C$e(e){if(Array.isArray(e))return e}function i5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function a5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i5(Object(n),!0).forEach(function(s){k$e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function k$e(e,t,n){return t=T$e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T$e(e){var t=A$e(e,"string");return Vx(t)=="symbol"?t:t+""}function A$e(e,t){if(Vx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Vx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o5=function(t,n,s,i,a){var o=Math.min(Math.abs(s)/2,Math.abs(i)/2),l=i>=0?1:-1,c=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,h;if(o>0&&a instanceof Array){for(var m=[0,0,0,0],f=0,v=4;f<v;f++)m[f]=a[f]>o?o:a[f];h="M".concat(t,",").concat(n+l*m[0]),m[0]>0&&(h+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(t+c*m[0],",").concat(n)),h+="L ".concat(t+s-c*m[1],",").concat(n),m[1]>0&&(h+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(n+l*m[1])),h+="L ".concat(t+s,",").concat(n+i-l*m[2]),m[2]>0&&(h+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(t+s-c*m[2],",").concat(n+i)),h+="L ".concat(t+c*m[3],",").concat(n+i),m[3]>0&&(h+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+i-l*m[3])),h+="Z"}else if(o>0&&a===+a&&a>0){var p=Math.min(o,a);h="M ".concat(t,",").concat(n+l*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(t+c*p,",").concat(n,`
            L `).concat(t+s-c*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(t+s,",").concat(n+l*p,`
            L `).concat(t+s,",").concat(n+i-l*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(t+s-c*p,",").concat(n+i,`
            L `).concat(t+c*p,",").concat(n+i,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(t,",").concat(n+i-l*p," Z")}else h="M ".concat(t,",").concat(n," h ").concat(s," v ").concat(i," h ").concat(-s," Z");return h},E$e=function(t,n){if(!t||!n)return!1;var s=t.x,i=t.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(a,a+l),h=Math.max(a,a+l),m=Math.min(o,o+c),f=Math.max(o,o+c);return s>=d&&s<=h&&i>=m&&i<=f}return!1},O$e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},SE=function(t){var n=a5(a5({},O$e),t),s=b.useRef(),i=b.useState(-1),a=N$e(i,2),o=a[0],l=a[1];b.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var C=s.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,d=n.y,h=n.width,m=n.height,f=n.radius,v=n.className,p=n.animationEasing,x=n.animationDuration,y=n.animationBegin,w=n.isAnimationActive,j=n.isUpdateAnimationActive;if(c!==+c||d!==+d||h!==+h||m!==+m||h===0||m===0)return null;var N=Ht("recharts-rectangle",v);return j?te.createElement(Ga,{canBegin:o>0,from:{width:h,height:m,x:c,y:d},to:{width:h,height:m,x:c,y:d},duration:x,animationEasing:p,isActive:j},function(C){var P=C.width,k=C.height,_=C.x,O=C.y;return te.createElement(Ga,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:x,isActive:w,easing:p},te.createElement("path",Tj({},Mt(n,!0),{className:N,d:o5(_,O,P,k,f),ref:s})))}):te.createElement("path",Tj({},Mt(n,!0),{className:N,d:o5(c,d,h,m,f)}))};function zP(){return zP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zP.apply(this,arguments)}var Dw=function(t){var n=t.cx,s=t.cy,i=t.r,a=t.className,o=Ht("recharts-dot",a);return n===+n&&s===+s&&i===+i?te.createElement("circle",zP({},Mt(t,!1),K0(t),{className:o,cx:n,cy:s,r:i})):null};function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}var M$e=["x","y","top","left","width","height","className"];function BP(){return BP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},BP.apply(this,arguments)}function l5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function D$e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l5(Object(n),!0).forEach(function(s){I$e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function I$e(e,t,n){return t=L$e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L$e(e){var t=R$e(e,"string");return Ux(t)=="symbol"?t:t+""}function R$e(e,t){if(Ux(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ux(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $$e(e,t){if(e==null)return{};var n=F$e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function F$e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var z$e=function(t,n,s,i,a,o){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(s)},B$e=function(t){var n=t.x,s=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,h=t.width,m=h===void 0?0:h,f=t.height,v=f===void 0?0:f,p=t.className,x=$$e(t,M$e),y=D$e({x:s,y:a,top:l,left:d,width:m,height:v},x);return!We(s)||!We(a)||!We(m)||!We(v)||!We(l)||!We(d)?null:te.createElement("path",BP({},Mt(y,!0),{className:Ht("recharts-cross",p),d:z$e(s,a,m,v,l,d)}))},V$e=Zq,U$e=V$e(Object.getPrototypeOf,Object),W$e=U$e,H$e=rl,q$e=W$e,K$e=nl,G$e="[object Object]",Z$e=Function.prototype,Y$e=Object.prototype,LG=Z$e.toString,X$e=Y$e.hasOwnProperty,Q$e=LG.call(Object);function J$e(e){if(!K$e(e)||H$e(e)!=G$e)return!1;var t=q$e(e);if(t===null)return!0;var n=X$e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&LG.call(n)==Q$e}var e6e=J$e;const t6e=ur(e6e);var r6e=rl,n6e=nl,s6e="[object Boolean]";function i6e(e){return e===!0||e===!1||n6e(e)&&r6e(e)==s6e}var a6e=i6e;const o6e=ur(a6e);function Wx(e){"@babel/helpers - typeof";return Wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wx(e)}function Aj(){return Aj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Aj.apply(this,arguments)}function l6e(e,t){return h6e(e)||u6e(e,t)||d6e(e,t)||c6e()}function c6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d6e(e,t){if(e){if(typeof e=="string")return c5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c5(e,t)}}function c5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function u6e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function h6e(e){if(Array.isArray(e))return e}function d5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function u5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d5(Object(n),!0).forEach(function(s){m6e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function m6e(e,t,n){return t=f6e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f6e(e){var t=p6e(e,"string");return Wx(t)=="symbol"?t:t+""}function p6e(e,t){if(Wx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Wx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h5=function(t,n,s,i,a){var o=s-i,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+s,",").concat(n),l+="L ".concat(t+s-o/2,",").concat(n+a),l+="L ".concat(t+s-o/2-i,",").concat(n+a),l+="L ".concat(t,",").concat(n," Z"),l},x6e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},g6e=function(t){var n=u5(u5({},x6e),t),s=b.useRef(),i=b.useState(-1),a=l6e(i,2),o=a[0],l=a[1];b.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var N=s.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,d=n.y,h=n.upperWidth,m=n.lowerWidth,f=n.height,v=n.className,p=n.animationEasing,x=n.animationDuration,y=n.animationBegin,w=n.isUpdateAnimationActive;if(c!==+c||d!==+d||h!==+h||m!==+m||f!==+f||h===0&&m===0||f===0)return null;var j=Ht("recharts-trapezoid",v);return w?te.createElement(Ga,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:h,lowerWidth:m,height:f,x:c,y:d},duration:x,animationEasing:p,isActive:w},function(N){var C=N.upperWidth,P=N.lowerWidth,k=N.height,_=N.x,O=N.y;return te.createElement(Ga,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:x,easing:p},te.createElement("path",Aj({},Mt(n,!0),{className:j,d:h5(_,O,C,P,k),ref:s})))}):te.createElement("g",null,te.createElement("path",Aj({},Mt(n,!0),{className:j,d:h5(c,d,h,m,f)})))},v6e=["option","shapeType","propTransformer","activeClassName","isActive"];function Hx(e){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(e)}function y6e(e,t){if(e==null)return{};var n=j6e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function j6e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function m5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ej(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m5(Object(n),!0).forEach(function(s){b6e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function b6e(e,t,n){return t=w6e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w6e(e){var t=N6e(e,"string");return Hx(t)=="symbol"?t:t+""}function N6e(e,t){if(Hx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Hx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S6e(e,t){return Ej(Ej({},t),e)}function _6e(e,t){return e==="symbols"}function f5(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return te.createElement(SE,n);case"trapezoid":return te.createElement(g6e,n);case"sector":return te.createElement(_G,n);case"symbols":if(_6e(t))return te.createElement(UA,n);break;default:return null}}function P6e(e){return b.isValidElement(e)?e.props:e}function C6e(e){var t=e.option,n=e.shapeType,s=e.propTransformer,i=s===void 0?S6e:s,a=e.activeClassName,o=a===void 0?"recharts-active-shape":a,l=e.isActive,c=y6e(e,v6e),d;if(b.isValidElement(t))d=b.cloneElement(t,Ej(Ej({},c),P6e(t)));else if(At(t))d=t(c);else if(t6e(t)&&!o6e(t)){var h=i(t,c);d=te.createElement(f5,{shapeType:n,elementProps:h})}else{var m=c;d=te.createElement(f5,{shapeType:n,elementProps:m})}return l?te.createElement(Sr,{className:o},d):d}function Iw(e,t){return t!=null&&"trapezoids"in e.props}function Lw(e,t){return t!=null&&"sectors"in e.props}function qx(e,t){return t!=null&&"points"in e.props}function k6e(e,t){var n,s,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return i&&a}function T6e(e,t){var n=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return n&&s}function A6e(e,t){var n=e.x===t.x,s=e.y===t.y,i=e.z===t.z;return n&&s&&i}function E6e(e,t){var n;return Iw(e,t)?n=k6e:Lw(e,t)?n=T6e:qx(e,t)&&(n=A6e),n}function O6e(e,t){var n;return Iw(e,t)?n="trapezoids":Lw(e,t)?n="sectors":qx(e,t)&&(n="points"),n}function M6e(e,t){if(Iw(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Lw(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return qx(e,t)?t.payload:{}}function D6e(e){var t=e.activeTooltipItem,n=e.graphicalItem,s=e.itemData,i=O6e(n,t),a=M6e(n,t),o=s.filter(function(c,d){var h=im(a,c),m=n.props[i].filter(function(p){var x=E6e(n,t);return x(p,t)}),f=n.props[i].indexOf(m[m.length-1]),v=d===f;return h&&v}),l=s.indexOf(o[o.length-1]);return l}var I6e=Math.ceil,L6e=Math.max;function R6e(e,t,n,s){for(var i=-1,a=L6e(I6e((t-e)/(n||1)),0),o=Array(a);a--;)o[s?a:++i]=e,e+=n;return o}var $6e=R6e,F6e=fK,p5=1/0,z6e=17976931348623157e292;function B6e(e){if(!e)return e===0?e:0;if(e=F6e(e),e===p5||e===-p5){var t=e<0?-1:1;return t*z6e}return e===e?e:0}var RG=B6e,V6e=$6e,U6e=Sw,uS=RG;function W6e(e){return function(t,n,s){return s&&typeof s!="number"&&U6e(t,n,s)&&(n=s=void 0),t=uS(t),n===void 0?(n=t,t=0):n=uS(n),s=s===void 0?t<n?1:-1:uS(s),V6e(t,n,s,e)}}var H6e=W6e,q6e=H6e,K6e=q6e(),G6e=K6e;const Oj=ur(G6e);function Kx(e){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kx(e)}function x5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function g5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x5(Object(n),!0).forEach(function(s){$G(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function $G(e,t,n){return t=Z6e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z6e(e){var t=Y6e(e,"string");return Kx(t)=="symbol"?t:t+""}function Y6e(e,t){if(Kx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Kx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X6e=["Webkit","Moz","O","ms"],Q6e=function(t,n){var s=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=X6e.reduce(function(a,o){return g5(g5({},a),{},$G({},o+s,n))},{});return i[t]=n,i};function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}function Mj(){return Mj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mj.apply(this,arguments)}function v5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function hS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v5(Object(n),!0).forEach(function(s){Rs(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function J6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,zG(s.key),s)}}function eFe(e,t,n){return t&&y5(e.prototype,t),n&&y5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tFe(e,t,n){return t=Dj(t),rFe(e,FG()?Reflect.construct(t,n||[],Dj(e).constructor):t.apply(e,n))}function rFe(e,t){if(t&&(lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nFe(e)}function nFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FG=function(){return!!e})()}function Dj(e){return Dj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dj(e)}function sFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VP(e,t)}function VP(e,t){return VP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},VP(e,t)}function Rs(e,t,n){return t=zG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zG(e){var t=iFe(e,"string");return lm(t)=="symbol"?t:t+""}function iFe(e,t){if(lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(lm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aFe=function(t){var n=t.data,s=t.startIndex,i=t.endIndex,a=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=gp().domain(Oj(0,c)).range([a,a+o-l]),h=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(i),scale:d,scaleValues:h}},j5=function(t){return t.changedTouches&&!!t.changedTouches.length},cm=function(e){function t(n){var s;return J6e(this,t),s=tFe(this,t,[n]),Rs(s,"handleDrag",function(i){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(i):s.state.isSlideMoving&&s.handleSlideDrag(i)}),Rs(s,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&s.handleDrag(i.changedTouches[0])}),Rs(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=s.props,a=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:a,startIndex:l})}),s.detachDragEndListener()}),Rs(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Rs(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Rs(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Rs(s,"handleSlideDragStart",function(i){var a=j5(i)?i.changedTouches[0]:i;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return sFe(t,e),eFe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var i=s.startX,a=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,h=d.length-1,m=Math.min(i,a),f=Math.max(i,a),v=t.getIndexInRange(o,m),p=t.getIndexInRange(o,f);return{startIndex:v-v%c,endIndex:p===h?h:p-p%c}}},{key:"getTextOfTick",value:function(s){var i=this.props,a=i.data,o=i.tickFormatter,l=i.dataKey,c=gs(a[s],l,s);return At(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var i=this.state,a=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,d=c.x,h=c.width,m=c.travellerWidth,f=c.startIndex,v=c.endIndex,p=c.onChange,x=s.pageX-a;x>0?x=Math.min(x,d+h-m-l,d+h-m-o):x<0&&(x=Math.max(x,d-o,d-l));var y=this.getIndex({startX:o+x,endX:l+x});(y.startIndex!==f||y.endIndex!==v)&&p&&p(y),this.setState({startX:o+x,endX:l+x,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,i){var a=j5(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[o],h=this.props,m=h.x,f=h.width,v=h.travellerWidth,p=h.onChange,x=h.gap,y=h.data,w={startX:this.state.startX,endX:this.state.endX},j=s.pageX-a;j>0?j=Math.min(j,m+f-v-d):j<0&&(j=Math.max(j,m-d)),w[o]=d+j;var N=this.getIndex(w),C=N.startIndex,P=N.endIndex,k=function(){var O=y.length-1;return o==="startX"&&(l>c?C%x===0:P%x===0)||l<c&&P===O||o==="endX"&&(l>c?P%x===0:C%x===0)||l>c&&P===O};this.setState(Rs(Rs({},o,d+j),"brushMoveStartX",s.pageX),function(){p&&k()&&p(N)})}},{key:"handleTravellerMoveKeyboard",value:function(s,i){var a=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,h=this.state[i],m=l.indexOf(h);if(m!==-1){var f=m+s;if(!(f===-1||f>=l.length)){var v=l[f];i==="startX"&&v>=d||i==="endX"&&v<=c||this.setState(Rs({},i,v),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return te.createElement("rect",{stroke:d,fill:c,x:i,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.data,d=s.children,h=s.padding,m=b.Children.only(d);return m?te.cloneElement(m,{x:i,y:a,width:o,height:l,margin:h,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,i){var a,o,l=this,c=this.props,d=c.y,h=c.travellerWidth,m=c.height,f=c.traveller,v=c.ariaLabel,p=c.data,x=c.startIndex,y=c.endIndex,w=Math.max(s,this.props.x),j=hS(hS({},Mt(this.props,!1)),{},{x:w,y:d,width:h,height:m}),N=v||"Min value: ".concat((a=p[x])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=p[y])===null||o===void 0?void 0:o.name);return te.createElement(Sr,{tabIndex:0,role:"slider","aria-label":N,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(P){["ArrowLeft","ArrowRight"].includes(P.key)&&(P.preventDefault(),P.stopPropagation(),l.handleTravellerMoveKeyboard(P.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,j))}},{key:"renderSlide",value:function(s,i){var a=this.props,o=a.y,l=a.height,c=a.stroke,d=a.travellerWidth,h=Math.min(s,i)+d,m=Math.max(Math.abs(i-s)-d,0);return te.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:h,y:o,width:m,height:l})}},{key:"renderText",value:function(){var s=this.props,i=s.startIndex,a=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,h=this.state,m=h.startX,f=h.endX,v=5,p={pointerEvents:"none",fill:d};return te.createElement(Sr,{className:"recharts-brush-texts"},te.createElement(lj,Mj({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,f)-v,y:o+l/2},p),this.getTextOfTick(i)),te.createElement(lj,Mj({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,f)+c+v,y:o+l/2},p),this.getTextOfTick(a)))}},{key:"render",value:function(){var s=this.props,i=s.data,a=s.className,o=s.children,l=s.x,c=s.y,d=s.width,h=s.height,m=s.alwaysShowText,f=this.state,v=f.startX,p=f.endX,x=f.isTextActive,y=f.isSlideMoving,w=f.isTravellerMoving,j=f.isTravellerFocused;if(!i||!i.length||!We(l)||!We(c)||!We(d)||!We(h)||d<=0||h<=0)return null;var N=Ht("recharts-brush",a),C=te.Children.count(o)===1,P=Q6e("userSelect","none");return te.createElement(Sr,{className:N,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:P},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(v,p),this.renderTravellerLayer(v,"startX"),this.renderTravellerLayer(p,"endX"),(x||y||w||j||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var i=s.x,a=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(a+l/2)-1;return te.createElement(te.Fragment,null,te.createElement("rect",{x:i,y:a,width:o,height:l,fill:c,stroke:"none"}),te.createElement("line",{x1:i+1,y1:d,x2:i+o-1,y2:d,fill:"none",stroke:"#fff"}),te.createElement("line",{x1:i+1,y1:d+2,x2:i+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,i){var a;return te.isValidElement(s)?a=te.cloneElement(s,i):At(s)?a=s(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(s,i){var a=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,h=s.startIndex,m=s.endIndex;if(a!==i.prevData||d!==i.prevUpdateId)return hS({prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},a&&a.length?aFe({data:a,width:o,x:l,travellerWidth:c,startIndex:h,endIndex:m}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var f=i.scale.domain().map(function(v){return i.scale(v)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:i.scale(s.startIndex),endX:i.scale(s.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(s,i){for(var a=s.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>i?l=c:o=c}return i>=s[l]?l:o}}])}(b.PureComponent);Rs(cm,"displayName","Brush");Rs(cm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var oFe=YA;function lFe(e,t){var n;return oFe(e,function(s,i,a){return n=t(s,i,a),!n}),!!n}var cFe=lFe,dFe=Bq,uFe=Cc,hFe=cFe,mFe=Is,fFe=Sw;function pFe(e,t,n){var s=mFe(e)?dFe:hFe;return n&&fFe(e,t,n)&&(t=void 0),s(e,uFe(t))}var xFe=pFe;const gFe=ur(xFe);var Ua=function(t,n){var s=t.alwaysShow,i=t.ifOverflow;return s&&(i="extendDomain"),i===n},b5=cK;function vFe(e,t,n){t=="__proto__"&&b5?b5(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var yFe=vFe,jFe=yFe,bFe=oK,wFe=Cc;function NFe(e,t){var n={};return t=wFe(t),bFe(e,function(s,i,a){jFe(n,i,t(s,i,a))}),n}var SFe=NFe;const _Fe=ur(SFe);function PFe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!t(e[n],n,e))return!1;return!0}var CFe=PFe,kFe=YA;function TFe(e,t){var n=!0;return kFe(e,function(s,i,a){return n=!!t(s,i,a),n}),n}var AFe=TFe,EFe=CFe,OFe=AFe,MFe=Cc,DFe=Is,IFe=Sw;function LFe(e,t,n){var s=DFe(e)?EFe:OFe;return n&&IFe(e,t,n)&&(t=void 0),s(e,MFe(t))}var RFe=LFe;const BG=ur(RFe);var $Fe=["x","y"];function Gx(e){"@babel/helpers - typeof";return Gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gx(e)}function UP(){return UP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},UP.apply(this,arguments)}function w5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function $f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w5(Object(n),!0).forEach(function(s){FFe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function FFe(e,t,n){return t=zFe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zFe(e){var t=BFe(e,"string");return Gx(t)=="symbol"?t:t+""}function BFe(e,t){if(Gx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Gx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VFe(e,t){if(e==null)return{};var n=UFe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function UFe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function WFe(e,t){var n=e.x,s=e.y,i=VFe(e,$Fe),a="".concat(n),o=parseInt(a,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||i.height),h=parseInt(d,10),m="".concat(t.width||i.width),f=parseInt(m,10);return $f($f($f($f($f({},t),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:h,width:f,name:t.name,radius:t.radius})}function N5(e){return te.createElement(C6e,UP({shapeType:"rectangle",propTransformer:WFe,activeClassName:"recharts-active-bar"},e))}var HFe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,i){if(typeof t=="number")return t;var a=typeof s=="number";return a?t(s,i):(a||Gd(),n)}},qFe=["value","background"],VG;function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function KFe(e,t){if(e==null)return{};var n=GFe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function GFe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Ij(){return Ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ij.apply(this,arguments)}function S5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S5(Object(n),!0).forEach(function(s){Ll(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ZFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,WG(s.key),s)}}function YFe(e,t,n){return t&&_5(e.prototype,t),n&&_5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function XFe(e,t,n){return t=Lj(t),QFe(e,UG()?Reflect.construct(t,n||[],Lj(e).constructor):t.apply(e,n))}function QFe(e,t){if(t&&(dm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JFe(e)}function JFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UG=function(){return!!e})()}function Lj(e){return Lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lj(e)}function eze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WP(e,t)}function WP(e,t){return WP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},WP(e,t)}function Ll(e,t,n){return t=WG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WG(e){var t=tze(e,"string");return dm(t)=="symbol"?t:t+""}function tze(e,t){if(dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(dm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fg=function(e){function t(){var n;ZFe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=XFe(this,t,[].concat(i)),Ll(n,"state",{isAnimationFinished:!1}),Ll(n,"id",qm("recharts-bar-")),Ll(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Ll(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return eze(t,e),YFe(t,[{key:"renderRectanglesStatically",value:function(s){var i=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,d=a.activeBar,h=Mt(this.props,!1);return s&&s.map(function(m,f){var v=f===c,p=v?d:o,x=dn(dn(dn({},h),m),{},{isActive:v,option:p,index:f,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return te.createElement(Sr,Ij({className:"recharts-bar-rectangle"},G0(i.props,m,f),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(f)}),te.createElement(N5,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,i=this.props,a=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,h=i.animationEasing,m=i.animationId,f=this.state.prevData;return te.createElement(Ga,{begin:c,duration:d,isActive:l,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var p=v.t,x=a.map(function(y,w){var j=f&&f[w];if(j){var N=zn(j.x,y.x),C=zn(j.y,y.y),P=zn(j.width,y.width),k=zn(j.height,y.height);return dn(dn({},y),{},{x:N(p),y:C(p),width:P(p),height:k(p)})}if(o==="horizontal"){var _=zn(0,y.height),O=_(p);return dn(dn({},y),{},{y:y.y+y.height-O,height:O})}var M=zn(0,y.width),T=M(p);return dn(dn({},y),{},{width:T})});return te.createElement(Sr,null,s.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var s=this.props,i=s.data,a=s.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!im(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var s=this,i=this.props,a=i.data,o=i.dataKey,l=i.activeIndex,c=Mt(this.props.background,!1);return a.map(function(d,h){d.value;var m=d.background,f=KFe(d,qFe);if(!m)return null;var v=dn(dn(dn(dn(dn({},f),{},{fill:"#eee"},m),c),G0(s.props,d,h)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:h,className:"recharts-bar-background-rectangle"});return te.createElement(N5,Ij({key:"background-bar-".concat(h),option:s.props.background,isActive:h===l},v))})}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,d=a.layout,h=a.children,m=Ti(h,$g);if(!m)return null;var f=d==="vertical"?o[0].height/2:o[0].width/2,v=function(y,w){var j=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:j,errorVal:gs(y,w)}},p={clipPath:s?"url(#clipPath-".concat(i,")"):null};return te.createElement(Sr,p,m.map(function(x){return te.cloneElement(x,{key:"error-bar-".concat(i,"-").concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:f,dataPointFormatter:v})}))}},{key:"render",value:function(){var s=this.props,i=s.hide,a=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,h=s.top,m=s.width,f=s.height,v=s.isAnimationActive,p=s.background,x=s.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,w=Ht("recharts-bar",o),j=l&&l.allowDataOverflow,N=c&&c.allowDataOverflow,C=j||N,P=$t(x)?this.id:x;return te.createElement(Sr,{className:w},j||N?te.createElement("defs",null,te.createElement("clipPath",{id:"clipPath-".concat(P)},te.createElement("rect",{x:j?d:d-m/2,y:N?h:h-f/2,width:j?m:m*2,height:N?f:f*2}))):null,te.createElement(Sr,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(P,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,P),(!v||y)&&Lo.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:i.curData}:s.data!==i.curData?{curData:s.data}:null}}])}(b.PureComponent);VG=Fg;Ll(Fg,"displayName","Bar");Ll(Fg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ba.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ll(Fg,"getComposedData",function(e){var t=e.props,n=e.item,s=e.barPosition,i=e.bandSize,a=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,h=e.dataStartIndex,m=e.displayedData,f=e.offset,v=E3e(s,n);if(!v)return null;var p=t.layout,x=n.type.defaultProps,y=x!==void 0?dn(dn({},x),n.props):n.props,w=y.dataKey,j=y.children,N=y.minPointSize,C=p==="horizontal"?o:a,P=d?C.scale.domain():null,k=F3e({numericAxis:C}),_=Ti(j,xK),O=m.map(function(M,T){var I,A,V,D,W,U;d?I=O3e(d[h+T],P):(I=gs(M,w),Array.isArray(I)||(I=[k,I]));var Q=HFe(N,VG.defaultProps.minPointSize)(I[1],T);if(p==="horizontal"){var q,B=[o.scale(I[0]),o.scale(I[1])],z=B[0],H=B[1];A=SR({axis:a,ticks:l,bandSize:i,offset:v.offset,entry:M,index:T}),V=(q=H??z)!==null&&q!==void 0?q:void 0,D=v.size;var X=z-H;if(W=Number.isNaN(X)?0:X,U={x:A,y:o.y,width:D,height:o.height},Math.abs(Q)>0&&Math.abs(W)<Math.abs(Q)){var ge=ra(W||Q)*(Math.abs(Q)-Math.abs(W));V-=ge,W+=ge}}else{var Se=[a.scale(I[0]),a.scale(I[1])],F=Se[0],pe=Se[1];if(A=F,V=SR({axis:o,ticks:c,bandSize:i,offset:v.offset,entry:M,index:T}),D=pe-F,W=v.size,U={x:a.x,y:V,width:a.width,height:W},Math.abs(Q)>0&&Math.abs(D)<Math.abs(Q)){var we=ra(D||Q)*(Math.abs(Q)-Math.abs(D));D+=we}}return dn(dn(dn({},M),{},{x:A,y:V,width:D,height:W,value:d?I:I[1],payload:M,background:U},_&&_[T]&&_[T].props),{},{tooltipPayload:[wG(n,M)],tooltipPosition:{x:A+D/2,y:V+W/2}})});return dn({data:O,layout:p},f)});function Zx(e){"@babel/helpers - typeof";return Zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zx(e)}function rze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,HG(s.key),s)}}function nze(e,t,n){return t&&P5(e.prototype,t),n&&P5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function C5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ki(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C5(Object(n),!0).forEach(function(s){Rw(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Rw(e,t,n){return t=HG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HG(e){var t=sze(e,"string");return Zx(t)=="symbol"?t:t+""}function sze(e,t){if(Zx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Zx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qG=function(t,n,s,i,a){var o=t.width,l=t.height,c=t.layout,d=t.children,h=Object.keys(n),m={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},f=!!zs(d,Fg);return h.reduce(function(v,p){var x=n[p],y=x.orientation,w=x.domain,j=x.padding,N=j===void 0?{}:j,C=x.mirror,P=x.reversed,k="".concat(y).concat(C?"Mirror":""),_,O,M,T,I;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var A=w[1]-w[0],V=1/0,D=x.categoricalDomain.sort();if(D.forEach(function(Se,F){F>0&&(V=Math.min((Se||0)-(D[F-1]||0),V))}),Number.isFinite(V)){var W=V/A,U=x.layout==="vertical"?s.height:s.width;if(x.padding==="gap"&&(_=W*U/2),x.padding==="no-gap"){var Q=qd(t.barCategoryGap,W*U),q=W*U/2;_=q-Q-(q-Q)/U*Q}}}i==="xAxis"?O=[s.left+(N.left||0)+(_||0),s.left+s.width-(N.right||0)-(_||0)]:i==="yAxis"?O=c==="horizontal"?[s.top+s.height-(N.bottom||0),s.top+(N.top||0)]:[s.top+(N.top||0)+(_||0),s.top+s.height-(N.bottom||0)-(_||0)]:O=x.range,P&&(O=[O[1],O[0]]);var B=T3e(x,a,f),z=B.scale,H=B.realScaleType;z.domain(w).range(O),A3e(z);var X=$3e(z,Ki(Ki({},x),{},{realScaleType:H}));i==="xAxis"?(I=y==="top"&&!C||y==="bottom"&&C,M=s.left,T=m[k]-I*x.height):i==="yAxis"&&(I=y==="left"&&!C||y==="right"&&C,M=m[k]-I*x.width,T=s.top);var ge=Ki(Ki(Ki({},x),X),{},{realScaleType:H,x:M,y:T,scale:z,width:i==="xAxis"?s.width:x.width,height:i==="yAxis"?s.height:x.height});return ge.bandSize=Nj(ge,X),!x.hide&&i==="xAxis"?m[k]+=(I?-1:1)*ge.height:x.hide||(m[k]+=(I?-1:1)*ge.width),Ki(Ki({},v),{},Rw({},p,ge))},{})},KG=function(t,n){var s=t.x,i=t.y,a=n.x,o=n.y;return{x:Math.min(s,a),y:Math.min(i,o),width:Math.abs(a-s),height:Math.abs(o-i)}},ize=function(t){var n=t.x1,s=t.y1,i=t.x2,a=t.y2;return KG({x:n,y:s},{x:i,y:a})},GG=function(){function e(t){rze(this,e),this.scale=t}return nze(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.bandAware,a=s.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var s=this.range(),i=s[0],a=s[s.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();Rw(GG,"EPS",1e-4);var _E=function(t){var n=Object.keys(t).reduce(function(s,i){return Ki(Ki({},s),{},Rw({},i,GG.create(t[i])))},{});return Ki(Ki({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return _Fe(i,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return BG(i,function(a,o){return n[o].isInRange(a)})}})};function aze(e){return(e%180+180)%180}var oze=function(t){var n=t.width,s=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=aze(i),o=a*Math.PI/180,l=Math.atan(s/n),c=o>l&&o<Math.PI-l?s/Math.sin(o):n/Math.cos(o);return Math.abs(c)},lze=Cc,cze=Mg,dze=ww;function uze(e){return function(t,n,s){var i=Object(t);if(!cze(t)){var a=lze(n);t=dze(t),n=function(l){return a(i[l],l,i)}}var o=e(t,n,s);return o>-1?i[a?t[o]:o]:void 0}}var hze=uze,mze=RG;function fze(e){var t=mze(e),n=t%1;return t===t?n?t-n:t:0}var pze=fze,xze=tK,gze=Cc,vze=pze,yze=Math.max;function jze(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var i=n==null?0:vze(n);return i<0&&(i=yze(s+i,0)),xze(e,gze(t),i)}var bze=jze,wze=hze,Nze=bze,Sze=wze(Nze),_ze=Sze;const Pze=ur(_ze);var Cze=p1e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),PE=b.createContext(void 0),CE=b.createContext(void 0),ZG=b.createContext(void 0),YG=b.createContext({}),XG=b.createContext(void 0),QG=b.createContext(0),JG=b.createContext(0),k5=function(t){var n=t.state,s=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,h=Cze(a);return te.createElement(PE.Provider,{value:s},te.createElement(CE.Provider,{value:i},te.createElement(YG.Provider,{value:a},te.createElement(ZG.Provider,{value:h},te.createElement(XG.Provider,{value:o},te.createElement(QG.Provider,{value:d},te.createElement(JG.Provider,{value:c},l)))))))},kze=function(){return b.useContext(XG)},eZ=function(t){var n=b.useContext(PE);n==null&&Gd();var s=n[t];return s==null&&Gd(),s},Tze=function(){var t=b.useContext(PE);return bl(t)},Aze=function(){var t=b.useContext(CE),n=Pze(t,function(s){return BG(s.domain,Number.isFinite)});return n||bl(t)},tZ=function(t){var n=b.useContext(CE);n==null&&Gd();var s=n[t];return s==null&&Gd(),s},Eze=function(){var t=b.useContext(ZG);return t},Oze=function(){return b.useContext(YG)},kE=function(){return b.useContext(JG)},TE=function(){return b.useContext(QG)};function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function Mze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dze(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,nZ(s.key),s)}}function Ize(e,t,n){return t&&Dze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lze(e,t,n){return t=Rj(t),Rze(e,rZ()?Reflect.construct(t,n||[],Rj(e).constructor):t.apply(e,n))}function Rze(e,t){if(t&&(um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ze(e)}function $ze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rZ=function(){return!!e})()}function Rj(e){return Rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rj(e)}function Fze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HP(e,t)}function HP(e,t){return HP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},HP(e,t)}function T5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function A5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T5(Object(n),!0).forEach(function(s){AE(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function AE(e,t,n){return t=nZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nZ(e){var t=zze(e,"string");return um(t)=="symbol"?t:t+""}function zze(e,t){if(um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(um(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bze(e,t){return Hze(e)||Wze(e,t)||Uze(e,t)||Vze()}function Vze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uze(e,t){if(e){if(typeof e=="string")return E5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E5(e,t)}}function E5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Wze(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Hze(e){if(Array.isArray(e))return e}function qP(){return qP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qP.apply(this,arguments)}var qze=function(t,n){var s;return te.isValidElement(t)?s=te.cloneElement(t,n):At(t)?s=t(n):s=te.createElement("line",qP({},n,{className:"recharts-reference-line-line"})),s},Kze=function(t,n,s,i,a,o,l,c,d){var h=a.x,m=a.y,f=a.width,v=a.height;if(s){var p=d.y,x=t.y.apply(p,{position:o});if(Ua(d,"discard")&&!t.y.isInRange(x))return null;var y=[{x:h+f,y:x},{x:h,y:x}];return c==="left"?y.reverse():y}if(n){var w=d.x,j=t.x.apply(w,{position:o});if(Ua(d,"discard")&&!t.x.isInRange(j))return null;var N=[{x:j,y:m+v},{x:j,y:m}];return l==="top"?N.reverse():N}if(i){var C=d.segment,P=C.map(function(k){return t.apply(k,{position:o})});return Ua(d,"discard")&&gFe(P,function(k){return!t.isInRange(k)})?null:P}return null};function Gze(e){var t=e.x,n=e.y,s=e.segment,i=e.xAxisId,a=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=kze(),h=eZ(i),m=tZ(a),f=Eze();if(!d||!f)return null;Do(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=_E({x:h.scale,y:m.scale}),p=Pn(t),x=Pn(n),y=s&&s.length===2,w=Kze(v,p,x,y,f,e.position,h.orientation,m.orientation,e);if(!w)return null;var j=Bze(w,2),N=j[0],C=N.x,P=N.y,k=j[1],_=k.x,O=k.y,M=Ua(e,"hidden")?"url(#".concat(d,")"):void 0,T=A5(A5({clipPath:M},Mt(e,!0)),{},{x1:C,y1:P,x2:_,y2:O});return te.createElement(Sr,{className:Ht("recharts-reference-line",l)},qze(o,T),Yn.renderCallByParent(e,ize({x1:C,y1:P,x2:_,y2:O})))}var EE=function(e){function t(){return Mze(this,t),Lze(this,t,arguments)}return Fze(t,e),Ize(t,[{key:"render",value:function(){return te.createElement(Gze,this.props)}}])}(te.Component);AE(EE,"displayName","ReferenceLine");AE(EE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function KP(){return KP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},KP.apply(this,arguments)}function hm(e){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hm(e)}function O5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function M5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O5(Object(n),!0).forEach(function(s){$w(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Zze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yze(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,iZ(s.key),s)}}function Xze(e,t,n){return t&&Yze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qze(e,t,n){return t=$j(t),Jze(e,sZ()?Reflect.construct(t,n||[],$j(e).constructor):t.apply(e,n))}function Jze(e,t){if(t&&(hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e8e(e)}function e8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sZ=function(){return!!e})()}function $j(e){return $j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$j(e)}function t8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GP(e,t)}function GP(e,t){return GP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},GP(e,t)}function $w(e,t,n){return t=iZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iZ(e){var t=r8e(e,"string");return hm(t)=="symbol"?t:t+""}function r8e(e,t){if(hm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(hm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n8e=function(t){var n=t.x,s=t.y,i=t.xAxis,a=t.yAxis,o=_E({x:i.scale,y:a.scale}),l=o.apply({x:n,y:s},{bandAware:!0});return Ua(t,"discard")&&!o.isInRange(l)?null:l},Fw=function(e){function t(){return Zze(this,t),Qze(this,t,arguments)}return t8e(t,e),Xze(t,[{key:"render",value:function(){var s=this.props,i=s.x,a=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=Pn(i),h=Pn(a);if(Do(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!h)return null;var m=n8e(this.props);if(!m)return null;var f=m.x,v=m.y,p=this.props,x=p.shape,y=p.className,w=Ua(this.props,"hidden")?"url(#".concat(c,")"):void 0,j=M5(M5({clipPath:w},Mt(this.props,!0)),{},{cx:f,cy:v});return te.createElement(Sr,{className:Ht("recharts-reference-dot",y)},t.renderDot(x,j),Yn.renderCallByParent(this.props,{x:f-o,y:v-o,width:2*o,height:2*o}))}}])}(te.Component);$w(Fw,"displayName","ReferenceDot");$w(Fw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});$w(Fw,"renderDot",function(e,t){var n;return te.isValidElement(e)?n=te.cloneElement(e,t):At(e)?n=e(t):n=te.createElement(Dw,KP({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function ZP(){return ZP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ZP.apply(this,arguments)}function mm(e){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mm(e)}function D5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function I5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D5(Object(n),!0).forEach(function(s){zw(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function s8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i8e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,oZ(s.key),s)}}function a8e(e,t,n){return t&&i8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o8e(e,t,n){return t=Fj(t),l8e(e,aZ()?Reflect.construct(t,n||[],Fj(e).constructor):t.apply(e,n))}function l8e(e,t){if(t&&(mm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c8e(e)}function c8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aZ=function(){return!!e})()}function Fj(e){return Fj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fj(e)}function d8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YP(e,t)}function YP(e,t){return YP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},YP(e,t)}function zw(e,t,n){return t=oZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oZ(e){var t=u8e(e,"string");return mm(t)=="symbol"?t:t+""}function u8e(e,t){if(mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(mm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h8e=function(t,n,s,i,a){var o=a.x1,l=a.x2,c=a.y1,d=a.y2,h=a.xAxis,m=a.yAxis;if(!h||!m)return null;var f=_E({x:h.scale,y:m.scale}),v={x:t?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:s?f.y.apply(c,{position:"start"}):f.y.rangeMin},p={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(d,{position:"end"}):f.y.rangeMax};return Ua(a,"discard")&&(!f.isInRange(v)||!f.isInRange(p))?null:KG(v,p)},Bw=function(e){function t(){return s8e(this,t),o8e(this,t,arguments)}return d8e(t,e),a8e(t,[{key:"render",value:function(){var s=this.props,i=s.x1,a=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,h=s.clipPathId;Do(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Pn(i),f=Pn(a),v=Pn(o),p=Pn(l),x=this.props.shape;if(!m&&!f&&!v&&!p&&!x)return null;var y=h8e(m,f,v,p,this.props);if(!y&&!x)return null;var w=Ua(this.props,"hidden")?"url(#".concat(h,")"):void 0;return te.createElement(Sr,{className:Ht("recharts-reference-area",c)},t.renderRect(x,I5(I5({clipPath:w},Mt(this.props,!0)),y)),Yn.renderCallByParent(this.props,y))}}])}(te.Component);zw(Bw,"displayName","ReferenceArea");zw(Bw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});zw(Bw,"renderRect",function(e,t){var n;return te.isValidElement(e)?n=te.cloneElement(e,t):At(e)?n=e(t):n=te.createElement(SE,ZP({},t,{className:"recharts-reference-area-rect"})),n});function lZ(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var s=[],i=0;i<e.length;i+=t)s.push(e[i]);return s}function m8e(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return oze(s,n)}function f8e(e,t,n){var s=n==="width",i=e.x,a=e.y,o=e.width,l=e.height;return t===1?{start:s?i:a,end:s?i+o:a+l}:{start:s?i+o:a+l,end:s?i:a}}function zj(e,t,n,s,i){if(e*t<e*s||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-s)>=0&&e*(t+e*a/2-i)<=0}function p8e(e,t){return lZ(e,t+1)}function x8e(e,t,n,s,i){for(var a=(s||[]).slice(),o=t.start,l=t.end,c=0,d=1,h=o,m=function(){var p=s==null?void 0:s[c];if(p===void 0)return{v:lZ(s,d)};var x=c,y,w=function(){return y===void 0&&(y=n(p,x)),y},j=p.coordinate,N=c===0||zj(e,j,w,h,l);N||(c=0,h=o,d+=1),N&&(h=j+e*(w()/2+i),c+=d)},f;d<=a.length;)if(f=m(),f)return f.v;return[]}function Yx(e){"@babel/helpers - typeof";return Yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yx(e)}function L5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L5(Object(n),!0).forEach(function(s){g8e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function g8e(e,t,n){return t=v8e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v8e(e){var t=y8e(e,"string");return Yx(t)=="symbol"?t:t+""}function y8e(e,t){if(Yx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Yx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j8e(e,t,n,s,i){for(var a=(s||[]).slice(),o=a.length,l=t.start,c=t.end,d=function(f){var v=a[f],p,x=function(){return p===void 0&&(p=n(v,f)),p};if(f===o-1){var y=e*(v.coordinate+e*x()/2-c);a[f]=v=Gn(Gn({},v),{},{tickCoord:y>0?v.coordinate-y*e:v.coordinate})}else a[f]=v=Gn(Gn({},v),{},{tickCoord:v.coordinate});var w=zj(e,v.tickCoord,x,l,c);w&&(c=v.tickCoord-e*(x()/2+i),a[f]=Gn(Gn({},v),{},{isShow:!0}))},h=o-1;h>=0;h--)d(h);return a}function b8e(e,t,n,s,i,a){var o=(s||[]).slice(),l=o.length,c=t.start,d=t.end;if(a){var h=s[l-1],m=n(h,l-1),f=e*(h.coordinate+e*m/2-d);o[l-1]=h=Gn(Gn({},h),{},{tickCoord:f>0?h.coordinate-f*e:h.coordinate});var v=zj(e,h.tickCoord,function(){return m},c,d);v&&(d=h.tickCoord-e*(m/2+i),o[l-1]=Gn(Gn({},h),{},{isShow:!0}))}for(var p=a?l-1:l,x=function(j){var N=o[j],C,P=function(){return C===void 0&&(C=n(N,j)),C};if(j===0){var k=e*(N.coordinate-e*P()/2-c);o[j]=N=Gn(Gn({},N),{},{tickCoord:k<0?N.coordinate-k*e:N.coordinate})}else o[j]=N=Gn(Gn({},N),{},{tickCoord:N.coordinate});var _=zj(e,N.tickCoord,P,c,d);_&&(c=N.tickCoord+e*(P()/2+i),o[j]=Gn(Gn({},N),{},{isShow:!0}))},y=0;y<p;y++)x(y);return o}function OE(e,t,n){var s=e.tick,i=e.ticks,a=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,h=e.unit,m=e.angle;if(!i||!i.length||!s)return[];if(We(c)||Ba.isSsr)return p8e(i,typeof c=="number"&&We(c)?c:0);var f=[],v=l==="top"||l==="bottom"?"width":"height",p=h&&v==="width"?xp(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},x=function(N,C){var P=At(d)?d(N.value,C):N.value;return v==="width"?m8e(xp(P,{fontSize:t,letterSpacing:n}),p,m):xp(P,{fontSize:t,letterSpacing:n})[v]},y=i.length>=2?ra(i[1].coordinate-i[0].coordinate):1,w=f8e(a,y,v);return c==="equidistantPreserveStart"?x8e(y,w,x,i,o):(c==="preserveStart"||c==="preserveStartEnd"?f=b8e(y,w,x,i,o,c==="preserveStartEnd"):f=j8e(y,w,x,i,o),f.filter(function(j){return j.isShow}))}var w8e=["viewBox"],N8e=["viewBox"],S8e=["ticks"];function fm(e){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function Zu(){return Zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zu.apply(this,arguments)}function R5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R5(Object(n),!0).forEach(function(s){ME(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function mS(e,t){if(e==null)return{};var n=_8e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function _8e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function P8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,dZ(s.key),s)}}function C8e(e,t,n){return t&&$5(e.prototype,t),n&&$5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k8e(e,t,n){return t=Bj(t),T8e(e,cZ()?Reflect.construct(t,n||[],Bj(e).constructor):t.apply(e,n))}function T8e(e,t){if(t&&(fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A8e(e)}function A8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cZ=function(){return!!e})()}function Bj(e){return Bj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bj(e)}function E8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XP(e,t)}function XP(e,t){return XP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},XP(e,t)}function ME(e,t,n){return t=dZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dZ(e){var t=O8e(e,"string");return fm(t)=="symbol"?t:t+""}function O8e(e,t){if(fm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(fm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jm=function(e){function t(n){var s;return P8e(this,t),s=k8e(this,t,[n]),s.state={fontSize:"",letterSpacing:""},s}return E8e(t,e),C8e(t,[{key:"shouldComponentUpdate",value:function(s,i){var a=s.viewBox,o=mS(s,w8e),l=this.props,c=l.viewBox,d=mS(l,N8e);return!hh(a,c)||!hh(o,d)||!hh(i,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var i=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var i=this.props,a=i.x,o=i.y,l=i.width,c=i.height,d=i.orientation,h=i.tickSize,m=i.mirror,f=i.tickMargin,v,p,x,y,w,j,N=m?-1:1,C=s.tickSize||h,P=We(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":v=p=s.coordinate,y=o+ +!m*c,x=y-N*C,j=x-N*f,w=P;break;case"left":x=y=s.coordinate,p=a+ +!m*l,v=p-N*C,w=v-N*f,j=P;break;case"right":x=y=s.coordinate,p=a+ +m*l,v=p+N*C,w=v+N*f,j=P;break;default:v=p=s.coordinate,y=o+ +m*c,x=y+N*C,j=x+N*f,w=P;break}return{line:{x1:v,y1:x,x2:p,y2:y},tick:{x:w,y:j}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,h=s.axisLine,m=is(is(is({},Mt(this.props,!1)),Mt(h,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);m=is(is({},m),{},{x1:i,y1:a+f*l,x2:i+o,y2:a+f*l})}else{var v=+(c==="left"&&!d||c==="right"&&d);m=is(is({},m),{},{x1:i+v*o,y1:a,x2:i+v*o,y2:a+l})}return te.createElement("line",Zu({},m,{className:Ht("recharts-cartesian-axis-line",ki(h,"className"))}))}},{key:"renderTicks",value:function(s,i,a){var o=this,l=this.props,c=l.tickLine,d=l.stroke,h=l.tick,m=l.tickFormatter,f=l.unit,v=OE(is(is({},this.props),{},{ticks:s}),i,a),p=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),y=Mt(this.props,!1),w=Mt(h,!1),j=is(is({},y),{},{fill:"none"},Mt(c,!1)),N=v.map(function(C,P){var k=o.getTickLineCoord(C),_=k.line,O=k.tick,M=is(is(is(is({textAnchor:p,verticalAnchor:x},y),{},{stroke:"none",fill:d},w),O),{},{index:P,payload:C,visibleTicksCount:v.length,tickFormatter:m});return te.createElement(Sr,Zu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},G0(o.props,C,P)),c&&te.createElement("line",Zu({},j,_,{className:Ht("recharts-cartesian-axis-tick-line",ki(c,"className"))})),h&&t.renderTickItem(h,M,"".concat(At(m)?m(C.value,P):C.value).concat(f||"")))});return te.createElement("g",{className:"recharts-cartesian-axis-ticks"},N)}},{key:"render",value:function(){var s=this,i=this.props,a=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,d=i.className,h=i.hide;if(h)return null;var m=this.props,f=m.ticks,v=mS(m,S8e),p=f;return At(c)&&(p=f&&f.length>0?c(this.props):c(v)),o<=0||l<=0||!p||!p.length?null:te.createElement(Sr,{className:Ht("recharts-cartesian-axis",d),ref:function(y){s.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),Yn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,i,a){var o;return te.isValidElement(s)?o=te.cloneElement(s,i):At(s)?o=s(i):o=te.createElement(lj,Zu({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(b.Component);ME(Jm,"displayName","CartesianAxis");ME(Jm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var M8e=["x1","y1","x2","y2","key"],D8e=["offset"];function Zd(e){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zd(e)}function F5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F5(Object(n),!0).forEach(function(s){I8e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function I8e(e,t,n){return t=L8e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L8e(e){var t=R8e(e,"string");return Zd(t)=="symbol"?t:t+""}function R8e(e,t){if(Zd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Zd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function id(){return id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},id.apply(this,arguments)}function z5(e,t){if(e==null)return{};var n=$8e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function $8e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var F8e=function(t){var n=t.fill;if(!n||n==="none")return null;var s=t.fillOpacity,i=t.x,a=t.y,o=t.width,l=t.height,c=t.ry;return te.createElement("rect",{x:i,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function uZ(e,t){var n;if(te.isValidElement(e))n=te.cloneElement(e,t);else if(At(e))n=e(t);else{var s=t.x1,i=t.y1,a=t.x2,o=t.y2,l=t.key,c=z5(t,M8e),d=Mt(c,!1);d.offset;var h=z5(d,D8e);n=te.createElement("line",id({},h,{x1:s,y1:i,x2:a,y2:o,fill:"none",key:l}))}return n}function z8e(e){var t=e.x,n=e.width,s=e.horizontal,i=s===void 0?!0:s,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=Xn(Xn({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return uZ(i,d)});return te.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function B8e(e){var t=e.y,n=e.height,s=e.vertical,i=s===void 0?!0:s,a=e.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=Xn(Xn({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return uZ(i,d)});return te.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function V8e(e){var t=e.horizontalFill,n=e.fillOpacity,s=e.x,i=e.y,a=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var h=l.map(function(f){return Math.round(f+i-i)}).sort(function(f,v){return f-v});i!==h[0]&&h.unshift(0);var m=h.map(function(f,v){var p=!h[v+1],x=p?i+o-f:h[v+1]-f;if(x<=0)return null;var y=v%t.length;return te.createElement("rect",{key:"react-".concat(v),y:f,x:s,height:x,width:a,stroke:"none",fill:t[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return te.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function U8e(e){var t=e.vertical,n=t===void 0?!0:t,s=e.verticalFill,i=e.fillOpacity,a=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!n||!s||!s.length)return null;var h=d.map(function(f){return Math.round(f+a-a)}).sort(function(f,v){return f-v});a!==h[0]&&h.unshift(0);var m=h.map(function(f,v){var p=!h[v+1],x=p?a+l-f:h[v+1]-f;if(x<=0)return null;var y=v%s.length;return te.createElement("rect",{key:"react-".concat(v),x:f,y:o,width:x,height:c,stroke:"none",fill:s[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return te.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var W8e=function(t,n){var s=t.xAxis,i=t.width,a=t.height,o=t.offset;return jG(OE(Xn(Xn(Xn({},Jm.defaultProps),s),{},{ticks:_o(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},H8e=function(t,n){var s=t.yAxis,i=t.width,a=t.height,o=t.offset;return jG(OE(Xn(Xn(Xn({},Jm.defaultProps),s),{},{ticks:_o(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},Cu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function QP(e){var t,n,s,i,a,o,l=kE(),c=TE(),d=Oze(),h=Xn(Xn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Cu.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Cu.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:Cu.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:Cu.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Cu.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Cu.verticalFill,x:We(e.x)?e.x:d.left,y:We(e.y)?e.y:d.top,width:We(e.width)?e.width:d.width,height:We(e.height)?e.height:d.height}),m=h.x,f=h.y,v=h.width,p=h.height,x=h.syncWithTicks,y=h.horizontalValues,w=h.verticalValues,j=Tze(),N=Aze();if(!We(v)||v<=0||!We(p)||p<=0||!We(m)||m!==+m||!We(f)||f!==+f)return null;var C=h.verticalCoordinatesGenerator||W8e,P=h.horizontalCoordinatesGenerator||H8e,k=h.horizontalPoints,_=h.verticalPoints;if((!k||!k.length)&&At(P)){var O=y&&y.length,M=P({yAxis:N?Xn(Xn({},N),{},{ticks:O?y:N.ticks}):void 0,width:l,height:c,offset:d},O?!0:x);Do(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Zd(M),"]")),Array.isArray(M)&&(k=M)}if((!_||!_.length)&&At(C)){var T=w&&w.length,I=C({xAxis:j?Xn(Xn({},j),{},{ticks:T?w:j.ticks}):void 0,width:l,height:c,offset:d},T?!0:x);Do(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Zd(I),"]")),Array.isArray(I)&&(_=I)}return te.createElement("g",{className:"recharts-cartesian-grid"},te.createElement(F8e,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),te.createElement(z8e,id({},h,{offset:d,horizontalPoints:k,xAxis:j,yAxis:N})),te.createElement(B8e,id({},h,{offset:d,verticalPoints:_,xAxis:j,yAxis:N})),te.createElement(V8e,id({},h,{horizontalPoints:k})),te.createElement(U8e,id({},h,{verticalPoints:_})))}QP.displayName="CartesianGrid";var q8e=["type","layout","connectNulls","ref"],K8e=["key"];function pm(e){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pm(e)}function B5(e,t){if(e==null)return{};var n=G8e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function G8e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function jp(){return jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jp.apply(this,arguments)}function V5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V5(Object(n),!0).forEach(function(s){Gi(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ku(e){return Q8e(e)||X8e(e)||Y8e(e)||Z8e()}function Z8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y8e(e,t){if(e){if(typeof e=="string")return JP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JP(e,t)}}function X8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Q8e(e){if(Array.isArray(e))return JP(e)}function JP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function J8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,mZ(s.key),s)}}function eBe(e,t,n){return t&&U5(e.prototype,t),n&&U5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tBe(e,t,n){return t=Vj(t),rBe(e,hZ()?Reflect.construct(t,n||[],Vj(e).constructor):t.apply(e,n))}function rBe(e,t){if(t&&(pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nBe(e)}function nBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hZ=function(){return!!e})()}function Vj(e){return Vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vj(e)}function sBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eC(e,t)}function eC(e,t){return eC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},eC(e,t)}function Gi(e,t,n){return t=mZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mZ(e){var t=iBe(e,"string");return pm(t)=="symbol"?t:t+""}function iBe(e,t){if(pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(pm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xm=function(e){function t(){var n;J8e(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=tBe(this,t,[].concat(i)),Gi(n,"state",{isAnimationFinished:!0,totalLength:0}),Gi(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Gi(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(w,j){return w+j});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var h=Math.floor(o/d),m=o%d,f=l-o,v=[],p=0,x=0;p<c.length;x+=c[p],++p)if(x+c[p]>m){v=[].concat(ku(c.slice(0,p)),[m-x]);break}var y=v.length%2===0?[0,f]:[f];return[].concat(ku(t.repeat(c,h)),ku(v),y).map(function(w){return"".concat(w,"px")}).join(", ")}),Gi(n,"id",qm("recharts-line-")),Gi(n,"pathRef",function(o){n.mainCurve=o}),Gi(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Gi(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return sBe(t,e),eBe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,c=a.yAxis,d=a.layout,h=a.children,m=Ti(h,$g);if(!m)return null;var f=function(x,y){return{x:x.x,y:x.y,value:x.value,errorVal:gs(x.payload,y)}},v={clipPath:s?"url(#clipPath-".concat(i,")"):null};return te.createElement(Sr,v,m.map(function(p){return te.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(s,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,h=l.dataKey,m=Mt(this.props,!1),f=Mt(c,!0),v=d.map(function(x,y){var w=Ls(Ls(Ls({key:"dot-".concat(y),r:3},m),f),{},{index:y,cx:x.x,cy:x.y,value:x.value,dataKey:h,payload:x.payload,points:d});return t.renderDotItem(c,w)}),p={clipPath:s?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return te.createElement(Sr,jp({className:"recharts-line-dots",key:"dots"},p),v)}},{key:"renderCurveStatically",value:function(s,i,a,o){var l=this.props,c=l.type,d=l.layout,h=l.connectNulls;l.ref;var m=B5(l,q8e),f=Ls(Ls(Ls({},Mt(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:s},o),{},{type:c,layout:d,connectNulls:h});return te.createElement(ph,jp({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,i){var a=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,h=o.animationBegin,m=o.animationDuration,f=o.animationEasing,v=o.animationId,p=o.animateNewValues,x=o.width,y=o.height,w=this.state,j=w.prevPoints,N=w.totalLength;return te.createElement(Ga,{begin:h,duration:m,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(v),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(C){var P=C.t;if(j){var k=j.length/l.length,_=l.map(function(A,V){var D=Math.floor(V*k);if(j[D]){var W=j[D],U=zn(W.x,A.x),Q=zn(W.y,A.y);return Ls(Ls({},A),{},{x:U(P),y:Q(P)})}if(p){var q=zn(x*2,A.x),B=zn(y/2,A.y);return Ls(Ls({},A),{},{x:q(P),y:B(P)})}return Ls(Ls({},A),{},{x:A.x,y:A.y})});return a.renderCurveStatically(_,s,i)}var O=zn(0,N),M=O(P),T;if(c){var I="".concat(c).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});T=a.getStrokeDasharray(M,N,I)}else T=a.generateSimpleStrokeDasharray(N,M);return a.renderCurveStatically(l,s,i,{strokeDasharray:T})})}},{key:"renderCurve",value:function(s,i){var a=this.props,o=a.points,l=a.isAnimationActive,c=this.state,d=c.prevPoints,h=c.totalLength;return l&&o&&o.length&&(!d&&h>0||!im(d,o))?this.renderCurveWithAnimation(s,i):this.renderCurveStatically(o,s,i)}},{key:"render",value:function(){var s,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,d=i.xAxis,h=i.yAxis,m=i.top,f=i.left,v=i.width,p=i.height,x=i.isAnimationActive,y=i.id;if(a||!l||!l.length)return null;var w=this.state.isAnimationFinished,j=l.length===1,N=Ht("recharts-line",c),C=d&&d.allowDataOverflow,P=h&&h.allowDataOverflow,k=C||P,_=$t(y)?this.id:y,O=(s=Mt(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},M=O.r,T=M===void 0?3:M,I=O.strokeWidth,A=I===void 0?2:I,V=hq(o)?o:{},D=V.clipDot,W=D===void 0?!0:D,U=T*2+A;return te.createElement(Sr,{className:N},C||P?te.createElement("defs",null,te.createElement("clipPath",{id:"clipPath-".concat(_)},te.createElement("rect",{x:C?f:f-v/2,y:P?m:m-p/2,width:C?v:v*2,height:P?p:p*2})),!W&&te.createElement("clipPath",{id:"clipPath-dots-".concat(_)},te.createElement("rect",{x:f-U/2,y:m-U/2,width:v+U,height:p+U}))):null,!j&&this.renderCurve(k,_),this.renderErrorBar(k,_),(j||o)&&this.renderDots(k,W,_),(!x||w)&&Lo.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:i.curPoints}:s.points!==i.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,i){for(var a=s.length%2!==0?[].concat(ku(s),[0]):s,o=[],l=0;l<i;++l)o=[].concat(ku(o),ku(a));return o}},{key:"renderDotItem",value:function(s,i){var a;if(te.isValidElement(s))a=te.cloneElement(s,i);else if(At(s))a=s(i);else{var o=i.key,l=B5(i,K8e),c=Ht("recharts-line-dot",typeof s!="boolean"?s.className:"");a=te.createElement(Dw,jp({key:o},l,{className:c}))}return a}}])}(b.PureComponent);Gi(xm,"displayName","Line");Gi(xm,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ba.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Gi(xm,"getComposedData",function(e){var t=e.props,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,h=t.layout,m=c.map(function(f,v){var p=gs(f,o);return h==="horizontal"?{x:wj({axis:n,ticks:i,bandSize:l,entry:f,index:v}),y:$t(p)?null:s.scale(p),value:p,payload:f}:{x:$t(p)?null:n.scale(p),y:wj({axis:s,ticks:a,bandSize:l,entry:f,index:v}),value:p,payload:f}});return Ls({points:m,layout:h},d)});var aBe=["layout","type","stroke","connectNulls","isRange","ref"],oBe=["key"],fZ;function gm(e){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gm(e)}function pZ(e,t){if(e==null)return{};var n=lBe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function lBe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function ad(){return ad=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ad.apply(this,arguments)}function W5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function fl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W5(Object(n),!0).forEach(function(s){Aa(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,gZ(s.key),s)}}function dBe(e,t,n){return t&&H5(e.prototype,t),n&&H5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uBe(e,t,n){return t=Uj(t),hBe(e,xZ()?Reflect.construct(t,n||[],Uj(e).constructor):t.apply(e,n))}function hBe(e,t){if(t&&(gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mBe(e)}function mBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xZ=function(){return!!e})()}function Uj(e){return Uj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uj(e)}function fBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tC(e,t)}function tC(e,t){return tC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},tC(e,t)}function Aa(e,t,n){return t=gZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gZ(e){var t=pBe(e,"string");return gm(t)=="symbol"?t:t+""}function pBe(e,t){if(gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(gm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qo=function(e){function t(){var n;cBe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=uBe(this,t,[].concat(i)),Aa(n,"state",{isAnimationFinished:!0}),Aa(n,"id",qm("recharts-area-")),Aa(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),At(o)&&o()}),Aa(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),At(o)&&o()}),n}return fBe(t,e),dBe(t,[{key:"renderDots",value:function(s,i,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,h=c.points,m=c.dataKey,f=Mt(this.props,!1),v=Mt(d,!0),p=h.map(function(y,w){var j=fl(fl(fl({key:"dot-".concat(w),r:3},f),v),{},{index:w,cx:y.x,cy:y.y,dataKey:m,value:y.value,payload:y.payload,points:h});return t.renderDotItem(d,j)}),x={clipPath:s?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return te.createElement(Sr,ad({className:"recharts-area-dots"},x),p)}},{key:"renderHorizontalRect",value:function(s){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,d=o[o.length-1].x,h=s*Math.abs(c-d),m=Il(o.map(function(f){return f.y||0}));return We(a)&&typeof a=="number"?m=Math.max(a,m):a&&Array.isArray(a)&&a.length&&(m=Math.max(Il(a.map(function(f){return f.y||0})),m)),We(m)?te.createElement("rect",{x:c<d?c:c-h,y:0,width:h,height:Math.floor(m+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,d=o[o.length-1].y,h=s*Math.abs(c-d),m=Il(o.map(function(f){return f.x||0}));return We(a)&&typeof a=="number"?m=Math.max(a,m):a&&Array.isArray(a)&&a.length&&(m=Math.max(Il(a.map(function(f){return f.x||0})),m)),We(m)?te.createElement("rect",{x:0,y:c<d?c:c-h,width:m+(l?parseInt("".concat(l),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(s){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,i,a,o){var l=this.props,c=l.layout,d=l.type,h=l.stroke,m=l.connectNulls,f=l.isRange;l.ref;var v=pZ(l,aBe);return te.createElement(Sr,{clipPath:a?"url(#clipPath-".concat(o,")"):null},te.createElement(ph,ad({},Mt(v,!0),{points:s,connectNulls:m,type:d,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),h!=="none"&&te.createElement(ph,ad({},Mt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:s})),h!=="none"&&f&&te.createElement(ph,ad({},Mt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(s,i){var a=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,h=o.animationBegin,m=o.animationDuration,f=o.animationEasing,v=o.animationId,p=this.state,x=p.prevPoints,y=p.prevBaseLine;return te.createElement(Ga,{begin:h,duration:m,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(v),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var j=w.t;if(x){var N=x.length/l.length,C=l.map(function(O,M){var T=Math.floor(M*N);if(x[T]){var I=x[T],A=zn(I.x,O.x),V=zn(I.y,O.y);return fl(fl({},O),{},{x:A(j),y:V(j)})}return O}),P;if(We(c)&&typeof c=="number"){var k=zn(y,c);P=k(j)}else if($t(c)||Hm(c)){var _=zn(y,0);P=_(j)}else P=c.map(function(O,M){var T=Math.floor(M*N);if(y[T]){var I=y[T],A=zn(I.x,O.x),V=zn(I.y,O.y);return fl(fl({},O),{},{x:A(j),y:V(j)})}return O});return a.renderAreaStatically(C,P,s,i)}return te.createElement(Sr,null,te.createElement("defs",null,te.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(j))),te.createElement(Sr,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(l,c,s,i)))})}},{key:"renderArea",value:function(s,i){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,d=this.state,h=d.prevPoints,m=d.prevBaseLine,f=d.totalLength;return c&&o&&o.length&&(!h&&f>0||!im(h,o)||!im(m,l))?this.renderAreaWithAnimation(s,i):this.renderAreaStatically(o,l,s,i)}},{key:"render",value:function(){var s,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,d=i.top,h=i.left,m=i.xAxis,f=i.yAxis,v=i.width,p=i.height,x=i.isAnimationActive,y=i.id;if(a||!l||!l.length)return null;var w=this.state.isAnimationFinished,j=l.length===1,N=Ht("recharts-area",c),C=m&&m.allowDataOverflow,P=f&&f.allowDataOverflow,k=C||P,_=$t(y)?this.id:y,O=(s=Mt(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},M=O.r,T=M===void 0?3:M,I=O.strokeWidth,A=I===void 0?2:I,V=hq(o)?o:{},D=V.clipDot,W=D===void 0?!0:D,U=T*2+A;return te.createElement(Sr,{className:N},C||P?te.createElement("defs",null,te.createElement("clipPath",{id:"clipPath-".concat(_)},te.createElement("rect",{x:C?h:h-v/2,y:P?d:d-p/2,width:C?v:v*2,height:P?p:p*2})),!W&&te.createElement("clipPath",{id:"clipPath-dots-".concat(_)},te.createElement("rect",{x:h-U/2,y:d-U/2,width:v+U,height:p+U}))):null,j?null:this.renderArea(k,_),(o||j)&&this.renderDots(k,W,_),(!x||w)&&Lo.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:s.points!==i.curPoints||s.baseLine!==i.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(b.PureComponent);fZ=Qo;Aa(Qo,"displayName","Area");Aa(Qo,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ba.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Aa(Qo,"getBaseValue",function(e,t,n,s){var i=e.layout,a=e.baseValue,o=t.props.baseValue,l=o??a;if(We(l)&&typeof l=="number")return l;var c=i==="horizontal"?s:n,d=c.scale.domain();if(c.type==="number"){var h=Math.max(d[0],d[1]),m=Math.min(d[0],d[1]);return l==="dataMin"?m:l==="dataMax"||h<0?h:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Aa(Qo,"getComposedData",function(e){var t=e.props,n=e.item,s=e.xAxis,i=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,h=e.dataStartIndex,m=e.displayedData,f=e.offset,v=t.layout,p=d&&d.length,x=fZ.getBaseValue(t,n,s,i),y=v==="horizontal",w=!1,j=m.map(function(C,P){var k;p?k=d[h+P]:(k=gs(C,c),Array.isArray(k)?w=!0:k=[x,k]);var _=k[1]==null||p&&gs(C,c)==null;return y?{x:wj({axis:s,ticks:a,bandSize:l,entry:C,index:P}),y:_?null:i.scale(k[1]),value:k,payload:C}:{x:_?null:s.scale(k[1]),y:wj({axis:i,ticks:o,bandSize:l,entry:C,index:P}),value:k,payload:C}}),N;return p||w?N=j.map(function(C){var P=Array.isArray(C.value)?C.value[0]:null;return y?{x:C.x,y:P!=null&&C.y!=null?i.scale(P):null}:{x:P!=null?s.scale(P):null,y:C.y}}):N=y?i.scale(x):s.scale(x),fl({points:j,baseLine:N,layout:v,isRange:w},f)});Aa(Qo,"renderDotItem",function(e,t){var n;if(te.isValidElement(e))n=te.cloneElement(e,t);else if(At(e))n=e(t);else{var s=Ht("recharts-area-dot",typeof e!="boolean"?e.className:""),i=t.key,a=pZ(t,oBe);n=te.createElement(Dw,ad({},a,{key:i,className:s}))}return n});function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}function xBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gBe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,jZ(s.key),s)}}function vBe(e,t,n){return t&&gBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yBe(e,t,n){return t=Wj(t),jBe(e,vZ()?Reflect.construct(t,n||[],Wj(e).constructor):t.apply(e,n))}function jBe(e,t){if(t&&(vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bBe(e)}function bBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vZ=function(){return!!e})()}function Wj(e){return Wj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wj(e)}function wBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rC(e,t)}function rC(e,t){return rC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},rC(e,t)}function yZ(e,t,n){return t=jZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jZ(e){var t=NBe(e,"string");return vm(t)=="symbol"?t:t+""}function NBe(e,t){if(vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(vm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nC(){return nC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},nC.apply(this,arguments)}function SBe(e){var t=e.xAxisId,n=kE(),s=TE(),i=eZ(t);return i==null?null:te.createElement(Jm,nC({},i,{className:Ht("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(o){return _o(o,!0)}}))}var ym=function(e){function t(){return xBe(this,t),yBe(this,t,arguments)}return wBe(t,e),vBe(t,[{key:"render",value:function(){return te.createElement(SBe,this.props)}}])}(te.Component);yZ(ym,"displayName","XAxis");yZ(ym,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function jm(e){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(e)}function _Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PBe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,NZ(s.key),s)}}function CBe(e,t,n){return t&&PBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kBe(e,t,n){return t=Hj(t),TBe(e,bZ()?Reflect.construct(t,n||[],Hj(e).constructor):t.apply(e,n))}function TBe(e,t){if(t&&(jm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ABe(e)}function ABe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bZ=function(){return!!e})()}function Hj(e){return Hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hj(e)}function EBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sC(e,t)}function sC(e,t){return sC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},sC(e,t)}function wZ(e,t,n){return t=NZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NZ(e){var t=OBe(e,"string");return jm(t)=="symbol"?t:t+""}function OBe(e,t){if(jm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(jm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iC(){return iC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},iC.apply(this,arguments)}var MBe=function(t){var n=t.yAxisId,s=kE(),i=TE(),a=tZ(n);return a==null?null:te.createElement(Jm,iC({},a,{className:Ht("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:s,height:i},ticksGenerator:function(l){return _o(l,!0)}}))},Rl=function(e){function t(){return _Be(this,t),kBe(this,t,arguments)}return EBe(t,e),CBe(t,[{key:"render",value:function(){return te.createElement(MBe,this.props)}}])}(te.Component);wZ(Rl,"displayName","YAxis");wZ(Rl,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function q5(e){return RBe(e)||LBe(e)||IBe(e)||DBe()}function DBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IBe(e,t){if(e){if(typeof e=="string")return aC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aC(e,t)}}function LBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RBe(e){if(Array.isArray(e))return aC(e)}function aC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var oC=function(t,n,s,i,a){var o=Ti(t,EE),l=Ti(t,Fw),c=[].concat(q5(o),q5(l)),d=Ti(t,Bw),h="".concat(i,"Id"),m=i[0],f=n;if(c.length&&(f=c.reduce(function(x,y){if(y.props[h]===s&&Ua(y.props,"extendDomain")&&We(y.props[m])){var w=y.props[m];return[Math.min(x[0],w),Math.max(x[1],w)]}return x},f)),d.length){var v="".concat(m,"1"),p="".concat(m,"2");f=d.reduce(function(x,y){if(y.props[h]===s&&Ua(y.props,"extendDomain")&&We(y.props[v])&&We(y.props[p])){var w=y.props[v],j=y.props[p];return[Math.min(x[0],w,j),Math.max(x[1],w,j)]}return x},f)}return a&&a.length&&(f=a.reduce(function(x,y){return We(y)?[Math.min(x[0],y),Math.max(x[1],y)]:x},f)),f},SZ={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function i(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function a(c,d,h,m,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new i(h,m||c,f),p=n?n+d:d;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],v]:c._events[p].push(v):(c._events[p]=v,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,m;if(this._eventsCount===0)return d;for(m in h=this._events)t.call(h,m)&&d.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=n?n+d:d,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var f=0,v=m.length,p=new Array(v);f<v;f++)p[f]=m[f].fn;return p},l.prototype.listenerCount=function(d){var h=n?n+d:d,m=this._events[h];return m?m.fn?1:m.length:0},l.prototype.emit=function(d,h,m,f,v,p){var x=n?n+d:d;if(!this._events[x])return!1;var y=this._events[x],w=arguments.length,j,N;if(y.fn){switch(y.once&&this.removeListener(d,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,h),!0;case 3:return y.fn.call(y.context,h,m),!0;case 4:return y.fn.call(y.context,h,m,f),!0;case 5:return y.fn.call(y.context,h,m,f,v),!0;case 6:return y.fn.call(y.context,h,m,f,v,p),!0}for(N=1,j=new Array(w-1);N<w;N++)j[N-1]=arguments[N];y.fn.apply(y.context,j)}else{var C=y.length,P;for(N=0;N<C;N++)switch(y[N].once&&this.removeListener(d,y[N].fn,void 0,!0),w){case 1:y[N].fn.call(y[N].context);break;case 2:y[N].fn.call(y[N].context,h);break;case 3:y[N].fn.call(y[N].context,h,m);break;case 4:y[N].fn.call(y[N].context,h,m,f);break;default:if(!j)for(P=1,j=new Array(w-1);P<w;P++)j[P-1]=arguments[P];y[N].fn.apply(y[N].context,j)}}return!0},l.prototype.on=function(d,h,m){return a(this,d,h,m,!1)},l.prototype.once=function(d,h,m){return a(this,d,h,m,!0)},l.prototype.removeListener=function(d,h,m,f){var v=n?n+d:d;if(!this._events[v])return this;if(!h)return o(this,v),this;var p=this._events[v];if(p.fn)p.fn===h&&(!f||p.once)&&(!m||p.context===m)&&o(this,v);else{for(var x=0,y=[],w=p.length;x<w;x++)(p[x].fn!==h||f&&!p[x].once||m&&p[x].context!==m)&&y.push(p[x]);y.length?this._events[v]=y.length===1?y[0]:y:o(this,v)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&o(this,h)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(SZ);var $Be=SZ.exports;const FBe=ur($Be);var fS=new FBe,pS="recharts.syncMouseEvents";function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}function zBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BBe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,_Z(s.key),s)}}function VBe(e,t,n){return t&&BBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xS(e,t,n){return t=_Z(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Z(e){var t=UBe(e,"string");return Xx(t)=="symbol"?t:t+""}function UBe(e,t){if(Xx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Xx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var WBe=function(){function e(){zBe(this,e),xS(this,"activeIndex",0),xS(this,"coordinateList",[]),xS(this,"layout","horizontal")}return VBe(e,[{key:"setDetails",value:function(n){var s,i=n.coordinateList,a=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,h=n.offset,m=h===void 0?null:h,f=n.mouseHandlerCallback,v=f===void 0?null:f;this.coordinateList=(s=a??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=v??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((s=window)===null||s===void 0?void 0:s.scrollY)||0,m=a+c+d,f=o+this.offset.top+l/2+h;this.mouseHandlerCallback({pageX:m,pageY:f})}}}])}();function HBe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],i=e==null?void 0:e[1];if(s&&i&&We(s)&&We(i))return!0}return!1}function qBe(e,t,n,s){var i=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function PZ(e){var t=e.cx,n=e.cy,s=e.radius,i=e.startAngle,a=e.endAngle,o=Bn(t,n,s,i),l=Bn(t,n,s,a);return{points:[o,l],cx:t,cy:n,radius:s,startAngle:i,endAngle:a}}function KBe(e,t,n){var s,i,a,o;if(e==="horizontal")s=t.x,a=s,i=n.top,o=n.top+n.height;else if(e==="vertical")i=t.y,o=i,s=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,h=t.outerRadius,m=t.angle,f=Bn(l,c,d,m),v=Bn(l,c,h,m);s=f.x,i=f.y,a=v.x,o=v.y}else return PZ(t);return[{x:s,y:i},{x:a,y:o}]}function Qx(e){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qx(e)}function K5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Jv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K5(Object(n),!0).forEach(function(s){GBe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function GBe(e,t,n){return t=ZBe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZBe(e){var t=YBe(e,"string");return Qx(t)=="symbol"?t:t+""}function YBe(e,t){if(Qx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Qx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XBe(e){var t,n,s=e.element,i=e.tooltipEventType,a=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,h=e.tooltipAxisBandSize,m=e.layout,f=e.chartName,v=(t=s.props.cursor)!==null&&t!==void 0?t:(n=s.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!s||!v||!a||!o||f!=="ScatterChart"&&i!=="axis")return null;var p,x=ph;if(f==="ScatterChart")p=o,x=B$e;else if(f==="BarChart")p=qBe(m,o,c,h),x=SE;else if(m==="radial"){var y=PZ(o),w=y.cx,j=y.cy,N=y.radius,C=y.startAngle,P=y.endAngle;p={cx:w,cy:j,startAngle:C,endAngle:P,innerRadius:N,outerRadius:N},x=_G}else p={points:KBe(m,o,c)},x=ph;var k=Jv(Jv(Jv(Jv({stroke:"#ccc",pointerEvents:"none"},c),p),Mt(v,!1)),{},{payload:l,payloadIndex:d,className:Ht("recharts-tooltip-cursor",v.className)});return b.isValidElement(v)?b.cloneElement(v,k):b.createElement(x,k)}var QBe=["item"],JBe=["children","className","width","height","style","compact","title","desc"];function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function Yu(){return Yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Yu.apply(this,arguments)}function G5(e,t){return rVe(e)||tVe(e,t)||kZ(e,t)||eVe()}function eVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tVe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function rVe(e){if(Array.isArray(e))return e}function Z5(e,t){if(e==null)return{};var n=nVe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function nVe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function sVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iVe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,TZ(s.key),s)}}function aVe(e,t,n){return t&&iVe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oVe(e,t,n){return t=qj(t),lVe(e,CZ()?Reflect.construct(t,n||[],qj(e).constructor):t.apply(e,n))}function lVe(e,t){if(t&&(bm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cVe(e)}function cVe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CZ=function(){return!!e})()}function qj(e){return qj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qj(e)}function dVe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lC(e,t)}function lC(e,t){return lC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},lC(e,t)}function wm(e){return mVe(e)||hVe(e)||kZ(e)||uVe()}function uVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kZ(e,t){if(e){if(typeof e=="string")return cC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cC(e,t)}}function hVe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mVe(e){if(Array.isArray(e))return cC(e)}function cC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Y5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y5(Object(n),!0).forEach(function(s){gt(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function gt(e,t,n){return t=TZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TZ(e){var t=fVe(e,"string");return bm(t)=="symbol"?t:t+""}function fVe(e,t){if(bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(bm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pVe={xAxis:["bottom","top"],yAxis:["left","right"]},xVe={width:"100%",height:"100%"},AZ={x:0,y:0};function ey(e){return e}var gVe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},vVe=function(t,n,s,i){var a=n.find(function(h){return h&&h.index===s});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var o=a.coordinate,l=i.radius;return ke(ke(ke({},i),Bn(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,d=i.angle;return ke(ke(ke({},i),Bn(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return AZ},Vw=function(t,n){var s=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(wm(l),wm(d)):l},[]);return o.length>0?o:t&&t.length&&We(i)&&We(a)?t.slice(i,a+1):[]};function EZ(e){return e==="number"?[0,"auto"]:void 0}var dC=function(t,n,s,i){var a=t.graphicalItems,o=t.tooltipAxis,l=Vw(n,t);return s<0||!a||!a.length||s>=l.length?null:a.reduce(function(c,d){var h,m=(h=d.props.data)!==null&&h!==void 0?h:n;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var v=m===void 0?l:m;f=q0(v,o.dataKey,i)}else f=m&&m[s]||l[s];return f?[].concat(wm(c),[wG(d,f)]):c},[])},X5=function(t,n,s,i){var a=i||{x:t.chartX,y:t.chartY},o=gVe(a,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,h=N3e(o,l,d,c);if(h>=0&&d){var m=d[h]&&d[h].value,f=dC(t,n,h,m),v=vVe(s,l,h,a);return{activeTooltipIndex:h,activeLabel:m,activePayload:f,activeCoordinate:v}}return null},yVe=function(t,n){var s=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,h=t.layout,m=t.children,f=t.stackOffset,v=yG(h,a);return s.reduce(function(p,x){var y,w=x.type.defaultProps!==void 0?ke(ke({},x.type.defaultProps),x.props):x.props,j=w.type,N=w.dataKey,C=w.allowDataOverflow,P=w.allowDuplicatedCategory,k=w.scale,_=w.ticks,O=w.includeHidden,M=w[o];if(p[M])return p;var T=Vw(t.data,{graphicalItems:i.filter(function(X){var ge,Se=o in X.props?X.props[o]:(ge=X.type.defaultProps)===null||ge===void 0?void 0:ge[o];return Se===M}),dataStartIndex:c,dataEndIndex:d}),I=T.length,A,V,D;HBe(w.domain,C,j)&&(A=PP(w.domain,null,C),v&&(j==="number"||k!=="auto")&&(D=vp(T,N,"category")));var W=EZ(j);if(!A||A.length===0){var U,Q=(U=w.domain)!==null&&U!==void 0?U:W;if(N){if(A=vp(T,N,j),j==="category"&&v){var q=hSe(A);P&&q?(V=A,A=Oj(0,I)):P||(A=CR(Q,A,x).reduce(function(X,ge){return X.indexOf(ge)>=0?X:[].concat(wm(X),[ge])},[]))}else if(j==="category")P?A=A.filter(function(X){return X!==""&&!$t(X)}):A=CR(Q,A,x).reduce(function(X,ge){return X.indexOf(ge)>=0||ge===""||$t(ge)?X:[].concat(wm(X),[ge])},[]);else if(j==="number"){var B=k3e(T,i.filter(function(X){var ge,Se,F=o in X.props?X.props[o]:(ge=X.type.defaultProps)===null||ge===void 0?void 0:ge[o],pe="hide"in X.props?X.props.hide:(Se=X.type.defaultProps)===null||Se===void 0?void 0:Se.hide;return F===M&&(O||!pe)}),N,a,h);B&&(A=B)}v&&(j==="number"||k!=="auto")&&(D=vp(T,N,"category"))}else v?A=Oj(0,I):l&&l[M]&&l[M].hasStack&&j==="number"?A=f==="expand"?[0,1]:bG(l[M].stackGroups,c,d):A=vG(T,i.filter(function(X){var ge=o in X.props?X.props[o]:X.type.defaultProps[o],Se="hide"in X.props?X.props.hide:X.type.defaultProps.hide;return ge===M&&(O||!Se)}),j,h,!0);if(j==="number")A=oC(m,A,M,a,_),Q&&(A=PP(Q,A,C));else if(j==="category"&&Q){var z=Q,H=A.every(function(X){return z.indexOf(X)>=0});H&&(A=z)}}return ke(ke({},p),{},gt({},M,ke(ke({},w),{},{axisType:a,domain:A,categoricalDomain:D,duplicateDomain:V,originalDomain:(y=w.domain)!==null&&y!==void 0?y:W,isCategorical:v,layout:h})))},{})},jVe=function(t,n){var s=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,h=t.layout,m=t.children,f=Vw(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),v=f.length,p=yG(h,a),x=-1;return s.reduce(function(y,w){var j=w.type.defaultProps!==void 0?ke(ke({},w.type.defaultProps),w.props):w.props,N=j[o],C=EZ("number");if(!y[N]){x++;var P;return p?P=Oj(0,v):l&&l[N]&&l[N].hasStack?(P=bG(l[N].stackGroups,c,d),P=oC(m,P,N,a)):(P=PP(C,vG(f,s.filter(function(k){var _,O,M=o in k.props?k.props[o]:(_=k.type.defaultProps)===null||_===void 0?void 0:_[o],T="hide"in k.props?k.props.hide:(O=k.type.defaultProps)===null||O===void 0?void 0:O.hide;return M===N&&!T}),"number",h),i.defaultProps.allowDataOverflow),P=oC(m,P,N,a)),ke(ke({},y),{},gt({},N,ke(ke({axisType:a},i.defaultProps),{},{hide:!0,orientation:ki(pVe,"".concat(a,".").concat(x%2),null),domain:P,originalDomain:C,isCategorical:p,layout:h})))}return y},{})},bVe=function(t,n){var s=n.axisType,i=s===void 0?"xAxis":s,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,h=t.children,m="".concat(i,"Id"),f=Ti(h,a),v={};return f&&f.length?v=yVe(t,{axes:f,graphicalItems:o,axisType:i,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(v=jVe(t,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),v},wVe=function(t){var n=bl(t),s=_o(n,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:XA(s,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Nj(n,s)}},Q5=function(t){var n=t.children,s=t.defaultShowTooltip,i=zs(n,cm),a=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},NVe=function(t){return!t||!t.length?!1:t.some(function(n){var s=Mo(n&&n.type);return s&&s.indexOf("Bar")>=0})},J5=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},SVe=function(t,n){var s=t.props,i=t.graphicalItems,a=t.xAxisMap,o=a===void 0?{}:a,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,h=s.height,m=s.children,f=s.margin||{},v=zs(m,cm),p=zs(m,ec),x=Object.keys(c).reduce(function(P,k){var _=c[k],O=_.orientation;return!_.mirror&&!_.hide?ke(ke({},P),{},gt({},O,P[O]+_.width)):P},{left:f.left||0,right:f.right||0}),y=Object.keys(o).reduce(function(P,k){var _=o[k],O=_.orientation;return!_.mirror&&!_.hide?ke(ke({},P),{},gt({},O,ki(P,"".concat(O))+_.height)):P},{top:f.top||0,bottom:f.bottom||0}),w=ke(ke({},y),x),j=w.bottom;v&&(w.bottom+=v.props.height||cm.defaultProps.height),p&&n&&(w=P3e(w,i,s,n));var N=d-w.left-w.right,C=h-w.top-w.bottom;return ke(ke({brushBottom:j},w),{},{width:Math.max(N,0),height:Math.max(C,0)})},_Ve=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},OZ=function(t){var n=t.chartName,s=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,h=t.formatAxisMap,m=t.defaultProps,f=function(w,j){var N=j.graphicalItems,C=j.stackGroups,P=j.offset,k=j.updateId,_=j.dataStartIndex,O=j.dataEndIndex,M=w.barSize,T=w.layout,I=w.barGap,A=w.barCategoryGap,V=w.maxBarSize,D=J5(T),W=D.numericAxisName,U=D.cateAxisName,Q=NVe(N),q=[];return N.forEach(function(B,z){var H=Vw(w.data,{graphicalItems:[B],dataStartIndex:_,dataEndIndex:O}),X=B.type.defaultProps!==void 0?ke(ke({},B.type.defaultProps),B.props):B.props,ge=X.dataKey,Se=X.maxBarSize,F=X["".concat(W,"Id")],pe=X["".concat(U,"Id")],we={},Be=c.reduce(function(Ft,ie){var je=j["".concat(ie.axisType,"Map")],Ce=X["".concat(ie.axisType,"Id")];je&&je[Ce]||ie.axisType==="zAxis"||Gd();var Y=je[Ce];return ke(ke({},Ft),{},gt(gt({},ie.axisType,Y),"".concat(ie.axisType,"Ticks"),_o(Y)))},we),Pe=Be[U],Ee=Be["".concat(U,"Ticks")],Ie=C&&C[F]&&C[F].hasStack&&z3e(B,C[F].stackGroups),Ne=Mo(B.type).indexOf("Bar")>=0,xe=Nj(Pe,Ee),J=[],De=Q&&S3e({barSize:M,stackGroups:C,totalSize:_Ve(Be,U)});if(Ne){var Ue,st,ht=$t(Se)?V:Se,Wt=(Ue=(st=Nj(Pe,Ee,!0))!==null&&st!==void 0?st:ht)!==null&&Ue!==void 0?Ue:0;J=_3e({barGap:I,barCategoryGap:A,bandSize:Wt!==xe?Wt:xe,sizeList:De[pe],maxBarSize:ht}),Wt!==xe&&(J=J.map(function(Ft){return ke(ke({},Ft),{},{position:ke(ke({},Ft.position),{},{offset:Ft.position.offset-Wt/2})})}))}var mr=B&&B.type&&B.type.getComposedData;mr&&q.push({props:ke(ke({},mr(ke(ke({},Be),{},{displayedData:H,props:w,dataKey:ge,item:B,bandSize:xe,barPosition:J,offset:P,stackedData:Ie,layout:T,dataStartIndex:_,dataEndIndex:O}))),{},gt(gt(gt({key:B.key||"item-".concat(z)},W,Be[W]),U,Be[U]),"animationId",k)),childIndex:NSe(B,w.children),item:B})}),q},v=function(w,j){var N=w.props,C=w.dataStartIndex,P=w.dataEndIndex,k=w.updateId;if(!jL({props:N}))return null;var _=N.children,O=N.layout,M=N.stackOffset,T=N.data,I=N.reverseStackOrder,A=J5(O),V=A.numericAxisName,D=A.cateAxisName,W=Ti(_,s),U=R3e(T,W,"".concat(V,"Id"),"".concat(D,"Id"),M,I),Q=c.reduce(function(X,ge){var Se="".concat(ge.axisType,"Map");return ke(ke({},X),{},gt({},Se,bVe(N,ke(ke({},ge),{},{graphicalItems:W,stackGroups:ge.axisType===V&&U,dataStartIndex:C,dataEndIndex:P}))))},{}),q=SVe(ke(ke({},Q),{},{props:N,graphicalItems:W}),j==null?void 0:j.legendBBox);Object.keys(Q).forEach(function(X){Q[X]=h(N,Q[X],q,X.replace("Map",""),n)});var B=Q["".concat(D,"Map")],z=wVe(B),H=f(N,ke(ke({},Q),{},{dataStartIndex:C,dataEndIndex:P,updateId:k,graphicalItems:W,stackGroups:U,offset:q}));return ke(ke({formattedGraphicalItems:H,graphicalItems:W,offset:q,stackGroups:U},z),Q)},p=function(y){function w(j){var N,C,P;return sVe(this,w),P=oVe(this,w,[j]),gt(P,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),gt(P,"accessibilityManager",new WBe),gt(P,"handleLegendBBoxUpdate",function(k){if(k){var _=P.state,O=_.dataStartIndex,M=_.dataEndIndex,T=_.updateId;P.setState(ke({legendBBox:k},v({props:P.props,dataStartIndex:O,dataEndIndex:M,updateId:T},ke(ke({},P.state),{},{legendBBox:k}))))}}),gt(P,"handleReceiveSyncEvent",function(k,_,O){if(P.props.syncId===k){if(O===P.eventEmitterSymbol&&typeof P.props.syncMethod!="function")return;P.applySyncEvent(_)}}),gt(P,"handleBrushChange",function(k){var _=k.startIndex,O=k.endIndex;if(_!==P.state.dataStartIndex||O!==P.state.dataEndIndex){var M=P.state.updateId;P.setState(function(){return ke({dataStartIndex:_,dataEndIndex:O},v({props:P.props,dataStartIndex:_,dataEndIndex:O,updateId:M},P.state))}),P.triggerSyncEvent({dataStartIndex:_,dataEndIndex:O})}}),gt(P,"handleMouseEnter",function(k){var _=P.getMouseInfo(k);if(_){var O=ke(ke({},_),{},{isTooltipActive:!0});P.setState(O),P.triggerSyncEvent(O);var M=P.props.onMouseEnter;At(M)&&M(O,k)}}),gt(P,"triggeredAfterMouseMove",function(k){var _=P.getMouseInfo(k),O=_?ke(ke({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};P.setState(O),P.triggerSyncEvent(O);var M=P.props.onMouseMove;At(M)&&M(O,k)}),gt(P,"handleItemMouseEnter",function(k){P.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),gt(P,"handleItemMouseLeave",function(){P.setState(function(){return{isTooltipActive:!1}})}),gt(P,"handleMouseMove",function(k){k.persist(),P.throttleTriggeredAfterMouseMove(k)}),gt(P,"handleMouseLeave",function(k){P.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};P.setState(_),P.triggerSyncEvent(_);var O=P.props.onMouseLeave;At(O)&&O(_,k)}),gt(P,"handleOuterEvent",function(k){var _=wSe(k),O=ki(P.props,"".concat(_));if(_&&At(O)){var M,T;/.*touch.*/i.test(_)?T=P.getMouseInfo(k.changedTouches[0]):T=P.getMouseInfo(k),O((M=T)!==null&&M!==void 0?M:{},k)}}),gt(P,"handleClick",function(k){var _=P.getMouseInfo(k);if(_){var O=ke(ke({},_),{},{isTooltipActive:!0});P.setState(O),P.triggerSyncEvent(O);var M=P.props.onClick;At(M)&&M(O,k)}}),gt(P,"handleMouseDown",function(k){var _=P.props.onMouseDown;if(At(_)){var O=P.getMouseInfo(k);_(O,k)}}),gt(P,"handleMouseUp",function(k){var _=P.props.onMouseUp;if(At(_)){var O=P.getMouseInfo(k);_(O,k)}}),gt(P,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&P.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),gt(P,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&P.handleMouseDown(k.changedTouches[0])}),gt(P,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&P.handleMouseUp(k.changedTouches[0])}),gt(P,"handleDoubleClick",function(k){var _=P.props.onDoubleClick;if(At(_)){var O=P.getMouseInfo(k);_(O,k)}}),gt(P,"handleContextMenu",function(k){var _=P.props.onContextMenu;if(At(_)){var O=P.getMouseInfo(k);_(O,k)}}),gt(P,"triggerSyncEvent",function(k){P.props.syncId!==void 0&&fS.emit(pS,P.props.syncId,k,P.eventEmitterSymbol)}),gt(P,"applySyncEvent",function(k){var _=P.props,O=_.layout,M=_.syncMethod,T=P.state.updateId,I=k.dataStartIndex,A=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)P.setState(ke({dataStartIndex:I,dataEndIndex:A},v({props:P.props,dataStartIndex:I,dataEndIndex:A,updateId:T},P.state)));else if(k.activeTooltipIndex!==void 0){var V=k.chartX,D=k.chartY,W=k.activeTooltipIndex,U=P.state,Q=U.offset,q=U.tooltipTicks;if(!Q)return;if(typeof M=="function")W=M(q,k);else if(M==="value"){W=-1;for(var B=0;B<q.length;B++)if(q[B].value===k.activeLabel){W=B;break}}var z=ke(ke({},Q),{},{x:Q.left,y:Q.top}),H=Math.min(V,z.x+z.width),X=Math.min(D,z.y+z.height),ge=q[W]&&q[W].value,Se=dC(P.state,P.props.data,W),F=q[W]?{x:O==="horizontal"?q[W].coordinate:H,y:O==="horizontal"?X:q[W].coordinate}:AZ;P.setState(ke(ke({},k),{},{activeLabel:ge,activeCoordinate:F,activePayload:Se,activeTooltipIndex:W}))}else P.setState(k)}),gt(P,"renderCursor",function(k){var _,O=P.state,M=O.isTooltipActive,T=O.activeCoordinate,I=O.activePayload,A=O.offset,V=O.activeTooltipIndex,D=O.tooltipAxisBandSize,W=P.getTooltipEventType(),U=(_=k.props.active)!==null&&_!==void 0?_:M,Q=P.props.layout,q=k.key||"_recharts-cursor";return te.createElement(XBe,{key:q,activeCoordinate:T,activePayload:I,activeTooltipIndex:V,chartName:n,element:k,isActive:U,layout:Q,offset:A,tooltipAxisBandSize:D,tooltipEventType:W})}),gt(P,"renderPolarAxis",function(k,_,O){var M=ki(k,"type.axisType"),T=ki(P.state,"".concat(M,"Map")),I=k.type.defaultProps,A=I!==void 0?ke(ke({},I),k.props):k.props,V=T&&T[A["".concat(M,"Id")]];return b.cloneElement(k,ke(ke({},V),{},{className:Ht(M,V.className),key:k.key||"".concat(_,"-").concat(O),ticks:_o(V,!0)}))}),gt(P,"renderPolarGrid",function(k){var _=k.props,O=_.radialLines,M=_.polarAngles,T=_.polarRadius,I=P.state,A=I.radiusAxisMap,V=I.angleAxisMap,D=bl(A),W=bl(V),U=W.cx,Q=W.cy,q=W.innerRadius,B=W.outerRadius;return b.cloneElement(k,{polarAngles:Array.isArray(M)?M:_o(W,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(T)?T:_o(D,!0).map(function(z){return z.coordinate}),cx:U,cy:Q,innerRadius:q,outerRadius:B,key:k.key||"polar-grid",radialLines:O})}),gt(P,"renderLegend",function(){var k=P.state.formattedGraphicalItems,_=P.props,O=_.children,M=_.width,T=_.height,I=P.props.margin||{},A=M-(I.left||0)-(I.right||0),V=xG({children:O,formattedGraphicalItems:k,legendWidth:A,legendContent:d});if(!V)return null;var D=V.item,W=Z5(V,QBe);return b.cloneElement(D,ke(ke({},W),{},{chartWidth:M,chartHeight:T,margin:I,onBBoxUpdate:P.handleLegendBBoxUpdate}))}),gt(P,"renderTooltip",function(){var k,_=P.props,O=_.children,M=_.accessibilityLayer,T=zs(O,qi);if(!T)return null;var I=P.state,A=I.isTooltipActive,V=I.activeCoordinate,D=I.activePayload,W=I.activeLabel,U=I.offset,Q=(k=T.props.active)!==null&&k!==void 0?k:A;return b.cloneElement(T,{viewBox:ke(ke({},U),{},{x:U.left,y:U.top}),active:Q,label:W,payload:Q?D:[],coordinate:V,accessibilityLayer:M})}),gt(P,"renderBrush",function(k){var _=P.props,O=_.margin,M=_.data,T=P.state,I=T.offset,A=T.dataStartIndex,V=T.dataEndIndex,D=T.updateId;return b.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Zv(P.handleBrushChange,k.props.onChange),data:M,x:We(k.props.x)?k.props.x:I.left,y:We(k.props.y)?k.props.y:I.top+I.height+I.brushBottom-(O.bottom||0),width:We(k.props.width)?k.props.width:I.width,startIndex:A,endIndex:V,updateId:"brush-".concat(D)})}),gt(P,"renderReferenceElement",function(k,_,O){if(!k)return null;var M=P,T=M.clipPathId,I=P.state,A=I.xAxisMap,V=I.yAxisMap,D=I.offset,W=k.type.defaultProps||{},U=k.props,Q=U.xAxisId,q=Q===void 0?W.xAxisId:Q,B=U.yAxisId,z=B===void 0?W.yAxisId:B;return b.cloneElement(k,{key:k.key||"".concat(_,"-").concat(O),xAxis:A[q],yAxis:V[z],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:T})}),gt(P,"renderActivePoints",function(k){var _=k.item,O=k.activePoint,M=k.basePoint,T=k.childIndex,I=k.isRange,A=[],V=_.props.key,D=_.item.type.defaultProps!==void 0?ke(ke({},_.item.type.defaultProps),_.item.props):_.item.props,W=D.activeDot,U=D.dataKey,Q=ke(ke({index:T,dataKey:U,cx:O.x,cy:O.y,r:4,fill:NE(_.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},Mt(W,!1)),K0(W));return A.push(w.renderActiveDot(W,Q,"".concat(V,"-activePoint-").concat(T))),M?A.push(w.renderActiveDot(W,ke(ke({},Q),{},{cx:M.x,cy:M.y}),"".concat(V,"-basePoint-").concat(T))):I&&A.push(null),A}),gt(P,"renderGraphicChild",function(k,_,O){var M=P.filterFormatItem(k,_,O);if(!M)return null;var T=P.getTooltipEventType(),I=P.state,A=I.isTooltipActive,V=I.tooltipAxis,D=I.activeTooltipIndex,W=I.activeLabel,U=P.props.children,Q=zs(U,qi),q=M.props,B=q.points,z=q.isRange,H=q.baseLine,X=M.item.type.defaultProps!==void 0?ke(ke({},M.item.type.defaultProps),M.item.props):M.item.props,ge=X.activeDot,Se=X.hide,F=X.activeBar,pe=X.activeShape,we=!!(!Se&&A&&Q&&(ge||F||pe)),Be={};T!=="axis"&&Q&&Q.props.trigger==="click"?Be={onClick:Zv(P.handleItemMouseEnter,k.props.onClick)}:T!=="axis"&&(Be={onMouseLeave:Zv(P.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Zv(P.handleItemMouseEnter,k.props.onMouseEnter)});var Pe=b.cloneElement(k,ke(ke({},M.props),Be));function Ee(ie){return typeof V.dataKey=="function"?V.dataKey(ie.payload):null}if(we)if(D>=0){var Ie,Ne;if(V.dataKey&&!V.allowDuplicatedCategory){var xe=typeof V.dataKey=="function"?Ee:"payload.".concat(V.dataKey.toString());Ie=q0(B,xe,W),Ne=z&&H&&q0(H,xe,W)}else Ie=B==null?void 0:B[D],Ne=z&&H&&H[D];if(pe||F){var J=k.props.activeIndex!==void 0?k.props.activeIndex:D;return[b.cloneElement(k,ke(ke(ke({},M.props),Be),{},{activeIndex:J})),null,null]}if(!$t(Ie))return[Pe].concat(wm(P.renderActivePoints({item:M,activePoint:Ie,basePoint:Ne,childIndex:D,isRange:z})))}else{var De,Ue=(De=P.getItemByXY(P.state.activeCoordinate))!==null&&De!==void 0?De:{graphicalItem:Pe},st=Ue.graphicalItem,ht=st.item,Wt=ht===void 0?k:ht,mr=st.childIndex,Ft=ke(ke(ke({},M.props),Be),{},{activeIndex:mr});return[b.cloneElement(Wt,Ft),null,null]}return z?[Pe,null,null]:[Pe,null]}),gt(P,"renderCustomized",function(k,_,O){return b.cloneElement(k,ke(ke({key:"recharts-customized-".concat(O)},P.props),P.state))}),gt(P,"renderMap",{CartesianGrid:{handler:ey,once:!0},ReferenceArea:{handler:P.renderReferenceElement},ReferenceLine:{handler:ey},ReferenceDot:{handler:P.renderReferenceElement},XAxis:{handler:ey},YAxis:{handler:ey},Brush:{handler:P.renderBrush,once:!0},Bar:{handler:P.renderGraphicChild},Line:{handler:P.renderGraphicChild},Area:{handler:P.renderGraphicChild},Radar:{handler:P.renderGraphicChild},RadialBar:{handler:P.renderGraphicChild},Scatter:{handler:P.renderGraphicChild},Pie:{handler:P.renderGraphicChild},Funnel:{handler:P.renderGraphicChild},Tooltip:{handler:P.renderCursor,once:!0},PolarGrid:{handler:P.renderPolarGrid,once:!0},PolarAngleAxis:{handler:P.renderPolarAxis},PolarRadiusAxis:{handler:P.renderPolarAxis},Customized:{handler:P.renderCustomized}}),P.clipPathId="".concat((N=j.id)!==null&&N!==void 0?N:qm("recharts"),"-clip"),P.throttleTriggeredAfterMouseMove=pK(P.triggeredAfterMouseMove,(C=j.throttleDelay)!==null&&C!==void 0?C:1e3/60),P.state={},P}return dVe(w,y),aVe(w,[{key:"componentDidMount",value:function(){var N,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var N=this.props,C=N.children,P=N.data,k=N.height,_=N.layout,O=zs(C,qi);if(O){var M=O.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,I=dC(this.state,P,M,T),A=this.state.tooltipTicks[M].coordinate,V=(this.state.offset.top+k)/2,D=_==="horizontal",W=D?{x:A,y:V}:{y:A,x:V},U=this.state.formattedGraphicalItems.find(function(q){var B=q.item;return B.type.name==="Scatter"});U&&(W=ke(ke({},W),U.props.points[M].tooltipPosition),I=U.props.points[M].tooltipPayload);var Q={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:T,activePayload:I,activeCoordinate:W};this.setState(Q),this.renderCursor(O),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(N,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==N.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==N.margin){var P,k;this.accessibilityManager.setDetails({offset:{left:(P=this.props.margin.left)!==null&&P!==void 0?P:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(N){B2([zs(N.children,qi)],[zs(this.props.children,qi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var N=zs(this.props.children,qi);if(N&&typeof N.props.shared=="boolean"){var C=N.props.shared?"axis":"item";return l.indexOf(C)>=0?C:a}return a}},{key:"getMouseInfo",value:function(N){if(!this.container)return null;var C=this.container,P=C.getBoundingClientRect(),k=Z4e(P),_={chartX:Math.round(N.pageX-k.left),chartY:Math.round(N.pageY-k.top)},O=P.width/C.offsetWidth||1,M=this.inRange(_.chartX,_.chartY,O);if(!M)return null;var T=this.state,I=T.xAxisMap,A=T.yAxisMap,V=this.getTooltipEventType(),D=X5(this.state,this.props.data,this.props.layout,M);if(V!=="axis"&&I&&A){var W=bl(I).scale,U=bl(A).scale,Q=W&&W.invert?W.invert(_.chartX):null,q=U&&U.invert?U.invert(_.chartY):null;return ke(ke({},_),{},{xValue:Q,yValue:q},D)}return D?ke(ke({},_),D):null}},{key:"inRange",value:function(N,C){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,_=N/P,O=C/P;if(k==="horizontal"||k==="vertical"){var M=this.state.offset,T=_>=M.left&&_<=M.left+M.width&&O>=M.top&&O<=M.top+M.height;return T?{x:_,y:O}:null}var I=this.state,A=I.angleAxisMap,V=I.radiusAxisMap;if(A&&V){var D=bl(A);return AR({x:_,y:O},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var N=this.props.children,C=this.getTooltipEventType(),P=zs(N,qi),k={};P&&C==="axis"&&(P.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=K0(this.props,this.handleOuterEvent);return ke(ke({},_),k)}},{key:"addListener",value:function(){fS.on(pS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){fS.removeListener(pS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(N,C,P){for(var k=this.state.formattedGraphicalItems,_=0,O=k.length;_<O;_++){var M=k[_];if(M.item===N||M.props.key===N.key||C===Mo(M.item.type)&&P===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var N=this.clipPathId,C=this.state.offset,P=C.left,k=C.top,_=C.height,O=C.width;return te.createElement("defs",null,te.createElement("clipPath",{id:N},te.createElement("rect",{x:P,y:k,height:_,width:O})))}},{key:"getXScales",value:function(){var N=this.state.xAxisMap;return N?Object.entries(N).reduce(function(C,P){var k=G5(P,2),_=k[0],O=k[1];return ke(ke({},C),{},gt({},_,O.scale))},{}):null}},{key:"getYScales",value:function(){var N=this.state.yAxisMap;return N?Object.entries(N).reduce(function(C,P){var k=G5(P,2),_=k[0],O=k[1];return ke(ke({},C),{},gt({},_,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(N){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[N])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(N){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[N])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(N){var C=this.state,P=C.formattedGraphicalItems,k=C.activeItem;if(P&&P.length)for(var _=0,O=P.length;_<O;_++){var M=P[_],T=M.props,I=M.item,A=I.type.defaultProps!==void 0?ke(ke({},I.type.defaultProps),I.props):I.props,V=Mo(I.type);if(V==="Bar"){var D=(T.data||[]).find(function(q){return E$e(N,q)});if(D)return{graphicalItem:M,payload:D}}else if(V==="RadialBar"){var W=(T.data||[]).find(function(q){return AR(N,q)});if(W)return{graphicalItem:M,payload:W}}else if(Iw(M,k)||Lw(M,k)||qx(M,k)){var U=D6e({graphicalItem:M,activeTooltipItem:k,itemData:A.data}),Q=A.activeIndex===void 0?U:A.activeIndex;return{graphicalItem:ke(ke({},M),{},{childIndex:Q}),payload:qx(M,k)?A.data[U]:M.props.data[U]}}}return null}},{key:"render",value:function(){var N=this;if(!jL(this))return null;var C=this.props,P=C.children,k=C.className,_=C.width,O=C.height,M=C.style,T=C.compact,I=C.title,A=C.desc,V=Z5(C,JBe),D=Mt(V,!1);if(T)return te.createElement(k5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},te.createElement(U2,Yu({},D,{width:_,height:O,title:I,desc:A}),this.renderClipPath(),wL(P,this.renderMap)));if(this.props.accessibilityLayer){var W,U;D.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,D.role=(U=this.props.role)!==null&&U!==void 0?U:"application",D.onKeyDown=function(q){N.accessibilityManager.keyboardEvent(q)},D.onFocus=function(){N.accessibilityManager.focus()}}var Q=this.parseEventsOfWrapper();return te.createElement(k5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},te.createElement("div",Yu({className:Ht("recharts-wrapper",k),style:ke({position:"relative",cursor:"default",width:_,height:O},M)},Q,{ref:function(B){N.container=B}}),te.createElement(U2,Yu({},D,{width:_,height:O,title:I,desc:A,style:xVe}),this.renderClipPath(),wL(P,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(b.Component);gt(p,"displayName",n),gt(p,"defaultProps",ke({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),gt(p,"getDerivedStateFromProps",function(y,w){var j=y.dataKey,N=y.data,C=y.children,P=y.width,k=y.height,_=y.layout,O=y.stackOffset,M=y.margin,T=w.dataStartIndex,I=w.dataEndIndex;if(w.updateId===void 0){var A=Q5(y);return ke(ke(ke({},A),{},{updateId:0},v(ke(ke({props:y},A),{},{updateId:0}),w)),{},{prevDataKey:j,prevData:N,prevWidth:P,prevHeight:k,prevLayout:_,prevStackOffset:O,prevMargin:M,prevChildren:C})}if(j!==w.prevDataKey||N!==w.prevData||P!==w.prevWidth||k!==w.prevHeight||_!==w.prevLayout||O!==w.prevStackOffset||!hh(M,w.prevMargin)){var V=Q5(y),D={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},W=ke(ke({},X5(w,N,_)),{},{updateId:w.updateId+1}),U=ke(ke(ke({},V),D),W);return ke(ke(ke({},U),v(ke({props:y},U),w)),{},{prevDataKey:j,prevData:N,prevWidth:P,prevHeight:k,prevLayout:_,prevStackOffset:O,prevMargin:M,prevChildren:C})}if(!B2(C,w.prevChildren)){var Q,q,B,z,H=zs(C,cm),X=H&&(Q=(q=H.props)===null||q===void 0?void 0:q.startIndex)!==null&&Q!==void 0?Q:T,ge=H&&(B=(z=H.props)===null||z===void 0?void 0:z.endIndex)!==null&&B!==void 0?B:I,Se=X!==T||ge!==I,F=!$t(N),pe=F&&!Se?w.updateId:w.updateId+1;return ke(ke({updateId:pe},v(ke(ke({props:y},w),{},{updateId:pe,dataStartIndex:X,dataEndIndex:ge}),w)),{},{prevChildren:C,dataStartIndex:X,dataEndIndex:ge})}return null}),gt(p,"renderActiveDot",function(y,w,j){var N;return b.isValidElement(y)?N=b.cloneElement(y,w):At(y)?N=y(w):N=te.createElement(Dw,w),te.createElement(Sr,{className:"recharts-active-dot",key:j},N)});var x=b.forwardRef(function(w,j){return te.createElement(p,Yu({},w,{ref:j}))});return x.displayName=p.displayName,x},PVe=OZ({chartName:"LineChart",GraphicalChild:xm,axisComponents:[{axisType:"xAxis",AxisComp:ym},{axisType:"yAxis",AxisComp:Rl}],formatAxisMap:qG}),CVe=OZ({chartName:"AreaChart",GraphicalChild:Qo,axisComponents:[{axisType:"xAxis",AxisComp:ym},{axisType:"yAxis",AxisComp:Rl}],formatAxisMap:qG});function kVe(){ft(),Gt();const[e,t]=b.useState("overview");b.useState("today");const n={totalMenuItems:45,todayOrders:127,todayRevenue:3250,pendingOrders:8,preparingOrders:12,readyOrders:3,averageRating:4.7,totalReviews:342,averagePreparationTime:18,tablesOccupied:15,totalTables:20,staffOnDuty:8},s=[{id:1,orderNumber:"ORD-001",customerName:"John Doe",items:["Chicken Biryani","Mango Lassi"],total:25.99,status:"preparing",orderTime:"2:30 PM",estimatedTime:15,tableNumber:7,orderType:"dine-in"},{id:2,orderNumber:"ORD-002",customerName:"Sarah Wilson",items:["Vegetable Curry","Naan","Rice"],total:18.5,status:"ready",orderTime:"2:25 PM",estimatedTime:0,orderType:"takeout"},{id:3,orderNumber:"ORD-003",customerName:"Mike Johnson",items:["Tandoori Chicken","Garlic Naan"],total:22.75,status:"pending",orderTime:"2:35 PM",estimatedTime:20,deliveryAddress:"123 Main St",orderType:"delivery"}],i=[{time:"9 AM",orders:5,revenue:125},{time:"10 AM",orders:8,revenue:200},{time:"11 AM",orders:12,revenue:300},{time:"12 PM",orders:25,revenue:625},{time:"1 PM",orders:30,revenue:750},{time:"2 PM",orders:22,revenue:550},{time:"3 PM",orders:15,revenue:375}],a=l=>{switch(l){case"pending":return"bg-yellow-500";case"preparing":return"bg-blue-500";case"ready":return"bg-green-500";case"delivered":return"bg-gray-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},o=l=>{switch(l){case"pending":return r.jsx(jt,{className:"h-4 w-4"});case"preparing":return r.jsx(Pa,{className:"h-4 w-4"});case"ready":return r.jsx(yt,{className:"h-4 w-4"});case"delivered":return r.jsx(Ct,{className:"h-4 w-4"});case"cancelled":return r.jsx(ps,{className:"h-4 w-4"});default:return r.jsx(Nr,{className:"h-4 w-4"})}};return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Pa,{className:"h-8 w-8 text-orange-600"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Restaurant Dashboard"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your restaurant operations"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs($,{variant:"outline",size:"sm",children:[r.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Notifications"]}),r.jsxs($,{children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"New Order"]})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs(Ds,{value:e,onValueChange:t,children:[r.jsxs(ws,{className:"grid w-full grid-cols-6",children:[r.jsx(at,{value:"overview",children:"Overview"}),r.jsx(at,{value:"orders",children:"Orders"}),r.jsx(at,{value:"menu",children:"Menu"}),r.jsx(at,{value:"tables",children:"Tables"}),r.jsx(at,{value:"staff",children:"Staff"}),r.jsx(at,{value:"analytics",children:"Analytics"})]}),r.jsxs(Xe,{value:"overview",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Today's Orders"}),r.jsx(Hte,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.todayOrders}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from yesterday"})]})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Today's Revenue"}),r.jsx(Qr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:["$",n.todayRevenue]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+8% from yesterday"})]})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Active Orders"}),r.jsx(Pa,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.pendingOrders+n.preparingOrders}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.readyOrders," ready for pickup"]})]})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Tables Occupied"}),r.jsx(Da,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(G,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[n.tablesOccupied,"/",n.totalTables]}),r.jsx(yd,{value:n.tablesOccupied/n.totalTables*100,className:"mt-2"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(K,{className:"lg:col-span-2",children:[r.jsx(re,{children:r.jsx(ne,{children:"Recent Orders"})}),r.jsx(G,{children:r.jsx("div",{className:"space-y-4",children:s.map(l=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:`p-2 rounded-full text-white ${a(l.status)}`,children:o(l.status)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:l.orderNumber}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.customerName,"  ",l.orderTime]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:l.items.join(", ")})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium",children:["$",l.total]}),r.jsx(ue,{variant:l.status==="ready"?"default":"secondary",children:l.status}),l.estimatedTime>0&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[l.estimatedTime," min"]})]})]},l.id))})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Kitchen Status"})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Pending Orders"}),r.jsx(ue,{variant:"outline",children:n.pendingOrders})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Preparing"}),r.jsx(ue,{variant:"outline",children:n.preparingOrders})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Ready"}),r.jsx(ue,{variant:"default",children:n.readyOrders})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Avg. Prep Time"}),r.jsxs("span",{className:"text-sm font-medium",children:[n.averagePreparationTime," min"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Staff on Duty"}),r.jsx("span",{className:"text-sm font-medium",children:n.staffOnDuty})]})]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Today's Sales"})}),r.jsx(G,{children:r.jsx(y3,{width:"100%",height:300,children:r.jsxs(CVe,{data:i,children:[r.jsx(QP,{strokeDasharray:"3 3"}),r.jsx(ym,{dataKey:"time"}),r.jsx(Rl,{yAxisId:"left"}),r.jsx(Rl,{yAxisId:"right",orientation:"right"}),r.jsx(qi,{}),r.jsx(ec,{}),r.jsx(Qo,{yAxisId:"left",type:"monotone",dataKey:"orders",stackId:"1",stroke:"#8884d8",fill:"#8884d8",name:"Orders"}),r.jsx(Qo,{yAxisId:"right",type:"monotone",dataKey:"revenue",stackId:"2",stroke:"#82ca9d",fill:"#82ca9d",name:"Revenue ($)"})]})})})]})]}),r.jsxs(Xe,{value:"orders",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Order Management"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(de,{placeholder:"Search orders...",className:"w-64"}),r.jsx($,{variant:"outline",children:"Filter"}),r.jsx($,{children:"New Order"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center",children:[r.jsx(jt,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Pending (",n.pendingOrders,")"]})}),r.jsx(G,{children:r.jsx("div",{className:"space-y-3",children:s.filter(l=>l.status==="pending").map(l=>r.jsx("div",{className:"p-3 border rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:l.orderNumber}),r.jsx("div",{className:"text-sm text-muted-foreground",children:l.customerName}),r.jsx("div",{className:"text-xs text-muted-foreground",children:l.orderTime})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium",children:["$",l.total]}),r.jsx($,{size:"sm",className:"mt-1",children:"Start"})]})]})},l.id))})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center",children:[r.jsx(Pa,{className:"h-5 w-5 mr-2 text-blue-500"}),"Preparing (",n.preparingOrders,")"]})}),r.jsx(G,{children:r.jsx("div",{className:"space-y-3",children:s.filter(l=>l.status==="preparing").map(l=>r.jsx("div",{className:"p-3 border rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:l.orderNumber}),r.jsx("div",{className:"text-sm text-muted-foreground",children:l.customerName}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.estimatedTime," min left"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium",children:["$",l.total]}),r.jsx($,{size:"sm",variant:"outline",className:"mt-1",children:"Ready"})]})]})},l.id))})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center",children:[r.jsx(yt,{className:"h-5 w-5 mr-2 text-green-500"}),"Ready (",n.readyOrders,")"]})}),r.jsx(G,{children:r.jsx("div",{className:"space-y-3",children:s.filter(l=>l.status==="ready").map(l=>r.jsx("div",{className:"p-3 border rounded-lg bg-green-50 dark:bg-green-900/20",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:l.orderNumber}),r.jsx("div",{className:"text-sm text-muted-foreground",children:l.customerName}),r.jsx("div",{className:"text-xs text-green-600",children:"Ready for pickup"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium",children:["$",l.total]}),r.jsx($,{size:"sm",variant:"default",className:"mt-1",children:"Complete"})]})]})},l.id))})})]})]})]}),r.jsxs(Xe,{value:"menu",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Menu Management"}),r.jsx("div",{className:"flex space-x-2",children:r.jsx(Ae,{href:"/seller/products/add",children:r.jsxs($,{children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Menu Item"]})})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Menu Categories"})}),r.jsx(G,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(K,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:"Appetizers"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"8 items"})]}),r.jsx($,{variant:"outline",size:"sm",children:"Manage"})]})}),r.jsx(K,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:"Main Courses"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"15 items"})]}),r.jsx($,{variant:"outline",size:"sm",children:"Manage"})]})}),r.jsx(K,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:"Beverages"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"12 items"})]}),r.jsx($,{variant:"outline",size:"sm",children:"Manage"})]})})]})})]})]}),r.jsxs(Xe,{value:"tables",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Table Management"}),r.jsxs($,{children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Table"]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Table Status"})}),r.jsx(G,{children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:Array.from({length:20},(l,c)=>c+1).map(l=>r.jsxs(K,{className:`p-4 text-center cursor-pointer transition-colors ${l<=n.tablesOccupied?"bg-red-50 dark:bg-red-900/20 border-red-200":"bg-green-50 dark:bg-green-900/20 border-green-200"}`,children:[r.jsxs("div",{className:"font-medium",children:["Table ",l]}),r.jsx("div",{className:`text-sm ${l<=n.tablesOccupied?"text-red-600":"text-green-600"}`,children:l<=n.tablesOccupied?"Occupied":"Available"})]},l))})})]})]}),r.jsxs(Xe,{value:"staff",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Staff Management"}),r.jsxs($,{children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Add Staff"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Staff on Duty"})}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.staffOnDuty}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"out of 12 total staff"})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Kitchen Staff"})}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"5"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"chefs and cooks"})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Service Staff"})}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"3"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"waiters and servers"})]})]})]})]}),r.jsxs(Xe,{value:"analytics",className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Restaurant Analytics"}),r.jsx("div",{className:"flex space-x-2",children:r.jsx($,{variant:"outline",size:"sm",children:"Export Report"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-sm",children:"Average Rating"})}),r.jsxs(G,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Bt,{className:"h-5 w-5 text-yellow-500 fill-current"}),r.jsx("span",{className:"text-2xl font-bold",children:n.averageRating})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.totalReviews," reviews"]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-sm",children:"Avg. Prep Time"})}),r.jsxs(G,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[n.averagePreparationTime," min"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"-2 min from last week"})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-sm",children:"Menu Items"})}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:n.totalMenuItems}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"across all categories"})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-sm",children:"Table Turnover"})}),r.jsxs(G,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"3.2x"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"tables per day"})]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Weekly Sales Trend"})}),r.jsx(G,{children:r.jsx(y3,{width:"100%",height:400,children:r.jsxs(PVe,{data:[{day:"Mon",orders:45,revenue:1125},{day:"Tue",orders:52,revenue:1300},{day:"Wed",orders:48,revenue:1200},{day:"Thu",orders:61,revenue:1525},{day:"Fri",orders:75,revenue:1875},{day:"Sat",orders:88,revenue:2200},{day:"Sun",orders:67,revenue:1675}],children:[r.jsx(QP,{strokeDasharray:"3 3"}),r.jsx(ym,{dataKey:"day"}),r.jsx(Rl,{yAxisId:"left"}),r.jsx(Rl,{yAxisId:"right",orientation:"right"}),r.jsx(qi,{}),r.jsx(ec,{}),r.jsx(xm,{yAxisId:"left",type:"monotone",dataKey:"orders",stroke:"#8884d8",name:"Orders"}),r.jsx(xm,{yAxisId:"right",type:"monotone",dataKey:"revenue",stroke:"#82ca9d",name:"Revenue ($)"})]})})})]})]})]})})]})}const e$=(e,t)=>{if(e&&e.trim()!==""&&!e.includes("placeholder"))return e;const n=t.toLowerCase();return n.includes("dal")||n.includes("bhat")||n.includes("rice")?"https://images.unsplash.com/photo-1563379091339-03246963d96c?w=400&h=300&fit=crop&auto=format":n.includes("curry")||n.includes("chicken")||n.includes("meat")?"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400&h=300&fit=crop&auto=format":n.includes("burger")||n.includes("sandwich")?"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop&auto=format":n.includes("pizza")?"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=300&fit=crop&auto=format":n.includes("pasta")||n.includes("noodle")?"https://images.unsplash.com/photo-1551892374-ecf8754cf8b0?w=400&h=300&fit=crop&auto=format":n.includes("dessert")||n.includes("sweet")||n.includes("cake")?"https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?w=400&h=300&fit=crop&auto=format":n.includes("drink")||n.includes("juice")||n.includes("coffee")||n.includes("tea")?"https://images.unsplash.com/photo-1544145945-f90425340c7e?w=400&h=300&fit=crop&auto=format":n.includes("phone")||n.includes("mobile")||n.includes("smartphone")?"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400&h=300&fit=crop&auto=format":n.includes("laptop")||n.includes("computer")?"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400&h=300&fit=crop&auto=format":n.includes("headphone")||n.includes("earphone")?"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=300&fit=crop&auto=format":n.includes("shirt")||n.includes("top")||n.includes("cloth")?"https://images.unsplash.com/photo-1445205170230-053b83016050?w=400&h=300&fit=crop&auto=format":n.includes("food")||n.includes("restaurant")||n.includes("meal")?"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400&h=300&fit=crop&auto=format":"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop&auto=format"};function ty(){const{user:e}=el(),{toast:t}=ft(),n=on(),[s,i]=b.useState("dashboard"),[a,o]=b.useState(!1),[l,c]=b.useState(null),{data:d,isLoading:h,error:m}=Le({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id],queryFn:async()=>{const D=await fetch(`/api/delivery-partners/user?userId=${e==null?void 0:e.id}`);if(!D.ok){if(D.status===404)return null;throw new Error("Failed to fetch partner data")}return D.json()},enabled:!!(e!=null&&e.id),retry:2});b.useEffect(()=>{d&&o(d.isAvailable)},[d]);const{data:f,isLoading:v}=Le({queryKey:["/api/delivery-partners/enhanced-stats",d==null?void 0:d.id],queryFn:async()=>{const D=await fetch(`/api/delivery-partners/${d==null?void 0:d.id}/enhanced-stats`);return D.ok?D.json():{todayDeliveries:8,todayEarnings:640,todayDistance:45.2,todayOnlineTime:420,weekDeliveries:47,weekEarnings:3760,weekDistance:312.8,weekAvgRating:4.8,monthDeliveries:195,monthEarnings:15600,monthDistance:1250.4,totalDeliveries:parseInt((d==null?void 0:d.totalDeliveries)||"0"),totalEarnings:parseFloat((d==null?void 0:d.totalEarnings)||"0"),totalDistance:2847.6,overallRating:parseFloat((d==null?void 0:d.rating)||"4.5"),successRate:97.8,activeDeliveries:2,pendingAcceptance:3,weeklyBonus:500,performanceBonus:200,fuelAllowance:150,cityRank:42,totalPartners:156,badges:["Top Performer","On-Time Delivery","Customer Favorite"]}},enabled:!!(d!=null&&d.id)}),{data:p=[],isLoading:x}=Le({queryKey:["/api/deliveries/partner",d==null?void 0:d.id],queryFn:async()=>{const D=await fetch(`/api/deliveries/partner/${d==null?void 0:d.id}`);return D.ok?D.json():[]},enabled:!!(d!=null&&d.id)}),{data:y=[],isLoading:w}=Le({queryKey:["/api/deliveries/active",e==null?void 0:e.id],queryFn:async()=>{const D=await fetch(`/api/deliveries/active/${e==null?void 0:e.id}`);return D.ok?D.json():[]},enabled:!!(e!=null&&e.id),refetchInterval:5e3}),{data:j=[],isLoading:N}=Le({queryKey:["/api/deliveries/available",d==null?void 0:d.id],queryFn:async()=>{const D=await fetch(`/api/deliveries/available?partnerId=${d==null?void 0:d.id}`);return D.ok?D.json():[{id:1,orderId:101,orderNumber:"SB001101",status:"pending_acceptance",customerName:"Priya Sharma",customerPhone:"+977-9841234567",pickupStoreName:"Family Restaurant",pickupStorePhone:"+977-9851234567",pickupAddress:"Main Road, Siraha",pickupLatitude:26.661,pickupLongitude:86.207,deliveryAddress:"Housing Colony, Siraha",deliveryLatitude:26.665,deliveryLongitude:86.212,deliveryFee:50,extraCharges:0,totalEarnings:50,paymentMethod:"COD",codAmount:450,orderValue:450,orderItems:[{name:"Dal Bhat Set",quantity:2,price:180,image:"/images/dal-bhat.jpg"},{name:"Chicken Curry",quantity:1,price:270,image:"/images/chicken-curry.jpg"}],estimatedDistance:3.2,estimatedTime:25,assignedAt:new Date().toISOString(),customerInstructions:"Please call before arriving. Blue gate house.",storeInstructions:"Order ready. Handle with care.",isLiveTracking:!1},{id:2,orderId:102,orderNumber:"SB001102",status:"pending_acceptance",customerName:"Rajesh Kumar",customerPhone:"+977-9812345678",pickupStoreName:"Siraha Electronics",pickupStorePhone:"+977-9823456789",pickupAddress:"Electronics Market, Siraha",pickupLatitude:26.659,pickupLongitude:86.205,deliveryAddress:"New Colony, Siraha",deliveryLatitude:26.668,deliveryLongitude:86.215,deliveryFee:30,extraCharges:10,totalEarnings:40,paymentMethod:"Online",codAmount:0,orderValue:2500,orderItems:[{name:"Samsung Mobile",quantity:1,price:2500,image:"/images/samsung-mobile.jpg"}],estimatedDistance:2.8,estimatedTime:20,assignedAt:new Date(Date.now()-3e5).toISOString(),customerInstructions:"Fragile item. Please handle carefully.",storeInstructions:"Check packaging before pickup.",isLiveTracking:!1}]},enabled:!!(d!=null&&d.id)}),{data:C=[],isLoading:P}=Le({queryKey:["/api/delivery-notifications",e==null?void 0:e.id],queryFn:async()=>{const D=await fetch(`/api/delivery-notifications/${e==null?void 0:e.id}`);return D.ok?D.json():[]},enabled:!!(e!=null&&e.id),refetchInterval:3e3}),k=Array.isArray(p)?p:[],_=Array.isArray(y)?y:[],O=Array.isArray(C)?C:[],M=k.filter(D=>D.status==="assigned");k.filter(D=>D.status==="delivered");const T=O.filter(D=>!D.isRead),I=pt({mutationFn:async D=>{const W=await fetch(`/api/delivery-partners/${d==null?void 0:d.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAvailable:D})});if(!W.ok)throw new Error("Failed to toggle status");return W.json()},onSuccess:()=>{o(!a),n.invalidateQueries({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id]}),t({title:a?"Going Offline":"Going Online",description:a?"You won't receive new orders":"You can now receive new orders"})}}),A=pt({mutationFn:async D=>{console.log("Attempting to accept delivery/order ID:",D),console.log("Partner data:",d);const W=await fetch(`/api/deliveries/${D}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({partnerId:(d==null?void 0:d.id)||1,deliveryPartnerId:(d==null?void 0:d.id)||1})});if(!W.ok){const U=await W.text();throw console.error("Accept delivery failed:",W.status,U),new Error(`Failed to accept delivery: ${U}`)}return W.json()},onSuccess:async(D,W)=>{console.log("Delivery accepted successfully:",D);try{const U=O.find(Q=>Q.orderId===W);U&&await fetch(`/api/notifications/${U.id}/read`,{method:"PUT",headers:{"Content-Type":"application/json"}})}catch(U){console.log("Failed to mark notification as read:",U)}n.invalidateQueries({queryKey:["/api/deliveries/available"]}),n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),n.invalidateQueries({queryKey:["/api/deliveries/active"]}),n.invalidateQueries({queryKey:["/api/delivery-notifications"]}),n.invalidateQueries({queryKey:["/api/notifications"]}),t({title:"Order Accepted",description:"You have successfully accepted this delivery order"})},onError:D=>{console.error("Accept delivery error:",D),t({title:"Error",description:D.message||"Failed to accept delivery order",variant:"destructive"})}}),V=pt({mutationFn:async({deliveryId:D,status:W})=>(await fetch(`/api/deliveries/${D}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:W,partnerId:d==null?void 0:d.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),n.invalidateQueries({queryKey:["/api/deliveries/active"]}),n.invalidateQueries({queryKey:["/api/deliveries/available"]}),t({title:"Status Updated",description:"Delivery status has been updated successfully."})},onError:()=>{t({title:"Error",description:"Failed to update delivery status.",variant:"destructive"})}});return h?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ct,{className:"h-16 w-16 text-gray-400 mx-auto mb-4 animate-pulse"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Loading Dashboard..."})]})}):d?r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 w-full overflow-x-hidden",children:[r.jsx("div",{className:"bg-white shadow-sm border-b w-full",children:r.jsx("div",{className:"w-full max-w-none px-2 xs:px-3 sm:px-4 lg:px-6 py-2 xs:py-3 sm:py-4",children:r.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-2 xs:gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 xs:gap-3 sm:gap-4 min-w-0 flex-1",children:[r.jsx("div",{className:"p-1.5 xs:p-2 sm:p-3 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex-shrink-0",children:r.jsx(Ct,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-6 sm:w-6 text-white"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h1",{className:"text-sm xs:text-base sm:text-lg lg:text-xl font-bold text-gray-800 truncate",children:"Partner Dashboard"}),r.jsx(ue,{variant:d.status==="approved"?"default":"secondary",className:"text-[8px] xs:text-[9px] sm:text-xs px-1 xs:px-2 py-0.5",children:d.status.charAt(0).toUpperCase()+d.status.slice(1)})]})]}),r.jsxs("div",{className:"flex flex-row items-center gap-2 xs:gap-3 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5 xs:gap-2",children:[r.jsx("span",{className:"text-[10px] xs:text-xs text-gray-600 font-medium",children:a?"Online":"Offline"}),r.jsx("button",{onClick:()=>I.mutate(!a),disabled:I.isPending,className:`relative inline-flex h-5 xs:h-6 w-9 xs:w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${a?"bg-green-500 focus:ring-green-500":"bg-gray-300 focus:ring-gray-300"} ${I.isPending?"opacity-50 cursor-not-allowed":""}`,children:r.jsx("span",{className:`inline-block h-3 xs:h-4 w-3 xs:w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-5 xs:translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"flex items-center gap-1 xs:gap-1.5",children:[r.jsx(Bt,{className:"h-3 w-3 xs:h-4 xs:w-4 text-yellow-500 fill-current"}),r.jsx("span",{className:"text-[10px] xs:text-xs font-semibold",children:d.rating||"4.5"})]})]})]})})}),r.jsx("div",{className:"w-full max-w-none px-1 xs:px-2 sm:px-3 lg:px-6 py-2 xs:py-3 sm:py-4 lg:py-6",children:r.jsxs(Ds,{value:s,onValueChange:i,className:"w-full",children:[r.jsxs(ws,{className:"grid grid-cols-7 mb-2 xs:mb-3 sm:mb-6 bg-white shadow-sm h-auto p-0.5 w-full rounded-xl",children:[r.jsx(at,{value:"dashboard",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-blue-50 data-[state=active]:text-blue-600 rounded-lg",title:"Dashboard",children:r.jsx(si,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(at,{value:"orders",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-orange-50 data-[state=active]:text-orange-600 rounded-lg",title:"Available Orders",children:r.jsx(Ye,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(at,{value:"active",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-green-50 data-[state=active]:text-green-600 rounded-lg",title:"Active Deliveries",children:r.jsx(e0,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(at,{value:"calendar",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-purple-50 data-[state=active]:text-purple-600 rounded-lg",title:"Calendar",children:r.jsx(ql,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(at,{value:"earnings",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-green-50 data-[state=active]:text-green-600 rounded-lg",title:"Earnings",children:r.jsx(YN,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(at,{value:"profile",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-indigo-50 data-[state=active]:text-indigo-600 rounded-lg",title:"Profile",children:r.jsx(Wr,{className:"h-5 w-5 xs:h-6 xs:w-6"})}),r.jsx(at,{value:"notifications",className:"flex items-center justify-center py-2 xs:py-2.5 px-1 relative h-auto min-h-[45px] xs:min-h-[50px] data-[state=active]:bg-red-50 data-[state=active]:text-red-600 rounded-lg",title:"Alerts",children:r.jsxs("div",{className:"relative",children:[r.jsx(sc,{className:"h-5 w-5 xs:h-6 xs:w-6"}),r.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 xs:w-2.5 xs:h-2.5 bg-red-500 rounded-full"})]})})]}),r.jsxs(Xe,{value:"dashboard",className:"space-y-2 xs:space-y-3 sm:space-y-4 lg:space-y-6",children:[r.jsx(K,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white border-0 shadow-lg",children:r.jsx(G,{className:"p-3 xs:p-4 sm:p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl xs:text-4xl sm:text-5xl font-bold",children:new Date().getDate()}),r.jsx("div",{className:"text-sm xs:text-base sm:text-lg font-medium opacity-90",children:new Date().toLocaleDateString("en-US",{weekday:"long"}).toUpperCase()}),r.jsx("div",{className:"text-xs xs:text-sm opacity-75 mt-1",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})})}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-1.5 xs:gap-2 sm:gap-3 lg:gap-4 w-full",children:[r.jsx(K,{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white border-0 shadow-lg",children:r.jsx(G,{className:"p-2 xs:p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5 xs:space-y-1",children:[r.jsx("p",{className:"text-emerald-100 text-[9px] xs:text-[10px] sm:text-sm font-medium leading-tight",children:"Today's Performance"}),r.jsxs("p",{className:"text-sm xs:text-base sm:text-xl lg:text-2xl font-bold",children:["",(f==null?void 0:f.todayEarnings)||0]}),r.jsxs("div",{className:"flex items-center gap-1 xs:gap-1.5 sm:gap-2 text-[7px] xs:text-[8px] sm:text-xs text-emerald-100",children:[r.jsx(Ye,{className:"h-2 w-2 xs:h-2.5 xs:w-2.5 sm:h-3 sm:w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.todayDeliveries)||0," orders"]}),r.jsx(xd,{className:"h-2 w-2 xs:h-2.5 xs:w-2.5 sm:h-3 sm:w-3"}),r.jsxs("span",{children:[Math.floor(((f==null?void 0:f.todayOnlineTime)||0)/60),"h ",((f==null?void 0:f.todayOnlineTime)||0)%60,"m"]})]})]}),r.jsx("div",{className:"bg-white/20 p-1 xs:p-1.5 sm:p-2 rounded-lg",children:r.jsx(wn,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6"})})]})})}),r.jsx(K,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0 shadow-lg",children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"This Week"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",(f==null?void 0:f.weekEarnings)||0]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-100",children:[r.jsx(n0,{className:"h-3 w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.weekDistance)||0,"km"]}),r.jsx(Bt,{className:"h-3 w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.weekAvgRating)||4.5,"/5.0"]})]})]}),r.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:r.jsx(ql,{className:"h-6 w-6"})})]})})}),r.jsx(K,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0 shadow-lg",children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Monthly Progress"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",(f==null?void 0:f.monthEarnings)||0]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-100",children:[r.jsx(Ct,{className:"h-3 w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.monthDeliveries)||0," completed"]}),r.jsx(_t,{className:"h-3 w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.monthDistance)||0,"km"]})]})]}),r.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:r.jsx(e0,{className:"h-6 w-6"})})]})})}),r.jsx(K,{className:"bg-gradient-to-br from-amber-500 to-amber-600 text-white border-0 shadow-lg",children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-amber-100 text-sm font-medium",children:"Performance"}),r.jsxs("p",{className:"text-2xl font-bold",children:[(f==null?void 0:f.successRate)||95,"%"]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-amber-100",children:[r.jsx(Bt,{className:"h-3 w-3"}),r.jsxs("span",{children:[(f==null?void 0:f.overallRating)||4.5,"/5.0 rating"]}),r.jsx(Ni,{className:"h-3 w-3"}),r.jsxs("span",{children:["#",(f==null?void 0:f.cityRank)||5," in city"]})]})]}),r.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:r.jsx(yt,{className:"h-6 w-6"})})]})})})]}),r.jsxs(K,{className:"border-0 shadow-lg bg-gradient-to-r from-gray-50 to-gray-100",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2 text-gray-800",children:[r.jsx(YN,{className:"h-5 w-5 text-green-600"}),"Incentives & Bonuses (This Week)"]})}),r.jsx(G,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-white p-4 rounded-lg border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Weekly Target Bonus"}),r.jsxs("p",{className:"text-xl font-bold text-green-600",children:["",(f==null?void 0:f.weeklyBonus)||250]}),r.jsx("p",{className:"text-xs text-gray-500",children:"35+ deliveries"})]}),r.jsx(Ni,{className:"h-8 w-8 text-green-500"})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Performance Bonus"}),r.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["",(f==null?void 0:f.performanceBonus)||150]}),r.jsx("p",{className:"text-xs text-gray-500",children:"4.5+ rating"})]}),r.jsx(Bt,{className:"h-8 w-8 text-blue-500"})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Fuel Allowance"}),r.jsxs("p",{className:"text-xl font-bold text-orange-600",children:["",(f==null?void 0:f.fuelAllowance)||120]}),r.jsx("p",{className:"text-xs text-gray-500",children:"8 per delivery"})]}),r.jsx(_t,{className:"h-8 w-8 text-orange-500"})]})})]})})]}),r.jsxs(K,{className:"border-0 shadow-lg",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(yt,{className:"h-5 w-5 text-purple-600"}),"Achievement Badges"]})}),r.jsx(G,{children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[((f==null?void 0:f.badges)||[]).map((D,W)=>r.jsxs(ue,{variant:"outline",className:"px-3 py-1 text-sm bg-purple-50 border-purple-200 text-purple-700",children:[r.jsx(Bt,{className:"h-3 w-3 mr-1"}),D]},W)),(!(f!=null&&f.badges)||f.badges.length===0)&&r.jsx("p",{className:"text-gray-500 text-sm",children:"Complete more deliveries to earn achievement badges!"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-5 w-5"}),"Performance This Week"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Deliveries Completed"}),r.jsx("span",{className:"font-semibold",children:(f==null?void 0:f.weekDeliveries)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total Earnings"}),r.jsxs("span",{className:"font-semibold",children:["",(f==null?void 0:f.weekEarnings)||0]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Distance Covered"}),r.jsxs("span",{className:"font-semibold",children:[(f==null?void 0:f.weekDistance)||0," km"]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Average Rating"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Bt,{className:"h-4 w-4 text-yellow-500 fill-current"}),r.jsx("span",{className:"font-semibold",children:(f==null?void 0:f.weekAvgRating)||0})]})]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(YN,{className:"h-5 w-5"}),"Earnings Breakdown"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Base Delivery Fees"}),r.jsxs("span",{className:"font-semibold",children:["",((f==null?void 0:f.weekEarnings)||0)-((f==null?void 0:f.weeklyBonus)||0)-((f==null?void 0:f.performanceBonus)||0)]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Weekly Bonus"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",(f==null?void 0:f.weeklyBonus)||0]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Performance Bonus"}),r.jsxs("span",{className:"font-semibold text-blue-600",children:["",(f==null?void 0:f.performanceBonus)||0]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Fuel Allowance"}),r.jsxs("span",{className:"font-semibold text-purple-600",children:["",(f==null?void 0:f.fuelAllowance)||0]})]}),r.jsx("div",{className:"border-t pt-2",children:r.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[r.jsx("span",{children:"Total This Week"}),r.jsxs("span",{className:"text-green-600",children:["",(f==null?void 0:f.weekEarnings)||0]})]})})]})]})]}),(f==null?void 0:f.badges)&&f.badges.length>0&&r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Bt,{className:"h-5 w-5"}),"Achievement Badges"]})}),r.jsx(G,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:f.badges.map((D,W)=>r.jsx(ue,{variant:"secondary",className:"px-3 py-1",children:D},W))})})]})]}),r.jsxs(Xe,{value:"orders",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Available Orders"}),r.jsxs(ue,{variant:"outline",children:[j.length," orders available"]})]}),r.jsxs("div",{className:"space-y-4",children:[j.map(D=>{var W,U,Q,q,B;return r.jsx(K,{className:"border-l-4 border-l-orange-500 shadow-lg",children:r.jsxs(G,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-red-500 rounded-lg flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:D.pickupStoreName?D.pickupStoreName.charAt(0):"S"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h3",{className:"font-bold text-lg",children:["Order #",D.orderNumber||D.orderId]}),r.jsx(ue,{variant:D.paymentMethod==="COD"?"destructive":"default",children:D.paymentMethod||"Prepaid"})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ye,{className:"h-3 w-3"}),((W=D.orderItems)==null?void 0:W.length)||1," items"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(_t,{className:"h-3 w-3"}),D.estimatedDistance||"2.5"," km"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(xd,{className:"h-3 w-3"}),D.estimatedTime||"15"," mins"]})]})]}),r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:D.customerName?D.customerName.charAt(0):"C"})]}),D.orderItems&&D.orderItems.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Order Items:"}),r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:D.orderItems.map((z,H)=>r.jsxs("div",{className:"flex-shrink-0 bg-gray-50 rounded-lg p-2 min-w-[120px]",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg mb-2 flex items-center justify-center",children:r.jsx("img",{src:e$(z.image,z.name),alt:z.name,className:"w-full h-full object-cover rounded-lg",onError:X=>{const ge=X.target;ge.src=e$(null,z.name)}})}),r.jsx("p",{className:"text-xs font-medium truncate",children:z.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",z.quantity]}),r.jsxs("p",{className:"text-xs font-semibold text-green-600",children:["",z.price]})]},H))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:r.jsx(Re,{className:"h-3 w-3 text-white"})}),r.jsx("h4",{className:"font-medium text-green-700",children:"Pickup from"})]}),r.jsx("p",{className:"font-semibold text-sm",children:D.pickupStoreName}),r.jsx("p",{className:"text-xs text-gray-600 mb-2",children:D.pickupAddress}),r.jsx("p",{className:"text-xs text-gray-500",children:D.pickupStorePhone}),D.pickupLatitude&&D.pickupLongitude&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsxs($,{size:"sm",variant:"outline",className:"text-xs px-2 py-1 h-auto",onClick:()=>{const z=`https://www.google.com/maps/dir//${D.pickupLatitude},${D.pickupLongitude}`;window.open(z,"_blank")},children:[r.jsx(_t,{className:"h-3 w-3 mr-1"}),"Navigate"]}),r.jsxs("span",{className:"text-xs text-gray-500",children:[" ",(U=D.pickupLatitude)==null?void 0:U.toFixed(4),", ",(Q=D.pickupLongitude)==null?void 0:Q.toFixed(4)]})]})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx(Re,{className:"h-3 w-3 text-white"})}),r.jsx("h4",{className:"font-medium text-blue-700",children:"Deliver to"})]}),r.jsx("p",{className:"font-semibold text-sm",children:D.customerName}),r.jsx("p",{className:"text-xs text-gray-600 mb-2",children:D.deliveryAddress}),r.jsx("p",{className:"text-xs text-gray-500",children:D.customerPhone}),D.deliveryLatitude&&D.deliveryLongitude&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsxs($,{size:"sm",variant:"outline",className:"text-xs px-2 py-1 h-auto",onClick:()=>{const z=`https://www.google.com/maps/dir//${D.deliveryLatitude},${D.deliveryLongitude}`;window.open(z,"_blank")},children:[r.jsx(_t,{className:"h-3 w-3 mr-1"}),"Navigate"]}),r.jsxs("span",{className:"text-xs text-gray-500",children:[" ",(q=D.deliveryLatitude)==null?void 0:q.toFixed(4),", ",(B=D.deliveryLongitude)==null?void 0:B.toFixed(4)]})]}),D.customerInstructions&&r.jsxs("p",{className:"text-xs text-orange-600 italic mt-2",children:['" ',D.customerInstructions,'"']})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-3 mb-3",children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600",children:"Delivery Fee"}),r.jsxs("p",{className:"font-bold text-green-600",children:["",D.deliveryFee||D.totalEarnings]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600",children:"Order Value"}),r.jsxs("p",{className:"font-bold",children:["",D.orderValue]})]}),D.codAmount>0&&r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600",children:"Collect COD"}),r.jsxs("p",{className:"font-bold text-red-600",children:["",D.codAmount]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600",children:"Distance"}),r.jsxs("p",{className:"font-bold text-purple-600",children:[D.estimatedDistance||"2.5"," km"]})]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",onClick:()=>A.mutate(D.id),disabled:A.isPending,children:A.isPending?"Accepting...":"Accept Delivery Order"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs($,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{if(D.pickupLatitude&&D.pickupLongitude)window.open(`https://www.google.com/maps/dir/?api=1&destination=${D.pickupLatitude},${D.pickupLongitude}`);else{const z=encodeURIComponent(D.pickupAddress);window.open(`https://www.google.com/maps/search/${z}`,"_blank")}},children:[r.jsx(_t,{className:"h-3 w-3 mr-1"}),"Store"]}),r.jsxs($,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{if(D.deliveryLatitude&&D.deliveryLongitude)window.open(`https://www.google.com/maps/dir/?api=1&destination=${D.deliveryLatitude},${D.deliveryLongitude}`);else{const z=encodeURIComponent(D.deliveryAddress);window.open(`https://www.google.com/maps/search/${z}`,"_blank")}},children:[r.jsx(_t,{className:"h-3 w-3 mr-1"}),"Customer"]})]}),r.jsxs($,{variant:"outline",size:"sm",className:"w-full",onClick:()=>c(D),children:[r.jsx(hs,{className:"h-4 w-4 mr-1"}),"View Details"]}),D.storeInstructions&&r.jsx("div",{className:"text-xs bg-yellow-50 p-2 rounded border-l-2 border-yellow-300",children:r.jsxs("p",{className:"text-yellow-800",children:[r.jsx("strong",{children:"Store Note:"})," ",D.storeInstructions]})})]})]})},D.id)}),j.length===0&&r.jsx(K,{children:r.jsxs(G,{className:"p-12 text-center",children:[r.jsx(Ye,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Orders Available"}),r.jsx("p",{className:"text-gray-500",children:"New delivery orders will appear here when available"})]})})]})]}),r.jsxs(Xe,{value:"active",className:"space-y-2 xs:space-y-3 sm:space-y-4 lg:space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg xs:text-xl sm:text-2xl font-bold",children:"Active Deliveries"}),r.jsxs(ue,{variant:"outline",className:"text-xs xs:text-sm",children:[_.length+M.length," active"]})]}),w?r.jsx(K,{children:r.jsxs(G,{className:"p-6 xs:p-8 sm:p-12 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 xs:h-12 xs:w-12 sm:h-16 sm:w-16 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Loading active deliveries..."})]})}):_.length===0&&M.length===0?r.jsx(K,{children:r.jsxs(G,{className:"p-6 xs:p-8 sm:p-12 text-center",children:[r.jsx(n0,{className:"h-8 w-8 xs:h-12 xs:w-12 sm:h-16 sm:w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-base xs:text-lg font-medium text-gray-900 mb-2",children:"No Active Deliveries"}),r.jsx("p",{className:"text-sm xs:text-base text-gray-500",children:"Accept an order to start tracking your deliveries"})]})}):r.jsxs("div",{className:"space-y-2 xs:space-y-3 sm:space-y-4",children:[M.map(D=>r.jsx(K,{className:"border-l-4 border-l-orange-500",children:r.jsx(G,{className:"p-3 xs:p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-start justify-between gap-2 xs:gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("h3",{className:"text-sm xs:text-base font-semibold",children:["Order #",D.orderId]}),r.jsx(ue,{variant:"secondary",className:"text-[8px] xs:text-[9px] sm:text-xs",children:"Pending Start"})]}),r.jsxs("div",{className:"space-y-1 xs:space-y-2 text-xs xs:text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[r.jsx(Wr,{className:"h-3 w-3 xs:h-4 xs:w-4 text-gray-500 flex-shrink-0"}),r.jsx("span",{className:"font-medium truncate",children:D.customerName})]}),r.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[r.jsx(Re,{className:"h-3 w-3 xs:h-4 xs:w-4 text-gray-500 flex-shrink-0"}),r.jsx("span",{className:"text-gray-600 truncate",children:D.deliveryAddress})]}),r.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[r.jsx(Qr,{className:"h-3 w-3 xs:h-4 xs:w-4 text-green-600 flex-shrink-0"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",D.deliveryFee]})]})]})]}),r.jsxs("div",{className:"flex flex-col gap-1 xs:gap-2 flex-shrink-0",children:[r.jsx($,{size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",onClick:()=>V.mutate({deliveryId:D.id,status:"en_route_pickup"}),disabled:V.isPending,children:"Start Pickup"}),r.jsx($,{variant:"outline",size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",children:"View Details"})]})]})})},D.id)),_.map(D=>r.jsx(K,{className:"border-l-4 border-l-green-500",children:r.jsx(G,{className:"p-3 xs:p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-start justify-between gap-2 xs:gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("h3",{className:"text-sm xs:text-base font-semibold",children:["Order #",D.orderId]}),r.jsx(ue,{variant:"default",className:"text-[8px] xs:text-[9px] sm:text-xs bg-green-500",children:D.status==="en_route_pickup"?"Going to Pickup":D.status==="picked_up"?"Picked Up":D.status==="en_route_delivery"?"Delivering":"In Progress"})]}),r.jsxs("div",{className:"space-y-1 xs:space-y-2 text-xs xs:text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[r.jsx(Wr,{className:"h-3 w-3 xs:h-4 xs:w-4 text-gray-500 flex-shrink-0"}),r.jsx("span",{className:"font-medium truncate",children:D.customerName})]}),r.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[r.jsx(Re,{className:"h-3 w-3 xs:h-4 xs:w-4 text-gray-500 flex-shrink-0"}),r.jsx("span",{className:"text-gray-600 truncate",children:D.deliveryAddress})]}),r.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[r.jsx(xd,{className:"h-3 w-3 xs:h-4 xs:w-4 text-blue-600 flex-shrink-0"}),r.jsxs("span",{className:"text-blue-600",children:["ETA: ",D.estimatedTime||15," mins"]})]})]})]}),r.jsxs("div",{className:"flex flex-col gap-1 xs:gap-2 flex-shrink-0",children:[D.status==="en_route_pickup"&&r.jsx($,{size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",onClick:()=>V.mutate({deliveryId:D.id,status:"picked_up"}),disabled:V.isPending,children:"Mark Picked Up"}),D.status==="picked_up"&&r.jsx($,{size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",onClick:()=>V.mutate({deliveryId:D.id,status:"en_route_delivery"}),disabled:V.isPending,children:"Start Delivery"}),D.status==="en_route_delivery"&&r.jsx($,{size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",onClick:()=>V.mutate({deliveryId:D.id,status:"delivered"}),disabled:V.isPending,children:"Mark Delivered"}),r.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[r.jsxs($,{variant:"outline",size:"sm",className:"text-[8px] xs:text-[9px] sm:text-[10px] px-1 xs:px-2 py-0.5 h-auto",onClick:()=>{if(D.storeLatitude&&D.storeLongitude)window.open(`https://www.google.com/maps/dir/?api=1&destination=${D.storeLatitude},${D.storeLongitude}`);else if(D.pickupAddress){const W=encodeURIComponent(D.pickupAddress);window.open(`https://www.google.com/maps/search/${W}`,"_blank")}},children:[r.jsx(_t,{className:"h-2 w-2 xs:h-3 xs:w-3 mr-0.5"}),"Store"]}),r.jsxs($,{variant:"outline",size:"sm",className:"text-[8px] xs:text-[9px] sm:text-[10px] px-1 xs:px-2 py-0.5 h-auto",onClick:()=>{if(D.deliveryLatitude&&D.deliveryLongitude)window.open(`https://www.google.com/maps/dir/?api=1&destination=${D.deliveryLatitude},${D.deliveryLongitude}`);else if(D.deliveryAddress){const W=encodeURIComponent(D.deliveryAddress);window.open(`https://www.google.com/maps/search/${W}`,"_blank")}},children:[r.jsx(_t,{className:"h-2 w-2 xs:h-3 xs:w-3 mr-0.5"}),"Customer"]})]}),r.jsx($,{variant:"outline",size:"sm",className:"text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",children:"Track Live"})]})]})})},D.id))]})]}),r.jsxs(Xe,{value:"earnings",className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Earnings Overview"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"This Month"})}),r.jsxs(G,{children:[r.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",(f==null?void 0:f.monthEarnings)||0]}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(f==null?void 0:f.monthDeliveries)||0," deliveries"]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"Total Earned"})}),r.jsxs(G,{children:[r.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:["",(f==null?void 0:f.totalEarnings)||0]}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(f==null?void 0:f.totalDeliveries)||0," deliveries"]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-sm font-medium text-gray-600",children:"Average per Delivery"})}),r.jsxs(G,{children:[r.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["",f!=null&&f.totalDeliveries?Math.round((f.totalEarnings||0)/f.totalDeliveries):0]}),r.jsx("p",{className:"text-sm text-gray-500",children:"per order"})]})]})]})]}),r.jsx(Xe,{value:"calendar",className:"space-y-6",children:r.jsxs(K,{className:"border-0 shadow-lg",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2 text-purple-600",children:[r.jsx(ql,{className:"h-5 w-5"}),"Delivery Calendar"]})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"text-center",children:r.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),r.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(D=>r.jsx("div",{className:"text-center font-medium text-gray-600 py-2",children:D},D)),Array.from({length:35},(D,W)=>{const U=new Date,Q=new Date(U.getFullYear(),U.getMonth(),1),q=new Date(Q);q.setDate(q.getDate()-Q.getDay()+W);const B=q.getMonth()===U.getMonth(),z=q.toDateString()===U.toDateString(),H=Math.random()>.7;return r.jsxs("div",{className:`
                            aspect-square flex flex-col items-center justify-center p-1 rounded-lg relative
                            ${B?"text-gray-800":"text-gray-400"}
                            ${z?"bg-red-500 text-white font-bold":"hover:bg-gray-100"}
                            ${H&&B?"border-2 border-green-300":""}
                          `,children:[r.jsx("span",{className:"text-xs",children:q.getDate()}),H&&B&&r.jsx("div",{className:"absolute bottom-1 w-1 h-1 bg-green-500 rounded-full"})]},W)})]}),r.jsxs(K,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-0",children:[r.jsx(re,{children:r.jsx(ne,{className:"text-lg",children:"Today's Schedule"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:"Morning Shift"}),r.jsx("p",{className:"text-sm text-gray-600",children:"9:00 AM - 2:00 PM"})]}),r.jsx(ue,{variant:"outline",className:"bg-green-100 text-green-800",children:"Active"})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg",children:[r.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:"Evening Shift"}),r.jsx("p",{className:"text-sm text-gray-600",children:"6:00 PM - 11:00 PM"})]}),r.jsx(ue,{variant:"outline",className:"bg-orange-100 text-orange-800",children:"Scheduled"})]})]})})]})]})})]})}),r.jsxs(Xe,{value:"profile",className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Partner Profile"}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Personal Information"})}),r.jsx(G,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Vehicle Type"}),r.jsx("p",{className:"font-semibold",children:d.vehicleType})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Vehicle Number"}),r.jsx("p",{className:"font-semibold",children:d.vehicleNumber})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Driving License"}),r.jsx("p",{className:"font-semibold",children:d.drivingLicense})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Emergency Contact"}),r.jsx("p",{className:"font-semibold",children:d.emergencyContact})]})]})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Delivery Areas"})}),r.jsx(G,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:d.deliveryAreas&&d.deliveryAreas.length>0?d.deliveryAreas.map((D,W)=>r.jsx(ue,{variant:"outline",children:D},W)):r.jsx("p",{className:"text-gray-500",children:"No delivery areas specified"})})})]})]}),r.jsxs(Xe,{value:"notifications",className:"space-y-2 xs:space-y-3 sm:space-y-4 lg:space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg xs:text-xl sm:text-2xl font-bold",children:"Alerts & Notifications"}),r.jsxs(ue,{variant:"outline",className:"text-xs xs:text-sm",children:[T.length," unread"]})]}),P?r.jsx(K,{children:r.jsxs(G,{className:"p-6 xs:p-8 sm:p-12 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 xs:h-12 xs:w-12 sm:h-16 sm:w-16 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Loading notifications..."})]})}):O.length===0?r.jsx(K,{children:r.jsxs(G,{className:"p-6 xs:p-8 sm:p-12 text-center",children:[r.jsx(Qt,{className:"h-8 w-8 xs:h-12 xs:w-12 sm:h-16 sm:w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-base xs:text-lg font-medium text-gray-900 mb-2",children:"No New Alerts"}),r.jsx("p",{className:"text-sm xs:text-base text-gray-500",children:"Delivery notifications and updates will appear here"})]})}):r.jsx("div",{className:"space-y-2 xs:space-y-3 sm:space-y-4",children:O.map(D=>r.jsx(K,{className:`transition-all hover:shadow-md ${D.isRead?"":"border-l-4 border-l-blue-500 bg-blue-50/30"}`,children:r.jsx(G,{className:"p-3 xs:p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-start gap-2 xs:gap-3 sm:gap-4",children:[r.jsx("div",{className:`p-1.5 xs:p-2 sm:p-3 rounded-full flex-shrink-0 ${D.type==="delivery_assignment"?"bg-orange-100 text-orange-600":D.type==="order_update"?"bg-blue-100 text-blue-600":D.type==="payment"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:D.type==="delivery_assignment"?r.jsx(Ye,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5"}):D.type==="order_update"?r.jsx(yt,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5"}):D.type==="payment"?r.jsx(Qr,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5"}):r.jsx(Qt,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h3",{className:"text-sm xs:text-base font-semibold text-gray-900 truncate",children:D.title}),r.jsx("p",{className:"text-xs xs:text-sm text-gray-600 mt-0.5 xs:mt-1 line-clamp-2",children:D.message}),D.orderId&&r.jsxs("div",{className:"space-y-1 xs:space-y-2 mt-1 xs:mt-2",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsxs(ue,{variant:"outline",className:"text-[8px] xs:text-[9px] sm:text-xs px-1 xs:px-2 py-0.5",children:["Order #",D.orderId]}),D.data&&(()=>{var W;try{const U=JSON.parse(D.data);return r.jsxs(r.Fragment,{children:[U.deliveryFee&&r.jsxs(ue,{variant:"secondary",className:"text-[8px] xs:text-[9px] sm:text-xs px-1 xs:px-2 py-0.5",children:["",U.deliveryFee," earnings"]}),((W=U.deliveryInfo)==null?void 0:W.estimatedDistance)&&r.jsxs(ue,{variant:"secondary",className:"text-[8px] xs:text-[9px] sm:text-xs px-1 xs:px-2 py-0.5",children:[" ",U.deliveryInfo.estimatedDistance]}),U.hasCompleteLocationData&&r.jsx(ue,{variant:"default",className:"text-[8px] xs:text-[9px] sm:text-xs px-1 xs:px-2 py-0.5 bg-green-100 text-green-700",children:" GPS Available"})]})}catch{return null}})()]}),D.data&&(()=>{try{const W=JSON.parse(D.data);return W.pickupLocation||W.deliveryLocation?r.jsxs("div",{className:"grid grid-cols-1 gap-1 xs:gap-2 text-[9px] xs:text-[10px] sm:text-xs text-gray-600",children:[W.pickupLocation&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Re,{className:"h-2.5 w-2.5 xs:h-3 xs:w-3 text-orange-500 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:[" ",W.pickupLocation.name||"Pickup",": ",W.pickupLocation.address]}),W.pickupLocation.googleMapsLink&&r.jsx("a",{href:W.pickupLocation.googleMapsLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 ml-1",children:""})]}),W.deliveryLocation&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Re,{className:"h-2.5 w-2.5 xs:h-3 xs:w-3 text-green-500 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:[" Delivery: ",W.deliveryLocation.address]}),W.deliveryLocation.googleMapsLink&&r.jsx("a",{href:W.deliveryLocation.googleMapsLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 ml-1",children:""})]}),W.orderDetails&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[r.jsxs("span",{children:[" ",W.orderDetails.customerName]}),W.orderDetails.customerPhone&&r.jsxs("span",{children:[" ",W.orderDetails.customerPhone]}),W.orderDetails.totalAmount&&r.jsxs("span",{children:[" ",W.orderDetails.totalAmount]})]})]}):null}catch{return null}})()]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1 xs:gap-2 flex-shrink-0",children:[r.jsx("span",{className:"text-[9px] xs:text-[10px] sm:text-xs text-gray-500",children:new Date(D.createdAt).toLocaleDateString()}),!D.isRead&&r.jsx("div",{className:"w-2 h-2 xs:w-2.5 xs:h-2.5 bg-blue-500 rounded-full"})]})]}),D.type==="delivery_assignment"&&D.orderId&&r.jsxs("div",{className:"space-y-1 xs:space-y-2 mt-2 xs:mt-3",children:[r.jsx($,{className:"w-full text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",onClick:()=>{const W=D.orderId;console.log("Notification structure:",D),console.log("Accepting delivery for order:",W),console.log("Notification ID:",D.id),A.mutate(W)},disabled:A.isPending,children:A.isPending?"Accepting...":"Accept Order"}),D.data&&(()=>{try{const W=JSON.parse(D.data);return W.pickupLocation||W.deliveryLocation?r.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[W.pickupLocation&&r.jsxs($,{variant:"outline",size:"sm",className:"text-[8px] xs:text-[9px] sm:text-[10px] px-1 xs:px-2 py-0.5 h-auto",onClick:()=>{if(W.pickupLocation.googleMapsLink)window.open(W.pickupLocation.googleMapsLink,"_blank");else if(W.pickupLocation.address){const U=encodeURIComponent(W.pickupLocation.address);window.open(`https://www.google.com/maps/search/${U}`,"_blank")}},children:[r.jsx(_t,{className:"h-2 w-2 xs:h-2.5 xs:w-2.5 mr-0.5"}),"Store"]}),W.deliveryLocation&&r.jsxs($,{variant:"outline",size:"sm",className:"text-[8px] xs:text-[9px] sm:text-[10px] px-1 xs:px-2 py-0.5 h-auto",onClick:()=>{if(W.deliveryLocation.googleMapsLink)window.open(W.deliveryLocation.googleMapsLink,"_blank");else if(W.deliveryLocation.address){const U=encodeURIComponent(W.deliveryLocation.address);window.open(`https://www.google.com/maps/search/${U}`,"_blank")}},children:[r.jsx(_t,{className:"h-2 w-2 xs:h-2.5 xs:w-2.5 mr-0.5"}),"Customer"]})]}):r.jsx($,{variant:"outline",size:"sm",className:"w-full text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",children:"View Details"})}catch{return r.jsx($,{variant:"outline",size:"sm",className:"w-full text-[9px] xs:text-[10px] sm:text-xs px-2 xs:px-3 py-1 h-auto",children:"View Details"})}})()]})]})]})})},D.id))})]})]})}),l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs(K,{className:"w-full max-w-2xl max-h-[90vh] overflow-auto",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between",children:[r.jsxs(ne,{children:["Order Details - #",l.orderNumber]}),r.jsx($,{variant:"ghost",size:"sm",onClick:()=>c(null),children:""})]}),r.jsxs(G,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Order Items"}),r.jsx("div",{className:"space-y-2",children:l.orderItems.map((D,W)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:D.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",D.quantity]})]}),r.jsxs("p",{className:"font-semibold",children:["",D.price]})]},W))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Payment Details"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Order Value:"}),r.jsxs("span",{children:["",l.orderValue]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Delivery Fee:"}),r.jsxs("span",{children:["",l.deliveryFee]})]}),l.extraCharges>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Extra Charges:"}),r.jsxs("span",{children:["",l.extraCharges]})]}),r.jsxs("div",{className:"flex justify-between font-semibold text-green-600 border-t pt-2",children:[r.jsx("span",{children:"Your Earnings:"}),r.jsxs("span",{children:["",l.totalEarnings]})]}),l.codAmount>0&&r.jsxs("div",{className:"flex justify-between font-semibold text-red-600",children:[r.jsx("span",{children:"Collect from Customer:"}),r.jsxs("span",{children:["",l.codAmount]})]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx($,{className:"flex-1",onClick:()=>A.mutate(l.id),disabled:A.isPending,children:A.isPending?"Accepting...":"Accept This Order"}),r.jsx($,{variant:"outline",onClick:()=>c(null),children:"Close"})]})]})]})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(K,{className:"w-full max-w-md",children:r.jsxs(G,{className:"p-8 text-center",children:[r.jsx(Nr,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Delivery Partner Account Required"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"You need to register as a delivery partner to access this dashboard."}),r.jsx($,{onClick:()=>window.location.href="/delivery-partner-signup",children:"Register as Delivery Partner"})]})})})}function t$({deliveryPartnerId:e}){const{toast:t}=ft(),n=on();b.useRef(null);const[s,i]=b.useState(null),[a,o]=b.useState(0),{data:l=[],isLoading:c}=Le({queryKey:["/api/notifications/user",e],queryFn:async()=>{const m=await fetch(`/api/notifications/user/${e}`);if(!m.ok)throw new Error("Failed to fetch notifications");const f=await m.json();return console.log("User notifications:",f),f.filter(v=>{console.log("Checking notification:",v);try{if(v.type==="delivery"&&!v.isRead)return!0}catch(p){console.log("Error filtering notification:",p)}return!1})},enabled:!!e,refetchInterval:3e3}),d=pt({mutationFn:async({orderId:m,notificationId:f})=>{const v=await fetch("/api/delivery/accept-assignment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryPartnerId:e,orderId:m,notificationId:f})});if(!v.ok){const p=await v.json();throw new Error(p.error)}return v.json()},onSuccess:(m,f)=>{t({title:"Order Accepted!",description:`You have successfully accepted order #${f.orderId}`}),n.invalidateQueries({queryKey:["/api/notifications/user"]}),n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),i(null)},onError:m=>{t({title:"Failed to Accept Order",description:m.message,variant:"destructive"}),i(null)}});pt({mutationFn:async m=>{const f=await fetch(`/api/delivery-notifications/${m}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryPartnerId:e})});if(!f.ok){const v=await f.json();throw new Error(v.error)}return f.json()},onSuccess:(m,f)=>{t({title:"Order Rejected",description:`You have rejected order #${f}`}),n.invalidateQueries({queryKey:["/api/delivery-notifications"]})},onError:m=>{t({title:"Failed to Reject Order",description:m.message,variant:"destructive"})}}),b.useEffect(()=>{if(l.length>a&&a>0){try{console.log("Playing notification sound for new delivery orders...");const m=new Audio("/notification.mp3");m.volume=.7,m.addEventListener("canplaythrough",()=>{console.log("Delivery notification audio ready")}),m.addEventListener("error",f=>{console.error("Delivery notification audio error:",f)}),m.play().then(()=>{console.log("Delivery notification sound played successfully")}).catch(f=>{console.log("Could not play delivery notification sound:",f),Notification.permission==="granted"&&new Notification("New Delivery Order Available!",{body:"Check your dashboard for new delivery opportunities",icon:"/favicon.ico"})})}catch{console.log("Could not play notification sound")}t({title:" New Orders Available!",description:`${l.length-a} new delivery order${l.length-a>1?"s":""} available`,duration:5e3})}o(l.length)},[l.length,a,t]);const h=(m,f)=>{i(m),d.mutate({orderId:m,notificationId:f})};return c?r.jsx("div",{className:"space-y-4",children:[1,2,3].map(m=>r.jsx(K,{className:"animate-pulse",children:r.jsxs(G,{className:"p-6",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})},m))}):l.length===0?r.jsxs(K,{className:"shadow-lg border-0 h-full max-w-full overflow-hidden",children:[r.jsx(re,{className:"px-2 sm:px-6 py-2 sm:py-4",children:r.jsxs(ne,{className:"flex items-center gap-2 text-sm sm:text-xl",children:[r.jsx(Qt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-500 flex-shrink-0"}),r.jsxs("span",{className:"text-xs sm:text-base truncate",children:["New Assignments (",l.length,")"]})]})}),r.jsx(G,{className:"space-y-2 sm:space-y-4 max-h-64 sm:max-h-96 overflow-y-auto px-2 sm:px-6 pb-2 sm:pb-6",children:r.jsxs("div",{className:"text-center py-4 sm:py-8",children:[r.jsx(Qt,{className:"h-8 w-8 sm:h-12 sm:w-12 text-gray-300 mx-auto mb-2 sm:mb-4"}),r.jsx("p",{className:"text-xs sm:text-base text-gray-500",children:"No new assignments"})]})})]}):r.jsxs(K,{className:"shadow-lg border-0 h-full",children:[r.jsx(re,{className:"px-3 sm:px-6 py-3 sm:py-4",children:r.jsxs(ne,{className:"flex items-center gap-2 text-base sm:text-xl",children:[r.jsx(Qt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-500"}),r.jsxs("span",{className:"text-sm sm:text-base",children:["New Assignments (",l.length,")"]})]})}),r.jsx(G,{className:"space-y-2 sm:space-y-4 max-h-64 sm:max-h-96 overflow-y-auto px-2 sm:px-6 pb-2 sm:pb-6",children:l.map(m=>{var v;let f;try{f=m.data?JSON.parse(m.data):{}}catch(p){console.error("Failed to parse notification data:",p),f={}}return r.jsx(K,{className:"border border-orange-200 bg-orange-50 shadow-sm hover:shadow-md transition-shadow duration-200 w-full overflow-hidden delivery-notification-card",children:r.jsx(G,{className:"p-2 sm:p-4",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx("div",{className:"flex items-start justify-between gap-2 w-full",children:r.jsxs("div",{className:"min-w-0 flex-1 w-full",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[r.jsx(ue,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs px-2 py-0.5 flex-shrink-0",children:"New"}),r.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:new Date(m.created_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})})]}),r.jsx("h3",{className:"font-semibold text-sm sm:text-base text-gray-900 mb-1 break-words",children:"New Delivery Assignment"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-2 break-words",children:m.message||`You have been assigned Order #${m.orderId||"N/A"}`})]})}),r.jsx("div",{className:"bg-white rounded-lg p-2 sm:p-3 border border-gray-200 w-full overflow-hidden",children:r.jsxs("div",{className:"space-y-2 w-full",children:[r.jsxs("div",{className:"flex items-start gap-2 w-full",children:[r.jsx(Ye,{className:"h-3 w-3 sm:h-4 sm:w-4 text-orange-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1 w-full overflow-hidden",children:[r.jsxs("p",{className:"font-medium text-xs sm:text-sm text-gray-900 break-words overflow-hidden",children:["Store: ",((v=f.storeDetails)==null?void 0:v.name)||"SS Book Store"]}),r.jsx("p",{className:"text-xs text-gray-600 break-all overflow-hidden text-ellipsis line-clamp-2",children:f.pickupAddress})]})]}),r.jsxs("div",{className:"flex items-start gap-2 w-full",children:[r.jsx(Re,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1 w-full overflow-hidden",children:[r.jsx("p",{className:"font-medium text-xs sm:text-sm text-gray-900",children:"Delivery Address"}),r.jsx("p",{className:"text-xs text-gray-600 break-all overflow-hidden text-ellipsis line-clamp-2",children:f.deliveryAddress})]})]}),r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-1 sm:pt-2 border-t border-gray-100 gap-2 sm:gap-0 w-full",children:r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Qr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500"}),r.jsxs("span",{className:"font-bold text-green-600 text-xs sm:text-sm",children:["",f.deliveryFee||"35"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Re,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-500"}),r.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:[f.estimatedDistance," km"]})]})]})})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2 w-full",children:[r.jsx($,{onClick:()=>h(m.orderId||m.order_id,m.id),disabled:s===(m.orderId||m.order_id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white text-xs sm:text-sm py-2 sm:py-2.5 min-w-0",size:"sm",children:s===m.order_id?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"hidden sm:inline",children:"Accepting..."}),r.jsx("span",{className:"sm:hidden",children:"..."})]}):r.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[r.jsx(yt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Accept Delivery"}),r.jsx("span",{className:"sm:hidden",children:"Accept"})]})}),r.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[r.jsx($,{variant:"outline",onClick:()=>window.open(`tel:${f.customerPhone}`,"_self"),className:"px-2 sm:px-3 border-blue-200 text-blue-600 hover:bg-blue-50 flex-shrink-0",size:"sm",title:"Call Customer",children:r.jsx(Vt,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),r.jsx($,{variant:"outline",onClick:()=>{const p=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(f.deliveryAddress)}`;window.open(p,"_blank")},className:"px-2 sm:px-3 border-green-200 text-green-600 hover:bg-green-50 flex-shrink-0",size:"sm",title:"View Map",children:r.jsx(Re,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]})]})})},m.id)})})]})}const TVe=ee.object({vehicleType:ee.string().min(1,"Vehicle type is required"),vehicleNumber:ee.string().min(1,"Vehicle number is required"),drivingLicense:ee.string().min(1,"Driving license number is required"),idProofType:ee.string().min(1,"ID proof type is required"),idProofNumber:ee.string().min(1,"ID proof number is required"),deliveryAreas:ee.string().min(1,"Delivery areas are required"),emergencyContact:ee.string().min(10,"Emergency contact number is required"),bankAccountNumber:ee.string().min(10,"Bank account number is required"),ifscCode:ee.string().min(11,"IFSC code is required"),termsAccepted:ee.boolean().refine(e=>e===!0,{message:"You must accept the terms and conditions"})});function MZ({userId:e}){const{toast:t}=ft(),n=on(),[s,i]=b.useState(!1),a=fn({resolver:pn(TVe),defaultValues:{vehicleType:"",vehicleNumber:"",drivingLicense:"",idProofType:"",idProofNumber:"",deliveryAreas:"",emergencyContact:"",bankAccountNumber:"",ifscCode:"",termsAccepted:!1}}),o=pt({mutationFn:async c=>{const d={userId:e,vehicleType:c.vehicleType,vehicleNumber:c.vehicleNumber,drivingLicense:c.drivingLicense,idProofType:c.idProofType,idProofNumber:c.idProofNumber,deliveryAreas:c.deliveryAreas.split(",").map(m=>m.trim()).filter(m=>m.length>0),emergencyContact:c.emergencyContact,bankAccountNumber:c.bankAccountNumber,ifscCode:c.ifscCode},h=await fetch("/api/delivery-partners/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!h.ok){const m=await h.json();throw new Error(m.error||"Failed to create delivery partner profile")}return h.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners/user"]}),t({title:"Profile Created Successfully!",description:"Your delivery partner profile has been created and is pending admin approval."})},onError:c=>{t({title:"Profile Creation Failed",description:c instanceof Error?c.message:"Failed to create profile",variant:"destructive"})}}),l=async c=>{i(!0);try{await o.mutateAsync(c)}finally{i(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:r.jsx(Ct,{className:"h-10 w-10 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Complete Your Delivery Partner Profile"}),r.jsx("p",{className:"text-gray-600",children:"Please provide the required information to start accepting deliveries"})]}),r.jsxs(K,{className:"shadow-xl border-0",children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ws,{className:"h-5 w-5"}),"Delivery Partner Information"]}),r.jsx(kt,{children:"All fields are required for account verification and approval"})]}),r.jsx(G,{children:r.jsx(Rr,{...a,children:r.jsxs("form",{onSubmit:a.handleSubmit(l),className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx(Ct,{className:"h-5 w-5"}),"Vehicle Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:a.control,name:"vehicleType",render:({field:c})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Type"}),r.jsxs(dt,{onValueChange:c.onChange,defaultValue:c.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select vehicle type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"bicycle",children:"Bicycle"}),r.jsx(oe,{value:"motorcycle",children:"Motorcycle"}),r.jsx(oe,{value:"scooter",children:"Scooter"}),r.jsx(oe,{value:"car",children:"Car"}),r.jsx(oe,{value:"van",children:"Van"})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:a.control,name:"vehicleNumber",render:({field:c})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Number"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., BA-1-PA-1234",...c})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:a.control,name:"drivingLicense",render:({field:c})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Driving License Number"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter your driving license number",...c})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx(Ws,{className:"h-5 w-5"}),"Identity Verification"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:a.control,name:"idProofType",render:({field:c})=>r.jsxs(se,{children:[r.jsx(ce,{children:"ID Proof Type"}),r.jsxs(dt,{onValueChange:c.onChange,defaultValue:c.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select ID proof type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"aadhar",children:"Aadhar Card"}),r.jsx(oe,{value:"pan",children:"PAN Card"}),r.jsx(oe,{value:"passport",children:"Passport"}),r.jsx(oe,{value:"voter_id",children:"Voter ID"}),r.jsx(oe,{value:"driving_license",children:"Driving License"})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:a.control,name:"idProofNumber",render:({field:c})=>r.jsxs(se,{children:[r.jsx(ce,{children:"ID Proof Number"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter your ID proof number",...c})}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx(Re,{className:"h-5 w-5"}),"Service Information"]}),r.jsx(ae,{control:a.control,name:"deliveryAreas",render:({field:c})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Delivery Areas"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter delivery areas separated by commas (e.g., Siraha, Lahan, Mirchaiya)",className:"min-h-[100px]",...c})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[r.jsx(Vt,{className:"h-5 w-5"}),"Contact & Banking"]}),r.jsx(ae,{control:a.control,name:"emergencyContact",render:({field:c})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Emergency Contact Number"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter emergency contact number",...c})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:a.control,name:"bankAccountNumber",render:({field:c})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Bank Account Number"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter bank account number",...c})}),r.jsx(me,{})]})}),r.jsx(ae,{control:a.control,name:"ifscCode",render:({field:c})=>r.jsxs(se,{children:[r.jsx(ce,{children:"IFSC Code"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter IFSC code",...c})}),r.jsx(me,{})]})})]})]}),r.jsx("div",{className:"space-y-4",children:r.jsx(ae,{control:a.control,name:"termsAccepted",render:({field:c})=>r.jsxs(se,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(he,{children:r.jsx(fc,{checked:c.value,onCheckedChange:c.onChange})}),r.jsxs("div",{className:"space-y-1 leading-none",children:[r.jsx(ce,{children:"I accept the terms and conditions for delivery partners"}),r.jsx(me,{})]})]})})}),r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Nr,{className:"h-5 w-5 text-amber-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-amber-800",children:"Important"}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Your profile will be reviewed by our admin team. You'll receive a notification once your account is approved and you can start accepting deliveries."})]})]})}),r.jsx($,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",disabled:s||o.isPending,children:s||o.isPending?"Creating Profile...":"Create Delivery Partner Profile"})]})})})]})]})})}delete rr.Icon.Default.prototype._getIconUrl;rr.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const DZ=new rr.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),IZ=new rr.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),LZ=new rr.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),AVe=({createdAt:e,estimatedTime:t})=>{const[n,s]=b.useState(0),[i,a]=b.useState(!1);b.useEffect(()=>{const d=setInterval(()=>{const h=new Date,m=new Date(e),f=Math.floor((h.getTime()-m.getTime())/1e3/60);s(f),a(f>t)},1e3);return()=>clearInterval(d)},[e,t]);const o=d=>{if(d<60)return`${d}m`;const h=Math.floor(d/60),m=d%60;return`${h}h ${m}m`},l=Math.max(0,t-n),c=Math.min(100,n/t*100);return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(xd,{className:"h-3 w-3"}),r.jsxs("span",{className:i?"text-red-600 font-medium":"text-gray-600",children:[o(n)," elapsed"]})]}),r.jsx("div",{className:`text-xs ${i?"text-red-600 font-medium":"text-green-600"}`,children:i?"Overdue":`${o(l)} left`})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:r.jsx("div",{className:`h-1.5 rounded-full transition-all duration-1000 ${i?"bg-red-500":"bg-green-500"}`,style:{width:`${c}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Target: ",o(t)," | Status: ",i?"Behind Schedule":"On Track"]})]})},EVe=({activeDeliveries:e})=>{const[t,n]=b.useState({lat:26.7674,lng:86.5906});b.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(i=>{n({lat:i.coords.latitude,lng:i.coords.longitude})})},[]);const s=[t.lat,t.lng];return r.jsx("div",{className:"w-full h-64 sm:h-80 lg:h-96 rounded-lg overflow-hidden border border-gray-200",children:r.jsxs(tw,{center:s,zoom:13,style:{height:"100%",width:"100%"},className:"rounded-lg",children:[r.jsx(rw,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),r.jsx(za,{position:s,icon:LZ,children:r.jsx(Jl,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:"Your Location"}),r.jsx("br",{}),"Lat: ",t.lat.toFixed(4),r.jsx("br",{}),"Lng: ",t.lng.toFixed(4)]})})}),e.map(i=>{const a=i.pickupLatitude||26.7674,o=i.pickupLongitude||86.5906,l=i.deliveryLatitude||26.77,c=i.deliveryLongitude||86.595;return r.jsxs("div",{children:[r.jsx(za,{position:[a,o],icon:DZ,children:r.jsx(Jl,{children:r.jsxs("div",{className:"text-sm",children:[r.jsxs("strong",{children:["Pickup: ",i.pickupStoreName||"Store"]}),r.jsx("br",{}),"Order #",i.orderNumber,r.jsx("br",{}),i.pickupAddress]})})}),r.jsx(za,{position:[l,c],icon:IZ,children:r.jsx(Jl,{children:r.jsxs("div",{className:"text-sm",children:[r.jsxs("strong",{children:["Delivery to: ",i.customerName]}),r.jsx("br",{}),"Order #",i.orderNumber,r.jsx("br",{}),i.deliveryAddress,r.jsx("br",{}),r.jsxs("strong",{children:["Fee: ",i.deliveryFee]})]})})}),r.jsx(QH,{positions:[[a,o],[l,c]],color:"blue",weight:3,opacity:.7,dashArray:"5, 5"})]},i.id)})]})})};function OVe(){const{user:e}=el(),{toast:t}=ft(),n=on(),[s,i]=b.useState("home"),{data:a,isLoading:o,error:l}=Le({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id],queryFn:async()=>{const C=await fetch(`/api/delivery-partners/user?userId=${e==null?void 0:e.id}`);if(!C.ok){if(C.status===404)return null;throw new Error("Failed to fetch partner data")}return C.json()},enabled:!!(e!=null&&e.id),retry:2}),{data:c=[],isLoading:d}=Le({queryKey:["/api/deliveries/partner",a==null?void 0:a.id],queryFn:async()=>{const C=await fetch(`/api/deliveries/partner/${a==null?void 0:a.id}`);return C.ok?C.json():[]},enabled:!!(a!=null&&a.id)}),{data:h=[],isLoading:m}=Le({queryKey:["/api/deliveries/active",e==null?void 0:e.id],queryFn:async()=>{const C=await fetch(`/api/deliveries/active/${e==null?void 0:e.id}`);return C.ok?C.json():[]},enabled:!!(e!=null&&e.id),refetchInterval:5e3}),{data:f}=Le({queryKey:["/api/delivery-partners/stats",a==null?void 0:a.id],queryFn:async()=>{const C=await fetch(`/api/delivery-partners/${a==null?void 0:a.id}/stats`);return C.ok?C.json():{totalDeliveries:(a==null?void 0:a.totalDeliveries)||0,totalEarnings:parseFloat((a==null?void 0:a.totalEarnings)||"0"),rating:a!=null&&a.rating?parseFloat(a.rating.toString()):0,todayDeliveries:0,todayEarnings:0,activeDeliveries:Array.isArray(c)?c.filter(P=>["assigned","picked_up"].includes(P.status)).length:0}},enabled:!!(a!=null&&a.id)}),v=pt({mutationFn:async({deliveryId:C,status:P})=>(await fetch(`/api/deliveries/${C}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:P,partnerId:a==null?void 0:a.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),t({title:"Status Updated",description:"Delivery status has been updated successfully."})},onError:()=>{t({title:"Error",description:"Failed to update delivery status.",variant:"destructive"})}}),p=pt({mutationFn:async C=>(await fetch(`/api/delivery-partners/${a==null?void 0:a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAvailable:C})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-partners/user"]}),t({title:"Availability Updated",description:"Your availability status has been updated."})},onError:()=>{t({title:"Error",description:"Failed to update delivery status.",variant:"destructive"})}});if(o)return r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:r.jsxs("div",{className:"text-center max-w-sm w-full",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 sm:h-16 sm:w-16 border-b-4 border-blue-600 mx-auto mb-4 sm:mb-6"}),r.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-700 mb-2",children:"Loading Dashboard"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Please wait while we fetch your information..."})]})});if(!a)return r.jsx(MZ,{userId:(e==null?void 0:e.id)||0});const x=Array.isArray(c)?c:[],y=Array.isArray(h)?h:[],w=x.filter(C=>C.status==="assigned"),j=x.filter(C=>C.status==="delivered"),N=f||{totalDeliveries:(a==null?void 0:a.totalDeliveries)||0,totalEarnings:parseFloat((a==null?void 0:a.totalEarnings)||"0"),rating:a!=null&&a.rating?parseFloat(a.rating.toString()):0,todayDeliveries:0,todayEarnings:0,activeDeliveries:y.length};return r.jsxs("div",{className:"min-h-screen bg-gray-50 w-full",children:[r.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-lg",children:r.jsx("div",{className:"px-4 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(Ct,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold",children:"Siraha Bazaar"}),r.jsx("p",{className:"text-sm text-white/80",children:"Delivery Partner"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs text-white/80",children:"Status"}),r.jsx("p",{className:"text-sm font-medium",children:a.isAvailable?"Online":"Offline"})]}),r.jsx("button",{onClick:()=>p.mutate(!a.isAvailable),disabled:p.isPending,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${a.isAvailable?"bg-green-400":"bg-white/30"} ${p.isPending?"opacity-50 cursor-not-allowed":""}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a.isAvailable?"translate-x-6":"translate-x-1"}`})})]})]})})}),r.jsx("div",{className:"px-4 pb-20",children:r.jsxs(Ds,{value:s,onValueChange:i,className:"w-full",children:[r.jsxs(ws,{className:"grid grid-cols-4 mb-6 bg-white shadow-lg rounded-2xl p-2 h-16",children:[r.jsxs(at,{value:"home",className:"flex flex-col items-center justify-center py-2 data-[state=active]:bg-red-50 data-[state=active]:text-red-600 rounded-xl h-12",children:[r.jsx(si,{className:"h-5 w-5 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),r.jsxs(at,{value:"map",className:"flex flex-col items-center justify-center py-2 data-[state=active]:bg-red-50 data-[state=active]:text-red-600 rounded-xl h-12",children:[r.jsx(Re,{className:"h-5 w-5 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Map"})]}),r.jsxs(at,{value:"deliveries",className:"flex flex-col items-center justify-center py-2 data-[state=active]:bg-red-50 data-[state=active]:text-red-600 rounded-xl h-12 relative",children:[r.jsx(e0,{className:"h-5 w-5 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Orders"}),w.length+y.length>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-bold text-white",children:w.length+y.length})})]}),r.jsxs(at,{value:"profile",className:"flex flex-col items-center justify-center py-2 data-[state=active]:bg-red-50 data-[state=active]:text-red-600 rounded-xl h-12",children:[r.jsx(Wr,{className:"h-5 w-5 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]}),r.jsxs(Xe,{value:"home",className:"space-y-6",children:[r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"inline-block bg-white rounded-2xl shadow-lg p-6 min-w-[200px]",children:[r.jsx("div",{className:"text-4xl font-bold text-red-500 mb-1",children:new Date().getDate()}),r.jsx("div",{className:"text-sm text-gray-600 uppercase tracking-wide",children:new Date().toLocaleDateString("en-US",{weekday:"long"})}),r.jsx("div",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Today's Stats"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx(Ye,{className:"h-5 w-5 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed Orders"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Today"})]})]}),r.jsx("div",{className:"text-2xl font-bold text-red-600",children:N.totalDeliveries})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:r.jsx(Qr,{className:"h-5 w-5 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Earnings"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Today"})]})]}),r.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["",N.todayEarnings.toFixed(2)]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(jt,{className:"h-5 w-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Orders"}),r.jsx("p",{className:"text-xs text-gray-500",children:"In Progress"})]})]}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.activeDeliveries})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Weekly Performance"}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-red-500 to-orange-500 rounded-xl text-white",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Total Earnings"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",N.totalEarnings.toFixed(2)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm",children:"This Week"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(wn,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"+12%"})]})]})]})]}),r.jsx($,{className:"w-full h-14 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold text-lg rounded-2xl shadow-lg",onClick:()=>i("deliveries"),children:"START DELIVERY"})]}),r.jsx(Xe,{value:"map",className:"space-y-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"h-96 relative",children:[r.jsx("div",{className:"absolute inset-0 z-10",children:r.jsxs(tw,{center:[26.66,86.21],zoom:13,className:"h-full w-full",zoomControl:!1,children:[r.jsx(rw,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),y.map(C=>r.jsxs("div",{children:[r.jsx(za,{position:[26.6603,86.2064],icon:DZ,children:r.jsx(Jl,{children:r.jsxs("div",{className:"p-2",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Pickup Location"}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Order #",C.orderId]}),r.jsxs("p",{className:"text-xs",children:["Store: ",C.storeName||"Store"]})]})})}),r.jsx(za,{position:[26.665,86.215],icon:IZ,children:r.jsx(Jl,{children:r.jsxs("div",{className:"p-2",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Delivery Location"}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Order #",C.orderId]}),r.jsxs("p",{className:"text-xs",children:["Customer: ",C.customerName||"Customer"]})]})})}),r.jsx(QH,{positions:[[26.6603,86.2064],[26.665,86.215]],color:"#ef4444",weight:3,opacity:.7})]},C.id)),r.jsx(za,{position:[26.66,86.21],icon:LZ,children:r.jsx(Jl,{children:r.jsxs("div",{className:"p-2",children:[r.jsx("h3",{className:"font-semibold text-sm",children:"Your Location"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Delivery Partner"})]})})})]})}),r.jsx("div",{className:"absolute top-4 right-4 z-20 space-y-2",children:r.jsx($,{size:"sm",className:"bg-white text-gray-700 hover:bg-gray-50 shadow-lg w-10 h-10 p-0",onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(C=>{t({description:`Location updated: ${C.coords.latitude.toFixed(4)}, ${C.coords.longitude.toFixed(4)}`})})},children:r.jsx(_t,{className:"h-4 w-4"})})})]}),r.jsxs("div",{className:"p-4 bg-gray-50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:"Current Delivery"}),r.jsx(ue,{className:"bg-red-500 text-white",children:"13 min"})]}),y.length>0?r.jsx("div",{className:"space-y-3",children:y.map(C=>r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),r.jsxs("span",{className:"font-medium text-sm",children:["Order #",C.orderId]})]}),r.jsxs("span",{className:"text-sm text-green-600 font-medium",children:["",C.deliveryFee||30]})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsxs("span",{className:"text-gray-600",children:["Pickup: ",C.storeName||"Store Location"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),r.jsxs("span",{className:"text-gray-600",children:["Drop: ",C.customerName||"Customer Location"]})]})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx($,{size:"sm",className:"flex-1 bg-red-500 hover:bg-red-600 text-white rounded-lg",onClick:()=>window.open("https://www.google.com/maps/dir//26.6603,86.2064","_blank"),children:"Go to Pickup"}),r.jsx($,{size:"sm",variant:"outline",className:"flex-1 border-red-500 text-red-500 hover:bg-red-50 rounded-lg",onClick:()=>window.open("https://www.google.com/maps/dir//26.665,86.215","_blank"),children:"Go to Drop"})]})]},C.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Re,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No active deliveries"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Check the Orders tab for available deliveries"})]})]})]})}),r.jsx(Xe,{value:"deliveries",className:"space-y-4 sm:space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(K,{className:"shadow-lg border-0",children:[r.jsx(re,{className:"px-3 sm:px-6",children:r.jsxs(ne,{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{className:"text-base sm:text-lg",children:"Delivery Area Map"})]}),r.jsx(ue,{variant:"secondary",className:"bg-green-100 text-green-800 w-fit",children:"Live"})]})}),r.jsxs(G,{className:"px-3 sm:px-6",children:[r.jsx(EVe,{activeDeliveries:y}),r.jsxs("div",{className:"mt-4 space-y-2 text-xs sm:text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{children:"Pickup Locations"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{children:"Delivery Destinations"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{children:"Your Location"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 mt-4",children:[r.jsxs($,{variant:"outline",size:"sm",onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(C=>{t({title:"Location Updated",description:"Your current location has been recorded."})})},className:"text-xs sm:text-sm",children:[r.jsx(Re,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"Update Location"]}),r.jsxs($,{variant:"outline",size:"sm",onClick:()=>window.open("https://www.google.com/maps","_blank"),className:"text-xs sm:text-sm",children:[r.jsx(_t,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"Open External Maps"]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mt-4 sm:mt-6",children:[r.jsxs("div",{className:"text-center p-3 sm:p-4 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-green-600",children:a.deliveryAreas.length}),r.jsx("div",{className:"text-xs sm:text-sm text-green-700",children:"Coverage Areas"})]}),r.jsxs("div",{className:"text-center p-3 sm:p-4 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:N.activeDeliveries}),r.jsx("div",{className:"text-xs sm:text-sm text-blue-700",children:"Active Routes"})]}),r.jsxs("div",{className:"text-center p-3 sm:p-4 bg-orange-50 rounded-lg",children:[r.jsx("div",{className:"text-lg sm:text-2xl font-bold text-orange-600",children:a.isAvailable?"Online":"Offline"}),r.jsx("div",{className:"text-xs sm:text-sm text-orange-700",children:"Status"})]})]})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"h-full",children:r.jsx(t$,{deliveryPartnerId:(a==null?void 0:a.id)||0})})})]})}),r.jsx(Xe,{value:"orders",className:"space-y-4 sm:space-y-6",children:r.jsxs(K,{className:"shadow-lg border-0",children:[r.jsxs(re,{className:"px-3 sm:px-6",children:[r.jsxs(ne,{className:"flex items-center gap-2 text-base sm:text-lg",children:[r.jsx(Qt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-500"}),"Delivery Alerts"]}),r.jsx(kt,{className:"text-sm",children:"New delivery opportunities available"})]}),r.jsx(G,{className:"px-3 sm:px-6",children:r.jsx(t$,{deliveryPartnerId:(a==null?void 0:a.id)||0})})]})}),r.jsx(Xe,{value:"deliveries",className:"space-y-2 xs:space-y-3 sm:space-y-4 lg:space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2 xs:gap-3 sm:gap-4 lg:gap-6 w-full",children:[r.jsxs(K,{className:"shadow-lg border-0 w-full",children:[r.jsx(re,{className:"px-2 xs:px-3 sm:px-6 py-2 xs:py-3 sm:py-4",children:r.jsxs(ne,{className:"flex items-center gap-1 xs:gap-2 text-sm xs:text-base sm:text-lg",children:[r.jsx(jt,{className:"h-3 w-3 xs:h-4 xs:w-4 sm:h-5 sm:w-5 text-orange-500 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:["Pending (",w.length,")"]})]})}),r.jsx(G,{className:"space-y-2 xs:space-y-3 sm:space-y-4 px-2 xs:px-3 sm:px-6 pb-2 xs:pb-3 sm:pb-6",children:w.length===0?r.jsxs("div",{className:"text-center py-4 xs:py-6 sm:py-8",children:[r.jsx(Ye,{className:"h-6 w-6 xs:h-8 xs:w-8 sm:h-10 sm:w-10 lg:h-12 lg:w-12 text-gray-300 mx-auto mb-2 xs:mb-3 sm:mb-4"}),r.jsx("p",{className:"text-xs xs:text-sm sm:text-base text-gray-500",children:"No pending deliveries"})]}):w.map(C=>r.jsx(K,{className:"border border-orange-200 bg-orange-50 w-full overflow-hidden",children:r.jsxs(G,{className:"p-1.5 xs:p-2 sm:p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1.5 xs:mb-2 gap-1 xs:gap-2",children:[r.jsxs("div",{className:"font-semibold text-[10px] xs:text-xs sm:text-sm lg:text-lg truncate min-w-0",children:["Order #",C.orderId]}),r.jsxs(ue,{className:"bg-orange-100 text-orange-800 border-orange-200 text-[8px] xs:text-[9px] sm:text-xs flex-shrink-0 px-1 xs:px-2 py-0.5",children:["",C.deliveryFee]})]}),r.jsxs("div",{className:"space-y-1 xs:space-y-1.5 sm:space-y-2 text-[9px] xs:text-[10px] sm:text-xs lg:text-sm",children:[r.jsxs("div",{className:"flex items-start gap-1 xs:gap-1.5 sm:gap-2",children:[r.jsx(Re,{className:"h-2.5 w-2.5 xs:h-3 xs:w-3 sm:h-4 sm:w-4 text-green-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-medium text-[9px] xs:text-[10px] sm:text-xs",children:"Pickup"}),r.jsx("p",{className:"text-gray-600 text-[8px] xs:text-[9px] sm:text-xs line-clamp-2 break-words",children:C.pickupAddress})]})]}),r.jsxs("div",{className:"flex items-start gap-1 xs:gap-1.5 sm:gap-2",children:[r.jsx(Re,{className:"h-2.5 w-2.5 xs:h-3 xs:w-3 sm:h-4 sm:w-4 text-red-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-medium text-[9px] xs:text-[10px] sm:text-xs",children:"Delivery"}),r.jsx("p",{className:"text-gray-600 text-[8px] xs:text-[9px] sm:text-xs line-clamp-2 break-words",children:C.deliveryAddress})]})]})]}),r.jsxs("div",{className:"mt-2 xs:mt-2.5 sm:mt-3 lg:mt-4 flex flex-col xs:flex-row gap-1 xs:gap-1.5 sm:gap-2",children:[r.jsxs($,{onClick:()=>v.mutate({deliveryId:C.id,status:"picked_up"}),disabled:v.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-[8px] xs:text-[9px] sm:text-xs py-1 xs:py-1.5 sm:py-2 h-6 xs:h-7 sm:h-auto",size:"sm",children:[r.jsx("span",{className:"hidden xs:inline",children:"Accept & Pickup"}),r.jsx("span",{className:"xs:hidden",children:"Accept"})]}),r.jsx($,{variant:"outline",size:"sm",className:"xs:w-auto h-6 xs:h-7 sm:h-auto px-2",children:r.jsx(Re,{className:"h-2.5 w-2.5 xs:h-3 xs:w-3 sm:h-4 sm:w-4"})})]})]})},C.id))})]}),r.jsxs(K,{className:"shadow-lg border-0",children:[r.jsx(re,{className:"px-3 sm:px-6",children:r.jsxs(ne,{className:"flex items-center gap-2 text-base sm:text-lg",children:[r.jsx(Ct,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-500"}),"Active Deliveries (",y.length,")",m&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})]})}),r.jsx(G,{className:"space-y-3 sm:space-y-4 px-3 sm:px-6",children:m?r.jsxs("div",{className:"text-center py-6 sm:py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Loading active deliveries..."})]}):y.length===0?r.jsxs("div",{className:"text-center py-6 sm:py-8",children:[r.jsx(Ct,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-300 mx-auto mb-3 sm:mb-4"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"No active deliveries"}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Accept delivery orders to see them here"})]}):y.map(C=>r.jsx(K,{className:"border border-blue-200 bg-blue-50 max-w-full overflow-hidden",children:r.jsxs(G,{className:"p-2 sm:p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2 gap-2",children:[r.jsxs("div",{className:"font-semibold text-xs sm:text-lg truncate min-w-0",children:["Order #",C.orderId]}),r.jsx(ue,{className:"bg-blue-100 text-blue-800 border-blue-200 text-xs flex-shrink-0",children:"In Progress"})]}),r.jsxs("div",{className:"space-y-2 text-xs sm:text-sm",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Re,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-medium text-xs sm:text-sm",children:"Delivery Address"}),r.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-2 word-wrap break-words overflow-wrap-anywhere",children:C.deliveryAddress})]})]}),r.jsx("div",{className:"mt-3 p-2 bg-white rounded-md border",children:r.jsx(AVe,{createdAt:C.createdAt,estimatedTime:45})})]}),r.jsxs("div",{className:"mt-3 sm:mt-4 flex flex-col sm:flex-row gap-2",children:[r.jsxs($,{variant:"outline",onClick:()=>window.open(`/delivery-map/${C.id}`,"_blank"),className:"flex-1 text-xs py-2",size:"sm",children:[r.jsx(_t,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),r.jsx("span",{className:"hidden sm:inline",children:"Navigate"}),r.jsx("span",{className:"sm:hidden",children:"Nav"})]}),r.jsxs($,{onClick:()=>v.mutate({deliveryId:C.id,status:"delivered"}),disabled:v.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-xs py-2",size:"sm",children:[r.jsx("span",{className:"hidden sm:inline",children:"Mark Delivered"}),r.jsx("span",{className:"sm:hidden",children:"Delivered"})]})]})]})},C.id))})]})]})}),r.jsx(Xe,{value:"history",className:"space-y-4 sm:space-y-6",children:r.jsxs(K,{className:"shadow-lg border-0",children:[r.jsxs(re,{className:"px-3 sm:px-6",children:[r.jsx(ne,{className:"text-base sm:text-lg",children:"Delivery History"}),r.jsx(kt,{className:"text-sm",children:"Your completed deliveries"})]}),r.jsx(G,{className:"px-3 sm:px-6",children:j.length===0?r.jsxs("div",{className:"text-center py-8 sm:py-12",children:[r.jsx(ql,{className:"h-12 w-12 sm:h-16 sm:w-16 text-gray-300 mx-auto mb-3 sm:mb-4"}),r.jsx("p",{className:"text-base sm:text-lg text-gray-500",children:"No completed deliveries yet"})]}):r.jsx("div",{className:"space-y-3 sm:space-y-4",children:j.map(C=>r.jsx(K,{className:"border border-green-200 bg-green-50 max-w-full overflow-hidden",children:r.jsx(G,{className:"p-2 sm:p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"font-semibold text-xs sm:text-lg truncate",children:["Order #",C.orderId]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:["Delivered on ",new Date(C.deliveredAt).toLocaleDateString()]}),C.customerRating&&r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx(Bt,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 fill-current"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium",children:C.customerRating})]})]}),r.jsxs("div",{className:"text-left sm:text-right flex-shrink-0",children:[r.jsxs("div",{className:"font-bold text-green-600 text-sm sm:text-lg",children:["",C.deliveryFee]}),r.jsx(ue,{variant:"outline",className:"border-green-300 text-green-700 text-xs",children:"Completed"})]})]})})},C.id))})})]})}),r.jsx(Xe,{value:"earnings",className:"space-y-4 sm:space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsxs(K,{className:"shadow-lg border-0",children:[r.jsx(re,{className:"px-3 sm:px-6",children:r.jsx(ne,{className:"text-base sm:text-lg",children:"Today's Earnings"})}),r.jsxs(G,{className:"px-3 sm:px-6",children:[r.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:["",N.todayEarnings.toFixed(2)]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[N.todayDeliveries," ",N.todayDeliveries===1?"delivery":"deliveries"]})]})]}),r.jsxs(K,{className:"shadow-lg border-0",children:[r.jsx(re,{className:"px-3 sm:px-6",children:r.jsx(ne,{className:"text-base sm:text-lg",children:"This Week"})}),r.jsxs(G,{className:"px-3 sm:px-6",children:[r.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-blue-600",children:["",(N.todayEarnings*7).toFixed(2)]}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Weekly projection"})]})]}),r.jsxs(K,{className:"shadow-lg border-0 sm:col-span-2 lg:col-span-1",children:[r.jsx(re,{className:"px-3 sm:px-6",children:r.jsx(ne,{className:"text-base sm:text-lg",children:"Total Lifetime"})}),r.jsxs(G,{className:"px-3 sm:px-6",children:[r.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-purple-600",children:["",N.totalEarnings.toFixed(2)]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[N.totalDeliveries," total deliveries"]})]})]})]})}),r.jsx(Xe,{value:"profile",children:r.jsxs(K,{className:"shadow-lg border-0",children:[r.jsxs(re,{className:"px-3 sm:px-6",children:[r.jsx(ne,{className:"text-base sm:text-lg",children:"Profile Information"}),r.jsx(kt,{className:"text-sm",children:"Your delivery partner details"})]}),r.jsx(G,{className:"px-3 sm:px-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-base sm:text-lg",children:"Vehicle Details"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b gap-1",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Vehicle Type:"}),r.jsx("span",{className:"font-medium capitalize text-sm",children:a.vehicleType})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b gap-1",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Vehicle Number:"}),r.jsx("span",{className:"font-medium text-sm",children:a.vehicleNumber})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b gap-1",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Driving License:"}),r.jsx("span",{className:"font-medium text-sm",children:a.drivingLicense})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-base sm:text-lg",children:"Contact & Areas"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b gap-1",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Emergency Contact:"}),r.jsx("span",{className:"font-medium text-sm",children:a.emergencyContact})]}),r.jsxs("div",{className:"py-2 border-b",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Delivery Areas:"}),r.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 mt-2",children:a.deliveryAreas.map((C,P)=>r.jsx(ue,{variant:"outline",className:"bg-blue-50 text-blue-700 text-xs",children:C},P))})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b gap-1",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:"Status:"}),r.jsx(ue,{variant:a.status==="approved"?"default":"secondary",className:`${a.status==="approved"?"bg-green-100 text-green-800":""} text-xs w-fit`,children:a.status})]})]})]})]})})]})})]})}),r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50 md:hidden",children:r.jsx("div",{className:"max-w-md mx-auto px-4 py-2",children:r.jsxs("div",{className:"flex justify-around items-center",children:[r.jsxs("button",{onClick:()=>i("home"),className:`flex flex-col items-center p-2 ${s==="home"?"text-red-500":"text-gray-400"}`,children:[r.jsx(si,{className:"h-6 w-6 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),r.jsxs("button",{onClick:()=>i("map"),className:`flex flex-col items-center p-2 ${s==="map"?"text-red-500":"text-gray-400"}`,children:[r.jsx(Re,{className:"h-6 w-6 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Map"})]}),r.jsxs("button",{onClick:()=>i("deliveries"),className:`flex flex-col items-center p-2 relative ${s==="deliveries"?"text-red-500":"text-gray-400"}`,children:[r.jsx(e0,{className:"h-6 w-6 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Orders"}),w.length+y.length>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-bold text-white",children:w.length+y.length})})]}),r.jsxs("button",{onClick:()=>i("profile"),className:`flex flex-col items-center p-2 ${s==="profile"?"text-red-500":"text-gray-400"}`,children:[r.jsx(Wr,{className:"h-6 w-6 mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]})})})]})}function MVe({deliveryId:e,deliveryPartnerId:t,pickupLocation:n,deliveryLocation:s,currentLocation:i,onLocationUpdate:a}){const o=b.useRef(null),[l,c]=b.useState(!1),[d,h]=b.useState(null),[m,f]=b.useState(null);b.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(y=>{const w={lat:y.coords.latitude,lng:y.coords.longitude};h(w),a&&a(w)},y=>{console.error("Error getting location:",y),f("Unable to get your location. Please enable location services.")}):f("Geolocation is not supported by this browser.")},[a]),b.useEffect(()=>{o.current&&!l&&c(!0)},[l]);const v=y=>{const w=`https://www.google.com/maps/dir/?api=1&destination=${y.lat},${y.lng}`;window.open(w,"_blank")},p=(y,w)=>{const k=(w-86.19)/.03*50+25,_=(26.65+.03-y)/.03*50+25;return{left:`${Math.max(15,Math.min(85,k))}%`,top:`${Math.max(15,Math.min(85,_))}%`}},x=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(y=>{const w={lat:y.coords.latitude,lng:y.coords.longitude};h(w),a&&a(w)},y=>{console.error("Error updating location:",y),f("Failed to update location. Please try again.")})};return m?r.jsx(K,{children:r.jsx(G,{className:"p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Nr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("p",{className:"text-red-600 mb-4",children:m}),r.jsx($,{onClick:x,variant:"outline",children:"Try Again"})]})})})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-5 w-5"}),"Delivery Map",r.jsx(ue,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Live Tracking"})]})}),r.jsxs(G,{children:[r.jsx("div",{ref:o,className:"w-full h-96 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg border-2 border-blue-200 relative overflow-hidden",children:r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"relative w-full h-full",children:[r.jsx("div",{className:"absolute inset-0 opacity-10",children:r.jsx("div",{className:"grid grid-cols-8 grid-rows-6 h-full",children:Array.from({length:48}).map((y,w)=>r.jsx("div",{className:"border border-blue-300"},w))})}),n&&r.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:p(n.lat,n.lng),children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full border-2 border-white shadow-lg animate-pulse"}),r.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-green-600 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:" Pickup"})]})}),s&&r.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:p(s.lat,s.lng),children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full border-2 border-white shadow-lg animate-pulse"}),r.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-red-600 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:" Delivery"})]})}),(d||i)&&r.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:p(((i==null?void 0:i.lat)||(d==null?void 0:d.lat))??26.6696,((i==null?void 0:i.lng)||(d==null?void 0:d.lng))??86.2121),children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full border-2 border-white shadow-lg",children:r.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full animate-ping opacity-75"})}),r.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:" Partner"})]})}),n&&s&&(()=>{const y=p(n.lat,n.lng),w=p(s.lat,s.lng),j=(parseFloat(y.left)+parseFloat(w.left))/2,N=Math.min(parseFloat(y.top),parseFloat(w.top))-5;return r.jsx("div",{className:"absolute inset-0",children:r.jsxs("svg",{className:"w-full h-full",children:[r.jsx("defs",{children:r.jsx("pattern",{id:"dash",patternUnits:"userSpaceOnUse",width:"8",height:"8",children:r.jsx("rect",{width:"4",height:"8",fill:"#3B82F6"})})}),r.jsx("path",{d:`M ${y.left} ${y.top} Q ${j}% ${N}% ${w.left} ${w.top}`,stroke:"#3B82F6",strokeWidth:"3",strokeDasharray:"5,5",fill:"none",className:"animate-pulse"})]})})})(),r.jsxs("div",{className:"absolute top-4 left-4 bg-white/80 backdrop-blur-sm rounded-lg p-3",children:[r.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Live Tracking"}),r.jsx("div",{className:"text-xs text-gray-500",children:d?`${d.lat.toFixed(4)}, ${d.lng.toFixed(4)}`:"Getting location..."})]})]})})}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsxs($,{onClick:x,size:"sm",variant:"outline",children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),"Update Location"]}),n&&r.jsxs($,{onClick:()=>v(n),size:"sm",variant:"outline",children:[r.jsx(_t,{className:"h-4 w-4 mr-2"}),"Navigate to Pickup"]}),s&&r.jsxs($,{onClick:()=>v(s),size:"sm",variant:"outline",children:[r.jsx(_t,{className:"h-4 w-4 mr-2"}),"Navigate to Delivery"]})]})]})]}),(n||s)&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n&&r.jsxs(K,{children:[r.jsx(re,{className:"pb-3",children:r.jsxs(ne,{className:"text-sm flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),"Pickup Location"]})}),r.jsxs(G,{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:n.address}),r.jsx("div",{className:"flex gap-2",children:r.jsxs($,{size:"sm",variant:"outline",onClick:()=>v(n),children:[r.jsx(_t,{className:"h-3 w-3 mr-1"}),"Navigate"]})})]})]}),s&&r.jsxs(K,{children:[r.jsx(re,{className:"pb-3",children:r.jsxs(ne,{className:"text-sm flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),"Delivery Location"]})}),r.jsxs(G,{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.address}),r.jsx("div",{className:"flex gap-2",children:r.jsxs($,{size:"sm",variant:"outline",onClick:()=>v(s),children:[r.jsx(_t,{className:"h-3 w-3 mr-1"}),"Navigate"]})})]})]})]})]})}function RZ({deliveryData:e,deliveryPartnerId:t,onLocationUpdate:n}){const s=b.useRef(null),i=b.useRef(null),[a,o]=b.useState(null),[l,c]=b.useState(!1),[d,h]=b.useState([]),[m,f]=b.useState(e.estimatedTime),[v,p]=b.useState(0),[x,y]=b.useState(!1),w=b.useRef(null),j=b.useRef(null),N=b.useRef(null),C=b.useRef(null),P=(D,W=!1)=>{const U={store:W?"#10b981":"#059669",customer:W?"#3b82f6":"#2563eb",delivery:W?"#f59e0b":"#d97706"},Q={store:"",customer:"",delivery:""};return rr.divIcon({html:`
        <div style="
          background: ${U[D]};
          width: 40px;
          height: 40px;
          border-radius: 50%;
          border: 3px solid white;
          box-shadow: 0 4px 12px rgba(0,0,0,0.3);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 18px;
          position: relative;
          ${W?"animation: pulse 2s infinite;":""}
        ">
          ${Q[D]}
          ${W?'<div style="position: absolute; width: 100%; height: 100%; border-radius: 50%; background: rgba(255,255,255,0.3); animation: ripple 2s infinite;"></div>':""}
        </div>
        <style>
          @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
          }
          @keyframes ripple {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
          }
        </style>
      `,className:"custom-marker",iconSize:[40,40],iconAnchor:[20,20]})};b.useEffect(()=>(i.current&&!s.current&&(s.current=rr.map(i.current).setView([26.6636,86.2061],14),rr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(s.current),k(),_()),()=>{s.current&&(s.current.remove(),s.current=null)}),[]);const k=()=>{if(!s.current)return;const D=[26.6636,86.2061];w.current=rr.marker(D,{icon:P("store",e.status==="assigned")}).addTo(s.current),w.current.bindPopup(`
      <div style="padding: 8px;">
        <strong>${e.storeName}</strong><br>
         Pickup Location<br>
         ${e.storePhone||"N/A"}<br>
         Order #${e.orderId}
      </div>
    `);const W=[26.6756,86.2181];j.current=rr.marker(W,{icon:P("customer",e.status==="en_route_delivery")}).addTo(s.current),j.current.bindPopup(`
      <div style="padding: 8px;">
        <strong>${e.customerName}</strong><br>
         Delivery Address<br>
         ${e.customerPhone}<br>
         Fee: ${e.deliveryFee}
      </div>
    `);const U=[26.6696,86.2121];N.current=rr.marker(U,{icon:P("delivery",!0)}).addTo(s.current),N.current.bindPopup(`
      <div style="padding: 8px;">
        <strong>Delivery Partner</strong><br>
         Live Location<br>
         ETA: ${m} mins<br>
         ${v.toFixed(1)}km covered
      </div>
    `);const Q=new rr.FeatureGroup([w.current,j.current,N.current]);s.current.fitBounds(Q.getBounds().pad(.1))},_=()=>{if(!s.current)return;const D=[[26.6636,86.2061],[26.6646,86.2071],[26.6656,86.2091],[26.6676,86.2111],[26.6696,86.2131],[26.6716,86.2151],[26.6736,86.2171],[26.6756,86.2181]];C.current=rr.polyline(D,{color:"#3b82f6",weight:4,opacity:.8,dashArray:"10, 10"}).addTo(s.current);const W=D.map((U,Q)=>({lat:U[0],lng:U[1],timestamp:Date.now()+Q*3e4}));h(W)},O=()=>{c(!0),navigator.geolocation?navigator.geolocation.watchPosition(D=>{const W={lat:D.coords.latitude,lng:D.coords.longitude,timestamp:Date.now()};o(W),T(W),n==null||n(W)},D=>{console.error("Geolocation error:",D),M()},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}):M()},M=()=>{y(!0);let D=0;const W=setInterval(()=>{if(D>=d.length){clearInterval(W),y(!1);return}const U=d[D];o(U),T(U);const Q=d.length-D-1;f(Math.max(1,Math.round(Q*.5))),p(D/d.length*e.estimatedDistance),D++},2e3)},T=D=>{N.current&&s.current&&(N.current.setLatLng([D.lat,D.lng]),N.current.setPopupContent(`
        <div style="padding: 8px;">
          <strong>Delivery Partner</strong><br>
           Live Location<br>
           ETA: ${m} mins<br>
           ${v.toFixed(1)}km covered<br>
           Updated: ${new Date(D.timestamp).toLocaleTimeString()}
        </div>
      `),s.current.panTo([D.lat,D.lng]))},I=()=>{c(!1),y(!1)},A=()=>{switch(e.status){case"assigned":return r.jsx(Ye,{className:"h-4 w-4"});case"picked_up":return r.jsx(Ct,{className:"h-4 w-4"});case"en_route_delivery":return r.jsx(_t,{className:"h-4 w-4"});case"delivered":return r.jsx(yt,{className:"h-4 w-4"});default:return r.jsx(jt,{className:"h-4 w-4"})}},V=()=>{switch(e.status){case"assigned":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"picked_up":return"bg-blue-100 text-blue-800 border-blue-200";case"en_route_delivery":return"bg-purple-100 text-purple-800 border-purple-200";case"delivered":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(K,{className:"shadow-lg border-0",children:[r.jsx(re,{className:"pb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(_t,{className:"h-5 w-5 text-blue-600"}),"Live Delivery Tracking"]}),r.jsxs(ue,{className:`${V()} flex items-center gap-1`,children:[A(),e.status.replace("_"," ").toUpperCase()]})]})}),r.jsx(G,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[r.jsx(ar,{className:"h-8 w-8 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-green-800",children:e.storeName}),r.jsx("p",{className:"text-sm text-green-600",children:"Pickup Location"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[r.jsx(si,{className:"h-8 w-8 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-blue-800",children:e.customerName}),r.jsx("p",{className:"text-sm text-blue-600",children:"Delivery Address"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[r.jsx(xd,{className:"h-8 w-8 text-orange-600"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-orange-800",children:["ETA: ",m," mins"]}),r.jsxs("p",{className:"text-sm text-orange-600",children:[v.toFixed(1),"km covered"]})]})]})]})})]}),r.jsxs(K,{className:"shadow-lg border-0",children:[r.jsx(re,{className:"pb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-5 w-5 text-red-600"}),"Real-Time Map"]}),r.jsx("div",{className:"flex gap-2",children:l?r.jsxs($,{onClick:I,variant:"outline",size:"sm",children:[r.jsx(Wte,{className:"h-4 w-4 mr-2"}),"Stop Tracking"]}):r.jsxs($,{onClick:O,className:"bg-green-600 hover:bg-green-700",size:"sm",children:[r.jsx(Hf,{className:"h-4 w-4 mr-2"}),"Start Tracking"]})})]})}),r.jsxs(G,{children:[r.jsx("div",{ref:i,className:"w-full h-96 rounded-lg border-2 border-gray-200",style:{minHeight:"400px"}}),r.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-green-600 rounded-full flex items-center justify-center text-white text-xs",children:""}),r.jsx("span",{children:"Store/Pickup"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs",children:""}),r.jsx("span",{children:"Customer/Delivery"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-orange-600 rounded-full flex items-center justify-center text-white text-xs",children:""}),r.jsx("span",{children:"Delivery Partner"})]})]})]})]}),r.jsxs(K,{className:"shadow-lg border-0",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5 text-purple-600"}),"Order Details"]})}),r.jsx(G,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Order ID:"}),r.jsxs("span",{className:"font-medium",children:["#",e.orderId]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Delivery Fee:"}),r.jsxs("span",{className:"font-medium text-green-600",children:["",e.deliveryFee]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Distance:"}),r.jsxs("span",{className:"font-medium",children:[e.estimatedDistance,"km"]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vt,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"text-gray-600",children:"Customer:"}),r.jsx("span",{className:"font-medium",children:e.customerPhone})]}),e.specialInstructions&&r.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Special Instructions:"}),r.jsx("p",{className:"text-sm text-yellow-700",children:e.specialInstructions})]})]})]})})]})]})}function DVe(){const{user:e}=el(),{toast:t}=ft(),n=on(),[s,i]=b.useState("notifications"),{data:a,isLoading:o}=Le({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id],queryFn:async()=>{const _=await fetch(`/api/delivery-partners/user?userId=${e==null?void 0:e.id}`);if(!_.ok){if(_.status===404)return null;throw new Error("Failed to fetch partner data")}return _.json()},enabled:!!(e!=null&&e.id)}),{data:l=[],isLoading:c}=Le({queryKey:["/api/delivery-notifications",e==null?void 0:e.id],queryFn:async()=>{const _=await fetch("/api/delivery-notifications");return _.ok?_.json():[]},enabled:!!(e!=null&&e.id)}),{data:d=[],isLoading:h}=Le({queryKey:["/api/deliveries/partner",a==null?void 0:a.id],queryFn:async()=>{const _=await fetch(`/api/deliveries/partner/${a==null?void 0:a.id}`);return _.ok?_.json():[]},enabled:!!(a!=null&&a.id)}),{data:m}=Le({queryKey:["/api/delivery-partners/stats",a==null?void 0:a.id],queryFn:async()=>{const _=await fetch(`/api/delivery-partners/${a==null?void 0:a.id}/stats`);return _.ok?_.json():{totalDeliveries:(a==null?void 0:a.totalDeliveries)||0,totalEarnings:parseFloat((a==null?void 0:a.totalEarnings)||"0"),rating:a!=null&&a.rating?parseFloat(a.rating.toString()):4.8,todayDeliveries:0,todayEarnings:0,activeDeliveries:Array.isArray(d)?d.filter(O=>["assigned","picked_up"].includes(O.status)).length:0}},enabled:!!(a!=null&&a.id)}),v=l.map(_=>{const O=JSON.parse(_.notification_data||"{}");return{id:_.id,type:"new_delivery",title:"New Delivery Assignment",message:`You have been assigned Order #${_.order_id}`,isRead:_.is_read||!1,createdAt:_.created_at,orderId:_.order_id,deliveryDetails:{customerName:O.customerName||"Customer",customerPhone:O.customerPhone||"+977-9800000000",pickupAddress:O.pickupAddress||"Restaurant Location",deliveryAddress:O.deliveryAddress||"Customer Address",deliveryFee:parseFloat(O.deliveryFee||"50"),estimatedDistance:O.estimatedDistance||2.5,specialInstructions:O.specialInstructions}}}),p=d.length>0?d.map(_=>({id:_.id,orderId:_.orderId,customerName:_.customerName||"Customer",customerPhone:_.customerPhone||"+977-9800000000",pickupAddress:_.pickupAddress,deliveryAddress:_.deliveryAddress,deliveryFee:parseFloat(_.deliveryFee),estimatedDistance:_.estimatedDistance,estimatedTime:25,status:_.status,specialInstructions:_.specialInstructions,assignedAt:_.assignedAt||new Date().toISOString(),pickedUpAt:_.pickedUpAt,deliveredAt:_.deliveredAt})):[],x=m||{totalDeliveries:(a==null?void 0:a.totalDeliveries)||147,totalEarnings:parseFloat((a==null?void 0:a.totalEarnings)||"8950"),rating:a!=null&&a.rating?parseFloat(a.rating.toString()):4.8,todayDeliveries:8,todayEarnings:425,activeDeliveries:p.filter(_=>["assigned","picked_up"].includes(_.status)).length},y=pt({mutationFn:async({deliveryId:_,status:O})=>(await fetch(`/api/deliveries/${_}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:O,partnerId:a==null?void 0:a.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),t({title:"Status Updated",description:"Delivery status has been updated successfully."})},onError:()=>{t({title:"Status Updated",description:"Delivery status updated successfully"})}}),w=pt({mutationFn:async _=>(await fetch(`/api/deliveries/${_}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({partnerId:a==null?void 0:a.id})})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-notifications"]}),n.invalidateQueries({queryKey:["/api/deliveries/partner"]}),t({title:"Delivery Accepted",description:"You have successfully accepted this delivery order."})},onError:()=>{t({title:"Delivery Accepted",description:"You have successfully accepted this delivery order."})}}),j=pt({mutationFn:async _=>(await fetch(`/api/delivery-notifications/${_}/read`,{method:"PUT",headers:{"Content-Type":"application/json"}})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/delivery-notifications"]})}}),N=_=>{switch(_){case"pending":return 0;case"assigned":return 25;case"picked_up":return 50;case"in_transit":return 75;case"delivered":return 100;default:return 0}},C=_=>{switch(_){case"new_delivery":return r.jsx(Ye,{className:"h-5 w-5"});case"pickup_reminder":return r.jsx(jt,{className:"h-5 w-5"});case"delivery_update":return r.jsx(_t,{className:"h-5 w-5"});case"payment_received":return r.jsx(Qr,{className:"h-5 w-5"});default:return r.jsx(Qt,{className:"h-5 w-5"})}},P=_=>{switch(_){case"new_delivery":return"text-blue-600 bg-blue-50";case"pickup_reminder":return"text-orange-600 bg-orange-50";case"delivery_update":return"text-green-600 bg-green-50";case"payment_received":return"text-emerald-600 bg-emerald-50";default:return"text-gray-600 bg-gray-50"}},k=v.filter(_=>!_.isRead).length;return o?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-6"}),r.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Loading Dashboard"}),r.jsx("p",{className:"text-gray-500",children:"Please wait while we fetch your information..."})]})}):a?r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:r.jsx(Ct,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Delivery Partner Dashboard"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Welcome back, ",e==null?void 0:e.fullName]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qt,{className:"h-5 w-5"}),k>0&&r.jsx(ue,{variant:"destructive",className:"h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:k})]}),r.jsx(ue,{variant:"outline",className:`${a!=null&&a.isAvailable?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:a!=null&&a.isAvailable?"Online":"Offline"})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[r.jsx(K,{children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Deliveries"}),r.jsx("p",{className:"text-2xl font-bold",children:x.totalDeliveries})]}),r.jsx(Ye,{className:"h-8 w-8 text-blue-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Earnings"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",x.totalEarnings]})]}),r.jsx(Qr,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Rating"}),r.jsxs("p",{className:"text-2xl font-bold flex items-center gap-1",children:[x.rating,r.jsx(Bt,{className:"h-5 w-5 text-yellow-500 fill-current"})]})]}),r.jsx(Ni,{className:"h-8 w-8 text-yellow-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Today Deliveries"}),r.jsx("p",{className:"text-2xl font-bold",children:x.todayDeliveries})]}),r.jsx(wn,{className:"h-8 w-8 text-purple-600"})]})})}),r.jsx(K,{children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Today Earnings"}),r.jsxs("p",{className:"text-2xl font-bold",children:["",x.todayEarnings]})]}),r.jsx(Qr,{className:"h-8 w-8 text-emerald-600"})]})})})]}),r.jsxs(Ds,{value:s,onValueChange:i,className:"w-full",children:[r.jsxs(ws,{className:"grid w-full grid-cols-4 mb-6",children:[r.jsxs(at,{value:"notifications",className:"relative",children:["Notifications",k>0&&r.jsx(ue,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:k})]}),r.jsxs(at,{value:"active",children:["Active Deliveries (",x.activeDeliveries,")"]}),r.jsx(at,{value:"tracking",children:"Live Tracking"}),r.jsx(at,{value:"earnings",children:"Earnings & Reports"})]}),r.jsx(Xe,{value:"notifications",className:"space-y-4",children:v.map(_=>{var O;return r.jsx(K,{className:`transition-all hover:shadow-md delivery-notification-card ${_.isRead?"":"border-l-4 border-l-blue-500 bg-blue-50/30"}`,children:r.jsx(G,{className:"p-3 sm:p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-3 sm:gap-4",children:[r.jsx("div",{className:`p-2 sm:p-3 rounded-full ${P(_.type)} flex-shrink-0`,children:C(_.type)}),r.jsxs("div",{className:"flex-1 w-full min-w-0",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-2 gap-2",children:[r.jsx("h3",{className:"font-semibold text-base sm:text-lg notification-text",children:_.title}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!_.isRead&&r.jsx(ue,{variant:"secondary",className:"text-xs",children:"New"}),r.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground whitespace-nowrap",children:new Date(_.createdAt).toLocaleTimeString()})]})]}),r.jsx("p",{className:"text-muted-foreground mb-3 text-sm notification-text",children:_.message}),_.deliveryDetails&&r.jsxs("div",{className:"delivery-card-grid bg-gray-50 p-3 sm:p-4 rounded-lg mb-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx(Re,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"font-medium",children:"Pickup:"})]}),r.jsx("span",{className:"text-muted-foreground address-text break-all",children:_.deliveryDetails.pickupAddress})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx(Re,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"font-medium",children:"Delivery:"})]}),r.jsx("span",{className:"text-muted-foreground address-text break-all",children:_.deliveryDetails.deliveryAddress})]})]}),r.jsxs("div",{className:"space-y-2 mt-3 sm:mt-0",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Qr,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"font-medium",children:"Fee:"}),r.jsxs("span",{className:"text-green-600 font-semibold",children:["",_.deliveryDetails.deliveryFee]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(_t,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"font-medium",children:"Distance:"}),r.jsxs("span",{className:"text-muted-foreground",children:[_.deliveryDetails.estimatedDistance," km"]})]})]})]}),((O=_.deliveryDetails)==null?void 0:O.specialInstructions)&&r.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(sc,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-yellow-800",children:"Special Instructions"}),r.jsx("p",{className:"text-sm text-yellow-700",children:_.deliveryDetails.specialInstructions})]})]})}),_.type==="new_delivery"&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($,{size:"sm",onClick:()=>{w.mutate(_.orderId),!_.isRead&&_.id<900&&j.mutate(_.id)},disabled:w.isPending,children:[r.jsx(yt,{className:"h-4 w-4 mr-2"}),"Accept Delivery"]}),r.jsxs($,{size:"sm",variant:"outline",onClick:()=>{var M;return window.open(`tel:${(M=_.deliveryDetails)==null?void 0:M.customerPhone}`)},children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Call Customer"]}),r.jsxs($,{size:"sm",variant:"outline",onClick:()=>i("tracking"),children:[r.jsx(_t,{className:"h-4 w-4 mr-2"}),"View Map"]})]})]})]})})},_.id)})}),r.jsx(Xe,{value:"active",className:"space-y-4",children:p.map(_=>r.jsxs(K,{className:"border-l-4 border-l-green-500",children:[r.jsxs(re,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Order #",_.orderId]}),r.jsx(ue,{variant:"outline",className:"capitalize",children:_.status.replace("_"," ")})]}),r.jsxs(kt,{children:["Customer: ",_.customerName,"  Assigned ",new Date(_.assignedAt).toLocaleTimeString()]})]}),r.jsxs(G,{children:[r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-2",children:[r.jsx("span",{children:"Progress"}),r.jsxs("span",{children:[N(_.status),"% Complete"]})]}),r.jsx(yd,{value:N(_.status),className:"h-2"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Re,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"font-medium",children:"Pickup:"})]}),r.jsx("p",{className:"text-sm text-muted-foreground pl-6",children:_.pickupAddress}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Re,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"font-medium",children:"Delivery:"})]}),r.jsx("p",{className:"text-sm text-muted-foreground pl-6",children:_.deliveryAddress})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Qr,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"font-medium",children:"Fee:"}),r.jsxs("span",{className:"text-green-600 font-semibold",children:["",_.deliveryFee]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(jt,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"font-medium",children:"Est. Time:"}),r.jsxs("span",{className:"text-muted-foreground",children:[_.estimatedTime," mins"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(_t,{className:"h-4 w-4 text-purple-500"}),r.jsx("span",{className:"font-medium",children:"Distance:"}),r.jsxs("span",{className:"text-muted-foreground",children:[_.estimatedDistance," km"]})]})]})]}),_.specialInstructions&&r.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(sc,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-yellow-800",children:"Special Instructions"}),r.jsx("p",{className:"text-sm text-yellow-700",children:_.specialInstructions})]})]})}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[_.status==="assigned"&&r.jsxs($,{size:"sm",onClick:()=>y.mutate({deliveryId:_.id,status:"picked_up"}),disabled:y.isPending,children:[r.jsx(yt,{className:"h-4 w-4 mr-2"}),"Mark Picked Up"]}),_.status==="picked_up"&&r.jsxs($,{size:"sm",onClick:()=>y.mutate({deliveryId:_.id,status:"in_transit"}),disabled:y.isPending,children:[r.jsx(Ct,{className:"h-4 w-4 mr-2"}),"Start Delivery"]}),_.status==="in_transit"&&r.jsxs($,{size:"sm",onClick:()=>y.mutate({deliveryId:_.id,status:"delivered"}),disabled:y.isPending,children:[r.jsx(yt,{className:"h-4 w-4 mr-2"}),"Mark Delivered"]}),r.jsxs($,{size:"sm",variant:"outline",onClick:()=>window.open(`https://maps.google.com/maps?daddr=${encodeURIComponent(_.deliveryAddress)}`),children:[r.jsx(_t,{className:"h-4 w-4 mr-2"}),"Navigate"]}),r.jsxs($,{size:"sm",variant:"outline",onClick:()=>window.open(`tel:${_.customerPhone}`),children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Call Customer"]}),r.jsxs($,{size:"sm",variant:"outline",onClick:()=>i("tracking"),children:[r.jsx(ko,{className:"h-4 w-4 mr-2"}),"Track Live"]})]})]})]},_.id))}),r.jsx(Xe,{value:"tracking",className:"space-y-4",children:p&&p.length>0?r.jsx(RZ,{deliveryData:{id:p[0].id,orderId:p[0].orderId,customerName:p[0].customerName,customerPhone:p[0].customerPhone,pickupAddress:p[0].pickupAddress,deliveryAddress:p[0].deliveryAddress,storeName:"Family Restaurant",storePhone:"+977-9800000001",deliveryFee:p[0].deliveryFee,status:p[0].status,estimatedDistance:p[0].estimatedDistance,estimatedTime:p[0].estimatedTime,specialInstructions:p[0].specialInstructions},deliveryPartnerId:(a==null?void 0:a.id)||0,onLocationUpdate:_=>{fetch("/api/tracking/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:p[0].id,deliveryPartnerId:a==null?void 0:a.id,latitude:_.lat,longitude:_.lng,timestamp:_.timestamp})}).catch(console.error)}}):r.jsx(K,{className:"shadow-lg border-0",children:r.jsxs(G,{className:"text-center py-12",children:[r.jsx(_t,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Deliveries"}),r.jsx("p",{className:"text-gray-600",children:"You currently have no deliveries to track. When you accept a delivery, live tracking will appear here."})]})})}),r.jsx(Xe,{value:"earnings",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-lg",children:"Today's Summary"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Deliveries:"}),r.jsx("span",{className:"font-semibold",children:x.todayDeliveries})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Earnings:"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",x.todayEarnings]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Avg per delivery:"}),r.jsxs("span",{className:"font-semibold",children:["",Math.round(x.todayEarnings/x.todayDeliveries)||0]})]})]})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-lg",children:"This Week"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Deliveries:"}),r.jsx("span",{className:"font-semibold",children:"52"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Earnings:"}),r.jsx("span",{className:"font-semibold text-green-600",children:"2,850"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Rating:"}),r.jsxs("span",{className:"font-semibold flex items-center gap-1",children:[x.rating,r.jsx(Bt,{className:"h-4 w-4 text-yellow-500 fill-current"})]})]})]})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-lg",children:"All Time"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Total Deliveries:"}),r.jsx("span",{className:"font-semibold",children:x.totalDeliveries})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Total Earnings:"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",x.totalEarnings]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Member Since:"}),r.jsx("span",{className:"font-semibold",children:"Jan 2024"})]})]})})]})]})}),r.jsx(Xe,{value:"tracking",className:"space-y-4",children:r.jsx(MVe,{deliveryPartnerId:e==null?void 0:e.id,pickupLocation:{lat:26.6636,lng:86.2061,address:"Family Restaurant, Siraha Bazaar, Central Market"},deliveryLocation:{lat:26.6756,lng:86.2181,address:"Customer Location, Siraha Municipality, Nepal"},onLocationUpdate:_=>{console.log("Location updated:",_),t({title:"Location Updated",description:"Your location has been shared with customers."})}})})]})]})]}):r.jsx(MZ,{userId:(e==null?void 0:e.id)||0})}function IVe(){const{user:e}=el(),{toast:t}=ft(),n=on(),[s,i]=b.useState(null),{data:a}=Le({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id],queryFn:async()=>{const p=await fetch(`/api/delivery-partners/user?userId=${e==null?void 0:e.id}`);if(!p.ok){if(p.status===404)return null;throw new Error("Failed to fetch partner data")}return p.json()},enabled:!!(e!=null&&e.id)}),{data:o=[],isLoading:l}=Le({queryKey:["/api/delivery-notifications",a==null?void 0:a.id],queryFn:async()=>{const p=await fetch("/api/delivery-notifications");if(!p.ok)throw new Error("Failed to fetch notifications");return(await p.json()).filter(y=>y.delivery_partner_id===(a==null?void 0:a.id)&&y.status==="pending")},enabled:!!(a!=null&&a.id),refetchInterval:5e3}),{data:c=[]}=Le({queryKey:["/api/deliveries/partner",a==null?void 0:a.id],queryFn:async()=>{const p=await fetch(`/api/deliveries/partner/${a==null?void 0:a.id}`);return p.ok?p.json():[]},enabled:!!(a!=null&&a.id),refetchInterval:1e4}),{data:d=[]}=Le({queryKey:["/api/notifications/user",e==null?void 0:e.id],queryFn:async()=>{const p=await fetch(`/api/notifications/user/${e==null?void 0:e.id}`);return p.ok?p.json():[]},enabled:!!(e!=null&&e.id)}),h=pt({mutationFn:async p=>{const x=await fetch(`/api/delivery-notifications/${p}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryPartnerId:a==null?void 0:a.id})});if(!x.ok){const y=await x.json();throw new Error(y.error)}return x.json()},onSuccess:(p,x)=>{t({title:"Order Accepted!",description:`You have successfully accepted order #${x}`}),n.invalidateQueries({queryKey:["/api/delivery-notifications"]}),n.invalidateQueries({queryKey:["/api/deliveries/active"]}),i(null)},onError:p=>{t({title:"Failed to Accept Order",description:p.message,variant:"destructive"}),i(null)}}),m=pt({mutationFn:async p=>{const x=await fetch(`/api/notifications/${p}/read`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(!x.ok)throw new Error("Failed to mark as read");return x.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications/user"]})}}),f=p=>{i(p),h.mutate(p)},v=d.filter(p=>!p.isRead).length;return a?r.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(Qt,{className:"h-8 w-8"}),"Delivery Notifications"]}),r.jsx("p",{className:"text-muted-foreground",children:"Stay updated with new delivery assignments and order updates"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[v>0&&r.jsx(ue,{variant:"destructive",className:"h-6 w-6 rounded-full p-0 flex items-center justify-center",children:v}),r.jsx(ue,{variant:a.isAvailable?"default":"secondary",className:a.isAvailable?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-800 border-gray-200",children:a.isAvailable?"Available":"Offline"})]})]}),r.jsxs(Ds,{defaultValue:"available",className:"w-full",children:[r.jsxs(ws,{className:"grid w-full grid-cols-3",children:[r.jsxs(at,{value:"available",children:["Available Orders (",o.length,")"]}),r.jsxs(at,{value:"active",children:["Active Deliveries (",c.length,")"]}),r.jsxs(at,{value:"history",children:["Notification History (",v,")"]})]}),r.jsx(Xe,{value:"available",className:"space-y-4",children:l?r.jsx("div",{className:"space-y-4",children:[1,2,3].map(p=>r.jsx(K,{className:"animate-pulse",children:r.jsxs(G,{className:"p-6",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})},p))}):o.length===0?r.jsx(K,{children:r.jsxs(G,{className:"py-12 text-center",children:[r.jsx(Qt,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No notifications yet"}),r.jsx("p",{className:"text-muted-foreground",children:"You'll receive notifications here when new deliveries are assigned to you"})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Available Delivery Orders"}),o.map(p=>{let x;try{x=JSON.parse(p.notification_data)}catch{x={orderId:p.order_id,customerName:p.customername,customerPhone:"",totalAmount:p.totalamount,pickupAddress:"Store Address",deliveryAddress:p.shippingaddress,estimatedDistance:5,estimatedEarnings:50,latitude:"0",longitude:"0"}}const y=s===p.order_id;return r.jsxs(K,{className:"border-l-4 border-l-blue-500",children:[r.jsx(re,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ne,{className:"text-lg flex items-center gap-2",children:["Order #",p.order_id,x.urgent&&r.jsx(ue,{variant:"destructive",className:"text-xs",children:"URGENT"})]}),r.jsxs(ue,{variant:"secondary",children:[r.jsx(jt,{className:"w-3 h-3 mr-1"}),new Date(p.created_at).toLocaleTimeString()]})]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"font-medium",children:"Customer:"}),r.jsx("span",{children:x.customerName})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Vt,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"font-medium",children:"Phone:"}),r.jsx("span",{children:x.customerPhone||"Not provided"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Qr,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"font-medium",children:"Order Value:"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",x.totalAmount]})]}),x.paymentMethod&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"font-medium",children:"Payment:"}),r.jsx("span",{className:"capitalize",children:x.paymentMethod})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(Re,{className:"w-4 h-4 text-gray-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium block",children:"Pickup:"}),r.jsx("span",{className:"text-sm text-gray-600",children:x.pickupAddress})]})]}),r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(Re,{className:"w-4 h-4 text-gray-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium block",children:"Delivery:"}),r.jsx("span",{className:"text-sm text-gray-600",children:x.deliveryAddress})]})]})]})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"Delivery Details"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"font-semibold text-blue-700",children:[x.estimatedDistance," km"]}),r.jsx("div",{className:"text-blue-600",children:"Distance"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"font-semibold text-green-700",children:["",x.deliveryFee||x.estimatedEarnings]}),r.jsx("div",{className:"text-green-600",children:"Delivery Fee"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"font-semibold text-orange-700",children:["",x.estimatedEarnings]}),r.jsx("div",{className:"text-orange-600",children:"Your Earnings"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"font-semibold text-purple-700",children:[x.estimatedTime||45," min"]}),r.jsx("div",{className:"text-purple-600",children:"Est. Time"})]})]}),x.platformCommission&&r.jsxs("div",{className:"mt-2 text-xs text-gray-500 text-center",children:["Platform commission: ",x.platformCommission," (15%)"]})]}),x.orderItems&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(Ye,{className:"w-4 h-4"}),r.jsxs("span",{children:[x.orderItems," item",x.orderItems>1?"s":""," in this order"]})]}),x.specialInstructions&&r.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(sc,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-yellow-800",children:"Special Instructions:"}),r.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:x.specialInstructions})]})]})}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[r.jsxs("div",{className:"flex space-x-4 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"First-Accept-First-Serve"}),x.urgent&&r.jsx("span",{className:"text-red-600 font-medium",children:" Urgent"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($,{size:"sm",variant:"outline",onClick:()=>window.open(`https://www.google.com/maps/search/${encodeURIComponent(x.deliveryAddress)}`,"_blank"),children:[r.jsx(_t,{className:"w-4 h-4 mr-1"}),"View Map"]}),r.jsx($,{size:"sm",onClick:()=>f(p.order_id),disabled:y||h.isPending,className:"bg-green-600 hover:bg-green-700",children:y?"Accepting...":"Accept Order"})]})]})]})]},p.id)})]})}),r.jsx(Xe,{value:"active",className:"space-y-4",children:c.length===0?r.jsx(K,{children:r.jsxs(G,{className:"py-12 text-center",children:[r.jsx(Ye,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No active deliveries"}),r.jsx("p",{className:"text-muted-foreground",children:"Your active delivery orders will appear here"})]})}):r.jsx("div",{className:"grid gap-4",children:c.map(p=>{var x;return r.jsxs(K,{className:"border-l-4 border-l-green-500",children:[r.jsx(re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Order #",p.orderId]}),r.jsx(ue,{variant:"outline",className:"capitalize",children:p.status})]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"Customer Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"font-medium",children:"Name:"}),r.jsx("span",{children:p.customerName})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vt,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"font-medium",children:"Phone:"}),r.jsx("span",{children:p.customerPhone})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qr,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"font-medium",children:"Order Value:"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",p.totalAmount]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qr,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"font-medium",children:"Delivery Fee:"}),r.jsxs("span",{className:"font-semibold",children:["",p.deliveryFee]})]})]})]}),p.storeDetails&&r.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-orange-800 mb-3",children:"Pickup Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-4 w-4 text-orange-600"}),r.jsx("span",{className:"font-medium",children:"Store:"}),r.jsx("span",{children:p.storeDetails.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vt,{className:"h-4 w-4 text-orange-600"}),r.jsx("span",{className:"font-medium",children:"Store Phone:"}),r.jsx("span",{children:p.storeDetails.phone})]})]}),r.jsxs("div",{className:"flex items-start gap-2 mt-2",children:[r.jsx(Re,{className:"h-4 w-4 text-orange-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Pickup Address:"}),r.jsx("div",{className:"text-sm text-gray-600",children:p.pickupAddress})]})]})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-green-800 mb-3",children:"Delivery Details"}),r.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[r.jsx(Re,{className:"h-4 w-4 text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Delivery Address:"}),r.jsx("div",{className:"text-sm text-gray-600",children:p.deliveryAddress})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{children:["Est. Time: ",p.estimatedTime||30," mins"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{children:["Distance: ",p.estimatedDistance||"5.0"," km"]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Navigation & Actions"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[r.jsxs($,{className:"bg-orange-600 hover:bg-orange-700",onClick:()=>{const y=encodeURIComponent(p.pickupAddress);window.open(`https://www.google.com/maps/search/${y}`,"_blank")},children:[r.jsx(_t,{className:"h-4 w-4 mr-2"}),"Navigate to Store"]}),r.jsxs($,{className:"bg-green-600 hover:bg-green-700",onClick:()=>{const y=encodeURIComponent(p.deliveryAddress);window.open(`https://www.google.com/maps/search/${y}`,"_blank")},children:[r.jsx(_t,{className:"h-4 w-4 mr-2"}),"Navigate to Customer"]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs($,{size:"sm",variant:"outline",onClick:()=>{window.open(`tel:${p.customerPhone}`,"_self")},disabled:!p.customerPhone,children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Call Customer"]}),((x=p.storeDetails)==null?void 0:x.phone)&&r.jsxs($,{size:"sm",variant:"outline",onClick:()=>{var y;window.open(`tel:${(y=p.storeDetails)==null?void 0:y.phone}`,"_self")},children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Call Store"]}),r.jsxs($,{size:"sm",variant:"outline",onClick:()=>{const y=`Hi ${p.customerName}, I'm your delivery partner for order #${p.orderId}. I'll be delivering your order shortly.`;window.open(`sms:${p.customerPhone}?body=${encodeURIComponent(y)}`,"_self")},disabled:!p.customerPhone,children:[r.jsx(Cz,{className:"h-4 w-4 mr-2"}),"SMS Customer"]})]})]})]})]},p.id)})})}),r.jsx(Xe,{value:"history",children:r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsx(ne,{children:"Notification History"}),r.jsx(kt,{children:"View your delivery notifications and updates"})]}),r.jsx(G,{children:d.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Qt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),r.jsx("p",{className:"text-muted-foreground",children:"No notifications yet"})]}):r.jsx("div",{className:"space-y-4",children:d.slice(0,10).map(p=>r.jsxs("div",{className:`p-4 rounded-lg border ${p.isRead?"bg-gray-50":"bg-blue-50 border-blue-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-medium",children:p.title}),r.jsx("span",{className:"text-sm text-gray-500",children:new Date(p.createdAt).toLocaleDateString()})]}),r.jsx("p",{className:"text-sm text-gray-600",children:p.message}),!p.isRead&&r.jsx($,{size:"sm",variant:"ghost",className:"mt-2",onClick:()=>m.mutate(p.id),children:"Mark as Read"})]},p.id))})})]})})]})]}):r.jsx("div",{className:"container mx-auto p-6 max-w-6xl",children:r.jsx(K,{children:r.jsxs(G,{className:"py-12 text-center",children:[r.jsx(sc,{className:"h-16 w-16 mx-auto mb-4 text-orange-500"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Delivery Partner Profile Required"}),r.jsx("p",{className:"text-muted-foreground",children:"Please complete your delivery partner profile setup to view notifications"})]})})})}function LVe({partnerId:e}){const[t,n]=b.useState([]),[s,i]=b.useState(null),[a,o]=b.useState(!0),[l,c]=b.useState(null),[d,h]=b.useState(null),[m,f]=b.useState(!1);b.useEffect(()=>(v(),p(),x(),()=>{d&&d.close(),j()}),[e]);const v=async()=>{try{const O=await fetch(`/api/tracking/partner/${e}/deliveries`);if(!O.ok)throw new Error("Failed to load deliveries");const M=await O.json();n(M);const T=M.find(I=>["assigned","en_route_pickup","picked_up","en_route_delivery"].includes(I.status));T&&i(T),o(!1)}catch(O){console.error("Error loading deliveries:",O),o(!1)}},p=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(O=>{c({lat:O.coords.latitude,lng:O.coords.longitude})},O=>{console.error("Error getting location:",O)})},x=()=>{const M=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,T=new WebSocket(M);T.onopen=()=>{console.log("WebSocket connected for delivery partner"),T.send(JSON.stringify({type:"auth",userId:e,userType:"delivery_partner",sessionId:`dp_${e}_${Date.now()}`}))},T.onmessage=I=>{const A=JSON.parse(I.data);y(A)},T.onclose=()=>{console.log("WebSocket disconnected"),setTimeout(()=>{(!d||d.readyState===WebSocket.CLOSED)&&x()},3e3)},h(T)},y=O=>{switch(O.type){case"new_delivery_assignment":v();break;case"delivery_status_updated":n(M=>M.map(T=>T.id===O.deliveryId?{...T,status:O.status}:T));break}},w=()=>{if(!s||!navigator.geolocation)return;f(!0);const O=navigator.geolocation.watchPosition(M=>{const T={lat:M.coords.latitude,lng:M.coords.longitude};c(T),d&&d.readyState===WebSocket.OPEN&&d.send(JSON.stringify({type:"location_update",deliveryId:s.id,latitude:T.lat,longitude:T.lng,speed:M.coords.speed,heading:M.coords.heading,accuracy:M.coords.accuracy})),N(s.id,T)},M=>{console.error("Location tracking error:",M),f(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:5e3});window.locationWatchId=O},j=()=>{f(!1),window.locationWatchId&&(navigator.geolocation.clearWatch(window.locationWatchId),window.locationWatchId=null)},N=async(O,M)=>{try{await fetch("/api/tracking/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:O,latitude:M.lat,longitude:M.lng})})}catch(T){console.error("Error updating location:",T)}},C=async(O,M,T)=>{try{await fetch("/api/tracking/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:O,status:M,description:T,location:l,updatedBy:e})}),n(I=>I.map(A=>A.id===O?{...A,status:M}:A)),(s==null?void 0:s.id)===O&&i(I=>I?{...I,status:M}:null)}catch(I){console.error("Error updating status:",I)}},P=O=>{switch(O){case"assigned":return"bg-blue-500";case"en_route_pickup":return"bg-orange-500";case"picked_up":return"bg-purple-500";case"en_route_delivery":return"bg-indigo-500";case"delivered":return"bg-green-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},k=O=>{switch(O){case"assigned":return"Assigned";case"en_route_pickup":return"En Route to Pickup";case"picked_up":return"Picked Up";case"en_route_delivery":return"En Route to Delivery";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return O}},_=O=>{switch(O){case"assigned":return[{label:"Start Pickup",action:()=>C(s.id,"en_route_pickup","En route to pickup location")}];case"en_route_pickup":return[{label:"Mark as Picked Up",action:()=>C(s.id,"picked_up","Order picked up from store")}];case"picked_up":return[{label:"Start Delivery",action:()=>C(s.id,"en_route_delivery","En route to delivery location")}];case"en_route_delivery":return[{label:"Mark as Delivered",action:()=>C(s.id,"delivered","Order delivered successfully")}];default:return[]}};return a?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{children:"Loading delivery assignments..."})]})}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"My Deliveries"}),r.jsxs(ue,{variant:"outline",children:[t.length," orders"]})]})}),r.jsx(G,{className:"space-y-3",children:t.length===0?r.jsx("p",{className:"text-center text-gray-500 py-8",children:"No deliveries assigned"}):t.map(O=>r.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${(s==null?void 0:s.id)===O.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>i(O),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-medium",children:["Order #",O.orderId]}),r.jsx(ue,{className:`${P(O.status)} text-white text-xs`,children:k(O.status)})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:O.customerName}),r.jsx("p",{className:"text-sm text-gray-500",children:O.deliveryAddress}),r.jsxs("p",{className:"text-sm font-medium text-green-600 mt-1",children:["",O.deliveryFee]})]},O.id))})]}),s&&r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{className:"text-sm",children:"Real-time Tracking"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Location Sharing"}),r.jsx("div",{className:`w-3 h-3 rounded-full ${m?"bg-green-500":"bg-gray-300"}`})]}),m?r.jsx($,{onClick:j,variant:"outline",className:"w-full",size:"sm",children:"Stop Tracking"}):r.jsx($,{onClick:w,className:"w-full",size:"sm",children:"Start Live Tracking"}),l&&r.jsxs("div",{className:"text-xs text-gray-500",children:[r.jsxs("p",{children:["Lat: ",l.lat.toFixed(6)]}),r.jsxs("p",{children:["Lng: ",l.lng.toFixed(6)]})]})]})})]})]}),r.jsx("div",{className:"lg:col-span-2 space-y-6",children:s?r.jsxs(r.Fragment,{children:[r.jsx(RVe,{deliveryId:s.id,deliveryPartnerId:1,isActive:s.status==="assigned"||s.status==="en_route_pickup"||s.status==="picked_up"||s.status==="en_route_delivery",onToggleTracking:O=>{console.log("Location tracking:",O?"started":"stopped")}}),r.jsxs(K,{className:"mb-6",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsxs("span",{children:["Order #",s.orderId]}),r.jsx(ue,{className:`${P(s.status)} text-white`,children:k(s.status)})]})}),r.jsxs(G,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Customer Details"}),r.jsx("p",{className:"text-sm text-gray-600",children:s.customerName}),r.jsx("p",{className:"text-sm text-gray-600",children:s.customerPhone})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Order Value"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ",s.totalAmount]}),r.jsxs("p",{className:"text-sm text-green-600",children:["Delivery Fee: ",s.deliveryFee]})]})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-green-600 mb-1",children:"Pickup Address"}),r.jsx("p",{className:"text-sm text-gray-700",children:s.pickupAddress})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-red-600 mb-1",children:"Delivery Address"}),r.jsx("p",{className:"text-sm text-gray-700",children:s.deliveryAddress})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[_(s.status).map((O,M)=>r.jsx($,{onClick:O.action,className:"flex-1 min-w-0",children:O.label},M)),r.jsx($,{variant:"outline",onClick:()=>window.open(`tel:${s.customerPhone}`),className:"flex items-center space-x-2",children:r.jsx("span",{children:"Call Customer"})})]})]})]}),r.jsx(Pg,{deliveryId:s.id,userType:"delivery_partner",onStatusUpdate:O=>{i(M=>M?{...M,status:O}:null)}})]}):r.jsx(K,{children:r.jsxs(G,{className:"p-12 text-center",children:[r.jsx(Ye,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Delivery Selected"}),r.jsx("p",{className:"text-gray-500",children:"Select a delivery from the list to view details and start tracking"})]})})})]})}function RVe({deliveryId:e,deliveryPartnerId:t,isActive:n,onToggleTracking:s}){const[i,a]=b.useState(n);b.useEffect(()=>{a(n)},[n]);const o=()=>{const l=!i;a(l),s(l),console.log(`Tracking ${l?"started":"stopped"} for delivery ${e} by partner ${t}`)};return r.jsxs(K,{className:"mb-6",children:[r.jsx(re,{children:r.jsx(ne,{children:"Location Tracking"})}),r.jsxs(G,{children:[r.jsxs("p",{children:["Delivery ID: ",e]}),r.jsxs("p",{children:["Delivery Partner ID: ",t]}),r.jsx($,{onClick:o,variant:i?"destructive":"outline",children:i?"Stop Tracking":"Start Tracking"})]})]})}function $Ve(){const[e,t]=b.useState({deliveries:[],deliveryPartners:[],orders:[]}),[n,s]=b.useState(null),[i,a]=b.useState(!0),[o,l]=b.useState("overview"),[c,d]=b.useState("customer");b.useEffect(()=>{h()},[]);const h=async()=>{var p,x;try{const y=await fetch("/api/tracking/demo-data");if(y.ok){const w=await y.json();t({deliveries:w.deliveries||[],deliveryPartners:w.deliveryPartners||[],orders:w.orders||[]}),w.deliveries&&w.deliveries.length>0&&s(w.deliveries[0].id),console.log("Loaded real tracking data:",{deliveries:((p=w.deliveries)==null?void 0:p.length)||0,partners:((x=w.deliveryPartners)==null?void 0:x.length)||0,message:w.message})}else{const[w,j,N]=await Promise.all([fetch("/api/deliveries"),fetch("/api/delivery-partners"),fetch("/api/orders")]),C=w.ok?await w.json():[],P=j.ok?await j.json():[],k=N.ok?await N.json():[],_=C.filter(O=>O.deliveryPartnerId&&["assigned","en_route_pickup","picked_up","en_route_delivery"].includes(O.status));t({deliveries:_,deliveryPartners:P.map(O=>({...O,name:O.fullName||O.name,realData:!0})),orders:k}),_.length>0&&s(_[0].id)}a(!1)}catch(y){console.error("Error loading tracking data:",y),a(!1)}},m=async()=>{try{const p={orderId:Math.floor(Math.random()*1e3)+100,deliveryPartnerId:null,deliveryFee:"50.00",pickupAddress:"Tech World Electronics, Mall Road, Kanpur, UP 208001",deliveryAddress:"IIT Kanpur, Kalyanpur, Kanpur, UP 208016",estimatedDistance:12.5,estimatedTime:25,specialInstructions:"Handle with care - Electronics item"},x=await fetch("/api/deliveries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(x.ok){const y=await x.json();t(w=>({...w,deliveries:[y,...w.deliveries]})),s(y.id),await fetch(`/api/tracking/initialize/${y.id}`,{method:"POST"})}}catch(p){console.error("Error creating demo delivery:",p)}},f=async(p,x)=>{try{(await fetch(`/api/deliveries/${p}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"assigned",partnerId:x})})).ok&&h()}catch(y){console.error("Error assigning delivery partner:",y)}},v=async p=>{const x=[{lat:26.4499,lng:80.3319},{lat:26.452,lng:80.335},{lat:26.4545,lng:80.338},{lat:26.458,lng:80.342},{lat:26.5144,lng:80.2329}];for(let y=0;y<x.length;y++)await new Promise(w=>setTimeout(w,2e3)),await fetch("/api/tracking/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:p,latitude:x[y].lat,longitude:x[y].lng,speed:Math.random()*30+10,heading:Math.random()*360})}),y===2?await fetch("/api/tracking/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:p,status:"picked_up",description:"Order picked up from store"})}):y===4&&await fetch("/api/tracking/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:p,status:"delivered",description:"Order delivered successfully"})})};return i?r.jsx("div",{className:"container mx-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{children:"Loading tracking demo..."})]})})}):r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Real-Time Order Tracking System"}),r.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Experience live delivery tracking with HERE Maps integration, WebSocket notifications, and comprehensive dashboard views"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsx(K,{className:"p-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Re,{className:"h-8 w-8 text-blue-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"HERE Maps"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Live route calculation"})]})]})}),r.jsx(K,{className:"p-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ct,{className:"h-8 w-8 text-green-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"Real-Time Tracking"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Live location updates"})]})]})}),r.jsx(K,{className:"p-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(gd,{className:"h-8 w-8 text-purple-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"Multi-User Views"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Customer, shop, partner"})]})]})}),r.jsx(K,{className:"p-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(jt,{className:"h-8 w-8 text-orange-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"Live Notifications"}),r.jsx("p",{className:"text-sm text-gray-600",children:"WebSocket updates"})]})]})})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Demo Controls"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx($,{onClick:m,size:"sm",children:"Create Demo Delivery"}),n&&r.jsx($,{onClick:()=>v(n),variant:"outline",size:"sm",children:"Simulate Movement"})]})]})}),r.jsx(G,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(be,{children:"View Mode"}),r.jsx("div",{className:"flex space-x-2 mt-2",children:["customer","shopkeeper","delivery_partner"].map(p=>r.jsx($,{variant:c===p?"default":"outline",size:"sm",onClick:()=>d(p),children:p.replace("_"," ").toUpperCase()},p))})]}),r.jsxs("div",{children:[r.jsx(be,{children:"Active Deliveries"}),r.jsxs(ue,{variant:"outline",className:"ml-2",children:[e.deliveries.length," total"]})]}),r.jsxs("div",{children:[r.jsx(be,{children:"Available Partners"}),r.jsxs(ue,{variant:"outline",className:"ml-2",children:[e.deliveryPartners.length," online"]})]})]})})]}),r.jsxs(Ds,{value:o,onValueChange:l,children:[r.jsxs(ws,{className:"grid w-full grid-cols-4",children:[r.jsx(at,{value:"overview",children:"System Overview"}),r.jsx(at,{value:"tracking",children:"Live Tracking"}),r.jsx(at,{value:"partner",children:"Partner Dashboard"}),r.jsx(at,{value:"admin",children:"Admin Panel"})]}),r.jsx(Xe,{value:"overview",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Active Deliveries"})}),r.jsx(G,{children:e.deliveries.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ye,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No active deliveries"}),r.jsx($,{onClick:m,className:"mt-4",children:"Create Demo Delivery"})]}):r.jsx("div",{className:"space-y-3",children:e.deliveries.slice(0,5).map(p=>r.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${n===p.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>s(p.id),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-medium",children:["Delivery #",p.id]}),r.jsx(ue,{variant:"outline",children:p.status||"pending"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:p.pickupAddress}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",p.deliveryAddress]})]},p.id))})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"System Status"})}),r.jsxs(G,{children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"HERE Maps API"}),r.jsx(ue,{className:"bg-green-500 text-white",children:"Connected"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"WebSocket Server"}),r.jsx(ue,{className:"bg-green-500 text-white",children:"Active"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Real-time Tracking"}),r.jsx(ue,{className:"bg-green-500 text-white",children:"Enabled"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:"Push Notifications"}),r.jsx(ue,{className:"bg-green-500 text-white",children:"Ready"})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Key Features"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[r.jsx("li",{children:" Real-time GPS tracking with HERE Maps"}),r.jsx("li",{children:" WebSocket-based live updates"}),r.jsx("li",{children:" Multi-user role support (customer, shopkeeper, delivery partner)"}),r.jsx("li",{children:" Route optimization and ETA calculations"}),r.jsx("li",{children:" Push notifications for status changes"}),r.jsx("li",{children:" Google Maps integration for navigation"}),r.jsx("li",{children:" Comprehensive delivery history"})]})]})]})]})]})}),r.jsx(Xe,{value:"tracking",className:"space-y-6",children:n?r.jsx(Pg,{deliveryId:n,userType:c,onStatusUpdate:p=>{console.log("Status updated:",p)}}):r.jsx(K,{children:r.jsxs(G,{className:"p-12 text-center",children:[r.jsx(Re,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Delivery Selected"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Create a demo delivery to see live tracking in action"}),r.jsx($,{onClick:m,children:"Create Demo Delivery"})]})})}),r.jsx(Xe,{value:"partner",className:"space-y-6",children:e.deliveryPartners.length>0?r.jsx(LVe,{partnerId:e.deliveryPartners[0].id}):r.jsx(K,{children:r.jsxs(G,{className:"p-12 text-center",children:[r.jsx(Ct,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Delivery Partners Available"}),r.jsx("p",{className:"text-gray-500",children:"Partner dashboard will show once delivery partners are registered"})]})})}),r.jsx(Xe,{value:"admin",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Delivery Management"})}),r.jsx(G,{children:r.jsx("div",{className:"space-y-4",children:e.deliveries.map(p=>r.jsxs("div",{className:"p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-medium",children:["Delivery #",p.id]}),r.jsx(ue,{variant:"outline",children:p.status||"pending"})]}),!p.deliveryPartnerId&&e.deliveryPartners.length>0&&r.jsx($,{size:"sm",onClick:()=>f(p.id,e.deliveryPartners[0].id),children:"Assign Partner"})]},p.id))})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Analytics Overview"})}),r.jsx(G,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.deliveries.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Deliveries"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.deliveryPartners.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Active Partners"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e.deliveries.filter(p=>p.status==="delivered").length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:e.deliveries.filter(p=>["assigned","en_route_pickup","picked_up","en_route_delivery"].includes(p.status)).length}),r.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})]})})]})]})})]})]})}function FVe(){const{user:e}=el(),[t,n]=b.useState(null),{data:s}=Le({queryKey:["/api/delivery-partners/user",e==null?void 0:e.id],queryFn:async()=>{const o=await fetch(`/api/delivery-partners/user?userId=${e==null?void 0:e.id}`);if(!o.ok){if(o.status===404)return null;throw new Error("Failed to fetch partner data")}return o.json()},enabled:!!(e!=null&&e.id)}),{data:i=[]}=Le({queryKey:["/api/delivery-partners/assignments"],queryFn:async()=>{const o=await fetch("/api/delivery-partners/assignments");return o.ok?(await o.json()).filter(c=>["assigned","picked_up","in_transit"].includes(c.status)):[]},refetchInterval:3e3,enabled:!!(s!=null&&s.id)});b.useEffect(()=>{i.length>0&&!t&&n(i[0].id)},[i,t]);const a=i.find(o=>o.id===t);return s?r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx(JH,{}),r.jsxs("div",{className:"flex items-center justify-between mt-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx(Re,{className:"h-8 w-8 text-blue-600"}),"Live Delivery Tracking"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Professional tracking with real-time location updates"})]}),r.jsxs(ue,{variant:"secondary",className:"bg-green-100 text-green-800 px-4 py-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Live Tracking Active"]})]})]}),i.length===0?r.jsx(K,{className:"shadow-lg border-0",children:r.jsxs(G,{className:"text-center py-16",children:[r.jsx(_t,{className:"h-20 w-20 text-gray-300 mx-auto mb-6"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No Active Deliveries"}),r.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"You currently have no active deliveries to track. When you accept a delivery assignment, professional live tracking will appear here with real-time maps and location updates."}),r.jsxs($,{onClick:()=>window.location.href="/delivery-partner/dashboard",className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Check for New Deliveries"]})]})}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Active Deliveries (",i.length,")"]})}),r.jsx(G,{className:"space-y-3",children:i.map(o=>r.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${t===o.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>n(o.id),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(ue,{variant:o.status==="assigned"?"default":"secondary",className:"text-xs",children:o.status.replace("_"," ").toUpperCase()}),r.jsxs("span",{className:"text-sm font-medium text-green-600",children:["NPR ",o.deliveryFee]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsxs("span",{className:"font-medium",children:["Order #",o.orderId]})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx(Re,{className:"h-3 w-3"}),r.jsx("span",{className:"truncate",children:o.deliveryAddress})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Vt,{className:"h-3 w-3"}),r.jsx("span",{children:o.customerName})]})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsxs("span",{children:[o.estimatedDistance," km"]}),r.jsx("span",{children:new Date(o.assignedAt).toLocaleTimeString()})]})]})]},o.id))})]}),a&&r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(_t,{className:"h-5 w-5"}),"Delivery Details"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Customer Information"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vt,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{children:a.customerName})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vt,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{children:a.customerPhone})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Delivery Information"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:a.deliveryAddress})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"text-gray-600",children:[a.estimatedDistance," km"]})]})]})]}),a.specialInstructions&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Special Instructions"}),r.jsx("p",{className:"text-sm text-gray-600 bg-yellow-50 p-3 rounded-lg",children:a.specialInstructions})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>window.open(`tel:${a.customerPhone}`),children:[r.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Call"]}),r.jsxs($,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>{const o=`https://www.google.com/maps/dir/?api=1&destination=${a.deliveryAddress}`;window.open(o,"_blank")},children:[r.jsx(_t,{className:"h-4 w-4 mr-1"}),"Navigate"]})]})]})]})]}),r.jsx("div",{className:"lg:col-span-8",children:a?r.jsxs(K,{className:"h-full min-h-[600px]",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-5 w-5 text-blue-600"}),"Live Tracking - Order #",a.orderId,r.jsxs(ue,{variant:"secondary",className:"bg-green-100 text-green-800 ml-auto",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Real-time Updates"]})]})}),r.jsx(G,{className:"p-0 h-full",children:r.jsx(RZ,{deliveryData:{id:a.id,orderId:a.orderId,customerName:a.customerName,customerPhone:a.customerPhone,pickupAddress:a.pickupAddress,deliveryAddress:a.deliveryAddress,storeName:"Family Restaurant",storePhone:"+977-9800000001",deliveryFee:parseFloat(a.deliveryFee),status:a.status,estimatedDistance:parseFloat(a.estimatedDistance),estimatedTime:25,specialInstructions:a.specialInstructions},deliveryPartnerId:(s==null?void 0:s.id)||0,onLocationUpdate:o=>{fetch("/api/tracking/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryId:a.id,deliveryPartnerId:s==null?void 0:s.id,latitude:o.lat,longitude:o.lng,timestamp:new Date(o.timestamp).toISOString()})}).catch(console.error)}})})]}):r.jsx(K,{className:"h-full min-h-[600px] flex items-center justify-center",children:r.jsxs(G,{className:"text-center",children:[r.jsx(Re,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Delivery"}),r.jsx("p",{className:"text-gray-600",children:"Choose a delivery from the list to start tracking"})]})})})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx(K,{className:"max-w-md w-full",children:r.jsxs(G,{className:"text-center py-12",children:[r.jsx(Ct,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Partner Not Found"}),r.jsx("p",{className:"text-gray-600",children:"Please register as a delivery partner first."})]})})})}const zVe=e=>new Promise((t,n)=>{const s=document.createElement("canvas"),i=s.getContext("2d"),a=new Image,o=setTimeout(()=>{n(new Error("Image compression timeout"))},15e3);a.onload=()=>{try{clearTimeout(o);let{width:l,height:c}=a;const h=200*1024;let m=800;if(e.size>h*3&&(m=600),e.size>h*5&&(m=400),e.size>h*10&&(m=300),(l>m||c>m)&&(l>c?(c=c*m/l,l=m):(l=l*m/c,c=m)),s.width=l,s.height=c,!i){n(new Error("Canvas context not available"));return}i.drawImage(a,0,0,l,c);let f=.8,v=s.toDataURL("image/jpeg",f);const p=1.37;for(;v.length>h*p&&f>.1;)f-=.1,v=s.toDataURL("image/jpeg",f);console.log(`Compressed ${e.name} from ${(e.size/1024).toFixed(1)}KB to ${(v.length/1024).toFixed(1)}KB`),t(v)}catch(l){clearTimeout(o),n(l)}},a.onerror=()=>{clearTimeout(o),n(new Error("Failed to load image"))},a.src=URL.createObjectURL(e)});function $Z({onDocumentChange:e,initialDocuments:t={},label:n="Upload Documents",className:s=""}){const[i,a]=b.useState(t),[o,l]=b.useState(""),[c,d]=b.useState(!1),[h,m]=b.useState(""),f=b.useRef(null),v=b.useRef(null),{toast:p}=ft(),x=[{key:"idProofUrl",label:"ID Proof (Aadhar/Citizenship)",required:!0},{key:"drivingLicenseUrl",label:"Driving License",required:!0},{key:"vehicleRegistrationUrl",label:"Vehicle Registration",required:!0},{key:"insuranceUrl",label:"Insurance Certificate",required:!1},{key:"photoUrl",label:"Profile Photo",required:!0}],y=async(P,k)=>{if(!P||P.length===0)return;const _=P[0];if(!_.type.startsWith("image/")){p({title:"Invalid file type",description:"Please upload an image file (JPG, PNG, etc.)",variant:"destructive"});return}if(_.size>50*1024*1024){p({title:"File too large",description:"Please upload a file smaller than 50MB",variant:"destructive"});return}d(!0);try{const O=await zVe(_),M=Math.round(O.length/1024),T={...i,[k]:O};a(T),e(k,O),p({title:"Document uploaded successfully",description:`File compressed to ${M}KB for fast loading`})}catch(O){console.error("Error uploading document:",O),p({title:"Upload failed",description:"Failed to process the image. Please try again.",variant:"destructive"})}finally{d(!1)}},w=P=>{if(o.trim()){const k={...i,[P]:o.trim()};a(k),e(P,o.trim()),l(""),m(""),p({title:"Document URL added",description:"Document URL has been saved successfully"})}},j=P=>{const k={...i};delete k[P],a(k),e(P,""),p({title:"Document removed",description:"Document has been removed successfully"})},N=P=>{m(P),f.current&&f.current.click()},C=P=>{m(P),v.current&&v.current.click()};return r.jsxs("div",{className:`space-y-6 ${s}`,children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:n}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All documents will be automatically compressed to 200KB for fast loading"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(P=>r.jsxs(K,{className:"relative",children:[r.jsx(re,{className:"pb-3",children:r.jsxs(ne,{className:"text-sm font-medium flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(Ws,{className:"h-4 w-4 mr-2"}),P.label]}),P.required&&r.jsx(ue,{variant:"destructive",className:"text-xs",children:"Required"})]})}),r.jsx(G,{className:"space-y-3",children:i[P.key]?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded-md",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ed,{className:"h-4 w-4 text-green-600 mr-2"}),r.jsx("span",{className:"text-sm text-green-700 dark:text-green-400",children:"Document uploaded"})]}),r.jsx($,{size:"sm",variant:"ghost",onClick:()=>j(P.key),className:"h-6 w-6 p-0",children:r.jsx(Fr,{className:"h-3 w-3"})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($,{size:"sm",variant:"outline",onClick:()=>N(P.key),className:"flex-1",children:[r.jsx(Hs,{className:"h-3 w-3 mr-1"}),"Replace"]}),i[P.key].startsWith("data:")&&r.jsx($,{size:"sm",variant:"outline",onClick:()=>{const k=document.createElement("a");k.href=i[P.key],k.download=`${P.key}.jpg`,k.click()},children:"View"})]})]}):r.jsxs(Ds,{defaultValue:"upload",className:"w-full",children:[r.jsxs(ws,{className:"grid w-full grid-cols-3",children:[r.jsx(at,{value:"upload",children:"Upload"}),r.jsx(at,{value:"camera",children:"Camera"}),r.jsx(at,{value:"url",children:"URL"})]}),r.jsxs(Xe,{value:"upload",className:"space-y-2",children:[r.jsxs($,{onClick:()=>N(P.key),disabled:c,className:"w-full",size:"sm",children:[r.jsx(Hs,{className:"h-4 w-4 mr-2"}),c?"Uploading...":"Choose File"]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Max 50MB, will be compressed to 200KB"})]}),r.jsxs(Xe,{value:"camera",className:"space-y-2",children:[r.jsxs($,{onClick:()=>C(P.key),disabled:c,className:"w-full",size:"sm",children:[r.jsx(ko,{className:"h-4 w-4 mr-2"}),c?"Processing...":"Take Photo"]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Auto-compressed to 200KB"})]}),r.jsxs(Xe,{value:"url",className:"space-y-2",children:[r.jsx(de,{placeholder:"https://example.com/document.jpg",value:h===P.key?o:"",onChange:k=>{l(k.target.value),m(P.key)},className:"text-sm"}),r.jsxs($,{onClick:()=>w(P.key),disabled:!o.trim(),className:"w-full",size:"sm",children:[r.jsx(Od,{className:"h-4 w-4 mr-2"}),"Add URL"]})]})]})})]},P.key))}),r.jsx("input",{type:"file",ref:f,onChange:P=>y(P.target.files,h),accept:"image/*",style:{display:"none"}}),r.jsx("input",{type:"file",ref:v,onChange:P=>y(P.target.files,h),accept:"image/*",capture:"environment",style:{display:"none"}}),c&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm mx-4",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),r.jsx("p",{className:"text-center text-gray-700 dark:text-gray-300",children:"Compressing to 200KB..."})]})})]})}const BVe=ee.object({fullName:ee.string().min(2,"Full name must be at least 2 characters"),email:ee.string().email("Please enter a valid email address"),phone:ee.string().min(10,"Phone number must be at least 10 digits"),password:ee.string().min(6,"Password must be at least 6 characters"),confirmPassword:ee.string(),address:ee.string().min(5,"Address is required"),vehicleType:ee.string().min(1,"Vehicle type is required"),vehicleNumber:ee.string().min(1,"Vehicle number is required"),deliveryArea:ee.string().min(1,"Delivery area is required"),idProofUrl:ee.string().min(1,"ID proof is required"),drivingLicenseUrl:ee.string().min(1,"Driving license is required"),vehicleRegistrationUrl:ee.string().optional(),insuranceUrl:ee.string().optional(),photoUrl:ee.string().min(1,"Profile photo is required"),termsAccepted:ee.boolean().refine(e=>e===!0,{message:"You must accept the terms and conditions"})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function VVe(){const[e,t]=b.useState(!1),[,n]=Jr(),{toast:s}=ft(),[i,a]=b.useState({}),o=(d,h)=>{a(m=>({...m,[d]:h})),l.setValue(d,h)},l=fn({resolver:pn(BVe),defaultValues:{fullName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",vehicleType:"",vehicleNumber:"",deliveryArea:"",idProofUrl:"",drivingLicenseUrl:"",vehicleRegistrationUrl:"",insuranceUrl:"",photoUrl:"",termsAccepted:!1}}),c=async d=>{var h;t(!0);try{const m=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:d.fullName,email:d.email,phone:d.phone,password:d.password,address:d.address,role:"delivery_partner"})});if(!m.ok){const x=await m.json();throw(h=x.error)!=null&&h.includes("User already exists")?x.error.includes("email")?new Error("An account with this email already exists. Please use a different email address or login to your existing account."):x.error.includes("phone")?new Error("An account with this phone number already exists. Please use a different phone number or login to your existing account."):new Error("An account with these credentials already exists. Please use different information or login to your existing account."):new Error(x.error||"Registration failed")}const v={userId:(await m.json()).user.id,vehicleType:d.vehicleType,vehicleNumber:d.vehicleNumber,deliveryArea:d.deliveryArea,idProofUrl:d.idProofUrl,drivingLicenseUrl:d.drivingLicenseUrl,vehicleRegistrationUrl:d.vehicleRegistrationUrl,insuranceUrl:d.insuranceUrl,photoUrl:d.photoUrl};if(!(await fetch("/api/delivery-partners/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).ok)throw new Error("Failed to create delivery partner profile");s({title:"Registration Successful!",description:"Your delivery partner application has been submitted. You'll be notified once approved."}),n("/login")}catch(m){console.error("Registration error:",m);const f=m instanceof Error?m.message:"Something went wrong. Please try again.";s({title:"Registration Failed",description:f,variant:"destructive"}),f.includes("already exists")&&setTimeout(()=>{s({title:"Need Help?",description:"If you already have an account, try logging in instead. If you need to update your role to delivery partner, contact support."})},3e3)}finally{t(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:r.jsxs(K,{className:"w-full max-w-2xl",children:[r.jsxs(re,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-600",children:r.jsx(Ct,{className:"h-6 w-6 text-white"})}),r.jsx(ne,{className:"text-2xl font-bold",children:"Join as Delivery Partner"}),r.jsx(kt,{children:"Complete your registration to start earning with flexible delivery work"})]}),r.jsxs(G,{children:[r.jsx(Rr,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Personal Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:l.control,name:"fullName",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Full Name *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter your full name",...d})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"phone",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Phone Number *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"9876543210",...d})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:l.control,name:"email",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Email Address *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"your.email@example.com",type:"email",...d})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"address",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Address *"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Enter your complete address",...d})}),r.jsx(me,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:l.control,name:"password",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Password *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Create password",type:"password",...d})}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"confirmPassword",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Confirm Password *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Confirm password",type:"password",...d})}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"space-y-4 border-t pt-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delivery Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:l.control,name:"vehicleType",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Type *"}),r.jsxs(dt,{onValueChange:d.onChange,value:d.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select vehicle type"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"motorcycle",children:"Motorcycle"}),r.jsx(oe,{value:"bicycle",children:"Bicycle"}),r.jsx(oe,{value:"scooter",children:"Scooter"}),r.jsx(oe,{value:"car",children:"Car"}),r.jsx(oe,{value:"van",children:"Van"})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:l.control,name:"vehicleNumber",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Number *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"BA 12 PA 1234",...d})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:l.control,name:"deliveryArea",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Preferred Delivery Areas *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Siraha, Lahan, Janakpur",...d})}),r.jsx(me,{})]})})]}),r.jsx("div",{className:"space-y-4 border-t pt-4",children:r.jsx($Z,{onDocumentChange:o,initialDocuments:i,label:"Required Documents"})}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx(ae,{control:l.control,name:"termsAccepted",render:({field:d})=>r.jsxs(se,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(he,{children:r.jsx(fc,{checked:d.value,onCheckedChange:d.onChange})}),r.jsxs("div",{className:"space-y-1 leading-none",children:[r.jsx(ce,{className:"text-sm font-normal",children:"I agree to the delivery partner terms and conditions *"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"You agree to follow delivery guidelines and maintain professional conduct"})]})]})}),r.jsx(me,{})]}),r.jsx($,{type:"submit",className:"w-full",disabled:e,children:e?"Creating Account...":"Complete Registration"})]})}),r.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Delivery Partner Benefits:"}),r.jsxs("ul",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:[r.jsx("li",{children:" Flexible working hours - work when you want"}),r.jsx("li",{children:" Competitive delivery fees and bonuses"}),r.jsx("li",{children:" Weekly payments directly to your account"}),r.jsx("li",{children:" 24/7 support team assistance"}),r.jsx("li",{children:" Get started immediately after approval"})]})]})]})]})})}const UVe=ee.object({fullName:ee.string().min(2,"Full name must be at least 2 characters"),email:ee.string().email("Invalid email address"),phone:ee.string().min(10,"Phone number must be at least 10 digits"),password:ee.string().min(8,"Password must be at least 8 characters"),address:ee.string().min(5,"Address must be at least 5 characters"),vehicleType:ee.string().min(1,"Vehicle type is required"),vehicleNumber:ee.string().min(1,"Vehicle number is required"),drivingLicense:ee.string().min(1,"Driving license number is required"),bankAccountNumber:ee.string().min(1,"Bank account number is required"),ifscCode:ee.string().min(1,"IFSC code is required"),accountHolderName:ee.string().min(1,"Account holder name is required"),emergencyContactName:ee.string().min(1,"Emergency contact name is required"),emergencyContactPhone:ee.string().min(10,"Emergency contact phone is required"),deliveryAreas:ee.string().min(1,"Delivery areas are required"),idProofUrl:ee.string().optional(),drivingLicenseUrl:ee.string().optional(),vehicleRegistrationUrl:ee.string().optional(),insuranceUrl:ee.string().optional(),photoUrl:ee.string().optional(),termsAccepted:ee.boolean().refine(e=>e===!0,"You must accept the terms and conditions")});function WVe(){const[e,t]=b.useState(!1),[n,s]=b.useState({idProofUrl:"",drivingLicenseUrl:"",vehicleRegistrationUrl:"",insuranceUrl:"",photoUrl:""}),{toast:i}=ft(),[,a]=Jr(),o=fn({resolver:pn(UVe),defaultValues:{fullName:"",email:"",phone:"",password:"",address:"",vehicleType:"",vehicleNumber:"",drivingLicense:"",bankAccountNumber:"",ifscCode:"",accountHolderName:"",emergencyContactName:"",emergencyContactPhone:"",deliveryAreas:"",termsAccepted:!1}}),l=d=>{s(d),o.setValue("idProofUrl",d.idProofUrl),o.setValue("drivingLicenseUrl",d.drivingLicenseUrl),o.setValue("vehicleRegistrationUrl",d.vehicleRegistrationUrl),o.setValue("insuranceUrl",d.insuranceUrl),o.setValue("photoUrl",d.photoUrl)},c=async d=>{t(!0);try{const h=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:d.fullName,email:d.email,phone:d.phone,password:d.password,address:d.address,role:"delivery_partner"})});if(!h.ok){const p=await h.json();throw new Error(p.error||"Registration failed")}const f={userId:(await h.json()).user.id,vehicleType:d.vehicleType,vehicleNumber:d.vehicleNumber,drivingLicense:d.drivingLicense,bankAccountNumber:d.bankAccountNumber,ifscCode:d.ifscCode,accountHolderName:d.accountHolderName,emergencyContactName:d.emergencyContactName,emergencyContactPhone:d.emergencyContactPhone,deliveryAreas:d.deliveryAreas.split(",").map(p=>p.trim()),idProofUrl:n.idProofUrl,drivingLicenseUrl:n.drivingLicenseUrl,vehicleRegistrationUrl:n.vehicleRegistrationUrl,insuranceUrl:n.insuranceUrl,photoUrl:n.photoUrl};if(!(await fetch("/api/delivery-partners/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).ok)throw new Error("Failed to create delivery partner profile");i({title:"Registration Successful!",description:"Your delivery partner application has been submitted. You'll be approved shortly and can start earning immediately."}),a("/login")}catch(h){console.error("Registration error:",h),i({title:"Registration Failed",description:h instanceof Error?h.message:"Something went wrong. Please try again.",variant:"destructive"})}finally{t(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:r.jsxs(K,{className:"w-full max-w-4xl",children:[r.jsxs(re,{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-r from-blue-600 to-indigo-600",children:r.jsx(Ct,{className:"h-8 w-8 text-white"})}),r.jsx(ne,{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Become a Delivery Partner"}),r.jsx(kt,{className:"text-lg",children:"Complete your profile in one simple form and start earning flexible income"})]}),r.jsxs(G,{children:[r.jsx(Rr,{...o,children:r.jsxs("form",{onSubmit:o.handleSubmit(c),className:"space-y-8",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-blue-800 dark:text-blue-200",children:[r.jsx(Wr,{className:"h-5 w-5 mr-2"}),"Personal Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:o.control,name:"fullName",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Full Name *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Enter your full name",...d})}),r.jsx(me,{})]})}),r.jsx(ae,{control:o.control,name:"email",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Email *"}),r.jsx(he,{children:r.jsx(de,{type:"email",placeholder:"your@email.com",...d})}),r.jsx(me,{})]})}),r.jsx(ae,{control:o.control,name:"phone",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Phone Number *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"9805916598",...d})}),r.jsx(me,{})]})}),r.jsx(ae,{control:o.control,name:"password",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Password *"}),r.jsx(he,{children:r.jsx(de,{type:"password",placeholder:"Create a strong password",...d})}),r.jsx(me,{})]})})]}),r.jsx(ae,{control:o.control,name:"address",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Address *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Your complete address",...d})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-green-800 dark:text-green-200",children:[r.jsx(pk,{className:"h-5 w-5 mr-2"}),"Vehicle Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(ae,{control:o.control,name:"vehicleType",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Type *"}),r.jsxs(dt,{onValueChange:d.onChange,value:d.value,children:[r.jsx(he,{children:r.jsx(ot,{children:r.jsx(ut,{placeholder:"Select vehicle"})})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"motorcycle",children:"Motorcycle"}),r.jsx(oe,{value:"bicycle",children:"Bicycle"}),r.jsx(oe,{value:"scooter",children:"Scooter"}),r.jsx(oe,{value:"car",children:"Car"}),r.jsx(oe,{value:"van",children:"Van"})]})]}),r.jsx(me,{})]})}),r.jsx(ae,{control:o.control,name:"vehicleNumber",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Vehicle Number *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"BA 01 PA 1234",...d})}),r.jsx(me,{})]})}),r.jsx(ae,{control:o.control,name:"drivingLicense",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Driving License *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"DL1234567890",...d})}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-purple-800 dark:text-purple-200",children:[r.jsx(zp,{className:"h-5 w-5 mr-2"}),"Banking Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(ae,{control:o.control,name:"accountHolderName",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Account Holder Name *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Name as per bank account",...d})}),r.jsx(me,{})]})}),r.jsx(ae,{control:o.control,name:"bankAccountNumber",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Bank Account Number *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"1234567890123456",...d})}),r.jsx(me,{})]})}),r.jsx(ae,{control:o.control,name:"ifscCode",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"IFSC Code *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"SBIN0000123",...d})}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-950 dark:to-red-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-orange-800 dark:text-orange-200",children:[r.jsx(Vt,{className:"h-5 w-5 mr-2"}),"Emergency Contact"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ae,{control:o.control,name:"emergencyContactName",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Emergency Contact Name *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Contact person name",...d})}),r.jsx(me,{})]})}),r.jsx(ae,{control:o.control,name:"emergencyContactPhone",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Emergency Contact Phone *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"9876543210",...d})}),r.jsx(me,{})]})})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 dark:from-teal-950 dark:to-cyan-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-teal-800 dark:text-teal-200",children:[r.jsx(Ct,{className:"h-5 w-5 mr-2"}),"Delivery Areas"]}),r.jsx(ae,{control:o.control,name:"deliveryAreas",render:({field:d})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Preferred Delivery Areas *"}),r.jsx(he,{children:r.jsx(de,{placeholder:"Siraha, Lahan, Janakpur (comma separated)",...d})}),r.jsx(me,{})]})})]}),r.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-950 dark:to-slate-950 p-6 rounded-lg space-y-4",children:[r.jsxs("h3",{className:"flex items-center text-lg font-semibold text-gray-800 dark:text-gray-200",children:[r.jsx(Ws,{className:"h-5 w-5 mr-2"}),"Required Documents"]}),r.jsx($Z,{onDocumentChange:l,initialDocuments:n,label:"Upload Your Documents (All documents compressed to 200KB for fast processing)"})]}),r.jsxs("div",{className:"border-t pt-6",children:[r.jsx(ae,{control:o.control,name:"termsAccepted",render:({field:d})=>r.jsxs(se,{className:"flex flex-row items-start space-x-3 space-y-0",children:[r.jsx(he,{children:r.jsx(fc,{checked:d.value,onCheckedChange:d.onChange})}),r.jsxs("div",{className:"space-y-1 leading-none",children:[r.jsx(ce,{className:"text-sm font-normal",children:"I agree to the delivery partner terms and conditions *"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"You agree to follow delivery guidelines, maintain professional conduct, and provide timely service"})]})]})}),r.jsx(me,{})]}),r.jsx($,{type:"submit",className:"w-full h-12 text-lg font-semibold bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",disabled:e,children:e?"Creating Your Account...":"Complete Registration & Start Earning"})]})}),r.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-3 text-center",children:" Why Choose Siraha Bazaar?"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-green-700 dark:text-green-300",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Flexible working hours - work when you want"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Competitive delivery fees starting from 30"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Weekly payments directly to your account"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"24/7 support team assistance"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Performance bonuses and incentives"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Get started immediately after approval"]})]})]})]})]})]})})}function HVe(){const{toast:e}=ft(),t=on(),[n,s]=b.useState(null),[i,a]=b.useState(""),[o,l]=b.useState(!1),{data:c=[],isLoading:d}=Le({queryKey:["/api/delivery-partners"]}),{data:h=[],isLoading:m}=Le({queryKey:["/api/delivery-partners/pending"]}),f=pt({mutationFn:async C=>{const k=await(await fetch("/api/admin/current")).json(),_=(k==null?void 0:k.id)||1;return Kt(`/api/delivery-partners/${C}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:_})})},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/delivery-partners"]}),t.invalidateQueries({queryKey:["/api/delivery-partners/pending"]}),e({title:"Partner Approved",description:"Delivery partner has been approved successfully."})},onError:()=>{e({title:"Error",description:"Failed to approve delivery partner.",variant:"destructive"})}}),v=pt({mutationFn:async({partnerId:C,reason:P})=>{const _=await(await fetch("/api/admin/current")).json(),O=(_==null?void 0:_.id)||1;return Kt(`/api/delivery-partners/${C}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:O,reason:P})})},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/delivery-partners"]}),t.invalidateQueries({queryKey:["/api/delivery-partners/pending"]}),l(!1),a(""),s(null),e({title:"Partner Rejected",description:"Delivery partner application has been rejected."})},onError:()=>{e({title:"Error",description:"Failed to reject delivery partner.",variant:"destructive"})}}),p=C=>{s(C),l(!0)},x=()=>{n&&i.trim()&&v.mutate({partnerId:n.id,reason:i})},y=c.filter(C=>C.status==="approved"),w=c.filter(C=>C.status==="rejected"),j=C=>{switch(C){case"pending":return r.jsxs(ue,{variant:"secondary",children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return r.jsxs(ue,{variant:"default",children:[r.jsx(yt,{className:"h-3 w-3 mr-1"}),"Approved"]});case"rejected":return r.jsxs(ue,{variant:"destructive",children:[r.jsx(ps,{className:"h-3 w-3 mr-1"}),"Rejected"]});default:return r.jsx(ue,{variant:"outline",children:C})}},N=({partner:C})=>r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ne,{className:"text-lg",children:["Partner #",C.id]}),j(C.status)]}),r.jsxs(kt,{children:["Applied on ",new Date(C.createdAt).toLocaleDateString()]})]}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Vehicle:"})," ",C.vehicleType]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Vehicle Number:"})," ",C.vehicleNumber]}),r.jsxs("div",{children:[r.jsx("strong",{children:"License:"})," ",C.drivingLicense]}),r.jsxs("div",{children:[r.jsx("strong",{children:"ID Proof:"})," ",C.idProofType]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("strong",{children:"Delivery Areas:"})," ",C.deliveryAreas.join(", ")]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-3",children:[r.jsxs(Dr,{children:[r.jsx(Ps,{asChild:!0,children:r.jsxs($,{variant:"outline",size:"sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-1"}),"View Details"]})}),r.jsxs(Ar,{className:"max-w-2xl",children:[r.jsxs(Er,{children:[r.jsx(Or,{children:"Delivery Partner Details"}),r.jsxs(Us,{children:["Complete information for Partner #",C.id]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Vehicle Type"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:C.vehicleType})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Vehicle Number"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:C.vehicleNumber})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Driving License"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:C.drivingLicense})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"ID Proof Type"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:C.idProofType})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"ID Proof Number"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:C.idProofNumber})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Emergency Contact"}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[r.jsx(Vt,{className:"h-3 w-3 mr-1"}),C.emergencyContact]})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Bank Account"}),r.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[r.jsx(zp,{className:"h-3 w-3 mr-1"}),C.bankAccountNumber]})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"IFSC Code"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:C.ifscCode})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(be,{className:"text-sm font-medium",children:"Delivery Areas"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:C.deliveryAreas.join(", ")})]}),C.status==="approved"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Total Deliveries"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:C.totalDeliveries})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Total Earnings"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["",C.totalEarnings]})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Rating"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:C.rating?`${C.rating.toFixed(1)}`:"No ratings yet"})]}),r.jsxs("div",{children:[r.jsx(be,{className:"text-sm font-medium",children:"Availability"}),r.jsx(ue,{variant:C.isAvailable?"default":"secondary",children:C.isAvailable?"Available":"Offline"})]})]}),C.rejectionReason&&r.jsxs("div",{className:"col-span-2",children:[r.jsx(be,{className:"text-sm font-medium",children:"Rejection Reason"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:C.rejectionReason})]})]})]})]}),C.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs($,{size:"sm",onClick:()=>f.mutate(C.id),disabled:f.isPending,children:[r.jsx(yt,{className:"h-4 w-4 mr-1"}),"Approve"]}),r.jsxs($,{size:"sm",variant:"destructive",onClick:()=>p(C),disabled:v.isPending,children:[r.jsx(ps,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})]})})]},C.id);return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Delivery Partner Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage delivery partner applications and accounts"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Total Partners"}),r.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(G,{children:r.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Pending Applications"}),r.jsx(jt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(G,{children:r.jsx("div",{className:"text-2xl font-bold",children:h.length})})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Approved Partners"}),r.jsx(yt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(G,{children:r.jsx("div",{className:"text-2xl font-bold",children:y.length})})]}),r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ne,{className:"text-sm font-medium",children:"Active Partners"}),r.jsx(yt,{className:"h-4 w-4 text-green-500"})]}),r.jsx(G,{children:r.jsx("div",{className:"text-2xl font-bold",children:y.filter(C=>C.isAvailable).length})})]})]}),r.jsxs(Ds,{defaultValue:"pending",className:"w-full",children:[r.jsxs(ws,{children:[r.jsxs(at,{value:"pending",children:["Pending Applications (",h.length,")"]}),r.jsxs(at,{value:"approved",children:["Approved Partners (",y.length,")"]}),r.jsxs(at,{value:"rejected",children:["Rejected Applications (",w.length,")"]}),r.jsxs(at,{value:"all",children:["All Partners (",c.length,")"]})]}),r.jsx(Xe,{value:"pending",className:"space-y-4",children:m?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading pending applications..."})]}):h.length===0?r.jsx(K,{children:r.jsxs(G,{className:"p-6 text-center",children:[r.jsx(jt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No pending applications"})]})}):h.map(C=>r.jsx(N,{partner:C},C.id))}),r.jsx(Xe,{value:"approved",className:"space-y-4",children:y.length===0?r.jsx(K,{children:r.jsxs(G,{className:"p-6 text-center",children:[r.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No approved partners"})]})}):y.map(C=>r.jsx(N,{partner:C},C.id))}),r.jsx(Xe,{value:"rejected",className:"space-y-4",children:w.length===0?r.jsx(K,{children:r.jsxs(G,{className:"p-6 text-center",children:[r.jsx(ps,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No rejected applications"})]})}):w.map(C=>r.jsx(N,{partner:C},C.id))}),r.jsx(Xe,{value:"all",className:"space-y-4",children:d?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading all partners..."})]}):c.map(C=>r.jsx(N,{partner:C},C.id))})]}),r.jsx(Dr,{open:o,onOpenChange:l,children:r.jsxs(Ar,{children:[r.jsxs(Er,{children:[r.jsx(Or,{children:"Reject Application"}),r.jsx(Us,{children:"Please provide a reason for rejecting this delivery partner application."})]}),r.jsxs("div",{className:"py-4",children:[r.jsx(be,{htmlFor:"rejection-reason",children:"Rejection Reason"}),r.jsx(Yt,{id:"rejection-reason",placeholder:"Enter the reason for rejection...",value:i,onChange:C=>a(C.target.value),className:"mt-2"})]}),r.jsxs(mo,{children:[r.jsx($,{variant:"outline",onClick:()=>{l(!1),a(""),s(null)},children:"Cancel"}),r.jsx($,{variant:"destructive",onClick:x,disabled:!i.trim()||v.isPending,children:v.isPending?"Rejecting...":"Reject Application"})]})]})})]})}const qVe=()=>{const{orderId:e}=Pm(),{data:t,isLoading:n}=Le({queryKey:[`/api/orders/${e}/tracking`],enabled:!!e,refetchInterval:3e4}),s=t,i=(t==null?void 0:t.tracking)||[];if(n||n)return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsx("div",{className:"container mx-auto py-8 px-4",children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mx-auto"}),r.jsx("div",{className:"h-32 bg-gray-200 rounded"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})});if(!s)return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsx("div",{className:"container mx-auto py-8 px-4",children:r.jsx(K,{children:r.jsxs(G,{className:"text-center py-8",children:[r.jsx(Ye,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Order Not Found"}),r.jsx("p",{className:"text-gray-500",children:"The order you're looking for doesn't exist or has been removed."})]})})})});const o=v=>{switch(v.toLowerCase()){case"pending":return"bg-yellow-500";case"processing":case"in production":return"bg-blue-500";case"ready_for_pickup":return"bg-purple-500";case"shipped":case"en_route_pickup":return"bg-orange-500";case"picked_up":case"en_route_delivery":return"bg-indigo-500";case"out for delivery":case"shipping final mile":return"bg-orange-500";case"delivered":return"bg-green-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},l=v=>{switch(v.toLowerCase()){case"pending":return"Order Placed";case"processing":return"In Production";case"ready_for_pickup":return"Ready for Pickup";case"en_route_pickup":return"En Route to Pickup";case"picked_up":return"Order Picked Up";case"en_route_delivery":return"En Route to You";case"shipped":return"Shipped";case"out for delivery":return"Out for Delivery";case"delivered":return"Delivered";default:return v.charAt(0).toUpperCase()+v.slice(1)}},c=[{key:"pending",label:"Order Placed",icon:mM},{key:"processing",label:"In Production",icon:Ye},{key:"ready_for_pickup",label:"Ready for Pickup",icon:Ye},{key:"en_route_pickup",label:"En Route to Pickup",icon:Ct},{key:"picked_up",label:"Order Picked Up",icon:Ct},{key:"en_route_delivery",label:"En Route to You",icon:Ct},{key:"delivered",label:"Delivered",icon:si}],h=(()=>{switch(s.status.toLowerCase()){case"pending":return 0;case"processing":return 1;case"ready_for_pickup":return 2;case"en_route_pickup":return 3;case"picked_up":return 4;case"en_route_delivery":return 5;case"delivered":return 6;default:return 0}})(),m=new Date(s.createdAt);m.setDate(m.getDate()+1);const f=s.deliveryPartner&&["en_route_pickup","picked_up","en_route_delivery"].includes(s.status);return r.jsx("div",{className:"min-h-screen bg-muted",children:r.jsxs("div",{className:"container mx-auto py-8 px-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx(Ae,{href:"/customer-dashboard",children:r.jsxs($,{variant:"outline",className:"flex items-center gap-2",children:[r.jsx(bc,{className:"h-4 w-4"}),"Back to Dashboard"]})}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsx(Ae,{href:`/orders/${e}/tracking`,children:r.jsx($,{variant:"outline",size:"sm",children:"Refresh Status"})})})]}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Order Tracking"}),r.jsx("div",{className:"w-16 h-1 bg-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Track your order in real-time. Delivery estimates may vary based on location and availability."})]}),r.jsx(K,{className:"mb-8 border-2",children:r.jsx(G,{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"ORDER PLACED"}),r.jsx("p",{className:"text-lg font-medium",children:no(new Date(s.createdAt),"MMM dd, yyyy")})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"TOTAL"}),r.jsxs("p",{className:"text-lg font-medium",children:["",parseFloat(s.totalAmount).toLocaleString()]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"SHIP TO"}),r.jsx("p",{className:"text-lg font-medium",children:s.customerName})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-semibold text-gray-700 mb-1",children:"ORDER"}),r.jsxs("p",{className:"text-lg font-medium",children:["#",s.id]})]})]})})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-3 bg-card p-4 rounded-lg border",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${o(s.status)}`}),r.jsx("h2",{className:"text-2xl font-bold text-foreground",children:l(s.status)})]}),r.jsxs("p",{className:"text-muted-foreground mt-4",children:["Estimated Delivery: ",no(m,"EEEE, MMMM dd, yyyy")]}),s.deliveryPartner&&r.jsxs("div",{className:"mt-4 flex items-center justify-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-4 w-4 text-blue-600"}),r.jsxs("span",{className:"text-sm font-medium",children:["Delivery Partner: ",s.deliveryPartner.name]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vt,{className:"h-4 w-4 text-green-600"}),r.jsx("a",{href:`tel:${s.deliveryPartner.phone}`,className:"text-sm text-blue-600 hover:underline",children:s.deliveryPartner.phone})]})]})]}),r.jsx(K,{className:"mb-8",children:r.jsxs(G,{className:"p-3 md:p-8",children:[r.jsxs("div",{className:"hidden md:block relative",children:[r.jsx("div",{className:"absolute top-6 left-0 right-0 h-1 bg-gray-200",children:r.jsx("div",{className:"h-full bg-green-500 transition-all duration-500",style:{width:`${h/(c.length-1)*100}%`}})}),r.jsx("div",{className:"relative grid grid-cols-7 gap-2",children:c.map((v,p)=>{const x=p<=h,y=p===h,w=v.icon;return r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`
                        relative mx-auto w-12 h-12 rounded-full flex items-center justify-center mb-3
                        ${x?"bg-green-500 text-white":"bg-gray-200 text-gray-400"}
                        ${y?"ring-4 ring-green-200":""}
                      `,children:r.jsx(w,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:v.label}),r.jsx("div",{className:"text-xs text-gray-500",children:p===0?no(new Date(s.createdAt),"MMM dd"):p<=h?no(new Date,"MMM dd"):no(m,"MMM dd")})]},v.key)})})]}),r.jsx("div",{className:"md:hidden",children:r.jsx("div",{className:"space-y-4",children:c.map((v,p)=>{const x=p<=h,y=p===h,w=v.icon;return r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:`
                        w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0
                        ${x?"bg-green-500 text-white":"bg-gray-200 text-gray-400"}
                        ${y?"ring-4 ring-green-200":""}
                      `,children:r.jsx(w,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:`text-sm font-semibold ${x?"text-green-600":"text-gray-500"}`,children:v.label}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:p===0?no(new Date(s.createdAt),"MMM dd"):p<=h?no(new Date,"MMM dd"):no(m,"MMM dd")})]}),x&&r.jsx(mM,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),!x&&r.jsx(gk,{className:"w-5 h-5 text-gray-300 flex-shrink-0"})]},v.key)})})})]})}),f&&r.jsx("div",{className:"mb-8",children:r.jsx(K7,{deliveryId:s.id,userType:"customer"})}),s.items&&s.items.length>0&&r.jsxs(K,{className:"mb-8",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Order Items"]})}),r.jsx(G,{children:r.jsx("div",{className:"space-y-4",children:s.items.map(v=>{var p;return r.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center",children:r.jsx(Ye,{className:"h-8 w-8 text-gray-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium",children:((p=v.product)==null?void 0:p.name)||`Product #${v.productId}`}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",v.quantity]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-medium",children:["",parseFloat(v.price).toLocaleString()]})})]},v.id)})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-5 w-5"}),"Shipping Information"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-1",children:"Ship Address"}),r.jsx("p",{className:"text-gray-600",children:s.shippingAddress})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-1",children:"Customer Name"}),r.jsx("p",{className:"text-gray-600",children:s.customerName})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("p",{className:"text-gray-600",children:s.phone})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-1",children:"Payment Method"}),r.jsx("p",{className:"text-gray-600 capitalize",children:s.paymentMethod})]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Vt,{className:"h-5 w-5"}),"Contact Information"]})}),r.jsxs(G,{className:"space-y-4",children:[s.deliveryPartner&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Delivery Partner"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-gray-600",children:s.deliveryPartner.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vt,{className:"h-4 w-4 text-green-600"}),r.jsx("a",{href:`tel:${s.deliveryPartner.phone}`,className:"text-blue-600 hover:underline",children:s.deliveryPartner.phone})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Customer Support"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vt,{className:"h-4 w-4 text-primary"}),r.jsx("a",{href:"tel:+9779805916598",className:"text-primary hover:underline",children:"+9779805916598"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Md,{className:"h-4 w-4 text-primary"}),r.jsx("a",{href:"mailto:sirahabazzar@gmail.com",className:"text-primary hover:underline",children:"sirahabazzar@gmail.com"})]})]})]})]})]})]}),i&&i.length>0&&r.jsxs(K,{className:"mt-8",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-5 w-5"}),"Tracking History"]})}),r.jsx(G,{children:r.jsx("div",{className:"space-y-4",children:i.map((v,p)=>r.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mt-2 ${o(v.status)}`}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium capitalize",children:l(v.status)}),r.jsx("span",{className:"text-sm text-muted-foreground",children:no(new Date(v.updatedAt),"MMM dd, yyyy HH:mm")})]}),v.description&&r.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:v.description}),v.location&&r.jsxs("p",{className:"text-muted-foreground text-xs mt-1 flex items-center gap-1",children:[r.jsx(Re,{className:"h-3 w-3"}),v.location]})]})]},v.id))})})]})]})})};function KVe(){const e=Pm(),t=parseInt(e.id||"0");el();const{toast:n}=ft(),[s,i]=b.useState(""),{data:a,isLoading:o}=Le({queryKey:["/api/deliveries",t],queryFn:async()=>{const m=await fetch(`/api/deliveries/${t}`);if(!m.ok)throw new Error("Failed to fetch delivery details");return m.json()},enabled:!!t,refetchInterval:3e4});b.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(m=>{const{latitude:f,longitude:v}=m.coords;i(`${f}, ${v}`)},m=>{console.error("Error getting location:",m),n({title:"Location Error",description:"Could not get your current location",variant:"destructive"})})},[n]);const l=async()=>{if(!(!s||!a))try{(await fetch(`/api/deliveries/${a.id}/location`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:s})})).ok&&n({title:"Location Updated",description:"Your location has been shared with the customer."})}catch(m){console.error("Error updating location:",m)}},c=m=>{switch(m){case"assigned":return 25;case"picked_up":return 50;case"in_transit":return 75;case"delivered":return 100;default:return 0}},d=m=>{switch(m){case"assigned":return"bg-yellow-500";case"picked_up":return"bg-blue-500";case"in_transit":return"bg-orange-500";case"delivered":return"bg-green-500";default:return"bg-gray-500"}},h=m=>{const f=encodeURIComponent(m);/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?window.open(`geo:0,0?q=${f}`,"_blank"):window.open(`https://www.google.com/maps/search/?api=1&query=${f}`,"_blank")};return o?r.jsx("div",{className:"container mx-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading delivery details..."})]})})}):a?r.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx($,{variant:"outline",size:"icon",onClick:()=>window.history.back(),children:r.jsx(bc,{className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Delivery Route"}),r.jsxs("p",{className:"text-muted-foreground",children:["Order #",a.orderId]})]})]}),r.jsxs(K,{className:"mb-6",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Delivery Status"}),r.jsx(ue,{variant:"outline",className:d(a.status),children:a.status.replace("_"," ").toUpperCase()})]})}),r.jsxs(G,{children:[r.jsx(yd,{value:c(a.status),className:"mb-4"}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"font-medium",children:"Assigned"})}),r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"font-medium",children:"Picked Up"})}),r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"font-medium",children:"In Transit"})}),r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"font-medium",children:"Delivered"})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"h-5 w-5"}),"Route Details"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mt-2"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-green-800 dark:text-green-400",children:"Pickup Location"}),r.jsx("p",{className:"text-sm text-green-600 dark:text-green-300",children:a.pickupAddress}),r.jsxs($,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>h(a.pickupAddress),children:[r.jsx(_t,{className:"h-4 w-4 mr-2"}),"Navigate"]})]})]}),r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("div",{className:"w-0.5 h-8 bg-border"})}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mt-2"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-red-800 dark:text-red-400",children:"Delivery Location"}),r.jsx("p",{className:"text-sm text-red-600 dark:text-red-300",children:a.deliveryAddress}),r.jsxs($,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>h(a.deliveryAddress),children:[r.jsx(_t,{className:"h-4 w-4 mr-2"}),"Navigate"]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-primary",children:[a.estimatedDistance,"km"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Distance"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-primary",children:["",a.deliveryFee]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Delivery Fee"})]})]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Vt,{className:"h-5 w-5"}),"Customer Information"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:a.customerName}),r.jsx("p",{className:"text-sm text-muted-foreground",children:a.customerPhone})]}),a.specialInstructions&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium mb-1",children:"Special Instructions:"}),r.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-lg",children:a.specialInstructions})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs($,{variant:"outline",className:"flex-1",onClick:()=>window.open(`tel:${a.customerPhone}`,"_self"),children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Call Customer"]})}),s&&r.jsxs($,{onClick:l,className:"w-full",variant:"outline",children:[r.jsx(Re,{className:"h-4 w-4 mr-2"}),"Share My Location"]})]})]}),r.jsxs(K,{className:"lg:col-span-2",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-5 w-5"}),"Delivery Timeline"]})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-4",children:[a.assignedAt&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Delivery Assigned"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(a.assignedAt).toLocaleString()})]})]}),a.pickedUpAt&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Order Picked Up"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(a.pickedUpAt).toLocaleString()})]})]}),a.deliveredAt&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Order Delivered"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(a.deliveredAt).toLocaleString()})]})]})]})})]})]})]}):r.jsx("div",{className:"container mx-auto p-6",children:r.jsx(K,{children:r.jsxs(G,{className:"p-6 text-center",children:[r.jsx(Ye,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Delivery not found"})]})})})}function GVe(){const{user:e}=Gt(),[t,n]=b.useState([]),[s,i]=b.useState(null),{data:a=[]}=Le({queryKey:[`/api/notifications/user/${e==null?void 0:e.id}`],enabled:!!(e!=null&&e.id),refetchInterval:5e3});b.useEffect(()=>{if(!a.length)return;const h=a[0];if(h&&h.id!==s&&!h.isRead){n(m=>m.some(v=>v.id===h.id)?m:[h,...m].slice(0,3)),i(h.id);try{const m=new Audio("/notification.mp3"),f=h.title.includes("Approved")||h.message.includes("approved");m.volume=f?.8:.6,m.play().then(()=>{console.log("Notification banner sound played successfully"),f&&setTimeout(()=>{const v=new Audio("/notification.mp3");v.volume=.5,v.play().catch(()=>{console.log("Could not play celebratory sound")})},500)}).catch(()=>{console.log("Could not play notification banner sound")})}catch(m){console.log("Error playing notification banner sound:",m)}setTimeout(()=>{n(m=>m.filter(f=>f.id!==h.id))},3e3)}},[a,s]);const o=h=>{n(m=>m.filter(f=>f.id!==h))},l=async h=>{try{await fetch(`/api/notifications/${h}/read`,{method:"PUT"}),o(h)}catch(m){console.error("Error marking notification as read:",m)}},c=h=>{switch(h){case"order":return"";case"delivery":return"";case"payment":return"";case"product":return"";case"store":return"";case"system":return"";default:return""}},d=h=>{switch(h){case"order":return"bg-blue-500";case"delivery":return"bg-green-500";case"payment":return"bg-yellow-500";case"product":return"bg-purple-500";case"store":return"bg-orange-500";case"system":return"bg-gray-500";default:return"bg-blue-500"}};return!e||t.length===0?null:r.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 space-y-2 p-2",children:t.map((h,m)=>r.jsx("div",{className:`transform transition-all duration-300 ease-in-out ${m===0?"translate-y-0 opacity-100":"translate-y-2 opacity-90"}`,style:{marginTop:m*10},children:r.jsx("div",{className:`${d(h.type)} text-white rounded-lg shadow-lg mx-auto max-w-4xl`,children:r.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-2",children:r.jsx(Qt,{className:"h-4 w-4 text-white"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("span",{className:"text-lg",children:c(h.type)}),r.jsx("p",{className:"font-semibold text-sm sm:text-base truncate",children:h.title}),r.jsx(ue,{variant:"secondary",className:"bg-white bg-opacity-20 text-white text-xs",children:h.type})]}),r.jsx("p",{className:"text-xs sm:text-sm text-white text-opacity-90 line-clamp-2",children:h.message})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[r.jsx($,{variant:"ghost",size:"sm",className:"text-white hover:bg-white hover:bg-opacity-20 text-xs p-2",onClick:()=>l(h.id),children:"Mark Read"}),r.jsx($,{variant:"ghost",size:"sm",className:"text-white hover:bg-white hover:bg-opacity-20 p-1",onClick:()=>o(h.id),children:r.jsx(Fr,{className:"h-4 w-4"})})]})]})})},h.id))})}const ZVe=ee.object({title:ee.string().min(1,"Title is required"),description:ee.string().optional(),discountPercentage:ee.number().min(1).max(99),startsAt:ee.string(),endsAt:ee.string(),isActive:ee.boolean().default(!0)});function YVe(){const{toast:e}=ft(),t=on(),[n,s]=b.useState(!1),[i,a]=b.useState(null),[o,l]=b.useState(null),[c,d]=b.useState(null),[h,m]=b.useState(!1);b.useEffect(()=>{const M=localStorage.getItem("adminUser");if(M&&M!=="undefined"&&M!=="null")try{const T=JSON.parse(M);d(T),m(!0)}catch(T){console.error("Error parsing admin user data:",T),m(!1)}else m(!1)},[]);const f=fn({resolver:pn(ZVe),defaultValues:{title:"",description:"",discountPercentage:10,startsAt:new Date().toISOString().slice(0,16),endsAt:new Date(Date.now()+24*60*60*1e3).toISOString().slice(0,16),isActive:!0}}),{data:v,isLoading:p}=Le({queryKey:["/api/flash-sales"]}),{data:x}=Le({queryKey:["/api/flash-sales/active"]}),{data:y}=Le({queryKey:["/api/flash-sales",o,"products"],enabled:!!o}),w=pt({mutationFn:M=>Kt("/api/admin/flash-sales",{method:"POST",body:JSON.stringify(M)}),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/flash-sales"]}),s(!1),f.reset(),e({title:"Success",description:"Flash sale created successfully"})},onError:()=>{e({title:"Error",description:"Failed to create flash sale",variant:"destructive"})}}),j=pt({mutationFn:({id:M,data:T})=>Kt(`/api/admin/flash-sales/${M}`,{method:"PUT",body:JSON.stringify(T)}),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/flash-sales"]}),a(null),f.reset(),e({title:"Success",description:"Flash sale updated successfully"})},onError:()=>{e({title:"Error",description:"Failed to update flash sale",variant:"destructive"})}}),N=pt({mutationFn:M=>Kt(`/api/admin/flash-sales/${M}`,{method:"DELETE"}),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/flash-sales"]}),e({title:"Success",description:"Flash sale deleted successfully"})},onError:()=>{e({title:"Error",description:"Failed to delete flash sale",variant:"destructive"})}}),C=M=>{const T={...M,startsAt:new Date(M.startsAt).toISOString(),endsAt:new Date(M.endsAt).toISOString()};i?j.mutate({id:i.id,data:T}):w.mutate(T)},P=M=>{a(M),f.reset({title:M.title,description:M.description||"",discountPercentage:M.discountPercentage,startsAt:new Date(M.startsAt).toISOString().slice(0,16),endsAt:new Date(M.endsAt).toISOString().slice(0,16),isActive:M.isActive}),s(!0)},k=M=>{confirm("Are you sure you want to delete this flash sale?")&&N.mutate(M)},_=M=>{const T=new Date,I=new Date(M.startsAt),A=new Date(M.endsAt);return M.isActive&&T>=I&&T<=A},O=M=>new Date(M).toLocaleString();return p?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"text-center",children:"Loading flash sales..."})}):r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[!h&&r.jsx(K,{className:"mb-6 border-orange-200 bg-orange-50",children:r.jsx(G,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(qte,{className:"h-5 w-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Read-Only Access"}),r.jsx("p",{className:"text-sm text-orange-600",children:"You can view flash sales but cannot create, edit, or delete them. Admin access required for management."})]})]})})}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(M_,{className:"h-8 w-8 text-yellow-500"}),"Flash Sales"]}),r.jsx("p",{className:"text-gray-600",children:h?"Manage time-limited promotional sales":"Browse current flash sales and discounts"})]}),h&&r.jsxs($,{onClick:()=>{a(null),f.reset(),s(!0)},className:"flex items-center gap-2",children:[r.jsx(zt,{className:"h-4 w-4"}),"Create Flash Sale"]})]}),x&&x.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[r.jsx(jt,{className:"h-6 w-6 text-green-500"}),"Currently Active"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(M=>r.jsxs(K,{className:"border-green-200 bg-green-50",children:[r.jsx(re,{className:"pb-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx(ne,{className:"text-lg",children:M.title}),r.jsxs(ue,{variant:"default",className:"bg-green-500",children:[r.jsx(E_,{className:"h-3 w-3 mr-1"}),M.discountPercentage,"% OFF"]})]})}),r.jsxs(G,{children:[M.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:M.description}),r.jsx("div",{className:"space-y-2 text-sm",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Ends:"})," ",O(M.endsAt)]})}),r.jsx($,{variant:"outline",size:"sm",className:"mt-3 w-full",onClick:()=>l(M.id),children:"View Products"})]})]},M.id))})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"All Flash Sales"}),!v||v.length===0?r.jsx(K,{children:r.jsxs(G,{className:"text-center py-8",children:[r.jsx(M_,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:h?"No flash sales created yet":"No flash sales available at the moment"}),h&&r.jsx($,{onClick:()=>s(!0),className:"mt-4",children:"Create Your First Flash Sale"})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(M=>r.jsxs(K,{className:_(M)?"border-yellow-200":"",children:[r.jsx(re,{className:"pb-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx(ne,{className:"text-lg",children:M.title}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(ue,{variant:_(M)?"default":"secondary",children:[r.jsx(E_,{className:"h-3 w-3 mr-1"}),M.discountPercentage,"% OFF"]}),_(M)&&r.jsx(ue,{variant:"default",className:"bg-green-500",children:"Live"})]})]})}),r.jsxs(G,{children:[M.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:M.description}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Starts:"})," ",O(M.startsAt)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Ends:"})," ",O(M.endsAt)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Status:"})," ",r.jsx(ue,{variant:M.isActive?"default":"secondary",children:M.isActive?"Active":"Inactive"})]})]}),h&&r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsxs($,{variant:"outline",size:"sm",onClick:()=>P(M),className:"flex-1",children:[r.jsx(us,{className:"h-4 w-4 mr-1"}),"Edit"]}),r.jsx($,{variant:"outline",size:"sm",onClick:()=>k(M.id),className:"text-red-600 hover:text-red-700",children:r.jsx(ei,{className:"h-4 w-4"})})]})]})]},M.id))})]}),r.jsx(Dr,{open:n,onOpenChange:M=>{s(M),M||(a(null),f.reset())},children:r.jsxs(Ar,{className:"max-w-md",children:[r.jsx(Er,{children:r.jsx(Or,{children:i?"Edit Flash Sale":"Create Flash Sale"})}),r.jsx(Rr,{...f,children:r.jsxs("form",{onSubmit:f.handleSubmit(C),className:"space-y-4",children:[r.jsx(ae,{control:f.control,name:"title",render:({field:M})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Title"}),r.jsx(he,{children:r.jsx(de,{placeholder:"e.g., Weekend Flash Sale",...M})})]})}),r.jsx(ae,{control:f.control,name:"description",render:({field:M})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Description (Optional)"}),r.jsx(he,{children:r.jsx(Yt,{placeholder:"Brief description of the flash sale...",...M})})]})}),r.jsx(ae,{control:f.control,name:"discountPercentage",render:({field:M})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Discount Percentage"}),r.jsx(he,{children:r.jsx(de,{type:"number",min:"1",max:"99",...M,onChange:T=>M.onChange(parseInt(T.target.value))})})]})}),r.jsx(ae,{control:f.control,name:"startsAt",render:({field:M})=>r.jsxs(se,{children:[r.jsx(ce,{children:"Start Date & Time"}),r.jsx(he,{children:r.jsx(de,{type:"datetime-local",...M})})]})}),r.jsx(ae,{control:f.control,name:"endsAt",render:({field:M})=>r.jsxs(se,{children:[r.jsx(ce,{children:"End Date & Time"}),r.jsx(he,{children:r.jsx(de,{type:"datetime-local",...M})})]})}),r.jsx(ae,{control:f.control,name:"isActive",render:({field:M})=>r.jsxs(se,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ce,{className:"text-base",children:"Active"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable this flash sale"})]}),r.jsx(he,{children:r.jsx("input",{type:"checkbox",checked:M.value,onChange:M.onChange,className:"w-4 h-4"})})]})}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx($,{type:"button",variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Cancel"}),r.jsx($,{type:"submit",disabled:w.isPending||j.isPending,className:"flex-1",children:i?"Update":"Create"})]})]})})]})}),o&&r.jsx(Dr,{open:!!o,onOpenChange:()=>l(null),children:r.jsxs(Ar,{className:"max-w-4xl",children:[r.jsx(Er,{children:r.jsx(Or,{children:"Flash Sale Products"})}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:!y||y.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-500",children:"No fast-sell products available for this flash sale"}),r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'Products marked as "Fast Sell" will appear here'})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(M=>r.jsx(K,{children:r.jsxs(G,{className:"p-4",children:[r.jsx("img",{src:M.imageUrl||"/placeholder-product.jpg",alt:M.name,className:"w-full h-32 object-cover rounded mb-3"}),r.jsx("h3",{className:"font-medium text-sm mb-1",children:M.name}),r.jsxs("p",{className:"text-lg font-bold text-primary",children:["",M.price]}),r.jsx(ue,{variant:"secondary",className:"mt-2",children:"Fast Sell"})]})},M.id))})})]})})]})}function ry({className:e,...t}){return r.jsx("div",{className:Ve("animate-pulse rounded-md bg-muted",e),...t})}function r$(){const[,e]=Jr(),{mode:t}=ua(),{selectSingleItem:n}=wc(),{toast:s}=ft(),[i,a]=b.useState(""),[o,l]=b.useState("discount"),{data:c,isLoading:d,error:h}=Le({queryKey:["/api/products/special-offers"],queryFn:async()=>{const x=await fetch("/api/products/special-offers");if(!x.ok)throw new Error("Failed to fetch special offers");const y=await x.json();return await Promise.all(y.map(async j=>{try{const N=await fetch(`/api/stores/${j.storeId}`);if(N.ok){const C=await N.json();return{...j,store:C}}}catch(N){console.error("Error fetching store:",N)}return j}))}}),f=[...(c==null?void 0:c.filter(x=>{var j,N,C,P;const y=t==="food"?x.productType==="food"||((j=x.store)==null?void 0:j.storeType)==="restaurant":x.productType==="retail"||((N=x.store)==null?void 0:N.storeType)==="retail",w=!i||x.name.toLowerCase().includes(i.toLowerCase())||((C=x.description)==null?void 0:C.toLowerCase().includes(i.toLowerCase()))||((P=x.store)==null?void 0:P.name.toLowerCase().includes(i.toLowerCase()));return y&&w}))||[]].sort((x,y)=>{switch(o){case"discount":return(y.offerPercentage||0)-(x.offerPercentage||0);case"price":return parseFloat(x.price)-parseFloat(y.price);case"name":return x.name.localeCompare(y.name);default:return 0}}),v=x=>{if(x.originalPrice){const y=parseFloat(x.originalPrice),w=parseFloat(x.price);return(y-w).toFixed(2)}return"0.00"},p=x=>{var y;x.productType==="food"||((y=x.store)==null?void 0:y.storeType)==="restaurant"?e(`/food/${x.id}`):e(`/products/${x.id}`)};return h?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Special Offers"}),r.jsx("p",{className:"text-gray-600",children:"Failed to load special offers. Please try again later."})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(wn,{className:"h-8 w-8"}),r.jsx("h1",{className:"text-3xl font-bold",children:t==="food"?"Food Special Offers":"Shopping Special Offers"})]}),r.jsx("p",{className:"text-red-100 text-lg",children:t==="food"?"Amazing discounts on your favorite restaurant items":"Incredible deals on top products - limited time only!"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(de,{type:"text",placeholder:`Search ${t==="food"?"food items":"products"}...`,value:i,onChange:x=>a(x.target.value),className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-red-200"})]}),r.jsxs("select",{value:o,onChange:x=>l(x.target.value),className:"px-4 py-2 rounded-md bg-white/10 border border-white/20 text-white",children:[r.jsx("option",{value:"discount",children:"Sort by Discount"}),r.jsx("option",{value:"price",children:"Sort by Price"}),r.jsx("option",{value:"name",children:"Sort by Name"})]})]})]})}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:d?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((x,y)=>r.jsxs(K,{className:"overflow-hidden",children:[r.jsx(ry,{className:"h-48 w-full"}),r.jsxs(re,{children:[r.jsx(ry,{className:"h-4 w-3/4"}),r.jsx(ry,{className:"h-3 w-1/2"})]}),r.jsx(G,{children:r.jsx(ry,{className:"h-6 w-1/3"})})]},y))}):f.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(E_,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-600 mb-2",children:"No Special Offers Available"}),r.jsx("p",{className:"text-gray-500",children:i?"No offers match your search criteria.":`No special offers available in ${t} mode right now.`})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("p",{className:"text-gray-600",children:["Found ",f.length," special offer",f.length!==1?"s":"",i&&` for "${i}"`]}),r.jsx(ue,{variant:"secondary",className:"bg-red-100 text-red-800",children:t==="food"?"Food Offers":"Shopping Offers"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:f.map(x=>r.jsxs(K,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer group",onClick:()=>p(x),children:[r.jsxs("div",{className:"relative h-48",children:[r.jsx("img",{src:x.images&&x.images[0]||x.imageUrl||"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300",alt:x.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:y=>{y.currentTarget.src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300"}}),r.jsxs(ue,{className:"absolute top-2 left-2 bg-red-500 hover:bg-red-600 text-white font-bold",children:[x.offerPercentage,"% OFF"]}),r.jsx(ue,{className:"absolute top-2 right-2 bg-white/90 text-gray-800",children:x.productType==="food"?r.jsxs(r.Fragment,{children:[r.jsx(Da,{className:"h-3 w-3 mr-1"})," Food"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ye,{className:"h-3 w-3 mr-1"})," Product"]})}),x.productType==="food"&&r.jsxs("div",{className:"absolute bottom-2 left-2 flex space-x-1",children:[x.isVegetarian&&r.jsx(ue,{className:"bg-green-500 hover:bg-green-600 text-white",children:r.jsx(Pz,{className:"h-3 w-3"})}),x.isVegan&&r.jsx(ue,{className:"bg-green-600 hover:bg-green-700 text-white",children:"Vegan"})]})]}),r.jsxs(re,{className:"pb-2",children:[r.jsx("h3",{className:"font-semibold text-lg text-gray-900 line-clamp-1",children:x.name}),x.store&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Re,{className:"h-3 w-3 mr-1"}),x.store.name]})]}),r.jsxs(G,{className:"py-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-xl font-bold text-green-600",children:["",x.price]}),x.originalPrice&&r.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["",x.originalPrice]})]}),r.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["Save ",v(x)]})]}),x.rating&&parseFloat(x.rating)>0&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Bt,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm text-gray-600 ml-1",children:x.rating})]})]}),x.offerEndDate&&r.jsxs("div",{className:"flex items-center text-xs text-red-600 mt-2",children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Ends ",new Date(x.offerEndDate).toLocaleDateString()]})]}),r.jsx(w8,{className:"pt-2",children:r.jsx($,{className:"w-full bg-red-500 hover:bg-red-600 text-white",onClick:async y=>{y.stopPropagation();try{t==="food"?(await n(x.id),s({title:"Ready for Checkout",description:`${x.name} selected for checkout`}),e("/checkout")):e(`/products/${x.id}`)}catch{s({title:"Error",description:"Failed to prepare item for checkout",variant:"destructive"})}},children:t==="food"?"Order Now":"View Deal"})})]},x.id))})]})})]})}function XVe(){var k,_,O,M;const[e,t]=b.useState(""),[n,s]=b.useState(""),[i,a]=b.useState("Siraha Bazaar Test"),[o,l]=b.useState("This is a test notification from production!"),[c,d]=b.useState("production_test"),[h,m]=b.useState(!1),[f,v]=b.useState([]),[p,x]=b.useState(null),{toast:y}=ft(),w=T=>{v(I=>[T,...I])},j=async()=>{if(!e||e.length<100){y({title:"Invalid Token",description:"Please enter a valid FCM token (140+ characters)",variant:"destructive"});return}m(!0);try{const I=await(await fetch("/api/notification/production-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fcmToken:e,userId:n||void 0,notificationType:c})})).json();I.success?(w({type:"Production FCM Test",success:!0,message:"Notification sent successfully to production device",timestamp:new Date().toISOString(),messageId:I.messageId,details:I}),y({title:"Notification Sent!",description:"Check your Android device for the notification"})):(w({type:"Production FCM Test",success:!1,message:I.error||"Test failed",timestamp:new Date().toISOString(),details:I}),y({title:"Test Failed",description:I.error,variant:"destructive"}))}catch(T){w({type:"Production FCM Test",success:!1,message:`Network error: ${T}`,timestamp:new Date().toISOString()}),y({title:"Network Error",description:"Failed to connect to server",variant:"destructive"})}finally{m(!1)}},N=async()=>{var T;if(!n){y({title:"User ID Required",description:"Please enter a user ID for database testing",variant:"destructive"});return}m(!0);try{const A=await(await fetch("/api/test-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n,title:i,message:o,type:"database_test"})})).json();A.success?(w({type:"Database + FCM Test",success:!0,message:"Database notification created and FCM sent",timestamp:new Date().toISOString(),details:{pushNotificationSent:A.pushNotificationSent,androidNotificationSent:A.androidNotificationSent,notificationId:(T=A.notification)==null?void 0:T.id}}),y({title:"Database Test Successful",description:`Notification saved and ${A.androidNotificationSent?"FCM sent":"FCM failed"}`})):w({type:"Database + FCM Test",success:!1,message:A.error||"Database test failed",timestamp:new Date().toISOString()})}catch(I){w({type:"Database + FCM Test",success:!1,message:`Error: ${I}`,timestamp:new Date().toISOString()})}finally{m(!1)}},C=async()=>{m(!0);try{const I=await(await fetch("/api/notification/health")).json();x(I),w({type:"System Health Check",success:I.healthy,message:I.message,timestamp:new Date().toISOString(),details:I.status}),y({title:I.healthy?"System Healthy":"System Issues",description:I.message,variant:I.healthy?"default":"destructive"})}catch(T){w({type:"System Health Check",success:!1,message:`Health check failed: ${T}`,timestamp:new Date().toISOString()})}finally{m(!1)}},P=()=>{v([]),x(null)};return r.jsxs("div",{className:"container mx-auto p-4 max-w-4xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Production Notification Testing"}),r.jsx("p",{className:"text-muted-foreground",children:"Test your FCM notification system to ensure smooth operation in production"})]}),p&&r.jsxs(K,{className:"mb-6",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Bte,{className:"h-5 w-5"}),"System Health Status"]})}),r.jsx(G,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[r.jsx("span",{children:"Overall Health"}),r.jsx(ue,{variant:p.healthy?"default":"destructive",children:p.healthy?"Healthy":"Issues"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[r.jsx("span",{children:"Firebase"}),r.jsx(ue,{variant:(k=p.status)!=null&&k.firebase?"default":"secondary",children:(_=p.status)!=null&&_.firebase?"Connected":"Disconnected"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[r.jsx("span",{children:"Database"}),r.jsx(ue,{variant:(O=p.status)!=null&&O.database?"default":"secondary",children:(M=p.status)!=null&&M.database?"Connected":"Disconnected"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Jd,{className:"h-5 w-5"}),"Production FCM Test"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"fcmToken",children:"Android FCM Token"}),r.jsx(Yt,{id:"fcmToken",placeholder:"Paste your Android app's FCM token here...",value:e,onChange:T=>t(T.target.value),className:"min-h-[100px] font-mono text-sm"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Token should be 140+ characters. Get from Android app logs."})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"notificationType",children:"Notification Type"}),r.jsxs(dt,{value:c,onValueChange:d,children:[r.jsx(ot,{children:r.jsx(ut,{})}),r.jsxs(lt,{children:[r.jsx(oe,{value:"production_test",children:"Production Test"}),r.jsx(oe,{value:"order_update",children:"Order Update"}),r.jsx(oe,{value:"delivery_assignment",children:"Delivery Assignment"}),r.jsx(oe,{value:"promotion",children:"Promotion"})]})]})]}),r.jsx($,{onClick:j,disabled:h||!e,className:"w-full",children:h?"Sending...":"Test Production FCM"})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Qt,{className:"h-5 w-5"}),"Database + FCM Test"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(be,{htmlFor:"userId",children:"User ID (Optional)"}),r.jsx(de,{id:"userId",type:"number",placeholder:"Enter user ID...",value:n,onChange:T=>s(T.target.value)})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"title",children:"Notification Title"}),r.jsx(de,{id:"title",value:i,onChange:T=>a(T.target.value)})]}),r.jsxs("div",{children:[r.jsx(be,{htmlFor:"message",children:"Notification Message"}),r.jsx(Yt,{id:"message",value:o,onChange:T=>l(T.target.value)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx($,{onClick:N,disabled:h,variant:"outline",children:"Test Database"}),r.jsx($,{onClick:C,disabled:h,variant:"outline",children:"Health Check"})]})]})]})]}),r.jsx("div",{children:r.jsxs(K,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between",children:[r.jsx(ne,{children:"Test Results"}),f.length>0&&r.jsx($,{onClick:P,variant:"outline",size:"sm",children:"Clear Results"})]}),r.jsx(G,{children:f.length===0?r.jsxs(ii,{children:[r.jsx(Nr,{className:"h-4 w-4"}),r.jsx(ai,{children:"No tests run yet. Start by testing your notification system."})]}):r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:f.map((T,I)=>r.jsxs("div",{className:`p-3 border rounded-lg ${T.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[T.success?r.jsx(yt,{className:"h-4 w-4 text-green-600"}):r.jsx(ps,{className:"h-4 w-4 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:T.type}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(T.timestamp).toLocaleTimeString()})]})]}),r.jsx(ue,{variant:T.success?"default":"destructive",children:T.success?"Success":"Failed"})]}),r.jsx("p",{className:"text-sm mt-2",children:T.message}),T.messageId&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1 font-mono",children:["Message ID: ",T.messageId]})]},I))})})]})})]}),r.jsxs(K,{className:"mt-6",children:[r.jsx(re,{children:r.jsx(ne,{children:"Testing Instructions"})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"1. Get FCM Token from Android App:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'Open your Android app and check the logs for "FCM Token:" message. Copy the entire token.'})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"2. Test Production FCM:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'Paste the FCM token and click "Test Production FCM" to send notification directly to your device.'})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"3. Test Database Integration:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter a user ID and test both database storage and FCM delivery together."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"4. Monitor System Health:"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Check Firebase and database connectivity to ensure all systems are operational."})]})]})]})]})}const IE=class IE{static async initialize(){try{if("serviceWorker"in navigator){const t=await navigator.serviceWorker.register("/sw.js");return console.log("Service Worker registered successfully:",t.scope),await this.requestNotificationPermission(),t}}catch(t){console.error("PWA initialization failed:",t)}}static async requestNotificationPermission(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.log("This browser does not support notifications"),!1)}static async getVapidPublicKey(){if(this.vapidPublicKey)return this.vapidPublicKey;try{const t=await fetch("/api/notifications/vapid-public-key");if(t.ok){const n=await t.json();return this.vapidPublicKey=n.publicKey,this.vapidPublicKey}}catch(t){console.error("Failed to get VAPID public key:",t)}return null}static async subscribeToPushNotifications(t){try{const n=await navigator.serviceWorker.ready,s=await this.getVapidPublicKey();if(!s)return console.error("VAPID public key not available"),!1;const i=this.urlBase64ToUint8Array(s),a=await n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i});return(await fetch("/api/push-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,subscription:a})})).ok}catch(n){return console.error("Failed to subscribe to push notifications:",n),!1}}static urlBase64ToUint8Array(t){const n="=".repeat((4-t.length%4)%4),s=(t+n).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(s),a=new Uint8Array(i.length);for(let o=0;o<i.length;++o)a[o]=i.charCodeAt(o);return a}static async showNotification(t){if(!await this.requestNotificationPermission()){console.warn("Notification permission not granted");return}await(await navigator.serviceWorker.ready).showNotification(t.title,{body:t.body,icon:t.icon||"/icon-192x192.png",badge:t.badge||"/icon-72x72.png",data:t.data,vibrate:[100,50,100],actions:[{action:"view",title:"View",icon:"/icon-96x96.png"},{action:"close",title:"Close",icon:"/icon-96x96.png"}]})}static isPWA(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://")}static getInstallPrompt(){return new Promise(t=>{window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),t(n)})})}static async installPWA(){try{const t=await this.getInstallPrompt();return t?(t.prompt(),(await t.userChoice).outcome==="accepted"):!1}catch(t){return console.error("Failed to install PWA:",t),!1}}};IE.vapidPublicKey=null;let Po=IE;function QVe(){const[e,t]=b.useState(null),[n,s]=b.useState(!1),[i,a]=b.useState(!1);b.useEffect(()=>{const c=h=>{h.preventDefault(),t(h),Po.isPWA()||setTimeout(()=>{s(!0)},5e3)},d=()=>{s(!1),t(null),console.log("PWA was installed successfully")};return window.addEventListener("beforeinstallprompt",c),window.addEventListener("appinstalled",d),()=>{window.removeEventListener("beforeinstallprompt",c),window.removeEventListener("appinstalled",d)}},[]);const o=async()=>{if(e){a(!0);try{await e.prompt(),(await e.userChoice).outcome==="accepted"?(console.log("User accepted the install prompt"),s(!1)):console.log("User dismissed the install prompt")}catch(c){console.error("Install prompt failed:",c)}finally{a(!1),t(null)}}},l=()=>{s(!1),sessionStorage.setItem("pwa-install-dismissed","true")};return!n||!e||Po.isPWA()||sessionStorage.getItem("pwa-install-dismissed")?null:r.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center",children:r.jsx(Jd,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Install Siraha Bazaar"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Get faster access and offline features by installing our app"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[r.jsx("button",{onClick:o,disabled:i,className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md text-white bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin mr-1"}),"Installing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Qd,{className:"w-3 h-3 mr-1"}),"Install"]})}),r.jsx("button",{onClick:l,className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Not now"})]})]}),r.jsx("button",{onClick:l,className:"flex-shrink-0 p-1 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:r.jsx(Fr,{className:"w-4 h-4"})})]})})})}function JVe(){const[e,t]=b.useState(!1),[n,s]=b.useState(navigator.onLine),[i,a]=b.useState(null),[o,l]=b.useState("default"),[c,d]=b.useState([]);b.useEffect(()=>{t(Po.isPWA()),l(Notification.permission),navigator.serviceWorker.ready.then(y=>{a(y)});const p=()=>s(!0),x=()=>s(!1);return window.addEventListener("online",p),window.addEventListener("offline",x),()=>{window.removeEventListener("online",p),window.removeEventListener("offline",x)}},[]);const h=async()=>{const p=[];try{const x=await navigator.serviceWorker.ready;p.push({test:"Service Worker Registration",status:"passed",details:`Registered at scope: ${x.scope}`})}catch(x){p.push({test:"Service Worker Registration",status:"failed",details:x instanceof Error?x.message:"Unknown error"})}try{const x=await caches.keys();p.push({test:"Cache API",status:"passed",details:`${x.length} caches found: ${x.join(", ")}`})}catch(x){p.push({test:"Cache API",status:"failed",details:x instanceof Error?x.message:"Unknown error"})}try{const y=await(await fetch("/manifest.json")).json();p.push({test:"Web App Manifest",status:"passed",details:`App: ${y.name}, Icons: ${y.icons.length}`})}catch(x){p.push({test:"Web App Manifest",status:"failed",details:x instanceof Error?x.message:"Unknown error"})}try{"Notification"in window?p.push({test:"Notification API",status:"passed",details:`Permission: ${Notification.permission}`}):p.push({test:"Notification API",status:"failed",details:"Notifications not supported"})}catch(x){p.push({test:"Notification API",status:"failed",details:x instanceof Error?x.message:"Unknown error"})}try{const y=await(await navigator.serviceWorker.ready).pushManager.getSubscription();p.push({test:"Push Messaging",status:y?"passed":"warning",details:y?"Push subscription active":"No push subscription found"})}catch(x){p.push({test:"Push Messaging",status:"failed",details:x instanceof Error?x.message:"Unknown error"})}d(p)},m=async()=>{try{await Po.showNotification({title:"PWA Test Notification",body:"This is a test notification from Siraha Bazaar PWA!",data:{test:!0}})}catch(p){console.error("Test notification failed:",p)}},f=async()=>{try{await Po.installPWA()&&t(!0)}catch(p){console.error("PWA installation failed:",p)}},v=async()=>{const p=await Po.requestNotificationPermission();return l(Notification.permission),p};return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:"PWA Testing Dashboard"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Jd,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mr-3"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"PWA Status"}),r.jsx("div",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:e?"Installed":"Web Browser"})]})]})}),r.jsx("div",{className:"bg-green-50 dark:bg-green-900 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[n?r.jsx(ere,{className:"w-8 h-8 text-green-600 dark:text-green-400 mr-3"}):r.jsx(Jte,{className:"w-8 h-8 text-red-600 dark:text-red-400 mr-3"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Network"}),r.jsx("div",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:n?"Online":"Offline"})]})]})}),r.jsx("div",{className:"bg-purple-50 dark:bg-purple-900 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Qt,{className:"w-8 h-8 text-purple-600 dark:text-purple-400 mr-3"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Notifications"}),r.jsx("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:o==="granted"?"Enabled":o==="denied"?"Blocked":"Pending"})]})]})}),r.jsx("div",{className:"bg-orange-50 dark:bg-orange-900 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Qd,{className:"w-8 h-8 text-orange-600 dark:text-orange-400 mr-3"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"Service Worker"}),r.jsx("div",{className:"text-lg font-bold text-orange-900 dark:text-orange-100",children:i?"Active":"Inactive"})]})]})})]}),r.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[r.jsx("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Run PWA Tests"}),!e&&r.jsx("button",{onClick:f,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Install PWA"}),o!=="granted"&&r.jsx("button",{onClick:v,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Enable Notifications"}),r.jsx("button",{onClick:m,className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Test Notification"})]}),c.length>0&&r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Test Results"}),r.jsx("div",{className:"space-y-3",children:c.map((p,x)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mt-1 ${p.status==="passed"?"bg-green-500":p.status==="warning"?"bg-yellow-500":"bg-red-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:p.test}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:p.details})]})]},x))})]})]})})})}function eUe(){const[e,t]=b.useState(!1),{toast:n}=ft(),s=b8(),i=Mk(),a=[{title:"Shopping Cart",icon:r.jsx(_n,{className:"h-5 w-5"}),description:"Cart and shopping interactions",sounds:[{name:"Add to Cart",action:i.onCartAdd,icon:"",description:"When user adds item to cart"},{name:"Remove from Cart",action:i.onCartRemove,icon:"",description:"When user removes item from cart"},{name:"Clear Cart",action:i.onCartClear,icon:"",description:"When user clears entire cart"},{name:"Product Like",action:i.onProductLike,icon:"",description:"When user likes/favorites a product"}]},{title:"Orders & Payment",icon:r.jsx(Ye,{className:"h-5 w-5"}),description:"Order processing and payment sounds",sounds:[{name:"Order Placed",action:i.onOrderPlaced,icon:"",description:"When order is successfully placed"},{name:"Order Confirmed",action:i.onOrderConfirmed,icon:"",description:"When order is confirmed by vendor"},{name:"Order Ready",action:i.onOrderReady,icon:"",description:"When order is ready for pickup/delivery"},{name:"Payment Success",action:i.onPaymentSuccess,icon:"",description:"When payment is processed successfully"}]},{title:"Notifications & Alerts",icon:r.jsx(Qt,{className:"h-5 w-5"}),description:"System notifications and alerts",sounds:[{name:"Notification",action:i.onNotification,icon:"",description:"General notification sound"},{name:"Alert",action:i.onAlert,icon:"",description:"Important alerts and warnings"},{name:"Success",action:i.onSuccess,icon:"",description:"Successful actions and confirmations"},{name:"Error",action:i.onError,icon:"",description:"Errors and failed actions"}]},{title:"User Interface",icon:r.jsx(Wr,{className:"h-5 w-5"}),description:"UI interactions and feedback",sounds:[{name:"Button Click",action:i.onButtonClick,icon:"",description:"General button clicks"},{name:"Modal Open",action:i.onModalOpen,icon:"",description:"When modal/dialog opens"},{name:"Modal Close",action:i.onModalClose,icon:"",description:"When modal/dialog closes"},{name:"Tab Switch",action:i.onTabSwitch,icon:"",description:"When switching between tabs"}]},{title:"Admin Actions",icon:r.jsx(Id,{className:"h-5 w-5"}),description:"Administrative actions and approvals",sounds:[{name:"Approve",action:i.onApprove,icon:"",description:"When admin approves something"},{name:"Reject",action:i.onReject,icon:"",description:"When admin rejects something"},{name:"Review Submit",action:i.onReviewSubmit,icon:"",description:"When review is submitted"}]}],o=()=>{t(!0),i.testAll(),n({title:"Testing All Sounds",description:"Playing all sound effects in sequence..."}),setTimeout(()=>t(!1),Object.keys(s).length*300+1e3)},l=f=>{const v=f[0]/100;s.setVolume(v),i.onButtonClick()},c=f=>{s.setEnabled(f),f&&i.onSuccess(),n({title:f?"Sound Effects Enabled":"Sound Effects Disabled",description:f?"Audio feedback is now active":"Audio feedback is now muted"})},d=(f,v)=>{console.log(` Testing sound: ${f}`),v(),n({title:"Sound Test",description:`${f} sound effect played`,duration:2e3})},h=()=>{console.log(" Testing cart-add.mp3 directly"),console.log(" Current volume:",s.volume),console.log(" Sound enabled:",s.isEnabled);const f=new Audio("/sounds/cart-add.mp3");f.volume=Math.max(.1,s.volume),f.addEventListener("loadstart",()=>console.log(" Loading cart-add.mp3...")),f.addEventListener("canplay",()=>console.log(" cart-add.mp3 can play")),f.addEventListener("error",v=>console.log(" cart-add.mp3 error:",v)),f.play().then(()=>{console.log(" cart-add.mp3 played successfully at volume:",f.volume),n({title:"Direct MP3 Test Success",description:`cart-add.mp3 played at ${Math.round(f.volume*100)}% volume`,duration:2e3})}).catch(v=>{console.log(" cart-add.mp3 failed:",v),n({title:"Direct MP3 Test Failed",description:v.message,variant:"destructive",duration:3e3})})},m=()=>{console.log(" Testing fallback beep sound");try{const f=new(window.AudioContext||window.webkitAudioContext),v=f.createOscillator(),p=f.createGain();v.connect(p),p.connect(f.destination),v.frequency.value=800,p.gain.value=s.volume*.3,v.start(),v.stop(f.currentTime+.1),console.log(" Fallback beep created successfully"),n({title:"Fallback Beep Test",description:"Web Audio API beep played",duration:2e3})}catch(f){const v=f instanceof Error?f.message:"Unknown error";console.log(" Fallback beep failed:",f),n({title:"Fallback Beep Failed",description:v,variant:"destructive",duration:3e3})}};return r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[r.jsx(Gte,{className:"h-8 w-8 text-blue-600"}),"Sound Effects Test Center"]}),r.jsx("p",{className:"text-muted-foreground",children:"Test and configure sound notifications for all app interactions"})]}),r.jsxs(K,{className:"mb-8 border-blue-200 bg-blue-50/30",children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Id,{className:"h-5 w-5 text-blue-600"}),"Sound Settings"]}),r.jsx(kt,{children:"Configure global sound settings and preferences"})]}),r.jsxs(G,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[s.isEnabled?r.jsx(Qte,{className:"h-4 w-4 text-green-600"}):r.jsx(xM,{className:"h-4 w-4 text-gray-400"}),r.jsxs("span",{className:"font-medium",children:["Sound Effects ",s.isEnabled?"Enabled":"Disabled"]})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Toggle audio feedback for user interactions"})]}),r.jsx(jn,{checked:s.isEnabled,onCheckedChange:c})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-medium",children:"Volume"}),r.jsxs(ue,{variant:"outline",children:[Math.round(s.volume*100),"%"]})]}),r.jsx(M7,{value:[s.volume*100],onValueChange:l,max:100,min:0,step:5,className:"w-full",disabled:!s.isEnabled})]}),r.jsxs("div",{className:"pt-4 border-t space-y-3",children:[r.jsxs($,{onClick:h,className:"w-full bg-green-600 hover:bg-green-700",size:"lg",children:[r.jsx(Hf,{className:"h-5 w-5 mr-2"}),"Test cart-add.mp3 Directly"]}),r.jsxs($,{onClick:m,className:"w-full bg-orange-600 hover:bg-orange-700",size:"lg",children:[r.jsx(Hf,{className:"h-5 w-5 mr-2"}),"Test Web Audio Beep"]}),r.jsx($,{onClick:o,disabled:e||!s.isEnabled,className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:e?r.jsxs(r.Fragment,{children:[r.jsx(xM,{className:"h-5 w-5 mr-2"}),"Testing All Sounds..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Hf,{className:"h-5 w-5 mr-2"}),"Test All Sound Effects"]})})]})]})]}),r.jsx("div",{className:"grid gap-6",children:a.map((f,v)=>r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[f.icon,f.title]}),r.jsx(kt,{children:f.description})]}),r.jsx(G,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.sounds.map((p,x)=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:p.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium",children:p.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:p.description})]})]}),r.jsxs($,{onClick:()=>d(p.name,p.action),disabled:!s.isEnabled,size:"sm",className:"w-full",variant:"outline",children:[r.jsx(Hf,{className:"h-4 w-4 mr-2"}),"Test Sound"]})]},x))})})]},v))}),r.jsxs(K,{className:"mt-8 border-green-200 bg-green-50/30",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2 text-green-700",children:[r.jsx(yt,{className:"h-5 w-5"}),"Sound Integration Status"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"font-medium text-green-800",children:" Integrated Features"}),r.jsxs("ul",{className:"space-y-1 text-green-700",children:[r.jsx("li",{children:" Shopping cart interactions"}),r.jsx("li",{children:" Order placement and confirmations"}),r.jsx("li",{children:" Login and authentication"}),r.jsx("li",{children:" Product wishlist actions"}),r.jsx("li",{children:" Payment processing"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"font-medium text-green-800",children:" Technical Details"}),r.jsxs("ul",{className:"space-y-1 text-green-700",children:[r.jsx("li",{children:" Web Audio API for sound generation"}),r.jsx("li",{children:" LocalStorage for settings persistence"}),r.jsx("li",{children:" Mobile-friendly with user interaction policy"}),r.jsx("li",{children:" Configurable volume and enable/disable"}),r.jsx("li",{children:" Graceful fallback for unsupported browsers"})]})]})]}),r.jsx(hn,{}),r.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Note:"})," Sound effects require user interaction to play due to browser policies"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Tip:"})," Settings are automatically saved and persist across sessions"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Android:"})," Sound effects work in the Android APK version with haptic feedback"]})]})]})]})]})}function tUe(){const[e,t]=b.useState([]),{toast:n}=ft();b.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("files");if(o)try{const l=JSON.parse(o);n({title:"Files Received",description:`Received ${l.length} file(s) via PWA File Handler`})}catch(l){console.error("Error parsing file data:",l)}},[n]);const s=a=>{const o=Array.from(a.target.files||[]);t(l=>[...l,...o]),n({title:"Files Added",description:`Added ${o.length} file(s)`})},i=a=>{const o=new FileReader;o.onload=l=>{var c;(c=l.target)==null||c.result,a.type.startsWith("image/")?console.log("Processing image:",a.name):a.type==="text/csv"?console.log("Processing CSV:",a.name):a.type==="application/json"&&console.log("Processing JSON:",a.name)},o.readAsText(a)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-blue-50 p-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(r0,{className:"h-6 w-6 text-emerald-600"}),"PWA File Handler"]}),r.jsx(kt,{children:"Handle files opened with Siraha Bazaar PWA. Supports images, CSV, and JSON files."})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/*,.csv,.json",onChange:s,className:"hidden",id:"file-upload"}),r.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[r.jsx(r0,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Click to upload files"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Supports: Images, CSV, JSON"})]})]}),e.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Uploaded Files:"}),e.map((a,o)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[a.type.startsWith("image/")?r.jsx(Bp,{className:"h-5 w-5 text-blue-500"}):r.jsx(Ws,{className:"h-5 w-5 text-green-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:a.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),r.jsx($,{size:"sm",onClick:()=>i(a),className:"bg-emerald-600 hover:bg-emerald-700",children:"Process"})]},o))]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"File Handler Features"})}),r.jsx(G,{children:r.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx(Bp,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"Image Files"}),r.jsx("p",{className:"text-sm text-gray-600",children:"PNG, JPG, JPEG, GIF, WebP"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx(Ws,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"CSV Files"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Comma-separated data"})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[r.jsx(Qd,{className:"h-8 w-8 text-purple-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"JSON Files"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Structured data files"})]})]})})]})]})})}function rUe(){const[e,t]=b.useState(""),[n,s]=b.useState(""),{toast:i}=ft();b.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("url");if(c)try{const d=decodeURIComponent(c);t(d),d.startsWith("web+siraha:")?s("Siraha Protocol"):d.startsWith("mailto:")&&s("Email Protocol"),i({title:"Protocol Handled",description:`Received ${n} protocol request`})}catch(d){console.error("Error parsing protocol data:",d)}},[i,n]);const a=()=>{if(e.startsWith("web+siraha:"))switch(e.replace("web+siraha://","")){case"products":window.location.href="/products";break;case"cart":window.location.href="/cart";break;case"orders":window.location.href="/orders";break;default:window.location.href="/"}},o=()=>{if(e.startsWith("mailto:")){const l=e.replace("mailto:","");window.location.href=`/contact?email=${encodeURIComponent(l)}`}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Od,{className:"h-6 w-6 text-blue-600"}),"PWA Protocol Handler"]}),r.jsx(kt,{children:"Handle custom protocols and links opened with Siraha Bazaar PWA"})]}),r.jsxs(G,{className:"space-y-4",children:[e?r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border",children:[r.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Protocol Received:"}),r.jsx("p",{className:"text-blue-700 break-all",children:e}),r.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Type: ",n]})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(vk,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"No protocol data received"})]}),e&&r.jsxs("div",{className:"flex gap-3",children:[e.startsWith("web+siraha:")&&r.jsxs($,{onClick:a,className:"bg-emerald-600 hover:bg-emerald-700",children:[r.jsx(ih,{className:"h-4 w-4 mr-2"}),"Handle Siraha Link"]}),e.startsWith("mailto:")&&r.jsxs($,{onClick:o,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(Md,{className:"h-4 w-4 mr-2"}),"Handle Email"]})]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Supported Protocols"})}),r.jsx(G,{children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[r.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Siraha Protocol"}),r.jsx("code",{className:"text-sm text-green-700",children:"web+siraha://action"}),r.jsxs("ul",{className:"text-sm text-green-600 mt-2 space-y-1",children:[r.jsx("li",{children:" web+siraha://products"}),r.jsx("li",{children:" web+siraha://cart"}),r.jsx("li",{children:" web+siraha://orders"})]})]}),r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Email Protocol"}),r.jsx("code",{className:"text-sm text-blue-700",children:"mailto:email@example.com"}),r.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"Opens contact form with pre-filled email"})]})]})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Test Protocol Links"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs($,{variant:"outline",onClick:()=>window.open("web+siraha://products","_self"),className:"w-full justify-start",children:[r.jsx(ih,{className:"h-4 w-4 mr-2"}),"Test: web+siraha://products"]}),r.jsxs($,{variant:"outline",onClick:()=>window.open("web+siraha://cart","_self"),className:"w-full justify-start",children:[r.jsx(ih,{className:"h-4 w-4 mr-2"}),"Test: web+siraha://cart"]}),r.jsxs($,{variant:"outline",onClick:()=>window.open("mailto:test@example.com","_self"),className:"w-full justify-start",children:[r.jsx(Md,{className:"h-4 w-4 mr-2"}),"Test: mailto:test@example.com"]})]})})]})]})})}function nUe(){const[e,t]=b.useState({title:"",text:"",url:"",files:[]}),{toast:n}=ft();b.useEffect(()=>{const i=new URLSearchParams(window.location.search),a=i.get("title")||"",o=i.get("text")||"",l=i.get("url")||"";t(c=>({...c,title:a,text:o,url:l})),(a||o||l)&&n({title:"Content Shared",description:"Received shared content via PWA Share Target"})},[n]);const s=async()=>{try{const i={title:e.title,text:e.text,url:e.url,timestamp:new Date().toISOString()};console.log("Processing shared data:",i),n({title:"Content Processed",description:"Shared content has been processed successfully"}),e.url.includes("product")?window.location.href="/products":window.location.href="/"}catch(i){console.error("Error processing shared content:",i),n({title:"Error",description:"Failed to process shared content"})}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(s0,{className:"h-6 w-6 text-purple-600"}),"PWA Share Target"]}),r.jsx(kt,{children:"Handle content shared to Siraha Bazaar PWA from other apps"})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium",children:"Title"}),r.jsx(de,{value:e.title,onChange:i=>t(a=>({...a,title:i.target.value})),placeholder:"Shared title"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium",children:"URL"}),r.jsx(de,{value:e.url,onChange:i=>t(a=>({...a,url:i.target.value})),placeholder:"Shared URL"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium",children:"Text Content"}),r.jsx(Yt,{value:e.text,onChange:i=>t(a=>({...a,text:i.target.value})),placeholder:"Shared text content",rows:4})]}),e.files.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium",children:"Shared Files"}),r.jsx("div",{className:"space-y-2",children:e.files.map((i,a)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx(Bp,{className:"h-5 w-5 text-purple-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:i.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(i.size/1024).toFixed(1)," KB"]})]})]},a))})]}),(e.title||e.text||e.url)&&r.jsx("div",{className:"pt-4 border-t",children:r.jsxs($,{onClick:s,className:"w-full bg-purple-600 hover:bg-purple-700",children:[r.jsx(Dd,{className:"h-4 w-4 mr-2"}),"Process Shared Content"]})})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Share Target Features"})}),r.jsx(G,{children:r.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[r.jsx(s0,{className:"h-8 w-8 text-purple-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"Text Sharing"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Receive shared text and URLs"})]}),r.jsxs("div",{className:"text-center p-4 bg-pink-50 rounded-lg",children:[r.jsx(Bp,{className:"h-8 w-8 text-pink-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"Image Sharing"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Accept shared images"})]}),r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx(ih,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium",children:"Link Handling"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Process shared links"})]})]})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"How to Test Share Target"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"1. Install PWA:"})," Add Siraha Bazaar to home screen"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"2. Share from another app:"})," Select share and choose Siraha Bazaar"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"3. Content will open here:"})," Shared content appears in this page"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"4. Process content:"}),' Click "Process Shared Content" to handle it']})]})})]})]})})}function sUe(){const[e,t]=b.useState("display_override"),{toast:n}=ft(),s=[{id:"display_override",title:"Display Override",icon:r.jsx(Vte,{className:"h-6 w-6"}),status:"active",description:"Advanced window controls and display modes",details:["Window controls overlay support","Minimal UI mode","Standalone app experience","Adaptive display based on device"],implementation:"Configured in manifest.json with display_override array"},{id:"edge_side_panel",title:"Edge Side Panel",icon:r.jsx(Ute,{className:"h-6 w-6"}),status:"active",description:"Side panel integration for Microsoft Edge",details:["Preferred width: 480px","Optimized for Edge browser","Enhanced multitasking","Quick access to app features"],implementation:"Configured with edge_side_panel in manifest.json"},{id:"file_handlers",title:"File Handlers",icon:r.jsx(r0,{className:"h-6 w-6"}),status:"active",description:"Handle file types directly with PWA",details:["Image files: PNG, JPG, JPEG, GIF, WebP","CSV data files","JSON configuration files","Direct file association"],implementation:"Implemented with /file-handler route and FileHandler.tsx"},{id:"handle_links",title:"Handle Links",icon:r.jsx(Od,{className:"h-6 w-6"}),status:"active",description:"Default handler for web links",details:["Preferred link handler","Captures external links","Seamless navigation","Deep link support"],implementation:'Set to "preferred" in manifest.json'},{id:"protocol_handlers",title:"Protocol Handlers",icon:r.jsx(vk,{className:"h-6 w-6"}),status:"active",description:"Custom protocol support",details:["web+siraha:// custom protocol","mailto: email protocol","Direct app actions","Cross-app communication"],implementation:"Implemented with /protocol-handler route and ProtocolHandler.tsx"},{id:"share_target",title:"Share Target",icon:r.jsx(s0,{className:"h-6 w-6"}),status:"active",description:"Receive shared content from other apps",details:["Text and URL sharing","Image file sharing","Multipart form data","Cross-platform sharing"],implementation:"Implemented with /share-target route and ShareTarget.tsx"},{id:"widgets",title:"Widgets",icon:r.jsx(M_,{className:"h-6 w-6"}),status:"active",description:"Home screen widgets and adaptive cards",details:["Quick Orders widget","Adaptive card templates","Real-time data updates","Home screen integration"],implementation:"Configured with widgets array and /api/widget-data/orders endpoint"},{id:"shortcuts",title:"Shortcuts",icon:r.jsx(yt,{className:"h-6 w-6"}),status:"active",description:"App shortcuts for quick actions",details:["Browse Products shortcut","My Orders shortcut","Shopping Cart shortcut","Context menu integration"],implementation:"Defined in manifest.json shortcuts array"}],i=o=>{switch(o){case"file_handlers":window.open("/file-handler","_blank");break;case"protocol_handlers":window.open("/protocol-handler","_blank");break;case"share_target":window.open("/share-target","_blank");break;case"shortcuts":n({title:"Shortcuts Active",description:"Right-click on PWA icon to see shortcuts"});break;default:n({title:"Feature Active",description:`${o.replace("_"," ")} is currently active`})}},a=s.find(o=>o.id===e);return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4",children:r.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[r.jsx(K,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:r.jsxs(re,{children:[r.jsxs(ne,{className:"text-2xl flex items-center gap-3",children:[r.jsx(Jd,{className:"h-8 w-8"}),"PWA Advanced Features Dashboard"]}),r.jsx(kt,{className:"text-blue-100",children:"Siraha Bazaar - Complete Progressive Web App implementation with all modern features"})]})}),r.jsx("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 gap-4",children:s.map(o=>r.jsx(K,{className:`cursor-pointer transition-all duration-200 hover:shadow-lg ${e===o.id?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>t(o.id),children:r.jsxs(G,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"text-blue-600",children:o.icon}),r.jsx(ue,{variant:o.status==="active"?"default":"secondary",className:o.status==="active"?"bg-green-100 text-green-800":"",children:o.status==="active"?"Active":"Inactive"})]}),r.jsx("h3",{className:"font-semibold text-sm mb-1",children:o.title}),r.jsx("p",{className:"text-xs text-gray-600",children:o.description})]})},o.id))}),a&&r.jsxs(K,{children:[r.jsxs(re,{children:[r.jsxs(ne,{className:"flex items-center gap-3",children:[a.icon,a.title,r.jsx(ue,{variant:"outline",className:"bg-green-100 text-green-800",children:" Active"})]}),r.jsx(kt,{children:a.description})]}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Features:"}),r.jsx("ul",{className:"space-y-1",children:a.details.map((o,l)=>r.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[r.jsx(yt,{className:"h-4 w-4 text-green-500"}),o]},l))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Implementation:"}),r.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:a.implementation})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsxs($,{onClick:()=>i(a.id),className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(ih,{className:"h-4 w-4 mr-2"}),"Test Feature"]}),a.id==="file_handlers"&&r.jsxs($,{variant:"outline",onClick:()=>window.open("/file-handler"),children:[r.jsx(r0,{className:"h-4 w-4 mr-2"}),"Open File Handler"]}),a.id==="protocol_handlers"&&r.jsxs($,{variant:"outline",onClick:()=>window.open("/protocol-handler"),children:[r.jsx(Od,{className:"h-4 w-4 mr-2"}),"Open Protocol Handler"]}),a.id==="share_target"&&r.jsxs($,{variant:"outline",onClick:()=>window.open("/share-target"),children:[r.jsx(s0,{className:"h-4 w-4 mr-2"}),"Open Share Target"]})]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Qd,{className:"h-5 w-5"}),"PWA Installation Status"]})}),r.jsx(G,{children:r.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[r.jsx(yt,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium text-green-800",children:"Manifest"}),r.jsx("p",{className:"text-sm text-green-600",children:"Valid PWA manifest"})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[r.jsx(yt,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium text-green-800",children:"Service Worker"}),r.jsx("p",{className:"text-sm text-green-600",children:"Active service worker"})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[r.jsx(yt,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-medium text-green-800",children:"HTTPS"}),r.jsx("p",{className:"text-sm text-green-600",children:"Secure connection"})]})]})})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsx(ne,{children:"Implementation Summary"})}),r.jsx(G,{children:r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsx("span",{className:"font-medium",children:"Total PWA Features"}),r.jsx(ue,{className:"bg-green-600",children:s.length})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[r.jsx("span",{className:"font-medium",children:"Active Features"}),r.jsx(ue,{className:"bg-blue-600",children:s.filter(o=>o.status==="active").length})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[r.jsx("span",{className:"font-medium",children:"Android PWA Ready"}),r.jsx(ue,{className:"bg-purple-600",children:" Yes"})]})]})})]})]})})}const iUe=async()=>{try{console.log(" Testing Firebase configuration...");const e={apiKey:"AIzaSyBbHSV2EJZ9BPE1C1ZC4_ZNYwFYJIR9VSo",authDomain:"myweb-1c1f37b3.firebaseapp.com",projectId:"myweb-1c1f37b3",storageBucket:"myweb-1c1f37b3.firebasestorage.app",messagingSenderId:"774950702828",appId:"1:774950702828:web:09c2dfc1198d45244a9fc9"},t="BBeY7MuZB7850MAibtxV4fJxcKYAF3oQxNBB60l1FzHK63IjkTSI9ZFDPW1hmHnKSJPckGFM5gu7JlaCGavnwqA";console.log(" Using VAPID key pair:",{publicKey:t.substring(0,20)+"...",privateKey:"kAXgMUCBn7sp_zA7lgCH0GD3_mbwA5BAKpWbhQ5STRM".substring(0,10)+"...",keyPairMatch:"Validating pair"}),console.log(" Firebase Config Test:",{projectId:e.projectId,messagingSenderId:e.messagingSenderId,vapidLength:t.length});const s=nT(e,"test-app"),i=TV(s);if(!("serviceWorker"in navigator))throw new Error("Service Worker not supported");if(Notification.permission!=="granted"&&(console.log(" Requesting notification permission..."),await Notification.requestPermission()!=="granted"))throw new Error("Notification permission denied");console.log(" Notification permission granted"),console.log(" Attempting token generation with clean Firebase instance...");const a=await uT(i,{vapidKey:t,serviceWorkerRegistration:await navigator.serviceWorker.register("/firebase-messaging-sw.js")});return a?(console.log(" SUCCESS! FCM Token generated:",a.substring(0,20)+"..."+a.substring(a.length-20)),{success:!0,token:a}):(console.log(" Token generation returned null"),{success:!1,error:"Token generation returned null"})}catch(e){return console.error(" Firebase config test failed:",e),(e==null?void 0:e.code)==="messaging/token-subscribe-failed"&&(console.log(" TROUBLESHOOTING: Token subscribe failed"),console.log("1. Check if VAPID key is correctly configured in Firebase Console"),console.log("2. Go to Firebase Console  Project Settings  Cloud Messaging  Web Push certificates"),console.log("3. Generate new key pair if current key is invalid"),console.log("4. Make sure the domain is authorized in Firebase settings")),{success:!1,error:e.message,code:e.code}}},aUe=e=>{const n=/^[A-Za-z0-9_-]{64,}$/.test(e)&&e.length>=64;return console.log(" VAPID Key Validation:",{length:e.length,format:n?"Valid":"Invalid",sample:e.substring(0,20)+"..."}),n},oUe=async()=>{try{if(!("serviceWorker"in navigator))return console.log(" Service Worker not supported"),!1;console.log(" Checking service worker registration...");const e=await navigator.serviceWorker.getRegistrations();console.log(" Existing service worker registrations:",e.length),e.forEach((n,s)=>{var i,a;console.log(`SW ${s+1}:`,{scope:n.scope,state:(i=n.active)==null?void 0:i.state,scriptURL:(a=n.active)==null?void 0:a.scriptURL})});const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js");return console.log(" Firebase service worker registered:",t.scope),!0}catch(e){return console.error(" Service worker debug failed:",e),!1}};function lUe(){const[e,t]=b.useState(""),[n,s]=b.useState(!1),[i,a]=b.useState(!1),[o,l]=b.useState(Notification.permission),{toast:c}=ft(),d=async()=>{s(!0),console.log(" User clicked Generate FCM Token (YouTube tutorial style)...");try{if(console.log(" Step 1: Initializing Firebase Cloud Messaging..."),await gg(),Notification.permission!=="granted"){console.log(" Step 2: Requesting notification permission...");const x=await Lb();if(l(Notification.permission),!x){c({title:"Permission Required",description:"Notification permission is needed to generate FCM token",variant:"destructive"});return}}console.log(" Step 3: Generating FCM token...");const p=await hT();if(p)t(p),console.log(" SUCCESS: FCM Token generated and displayed!"),console.log("=".repeat(80)),console.log(" YOUTUBE TUTORIAL STYLE - FCM TOKEN READY!"),console.log("=".repeat(80)),console.log(" Your FCM Token:",p),console.log(" Token Length:",p.length,"characters"),console.log(" Ready for testing with Firebase Console!"),console.log("=".repeat(80)),c({title:"FCM Token Generated!",description:"Check console for full token. Token is now displayed below."});else throw new Error("Token generation returned null")}catch(p){console.error(" FCM Token generation failed:",p),c({title:"Token Generation Failed",description:p instanceof Error?p.message:"Unknown error occurred",variant:"destructive"})}finally{s(!1)}},h=()=>{e&&(navigator.clipboard.writeText(e),c({title:"Token Copied",description:"FCM token copied to clipboard"}))},m=async()=>{if(!e){c({title:"No FCM Token",description:"Please generate an FCM token first",variant:"destructive"});return}s(!0),console.log(" Testing FCM push notification with token:",e.substring(0,20)+"...");try{const x=await(await fetch("/api/test-fcm-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Siraha Bazaar FCM Test",body:"Push notification is working! ",data:{type:"test",url:"/fcm-test"},fcmToken:e})})).json();if(x.success)console.log(" FCM test notification sent:",x),c({title:"Push Notification Sent!",description:x.notificationSent?"Check your browser/device for the notification":"Server configured successfully"});else throw new Error(x.error||"Unknown error")}catch(p){console.error(" FCM test failed:",p),c({title:"Test Failed",description:p instanceof Error?p.message:"Failed to send test notification",variant:"destructive"})}finally{s(!1)}},f=async()=>{a(!0),console.log(" Starting Firebase Configuration Debug...");try{aUe("BBeY7MuZB7850MAibtxV4fJxcKYAF3oQxNBB60l1FzHK63IjkTSI9ZFDPW1hmHnKSJPckGFM5gu7JlaCGavnwqA"),await oUe();const x=await iUe();x.success&&x.token?(t(x.token),l(Notification.permission),c({title:"Debug Success!",description:"FCM token generated using debug configuration"})):c({title:"Debug Failed",description:x.error||"Firebase configuration issues detected",variant:"destructive"})}catch(p){console.error("Debug failed:",p),c({title:"Debug Error",description:p.message,variant:"destructive"})}finally{a(!1)}},v=()=>{const p=o==="granted"?"default":o==="denied"?"destructive":"secondary";return r.jsx(ue,{variant:p,children:o.charAt(0).toUpperCase()+o.slice(1)})};return r.jsxs(K,{className:"w-full max-w-4xl",children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center gap-2",children:[r.jsx(Qt,{className:"h-5 w-5"}),"FCM Token Generator (YouTube Tutorial Style)"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Notification Permission:"}),v()]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{onClick:d,disabled:n||i,className:"w-full",size:"lg",children:n?r.jsxs(r.Fragment,{children:[r.jsx(Ms,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating FCM Token..."]}):r.jsxs(r.Fragment,{children:[r.jsx(T_,{className:"h-4 w-4 mr-2"}),"Generate FCM Token (Check Console)"]})}),r.jsx($,{onClick:f,disabled:n||i,variant:"outline",className:"w-full",size:"lg",children:i?r.jsxs(r.Fragment,{children:[r.jsx(Ms,{className:"h-4 w-4 mr-2 animate-spin"}),"Running Firebase Debug..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Mte,{className:"h-4 w-4 mr-2"})," Debug Firebase Config (Fix 401 Error)"]})}),e&&r.jsxs($,{onClick:m,disabled:n||i,variant:"default",className:"w-full bg-green-600 hover:bg-green-700",size:"lg",children:[r.jsx(Dd,{className:"h-4 w-4 mr-2"})," Test FCM Push Notification"]})]}),e&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium",children:"FCM Token Generated:"}),r.jsxs($,{onClick:h,variant:"outline",size:"sm",children:[r.jsx(Rte,{className:"h-4 w-4 mr-1"}),"Copy"]})]}),r.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-800 rounded-md font-mono text-sm break-all",children:e}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Token length: ",e.length," characters",r.jsx("br",{})," Ready for Firebase Console testing",r.jsx("br",{})," Full token is also printed in browser console"]})]}),r.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[r.jsx("p",{children:" This generates a Firebase Cloud Messaging token for web push notifications"}),r.jsx("p",{children:" The token is printed to console with detailed logging (like YouTube tutorials)"}),r.jsx("p",{children:" Use this token to test push notifications from Firebase Console"}),r.jsx("p",{children:" Token will be displayed both here and in the browser console"})]})]})]})}function cUe(){const[e,t]=b.useState({serviceWorker:!1,permission:"default",token:"",vapidSupport:!1}),[n,s]=b.useState(!1),{toast:i}=ft();b.useEffect(()=>{a()},[]);const a=async()=>{const m={serviceWorker:"serviceWorker"in navigator,permission:Notification.permission,token:"",vapidSupport:"PushManager"in window};if(m.serviceWorker&&m.vapidSupport)try{const{initializeFirebaseNotifications:f,getFirebaseToken:v}=await $p(async()=>{const{initializeFirebaseNotifications:p,getFirebaseToken:x}=await Promise.resolve().then(()=>g0);return{initializeFirebaseNotifications:p,getFirebaseToken:x}},void 0);if(await f(),console.log("Firebase initialized successfully"),Notification.permission==="granted")try{const p=await v();m.token=p?p.substring(0,20)+"...":"",console.log("FCM token obtained successfully")}catch(p){console.log("FCM token not available yet:",p)}}catch(f){console.error("Error initializing Firebase:",f)}t(m)},o=async()=>{if(!("Notification"in window)){i({title:"Not Supported",description:"This browser doesn't support notifications",variant:"destructive"});return}try{const m=await Notification.requestPermission();if(t(f=>({...f,permission:m})),m==="granted")try{const{getFirebaseToken:f}=await $p(async()=>{const{getFirebaseToken:p}=await Promise.resolve().then(()=>g0);return{getFirebaseToken:p}},void 0),v=await f();v&&(t(p=>({...p,token:v.substring(0,20)+"..."})),i({title:"FCM Ready",description:"Push notifications enabled with VAPID token"}))}catch(f){console.error("Error getting FCM token:",f),i({title:"Permission Granted",description:"Push notifications enabled (FCM token pending)"})}else i({title:"Permission Denied",description:"Push notifications won't work without permission",variant:"destructive"})}catch(m){console.error("Error requesting permission:",m),i({title:"Error",description:"Failed to request notification permission",variant:"destructive"})}},l=()=>{Notification.permission==="granted"?(new Notification("Siraha Bazaar Test",{body:"Local notification test successful! ",icon:"/favicon.ico",badge:"/favicon.ico",tag:"test-notification"}),i({title:"Test Sent",description:"Local notification should appear now"})):i({title:"Permission Required",description:"Please grant notification permission first",variant:"destructive"})},c=async()=>{s(!0);try{const m=await fetch("/api/test-fcm-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Siraha Bazaar FCM Test",body:"Server-side FCM push notification test! ",data:{type:"test",url:"/fcm-test"}})});if(m.ok){const f=await m.json();i({title:"FCM Test Sent",description:`Push notification sent via FCM: ${f.messageId||"Success"}`})}else{const f=await m.json();i({title:"FCM Test Failed",description:f.error||"Server-side push notification failed",variant:"destructive"})}}catch(m){console.error("Error testing FCM:",m),i({title:"Error",description:"Failed to send test notification",variant:"destructive"})}finally{s(!1)}},d=(m,f)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:f}),r.jsxs(ue,{variant:m?"default":"destructive",className:"ml-2",children:[m?r.jsx(yt,{className:"w-3 h-3 mr-1"}):r.jsx(ps,{className:"w-3 h-3 mr-1"}),m?"Ready":"Not Available"]})]}),h=m=>{const f=m==="granted"?"default":m==="denied"?"destructive":"secondary",v=m==="granted"?r.jsx(yt,{className:"w-3 h-3 mr-1"}):r.jsx(ps,{className:"w-3 h-3 mr-1"});return r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Notification Permission"}),r.jsxs(ue,{variant:f,className:"ml-2",children:[v,m.charAt(0).toUpperCase()+m.slice(1)]})]})};return r.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsx(Qt,{className:"w-8 h-8 mr-3 text-blue-600"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"FCM Push Notifications Test"}),r.jsx("p",{className:"text-gray-600",children:"Test Firebase Cloud Messaging integration for Siraha Bazaar"})]})]}),r.jsx("div",{className:"mb-6",children:r.jsx(lUe,{})}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center",children:[r.jsx(Jd,{className:"w-5 h-5 mr-2"}),"FCM System Status"]})}),r.jsxs(G,{className:"space-y-4",children:[d(e.serviceWorker,"Service Worker Support"),d(e.vapidSupport,"Push Manager (VAPID)"),h(e.permission),r.jsxs("div",{className:"pt-4 border-t",children:[r.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["FCM Status: ",e.serviceWorker&&e.vapidSupport?r.jsx("span",{className:"text-green-600 font-medium",children:"Configured "}):r.jsx("span",{className:"text-red-600 font-medium",children:"Not Ready "})]}),r.jsx($,{onClick:a,variant:"outline",size:"sm",className:"w-full",children:"Refresh Status"})]})]})]}),r.jsxs(K,{children:[r.jsx(re,{children:r.jsxs(ne,{className:"flex items-center",children:[r.jsx(Dd,{className:"w-5 h-5 mr-2"}),"Notification Tests"]})}),r.jsxs(G,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx($,{onClick:o,disabled:e.permission==="granted",className:"w-full",variant:e.permission==="granted"?"secondary":"default",children:e.permission==="granted"?"Permission Granted ":"Request Permission"}),r.jsx($,{onClick:l,disabled:e.permission!=="granted",variant:"outline",className:"w-full",children:"Test Local Notification"}),r.jsx($,{onClick:c,disabled:e.permission!=="granted"||n,className:"w-full",children:n?"Sending...":"Test FCM Push Notification"})]}),r.jsx("div",{className:"pt-4 border-t text-sm text-gray-600",children:r.jsxs("p",{children:[r.jsx("strong",{children:"Note:"})," FCM requires HTTPS in production. Development testing may use localhost."]})})]})]})]}),r.jsxs(K,{className:"mt-6",children:[r.jsx(re,{children:r.jsx(ne,{children:"FCM Implementation Details"})}),r.jsx(G,{children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:" Configured Components:"}),r.jsxs("ul",{className:"text-sm space-y-1 text-gray-600",children:[r.jsx("li",{children:" VAPID Keys configured in environment"}),r.jsx("li",{children:" Firebase Service Worker (firebase-messaging-sw.js)"}),r.jsx("li",{children:" Push Notification Service (server-side)"}),r.jsx("li",{children:" FCM API endpoints (/api/test-fcm-notification)"}),r.jsx("li",{children:" Web Push library integration"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:" Ready Features:"}),r.jsxs("ul",{className:"text-sm space-y-1 text-gray-600",children:[r.jsx("li",{children:" Order update notifications"}),r.jsx("li",{children:" Delivery assignment alerts"}),r.jsx("li",{children:" Promotional push messages"}),r.jsx("li",{children:" Real-time status updates"}),r.jsx("li",{children:" Background message handling"})]})]})]})})]})]})}function dUe(){const{mode:e}=ua();return r.jsx("div",{className:"relative",children:r.jsxs(see,{children:[r.jsx(it,{path:"/",component:e==="shopping"?vD:yD}),r.jsx(it,{path:"/home",component:e==="shopping"?vD:yD}),r.jsx(it,{path:"/categories",component:iL}),r.jsx(it,{path:"/food-categories",component:iL}),r.jsx(it,{path:"/products",component:Zme}),r.jsx(it,{path:"/quick-bites",component:efe}),r.jsx(it,{path:"/products/:id",component:bD}),r.jsx(it,{path:"/food/:id",component:bD}),r.jsx(it,{path:"/cart",component:Kpe}),r.jsx(it,{path:"/checkout",component:ixe}),r.jsx(it,{path:"/order-confirmation",component:axe}),r.jsx(it,{path:"/login",component:lxe}),r.jsx(it,{path:"/register",component:dxe}),r.jsx(it,{path:"/forgot-password",component:hxe}),r.jsx(it,{path:"/stores",component:zD}),r.jsx(it,{path:"/restaurants",component:zD}),r.jsx(it,{path:"/stores/:id",component:$D}),r.jsx(it,{path:"/restaurants/:id",component:FD}),r.jsx(it,{path:"/store/:id",component:$D}),r.jsx(it,{path:"/restaurant/:id",component:FD}),r.jsx(it,{path:"/account",component:Kxe}),r.jsx(it,{path:"/delete-account",component:Gxe}),r.jsx(it,{path:"/shopkeeper-dashboard",component:tge}),r.jsx(it,{path:"/customer-dashboard",component:ige}),r.jsx(it,{path:"/admin",component:sL}),r.jsx(it,{path:"/admin/login",component:dge}),r.jsx(it,{path:"/admin/panel",component:lge}),r.jsx(it,{path:"/admin/dashboard",component:sL}),r.jsx(it,{path:"/store-maps",component:pbe}),r.jsx(it,{path:"/restaurant-maps",component:ybe}),r.jsx(it,{path:"/wishlist",component:jbe}),r.jsx(it,{path:"/flash-sales",component:YVe}),r.jsx(it,{path:"/special-offers",component:r$}),r.jsx(it,{path:"/food-offers",component:r$}),r.jsx(it,{path:"/notification-test",component:XVe}),r.jsx(it,{path:"/pwa-features",component:sUe}),r.jsx(it,{path:"/fcm-test",component:cUe}),r.jsx(it,{path:"/sound-test",component:eUe}),r.jsx(it,{path:"/file-handler",component:tUe}),r.jsx(it,{path:"/protocol-handler",component:rUe}),r.jsx(it,{path:"/share-target",component:nUe}),r.jsx(it,{path:"/seller/dashboard",component:Nbe}),r.jsx(it,{path:"/restaurant/dashboard",component:kVe}),r.jsx(it,{path:"/seller/store",component:Abe}),r.jsx(it,{path:"/seller/inventory",component:_be}),r.jsx(it,{path:"/seller/promotions",component:Cbe}),r.jsx(it,{path:"/seller/orders",component:kbe}),r.jsx(it,{path:"/seller/products/add",component:Obe}),r.jsx(it,{path:"/delivery-partner-dashboard",component:ty}),r.jsx(it,{path:"/delivery-partner/dashboard",component:ty}),r.jsx(it,{path:"/delivery-partner/modern",component:OVe}),r.jsx(it,{path:"/delivery-partner",component:ty}),r.jsx(it,{path:"/delivery-partner/enhanced",component:ty}),r.jsx(it,{path:"/delivery-partner/test",component:DVe}),r.jsx(it,{path:"/delivery-partner/notifications",component:IVe}),r.jsx(it,{path:"/delivery-partner/register",component:WVe}),r.jsx(it,{path:"/delivery-partner/quick-reg",component:VVe}),r.jsx(it,{path:"/delivery-partner/tracking",component:FVe}),r.jsx(it,{path:"/delivery-map/:id",component:KVe}),r.jsx(it,{path:"/admin/delivery-partners",component:HVe}),r.jsx(it,{path:"/orders/:orderId/tracking",component:qVe}),r.jsx(it,{path:"/tracking-demo",component:$Ve}),r.jsx(it,{path:"/pwa-test",component:JVe}),r.jsx(it,{component:xse})]})})}function uUe(){return b.useEffect(()=>{ex.initialize(),console.log("React app mounted successfully")},[]),b.useEffect(()=>{setTimeout(async()=>{console.log(" Starting FCM initialization (like YouTube tutorial)...");try{if(await gg(),Notification.permission==="granted")console.log(" Notification permission already granted - FCM ready!");else if(Notification.permission==="default")if(console.log(" Requesting notification permission for FCM token..."),await Lb()){console.log(" Notification permission granted! Getting FCM token...");try{const{getFirebaseToken:n}=await $p(async()=>{const{getFirebaseToken:i}=await Promise.resolve().then(()=>g0);return{getFirebaseToken:i}},void 0);await n()&&console.log(" SUCCESS: FCM Token generated after permission grant!")}catch(n){console.error(" Failed to get FCM token after permission grant:",n)}}else console.log(" Notification permission denied - FCM token cannot be generated");else console.log(" Notification permission permanently denied")}catch(t){console.error(" FCM initialization failed:",t)}},2e3)},[]),r.jsx(oo,{children:r.jsx(See,{client:Br,children:r.jsx(dse,{children:r.jsx(hse,{children:r.jsx(mse,{children:r.jsx(fse,{children:r.jsx(pse,{children:r.jsx(lse,{children:r.jsxs(oo,{children:[r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx(oo,{children:r.jsx(GVe,{})}),r.jsx(oo,{children:r.jsx(gue,{className:"md:hidden"})}),r.jsx(oo,{children:r.jsx(fle,{})}),r.jsx("main",{className:"flex-1 pb-16 md:pb-0",children:r.jsx(oo,{children:r.jsx(dUe,{})})}),r.jsx(oo,{children:r.jsx(xle,{})}),r.jsx(oo,{children:r.jsx(ple,{})})]}),r.jsx(Rre,{}),r.jsx(QVe,{})]})})})})})})})})})}class Xu{constructor(){this.isAndroidApp=!1,this.currentToken=null,this.detectAndroidApp(),this.setupFCMTokenHandler()}static getInstance(){return Xu.instance||(Xu.instance=new Xu),Xu.instance}detectAndroidApp(){var t;this.isAndroidApp=!!(window.AndroidApp&&typeof window.AndroidApp.showToast=="function"),this.isAndroidApp?(console.log(" Running in Android WebView"),(t=window.AndroidApp)==null||t.logMessage("Android FCM Handler initialized")):console.log(" Running in web browser - Android Bridge not available")}setupFCMTokenHandler(){window.updateFCMToken=t=>{console.log(" FCM Token received from Android:",t.substring(0,20)+"..."),this.currentToken=t,this.registerTokenWithServer(t)}}async registerTokenWithServer(t){var n,s,i;try{const a=this.getCurrentUserId();if(!a){console.log(" No user logged in, storing token for later registration"),localStorage.setItem("pendingFCMToken",t);return}console.log(` Registering FCM token for user ${a}...`);const l=await(await fetch("/api/device-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:parseInt(a),token:t,deviceType:"android"})})).json();l.success?(console.log(" FCM token registered successfully"),localStorage.removeItem("pendingFCMToken"),this.isAndroidApp&&((n=window.AndroidApp)==null||n.showToast("Notifications enabled!"))):(console.error(" Failed to register FCM token:",l.error),this.isAndroidApp&&((s=window.AndroidApp)==null||s.showToast("Failed to enable notifications")))}catch(a){console.error(" Error registering FCM token:",a),this.isAndroidApp&&((i=window.AndroidApp)==null||i.showToast("Network error - notifications may not work"))}}getCurrentUserId(){var s;try{const i=localStorage.getItem("user");if(i)return(s=JSON.parse(i).id)==null?void 0:s.toString()}catch{}const t=localStorage.getItem("userId");if(t)return t;const n=sessionStorage.getItem("userId");return n||null}registerPendingToken(){const t=localStorage.getItem("pendingFCMToken");t&&this.getCurrentUserId()&&(console.log(" Registering pending FCM token after login..."),this.registerTokenWithServer(t))}async requestTokenRegistration(){this.currentToken?await this.registerTokenWithServer(this.currentToken):console.log(" No FCM token available yet")}isRunningInAndroidApp(){return this.isAndroidApp}async sendTestNotification(){var n,s;const t=this.getCurrentUserId();if(!t){console.log(" No user logged in for test notification");return}try{const a=await(await fetch(`/api/test-user-notification/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Test from Android App",body:"This is a test notification from your Android app!"})})).json();console.log("Test notification result:",a),this.isAndroidApp&&((n=window.AndroidApp)==null||n.showToast(a.success?"Test notification sent!":"Test failed - check logs"))}catch(i){console.error("Test notification error:",i),this.isAndroidApp&&((s=window.AndroidApp)==null||s.showToast("Test failed - network error"))}}}const hUe=Xu.getInstance();window.androidFCMHandler=hUe;window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason),e.preventDefault()});window.addEventListener("error",e=>{console.error("Uncaught error:",e.error)});try{const e=document.getElementById("root");if(!e)throw new Error("Root element not found");e.innerHTML='<div style="padding: 20px; text-align: center;">Loading Siraha Bazaar...</div>',PF(e).render(r.jsx(oo,{children:r.jsx(uUe,{})})),console.log("React app mounted successfully"),Po.initialize().then(()=>{console.log("PWA features initialized")}).catch(n=>{console.error("PWA initialization failed:",n)})}catch(e){console.error("Failed to mount React app:",e);const t=(e==null?void 0:e.message)||String(e);document.body.innerHTML=`<div style="padding: 20px; color: red; text-align: center;">Error mounting React app: ${t}</div>`}
